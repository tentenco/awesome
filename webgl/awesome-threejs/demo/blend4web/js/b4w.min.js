(function(D){function w(N){if(f[N])return f[N].exports;var U=f[N]={QX:N,mR:!1,exports:{}};D[N].call(U.exports,U,U.exports,w);U.mR=!0;return U.exports}var f={};w.kX=D;w.gX=f;w.d=function(f,U,n){w.MJ(f,U)||Object.defineProperty(f,U,{configurable:!1,enumerable:!0,get:n})};w.KW=function(f){var N=f&&f.IW?function(){return f["default"]}:function(){return f};w.d(N,"a",N);return N};w.MJ=function(f,w){return Object.prototype.hasOwnProperty.call(f,w)};w.TW="";return w(w.pX=84)})([function(D,w,f){var N=f(32),
U={};w.a=function(f,y){function d(){return function(f){f=f||"__b4w_default";if(void 0!==m[f])return m[f];m[f]=n?{}:d();y(f,m[f]);return m[f]}}var m={},n="__"==f.split("").slice(0,2).join("");if(void 0!==U[f])return U[f];var v=n?d():d()();return N.a._n_module[f]=U[f]=v}},function(D,w,f){function N(f,n){function y(a,d){var k=[];-1<a[0].indexOf("%c")?k.push(a[0].replace("%c","%c"+d+": ")):k.push(d+": "+a[0]);for(d=1;d<a.length;d++)k.push(a[d]);return k}function d(){r++;var a=y(arguments,"B4W ERROR");
console.error.apply(console,a)}function m(a){a in z||(z[a]=a,d([a]))}function C(a,d){m(a+"() is deprecated, use "+d+"() instead.")}var v=!1,r=0,p=0,z={};n.KT=function(a){v=a};n.Wd=function(){console.log.apply(console,arguments)};n.log=function(){if(v){var a=y(arguments,"B4W LOG");console.log.apply(console,a)}};n.ME=y;n.error=d;n.Ma=m;n.ef=C;n.nX=function(a,d){switch(1<d.length){case !0:m(a+"() is deprecated, use "+d.slice(0,-1).join("(), ")+"() or "+d[d.length-1]+"() instead.");break;case !1:C(a,
d[0])}};n.Zu=function(a,d){void 0===d?m('Config option "'+a+'" is deprecated.'):m('Config option "'+a+'" is deprecated, use "'+d+'" instead.')};n.warn=function(){p++;var a=y(arguments,"B4W WARN");console.warn.apply(console,a)};n.info=function(){var a=y(arguments,"B4W INFO");console.info.apply(console,a)};n.gP=function(){r++;var a=y(arguments,"B4W EXPORT ERROR");console.error.apply(console,a)};n.hP=function(){p++;var a=y(arguments,"B4W EXPORT WARNING");console.warn.apply(console,a)};n.time=function(){v&&
console.time.apply(console,arguments)};n.timeEnd=function(){v&&console.timeEnd.apply(console,arguments)};n.group=function(){console.group.apply(console,arguments)};n.groupCollapsed=function(){console.groupCollapsed.apply(console,arguments)};n.groupEnd=function(){console.groupEnd.apply(console,arguments)};n.clear=function(){"function"==typeof console.clear&&console.clear.apply(console,arguments)};n.CQ=function(){return p};n.fQ=function(){return r};n.clear_errors_warnings=function(){r=p=0}}D=f(0);f=
Object(D.a)("print",N);Object(D.a)("__print",N);w.a=f},function(D,w,f){function N(g){return 0<g?1:0>g?-1:0}function U(g,e,c){var b=g[0],h=g[1];g=g[2];var a=Math.cos(b/2),l=Math.cos(h/2),k=Math.cos(g/2),q=Math.sin(b/2);h=Math.sin(h/2);var t=Math.sin(g/2);if(-1<qa.indexOf(e))var u=Math.cos((b+g)/2),d=Math.sin((b+g)/2),A=Math.cos((b-g)/2),m=Math.sin((b-g)/2),T=Math.cos((g-b)/2),P=Math.sin((g-b)/2);switch(e){case wa:c[0]=l*d;c[1]=h*A;c[2]=h*m;c[3]=l*u;break;case X:c[0]=h*m;c[1]=l*d;c[2]=h*A;c[3]=l*u;
break;case Ga:c[0]=h*A;c[1]=h*m;c[2]=l*d;c[3]=l*u;break;case Ha:c[0]=l*d;c[1]=h*P;c[2]=h*T;c[3]=l*u;break;case ua:c[0]=h*T;c[1]=l*d;c[2]=h*P;c[3]=l*u;break;case Ca:c[0]=h*P;c[1]=h*T;c[2]=l*d;c[3]=l*u;break;case la:c[0]=q*l*k+a*h*t;c[1]=a*h*k-q*l*t;c[2]=a*l*t+q*h*k;c[3]=a*l*k-q*h*t;break;case sa:c[0]=a*l*t+q*h*k;c[1]=q*l*k+a*h*t;c[2]=a*h*k-q*l*t;c[3]=a*l*k-q*h*t;break;case ia:c[0]=a*h*k-q*l*t;c[1]=a*l*t+q*h*k;c[2]=q*l*k+a*h*t;c[3]=a*l*k-q*h*t;break;case ra:c[0]=q*l*k-a*h*t;c[1]=a*l*t-q*h*k;c[2]=a*
h*k+q*l*t;c[3]=a*l*k+q*h*t;break;case Q:c[0]=a*h*k+q*l*t;c[1]=q*l*k-a*h*t;c[2]=a*l*t-q*h*k;c[3]=a*l*k+q*h*t;break;case Aa:c[0]=a*l*t-q*h*k,c[1]=a*h*k+q*l*t,c[2]=q*l*k-a*h*t,c[3]=a*l*k+q*h*t}return c}function n(g,c,e){var b=g[0],h=g[1],a=g[2];g=g[3];switch(c){case wa:e[0]=Math.atan2(b*h+a*g,h*g-b*a);e[1]=Math.acos(1-2*(h*h+a*a));e[2]=Math.atan2(b*h-a*g,b*a+h*g);break;case X:e[0]=Math.atan2(b*g+h*a,a*g-b*h);e[1]=Math.acos(1-2*(b*b+a*a));e[2]=Math.atan2(h*a-b*g,b*h+a*g);break;case Ga:e[0]=Math.atan2(b*
a+h*g,b*g-h*a);e[1]=Math.acos(1-2*(b*b+h*h));e[2]=Math.atan2(b*a-h*g,b*g+h*a);break;case Ha:e[0]=Math.atan2(b*a-h*g,b*h+a*g);e[1]=Math.acos(1-2*(h*h+a*a));e[2]=Math.atan2(b*a+h*g,a*g-b*h);break;case ua:e[0]=Math.atan2(b*h-a*g,b*g+h*a);e[1]=Math.acos(1-2*(b*b+a*a));e[2]=Math.atan2(b*h+a*g,b*g-h*a);break;case Ca:e[0]=Math.atan2(h*a-b*g,b*a+h*g);e[1]=Math.acos(1-2*(b*b+h*h));e[2]=Math.atan2(b*g+h*a,h*g-b*a);break;case la:e[0]=Math.atan2(2*(b*g-h*a),1-2*(b*b+h*h));e[1]=Math.asin(2*(b*a+h*g));e[2]=Math.atan2(2*
(a*g-b*h),1-2*(h*h+a*a));break;case sa:c=b*h+a*g;.499999<c?(e[0]=0,e[1]=Math.PI/2,e[2]=2*Math.atan2(b,g)):-.499999>c?(e[0]=0,e[1]=-Math.PI/2,e[2]=-2*Math.atan2(b,g)):(e[0]=Math.atan2(2*(h*g-b*a),1-2*(h*h+a*a)),e[1]=Math.asin(2*(b*h+a*g)),e[2]=Math.atan2(2*(b*g-h*a),1-2*(b*b+a*a)));break;case ia:e[0]=Math.atan2(2*(a*g-b*h),1-2*(b*b+a*a));e[1]=Math.asin(2*(b*g+h*a));e[2]=Math.atan2(2*(h*g-b*a),1-2*(b*b+h*h));break;case ra:e[0]=Math.atan2(2*(b*g+h*a),1-2*(b*b+a*a));e[1]=Math.asin(2*(a*g-b*h));e[2]=Math.atan2(2*
(b*a+h*g),1-2*(h*h+a*a));break;case Q:e[0]=Math.atan2(2*(b*a+h*g),1-2*(b*b+h*h));e[1]=Math.asin(2*(b*g-h*a));e[2]=Math.atan2(2*(b*h+a*g),1-2*(b*b+a*a));break;case Aa:c=h*g-b*a,.499999<c?(e[0]=0,e[1]=Math.PI/2,e[2]=-2*Math.atan2(a,g)):-.499999>c?(e[0]=0,e[1]=-Math.PI/2,e[2]=2*Math.atan2(a,g)):(e[0]=Math.atan2(2*(b*h+a*g),1-2*(h*h+a*a)),e[1]=Math.asin(2*(h*g-b*a)),e[2]=Math.atan2(2*(b*g+h*a),1-2*(b*b+h*h)))}return e}function y(g,e){var b=Math.cos(g[0]),c=Math.cos(g[1]),h=Math.cos(g[2]),a=Math.sin(g[0]),
l=Math.sin(g[1]);g=Math.sin(g[2]);var k=b*h,q=b*g,t=a*h,u=a*g;e[0]=c*h;e[1]=c*g;e[2]=-l;e[3]=l*t-q;e[4]=l*u+k;e[5]=c*a;e[6]=l*k+u;e[7]=l*q-t;e[8]=c*b;return e}function d(g,e,b){b||(b=new Float32Array(3));L.transformQuat(e,g,b);return b}function m(g){if(!(g instanceof Object))return g;var e=g.constructor;switch(e){case Int8Array:case Uint8Array:case Uint8ClampedArray:case Int16Array:case Uint16Array:case Int32Array:case Uint32Array:case Float32Array:case Float64Array:e=new e(g);break;case Array:e=
new e(g.length);for(var b=0;b<g.length;b++)e[b]=m(g[b]);break;default:for(b in e=new e,g)g.hasOwnProperty(b)&&(e[b]=m(g[b]))}return e}function C(g){var e=g[0],b=g[1],c=g[2],h=g[3],a=Math.sqrt(e*e+b*b+c*c);a=1/a;g[0]=e*a;g[1]=b*a;g[2]=c*a;g[3]=h*a}function v(g,e,b,c){if(c<b)return b;var h=b+Math.floor((c-b)/2);return g[h]>e?v(g,e,b,h-1):g[h]<e?v(g,e,h+1,c):h}function r(g){return(34*g+1)*g%289}function p(g){return g-Math.floor(g)}function z(g){return a((34*g+5)*g)}function a(g){return g-289*Math.floor(g/
289)}function H(g){return g-7*Math.floor(g/7)}function k(g,e,b){g<e&&(g=e);g>b&&(g=b);return g}function c(g,e,b){g-=e;b-=e;return e+(g-Math.floor(g/b)*b)}function l(g){return c(g,0,2*Math.PI)}function b(g,e){if(g&&e){var b=g instanceof Array;if(b!=e instanceof Array)return!1;var c=g.buffer instanceof ArrayBuffer&&"undefined"!==g.byteLength;if(c!=(e.buffer instanceof ArrayBuffer&&"undefined"!==e.byteLength))return!1;if(b){if(g.length!=e.length)return!1;for(b=0;b<g.length;b++)if(!h(g[b],e[b]))return!1}else if(c){if(g.length!=
e.length)return!1;for(b=0;b<g.length;b++)if(g[b]!=e[b])return!1}else{switch(g.constructor){case WebGLUniformLocation:case WebGLProgram:case WebGLShader:case WebGLFramebuffer:case WebGLRenderbuffer:case WebGLTexture:case WebGLBuffer:return g==e}for(var a in g)if(!h(g[a],e[a]))return!1;for(a in e)if(!(a in g))return!1}return!0}return!(g||e)}function h(g,e){if(typeof g!=typeof e)return!1;switch(typeof g){case "number":case "string":case "boolean":return g==e;case "object":return b(g,e);default:return!0}}
function G(g,e,b){var c=Y,h=L.dot(g,e);-.9999999>h?(L.cross(oa,g,c),1E-6>L.length(c)&&L.cross(ca,g,c),L.normalize(c,c),O.setAxisAngle(c,Math.PI,b)):(L.cross(g,e,c),b.set(c),b[3]=1+h,O.normalize(b,b));return b}function ka(g,e,b){var c=Math.sqrt(g[0]*g[0]+g[1]*g[1]);1E-6<c?(e[0]=Math.atan2(g[5],g[8]),e[1]=Math.atan2(-g[2],c),e[2]=Math.atan2(g[1],g[0]),b[0]=Math.atan2(-g[5],-g[8]),b[1]=Math.atan2(-g[2],-c),b[2]=Math.atan2(-g[1],-g[0])):(e[0]=Math.atan2(-g[7],g[4]),e[1]=Math.atan2(-g[2],c),e[2]=0,L.copy(e,
b))}f.d(w,"m",function(){return ta});f.d(w,"k",function(){return Oa});f.d(w,"n",function(){return M});f.d(w,"d",function(){return oa});f.d(w,"e",function(){return ca});f.d(w,"f",function(){return ea});f.d(w,"a",function(){return Da});f.d(w,"b",function(){return S});f.d(w,"c",function(){return Na});f.d(w,"o",function(){return wa});f.d(w,"v",function(){return X});f.d(w,"x",function(){return Ga});f.d(w,"q",function(){return Ha});f.d(w,"s",function(){return ua});f.d(w,"z",function(){return Ca});f.d(w,
"p",function(){return la});f.d(w,"u",function(){return sa});f.d(w,"w",function(){return ia});f.d(w,"r",function(){return ra});f.d(w,"t",function(){return Q});f.d(w,"y",function(){return Aa});w._15=function(g){return ya.test(Object.prototype.toString.call(g))};f.d(w,"j",function(){return Ba});f.d(w,"g",function(){return Xa});f.d(w,"l",function(){return Ea});f.d(w,"h",function(){return Za});f.d(w,"i",function(){return Ua});w._17=function(g){return"undefined"!=typeof g};w._18=function(g,e,b){for(var c=
[],h=b.length,a=0;a<h;a++){var l=b[a];l[g]==e&&c.push(l)}return c};w._1=function(g){return new Float32Array(g)};w._2=function(g,e){var b=g.length,c=new Float32Array(b+e.length);c.set(g);c.set(e,b);return c};w._67=function(g,e){var b=g.length,c=new Uint32Array(b+e.length);c.set(g);c.set(e,b);return c};w.K=function(){return 255==(new DataView((new Uint16Array([255])).buffer)).getUint16(0,!0)};w.D=function(g,e){var b=[],c={},h=e.length,a;for(a=0;a<h;a++)c[e[a]]=!0;h=g.length;for(a=0;a<h;a++)e=g[a],e in
c&&b.push(e);return b};w._50=N;w._19=function(g,e,b){for(var c=0;c<b.length;c++){var h=b[c];if(h[g]===e)return h}return null};w._9=function(g,e,b){for(var c=0;c<g.length;c++)if(g[c][e]==b)return c;return-1};w.C=function(g,e){for(var b=0;b<g.length;b++)if(g[b]==e)return;g.push(e)};w._60=function(g,e,b,c){c||(c=new Float32Array(16));E.identity(c);c[12]=g;c[13]=e;c[14]=b;return c};w._40=function(e){var b=e[0]%g*xa-Fa*Math.floor(e[0]/g);e[0]=0<b?b:b+za;return(e[0]-1)/(za-1)};w._13=function(g,e){e||(e=
[]);e[0]=na+Math.floor(g);return e};w.Y=function(g,e){var b=Y;b[0]=g[2];b[1]=g[1];b[2]=g[0];U(b,Aa,e);return e};w._27=U;w._37=n;w.Z=y;w._36=function(g,e){g=n(g,Aa,Y);e[0]=g[2];e[1]=g[1];e[2]=g[0];return e};w._34=d;w.U=function(g,e,b){b||(b=new Float32Array(4));g=L.normalize(g,Y);var c=L.dot(e,g);g=L.cross(e,g,K);c=Math.acos(c);b[0]=g[0]*Math.sin(c/2);b[1]=g[1]*Math.sin(c/2);b[2]=g[2]*Math.sin(c/2);b[3]=Math.cos(c/2);return b};w._61=function(g,e,b,c){c||(c=new Float32Array(4));L.transformQuat(b,e,
c);c[3]=-L.dot(g,c);return c};w.G=function(g,e,b,c){if(0==b)return g;c=c||[];for(var h=0;h<g.length;h++)c[h]=(1-b)*g[h]+b*e[h];return c};w.O=m;w.N=function(g){var e=g instanceof Array?[]:{},b;for(b in g)if(g.hasOwnProperty(b))if(g[b]instanceof Object){var c=g[b].constructor;switch(c){case Int8Array:case Uint8Array:case Uint8ClampedArray:case Int16Array:case Uint16Array:case Int32Array:case Uint32Array:case Float32Array:case Float64Array:e[b]=new c(g[b]);break;case Array:e[b]=g[b].slice(0);break;default:e[b]=
g[b]}}else e[b]=g[b];return e};w._24=function(g,e){e||(e=new Float32Array(4));u.fromMat4(g,da);var b=da[0],c=da[3],h=da[6],a=da[1],l=da[4],k=da[7];g=da[2];var q=da[5],t=da[8];b=Math.sqrt(b*b+c*c+h*h)||1;a=Math.sqrt(a*a+l*l+k*k)||1;g=Math.sqrt(g*g+q*q+t*t)||1;da[0]/=b;da[3]/=b;da[6]/=b;da[1]/=a;da[4]/=a;da[7]/=a;da[2]/=g;da[5]/=g;da[8]/=g;O.fromMat3(da,e);O.normalize(e,e);return e};w._26=function(g,e){e||(e=new Float32Array(3));e[0]=g[12];e[1]=g[13];e[2]=g[14];return e};w._25=function(g,e){P[0]=.577350269189626;
P[1]=.577350269189626;P[2]=.577350269189626;P[3]=0;B.transformMat4(P,g,P);g=B.length(P);return e?L.set(g,g,g,e):g};w._0=function(g,e){var b=e.left,c=e.right,h=e.top,a=e.bottom,l=e.near,k=e.far;b[0]=g[3]+g[0];b[1]=g[7]+g[4];b[2]=g[11]+g[8];b[3]=g[15]+g[12];c[0]=g[3]-g[0];c[1]=g[7]-g[4];c[2]=g[11]-g[8];c[3]=g[15]-g[12];h[0]=g[3]-g[1];h[1]=g[7]-g[5];h[2]=g[11]-g[9];h[3]=g[15]-g[13];a[0]=g[3]+g[1];a[1]=g[7]+g[5];a[2]=g[11]+g[9];a[3]=g[15]+g[13];l[0]=g[3]+g[2];l[1]=g[7]+g[6];l[2]=g[11]+g[10];l[3]=g[15]+
g[14];k[0]=g[3]-g[2];k[1]=g[7]-g[6];k[2]=g[11]-g[10];k[3]=g[15]-g[14];C(b);C(c);C(h);C(a);C(l);C(k);return e};w._56=function(g,e,b){return b<-R.P(g,e.near)||b<-R.P(g,e.left)||b<-R.P(g,e.right)||b<-R.P(g,e.top)||b<-R.P(g,e.bottom)||b<-R.P(g,e.far)?!0:!1};w.X=function(g,e,b,c,h){var a=L.dot(b,e.far),l=L.dot(c,e.far),k=L.dot(h,e.far);a=Math.sqrt(a*a+l*l+k*k);if(a<-R.P(g,e.near)||a<-R.P(g,e.far))return!0;a=L.dot(b,e.left);l=L.dot(c,e.left);k=L.dot(h,e.left);if(Math.sqrt(a*a+l*l+k*k)<-R.P(g,e.left))return!0;
a=L.dot(b,e.right);l=L.dot(c,e.right);k=L.dot(h,e.right);if(Math.sqrt(a*a+l*l+k*k)<-R.P(g,e.right))return!0;a=L.dot(b,e.top);l=L.dot(c,e.top);k=L.dot(h,e.top);if(Math.sqrt(a*a+l*l+k*k)<-R.P(g,e.top))return!0;a=L.dot(b,e.bottom);l=L.dot(c,e.bottom);k=L.dot(h,e.bottom);return Math.sqrt(a*a+l*l+k*k)<-R.P(g,e.bottom)?!0:!1};w._28=function(g,e,b,c){c||(c=0);for(var h=g.length,a=0;a<h;a+=3){var l=g[a],k=g[a+1],q=g[a+2];b[c+a]=e[0]*l+e[4]*k+e[8]*q+e[12];b[c+a+1]=e[1]*l+e[5]*k+e[9]*q+e[13];b[c+a+2]=e[2]*
l+e[6]*k+e[10]*q+e[14]}return b};w._38=function(g,e,b,c){c=c||0;for(var h=g.length,a=ja,l=0;l<h;l+=4){a[0]=g[l];a[1]=g[l+1];a[2]=g[l+2];a[3]=g[l+3];var k=0<a[3];O.multiply(e,a,a);(k&&0>a[3]||!k&&0<a[3])&&B.scale(a,-1,a);b[c+l]=a[0];b[c+l+1]=a[1];b[c+l+2]=a[2];b[c+l+3]=a[3]}return b};w._68=function(g,e,b){b||(b=new Float32Array(3));var c=P;c[0]=g[0];c[1]=g[1];c[2]=g[2];c[3]=0;B.transformMat4(c,e,c);b[0]=c[0];b[1]=c[1];b[2]=c[2]};w._69=function(g,e){e||(e=[]);for(var b=0;b<g.length;b+=3)e[b/3]=new Float32Array([g[b],
g[b+1],g[b+2]]);return e};w.F=v;w.P=function(g,e){for(var b=0;b<g.length;b++)if(g[b]!=e[b])return!1;return!0};w._63=function(g,b,c,h,a){a||(a=new Float32Array(3));c=E.fromRotationTranslation(c,h,e);1!==b&&(h=E.identity(ma),b=L.set(b,b,b,Y),E.scale(h,b,h),E.multiply(c,h,c));L.transformMat4(g,c,a);return a};w._46=function(g,e,b,c){c||(c=new Float32Array(3));var h=Y;L.subtract(e,g,h);L.transformQuat(h,b,h);L.subtract(e,h,c)};w._5=function(){var g=Y;g[0]=0;g[1]=0;g[2]=0;var e=new Float32Array(16),b=new Float32Array(16),
c=new Float32Array(16),h=new Float32Array(16),a=new Float32Array(16),l=new Float32Array(16);E.lookAt(g,[-1,0,0],[0,-1,0],e);E.scale(e,[-1,1,1],e);E.scale(e,[-1,1,-1],b);E.lookAt(g,[0,-1,0],[0,0,-1],c);E.scale(c,[1,1,-1],c);E.scale(c,[1,-1,-1],h);E.lookAt(g,[0,0,-1],[0,-1,0],a);E.scale(a,[-1,1,1],a);E.scale(a,[-1,1,-1],l);return[e,b,c,h,a,l]};w._6=function(){var g=Y;g[0]=0;g[1]=0;g[2]=0;var e=new Float32Array(16),b=new Float32Array(16),c=new Float32Array(16),h=new Float32Array(16),a=new Float32Array(16),
l=new Float32Array(16);E.lookAt(g,[1,0,0],[0,-1,0],e);E.scale(e,[-1,1,-1],b);E.lookAt(g,[0,1,0],[0,0,1],c);E.scale(c,[1,-1,-1],h);E.lookAt(g,[0,0,1],[0,-1,0],a);E.scale(a,[-1,1,-1],l);return[e,b,c,h,a,l]};w._11=function(g,e){for(var b=0;b<g.length;b++)e=(e<<5)-e+g.charCodeAt(b),e&=e;return e};w._23=function(g,e){e[15]=1;e[14]=0;e[13]=0;e[12]=0;e[11]=0;e[10]=g[8];e[9]=g[7];e[8]=g[6];e[7]=0;e[6]=g[5];e[5]=g[4];e[4]=g[3];e[3]=0;e[2]=g[2];e[1]=g[1];e[0]=g[0];return e};w._33=function(g,e){e||(e=g);var b=
g[0]*g[0]+g[1]*g[1]+g[2]*g[2];0<b?(e[3]=2*Math.acos(g[3]),b=1/Math.sqrt(b),e[0]=g[0]*b,e[1]=g[1]*b,e[2]=g[2]*b):(e[3]=0,e[0]=1,e[1]=0,e[2]=0);return e};w._64=function(g){return isNaN(g)||"undefined"==typeof g?NaN:g|0};w.T=function(g){return g*Math.PI/180};w._39=function(g){return 180*g/Math.PI};w._55=function(g){var e=.366025403784439*g[0]+.366025403784439*g[1],b=Math.floor(g[0]+e),c=Math.floor(g[1]+e),h=.211324865405187*b+.211324865405187*c;e=g[0]-b+h;g=g[1]-c+h;var a=e>g?1:0,l=1-a;h=e+.211324865405187-
a;var k=g+.211324865405187-l,q=e+-.577350269189626,t=g+-.577350269189626;b%=289;c%=289;var u=Math.max(.5-(e*e+g*g),0),d=Math.max(.5-(h*h+k*k),0),A=Math.max(.5-(q*q+t*t),0),m=2*p(.024390243902439*r(r(c)+b))-1;a=2*p(.024390243902439*r(r(c+l)+b+a))-1;var T=2*p(.024390243902439*r(r(c+1)+b+1))-1;b=Math.abs(m)-.5;c=Math.abs(a)-.5;l=Math.abs(T)-.5;m-=Math.floor(m+.5);a-=Math.floor(a+.5);T-=Math.floor(T+.5);return 130*(u*u*u*u*(1.79284291400159-.85373472095314*(m*m+b*b))*(m*e+b*g)+d*d*d*d*(1.79284291400159-
.85373472095314*(a*a+c*c))*(a*h+c*k)+A*A*A*A*(1.79284291400159-.85373472095314*(T*T+l*l))*(T*q+l*t))};w.J=function(g){var e=1/7,b=e/2,c=a(Math.floor(g[0])),h=a(Math.floor(g[1])),l=p(g[0]);g=p(g[1]);var k=l-.5,q=l-1.5;l=g-.5;g-=1.5;var t=z(c),u=z(c+1),d=t;c=u;t=z(t+h);u=z(u+h);d=z(d+h+1);c=z(c+h+1);h=k+.7*(H(t)*e+b);var A=q+.7*(H(u)*e+b);k+=.7*(H(d)*e+b);q+=.7*(H(c)*e+b);t=l+.7*(H(Math.floor(t*e))*e+b);l+=.7*(H(Math.floor(u*e))*e+b);d=g+.7*(H(Math.floor(d*e))*e+b);e=g+.7*(H(Math.floor(c*e))*e+b);return Math.min(h*
h+t*t,A*A+l*l,k*k+d*d,q*q+e*e)};w._30=function(g,e,b,c,h){h||(h=new Float32Array(4));g=L.transformQuat(e,g,Y);e=b[0];var a=b[1];b=b[2];var l=da;l[0]=a*a+b*b;l[1]=-a*e;l[2]=-b*e;l[3]=-e*a;l[4]=e*e+b*b;l[5]=-b*a;l[6]=-e*b;l[7]=-a*b;l[8]=e*e+a*a;L.transformMat3(g,l,g);L.normalize(g,g);O.rotationTo(c,g,h);return h};w.I=function(g,e){e||(e=new Float32Array(4));var b=O.setAxisAngle([0,0,1],Math.PI,O.create());var c=O.setAxisAngle([1,0,0],Math.PI/2,O.create());O.multiply(b,c,b);O.multiply(g,b,e);return e};
w.M=k;w._51=function(g,e,b,c){return c?(b=Math.exp(-b/c),(1-b)*g+b*e):g};w._54=function(g,e,b,c,h){h||(h=new Float32Array(g.length));if(c)for(b=Math.exp(-b/c),c=0;c<h.length;c++)h[c]=(1-b)*g[c]+b*e[c];else L.copy(g,h);return h};w._52=function(g,e,b,c,h){h||(h=new Float32Array(g.length));c?O.slerp(g,e,Math.exp(-b/c),h):O.copy(g,h);return h};w._14=function(g){return"object"===typeof g&&g.buffer&&g.buffer instanceof ArrayBuffer?!0:!1};w._16=function(g,e){if(g instanceof Array||g.buffer&&g.buffer instanceof
ArrayBuffer)if(e&&e==g.length||!e)return!0;return!1};w.R=function(g,e){var b=u.fromQuat(g,da),c=Y;c[0]=b[6];c[1]=b[7];c[2]=b[8];c=L.cross(ea,c,c);L.normalize(c,c);var h=b[4];!e&&0<h&&(c[0]*=-1,c[1]*=-1,c[2]*=-1);e=K;e[0]=b[0];e[1]=b[1];e[2]=b[2];L.normalize(e,e);b=q;O.rotationTo(e,c,b);O.multiply(b,g,g)};w._7=function(g,e,b,c){b=b*e-.5;c=c*e-.5;var h=b-Math.floor(b),a=c-Math.floor(c);b=Math.floor(b);c=Math.floor(c);var l=e-1;return(g[c*e+b]*(1-h)+g[c*e+Math.min(b+1,l)]*h)*(1-a)+(g[Math.min(c+1,l)*
e+b]*(1-h)+g[Math.min(c+1,l)*e+Math.min(b+1,l)]*h)*a};w._43=function(g){for(var e=0,b=0;3>b;b++)0<(g&1<<b)&&e++;return e};w._44=function(g){for(var e=[0,0,0],b=0;3>b;b++)0<(g&1<<b)&&(e[2-b]=1);return e};w._42=function(g,e){var b=0;(1==e||2==e)&&0<(g&4)&&b++;2==e&&0<(g&2)&&b++;return b};w._4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(g){var e=16*Math.random()|0;return("x"==g?e:e&3|8).toString(16)})};w._8=function(g){var e=0,b;for(b in g)g.hasOwnProperty(b)&&e++;
return e};w._41=function(g){return g.length?g[Math.floor(Math.random()*g.length)]:null};w._12=function(g,e,b){b||(b=new Float32Array(3));b[0]=g[0]-e[0];b[1]=g[1]-e[1];b[2]=0;L.normalize(b,b)};w._62=function(g,e,b){var c=g[0],h=g[1];g=g[2];var a=e[0],l=e[1],k=e[2];e=e[3];var q=l*g-k*h,t=k*c-a*g,u=a*h-l*c;b[0]=c+2*q*e+2*(l*u-k*t);b[1]=h+2*t*e+2*(k*q-a*u);b[2]=g+2*u*e+2*(a*t-l*q);return b};w.B=c;w.A=l;w._59=function(g,e){for(var c in g){var h=!0,a=g[c],l=e[c];switch(typeof a){case "number":case "string":case "boolean":h=
a==l;break;case "object":h=b(a,l)}if(!h)return!1}return!0};w._29=function(g,e){var b=g[0],c=g[2],h=g[3];e[0]=g[1];e[1]=c;e[2]=h;e[3]=b;return e};w._22=function(g,e,b,c){var h=P;h.set(g);h[3]=e;g=q;Y[0]=b[3];Y[1]=b[4];Y[2]=b[5];g.set(Y);g[3]=0;g=B.dot(h,g);if(0==g)return null;e=q;L.copy(b,Y);e.set(Y);e[3]=1;h=-B.dot(h,e)/g;c[0]=b[0]+h*b[3];c[1]=b[1]+h*b[4];c[2]=b[2]+h*b[5];return c};w._10=function(g,e,b,c){var h=e[0]-g[0],a=b[0]-g[0],l=e[1]-g[1],k=b[1]-g[1];e=e[2]-g[2];g=b[2]-g[2];c[0]=l*g-e*k;c[1]=
a*e-h*g;c[2]=h*k-l*a;return c};w._48=G;w.H=function(g,e,b){if(e==b)return b-g;g=l(g);e=l(e);b=l(b);e=2*Math.PI-e;b=l(b+e);g=l(g+e);return g>b?(b-=g,g=2*Math.PI-g,-b>g?g:b):0};w._53=function(g,e,b){isFinite(e)&&isFinite(b)&&(g=k(g,e,b));return g*g*(3-2*g)};w._20=function(g,e,b){return e+g*(b-e)};w.E=function(g,e){for(var b=0;b<g.length;b++)for(var c=0;c<e.length;c++)if(e[c]==g[b])return!0;return!1};w._70=function(g,e){for(var b=Math.max(g.length,e.length),c=0;c<b;c++){var h=N((c>=g.length?0:g[c])-
(c>=e.length?0:e[c]));if(h)return h}return 0};w._71=function(g){return g.join(".")};w._58=function(g){return g.split(".").map(function(g){return g|0})};w._57=function(g,e){e[0]=Math.pow(g[0],Va);e[1]=Math.pow(g[1],Va);e[2]=Math.pow(g[2],Va);return e};w._21=function(g,e){e[0]=Math.pow(g[0],1/Va);e[1]=Math.pow(g[1],1/Va);e[2]=Math.pow(g[2],1/Va);return e};w.L=function(g){return 0!=parseInt(g.toString(2).substr(1),2)};w.W=function(g,e,b,c){c[0]=g[0];c[1]=e[0];c[2]=b[0];c[3]=g[1];c[4]=e[1];c[5]=b[1];
c[6]=g[2];c[7]=e[2];c[8]=b[2];return c};w.S=function(){var g=[{}];g.length=0;return g};w._3=function(g){g=Math.round(32767.5*(g+1)-32768);return k(g?g:0,-32768,32767)};w._49=function(g){return k((g+32768)/32767.5-1,-1,1)};w._66=function(g){return k(Math.round(255*g),0,255)};w._65=function(g){return k(g/255,0,1)};w.V=function(g,e,b,c){var h=L.subtract(b,e,Y),a=L.subtract(c,b,K),l=L.subtract(e,c,ha);e=L.subtract(g,e,T);b=L.subtract(g,b,V);g=L.subtract(g,c,A);c=L.cross(h,a,aa);if(0<=L.dot(L.cross(c,
h,J),e)&&0<=L.dot(L.cross(c,a,J),b)&&0<=L.dot(L.cross(c,l,J),g))return l=L.length(c),a=L.dot(c,e),Math.abs(a/l);h=L.scale(h,k(L.dot(h,e)/L.length(h),0,1),J);e=L.length(L.subtract(e,h,J));a=L.scale(a,k(L.dot(a,b)/L.length(a),0,1),J);a=L.length(L.subtract(b,a,J));l=L.scale(l,k(L.dot(l,g)/L.length(l),0,1),J);l=L.length(L.subtract(g,l,J));return Math.min(Math.min(e,a),l)};w._47=function(g,e,b,c,h){if(b||c){var a=O.identity(ja);b&&(e=O.setAxisAngle(e,b,pa),O.multiply(a,e,a));g=O.copy(g,h);c&&(h=d(g,oa,
Y),c=O.setAxisAngle(h,c,pa),O.normalize(c,c),O.multiply(a,c,a));O.multiply(a,g,g);O.normalize(g,g)}};w._31=function(g,e,b,c){var h=K;d(e,c,h);L.normalize(h,h);c=ha;L.subtract(b,g,c);L.normalize(c,c);g=G(h,c,P);O.multiply(g,e,e);O.normalize(e,e)};w._32=function(g,e,b,c){e=L.transformQuat(e,g,K);var h=L.dot(c,b);c=L.scale(c,h,ha);b=L.subtract(b,c,ha);c=O.identity(ja);L.normalize(b,b);.999999>Math.abs(L.dot(e,b))&&G(e,b,c);O.normalize(c,c);O.multiply(c,g,g)};w.Q=function(g,e){for(var b=2*Math.PI,c=[],
h=0;3>h;h++)c[h]=g[h]-e[h],5.1<c[h]?(g[h]-=c[h]/b*b,c[h]=g[h]-e[h]):-5.1>c[h]&&(g[h]+=-c[h]/b*b,c[h]=g[h]-e[h]);3.2<Math.abs(c[0])&&1.6>Math.abs(c[1])&&1.6>Math.abs(c[2])&&(g[0]=0<c[0]?g[0]-b:g[0]+b);3.2<Math.abs(c[1])&&1.6>Math.abs(c[2])&&1.6>Math.abs(c[0])&&(g[1]=0<c[1]?g[1]-b:g[1]+b);3.2<Math.abs(c[2])&&1.6>Math.abs(c[0])&&1.6>Math.abs(c[1])&&(g[2]=0<c[2]?g[2]-b:g[2]+b)};w._45=function(g,e,b){e=y(e,da);g=y(g,I);g=u.multiply(g,e,t);e=Y;var c=K;ka(g,e,c);L.copy(Math.abs(e[0])+Math.abs(e[1])+Math.abs(e[2])>
Math.abs(c[0])+Math.abs(c[1])+Math.abs(c[2])?c:e,b);return b};w._35=function(g,e,b){g=u.fromQuat(g,da);var c=Y,h=K;ka(g,c,h);L.copy(Math.abs(c[0]-e[0])+Math.abs(c[1]-e[1])+Math.abs(c[2]-e[2])>Math.abs(h[0]-e[0])+Math.abs(h[1]-e[1])+Math.abs(h[2]-e[2])?h:c,b);return b};var u=f(27),E=f(21),R=f(42),O=f(8);D=f(6);var L=f(3),B=f(7),Y=new Float32Array(3),K=new Float32Array(3),ha=new Float32Array(3),T=new Float32Array(3),V=new Float32Array(3),A=new Float32Array(3),aa=new Float32Array(3),J=new Float32Array(3),
P=new Float32Array(4),q=new Float32Array(4),da=new Float32Array(9),I=new Float32Array(9),t=new Float32Array(9),e=new Float32Array(16),ma=new Float32Array(16),ja=O.create(),pa=O.create(),ta=new Float32Array([0,0,0]),Oa=new Float32Array([0,0,0,1]);D.b();D.b();var M=new Float32Array([1,1,1]),oa=new Float32Array([1,0,0]),ca=new Float32Array([0,1,0]),ea=new Float32Array([0,0,1]),Da=new Float32Array([-1,0,0]),S=new Float32Array([0,-1,0]),Na=new Float32Array([0,0,-1]),wa=0,X=1,Ga=2,Ha=3,ua=4,Ca=5,la=6,sa=
7,ia=8,ra=9,Q=10,Aa=11,ya=/object .*Array/,qa=[wa,X,Ga,ua,Ca],na=5E4,xa=48271,za=2147483647,Fa=za%xa,g=Math.floor(za/xa),Ba=[new Float32Array([0,0,-1,0,0,-1,0,0,-1,0,0,0,0,0,0,1]),new Float32Array([0,0,1,0,0,-1,0,0,1,0,0,0,0,0,0,1]),new Float32Array([1,0,0,0,0,0,-1,0,0,1,0,0,0,0,0,1]),new Float32Array([1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1]),new Float32Array([1,0,0,0,0,-1,0,0,0,0,-1,0,0,0,0,1]),new Float32Array([-1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1])],Va=2.2,Xa=1,Ea=2,Za=4,Ua=4},function(D,w,f){function N(){var c=
new a(3);c[0]=0;c[1]=0;c[2]=0;return c}function U(c,l,b){var h=new a(3);h[0]=c;h[1]=l;h[2]=b;return h}function n(c,a,b){b[0]=c[0]-a[0];b[1]=c[1]-a[1];b[2]=c[2]-a[2];return b}function y(c,a,b){b[0]=c[0]*a[0];b[1]=c[1]*a[1];b[2]=c[2]*a[2];return b}function d(c,a,b){b[0]=c[0]/a[0];b[1]=c[1]/a[1];b[2]=c[2]/a[2];return b}function m(c,a){var b=a[0]-c[0],h=a[1]-c[1];c=a[2]-c[2];return Math.sqrt(b*b+h*h+c*c)}function C(c,a){var b=a[0]-c[0],h=a[1]-c[1];c=a[2]-c[2];return b*b+h*h+c*c}function v(c){var a=c[0],
b=c[1];c=c[2];return Math.sqrt(a*a+b*b+c*c)}function r(c){var a=c[0],b=c[1];c=c[2];return a*a+b*b+c*c}function p(c,a){var b=c[0],h=c[1],l=c[2];b=b*b+h*h+l*l;0<b&&(b=1/Math.sqrt(b),a[0]=c[0]*b,a[1]=c[1]*b,a[2]=c[2]*b);return a}function z(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]}Object.defineProperty(w,"__esModule",{value:!0});w.create=N;w.clone=function(c){var l=new a(3);l[0]=c[0];l[1]=c[1];l[2]=c[2];return l};w.fromValues=U;w.copy=function(c,a){a[0]=c[0];a[1]=c[1];a[2]=c[2];return a};w.set=function(c,
a,b,h){h[0]=c;h[1]=a;h[2]=b;return h};w.add=function(c,a,b){b[0]=c[0]+a[0];b[1]=c[1]+a[1];b[2]=c[2]+a[2];return b};w.subtract=n;f.d(w,"sub",function(){return n});w.multiply=y;f.d(w,"mul",function(){return y});w.divide=d;f.d(w,"div",function(){return d});w.min=function(c,a,b){b[0]=Math.min(c[0],a[0]);b[1]=Math.min(c[1],a[1]);b[2]=Math.min(c[2],a[2]);return b};w.max=function(c,a,b){b[0]=Math.max(c[0],a[0]);b[1]=Math.max(c[1],a[1]);b[2]=Math.max(c[2],a[2]);return b};w.scale=function(c,a,b){b[0]=c[0]*
a;b[1]=c[1]*a;b[2]=c[2]*a;return b};w.scaleAndAdd=function(c,a,b,h){h[0]=c[0]+a[0]*b;h[1]=c[1]+a[1]*b;h[2]=c[2]+a[2]*b;return h};w.distance=m;f.d(w,"dist",function(){return m});w.squaredDistance=C;f.d(w,"sqrDist",function(){return C});w.length=v;f.d(w,"len",function(){return v});w.squaredLength=r;f.d(w,"sqrLen",function(){return r});w.negate=function(c,a){a[0]=-c[0];a[1]=-c[1];a[2]=-c[2];return a};w.inverse=function(c,a){a[0]=1/c[0];a[1]=1/c[1];a[2]=1/c[2];return a};w.normalize=p;w.dot=z;w.cross=
function(c,a,b){var h=c[0],k=c[1];c=c[2];var l=a[0],u=a[1];a=a[2];b[0]=k*a-c*u;b[1]=c*l-h*a;b[2]=h*u-k*l;return b};w.lerp=function(c,a,b,h){var k=c[0],l=c[1];c=c[2];h[0]=k+b*(a[0]-k);h[1]=l+b*(a[1]-l);h[2]=c+b*(a[2]-c);return h};w.hermite=function(c,a,b,h,k,d){var l=k*k,m=l*(2*k-3)+1,f=l*(k-2)+k,H=l*(k-1);k=l*(3-2*k);d[0]=c[0]*m+a[0]*f+b[0]*H+h[0]*k;d[1]=c[1]*m+a[1]*f+b[1]*H+h[1]*k;d[2]=c[2]*m+a[2]*f+b[2]*H+h[2]*k;return d};w.bezier=function(c,a,b,h,k,d){var l=1-k,m=l*l,f=k*k,H=m*l;m*=3*k;l*=3*f;
k*=f;d[0]=c[0]*H+a[0]*m+b[0]*l+h[0]*k;d[1]=c[1]*H+a[1]*m+b[1]*l+h[1]*k;d[2]=c[2]*H+a[2]*m+b[2]*l+h[2]*k;return d};w.random=function(c,a){var b=2*H()*Math.PI,h=2*H()-1,k=Math.sqrt(1-h*h)*c;a[0]=Math.cos(b)*k;a[1]=Math.sin(b)*k;a[2]=h*c;return a};w.transformMat4=function(c,a,b){var h=c[0],k=c[1];c=c[2];var l=a[3]*h+a[7]*k+a[11]*c+a[15];l=l||1;b[0]=(a[0]*h+a[4]*k+a[8]*c+a[12])/l;b[1]=(a[1]*h+a[5]*k+a[9]*c+a[13])/l;b[2]=(a[2]*h+a[6]*k+a[10]*c+a[14])/l;return b};w.transformMat3=function(c,a,b){var h=c[0],
k=c[1];c=c[2];b[0]=h*a[0]+k*a[3]+c*a[6];b[1]=h*a[1]+k*a[4]+c*a[7];b[2]=h*a[2]+k*a[5]+c*a[8];return b};w.transformQuat=function(c,a,b){var h=c[0],k=c[1],l=c[2];c=a[0];var u=a[1],d=a[2];a=a[3];var m=a*h+u*l-d*k,f=a*k+d*h-c*l,H=a*l+c*k-u*h;h=-c*h-u*k-d*l;b[0]=m*a+h*-c+f*-d-H*-u;b[1]=f*a+h*-u+H*-c-m*-d;b[2]=H*a+h*-d+m*-u-f*-c;return b};w.rotateX=function(c,a,b,h){var k=[],l=[];k[0]=c[0]-a[0];k[1]=c[1]-a[1];k[2]=c[2]-a[2];l[0]=k[0];l[1]=k[1]*Math.cos(b)-k[2]*Math.sin(b);l[2]=k[1]*Math.sin(b)+k[2]*Math.cos(b);
h[0]=l[0]+a[0];h[1]=l[1]+a[1];h[2]=l[2]+a[2];return h};w.rotateY=function(c,a,b,h){var k=[],l=[];k[0]=c[0]-a[0];k[1]=c[1]-a[1];k[2]=c[2]-a[2];l[0]=k[2]*Math.sin(b)+k[0]*Math.cos(b);l[1]=k[1];l[2]=k[2]*Math.cos(b)-k[0]*Math.sin(b);h[0]=l[0]+a[0];h[1]=l[1]+a[1];h[2]=l[2]+a[2];return h};w.rotateZ=function(c,a,b,h){var k=[],l=[];k[0]=c[0]-a[0];k[1]=c[1]-a[1];k[2]=c[2]-a[2];l[0]=k[0]*Math.cos(b)-k[1]*Math.sin(b);l[1]=k[0]*Math.sin(b)+k[1]*Math.cos(b);l[2]=k[2];h[0]=l[0]+a[0];h[1]=l[1]+a[1];h[2]=l[2]+a[2];
return h};f.d(w,"forEach",function(){return k});w.angle=function(c,a){c=U(c[0],c[1],c[2]);a=U(a[0],a[1],a[2]);p(c,c);p(a,a);a=z(c,a);return 1<a?0:Math.acos(a)};w.str=function(c){return"vec3("+c[0]+", "+c[1]+", "+c[2]+")"};var a="undefined"!==typeof Float32Array?Float32Array:Array,H=Math.random,k=function(){var c=N();return function(a,b,h,k,d,u){b||(b=3);h||(h=0);for(k=k?Math.min(k*b+h,a.length):a.length;h<k;h+=b)c[0]=a[h],c[1]=a[h+1],c[2]=a[h+2],d(c,u,c),a[h]=c[0],a[h+1]=c[1],a[h+2]=c[2];return a}}()},
function(D,w,f){D=f(0);var N=f(32),U=f(5),n=f(1),y=f(2);f=Object(D.a)("__config",function(d,m){function f(){return N.a.module_check(m.Nf.mu)}function v(){for(var d=m.Nf,a=null,f=!1,k=document.getElementsByTagName("script"),c=0;c<k.length;c++){for(var l=k[c].src,b=0;b<d.CG.length;b++)if(0<=l.indexOf(d.CG[b])&&(a=l,k[c].attributes["b4w-offset"])){a=a.substring(0,a.lastIndexOf("/"))+"/"+k[c].attributes["b4w-offset"].value;f=!0;break}if(f)break}a||(p.warn("Couldn't determine path to ancillary resources, fallback to the current page directory"),
a=document.location.href);d=a.indexOf("?");0<=d&&(a=a.substring(0,d));return a.substring(0,a.lastIndexOf("/"))}var r=Object(U.a)(d),p=Object(n.a)(d);m.P_LOW=1;m.P_HIGH=2;m.P_ULTRA=3;m.P_CUSTOM=4;m.P_AUTO=5;m.context={alpha:!0,antialias:!1,premultipliedAlpha:!0};m.SE=y.O(m.context);m.wa={alpha_sort:!0,alpha_sort_threshold:.1,mn:[6,3],max_fps:1E4,console_verbose:!1,do_not_load_resources:!1,use_min50:!1,enable_texture_cache:!0,CF:1,yP:5,background_color:[0,0,0,0],canvas_resolution_factor:1,Gk:3,allow_cors:!1,
BF:!1,Zy:!0,anisotropic_filtering:!0,Tx:!1,QI:!1,wU:!1,vU:!1,xU:!1,pE:!1,bN:!1,show_hud_debug_info:!1,Ju:!0,shadows:!0,stereo:"NONE",reflections:!0,refractions:!0,ssao:!0,dof:!0,god_rays:!0,bloom:!0,motion_blur:!0,compositing:!0,antialiasing:!0,smaa:!1,debug_view:!1,FJ:!1,Go:!0,Mw:!0,ld:!0,water_dynamic:!0,shore_smoothing:!0,Bp:!0,lJ:!0,precision:"highp",quality:m.P_HIGH,Wt:!0,lod_leap_smooth_threshold:3,assets_gzip_available:!1,cS:!1,XB:!1,Jz:!1,wJ:!1,is_mobile_device:!1,AA:!1,nz:!1,MY:!1,Rs:!1,
allow_hidpi:!1,sI:!1,$A:!1,oG:!1,enable_selectable:!0,enable_outlining:!0,lod_smooth_transitions:!0,glow_materials:!0,Ov:!1,zF:!1,PA:[0,0],EH:!0,nx:!1,url_params:null,Ib:!0,Jc:4,er:!1,QH:!1,aT:!1,Is:!1,OH:!1,yE:!1,kG:!1,jG:!1,media_auto_activation:!0,ZG:4,mw:!1,gl_debug:!1,rE:!1,ND:!1,Wy:!1,Em:"dds",shadow_blur_samples:"",reflection_quality:"",srgb_type:"SRGB_SIMPLE",Rv:!1,Ks:!1,debug_loading:!1,XG:!1,WG:!1,xE:!1,yp:!0};m.kF=y.O(m.wa);m.Wk={hv:-1,DF:!1,Sm:1};m.controls={XR:1/120};m.se={path:"",rS:"B4W_ASSETS_PATH=__JS__/assets/",
GS:"B4W_PROJ_ASSETS_PATH=__JS__/../projects/__NAME__/assets/",RR:15,prevent_caching:!0,ZA:!1,Gz:!1,Tw:!1};m.SD=y.O(m.se);m.Nf={shaders_path:"",ST:"../shaders/",qI:"include/",LY:"postprocessing/",mu:"built_in_data",CG:"b4w.js b4w.min.js b4w.simple.min.js b4w.whitespace.min.js b4w_app_bundle.js B4W_MAIN_MODULE".split(" "),smaa_search_texture_path:"smaa_search_texture.png",smaa_area_texture_path:"smaa_area_texture.png"};m.hG={webvr:{distortion_coefs:[.22,.28],chromatic_aberration_coefs:[-.015,.02,.025,
.02]},nonwebvr:{rF:.8,ji:.064,Ki:.035,Ns:.039,distortion_coefs:[.34,.55],chromatic_aberration_coefs:[0,0,0,0],lm:.11,aj:.062,Li:.004}};m.xa={enabled:!0,max_fps:60,pt:"",gy:"",hy:"B4W_URANIUM_PATH=uranium/",RD:"uranium.js",EJ:"uranium_wasm.js",bH:"uranium.js.mem",DJ:"uranium_wasm.wasm",kJ:"/dist/uranium",iz:!1,ping:!1,On:!0,ut:!0};m.vH=y.O(m.xa);m.An={Mo:1024,Cu:256,dF:32,MO:128,KO:256,xH:.25,zS:.5,yS:1};m.UH=y.O(m.An);m.Ra={RC:!0,tw:!1,WD:!1,BE:!1,oF:!1};m.oI=y.O(m.Ra);m.Ed={outlining_overview_mode:!1,
si:[1,.4,.05],Fl:.2,Gl:3.8,Hl:1};m.Km={enabled:!1,dt:3,tU:1,VT:"COLOR"};m.iF=y.O(m.Km);m.di={QR:8,SA:64,WA:8,pw:8,XA:15,aH:0,qw:128,Xg:1024,TA:4096,Ic:4096,YA:[4096,4096],xo:24};m.RE=y.O(m.di);m.apply_quality=function(){var d=m.wa,a=m.xa,f=m.An;switch(d.quality){case m.P_ULTRA:d.shadows=!0;d.shore_smoothing=!0;d.ssao=!0;d.dof=!0;d.god_rays=!0;d.bloom=!0;d.reflections=!0;d.refractions=!0;d.Go=!0;d.Mw=!0;d.ld=!0;f.Mo=2048;f.Cu=512;d.Gk=3;d.anisotropic_filtering=!0;d.use_min50=!1;d.water_dynamic=!0;
d.Bp=!0;d.antialiasing=!0;d.smaa=!1;d.compositing=!0;d.motion_blur=!0;d.allow_hidpi=!0;d.enable_outlining=!0;d.glow_materials=!0;d.Jc=16;d.srgb_type="SRGB_PROPER";a.max_fps=120;d.lod_smooth_transitions=!0;break;case m.P_HIGH:d.shadows=!0;d.shore_smoothing=!0;d.ssao=!0;d.dof=!0;d.god_rays=!0;d.bloom=!0;d.reflections=!0;d.refractions=!0;d.Go=!0;d.Mw=!0;d.ld=!0;f.Mo=1024;f.Cu=256;d.Gk=3;d.anisotropic_filtering=!0;d.use_min50=!1;d.water_dynamic=!0;d.Bp=!0;d.antialiasing=!0;d.smaa=!1;d.compositing=!0;
d.motion_blur=!0;d.allow_hidpi=!1;d.enable_outlining=!0;d.glow_materials=!0;d.srgb_type="SRGB_SIMPLE";d.Jc=4;a.max_fps=60;d.lod_smooth_transitions=!0;break;case m.P_LOW:d.shadows=!1;d.shore_smoothing=!1;d.ssao=!1;d.dof=!1;d.god_rays=!1;d.bloom=!1;d.reflections=!1;d.refractions=!1;d.Go=!1;d.Mw=!1;d.ld=!1;f.Mo=512;f.Cu=256;d.Gk=2;d.anisotropic_filtering=!1;d.use_min50=!0;d.water_dynamic=!1;d.Bp=!1;d.antialiasing=!1;d.smaa=!1;d.compositing=!1;d.motion_blur=!1;d.allow_hidpi=!1;d.enable_outlining=!1;d.glow_materials=
!1;d.srgb_type="SRGB_SIMPLE";d.Jc=1;a.max_fps=60;d.lod_smooth_transitions=!1;break;case m.P_AUTO:r.va("Direct AUTO quality profile setting is forbidden")}};m.set=function(d,a){switch(d){case "allow_cors":m.wa.allow_cors=a;break;case "allow_hidpi":m.wa.allow_hidpi=a;break;case "alpha":m.context.alpha=a;break;case "alpha_sort":m.wa.alpha_sort=a;break;case "alpha_sort_threshold":m.wa.alpha_sort_threshold=a;break;case "anaglyph_use":p.Zu("anaglyph_use","stereo");m.wa.stereo=a?"ANAGLYPH":m.wa.stereo;break;
case "animation_framerate":m.Wk.hv=a;break;case "anisotropic_filtering":m.wa.anisotropic_filtering=a;break;case "antialiasing":m.wa.antialiasing=a;break;case "assets_dir":case "assets_path":m.se.path=a;break;case "assets_dds_available":m.se.Gz=a;break;case "assets_pvr_available":m.se.Tw=a;break;case "assets_min50_available":m.se.ZA=a;break;case "audio":m.Ra.RC=a;break;case "background_color":m.wa.background_color=a;break;case "bloom":m.wa.bloom=a;break;case "built_in_module_name":m.Nf.mu=a;break;
case "canvas_resolution_factor":m.wa.canvas_resolution_factor=a;break;case "console_verbose":m.wa.console_verbose=a;break;case "compositing":m.wa.compositing=a;break;case "dof":m.wa.dof=a;break;case "do_not_load_resources":m.wa.do_not_load_resources=a;break;case "god_rays":m.wa.god_rays=a;break;case "stereo":m.wa.stereo=a;break;case "lod_leap_smooth_threshold":m.wa.lod_leap_smooth_threshold=a;break;case "lod_smooth_transitions":m.wa.lod_smooth_transitions=a;break;case "max_fps":m.wa.max_fps=a;break;
case "max_fps_physics":m.xa.max_fps=a;break;case "media_auto_activation":m.wa.media_auto_activation=a;break;case "motion_blur":m.wa.motion_blur=a;break;case "physics_enabled":m.xa.enabled=a;break;case "physics_uranium_path":m.xa.ut&&window.WebAssembly?(m.xa.pt=a+m.xa.EJ,m.xa.gy=a+m.xa.DJ):(m.xa.pt=a+m.xa.RD,m.xa.gy=a+m.xa.bH);m.xa.kJ=a;break;case "physics_use_wasm":m.xa.ut=a;break;case "physics_calc_fps":m.xa.iz=a;break;case "physics_use_workers":m.xa.On=a;break;case "precision":m.wa.precision=a;
break;case "prevent_caching":m.se.prevent_caching=a;break;case "quality":m.wa.quality=a;break;case "reflections":m.wa.reflections=a;break;case "refractions":m.wa.refractions=a;break;case "sfx_mix_mode":m.Ra.tw=a;break;case "shaders_dir":case "shaders_path":m.Nf.shaders_path=a;break;case "shadows":m.wa.shadows=a;break;case "show_hud_debug_info":m.wa.show_hud_debug_info=a;break;case "smaa":p.Zu("smaa");m.wa.smaa=a;break;case "smaa_search_texture_path":p.Zu("smaa_search_texture_path");m.Nf.smaa_search_texture_path=
a;break;case "smaa_area_texture_path":p.Zu("smaa_area_texture_path");m.Nf.smaa_area_texture_path=a;break;case "ssao":m.wa.ssao=a;break;case "debug_view":m.wa.debug_view=a;break;case "enable_selectable":m.wa.enable_selectable=a;break;case "enable_outlining":m.wa.enable_outlining=a;break;case "outlining_overview_mode":m.Ed.outlining_overview_mode=a;break;case "glow_materials":m.wa.glow_materials=a;break;case "url_params":m.wa.url_params=a;break;case "use_min50":m.wa.use_min50=a;break;case "enable_texture_cache":m.wa.enable_texture_cache=
a;break;case "gl_debug":m.wa.gl_debug=a;break;case "srgb_type":m.wa.srgb_type=a;break;case "shadow_blur_samples":m.wa.shadow_blur_samples=a;break;case "reflection_quality":m.wa.reflection_quality=a;break;case "assets_gzip_available":m.wa.assets_gzip_available=a;break;case "debug_loading":m.wa.debug_loading=a;break;case "msaa_samples":m.wa.Jc=a;break;default:p.error("Unknown config property: "+d)}};m.get=function(d){switch(d){case "allow_cors":return m.wa.allow_cors;case "allow_hidpi":return m.wa.allow_hidpi;
case "alpha":return m.context.alpha;case "alpha_sort":return m.wa.alpha_sort;case "alpha_sort_threshold":return m.wa.alpha_sort_threshold;case "anaglyph_use":return"ANAGLYPH"==m.wa.stereo;case "animation_framerate":return m.Wk.hv;case "anisotropic_filtering":return m.wa.anisotropic_filtering;case "antialiasing":return m.wa.antialiasing;case "assets_dir":case "assets_path":return m.se.path;case "assets_dds_available":return m.se.Gz;case "assets_pvr_available":return m.se.Tw;case "assets_min50_available":return m.se.ZA;
case "audio":return m.Ra.RC;case "background_color":return m.wa.background_color;case "bloom":return m.wa.bloom;case "built_in_module_name":return m.Nf.mu;case "canvas_resolution_factor":return m.wa.canvas_resolution_factor;case "console_verbose":return m.wa.console_verbose;case "compositing":return m.wa.compositing;case "dof":return m.wa.dof;case "do_not_load_resources":return m.wa.do_not_load_resources;case "is_mobile_device":return m.wa.is_mobile_device;case "god_rays":return m.wa.god_rays;case "stereo":return m.wa.stereo;
case "lod_leap_smooth_threshold":return m.wa.lod_leap_smooth_threshold;case "lod_smooth_transitions":return m.wa.lod_smooth_transitions;case "max_fps":return m.wa.max_fps;case "max_fps_physics":return m.xa.max_fps;case "media_auto_activation":return m.wa.media_auto_activation;case "motion_blur":return m.wa.motion_blur;case "physics_enabled":return m.xa.enabled;case "physics_uranium_path":return m.xa.kJ;case "physics_uranium_bin":return m.xa.gy;case "physics_use_wasm":return m.xa.ut;case "physics_calc_fps":return m.xa.iz;
case "physics_use_workers":return m.xa.On;case "precision":return m.wa.precision;case "prevent_caching":return m.se.prevent_caching;case "quality":return m.wa.quality;case "reflections":return m.wa.reflections;case "refractions":return m.wa.refractions;case "sfx_mix_mode":return m.Ra.tw;case "shaders_dir":case "shaders_path":return m.Nf.shaders_path;case "shadows":return m.wa.shadows;case "show_hud_debug_info":return m.wa.show_hud_debug_info;case "smaa":return m.wa.smaa;case "smaa_search_texture_path":return m.Nf.smaa_search_texture_path;
case "smaa_area_texture_path":return m.Nf.smaa_area_texture_path;case "ssao":return m.wa.ssao;case "debug_view":return m.wa.debug_view;case "enable_selectable":return m.wa.enable_selectable;case "enable_outlining":return m.wa.enable_outlining;case "outlining_overview_mode":return m.Ed.outlining_overview_mode;case "glow_materials":return m.wa.glow_materials;case "url_params":return m.wa.url_params;case "use_min50":return m.wa.use_min50;case "enable_texture_cache":return m.wa.enable_texture_cache;case "gl_debug":return m.wa.gl_debug;
case "srgb_type":return m.wa.srgb_type;case "shadow_blur_samples":return m.wa.shadow_blur_samples;case "reflection_quality":return m.wa.reflection_quality;case "assets_gzip_available":return m.wa.assets_gzip_available;case "debug_loading":return m.wa.debug_loading;case "msaa_samples":return m.wa.Jc;default:p.error("Unknown config property: "+d)}};m.reset=function(){for(var d in m.SE)m.context[d]=m.SE[d];for(d in m.kF)m.wa[d]=m.kF[d];for(d in m.SD)m.se[d]=m.SD[d];for(d in m.vH)m.xa[d]=m.vH[d];for(d in m.UH)m.An[d]=
m.UH[d];for(d in m.oI)m.Ra[d]=m.oI[d];for(d in m.iF)m.Km[d]=m.iF[d]};m.reset_limits=function(){var d=m.di.xo,a;for(a in m.RE)m.di[a]=m.RE[a];m.di.xo=d};m.rG=f;m.AT=function(){var d=m.Nf,a=m.xa;f()||""!=d.shaders_path||(d.shaders_path=v()+"/"+d.ST);if(m.xa.ut&&window.WebAssembly){d=a.hy+a.EJ;var H=a.hy+a.DJ}else d=a.hy+a.RD,H=a.hy+a.bH;a.enabled&&""==a.pt&&(a.pt=d.replace("B4W_URANIUM_PATH=",""),a.gy=H.replace("B4W_URANIUM_PATH=",""))};m.get_assets_path=function(d){var a=m.se;if(a.path)return a.path;
var f=a.rS,k="B4W_ASSETS_PATH=";d&&(f=a.GS,k="B4W_PROJ_ASSETS_PATH=",f=f.replace("__NAME__",d));f=f.replace(k,"");return f=f.replace("__JS__",v())}});w.a=f},function(D,w,f){D=f(0);var N=f(2),U=f(1);f=Object(D.a)("assert",function(f,y){function d(a){a&&r.error.apply(r,arguments);throw"engine panic:\nThe engine tried to perform an invalid operation and halted.\nPlease copy the console contents above and submit it to the Blend4Web forum at\nhttps://www.blend4web.com/en/forums/forum/17/";}function m(a,
m){n(a)||d("Structure assertion failed: invalid first object value");n(m)||d("Structure assertion failed: invalid second object value");v(a,m)||d("Structure assertion failed: incompatible types");if(!(null==a||null==m||"object"!=typeof a||N._14(a)||a instanceof Array)){for(var k in a)n(a[k])||d("Structure assertion failed: invalid value for key in the first object: "+k),k in m||d("Structure assertion failed: missing key in the first object: "+k);for(k in m)n(m[k])||d("Structure assertion failed: invalid value for key in the second object: "+
k),k in a||d("Structure assertion failed: missing key in the second object: "+k),v(a[k],m[k])||d("Structure assertion failed: incompatible types for key "+k)}}function n(a){return"undefined"==typeof a?!1:"number"==typeof a&&isNaN(a)?!1:!0}function v(a,d){if(typeof a!=typeof d)return!1;if(null!=a&&null!=d&&"object"==typeof a){var k=a instanceof Array,c=d instanceof Array;if(k&&!c||!k&&c)return!1;a=N._14(a);d=N._14(d);if(a&&!d||!a&&d)return!1}return!0}var r=Object(U.a)(f),p=null,z=!1;y.va=d;y.assert=
function(a){a||d("Assertion failed")};y.aY=function(a,m){a.constructor!=m&&d("Type assertion failed: value <"+a+"> has type <"+a.constructor+">, required <"+m+">")};y.lX=m;y.mX=function(a){z?m(a,p):z=!0;p=null!=a&&"object"==typeof a?N.N(a):a}});w.a=f},function(D,w,f){function N(){var b=new Float32Array(9);b[3]=1;b[4]=1;b[5]=1;return b}function U(b,c){if(b[8]!=b[8])throw Error(b);c[0]=b[0];c[1]=b[1];c[2]=b[2];c[3]=b[3];c[4]=b[4];c[5]=b[5];c[6]=b[6];c[7]=b[7];c[8]=b[8];return c}function n(b,c){if(b[0]!=
b[0])throw Error(b);c[0]=b[0];c[1]=b[1];c[2]=b[2];return c}function y(b,c){z._15(b)?(c[3]=b[0],c[4]=b[1],c[5]=b[2]):(c[3]=b,c[4]=b,c[5]=b);return c}function d(b,c){if(b[0]!=b[0])throw Error(b);var a=0>b[3]?-1:1;c[6]=a*b[0];c[7]=a*b[1];c[8]=a*b[2];return c}function m(b,c){c[0]=b[0];c[1]=b[1];c[2]=b[2];return c}function C(b,c){return c?(c[0]=b[3],c[1]=b[4],c[2]=b[5],c):b[3]}function v(b,c){c[0]=b[6];c[1]=b[7];c[2]=b[8];c[3]=Math.sqrt(Math.abs(1-b[6]*b[6]-b[7]*b[7]-b[8]*b[8]));return c}w.b=N;w.e=function(b,
c,a,h,k,l,d,q){var u=N();u[0]=b;u[1]=c;u[2]=a;u[3]=h;u[4]=h;u[5]=h;b=0>q?-1:1;u[6]=b*k;u[7]=b*l;u[8]=b*d;return u};w.c=function(){var b=new Float32Array(9);b[3]=1;b[4]=1;b[5]=1;return b};w.a=U;w.m=function(b){b[0]=0;b[1]=0;b[2]=0;b[3]=1;b[4]=1;b[5]=1;b[6]=0;b[7]=0;b[8]=0;return b};w.t=function(b,c,a,h){h[0]=b[0];h[1]=b[1];h[2]=b[2];z._15(c)?(h[3]=c[0],h[4]=c[1],h[5]=c[2]):(h[3]=c,h[4]=c,h[5]=c);b=0>a[3]?-1:1;h[6]=b*a[0];h[7]=b*a[1];h[8]=b*a[2];return h};w.v=n;w.s=y;w.w=function(b,c){c[0]=b[0];c[1]=
b[1];c[2]=b[2];c[3]=b[3];return c};w.r=d;w.k=function(b){return m(b,p.create())};w.j=m;w.i=C;w.l=function(b,c){c[0]=b[0];c[1]=b[1];c[2]=b[2];c[3]=b[3];return c};w.h=function(b){return v(b,p.create())};w.g=v;f.d(w,"p",function(){return c});f.d(w,"x",function(){return l});f.d(w,"d",function(){return b});f.d(w,"q",function(){return h});f.d(w,"D",function(){return G});f.d(w,"E",function(){return ka});f.d(w,"F",function(){return u});f.d(w,"z",function(){return E});f.d(w,"y",function(){return R});f.d(w,
"C",function(){return O});w.A=function(b,c,a){v(c,a);return p.multiply(a,b,a)};f.d(w,"B",function(){return L});f.d(w,"G",function(){return B});f.d(w,"o",function(){return Y});f.d(w,"n",function(){return K});w.f=function(b,c,a){a[0]=b[9*c];a[1]=b[9*c+1];a[2]=b[9*c+2];a[3]=b[9*c+3];a[4]=b[9*c+4];a[5]=b[9*c+5];a[6]=b[9*c+6];a[7]=b[9*c+7];a[8]=b[9*c+8];return a};w.u=function(b,c,a){c[9*a]=b[0];c[9*a+1]=b[1];c[9*a+2]=b[2];c[9*a+3]=b[3];c[9*a+4]=b[4];c[9*a+5]=b[5];c[9*a+6]=b[6];c[9*a+7]=b[7];c[9*a+8]=b[8];
return c};var r=f(21),p=f(8),z=f(2),a=f(3),H=Math.sin(-Math.PI/4),k=-H,c=function(){var b=a.create(),c=a.create(),h=p.create();return function(k,l){var u=C(k,b);a.inverse(u,u);if(!u[0])return null;var A=m(k,c);k=v(k,h);p.invert(k,k);a.multiply(A,u,A);a.transformQuat(A,k,A);a.negate(A,A);n(A,l);y(u,l);d(k,l);return l}}(),l=function(){var b=a.create(),c=a.create(),h=p.create();return function(a,k){var l=m(a,b),d=C(a,c);a=v(a,h);r.fromRotationTranslation(a,l,k);r.scale(k,d,k);return k}}(),b=function(){var b=
a.create(),c=a.create(),h=p.create();return function(a,k){var l=z._26(a,b),u=z._25(a,c);a=z._24(a,h);n(l,k);y(u,k);d(a,k);return k}}(),h=function(){var b=a.create(),c=a.create(),h=p.create(),k=p.create();return function(l,u,A){var q=m(u,b);G(q,l,q);n(q,A);q=C(l,b);var P=C(u,c);q=a.multiply(q,P,b);y(q,A);l=v(l,h);u=v(u,k);u=p.multiply(l,u,h);d(u,A);return A}}();(function(){var b=r.create();return function(c,a,h){a=l(a,b);r.multiply(a,c,h);return h}})();var G=function(){var b=a.create(),c=a.create(),
h=p.create();return function(k,l,d){var u=m(l,b),q=C(l,c);l=v(l,h);a.multiply(k,q,d);a.transformQuat(d,l,d);a.add(d,u,d);return d}}(),ka=function(){var b=a.create(),c=a.create(),h=p.create();return function(k,l,d){var u=m(l,b),q=C(l,c);l=v(l,h);a.subtract(k,u,d);p.invert(l,l);a.transformQuat(d,l,d);a.inverse(q,q);a.multiply(d,q,d);return d}}(),u=function(){var b=a.create(),c=a.create(),h=a.create(),k=p.create();return function(l,d,u,q){q|=0;var A=l.length,f=m(d,b),t=C(d,c);d=v(d,k);for(var e=0;e<
A;e+=3)h[0]=l[e],h[1]=l[e+1],h[2]=l[e+2],a.multiply(h,t,h),a.transformQuat(h,d,h),a.add(h,f,h),u[q+e]=h[0],u[q+e+1]=h[1],u[q+e+2]=h[2];return u}}(),E=function(){var b=a.create(),c=a.create(),h=p.create();return function(k,l,d,u){u|=0;var q=k.length,m=C(l,b);l=v(l,h);for(var A=0;A<q;A+=3)c[0]=k[A],c[1]=k[A+1],c[2]=k[A+2],a.multiply(c,m,c),a.transformQuat(c,l,c),d[u+A]=c[0],d[u+A+1]=c[1],d[u+A+2]=c[2];return d}}(),R=function(){var b=a.create(),c=p.create();return function(h,k,l){var d=C(k,b);k=v(k,
c);a.multiply(h,d,l);a.transformQuat(l,k,l);return l}}(),O=function(){var b=a.create();a.create();var c=p.create();return function(h,k,l,d){d|=0;var u=h.length,q=C(k,b);k=v(k,c);for(var m,A=0;A<u;A+=4)m=h[A+2],a.scale(m,q,m),a.transformQuat(m,k,m),l[d+A]=m[0],l[d+A+1]=m[1],l[d+A+2]=m[2],l[d+A+3]=h[A+3];return l}}(),L=function(){var b=p.create();return function(c,a,h,k){k|=0;a=v(a,b);z._38(c,a,h,k);return h}}(),B=function(){var b=a.create(),c=a.create(),h=p.create();return function(k,l,d){var u=m(k,
b),q=C(k,c),A=v(k,h);l=a.multiply(l,q,c);a.transformQuat(l,A,l);a.add(u,l,u);U(k,d);n(u,d);return d}}(),Y=function(){var b=a.create(),c=a.create(),h=p.create(),k=p.create();return function(l,u,A,q){var f=m(l,b),P=m(u,c),t=a.lerp(f,P,A,b);n(t,q);C(l,b);C(u,c);f=a.lerp(f,P,A,b);y(f,q);l=v(l,h);u=v(u,k);A=p.slerp(l,u,A,h);d(A,q);return q}}();(function(){var b=a.create(),c=a.create(),h=p.create(),k=p.create();return function(a,l,u,q){var A=m(a,b),f=m(l,c);b[0]=f[0]*(u+1)-A[0]*u;b[1]=f[1]*(u+1)-A[1]*u;
b[2]=f[2]*(u+1)-A[2]*u;n(b,q);A=C(a,b);f=C(l,c);b[0]=f[0]*(u+1)-A[0]*u;b[1]=f[1]*(u+1)-A[1]*u;b[2]=f[2]*(u+1)-A[2]*u;y(b,q);a=v(a,h);l=v(l,k);h[0]=l[0]*(u+1)-a[0]*u;h[1]=l[1]*(u+1)-a[1]*u;h[2]=l[2]*(u+1)-a[2]*u;h[3]=l[3]*(u+1)-a[3]*u;p.normalize(h,h);d(h,q);return q}})();var K=function(){var b=a.create();a.create();var c=p.create(),h=p.create();return function(a,k,l,u,q){var A=m(a,b);A[0]+=k*l[0];A[1]+=k*l[1];A[2]+=k*l[2];n(A,q);l=C(a,b);y(l,q);a=v(a,c);l=u[0];A=u[1];u=u[2];h[0]=.5*(l*a[3]+A*a[2]-
u*a[1]);h[1]=.5*(A*a[3]+u*a[0]-l*a[2]);h[2]=.5*(u*a[3]+l*a[1]-A*a[0]);h[3]=.5*(-l*a[0]-A*a[1]-u*a[2]);a[0]+=h[0]*k;a[1]+=h[1]*k;a[2]+=h[2]*k;a[3]+=h[3]*k;p.normalize(a,a);d(a,q);return q}}();(function(){var b=a.create(),c=a.create(),h=p.create(),l=p.create();return function(a,u){var A=m(a,b);n(A,u);A=C(a,c);y(A,u);a=v(a,h);l[0]=a[0]*k+a[3]*H;l[1]=a[1]*k+a[2]*H;l[2]=a[2]*k-a[1]*H;l[3]=a[3]*k-a[0]*H;d(l,u);return u}})();(function(){var b=a.create(),c=p.create();return function(a,h){var k=m(a,b);k[0]=
k[0];k[1]=-k[2];k[2]=k[1];n(k,h);k=C(a,b);y(k,h);a=v(a,c);a[0]=a[0];a[1]=-a[1];a[2]=a[2];a[3]=a[3];d(a,h);return h}})()},function(D,w,f){function N(){var a=new p(4);a[0]=0;a[1]=0;a[2]=0;a[3]=0;return a}function U(a,k,c){c[0]=a[0]-k[0];c[1]=a[1]-k[1];c[2]=a[2]-k[2];c[3]=a[3]-k[3];return c}function n(a,k,c){c[0]=a[0]*k[0];c[1]=a[1]*k[1];c[2]=a[2]*k[2];c[3]=a[3]*k[3];return c}function y(a,k,c){c[0]=a[0]/k[0];c[1]=a[1]/k[1];c[2]=a[2]/k[2];c[3]=a[3]/k[3];return c}function d(a,k){var c=k[0]-a[0],l=k[1]-
a[1],b=k[2]-a[2];a=k[3]-a[3];return Math.sqrt(c*c+l*l+b*b+a*a)}function m(a,k){var c=k[0]-a[0],l=k[1]-a[1],b=k[2]-a[2];a=k[3]-a[3];return c*c+l*l+b*b+a*a}function C(a){var k=a[0],c=a[1],l=a[2];a=a[3];return Math.sqrt(k*k+c*c+l*l+a*a)}function v(a){var k=a[0],c=a[1],l=a[2];a=a[3];return k*k+c*c+l*l+a*a}function r(a,k){var c=a[0],l=a[1],b=a[2];a=a[3];var h=c*c+l*l+b*b+a*a;0<h&&(h=1/Math.sqrt(h),k[0]=c*h,k[1]=l*h,k[2]=b*h,k[3]=a*h);return k}Object.defineProperty(w,"__esModule",{value:!0});w.create=N;
w.clone=function(a){var k=new p(4);k[0]=a[0];k[1]=a[1];k[2]=a[2];k[3]=a[3];return k};w.fromValues=function(a,k,c,l){var b=new p(4);b[0]=a;b[1]=k;b[2]=c;b[3]=l;return b};w.copy=function(a,k){k[0]=a[0];k[1]=a[1];k[2]=a[2];k[3]=a[3];return k};w.set=function(a,k,c,l,b){b[0]=a;b[1]=k;b[2]=c;b[3]=l;return b};w.add=function(a,k,c){c[0]=a[0]+k[0];c[1]=a[1]+k[1];c[2]=a[2]+k[2];c[3]=a[3]+k[3];return c};w.subtract=U;f.d(w,"sub",function(){return U});w.multiply=n;f.d(w,"mul",function(){return n});w.divide=y;
f.d(w,"div",function(){return y});w.min=function(a,k,c){c[0]=Math.min(a[0],k[0]);c[1]=Math.min(a[1],k[1]);c[2]=Math.min(a[2],k[2]);c[3]=Math.min(a[3],k[3]);return c};w.max=function(a,k,c){c[0]=Math.max(a[0],k[0]);c[1]=Math.max(a[1],k[1]);c[2]=Math.max(a[2],k[2]);c[3]=Math.max(a[3],k[3]);return c};w.scale=function(a,k,c){c[0]=a[0]*k;c[1]=a[1]*k;c[2]=a[2]*k;c[3]=a[3]*k;return c};w.scaleAndAdd=function(a,k,c,l){l[0]=a[0]+k[0]*c;l[1]=a[1]+k[1]*c;l[2]=a[2]+k[2]*c;l[3]=a[3]+k[3]*c;return l};w.distance=
d;f.d(w,"dist",function(){return d});w.squaredDistance=m;f.d(w,"sqrDist",function(){return m});w.length=C;f.d(w,"len",function(){return C});w.squaredLength=v;f.d(w,"sqrLen",function(){return v});w.negate=function(a,k){k[0]=-a[0];k[1]=-a[1];k[2]=-a[2];k[3]=-a[3];return k};w.inverse=function(a,k){k[0]=1/a[0];k[1]=1/a[1];k[2]=1/a[2];k[3]=1/a[3];return k};w.normalize=r;w.dot=function(a,k){return a[0]*k[0]+a[1]*k[1]+a[2]*k[2]+a[3]*k[3]};w.lerp=function(a,k,c,l){var b=a[0],h=a[1],d=a[2];a=a[3];l[0]=b+c*
(k[0]-b);l[1]=h+c*(k[1]-h);l[2]=d+c*(k[2]-d);l[3]=a+c*(k[3]-a);return l};w.random=function(a,k){k[0]=z();k[1]=z();k[2]=z();k[3]=z();r(k,k);a(k,a,k);return k};w.transformMat4=function(a,k,c){var l=a[0],b=a[1],h=a[2];a=a[3];c[0]=k[0]*l+k[4]*b+k[8]*h+k[12]*a;c[1]=k[1]*l+k[5]*b+k[9]*h+k[13]*a;c[2]=k[2]*l+k[6]*b+k[10]*h+k[14]*a;c[3]=k[3]*l+k[7]*b+k[11]*h+k[15]*a;return c};w.transformQuat=function(a,k,c){var l=a[0],b=a[1],h=a[2],d=k[0],m=k[1],u=k[2];k=k[3];var f=k*l+m*h-u*b,r=k*b+u*l-d*h,v=k*h+d*b-m*l;
l=-d*l-m*b-u*h;c[0]=f*k+l*-d+r*-u-v*-m;c[1]=r*k+l*-m+v*-d-f*-u;c[2]=v*k+l*-u+f*-m-r*-d;c[3]=a[3];return c};f.d(w,"forEach",function(){return a});w.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};var p="undefined"!==typeof Float32Array?Float32Array:Array,z=Math.random,a=function(){var a=N();return function(k,c,l,b,h,d){c||(c=4);l||(l=0);for(b=b?Math.min(b*c+l,k.length):k.length;l<b;l+=c)a[0]=k[l],a[1]=k[l+1],a[2]=k[l+2],a[3]=k[l+3],h(a,d,a),k[l]=a[0],k[l+1]=a[1],k[l+2]=a[2],k[l+
3]=a[3];return k}}()},function(D,w,f){function N(){var a=new r(4);a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}function U(a,k,c){k*=.5;var l=Math.sin(k);c[0]=l*a[0];c[1]=l*a[1];c[2]=l*a[2];c[3]=Math.cos(k);return c}function n(a,k,c){var l=a[0],b=a[1],h=a[2];a=a[3];var d=k[0],m=k[1],u=k[2];k=k[3];c[0]=l*k+a*d+b*u-h*m;c[1]=b*k+a*m+h*d-l*u;c[2]=h*k+a*u+l*m-b*d;c[3]=a*k-l*d-b*m-h*u;return c}function y(a,k,c,l){var b=a[0],h=a[1],d=a[2];a=a[3];var m=k[0],u=k[1],f=k[2];k=k[3];var r=b*m+h*u+d*f+a*k;0>r&&(r=-r,m=
-m,u=-u,f=-f,k=-k);if(1E-6<1-r){var v=Math.acos(r);var p=Math.sin(v);r=Math.sin((1-c)*v)/p;c=Math.sin(c*v)/p}else r=1-c;l[0]=r*b+c*m;l[1]=r*h+c*u;l[2]=r*d+c*f;l[3]=r*a+c*k;return l}function d(a,k){var c=a[0]+a[4]+a[8];if(0<c)c=Math.sqrt(c+1),k[3]=.5*c,c=.5/c,k[0]=(a[5]-a[7])*c,k[1]=(a[6]-a[2])*c,k[2]=(a[1]-a[3])*c;else{var l=0;a[4]>a[0]&&(l=1);a[8]>a[3*l+l]&&(l=2);var b=(l+1)%3,h=(l+2)%3;c=Math.sqrt(a[3*l+l]-a[3*b+b]-a[3*h+h]+1);k[l]=.5*c;c=.5/c;k[3]=(a[3*b+h]-a[3*h+b])*c;k[b]=(a[3*b+l]+a[3*l+b])*
c;k[h]=(a[3*h+l]+a[3*l+h])*c}return k}Object.defineProperty(w,"__esModule",{value:!0});w.create=N;f.d(w,"rotationTo",function(){return p});f.d(w,"setAxes",function(){return z});w.identity=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};w.setAxisAngle=U;w.multiply=n;f.d(w,"mul",function(){return n});w.rotateX=function(a,k,c){k*=.5;var l=a[0],b=a[1],h=a[2];a=a[3];var d=Math.sin(k);k=Math.cos(k);c[0]=l*k+a*d;c[1]=b*k+h*d;c[2]=h*k-b*d;c[3]=a*k-l*d;return c};w.rotateY=function(a,k,c){k*=.5;var l=a[0],
b=a[1],h=a[2];a=a[3];var d=Math.sin(k);k=Math.cos(k);c[0]=l*k-h*d;c[1]=b*k+a*d;c[2]=h*k+l*d;c[3]=a*k-b*d;return c};w.rotateZ=function(a,k,c){k*=.5;var l=a[0],b=a[1],h=a[2];a=a[3];var d=Math.sin(k);k=Math.cos(k);c[0]=l*k+b*d;c[1]=b*k-l*d;c[2]=h*k+a*d;c[3]=a*k-h*d;return c};w.calculateW=function(a,k){var c=a[0],l=a[1];a=a[2];k[0]=c;k[1]=l;k[2]=a;k[3]=Math.sqrt(Math.abs(1-c*c-l*l-a*a));return k};w.slerp=y;f.d(w,"sqlerp",function(){return a});w.invert=function(a,k){var c=a[0],l=a[1],b=a[2];a=a[3];var h=
c*c+l*l+b*b+a*a;h=h?1/h:0;k[0]=-c*h;k[1]=-l*h;k[2]=-b*h;k[3]=a*h;return k};w.conjugate=function(a,k){k[0]=-a[0];k[1]=-a[1];k[2]=-a[2];k[3]=a[3];return k};w.fromMat3=d;w.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};var m=f(3),C=f(7),v=f(27);f.d(w,"clone",function(){return C.clone});f.d(w,"fromValues",function(){return C.fromValues});f.d(w,"copy",function(){return C.copy});f.d(w,"set",function(){return C.set});f.d(w,"add",function(){return C.add});f.d(w,"scale",function(){return C.scale});
f.d(w,"dot",function(){return C.dot});f.d(w,"lerp",function(){return C.lerp});f.d(w,"length",function(){return C.length});f.d(w,"len",function(){return C.length});f.d(w,"squaredLength",function(){return C.squaredLength});f.d(w,"sqrLen",function(){return C.squaredLength});f.d(w,"normalize",function(){return C.normalize});var r="undefined"!==typeof Float32Array?Float32Array:Array,p=function(){var a=m.create(),k=m.fromValues(1,0,0),c=m.fromValues(0,1,0);return function(l,b,h){var d=m.dot(l,b);if(-.9999999>
d)return m.cross(k,l,a),1E-6>m.length(a)&&m.cross(c,l,a),m.normalize(a,a),U(a,Math.PI,h),h;if(.9999999<d)return h[0]=0,h[1]=0,h[2]=0,h[3]=1,h;m.cross(l,b,a);h[0]=a[0];h[1]=a[1];h[2]=a[2];h[3]=1+d;return C.normalize(h,h)}}(),z=function(){var a=v.create();return function(k,c,l,b){a[0]=c[0];a[3]=c[1];a[6]=c[2];a[1]=l[0];a[4]=l[1];a[7]=l[2];a[2]=-k[0];a[5]=-k[1];a[8]=-k[2];return C.normalize(d(a,b),b)}}(),a=function(){var a=N(),k=N();return function(c,l,b,h,d,m){y(c,h,d,a);y(l,b,d,k);y(a,k,2*d*(1-d),
m);return m}}()},function(D,w,f){D=f(0);var N=f(25),U=f(4),n=f(6),y=f(2),d=f(3),m=f(7);f=Object(D.a)("__obj_util",function(f,v){function r(a){a={type:a,Rd:0,na:n.c(),By:n.c(),pivot:new Float32Array(3),$c:new Float32Array(3),pl:0,ql:0,EA:!1,Tv:!1,al:null,mj:0,Qx:!1,od:d.create(),use_panning:!1,cc:0,kq:1,jq:1,lq:1,dof_distance:0,dof_front_start:0,dof_front_end:0,dof_rear_start:0,dof_rear_end:0,dof_power:0,dof_bokeh_intensity:0,dof_bokeh:!1,te:!1,dof_object:null,zc:null,Hb:null,rc:null,me:null,le:null,
Oe:null,Xi:!0,lj:{Fl:1,Gl:1,Hl:0},Qd:-1,Gd:-1,ad:new Float32Array(4),ve:0,th:0,dk:!1,fs:new Float32Array(3),nw:new Float32Array(3),Wg:0,Vg:Infinity,ik:0,jk:0,cf:!1,Of:!1,Be:!1,sf:!1,Pe:!1,ze:!1,Hd:!1,Mh:"",yf:!1,df:!1,ld:!1,hide:!1,gG:!1,Ol:!1,Hw:!1,Ed:!1,Gw:!1,Iw:!1,tl:!1,is_visible:!1,Gr:!1,Vn:0,Cg:0,Dg:0,ig:0,hg:0,cg:0,kk:"",Ef:{NA:"",MA:"",rB:""},ym:!1,pu:new Float32Array(3),ph:!1,Nq:!1,Pq:"",Oq:!1,lg:0,ly:0,my:0,li:0,Tm:!1,Ld:!1,Rf:!1,qg:[],vl:!1,Gj:!1,Zf:1,io:0,ho:1,Fj:null,mi:!1,Mi:new Int8Array([-1,
-1]),Ep:[],rw:[],mx:[],ye:null,qf:null,De:null,wf:null,$l:null,Kl:null,Mg:null,Oi:null,ys:null,jo:null,Gq:null,Jj:N.w(),gb:N.w(),ai:N.w(),Xc:N.A(),Ye:N.A(),jc:N.y(),Xk:N.y(),Nd:N.C(),ZD:N.C(),Mq:N.K(),Kq:N.I(),Lq:N.J(),nj:0};d.copy(y.f,a.od);return a}function p(a){return{Bb:a,Sv:!1,Ia:[],Lg:[],oj:[],Tj:null,YB:[],es:0,oH:!1,Qa:[],rI:[]}}function C(a){if(!(a instanceof Object))return a;var b=null,c=null,h=null,k=null,l=null,d=null;a.Ua&&(b=a.Ua,a.Ua=null);a.vg&&(c=a.vg,a.vg=null);a.bg&&(h=a.bg,a.bg=
null);a.Tb&&(k=a.Tb,a.Tb=null);a.ec&&(l=a.ec,a.ec=null);a.Sf&&(d=a.Sf,a.Sf=null);var u=a.constructor;switch(u){case Int8Array:case Uint8Array:case Uint8ClampedArray:case Int16Array:case Uint16Array:case Int32Array:case Uint32Array:case Float32Array:case Float64Array:u=new u(a);break;case Array:u=new u(a.length);for(var m=0;m<a.length;m++)u[m]=C(a[m]);break;case WebGLUniformLocation:case WebGLProgram:case WebGLShader:u=a;break;case WebGLFramebuffer:case WebGLRenderbuffer:case WebGLTexture:case WebGLBuffer:u=
null;break;case Function:u=a;break;default:for(m in u=new u,a)u[m]=C(a[m])}b&&(u.Ua=b,a.Ua=b);c&&(u.vg=c,a.vg=c);h&&(u.bg=h,a.bg=h);k&&(u.Tb=k,a.Tb=k);l&&(u.ec=l,a.ec=l);d&&(u.Sf=y.S(),a.Sf=d);return u}function a(a,b){N.o(b,a.gb);N.h(a.gb,a.na,a.ai)}function H(a,b,c){a.Xc=N.l(b,c);N.k(a.Xc,a.na,a.Ye)}function k(a,b,c,h,k,l){a.jc=N.e(b,c,h,l);d.scale(a.jc.Cb,k[0],a.jc.Cb);d.scale(a.jc.Db,k[1],a.jc.Db);d.scale(a.jc.Eb,k[2],a.jc.Eb);N.i(a.jc,a.na,a.Xk)}function c(a,b,c,h){a.Mq=N.d(b,h);a.Kq=N.b(c,h);
a.Lq=N.c(b,h)}function l(a,b,c,h,k,l){a.Nd=N.O(l,b,c,h,k);N.j(a.Nd,a.na,a.ZD)}function b(a,b,c){N.h(a.Xb.Bf,b,c.Bf);a.fm&&N.i(a.Xb.ag,b,c.ag);N.k(a.Xb.Cf,b,c.Cf)}function h(a,b){a=a.Aa;for(var c=0;c<a.length;c++){var h=a[c];if(h.Bb==b)return h}return null}function G(a){return a.Jl?a.parent:a.parent?G(a.parent):null}var ka=Object(U.a)(f).wa;v.Ny=Infinity;v.Gm=r;v.oz=function(a){var b=r(a.type);b.Rd=a.Rd;n.a(a.na,b.na);n.a(a.By,b.By);d.copy(a.pivot,b.pivot);d.copy(a.$c,b.$c);b.pl=a.pl;b.ql=a.ql;b.EA=
a.EA;b.Tv=a.Tv;a.al&&(b.al=d.clone(a.al));b.mj=a.mj;b.Qx=a.Qx;d.copy(a.od,b.od);b.use_panning=a.use_panning;b.cc=a.cc;b.kq=a.kq;b.jq=a.jq;b.lq=a.lq;b.dof_distance=a.dof_distance;b.dof_front_start=a.dof_front_start;b.dof_front_end=a.dof_front_end;b.dof_rear_start=a.dof_rear_start;b.dof_rear_end=a.dof_rear_end;b.dof_power=a.dof_power;b.dof_bokeh_intensity=a.dof_bokeh_intensity;b.dof_bokeh=a.dof_bokeh;b.te=a.te;b.dof_object=a.dof_object;b.zc=y.O(a.zc);b.Hb=y.O(a.Hb);b.rc=y.O(a.rc);b.me=y.O(a.me);b.le=
y.O(a.le);b.Oe=a.Oe;b.Xi=a.Xi;b.lj.Fl=a.lj.Fl;b.lj.Gl=a.lj.Gl;b.lj.Hl=a.lj.Hl;b.Qd=a.Qd;b.Gd=a.Gd;b.ad=a.ad;b.ve=a.ve;b.th=a.th;b.dk=a.dk;d.copy(a.fs,b.fs);d.copy(a.nw,b.nw);b.Wg=a.Wg;b.Vg=a.Vg;b.ik=a.ik;b.jk=a.jk;b.cf=a.cf;b.Of=a.Of;b.Be=a.Be;b.sf=a.sf;b.Pe=a.Pe;b.ze=a.ze;b.Hd=a.Hd;b.Mh=a.Mh;b.yf=a.yf;b.df=a.df;b.ld=a.ld;b.hide=a.hide;b.Ol=a.Ol;b.Hw=a.Hw;b.Ed=a.Ed;b.Gw=a.Gw;b.Iw=a.Iw;b.tl=a.tl;b.is_visible=a.is_visible;b.Gr=a.Gr;b.Vn=a.Vn;b.Cg=a.Cg;b.Dg=a.Dg;b.ig=a.ig;b.hg=a.hg;b.cg=a.cg;b.kk=a.kk;
b.Ef=a.Ef;b.ym=a.ym;d.copy(a.pu,b.pu);b.ph=a.ph;b.Nq=a.Nq;b.Pq=a.Pq;b.Oq=a.Oq;b.lg=a.lg;b.ly=a.ly;b.my=a.my;b.li=a.li;b.Tm=a.Tm;b.Ld=a.Ld;b.Rf=a.Rf;b.qg=y.O(a.qg);b.vl=a.vl;b.Gj=a.Gj;b.Zf=a.Zf;b.io=a.io;b.ho=a.ho;b.Mi.set(a.Mi);b.Ep=y.O(a.Ep);b.rw=y.O(a.rw);b.mx=y.O(a.mx);b.ye=y.O(a.ye);b.qf=y.O(a.qf);b.De=y.O(a.De);b.wf=y.O(a.wf);b.Mg=y.O(a.Mg);b.Oi=y.O(a.Oi);b.ys=y.O(a.ys);b.jo=y.O(a.jo);b.Gq=y.O(a.Gq);N.o(a.Jj,b.Jj);N.o(a.gb,b.gb);N.o(a.ai,b.ai);N.u(a.Xc,b.Xc);N.u(a.Ye,b.Ye);N.s(a.jc,b.jc);N.s(a.Xk,
b.Xk);N.p(a.Kq,b.Kq);N.r(a.Mq,b.Mq);N.q(a.Lq,b.Lq);b.nj=a.nj;return b};v.ro=function(a,b,c){c||(c=a);return{name:a,nd:y._4(),oe:c,type:b,Sc:[],ul:!0,Uk:null,Kf:{El:[],bn:[]},is_dynamic:!1,Ur:!1,qt:!1,qG:!1,ka:null,Yc:null,Ra:null,lc:null,au:null,anchor:null,Do:null,sw:null,Eu:null,Aa:[],Ld:[],bf:y.S(),uz:y.S(),Za:[],zn:[],Lf:[],fo:[],wi:null,Bn:[],parent:null,Jl:!1,qs:"",sy:null,ts:null,Jn:!1,Rb:"",yu:"AUTO",mg:!1,is_character:!1,dn:!1,ez:!1,xa:null,Ba:null,wh:null,xg:null,Fo:null,qE:null,xB:[],Fd:{tk:"NO_COLLISION",
Ai:!1,sJ:!1,mf:0,yt:0,xt:0,nr:0,Ls:0,ER:!1,FR:!1,GR:!1,HR:!1,IR:!1,JR:!1,$e:0,Ze:0,af:0,KC:!1,uu:"BOX",aq:!1},sH:{Xx:0,qB:0,bh:0,FB:0},um:0,Lm:[],hB:!1,fH:!1,gs:[]}};v.YX=p;v.ir=function(a){return a instanceof Array?a.slice():a};v.jr=C;v.is_dynamic=function(a){return a.is_dynamic};v.kc=function(a){return"MESH"==a.type&&a.is_dynamic};v.Fq=function(a,b){a.Aa.push(p(b))};v.Ig=function(a,c,k){var l=a.ka;a=h(a,c);a.Ia.push(k);c=N.L();b(k,l.na,c);a.Lg.push(c)};v.fJ=function(b,h){var d=b.ka,m=Math.max(Math.abs(h.max_x),
Math.abs(h.min_x)),u=Math.max(Math.abs(h.max_y),Math.abs(h.min_y));h=Math.max(Math.abs(h.max_z),Math.abs(h.min_z));h=Math.sqrt(m*m+u*u+h*h);m=Math.sqrt(m*m+u*u);u=N.w();u.max_x=u.max_y=u.max_z=h;u.min_x=u.min_y=u.min_z=-h;a(d,u);H(d,h,[0,0,0]);k(d,[1,0,0],[0,1,0],[0,0,1],[h,h,h],[0,0,0]);b.is_dynamic?c(d,m,m,u):l(d,[1,0,0],[0,1,0],[0,0,1],[h,h,h],[0,0,0])};v.bV=function(b,h,d){var m=b.ka,u=d.bs_rad,f=d.bc_rad,r=d.bs_cen,v=d.be_cen,p=d.caxis_x,T=d.caxis_y,n=d.caxis_z,A=d.be_ax,aa=d.rbb.rbb_c;d=d.rbb.rbb_s;
a(m,h);H(m,u,r);h=b.is_dynamic;k(m,h?p:[1,0,0],h?T:[0,1,0],h?n:[0,0,1],A,v);b.is_dynamic?c(m,f,f,m.gb):l(m,p,T,n,d,aa)};v.cV=function(b,h,d){for(var m=b.ka,u=h.max_x-h.min_x,f=h.max_y-h.min_y,r=h.max_z-h.min_z,v=(h.max_x+h.min_x)/2,p=(h.max_y+h.min_y)/2,T=(h.max_z+h.min_z)/2,n=v,A=p,aa=Math.max(u,Math.max(f,r))/2,J=Math.max(u,f)/2,P=[v/(u?u:1),p/(f?f:1),T/(r?r:1)],q=.5,C=0;C<d.length;C++)for(var I=d[C],t=0;t<I.length;t+=3){var e=I[t],E=I[t+1],z=I[t+2],G=Math.sqrt((v-e)*(v-e)+(p-E)*(p-E)+(T-z)*(T-
z));if(G>aa){var y=v-aa*(e-v)/G,R=p-aa*(E-p)/G;G=T-aa*(z-T)/G;v=(y+e)/2;p=(R+E)/2;T=(G+z)/2;aa=Math.sqrt((v-e)*(v-e)+(p-E)*(p-E)+(T-z)*(T-z))}R=Math.sqrt((n-e)*(n-e)+(A-E)*(A-E));R>J&&(y=n-J*(e-n)/R,R=A-J*(E-A)/R,n=(y+e)/2,A=(R+E)/2,J=Math.sqrt((n-e)*(n-e)+(A-E)*(A-E)));e/=u?u:1;E/=f?f:1;z/=r?r:1;G=Math.sqrt((P[0]-e)*(P[0]-e)+(P[1]-E)*(P[1]-E)+(P[2]-z)*(P[2]-z));G>q&&(y=P[0]-q*(e-P[0])/G,R=P[1]-q*(E-P[1])/G,G=P[2]-q*(z-P[2])/G,P[0]=(y+e)/2,P[1]=(R+E)/2,P[2]=(G+z)/2,q=Math.sqrt((P[0]-e)*(P[0]-e)+(P[1]-
E)*(P[1]-E)+(P[2]-z)*(P[2]-z)))}d=u?u*P[0]:h.max_x;n=f?f*P[1]:h.max_y;P=r?r*P[2]:h.max_z;u*=q;f*=q;r*=q;a(m,h);H(m,aa,[v,p,T]);k(m,[1,0,0],[0,1,0],[0,0,1],[u,f,r],[d,n,P]);b.is_dynamic?c(m,J,J,m.gb):l(m,[(m.gb.max_x-m.gb.min_x)/2,0,0],[0,(m.gb.max_y-m.gb.min_y)/2,0],[0,0,(m.gb.max_z-m.gb.min_z)/2],[1,1,1],[(m.gb.max_x+m.gb.min_x)/2,(m.gb.max_y+m.gb.min_y)/2,(m.gb.max_z+m.gb.min_z)/2])};v.jJ=b;v.xY=function(a,b){a=a.Aa;for(var c=0;c<a.length;c++)if(a[c].Bb==b){a.splice(c,1);break}};v.kb=h;v.eJ=function(a,
b){for(var c=0;c<a.length;c++)m.copy(b,a[c].ka.ad)};v.QB=function(a,b,c){for(var h=0;h<a.Aa.length;h++){var k=a.Aa[h];c&&k.Bb!=c||(k.Sv=b)}};v.SH=function(a,b){a.Ia.splice(b,1);a.Lg.splice(b,1)};v.vv=function(a,b){var c=[];b=b?ka.ZG-1:ka.ZG;for(var h=0;h<a.length;h++){var k=a[h];k.lc.LF&&c.length<b&&c.push(k)}return c.length?c:a[0]?[a[0]]:[]};v.WR=function(a,b){n.m(b.na);b.al=null;a.ka=b};v.tE=function(a,b){return b.b4w_enable_soft_particles&&0<b.b4w_particles_softness&&(b=b.material-1,a=a.Sc,0<=
b&&b<a.length&&("ADD"==a[b].Pb||"ALPHA"==a[b].Pb||"ALPHA_SORT"==a[b].Pb))?!0:!1};v.iN=function(a){a=a.Aa;for(var b=0;b<a.length;b++)for(var c=a[b].Ia,h=0;h<c.length;h++)for(var k=c[h].Mb.ei,l=0;l<k.length;l++){var d=k[l];if("USE_MODEL_TSR_INVERSE"==d[0]&&"1"==d[1])return!0}return!1};v.HF=function(a,b){return a+"*"+b};v.get_parent=function(a){return a.Jl?null:a.parent};v.get_dg_parent=G;v.cA=function(a,b){for(var c=[],h=0;h<b.length;h++){var k=b[h];G(k)==a&&c.push(k)}return c};v.get_object_data_id=
function(a){return a.ka.Rd};v.is_mesh=function(a){return"MESH"===a.type};v.is_armature=function(a){return"ARMATURE"===a.type};v.is_speaker=function(a){return"SPEAKER"===a.type};v.is_camera=function(a){return"CAMERA"===a.type};v.is_lamp=function(a){return"LAMP"===a.type};v.is_empty=function(a){return"EMPTY"===a.type};v.is_line=function(a){return"LINE"===a.type};v.is_world=function(a){return"WORLD"===a.type}});w.a=f},function(D,w,f){D=f(0);var N=f(5),U=f(16),n=f(25),y=f(14),d=f(4),m=f(15),C=f(46),v=
f(29),r=f(51),p=f(39),z=f(21),a=f(62),H=f(12),k=f(17),c=f(9),l=f(88),b=f(64),h=f(1),G=f(8),ka=f(22),u=f(58),E=f(23),R=f(34),O=f(11),L=f(6),B=f(2),Y=f(3),K=f(7),ha=f(37);f=Object(D.a)("__scenes",function(f,V){function A(){hc||(hc=T(qb));return hc}function T(a){for(var b=0;b<a.length;b++){var g=a[b];if(!g.Hg||!g.Hg.length)return g}return null}function J(){Hb||wb.va("No active scene available");return Hb}function P(a,b,g){if(!q(a,b,g))return null;g=a.b4w_shadow_settings;var c={};g.csm_resolution>rb.Ic?
(c.csm_resolution=rb.Ic,Bb.error("Shadow map texture has unsupported size. Changed to "+rb.Ic+".")):c.csm_resolution=g.csm_resolution;Ra.shadow_blur_samples=Ra.shadow_blur_samples?Ra.shadow_blur_samples:g.blur_samples;c.YT=g.soft_shadows;a=Ta.vv(b,Ra.ssao&&a.b4w_enable_ssao);c.self_shadow_polygon_offset=g.self_shadow_polygon_offset;c.self_shadow_normal_offset=g.self_shadow_normal_offset;c.enable_csm=g.b4w_enable_csm&&1==a.length;g.b4w_enable_csm&&1<g.csm_num&&1<a.length&&Bb.warn("Disabling Cascaded Shadow Maps because of multiple shadow casting lamps.");
c.ki=[];c.zI=[];c.br=[];c.ar=[];for(b=0;b<a.length;b++)c.ki.push(a[b].lc.type),c.zI.push(a[b].lc.En),c.br.push(a[b].lc.br),c.ar.push(a[b].lc.ar),"SPOT"!=c.ki[b]&&"POINT"!=c.ki[b]||!c.enable_csm||(Bb.warn("Generating shadows for SPOT or POINT light. Disabling Cascaded Shadow Maps"),c.enable_csm=!1);c.enable_csm?(c.csm_num=g.csm_num,c.csm_first_cascade_border=g.csm_first_cascade_border,c.first_cascade_blur_radius=g.first_cascade_blur_radius,c.csm_last_cascade_border=g.csm_last_cascade_border,c.last_cascade_blur_radius=
g.last_cascade_blur_radius,c.fade_last_cascade=g.fade_last_cascade,c.blend_between_cascades=g.blend_between_cascades):(c.csm_num=1,c.csm_first_cascade_border=g.csm_first_cascade_border,c.first_cascade_blur_radius=g.first_cascade_blur_radius,c.csm_last_cascade_border=g.csm_last_cascade_border,c.last_cascade_blur_radius=g.last_cascade_blur_radius,c.fade_last_cascade=!1,c.blend_between_cascades=!1);return c}function q(a,g,b){if(0!=g.length&&Ra.shadows)switch(a.b4w_render_shadows){case "OFF":return!1;
case "ON":return!0}else return!1;var c=!1,e=!1;a=Ra.ssao&&a.b4w_enable_ssao;if(0==g.length&&!a)return!1;for(g=0;g<b.length;g++){var F=b[g];F.b4w_shadow_cast&&(c=!0);F.b4w_shadow_receive&&(e=!0);if((a||c)&&e)return!0}return!1}function da(a){for(var g=0;g<a.length;g++)if("SUN"==a[g].lc.type)return!0;return!1}function I(a){if(!Ra.shore_smoothing)return!1;a=La(a);for(var g=0;g<a.length;g++){var b=a[g];if(b.Sa.fj&&b.Sa.shore_smoothing)return!0}return!1}function t(a){for(var g=0;g<a.length;g++)for(var b=
a[g].particle_systems,c=0;c<b.length;c++)if(Ta.tE(a[g].qb,b[c].settings))return!0;return!1}function e(a){for(var g=La(a),b=[],c=0;c<g.length;c++){var e=g[c];if(e.Sa.fj){for(var F={},h=0;h<a.length;h++)for(var k=a[h],l=k.qb.Sc,d=0;d<l.length;d++)l[d]==e&&(F.yj=k.location[2]);F.ue=new Float32Array(4);F.ue.set(e.Sa.Qm);F.ue[3]=e.Sa.fv;e.Sa.is_dynamic?(F.xr=!0,F.waves_height=e.Sa.waves_height,F.waves_length=e.Sa.waves_length,F.dst_noise_scale0=e.Sa.dst_noise_scale0,F.dst_noise_scale1=e.Sa.dst_noise_scale1,
F.dst_noise_freq0=e.Sa.dst_noise_freq0,F.dst_noise_freq1=e.Sa.dst_noise_freq1,F.dir_min_shore_fac=e.Sa.dir_min_shore_fac,F.dir_freq=e.Sa.dir_freq,F.dir_noise_scale=e.Sa.dir_noise_scale,F.dir_noise_freq=e.Sa.dir_noise_freq,F.dir_min_noise_fac=e.Sa.dir_min_noise_fac,F.dst_min_fac=e.Sa.dst_min_fac,F.waves_hor_fac=e.Sa.waves_hor_fac):(F.xr=!1,F.waves_height=0,F.waves_length=0);F.Ng=e.Sa.Wu;F.$M=e.Sa.Nj;F.ZM=e.Sa.Mj;F.aN=new Float32Array([.3,.7]);F.Ql=null;e=e.hh;for(h=0;h<e.length;h++)k=e[h].texture,
!0===k.b4w_shore_dist_map&&"FILE"==k.image.source&&(F.Ql=k.image,F.$B=k.image.size[0],F.UA=k.b4w_max_shore_dist,k=k.b4w_shore_boundings,F.Cp=[(k[0]+k[1])/2,(k[2]+k[3])/2],F.Dp=[k[0]-k[1],k[2]-k[3]]);b.push(F)}}if(0<b.length){F=b[0];if(!F.xr)for(c=0;c<b.length;c++)b[c].xr&&(F=b[c]);return F}return null}function ma(a){function g(a,c){if(a){a=a.nodes;for(var e=0;e<a.length;e++){var F=a[e];"GROUP"==F.type&&F.node_group&&g(F.node_group.node_tree,c);"GROUP"==F.type&&"B4W_REFRACTION"==F.node_tree_name&&
(b.refractions=!0);"BSDF_TRANSPARENT"==F.type&&(F.b4w_use_alpha?c.Pb="ALPHA_SORT":b.refractions=!0);"BSDF_PRINCIPLED"==F.type&&(b.refractions=!0)}}}var b={refractions:!1};a=La(a);for(var c=0;c<a.length;c++){var e=a[c];e.fn&&(b.refractions=!0);e.ne&&g(e.ne,e)}return b}function ja(a,g,b){if(Ra.reflections)switch(a.b4w_render_reflections){case "OFF":return!1}else return!1;a=[];for(var c=[],e=!1,F=!1,h=!1,k=0;k<g.length;k++){var l=g[k];l.ka.Hd&&"CUBE"==l.ka.Mh&&c.push(l);l.ka.Hd&&"PBR"==l.ka.Mh&&(F=!0);
if(l.zn.length){for(var d=null,q=0;q<a.length;q++)if(a[q]==l){d=q;break}null==d&&a.push(l)}}for(k=0;k<b.length;k++){g=b[k];g.b4w_reflexible&&(e=!0);a:if(g.b4w_reflexible){g=g.qb.Sc;for(l=0;l<g.length;l++)if(d=g[l].Pb,"OPAQUE"!=d&&"CLIP"!=d&&"ALPHA_ANTIALIASING"!=d){g=!0;break a}g=!1}else g=void 0;g&&(h=!0)}return{Yw:a,Xw:c,Tj:[],Cz:[],oj:[],Pw:[],sA:e,LQ:F,Mv:h}}function pa(a,g){a=a.b4w_sky_settings;var b={};b.GB=a.render_sky||a.procedural_skydome;b.procedural_skydome=a.procedural_skydome;b.use_as_environment_lighting=
a.use_as_environment_lighting;b.Sl=a.color;b.rayleigh_brightness=a.rayleigh_brightness;b.mie_brightness=a.mie_brightness;b.spot_brightness=a.spot_brightness;b.scatter_strength=a.scatter_strength;b.rayleigh_strength=a.rayleigh_strength;b.mie_strength=a.mie_strength;b.rayleigh_collection_power=a.rayleigh_collection_power;b.mie_collection_power=a.mie_collection_power;b.mie_distribution=a.mie_distribution;b.Pe=a.reflexible;b.ze=a.reflexible_only;!g&&a.procedural_skydome&&Bb.warn("There is no sun on the scene. Procedural sky will use a default sun position.");
return b}function ta(a){var g={};a=a.b4w_ssao_settings;g.radius_increase=a.radius_increase;g.OQ=a.hemisphere;g.JM=a.blur_depth;g.blur_discard_value=a.blur_discard_value;g.influence=a.influence;g.dist_factor=a.dist_factor;g.bT=a.samples;return g}function w(a){if(!Ra.bloom||!a.b4w_enable_bloom)return null;var g={};a=a.b4w_bloom_settings;g.blur=a.blur;g.edge_lum=a.edge_lum;g.key=a.key;g.adaptive=a.adaptive;g.average_luminance=a.average_luminance;return g}function M(a){var g={};a=a.b4w_motion_blur_settings;
g.mb_decay_threshold=a.motion_blur_decay_threshold;g.mb_factor=a.motion_blur_factor;return g}function oa(a){var g={};a=a.b4w_color_correction_settings;g.brightness=a.brightness;g.contrast=a.contrast;g.exposure=a.exposure;g.saturation=a.saturation;return g}function ca(a){var g={};a=a.b4w_god_rays_settings;g.intensity=a.intensity;g.zl=a.max_ray_length;g.Tl=a.steps_per_pass;return g}function ea(a){var g={};g.si=a.b4w_outline_color;g.tn=a.b4w_outline_factor;return g}function Da(a){var g={};a=a.b4w_glow_settings;
g.small_glow_mask_coeff=a.small_glow_mask_coeff;g.large_glow_mask_coeff=a.large_glow_mask_coeff;g.small_glow_mask_width=a.small_glow_mask_width;g.large_glow_mask_width=a.large_glow_mask_width;return g}function S(a,g){var b=a.light_settings,c={};c.Rg=b.environment_energy;c.rt=b.use_environment_light;c.Nz=b.environment_color;c.we=a.horizon_color.slice(0);c.Fe=a.zenith_color.slice(0);c.Ln=a.use_sky_paper;c.Kn=a.use_sky_blend;c.Mn=a.use_sky_real;c.tx=null;c.Cn=null;c.Yu=null;c.Me="";g.GB&&a.use_nodes&&
a.node_tree&&(b=Wb.NE(a.node_tree,a.uuid,"MAIN",null,[]),c.Me=b.id);b=!0;if(c.rt&&"SKY_TEXTURE"==c.Nz&&(!g.procedural_skydome||!g.use_as_environment_lighting)){g=null;for(var e=0;e<a.texture_slots.length;e++)if(a.texture_slots[e].texture.b4w_use_as_environment_lighting&&!a.texture_slots[e].texture.b4w_use_as_skydome){g=a.texture_slots[e];break}g?c.Yu=g:b=!1}for(e=0;e<a.texture_slots.length;e++)if(a.texture_slots[e].texture.b4w_use_as_skydome){a=a.texture_slots[e];a.texture.image&&(b=!0,c.tx=a,g=Math.min(rb.Xg,
Jb.jz(a.texture.image.size[0]/3)),c.Cn={RI:g,bE:a.blend_factor,iG:a.horizon_factor,KJ:a.zenith_up_factor,JJ:a.zenith_down_factor,color:a.color,mb:a.default_value,invert:a.invert,rJ:a.use_rgb_to_intensity,cE:a.blend_type,mJ:a.use_map_blend,nJ:a.use_map_horizon,pJ:a.use_map_zenith_up,oJ:a.use_map_zenith_down});break}c.rt=c.rt?b:!1;return c}function Na(a){var g=a.fog_settings,b={};b.tV=g.use_fog;b.intensity=g.intensity;b.depth=g.depth;b.start=g.start;b.height=g.height;b.nP=g.falloff;b.color=g.use_custom_color?
g.color.slice(0):a.horizon_color.slice(0);a=b.color;b.ue=new Float32Array([a[0],a[1],a[2],1/b.depth]);b.kg=new Float32Array([b.intensity,b.depth,b.start,b.height]);return b}function wa(a,g){if(!Ra.ld)return!1;switch(a.b4w_render_dynamic_grass){case "OFF":return!1;case "ON":return!0}for(var b=a=!1,c=0;c<g.length;c++){for(var e=g[c],F=e.qb.Sc,h=0;h<F.length;h++)F[h].uj.Wo&&(a=!0);e=e.particle_systems;for(h=0;h<e.length;h++)F=e[h].settings,"HAIR"==F.type&&F.b4w_dynamic_grass&&(b=!0);if(a&&b)return!0}return!1}
function X(a,g){if($c.outlining_overview_mode)return!0;if(Ra.enable_selectable)switch(a.b4w_enable_object_selection){case "OFF":return!1;case "ON":return!0;case "AUTO":for(a=0;a<g.length;a++)if(g[a].qb.ka.Ol)return!0;return!1}else return!1}function Ga(a,g){if($c.outlining_overview_mode)return!0;if(Ra.enable_outlining)switch(a.b4w_enable_outlining){case "OFF":return!1;case "ON":return!0;case "AUTO":for(a=0;a<g.length;a++)if(g[a].qb.ka.Ed)return!0;return!1}else return!1}function Ha(a,g){if(Ra.glow_materials)switch(a.b4w_enable_glow_materials){case "OFF":return!1;
case "ON":return!0;case "AUTO":for(a=0;a<g.length;a++)for(var b=g[a].qb.Sc,c=0;c<b.length;c++)if(Wb.sE(b[c]))return!0;return!1}else return!1}function ua(a,g){if(Ra.refractions)switch(a.b4w_render_refractions){case "OFF":return!1;case "ON":return!0;case "AUTO":return g.refractions}else return!1}function Ca(a){for(var g=0;g<a.length;g++)for(var b=a[g].qb.Sc,c=0;c<b.length;c++){var e=b[c];if(e.vk&&"OPAQUE"!=e.Pb&&"CLIP"!=e.Pb&&"ALPHA_ANTIALIASING"!=e.Pb)return!0}return!1}function la(a,g){switch(a.b4w_enable_anchors_visibility){case "OFF":return!1;
case "ON":return!0;case "AUTO":for(a=0;a<g.length;a++){var b=g[a].qb;if(b.anchor&&b.anchor.yo)return!0}return!1}}function sa(a,g){a=fa(a,[Z.ic,Z.Md,Z.He]);for(var b=0;b<a.length;b++)a[b].lu=g}function ia(a,g,b,c,e,F){for(var h=g.ka,k=Ta.kb(g,e),l=k.Ia,d=0;d<l.length;d++){var q=l[d];if(!(q.sf||q.ze||"MAIN"!=q.type&&"NODES_GLOW"!=q.type&&"PARTICLES"!=q.type&&"LINE"!=q.type)&&("OPAQUE"==q.fc&&"OPAQUE"==c||"BLEND"==q.fc&&"BLEND"==c||"XRAY"==q.fc&&"XRAY"==c||"NODES_GLOW"==q.type&&"GLOW"==c)){if(!F&&(Q(q,
a,g,b,c,e),!Ia.md(q)))if("DEBUG"===Object(ha.d)())Ia.$t(q,"error.glslv","error.glslf"),Ia.md(q);else continue;var t=Z.cj(q,h,k.Lg[d]);Z.zd(a,t);Ba(b,a,q,!1);ya(q)}}}function ra(a){a.xl.st&&Ia.dc(a,"USE_LOD_SMOOTHING",1)}function Q(a,g,b,c,e,F){var h=b.ka,k=F.sa,l=Ta.kb(b,F),d="NO_SHADOWS";b=fa(F,[Z.ee]);if(b.length&&a.Be){switch(e){case "OPAQUE":d="SHADOW_MAPPING_OPAQUE";break;case "BLEND":case "XRAY":d="SHADOW_MAPPING_BLEND";break;case "COLOR_ID":case "REFLECT":case "GLOW":d="NO_SHADOWS";break;case "SHADOW":d=
"SHADOW_MASK_GENERATION";break;default:wb.va("Wrong subscene type")}for(var q=0;q<b.length;q++)Ia.UD(a,F.sa.Id)}q="NO_SOFT_SHADOWS";if(k.Id&&k.Id.YT)switch(Ra.shadow_blur_samples){case "16x":q="POISSON_X_16";break;case "8x":q="POISSON_X_8";break;case "4x":q="POISSON_X_4"}b=a.Mb;Qa.Wa(b,"SHADOW_USAGE",d);Qa.Wa(b,"POISSON_DISK_NUM",q);ra(a);a.ld&&(q=va.xc(c,Z.Bj))&&qa(a,q,h);Aa(b,g.qa);if("SHADOW"!=a.type&&"COLOR_ID"!=e||a.bc){e=g.np;Qa.Wa(b,"NUM_LIGHTS",e);Qa.Wa(b,"NUM_LFACTORS",0==e%2?e/2:Math.floor(e/
2)+1);Qa.Wa(b,"REFLECTION_PASS","REFL_PASS_NONE");Qa.Wa(b,"SSAO_ONLY",0);if(e=k.wd)Qa.Wa(b,"WATER_EFFECTS",1),Qa.Wa(b,"WAVES_HEIGHT",Qa.Ga(e.waves_height)),Qa.Wa(b,"WAVES_LENGTH",Qa.Ga(e.waves_length)),Qa.Wa(b,"WATER_LEVEL",Qa.Ga(e.yj));if(g.Ng&&a.Ng){Qa.Wa(b,"CAUSTICS",1);if(q=k.Id){h=q.ki;for(q=d=0;q<h.length;q++)"SUN"==h[q]&&(d=q);Qa.Wa(b,"SUN_NUM",d)}Qa.Wa(b,"CAUST_SCALE",Qa.Ga(g.Nj));Qa.Wa(b,"CAUST_SPEED",Qa.Ga(g.ou,2));Qa.Wa(b,"CAUST_BRIGHT",Qa.Ga(g.Mj))}q=l.Tj;h=l.oj;l=va.xc(c,Z.Ve);g=va.xc(c,
Z.Sk);d=va.xc(c,Z.$n);if(-1!==a.vg.indexOf("u_mirrormap"))Qa.Wa(b,"REFLECTION_TYPE","REFL_MIRRORMAP");else if(a.Hd&&g&&d&&!q&&!h.length)Ia.$h(a,g.qa.wc,"u_cube_irradiance"),Ia.$h(a,d.qa.wc,"u_cube_r_convolution"),Qa.Wa(b,"REFLECTION_TYPE","REFL_PBR_STANDARD");else if(!a.Hd||q||h.length||Ra.quality==Ma.P_LOW)if(a.Hd&&q)g=q.qa.wc,k.pg.sA||(q.Rm=!0,l&&(g=l.qa.wc)),Ia.$h(a,g,"u_cube_reflection"),Qa.Wa(b,"REFLECTION_TYPE","REFL_CUBE");else if(a.Hd&&h)for(q=0;q<h.length;q++)g=h[q].qa.wc,Ia.$h(a,g,"u_plane_reflection"),
Qa.Wa(b,"REFLECTION_TYPE","REFL_PLANE");else Qa.Wa(b,"REFLECTION_TYPE","REFL_NONE");else l?(Ia.$h(a,l.qa.wc,"u_sky_reflection"),Qa.Wa(b,"REFLECTION_TYPE","REFL_PBR_SIMPLE")):Qa.Wa(b,"REFLECTION_TYPE","REFL_NONE");l?a.Ru?(g=l.qa.wc,Ia.$h(a,g,"u_sky")):l.procedural_skydome&&(a.eg=l.eg,Qa.Wa(b,"PROCEDURAL_FOG",1)):Qa.Wa(b,"PROCEDURAL_FOG",0);g=k.Aj;g.rt&&(Qa.Wa(b,"USE_ENVIRONMENT_LIGHT",1),"SKY_TEXTURE"==g.Nz?(g.Yu?(l=g.Yu.texture,g=Jb.hf(g.Yu),Ia.$h(a,g,"u_sky_texture",l.name)):l&&(g=l.qa.wc,Ia.$h(a,
g,"u_sky_texture")),Qa.Wa(b,"SKY_TEXTURE",1)):"SKY_COLOR"==g.Nz&&Qa.Wa(b,"SKY_COLOR",1));g=k.Ay;g.tV&&(Qa.Wa(b,"USE_FOG",1),Qa.Wa(b,"FOG_TYPE",g.nP));a.sj&&a.Ob?(Ra.Ju&&Qa.Wa(b,"USE_REFRACTION_CORRECTION",1),"MAIN"==a.type&&a.bc||"NODES_GLOW"==a.type?(Qa.Wa(b,"REFRACTIVE",1),k.refractions?Qa.Wa(b,"USE_REFRACTION",1):Qa.Wa(b,"USE_REFRACTION",0)):k.refractions?Qa.Wa(b,"REFRACTIVE",1):Qa.Wa(b,"REFRACTIVE",0),(k.YG.refractions||k.refractions)&&Qa.Wa(b,"HAS_REFRACT_TEXTURE",1)):(Qa.Wa(b,"REFRACTIVE",0),
Qa.Wa(b,"USE_REFRACTION",0),Qa.Wa(b,"USE_REFRACTION_CORRECTION",0));a.Bg&&(Ra.shore_smoothing&&a.Tn&&va.xc(c,Z.ZC)?Qa.Wa(b,"SHORE_SMOOTHING",1):Qa.Wa(b,"SHORE_SMOOTHING",0),a.water_dynamic&&e&&e.waves_height?Qa.Wa(b,"DYNAMIC",1):Qa.Wa(b,"DYNAMIC",0));"PARTICLES"==a.type&&Qa.Wa(b,"COLOR_RAMP_LENGTH",a.sb.wu);if(!a.xh)for(a=a.Ua,c=0;c<a.length;c++)if(g=a[c],"SCENE"==g.source)for(k=0;k<qb.length;k++)for(b=qb[k],e=qb[k].Hg,l=0;l<e.length;l++)e[l]==g&&$a.ra(Ib,b,F,null)}}function Aa(a,g){g.type==F.Xe||
g.type==F.Yh||g.type==F.Cj?Qa.Wa(a,"CAMERA_TYPE","CAM_TYPE_ORTHO"):Qa.Wa(a,"CAMERA_TYPE","CAM_TYPE_PERSP")}function ya(a){8<a.Ua.length&&Bb.warn(a.type,"too many textures used - "+a.Ua.length+' (max 8), materials "'+a.Hc.join(", ")+'"')}function qa(a,g,b){a.Ud=g.Ud;var c=g.Ud[0],e=g.Ud[1],h=g.Ud[2];b=b.gb;b=Math.max(b.max_x-b.min_x,b.max_y-b.min_y);h=0==h?b:Math.max(h,b);g.Ud[2]=h;g=g.qa;F.aI(g,h/2,h/2,-e,-c);F.set_projection(g,!1);c=a.bk||0;c=0==c?b:Math.max(c,b);a.bk=c}function na(a,g,b,c,e,F){for(var h=
g.ka,k=Ta.kb(g,e),l=k.Ia,d=0;d<l.length;d++){var q=l[d];if(("MAIN"==q.type||"PARTICLES"==q.type||"LINE"==q.type)&&"REFLECT"==q.fc&&q.Ob==c){if(a.type==Z.de||a.type==Z.Ue){var t;a:{var Ma=e.sa.pg.oj;for(t=0;t<Ma.length;t++)for(var m=0;m<Ma[t].length;m++)if(Ma[t][m]==a)break a;Ma=e.sa.pg.Pw;for(t=0;t<Ma.length;t++)for(m=0;m<Ma[t].length;m++)if(Ma[t][m]==a)break a;t=null}if(t==h.Gd)continue}else if(t=Kb(e,a),t==h.Qd)continue;if(!F&&(Q(q,a,g,b,"REFLECT",e),t=q.Mb,Qa.Wa(t,"WATER_EFFECTS",0),a.type==Z.de||
a.type==Z.Ue?Qa.Wa(t,"REFLECTION_PASS","REFL_PASS_PLANE"):Qa.Wa(t,"REFLECTION_PASS","REFL_PASS_CUBE"),Qa.Wa(t,"TEXTURE_NORM",0),!Ia.md(q)))if("DEBUG"===Object(ha.d)())Ia.$t(q,"error.glslv","error.glslf"),Ia.md(q);else continue;Z.rP(a,q,h)||(t=Z.cj(q,h,k.Lg[d]),Z.zd(a,t),Ba(b,a,q,!1),ya(q))}}}function xa(a){Ea(a);var g=Pa(a,Z.ic),b=!0,c=a.sa.Id;$a.Na(a.sa.Ya,function(e,F){F.type===Z.ee&&(Fa(F,a,g.qa,c,b),b=!1)})}function za(a){$a.Na(a.sa.Ya,function(a,g){g.type===Z.Zn&&(g.wr=1)})}function Fa(a,g,b,
c,e){if(0!=a.vb.length){var h=a.qa;L.a(b.na,h.na);L.a(b.Ag,h.Ts);if("SUN"===c.ki[a.gh]||"HEMI"===c.ki[a.gh]){var k=b.na,l=mb;n.P(l);for(var d=0;d<a.vb.length;d++)for(var q=a.vb[d].jb,t=0;t<q.length;t++){var Ma=q[t].fb,m=q[t].$g;if(Ma.ld){var f=L.g(k,Gc),A=Y.transformQuat(B.c,f,oc);f=-A[0];A=A[1];var u=L.j(k,oc);f=u[0]-Ma.bk*(1+f)/2;A=u[1]-Ma.bk*(1-A)/2;m=n.h(Ma.Xb.Bf,m.na,jb);m=m.max_z-m.min_z;u=jb;u.min_x=f;u.min_y=A;u.min_z=Ma.Ud[0]-m;u.max_x=f+Ma.bk;u.max_y=A+Ma.bk;u.max_z=Ma.Ud[1]+m}else u=m.ai;
0==d&&0==t?n.o(u,l):n.D(l,u)}k=n.F(l,kc);B._28(k,h.Kc,k);if(c.enable_csm){g=Y.copy(b.Ti[a.lr],Cb);c=z.invert(b.Kc,Zb);B._28(g,c,g);B._28(g,h.Kc,g);a=b.mr[a.lr];if(e)for(cb=0,ob=-Infinity,e=2;e<k.length;e+=3)cb=Math.min(cb,k[e]),ob=Math.max(ob,k[e]);e=mb;e.max_x=g[0]+a;e.max_y=g[1]+a;e.max_z=ob;e.min_x=g[0]-a;e.min_y=g[1]-a;e.min_z=cb}else{b=e=mb;c=Ub;c.set(k);k=lc/9;l=z.identity(Zb);z.rotate(l,k,B.c,l);q=d=-1;for(t=0;10>t;t++){Ma=n.a(c,0,c.length,jb);m=(Ma.max_x-Ma.min_x)*(Ma.max_y-Ma.min_y);if(-1==
d||.1<d-m)d=m,q=t,n.o(Ma,b);B._28(c,l,c)}b=q*k;0<b&&(c=z.identity(Zb),z.rotate(c,b,B.c,c),z.multiply(c,h.Kc,h.Kc),L.d(h.Kc,h.Ag));b=e.max_x-e.min_x;c=e.max_y-e.min_y;b&&c&&(k=Math.abs(b-c)/2,2<b/c?(e.max_y+=k,e.min_y-=k):2<c/b&&(e.max_x+=k,e.min_x-=k));e.max_x+=.005;e.max_y+=.005;e.max_z+=.005;e.min_x-=.005;e.min_y-=.005;e.min_z-=.005;cc(a,g.sa.Ya)}F.vT(h,e.min_x,e.max_x,e.min_y,e.max_y,-e.max_z,-e.min_z);F.set_projection(h,!1)}else"SPOT"!==c.ki[a.gh]&&"POINT"!==c.ki[a.gh]||F.set_projection(h,!1)}}
function g(a,g,b,c,e){for(var F=g.ka,h=Ta.kb(g,c),k=h.Ia,l=0;l<k.length;l++){var d=k[l];if("COLOR_ID"==d.type&&(a.type==Z.zf&&"COLOR_ID"==d.fc||a.type==Z.Uh&&"COLOR_ID_XRAY"==d.fc)){if(!e&&(Q(d,a,g,b,"COLOR_ID",c),Ia.dc(d,"USE_OUTLINE",0),!Ia.md(d)))continue;d=Z.cj(d,F,h.Lg[l]);Z.zd(a,d)}}}function Ba(a,g,b,c){var e=$a.pk(a,g);$a.Lk(a,e,function(a,g,e){if(e.active){switch(e.from){case "COLOR":case "CUBEMAP":var F=g.qa.wc;break;case "DEPTH":F=g.qa.gg;break;case "SCREEN":F=null;break;case Z.xd:return;
default:wb.va("Wrong slink")}switch(e.to){case "COLOR":case "CUBEMAP":case "DEPTH":case "NONE":case "SCREEN":case "OFFSCREEN":case "RESOLVE":case "COPY":case "u_cube_reflection":case "u_plane_reflection":break;default:if(!F)if(c)break;else wb.va("Connection of SCREEN is forbidden");F.Tf&&wb.va("Batch texture can't use renderbuffer");Qa.vE(b.ec,e.to)&&(c?Ia.HB(b,F,e.to):Ia.$h(b,F,e.to))}}});for(a=0;a<g.Nb.length;a++){e=g.Nb[a];var F=g.Sh[a];switch(e.to){case "COLOR":case "CUBEMAP":case "DEPTH":case "NONE":case "SCREEN":case "OFFSCREEN":case "RESOLVE":case "COPY":break;
default:F.Tf&&wb.va("Batch texture can't use renderbuffer"),Qa.vE(b.ec,e.to)&&(c?Ia.HB(b,F,e.to):Ia.$h(b,F,e.to))}}}function Va(a,g){Xa(a,g);for(var b=0;b<a.bf.length;b++)a.bf[b].parent==a&&Va(a.bf[b],g)}function Xa(a,g){a.ka.hide=g;if(Ta.is_lamp(a))for(g=0;g<a.Aa.length;g++)for(var b=a.Aa[g],c=fa(b.Bb,md),e=0;e<c.length;e++){var F=c[e],h=a.ka,k=a.lc,l=b.es,d=k.In&&!h.hide?1:0;F.jn[4*l+3]=d;d=k.Nn&&!h.hide?1:0;F.hn[4*l+3]=d;F.wb=!0}}function Ea(a){var g=sb.tc(a,"LAMP",sb.DATA_ID_ALL);g=Ta.vv(g,Ra.ssao&&
a.b4w_enable_ssao);if(g.length)for(var b=0;b<g.length;b++){var c=g[b],e=c.ka,h=L.j(e.na,Cb);e=L.g(e.na,Gc);for(var k=0;k<c.Aa.length;k++){var l=c.Aa[k],d=l.YB;if(l.Bb==a)for(l=0;l<d.length;l++)F.WB(d[l].qa,h,e)}}}function Za(a){var g=Pa(a,Z.Ve);g&&Ua(a,g)}function Ua(a,g){dc.wn(g);lb.Xj(g);if(g.gp){g=fa(a,db);for(var b=0;b<g.length;b++)for(var c=g[b].vb,e=0;e<c.length;e++)for(var F=c[e].jb,h=0;h<F.length;h++){var k=F[h];k.Ec&&(k=k.fb,Ia.dN(k)&&lb.JU(k))}}if(g=Pa(a,Z.Sk))dc.wn(g),lb.Xj(g);if(g=Pa(a,
Z.$n))dc.wn(g),lb.Xj(g);if(a=Pa(a,Z.Dy))dc.wn(a),lb.Xj(a)}function W(a){var g=a.qa;lb.PS(g.Hf,g.wc,g.gg,g.width,g.height);a=a.vb;for(g=0;g<a.length;g++)for(var b=a[g].jb,c=0;c<b.length;c++){var e=b[c].fb;e&&Ia.GE(e)}}function La(a){for(var g=[],b=0;b<a.length;b++)for(var c=a[b].qb.Sc,e=0;e<c.length;e++){var F=c[e];-1==g.indexOf(F)&&g.push(F)}return g}function D(a,g,b,c){ub.xG()&&(g*=window.devicePixelRatio,b*=window.devicePixelRatio);var e=A();e&&(e=e.sa,g*=e.xp,b*=e.xp);g*=a.zk;b*=a.Ak;c[0]=Math.floor(g);
c[1]=Math.floor(b);return c}function Ya(a,g,b){a=D(a,g,b,ec);return a[0]>rb.Ic||a[1]>rb.Ic?(Bb.warn("Texture size exceeds platform limits, downscaling"),Math.min(rb.Ic/a[0],rb.Ic/a[0])):1}function Sa(a,g,b){for(var c=a.sa,e=Ta.kb(a.Hi,a).Qa,h=0!=b?g/b:1,k=0;k<e.length;k++){var l=e[k];F.jT(l,h);F.set_projection(l,!1);c.Id&&F.GC(l,c.Id)}if(c.Id){c.Aw=!0;c=fa(a,[Z.Gg]);for(k=0;k<c.length;k++)c[k].wb=!0;c=fa(a,[Z.Md]);for(k=0;k<c.length;k++)c[k].wb=!0}Ka(a,g,b)}function Ka(a,g,b){var c=a.sa.Ya,e=Infinity;
va.Wp(c,function(a){a.Hn&&(e=Math.min(e,Ya(a,g,b)))});va.Wp(c,function(F,h,k,l){if(F.Hn){if(l&&l.type==Z.Tk||k.Gc&&!F.Zt){var d=g*F.zk;var q=b*F.Ak}else q=D(F,g,b,ec),d=q[0]*e,q=q[1]*e;if(h)for(h=0;h<k.Nb.length;h++)k.Nb[h]==F&&Jb.resize(F.yb,d,q);else switch(Jb.Xo(F.yb)&&(Jb.resize(F.yb,d,q),F.yb.Ee&&(l.aw=F.yb.dH)),F=k.qa,F.width=d,F.height=q,k.type){case Z.wq:hb(a,{dof_power:k.qa.dof_power});break;case Z.xq:Ja(a,{small_glow_mask_width:k.small_glow_mask_width,large_glow_mask_width:k.large_glow_mask_width});
break;case Z.sq:ib(a,{blur:k.ko});break;case Z.vD:F.width=F.wc.width;F.height=F.wc.height;break;case Z.Zn:k=va.Bd(c,k,Z.Lc);F=va.Bd(c,k,Z.Lc);q=va.Bd(c,F,Z.Lc);h=va.Bd(c,q,Z.Lc);va.Ae(k,1/d,1/d);va.Ae(F,1/d,1/d);va.Ae(q,1/d,1/d);va.Ae(h,1/d,1/d);break;default:va.Ae(k,1/d,1/q)}}})}function fa(a,g){for(var b=[],c=0;c<g.length;c++){var e=g[c];a.sa.Ya&&$a.Na(a.sa.Ya,function(a,g){g.type==e&&b.push(g)})}return b}function Pa(a,g){return va.xc(a.sa.Ya,g)}function Wa(a){var g=A();g&&$a.Na(g.sa.Ya,function(g,
b){(g=b.qa)&&g.type==F.Af&&(b.Rm=a)})}function hb(a,g){var b=fa(a,[Z.wq]);if(!b.length)return Bb.error("DOF is not enabled on the scene. Check camera settings"),0;for(var c=0;c<b.length;c++){var e=b[c],F=g,h=a,k=e.dof_bokeh,l=k?fa(h,[Z.Ey]):[];h=h.sa.Ya;if("boolean"==typeof F.dof_on&&(e.qa.dof_on=F.dof_on,k))for(var d=0;d<l.length;d++)l[d].qa.dof_on=F.dof_on;if("number"==typeof F.dof_distance&&(e.qa.dof_distance=F.dof_distance,k))for(d=0;d<l.length;d++)l[d].qa.dof_distance=F.dof_distance;if("number"==
typeof F.dof_front_start&&(e.qa.dof_front_start=F.dof_front_start,k))for(d=0;d<l.length;d++)l[d].qa.dof_front_start=F.dof_front_start;if("number"==typeof F.dof_front_end&&(e.qa.dof_front_end=F.dof_front_end,k))for(d=0;d<l.length;d++)l[d].qa.dof_front_end=F.dof_front_end;if("number"==typeof F.dof_rear_start&&(e.qa.dof_rear_start=F.dof_rear_start,k))for(d=0;d<l.length;d++)l[d].qa.dof_rear_start=F.dof_rear_start;if("number"==typeof F.dof_rear_end&&(e.qa.dof_rear_end=F.dof_rear_end,k))for(d=0;d<l.length;d++)l[d].qa.dof_rear_end=
F.dof_rear_end;"number"==typeof F.dof_bokeh_intensity&&(e.qa.dof_bokeh_intensity=F.dof_bokeh_intensity,k&&(l=va.sv(h,e,Z.Lc),l[0].qa.dof_bokeh_intensity=F.dof_bokeh_intensity,l[1].qa.dof_bokeh_intensity=F.dof_bokeh_intensity,l[0]=va.Bd(h,l[0],Z.Lc),l[0].qa.dof_bokeh_intensity=F.dof_bokeh_intensity));if("number"==typeof F.dof_power)if(k){F=F.dof_power;e.qa.dof_power=F;F/=2;k=e.qa.width;d=e.qa.height;var q=[1/k,0],t=[1/k*.5,1/d*.866],Ma=[-1/k*.5,1/d*.866];l=va.sv(h,e,Z.Lc);va.Zd(l[0],F);va.Ae(l[0],
Ma[0],Ma[1]);va.Zd(l[1],F);va.Ae(l[1],t[0],t[1]);l[0]=va.Bd(h,l[0],Z.Lc);va.Zd(l[0],F);va.Ae(l[0],q[0],q[1]);e.qa.te&&(l[0]=va.Bd(h,l[0],Z.Ey),l[0]=va.Bd(h,l[0],Z.Lc),va.Ae(l[0],1/k,1/d),l[0]=va.Bd(h,l[0],Z.Lc),va.Ae(l[0],1/k,1/d))}else e.qa.dof_power=F.dof_power,l=va.Bd(h,e,Z.Lc),h=va.Bd(h,l,Z.Lc),va.Zd(l,e.qa.dof_power),va.Ae(l,1/e.qa.width,1/e.qa.height),va.Zd(h,e.qa.dof_power),va.Ae(h,1/e.qa.width,1/e.qa.height)}}function ib(a,g){var b=fa(a,[Z.Jt]),c=fa(a,[Z.sq]);if(!b.length||!c.length)return Bb.error("Bloom is not enabled on the scene"),
0;if("number"==typeof g.key)for(var e=0;e<b.length;e++)b[e].no=g.key,b[e].wb=!0;if("number"==typeof g.edge_lum)for(e=0;e<b.length;e++)b[e].mo=g.edge_lum,b[e].wb=!0;if("number"==typeof g.blur)for(e=0;e<c.length;e++){c[e].ko=g.blur;for(var F=a.sa.Ya,h=c[e].qa.width/.5,k=c[e].qa.height/.5,l=va.sv(F,c[e],Z.Lc),d=0;d<l.length;++d){var q=l[d],t=va.Bd(F,q,Z.Lc),Ma=h*q.lo,m=k*q.lo;va.Zd(q,g.blur);va.Ae(q,1/Ma,1/m);va.Zd(t,g.blur);va.Ae(t,1/Ma,1/m)}}if("number"==typeof g.average_luminance)for(e=0;e<b.length;e++)b[e].rm||
(b[e].average_luminance=g.average_luminance,b[e].wb=!0)}function Ja(a,g){var b=fa(a,[Z.xq]);if(!b.length)return Bb.error("Glow is not enabled on the scene"),null;for(var e=0;e<b.length;e++){for(var c=b[e],F=g,h=a.sa.Ya,k=va.pQ(h,c),l=0;l<k.length;++l){var d=k[l];if(d.type==Z.Lc&&"GLOW_MASK_LARGE"==d.fc)var q=d;if(d.type==Z.Lc&&"GLOW_MASK_SMALL"==d.fc)var t=d}k=va.Bd(h,q,Z.Lc);h=va.Bd(h,t,Z.Lc);"number"==typeof F.small_glow_mask_coeff&&(c.small_glow_mask_coeff=F.small_glow_mask_coeff,c.wb=!0);"number"==
typeof F.large_glow_mask_coeff&&(c.large_glow_mask_coeff=F.large_glow_mask_coeff,c.wb=!0);"number"==typeof F.small_glow_mask_width&&(c.small_glow_mask_width=F.small_glow_mask_width,va.Zd(t,F.small_glow_mask_width),va.Ae(t,1/c.qa.width,1/c.qa.height),t.wb=!0,va.Zd(h,F.small_glow_mask_width),va.Ae(h,1/c.qa.width,1/c.qa.height),h.wb=!0);"number"==typeof F.large_glow_mask_width&&(c.large_glow_mask_width=F.large_glow_mask_width,va.Zd(q,F.large_glow_mask_width),va.Ae(q,1/c.qa.width,1/c.qa.height),q.wb=
!0,va.Zd(k,F.large_glow_mask_width),va.Ae(k,1/c.qa.width,1/c.qa.height),k.wb=!0)}}function eb(a,g,b){var c=a.sa,e=c.wd;if(!e.xr)return e.yj;var F=e.waves_height,h=e.waves_length,k=e.yj,l=Y.length(c.Ci)||1;a=Pa(a,Z.ic).time;a*=l;var d=ec;d[0]=20/h*(g-.25*a);d[1]=20/h*(b-.25*a);l=B.J(d);d[0]=17/h*(b+.1*a);d[1]=17/h*(g+.1*a);d=B.J(d);l=l+d-1;var q=e.dst_noise_scale0;d=e.dst_noise_scale1;var t=e.dst_noise_freq0,Ma=e.dst_noise_freq1,m=ec;m[0]=q*(g+t*a);m[1]=q*(b+t*a);q=B._55(m);m[0]=d*(b-Ma*a);m[1]=d*
(g-Ma*a);d=B._55(m);d*=F*q;if(e.Ql)if(Ma=(g-e.Cp[0])/e.Dp[0],m=(e.Cp[1]+b)/e.Dp[1],Ma+=.5,m+=.5,1<Ma||0>Ma||1<m||0>m)g=d;else{c=B._7(c.ZB,e.$B,Ma,m);q=e.dir_noise_scale;t=e.dir_noise_freq;var f=e.dir_min_noise_fac;Ma=e.dst_min_fac;m=Math.sqrt(c);g=F*Math.max(c,e.dir_min_shore_fac)*Math.sin(m/(h/e.UA/Math.PI)+e.dir_freq*a)*Math.max(B._55([q/h*(g+t*a),q/h*(b+t*a)]),f);b=Math.max(m,Ma);g=g*(1-b)+d*b;l*=c}else g=d;return k+(g+.05*l)}function bb(a,g,b){g.en&&g.type==Z.Lc&&b.Ec!=g.Ec&&(g.Ec=b.Ec);b.Ec||
g.type!=Z.Zn||(g.wr=0)}function Vb(a,g,b,e){var c=$a.Kb(a,g);F.dx(c.qa,b,e);c.Iq=!0;$a.am(a,g,function(g,c,F){F.active&&F.from==b&&va.jN(F)&&Pb(a,g,F.to,e)});$a.Lk(a,g,function(g,c,F){F.active&&F.from==b&&F.from==F.to&&Vb(a,g,b,e)})}function Pb(a,g,b,e){a=$a.Kb(a,g).vb;for(g=0;g<a.length;g++)for(var c=a[g].jb,F=0;F<c.length;F++)Ia.HB(c[F].fb,e,b)}function kb(a){for(var g=fa(a,[Z.Bj]),b=0;b<g.length;b++){var e=g[b],c=e.qa,h=a.Hi.ka,k=L.j(h.na,Cb),l=oc;l[0]=0;l[1]=0;l[2]=-e.Ud[2]/2;e=L.g(h.na,Gc);Y.transformQuat(l,
e,l);l[0]+=k[0];l[1]+=k[1];l[2]=0;G.identity(e);F.WB(c,l,e)}}function nb(a,g){$a.Na(a,function(b,e){if(e.type==Z.Fi){e.Nb[0]&&e.Sh[0]||wb.va("Wrong MOTION_BLUR subscene");var c=e.Nb[0],F=e.Sh[0];e.Sh[0]=e.qa.wc;$a.am(a,b,function(g,b,e){e.active&&Pb(a,g,e.to,F)});Vb(a,b,c.from,F);Pb(a,b,c.to,e.Sh[0]);e.uw=Math.exp(-g/e.mb_factor)}})}function tb(a){return a.sa.Ci}function Kb(a,g){if(!a.sa.pg)return null;for(var b=a.sa.pg.Tj,e=0;e<b.length;e++)if(b[e]==g)return e;a=a.sa.pg.Cz;for(e=0;e<a.length;e++)if(a[e]==
g)return e;return null}var wb=Object(N.a)(f),Ia=Object(U.a)(f),F=Object(y.a)(f),Ma=Object(d.a)(f),ub=Object(m.a)(f),Qb=Object(C.a)(f),$a=Object(v.a)(f),ad=Object(r.a)(f),Hc=Object(p.a)(f),Wb=Object(a.a)(f),sb=Object(H.a)(f),Ic=Object(k.a)(f),Ta=Object(c.a)(f),dc=Object(l.a)(f),zc=Object(b.a)(f),Bb=Object(h.a)(f),lb=Object(ka.a)(f),va=Object(u.a)(f),pb=Object(E.a)(f),Qa=Object(R.a)(f),Z=Object(O.a)(f),Jb=Object(k.a)(f),Vc=Ma.Km,Ra=Ma.wa,rb=Ma.di,$c=Ma.Ed,Gb=Ma.An,zb=[Z.Bj,Z.ee,Z.ic,Z.Md,Z.lh,Z.He,
Z.de,Z.xd,Z.Ue,Z.Ge,Z.zf,Z.Uh,Z.Gg,Z.Wh,Z.Vh];V.fW=zb;var md=[Z.ic,Z.Md,Z.lh,Z.He,Z.de,Z.xd,Z.Yn,Z.It,Z.Ve,Z.Ue,Z.Ge,Z.Jt,Z.Gg,Z.ee,Z.zf,Z.Uh,Z.Wh],db=[Z.ic,Z.Nt,Z.Md,Z.lh,Z.He,Z.de,Z.xd,Z.Ue,Z.Ge],Lb=[Z.ee,Z.ic,Z.Md,Z.lh,Z.He,Z.de,Z.xd,Z.Ue,Z.Ge,Z.zf,Z.Uh,Z.Gg,Z.Yn,Z.Wh,Z.Vh],gb=[Z.ic,Z.Md,Z.lh,Z.He,Z.de,Z.xd,Z.Ue,Z.Ge],hc=null,Hb=null,qb=[],Ib=null,lc=Math.PI/2,ec=new Float32Array(2),Cb=new Float32Array(3),oc=new Float32Array(3),Gc=new Float32Array(4),Zb=new Float32Array(16),kc=new Float32Array(24),
Ub=new Float32Array(24),mb=n.w(),jb=n.w(),cb=0,ob=-Infinity,yb=new Uint8Array(4);V.eX=function(){return{}};V.set_active=function(a){Hb=a;pb.iT(a)};V.BH=function(a,g){var b=a.sa,e=va.xz(b.Ya);if(a==g){Sa(a,ub.aG(),ub.$F());for(var c=0;c<e.length;c++)a.sa.rj.push(e[c])}else for(c=a.Hg[0],Sa(a,c.Bk,c.Bk),c=0;c<e.length;c++)g.sa.rj.push(e[c]);a=fa(a,Lb);for(g=0;g<a.length;g++)a[g].Ci.set(b.Ci);for(c=0;c<b.rj.length;c++)b.rj[c].type==Z.ee&&lb.Xj(b.rj[c])};V.Ah=A;V.bv=T;V.get_active=J;V.zb=function(){return Hb?
!0:!1};V.ll=function(a){return a.Hi};V.Mr=function(){return qb};V.uv=function(){if(1==qb.length)return qb;for(var a=0;a<qb.length;a++){var g=qb[a].sa.Ya;$a.Na(g,function(g,b){g=b.vb;for(var e=0;e<g.length;e++)for(var c=g[e].jb,F=0;F<c.length;F++){for(var h=c[F],k=h.fb.Ua,l=h.fb.bg,d=null,q=0;q<k.length;q++)if("SCENE"==k[q].source&&k[q].Ys==qb[a].name&&b.type!=Z.Gy){Bb.error('Texture-scene loop detected. A scene is rendered to texture "'+l[q]+'" yet this texture belongs to the same scene.');d=h.fb;
break}if(d)for(k=d.Ua,d.Ua=[],d.vg=[],Ia.IU(d,null),Ia.md(d),Z.zd(b,h),q=0;q<k.length;q++)Ic.FE(k[q])}})}var b=[];for(a=0;a<qb.length;a++)if(g=qb[a],!g.Hg.length){g=$a.pk(Ib,g);$a.fP(Ib,g);g=$a.Vl(Ib,g,$a.Rk);g=$a.tC(g);$a.Na(g,function(a,g){b.push(g)});break}return b};V.fV=function(a,g,b,e){var c=Ta.kb(g.Hi,g);a={pg:ja(a,b,e)};va.dV(g.sa,c,a);V.BH(g,g);V.Wz(g,g.sa.Ya)};V.iM=function(a,g,b,c,h){a.Hg=a.Hg||[];a.ub=null;var k=a.sa,l=Ta.kb(a.Hi,a),d=a.Hi.ka;k.oq=[];var q=a.world;k.KA=b.length;k.Wl=da(b);
k.sx=pa(q,k.Wl);k.Aj=S(q,k.sx);k.Ay=Na(q);if(q=!a.Hg.length)a:{if("HMD"==Ra.stereo){if(l.Qa[0].type!=F.qd){Bb.warn("Head-mounted display stereo is disabled for the non-perspective camera");Ra.stereo="NONE";q=!1;break a}if(!Hc.can_use_device(Hc.DEVICE_HMD)){Bb.warn("Head-mounted display stereo is disabled for the non-WebVR and non-mobile devices");Ra.stereo="NONE";q=!1;break a}}q="HMD"==Ra.stereo}k.Nv=q;if(q=!a.Hg.length)l.Qa[0].type!=F.qd&&"ANAGLYPH"==Ra.stereo?(Bb.warn("Anaglyph stereo is disabled for the non-perspective camera"),
Ra.stereo="NONE",q=!1):q="ANAGLYPH"==Ra.stereo;k.anaglyph_use=q;if(q=!a.Hg.length)l.Qa[0].type!=F.qd&&"SIDEBYSIDE"==Ra.stereo?(Bb.warn("Side-by-side stereo is disabled for the non-perspective camera"),Ra.stereo="NONE",q=!1):q="SIDEBYSIDE"==Ra.stereo;k.Us=q;k.$L=!k.anaglyph_use&&!k.Us&&la(a,h);k.pg=ja(a,g,c);k.IM=w(a);k.TR=M(a);k.cN=oa(a);k.EQ=ca(a);k.jS=ea(a);k.$i=Da(a);k.dof=Ra.dof&&(0<d.dof_distance||d.dof_object);k.motion_blur=Ra.motion_blur&&a.b4w_enable_motion_blur;k.compositing=Ra.compositing&&
a.b4w_enable_color_correction;k.antialiasing=Ra.antialiasing&&1==Ra.Jc&&"NONE"!=a.b4w_antialiasing_quality;k.ssao=Ra.ssao&&a.b4w_enable_ssao;k.god_rays=Ra.god_rays&&a.b4w_enable_god_rays&&k.Wl;k.mF=Ra.Ju;k.yv=a.b4w_glow_settings.render_glow_over_blend;k.lU=ta(a);h=ma(c);k.YG=h;k.refractions=ua(a,h);k.Id=P(a,b,c);k.wd=e(c);k.Ei=Ca(c);k.XT=t(c);k.shore_smoothing=I(c);k.ld=wa(a,c);k.xN=X(a,c);k.outline=Ga(a,c);k.glow_materials=Ha(a,c);k.KR=a.b4w_lod_smooth_type;k.QG=a.b4w_lod_hyst_interval;switch(Ra.reflection_quality?
Ra.reflection_quality:a.b4w_reflection_quality){case "LOW":k.Ui=Gb.dF;k.dh=Gb.xH;break;case "MEDIUM":k.Ui=Gb.MO;k.dh=Gb.zS;break;case "HIGH":k.Ui=Gb.KO;k.dh=Gb.yS;break;default:k.Ui=Gb.dF,k.dh=Gb.xH}ub.xG()?(Bb.log("%cENABLE HIDPI MODE","color: #00a"),k.HD="AA_QUALITY_LOW",k.xp=1,Ra.Jc=1):1<Ra.Jc?(Bb.log("%cENABLE MSAA RENDERING: "+Ra.Jc+"x","color: #00a"),k.xp=1):(k.HD="AA_QUALITY_"+a.b4w_antialiasing_quality,k.xp=Ra.quality===Ma.P_ULTRA?1.33:1);b=a.Hg.sort(function(a,g){return g.Bk-a.Bk});k.Ya=
va.ZN(k,l,d,b);k.rj=[];k.Aw=!1;k.fB=!1;k.gB=!1;k.Ci=new Float32Array(3);qb.push(a);Ib||(Ib=$a.create());$a.Fa(Ib,a);for(k=0;k<g.length;k++)Ta.QB(g[k],!0,a);a=ub.get_container();ub.resize(a.clientWidth,a.clientHeight,!0)};V.jM=function(a,g,b){for(var e=0;e<g.length;e++){var c=g[e].sa;c&&c.ej&&(c.qq=b,a.sa.oq.push(g[e]))}};V.rv=function(a){return a.sa.Ya};V.Wz=function(a,g){$a.Na(g,function(b,e){b=null;switch(e.type){case Z.Lc:b=Ia.Au(e.As);break;case Z.Nt:b=Ia.eO(e);break;case Z.Sy:b=Ia.fO(e);break;
case Z.ZC:b=Ia.MN();break;case Z.Yn:b=Ia.QN(e.Lw,e.Bg,e.Tl);break;case Z.It:b=Ia.RN();break;case Z.Fi:b=Ia.UN();break;case Z.Ey:b=Ia.GN(e.tu);break;case Z.wq:b=Ia.NN(e);var c=e.qa.dof_power;if(e.dof_bokeh){c/=2;var F=va.sv(g,e,Z.Lc);va.Zd(F[0],c);va.Zd(F[1],c);F[0]=va.Bd(g,F[0],Z.Lc);va.Zd(F[0],c)}else{F=va.Bd(g,e,Z.Lc);var h=va.Bd(g,F,Z.Lc);va.Zd(F,c);va.Zd(h,c)}break;case Z.Zn:b=Ia.VN();c=va.Bd(g,e,Z.Lc);F=va.Bd(g,c,Z.Lc);h=va.Bd(g,F,Z.Lc);var k=va.Bd(g,h,Z.Lc);va.Zd(F,e.Qq);va.Zd(c,e.Qq);va.Zd(k,
e.Cr*e.tn);va.Zd(h,e.Cr*e.tn);break;case Z.xq:b=Ia.PN();break;case Z.Fy:b=Ia.HN();break;case Z.UC:b=Ia.CN(e);break;case Z.Qy:case Z.Lt:case Z.Aq:case Z.Mt:b=Ia.cO(e.type);break;case Z.mh:b=Ia.gO(e.fc);break;case Z.Ve:b=Ia.KN(a,e);break;case Z.Sk:b=Ia.IN();break;case Z.$n:b=Ia.JN();break;case Z.Dy:b=Ia.FN();break;case Z.LUMINANCE:b=Ia.SN();break;case Z.XC:b=Ia.DN();break;case Z.Jt:b=Ia.TN(e.rm);break;case Z.sq:b=Ia.EN(e.iu);break;case Z.vD:b=Ia.Au("NONE");break;case Z.PL:b=Ia.GO();break;case Z.Wn:b=
Ia.BN();break;case Z.zq:b=Ia.XN()}b&&(c=Z.cj(b,Ta.Gm("NONE")),Z.zd(e,c),Ba(g,e,b,!1),ya(b))})};var tc=function(){var a=G.create(),g=Y.create();return function(b,e){var c=fa(e,md),h=b.lc,k=b.ka,l=Ta.kb(b,e),d=L.j(k.na,g);k=L.g(k.na,a);for(var q=0;q<c.length;q++){var t=c[q];Ac(b,l,t);switch(h.type){case "SUN":t.Px.set(k);t.Ox=h.dr;Y.copy(h.direction,t.Nx);t.type==Z.Ve&&t.procedural_skydome&&(t.gp=h.gH,Ua(e,t));break;case "HEMI":case "POINT":case "SPOT":break;default:Bb.error("Unknown light type: "+
h.type+'".')}t=t.vb;for(var Ma=0;Ma<t.length;Ma++)for(var m=t[Ma].jb,f=0;f<m.length;f++){var A=m[f].fb;A.gn&&Ia.xT(A,b)}}b=Pa(e,Z.ic).qa;l=l.YB;c=e.sa.Id;for(q=0;q<l.length;q++)t=l[q],F.WB(t.qa,d,k),Fa(t,e,b,c,!0),cc(t,e.sa.Ya)}}();V.Zp=tc;V.append_object=function(a,b,e){switch(b.type){case "MESH":case "LINE":case "WORLD":var c=a.sa.Ya,h=b.ka;!va.xc(c,Z.ee)&&h.Be&&(h.Be=!1);h=fa(a,zb);for(var k=0;k<h.length;k++){var l=h[k],d=b,q=c,t=a,Ma=e;switch(l.type){case Z.ic:ia(l,d,q,"OPAQUE",t,Ma);break;case Z.Md:ia(l,
d,q,"BLEND",t,Ma);break;case Z.lh:ia(l,d,q,"XRAY",t,Ma);break;case Z.He:ia(l,d,q,"GLOW",t,Ma);break;case Z.de:case Z.xd:na(l,d,q,!1,t,Ma);break;case Z.Ue:case Z.Ge:na(l,d,q,!0,t,Ma);break;case Z.Gg:for(var m=Ta.kb(d,t),f=m.Ia,A=0;A<f.length;A++){var u=f[A];if("SHADOW"==u.type&&"RECEIVE"==u.fc&&u.Be){if(!Ma&&(Q(u,l,d,q,"SHADOW",t),!Ia.md(u)))continue;var r=Z.cj(u,d.ka,m.Lg[A]);Z.zd(l,r);Ba(q,l,u,!1);ya(u)}}break;case Z.ee:m=!1;f=d.ka;d=Ta.kb(d,t);A=d.Ia;u=va.xc(q,Z.Bj);for(r=0;r<A.length;r++){var P=
A[r];if("SHADOW"==P.type&&"CAST"==P.fc){m=!0;if(!Ma){ra(P);var J=l.np;Ia.dc(P,"NUM_LIGHTS",J);Ia.dc(P,"NUM_LFACTORS",0==J%2?J/2:Math.floor(J/2)+1);Aa(P.Mb,l.qa);Qa.Wa(P.Mb,"SHADOW_USAGE","SHADOW_CASTING");P.ld&&u&&qa(P,u,f);Ia.dc(P,"SHADOW_TEX_RES",Qa.Ga(t.sa.Id.csm_resolution));if(!Ia.md(P))continue}P.ld&&(t.sa.Id.aP=!0);J=Z.cj(P,f,d.Lg[r]);Z.zd(l,J);Ba(q,l,P,!1);ya(P)}}m&&(d=t.sa.Id,Ma=va.xc(q,Z.ic),Fa(l,t,Ma.qa,d,!0));break;case Z.zf:g(l,d,q,t,Ma);break;case Z.Uh:g(l,d,q,t,Ma);break;case Z.Wh:m=
d.ka;f=Ta.kb(d,t);A=f.Ia;for(u=0;u<A.length;u++)if(r=A[u],"COLOR_ID"==r.type&&"OUTLINE"==r.fc){if(!Ma&&(Q(r,l,d,q,"COLOR_ID",t),Ia.dc(r,"USE_OUTLINE",1),!Ia.md(r)))continue;r=Z.cj(r,m,f.Lg[u]);Z.zd(l,r)}break;case Z.Bj:q=d.ka;d=Ta.kb(d,t);t=d.Ia;for(m=0;m<t.length;m++)if(f=t[m],"GRASS_MAP"==f.type){if(!Ma&&!Ia.md(f))if("DEBUG"===Object(ha.d)())Ia.$t(f,"error.glslv","error.glslf"),Ia.md(f);else continue;f=Z.cj(f,q,d.Lg[m]);Z.zd(l,f);f=l.qa;P=q.ai;A=l.Ud[0];u=l.Ud[1];r=l.Ud[2];0==A&&0==u?(A=P.min_z,
u=P.max_z):(A=Math.min(A,P.min_z),u=Math.max(u,P.max_z));P=1E-4*(u-A);A-=P;u+=P;l.Ud[0]=A;l.Ud[1]=u;F.aI(f,r/2,r/2,-u,-A);F.set_projection(f,!1)}break;case Z.Vh:for(m=d.ka,d=Ta.kb(d,t),t=d.Ia,f=0;f<t.length;f++)if(A=t[f],"DEBUG_VIEW"==A.type){if(!Ma&&(A.ld&&(u=va.xc(q,Z.Bj))&&qa(A,u,m),!Ia.md(A)))if("DEBUG"===Object(ha.d)())Ia.$t(A,"error.glslv","error.glslf"),Ia.md(A);else break;u=Z.cj(A,m,d.Lg[f]);Z.zd(l,u);Ba(q,l,A,!1);ya(A)}}}break;case "LAMP":tc(b,a)}e=Ta.kb(b,a);c=e.Ia;for(h=0;h<c.length;h++)null==
c[h].ec&&"PHYSICS"!=c[h].type&&(Ta.SH(e,h),h--);Ta.QB(b,!0,a)};V.UQ=function(a,g){if(a&&a.sa&&a.sa.Ya){var b=a.sa.Ya,e=va.xc(a.sa.Ya,Z.Ve);if(e){var c=null;va.Wp(b,function(a,g,b,e){if("CUBEMAP"==a.from&&b.type==Z.Ve&&e.type==Z.Tk)return c=a.yb,!0});if(c){var F=Gb.Cu;if((g=Ia.Nr(g,a))&&g.bc)g=Wb.sQ(Wb.tv(g.Me).Ya),-1!=g&&(F=Ic.jz(g/2));else if(g=a.sa.Aj.Cn)F=g.RI;F=Math.min(F,rb.Xg);e.qa.width=F;e.qa.height=F;Jb.ex(c,F);sa(a,F);if(e=va.xc(a.sa.Ya,Z.Sk)){e.qa.width=32;e.qa.height=32;var h=null;va.Wp(b,
function(a,g,b,e){if("CUBEMAP"==a.from&&b.type==Z.Sk&&e.type==Z.ic)return h=a.yb,!0});h&&Jb.ex(h,32)}if(a=va.xc(a.sa.Ya,Z.$n)){a.qa.width=128;a.qa.height=128;var k=null;va.Wp(b,function(a,g,b,e){if("CUBEMAP"==a.from&&b.type==Z.$n&&e.type==Z.ic)return k=a.yb,!0});k&&Jb.ex(k,128)}}}}};V.PU=function(a,g){a=a.Aa;for(var b=0;b<a.length;b++){var e=a[b].Bb,c=e.sa.Ya,F=va.xc(e.sa.Ya,Z.Ve);if(F){var h=null;va.Wp(c,function(a,g,b,e){if("CUBEMAP"==a.from&&b.type==Z.Ve&&e.type==Z.Sk)return h=a.yb,!0});h&&(c=
Ic.jz(g.height/2),c=Math.min(c,rb.Xg),F.qa.width=c,F.qa.height=c,Jb.ex(h,c),sa(e,c))}}};V.XL=na;V.RB=function(a){a.sa.Aw=!0};V.hV=function(a,g){$a.Na(g,function(g,b){b.type===Z.ee&&(L.a(a.na,b.qa.na),L.a(a.Ag,b.qa.Ts))})};var cc=function(){var a=G.create(),g=Y.create(),b=K.create();return function(e,c){var F=e.qa;c=va.tQ(c,e);for(var h=0;h<c.length;h++){var k=c[h];if(k.type==Z.ic||k.type==Z.Gg||k.type==Z.Md||k.type==Z.lh)if(Ra.mw)k.vt.set(F.Ag,9*e.gh);else{var l=L.j(F.Ag,g),d=L.i(F.Ag),q=L.g(F.Ag,
a);K.set(l[0],l[1],l[2],d,b);k.iq.set(b,4*e.gh);k.hq.set(q,4*e.gh)}}}}();V.TY=cc;V.$P=function(a,g){a=a.sa.Id;for(var b=new Float32Array(a.csm_num),e=0;e<a.csm_num;e++)b[e]=F.JO(a,g,e);return b};V.yN=Ba;V.Zq=Va;V.Bm=Xa;V.is_hidden=function(a){return a.ka.hide};V.MH=function(a,g){for(var b=0;b<a.Aa.length;b++)for(var e=fa(a.Aa[b].Bb,zb),c=0;c<e.length;c++)for(var F=e[c].vb,h=0;h<F.length;h++)for(var k=F[h].jb,l=k.length-1;0<=l;l--){var d=k[l];if(d.$g==a.ka)if(d.fb){if("undefined"==typeof g||-1!=d.fb.Hc.indexOf(g)||
0==d.fb.Hc.length)Ia.GE(d.fb),k.splice(l,1)}else k.splice(l,1)}};V.RU=function(a,g){var b=a.lc;a=Ta.kb(a,g).es;g=fa(g,md);for(var e=0;e<g.length;e++){var c=g[e];c.hn.set(b.dr,4*a);c.wb=!0}};var Ac=function(){var a=Y.create(),g=K.create();return function(b,e,c){var F=b.ka,h=b.lc;e=e.es;b=L.j(b.ka.na,a);var k=h.dr;c.ds.set(h.direction,3*e);g[0]=b[0];g[1]=b[1];g[2]=b[2];g[3]=h.In&&!F.hide?1:0;c.jn.set(g,4*e);g[0]=k[0];g[1]=k[1];g[2]=k[2];g[3]=h.Nn&&!F.hide?1:0;c.hn.set(g,4*e);c.wb=!0}}();V.ey=function(a){a=
a.Aa;for(var g=0;g<a.length;g++)Za(a[g].Bb)};V.fy=Za;V.iV=Ua;V.cleanup=function(){for(var a=0;a<qb.length;a++){var g=qb[a];$a.Na(g.sa.Ya,function(a,g){g.type!=Z.Tk&&W(g)});g.sa.Ya=null;g.sa.rj=[]}Hb=hc=null;qb.length=0;Ib=null};V.HE=W;V.VG=function(a,g,b){a=F.jP(a,a.near,a.far,null,!0);var e=zc.GP(a);a=Ta.Gm("DYNAMIC");a.ai=a.gb=n.f();a.Ye=a.Xc=n.g();var c=a.Ye.Lb;a.Xk=a.jc=n.e([c,0,0],[0,c,0],[0,0,c],a.Ye.Da);b=Ia.bO(e,b);b.Wj=!0;b=Z.cj(b,a);Z.zd(g,b)};V.CX=function(a){return[a.frame_start,a.frame_end]};
V.kI=function(a,g,b){ub.PT(a,g,b);Hb&&Sa(Hb,a,g)};V.ug=fa;V.yc=Pa;V.NS=function(){Wa(!1)};V.OS=function(){Wa(!0)};V.get_environment_colors=function(a){a=Pa(a,Z.ic);var g=a.we,b=a.Fe,e=[],c=[];e[0]=g[0];e[1]=g[1];e[2]=g[2];c[0]=b[0];c[1]=b[1];c[2]=b[2];return[a.Rg,e,c]};V.set_environment_colors=function(a,g,b,e){for(var c=fa(a,md),F=0;F<c.length;F++){var h=c[F];h.we.set(b);h.Fe.set(e);h.Rg=g;h.wb=!0}(g=va.xc(a.sa.Ya,Z.Ve))&&Ua(a,g)};V.get_sky_params=function(a){if((a=Pa(a,Z.Ve))&&a.procedural_skydome){var g=
{};g.color=Array(3);Y.copy(a.Sl,g.color);g.procedural_skydome=a.procedural_skydome;g.use_as_environment_lighting=a.use_as_environment_lighting;g.rayleigh_brightness=a.rayleigh_brightness;g.mie_brightness=a.mie_brightness;g.spot_brightness=a.spot_brightness;g.scatter_strength=a.scatter_strength;g.rayleigh_strength=a.rayleigh_strength;g.mie_strength=a.mie_strength;g.rayleigh_collection_power=a.rayleigh_collection_power;g.mie_collection_power=a.mie_collection_power;g.mie_distribution=a.mie_distribution;
return g}return null};V.jQ=function(a){return fa(a,db)[0].kg[0]};V.hQ=function(a){return fa(a,db)[0].kg[1]};V.kQ=function(a){return fa(a,db)[0].kg[2]};V.iQ=function(a){return fa(a,db)[0].kg[3]};V.YH=function(a,g){a=fa(a,db);for(var b=0;b<a.length;b++){var e=a[b];e.kg[0]=g;e.wb=!0}};V.WH=function(a,g){a=fa(a,db);for(var b=0;b<a.length;b++){var e=a[b];e.kg[1]=g;e.wb=!0}};V.ZH=function(a,g){a=fa(a,db);for(var b=0;b<a.length;b++){var e=a[b];e.kg[2]=g;e.wb=!0}};V.XH=function(a,g){a=fa(a,db);for(var b=
0;b<a.length;b++){var e=a[b];e.kg[3]=g;e.wb=!0}};V.get_fog_color_density=function(a,g){g=g||[];a=fa(a,db)[0].ue;g[0]=a[0];g[1]=a[1];g[2]=a[2];g[3]=a[3];return g};V.set_fog_color_density=function(a,g){a=fa(a,db);for(var b=0;b<a.length;b++){var e=a[b];e.ue.set(g);e.wb=!0}};V.get_ssao_params=function(a){var g=Pa(a,Z.Nt),b=Pa(a,Z.Sy);a=Pa(a,Z.ic);if(!g)return null;var e={};e.quality=g.Fn;e.use_hemisphere=g.Lp;e.use_blur_depth=b.Ip;e.blur_discard_value=b.Jp;e.radius_increase=g.Np;e.influence=g.Mp;e.dist_factor=
g.Kp;e.ssao_only=a.ssao_only;e.ssao_white=g.ssao_white;return e};V.get_dof_params=function(a){a=Pa(a,Z.wq);if(!a)return null;var g={};g.dof_on=a.qa.dof_on;g.dof_bokeh=a.dof_bokeh;g.dof_distance=a.qa.dof_distance;g.dof_front_start=a.qa.dof_front_start;g.dof_front_end=a.qa.dof_front_end;g.dof_rear_start=a.qa.dof_rear_start;g.dof_rear_end=a.qa.dof_rear_end;g.dof_power=a.qa.dof_power;g.dof_bokeh_intensity=a.qa.dof_bokeh_intensity;g.dof_object=a.qa.dof_object;return g};V.set_dof_params=hb;V.get_god_rays_params=
function(a){var g=fa(a,[Z.Yn]);a=Pa(a,Z.It);if(!g||!a)return null;var b={};b.god_rays_max_ray_length=g[0].zl;b.god_rays_intensity=a.god_rays_intensity;b.god_rays_steps=Ia.Td(g[0].vb[0].jb[0].fb,"STEPS_PER_PASS")[1];return b};V.set_god_rays_params=function(a,g){var b=fa(a,[Z.Yn]);a=fa(a,[Z.It]);if(!b.length||!a.length)return Bb.error("God Rays are not enabled on the scene"),0;if("number"==typeof g.god_rays_intensity)for(var e=0;e<a.length;e++)a[e].god_rays_intensity=g.god_rays_intensity;if("number"==
typeof g.god_rays_max_ray_length){var c=g.god_rays_max_ray_length;for(e=0;e<b.length;e++)b[e].zl=c,b[e].vp=c/b[e].Tl/(e+1),b[e].wb=!0}if("number"==typeof g.god_rays_steps)for(g=Qa.Ga(g.god_rays_steps,1),c=b[0].zl,e=0;e<b.length;e++){b[e].Tl=g;b[e].vp=c/g/(e+1);b[e].wb=!0;var F=b[e].vb[0].jb[0],h=F.fb;Ia.dc(h,"STEPS_PER_PASS",g);Ia.md(h);Z.zd(b[e],F)}for(e=0;e<a.length;e++)a.wb=!0};V.get_bloom_params=function(a){var g=Pa(a,Z.Jt);a=Pa(a,Z.sq);if(!g||!a)return null;var b={};b.key=g.no;b.edge_lum=g.mo;
b.blur=a.ko;b.adaptive=g.rm;b.average_luminance=g.average_luminance;return b};V.set_bloom_params=ib;V.get_glow_material_params=function(a){a=Pa(a,Z.xq);if(!a)return null;var g={};g.small_glow_mask_coeff=a.small_glow_mask_coeff;g.large_glow_mask_coeff=a.large_glow_mask_coeff;g.small_glow_mask_width=a.small_glow_mask_width;g.large_glow_mask_width=a.large_glow_mask_width;return g};V.set_glow_material_params=Ja;V.get_wind_params=function(a){var g=tb(a);a=Y.length(g);if(0==a)return null;g=B._39(Math.atan2(g[0],
-g[1]));var b={};b.wind_dir=g;b.wind_strength=a;return b};V.cT=function(a){a.sa.fB=!0};V.get_water_surface_level=eb;V.get_water_mat_params=function(a,g){var b=a.sa.wd;(a=Pa(a,Z.ic))&&b&&(g.waves_height=b.waves_height,g.waves_length=b.waves_length,g.water_fog_density=a.Bi[3],g=g.water_fog_color=[],g[0]=a.Bi[0],g[1]=a.Bi[1],g[2]=a.Bi[2])};V.set_water_params=function(a,g){var b=a.sa.wd;if(!b)return Bb.error("set_water_params() - no water parameters on the scene"),null;"number"==typeof g.dst_noise_scale0&&
(b.dst_noise_scale0=g.dst_noise_scale0);"number"==typeof g.dst_noise_scale1&&(b.dst_noise_scale1=g.dst_noise_scale1);"number"==typeof g.dst_noise_freq0&&(b.dst_noise_freq0=g.dst_noise_freq0);"number"==typeof g.dst_noise_freq1&&(b.dst_noise_freq1=g.dst_noise_freq1);"number"==typeof g.dir_min_shore_fac&&(b.dir_min_shore_fac=g.dir_min_shore_fac);"number"==typeof g.dir_freq&&(b.dir_freq=g.dir_freq);"number"==typeof g.dir_noise_scale&&(b.dir_noise_scale=g.dir_noise_scale);"number"==typeof g.dir_noise_freq&&
(b.dir_noise_freq=g.dir_noise_freq);"number"==typeof g.dir_min_noise_fac&&(b.dir_min_noise_fac=g.dir_min_noise_fac);"number"==typeof g.dst_min_fac&&(b.dst_min_fac=g.dst_min_fac);"number"==typeof g.waves_hor_fac&&(b.waves_hor_fac=g.waves_hor_fac);"number"==typeof g.water_dynamic&&(b.xr=g.water_dynamic);a=fa(a,gb);for(var e=0;e<a.length;e++){var c=a[e];"number"==typeof g.water_fog_density&&b.ue&&(c.Bi[3]=g.water_fog_density);"object"==typeof g.water_fog_color&&b.ue&&c.Bi.set(g.water_fog_color);c.wb=
!0}};V.get_shore_dist=function(a,g,b){var e=a.sa.wd;if(!e.Ql)return 100;var c=e.UA;a=e.yj;var F=(g[0]-e.Cp[0])/e.Dp[0],h=(e.Cp[1]+g[1])/e.Dp[1];F+=.5;h+=.5;if(!(1<F||0>F||1<h||0>h))return e=c*B._7(Hb.sa.ZB,e.$B,F,h),g=(a-g[2])*b,g=Math.sqrt(e*e+g*g)};V.update=function(a,g){lb.clear();for(var b=J().Hi.ka,e=0;e<qb.length;e++){var c=qb[e],F=c.sa.Ya,h=c.sa;if(h.wd){var k=L.j(b.na,Cb),l=k[2]-eb(c,k[0],k[1]);L.v(k,b.na)}for(k=0;k<h.oq.length;k++){var d=h.oq[k].sa,q=d.Qb,t=d.pe;if(!(c.b4w_use_nla&&d.gm||
!q&&!t)&&Jb.BJ(d)){var Ma=Jb.yJ(d),m=Jb.AJ(d);q&&Ra.is_mobile_device&&(m-=5);var f=Jb.AV(d);Ma>=f&&d.Mk||Ma<m?(Jb.reset_video(d),t&&(d.Pl=Jb.cx(d,a))):Ma>=f&&!d.Mk?Jb.pause_video(d):Jb.CJ(d)&&(q?Jb.iJ(d):(q=Jb.cx(d,a),q!=d.Pl&&(Jb.hJ(d),d.yk++),d.Pl=q))}}$a.Na(F,function(g,b){-1<Lb.indexOf(b.type)&&(b.time=a);h.wd&&(b.Vq=l)})}for(e=0;e<qb.length;e++)if(c=qb[e],h=c.sa,F=h.Ya,b=h.rj,b.length)for(h.Aw&&(xa(c),h.Aw=!1),h.fB&&(kb(c),h.fB=!1),h.gB&&(za(c),h.gB=!1),h.motion_blur&&nb(F,g),c=va.xc(F,Z.Wh),
k=0;k<b.length;k++)d=b[k],dc.wn(d),c&&bb(F,d,c),lb.Xj(d);Ra.show_hud_debug_info&&ad.UT(qb,g)};V.TS=function(a){a.sa.gB=!0};V.Zz=function(a){var g=[];$a.Na(a.sa.Ya,function(a,b){g.push(b)});return g};V.get_cam_water_depth=function(){var a=Pa(Hb,Z.Md),g=Hb;return a||g.sa.wd?a.Vq:null};V.gJ=function(a){$a.Na(a.sa.Ya,function(a,g){g.wb=!0})};V.oT=function(a,g){a.debug_view_mode=g;a.Ec=g!=Qb.DV_NONE;a.Ob=g==Qb.DV_TRANSPARENT_WIREFRAME;a.wb=!0;a=J();for(var b=0;b<gb.length;b++)for(var e=fa(a,[gb[b]]),c=
0;c<e.length;c++)e[c].vr=g==Qb.DV_RENDER_TIME};V.nT=function(a,g){a.debug_colors_seed=g;a.wb=!0};V.DT=function(a,g){a.Hu=g;a.wb=!0};V.MT=function(a,g){a=a.vb;for(var b=0;b<a.length;b++)for(var e=a[b].jb,c=0;c<e.length;c++){var F=e[c].fb;Y.copy(g,F.wireframe_edge_color);F.ec.hp=!0}};V.cJ=function(){var a=G.create();return function(g,b){var e=b.Do,c=g.sa.Ci;if(e&&"WIND"==e.type&&c){b=L.g(b.ka.na,a);Y.transformQuat(B.f,b,c);Y.normalize(c,c);Y.scale(c,e.EI,c);g=fa(g,Lb);for(e=0;e<g.length;e++)g[e].Ci.set(c);
return!0}return!1}}();V.tS=function(a,g,b){var e=Pa(a,Z.zf);if(e){var c=Vc.enabled&&(Vc.dt===Z.zf||Vc.dt===Z.Uh);if(c)var h=ub.Wq(g,b,ec,e.qa);else{var k=ub.get_canvas();F.mT(e.qa,g,b,k.clientWidth,k.clientHeight)}dc.wn(e);e.Ec&&lb.Xj(e);(a=Pa(a,Z.Uh))?(z.copy(e.qa.gc,a.qa.gc),z.copy(e.qa.zg,a.qa.zg),B._0(a.qa.zg,a.qa.Um),dc.wn(a),a.Ec&&lb.Xj(a),g=a.qa):g=e.qa;if(e.Ec||a&&a.Ec)return c?(h[1]=g.height-h[1],lb.Vw(g.Hf,h[0],h[1],1,1,yb)):lb.Vw(a?a.qa.Hf:e.qa.Hf,0,0,1,1,yb)}else Bb.error("Object Selection is not available on the scene");
return null};V.set_outline_color=function(a){var g=J();g=fa(g,[Z.Zn]);for(var b=0;b<g.length;b++){var e=g[b];e.si.set(a);e.wb=!0}};V.HX=tb;V.get_meta_tags=function(a){var g={title:"",description:""};a.b4w_tags&&(g.title=a.b4w_tags.title,g.description=a.b4w_tags.description);return g};V.get_custom_prop=function(a){return a.b4w_custom_prop};V.bJ=function(a,g){var b=Cb;Y.negate(g,b);for(g=0;6>g;g++){var e=a.sh[g],c=a.Im[g],F=a.qa;z.translate(B.j[g],b,e);z.multiply(F.gc,e,F.zg);B._0(F.zg,c)}};V.dJ=function(a,
g,b){B._61(g,b,B.f,a.qa.ad)};V.TD=function(a,g,b){var e=a.sa.pg;if(e&&g)for(var c=0;c<g.length;c++){var F=g[c],h=Ta.kb(F,a);if(-1!=F.ka.Gd){var k=e.oj,l=e.Pw;F=F.ka.Gd;l.length&&F<l.length?h.oj=l[F]:k.length&&F<k.length&&(h.oj=k[F])}else-1!=F.ka.Qd&&(k=e.Tj,l=e.Cz,F=F.ka.Qd,l.length?h.Tj=l[F]:k.length&&(h.Tj=k[F]))}if(b)for(g=Ta.vv(b,Ra.ssao&&a.b4w_enable_ssao),b=a.sa.Id,c=0;c<g.length;c++)if(h=Ta.kb(g[c],a),b)for(e=fa(a,[Z.ee]),F=0;F<e.length;F++)c==e[F].gh&&h.YB.push(e[F])};V.marker_frame=function(a,
g){return a.timeline_markers[g]};V.set_hmd_params=function(a){var g=J();if(g=Pa(g,Z.mh))a.distortion_coefs&&(g.Vj[0]=a.distortion_coefs[0],g.Vj[1]=a.distortion_coefs[1],g.wb=!0),a.chromatic_aberration_coefs&&(g.chromatic_aberration_coefs[0]=a.chromatic_aberration_coefs[0],g.chromatic_aberration_coefs[1]=a.chromatic_aberration_coefs[1],g.chromatic_aberration_coefs[2]=a.chromatic_aberration_coefs[2],g.chromatic_aberration_coefs[3]=a.chromatic_aberration_coefs[3],g.wb=!0),a.base_line_factor&&(g.Vj[2]=
a.base_line_factor,g.wb=!0),a.inter_lens_factor&&(g.Vj[3]=a.inter_lens_factor,g.wb=!0),null!=a.enable_hmd_stereo&&(g.enable_hmd_stereo=a.enable_hmd_stereo,g.wb=!0)};V.yw=function(a,g){for(var b=qb,e=0;e<b.length;e++)va.ZR(V.rv(b[e]),a,g)};V.EU=function(a){for(var g=sb.tc(a,"LAMP",sb.DATA_ID_ALL),b=fa(a,zb),e=0;e<b.length;e++)for(var c=b[e],F=c.vb,h=0;h<F.length;h++)for(var k=F[h].jb,l=0;l<k.length;l++){var d=k[l],q=d.fb;"MAIN"==q.type&&(Ia.HU(q,g,a),Ia.md(q),Z.zd(c,d))}};V.IH=function(a){for(var g=
0;g<qb.length;g++)$a.Na(qb[g].sa.Ya,function(g,b){g=b.vb;for(var e=0;e<g.length;e++)for(var c=g[e].jb,F=0;F<c.length;F++){var h=c[F];h.fb==a&&Z.zd(b,h)}})}});w.a=f},function(D,w,f){D=f(0);var N=f(5),U=f(14),n=f(4),y=f(2),d=f(25);f=Object(D.a)("__subscene",function(m,f){function v(a,k){a.np=k;a.ds=new Float32Array(3*k);a.jn=new Float32Array(4*k);a.hn=new Float32Array(4*k)}function r(a){a={type:a,fc:"",Rm:!1,Ob:!1,Lw:!1,Iq:!1,gp:!1,cl:0,fg:0,el:[],debug_view_mode:0,debug_colors_seed:0,Hu:1,vr:!1,time:0,
qa:null,sh:null,Im:[],vb:[],Nb:[],Sh:[],Ci:new Float32Array(3),Ud:new Float32Array(3),ue:new Float32Array(4),kg:new Float32Array(4),eg:new Float32Array(16),Gp:0,Rg:0,np:0,ds:null,jn:null,hn:null,KG:null,we:new Float32Array(3),Fe:new Float32Array(3),Hp:new Float32Array(4),Ox:new Float32Array(3),Nx:new Float32Array([0,0,1]),Px:new Float32Array(4),Fp:new Float32Array(3),rx:"",lu:0,tn:0,wr:0,en:!1,si:new Float32Array(3),Bg:!1,Vq:0,Bi:new Float32Array(4),yj:0,Ng:!1,Nj:0,ou:new Float32Array(2),Mj:0,procedural_skydome:!1,
use_as_environment_lighting:!1,mie_brightness:0,rayleigh_brightness:0,spot_brightness:0,mie_strength:0,rayleigh_strength:0,scatter_strength:0,mie_collection_power:0,rayleigh_collection_power:0,mie_distribution:0,Sl:new Float32Array(3),Lp:!1,Ip:!1,Jp:0,Np:0,Mp:0,Kp:0,Fn:0,ssao_only:!1,ssao_white:!1,brightness:0,contrast:0,exposure:0,saturation:0,god_rays_intensity:0,zl:0,vp:0,Tl:0,lr:0,self_shadow_polygon_offset:0,self_shadow_normal_offset:0,iq:null,hq:null,vt:null,rk:null,Gc:!1,jv:"",no:0,ko:0,mo:0,
rm:!0,average_luminance:0,Qq:0,Cr:0,mb_decay_threshold:0,mb_factor:0,uw:0,As:"",dof_bokeh:!1,tu:"",JA:new Float32Array(2),aw:0,iu:2,lo:.5,small_glow_mask_width:0,large_glow_mask_width:0,small_glow_mask_coeff:0,large_glow_mask_coeff:0,ft:new Float32Array(2),nc:new Float32Array(2),Vj:new Float32Array(4),chromatic_aberration_coefs:new Float32Array(4),enable_hmd_stereo:!1,gh:0,ms:!0,qx:!1,yx:!1,ux:!1,vx:!1,xx:!1,wx:!1,px:"",Kn:!1,Ln:!1,Mn:!1,wp:null,Ec:!0,enqueue:!0,Ub:!0,Yb:!0,Ad:!0,wb:!0,uf:1};a.nc[0]=
1;a.nc[1]=1;a.Vj[2]=.5;a.Vj[3]=.5;a.Fn=8;return a}function p(a,k){return a==k?0:a>k?1:-1}function z(a,k){return p(a.Yf,k.Yf)||p(a.ek,k.ek)||p(a.Yd,k.Yd)||p(a.ec.eG,k.ec.eG)||p(a.Qk,k.Qk)}var a=Object(N.a)(m),C=Object(U.a)(m),k=Object(n.a)(m).Ed;f.ic=0;f.Md=1;f.lh=2;f.de=3;f.xd=4;f.Ue=5;f.Ge=6;f.He=7;f.ee=8;f.Gg=9;f.Bj=10;f.Lc=11;f.xq=13;f.Kt=14;f.zf=15;f.Uh=16;f.Vh=17;f.Wn=18;f.ZC=19;f.Nt=20;f.Sy=21;f.UC=22;f.Aq=23;f.Lt=24;f.Qy=25;f.Mt=26;f.Fy=27;f.Fi=28;f.Ey=29;f.wq=30;f.Wh=31;f.Zn=32;f.Yn=33;f.It=
34;f.Ve=35;f.Gy=36;f.mh=37;f.LUMINANCE=38;f.XC=39;f.Jt=40;f.sq=41;f.PL=42;f.Tk=43;f.zq=44;f.vD=45;f.Sk=46;f.$n=47;f.Dy=48;f.zO=function(a,k,b,h){var c=r(8);c.lr=a;c.self_shadow_polygon_offset=b.self_shadow_polygon_offset;c.gh=k;switch(b.ki[k]){case "SPOT":case "POINT":c.qa=C.jd(C.qd);C.$H(c.qa,b.zI[k],b.br[k],b.ar[k]);break;default:c.qa=C.jd(C.Cj)}v(c,h);return c};f.wN=function(a){var c=r(a.type);c.fc=a.fc;c.Rm=a.Rm;c.Ec=a.Ec;c.enqueue=a.enqueue;c.Ub=a.Ub;c.Yb=a.Yb;c.Ad=a.Ad;c.Ob=a.Ob;c.Lw=a.Lw;c.Iq=
a.Iq;c.gp=a.gp;c.wb=a.wb;c.cl=0;c.fg=0;c.el=[];c.debug_view_mode=a.debug_view_mode;c.debug_colors_seed=a.debug_colors_seed;c.Hu=a.Hu;c.vr=a.vr;c.time=a.time;c.qa=C.sd(a.qa,!0);c.sh=y.O(a.sh);c.Im=y.O(a.Im);c.vb=y.O(a.vb);c.Nb=y.O(a.Nb);c.Sh=y.O(a.Sh);c.Ci.set(a.Ci);c.Ud.set(a.Ud);c.ue.set(a.ue);c.kg.set(a.kg);c.eg.set(a.eg);c.Gp=a.Gp;c.Rg=a.Rg;c.np=a.np;c.ds=y.O(a.ds);c.jn=y.O(a.jn);c.hn=y.O(a.hn);c.KG=y.O(a.KG);c.we.set(a.we);c.Fe.set(a.Fe);c.Hp.set(a.Hp);c.Ox.set(a.Ox);c.Nx.set(a.Nx);c.Px.set(a.Px);
c.Fp.set(a.Fp);c.rx=a.rx;c.lu=a.lu;c.tn=a.tn;c.wr=a.wr;c.en=a.en;c.si.set(a.si);c.Bg=a.Bg;c.Vq=a.Vq;c.Bi.set(a.Bi);c.yj=a.yj;c.Ng=a.Ng;c.Nj=a.Nj;c.ou.set(a.ou);c.Mj=a.Mj;c.procedural_skydome=a.procedural_skydome;c.use_as_environment_lighting=a.use_as_environment_lighting;c.mie_brightness=a.mie_brightness;c.rayleigh_brightness=a.rayleigh_brightness;c.spot_brightness=a.spot_brightness;c.mie_strength=a.mie_strength;c.rayleigh_strength=a.rayleigh_strength;c.scatter_strength=a.scatter_strength;c.mie_collection_power=
a.mie_collection_power;c.rayleigh_collection_power=a.rayleigh_collection_power;c.mie_distribution=a.mie_distribution;c.Sl.set(a.Sl);c.Lp=a.Lp;c.Ip=a.Ip;c.Jp=a.Jp;c.Np=a.Np;c.Mp=a.Mp;c.Kp=a.Kp;c.Fn=a.Fn;c.ssao_only=a.ssao_only;c.ssao_white=a.ssao_white;c.brightness=a.brightness;c.contrast=a.contrast;c.exposure=a.exposure;c.saturation=a.saturation;c.god_rays_intensity=a.god_rays_intensity;c.zl=a.zl;c.vp=a.vp;c.Tl=a.Tl;c.lr=a.lr;c.self_shadow_polygon_offset=a.self_shadow_polygon_offset;c.self_shadow_normal_offset=
a.self_shadow_normal_offset;c.iq=y.O(a.iq);c.hq=y.O(a.hq);c.vt=y.O(a.vt);c.rk=y.O(a.rk);c.Gc=a.Gc;c.jv=a.jv;c.no=a.no;c.ko=a.ko;c.mo=a.mo;c.rm=a.rm;c.average_luminance=a.average_luminance;c.Qq=a.Qq;c.Cr=a.Cr;c.mb_decay_threshold=a.mb_decay_threshold;c.mb_factor=a.mb_factor;c.uw=a.uw;c.As=a.As;c.tu=a.tu;c.dof_bokeh=a.dof_bokeh;c.JA.set(a.JA);c.aw=a.aw;c.iu=a.iu;c.lo=a.lo;c.small_glow_mask_width=a.small_glow_mask_width;c.large_glow_mask_width=a.large_glow_mask_width;c.small_glow_mask_coeff=a.small_glow_mask_coeff;
c.large_glow_mask_coeff=a.large_glow_mask_coeff;c.uf=a.uf;c.ft.set(a.ft);c.nc.set(a.nc);c.Vj.set(a.Vj);c.chromatic_aberration_coefs.set(a.chromatic_aberration_coefs);c.enable_hmd_stereo=a.enable_hmd_stereo;c.gh=a.gh;c.ms=a.ms;c.qx=a.qx;c.yx=a.yx;c.ux=a.ux;c.vx=a.vx;c.xx=a.xx;c.wx=a.wx;c.px=a.px;c.Kn=a.Kn;c.Ln=a.Ln;c.Mn=a.Mn;return c};f.ZE=function(){var a=r(10);a.qa=C.jd(C.Yh);return a};f.kd=function(c){var k=r(11);k.Ub=!1;k.Yb=!1;k.Ad=!1;k.Gc=!0;k.qa=C.jd(C.Wc);k.As=c;switch(c){case "NONE":k.nc[0]=
1;k.nc[1]=1;break;case "GRAYSCALE":k.nc[0]=1;k.nc[1]=1;break;case "X_BLUR":k.nc[0]=1;k.nc[1]=0;break;case "Y_BLUR":k.nc[0]=0;k.nc[1]=1;break;case "X_GLOW_BLUR":k.nc[0]=1;k.nc[1]=0;break;case "Y_GLOW_BLUR":k.nc[0]=0;k.nc[1]=1;break;case "X_BLOOM_BLUR":k.nc[0]=1;k.nc[1]=0;break;case "Y_BLOOM_BLUR":k.nc[0]=0;k.nc[1]=1;break;case "X_DOF_BLUR":k.nc[0]=1;k.nc[1]=1;break;case "Y_DOF_BLUR":k.nc[0]=1;k.nc[1]=1;break;case "X_ALPHA_BLUR":k.nc[0]=1;k.nc[1]=0;k.uf=3;break;case "Y_ALPHA_BLUR":k.nc[0]=0;k.nc[1]=
1;k.uf=3;break;case "X_EXTEND":k.nc[0]=1;k.nc[1]=0;break;case "Y_EXTEND":k.nc[0]=0;k.nc[1]=1;break;default:a.va("Wrong postprocessing effect: "+c)}return k};f.pO=function(a,k){var b=r(13);b.Ub=!1;b.Yb=!1;b.Ad=!1;b.small_glow_mask_coeff=k.$i.small_glow_mask_coeff;b.large_glow_mask_coeff=k.$i.large_glow_mask_coeff;b.small_glow_mask_width=k.$i.small_glow_mask_width;b.large_glow_mask_width=k.$i.large_glow_mask_width;b.qa=a;b.Gc=!0;return b};f.Hm=function(c,k,b,h,d,m,f,p,n){var l=r(c);0==c?(l.Ub=!0,l.Yb=
b,l.Ob=!1):1==c?(l.Ub=!1,l.Yb=!1,l.Ob=!0):2==c?(l.Ub=!1,l.Yb=!0,l.Ob=!0):3==c||4==c?(l.Ub=!0,l.Yb=!0,l.Ob=!1):5==c||6==c?(l.Ub=!1,l.Yb=!1,l.Ob=!0):7==c?(l.Ub=!0,l.Yb=!1,l.Ob=!0):a.va("wrong main subscene type");l.Ob&&p&&(l.self_shadow_normal_offset=p.self_shadow_normal_offset);l.qa=k;if(c=f.Cn)l.Hp.set([c.bE,c.iG,c.KJ,c.JJ]),l.Fp.set(c.color),l.Gp=c.mb;l.we.set(f.we);l.Fe.set(f.Fe);l.Rg=f.Rg;l.ue=m.ue;l.kg=m.kg;h&&(h.ue&&l.Bi.set(h.ue),l.yj=h.yj,h.Ng&&n&&(l.Ng=!0,l.Nj=h.$M,l.Mj=h.ZM,l.ou.set(h.aN)));
v(l,d);return l};f.kr=function(){var a=r(14);a.Gc=!0;a.qa=C.jd(C.Wc);return a};f.XE=function(a,k,b){var c=r(15);k&&(c.type=16,c.Ub=!1,c.Yb=!0);c.enqueue=!1;c.qa=a;v(c,b);return c};f.nO=function(a){var c=r(17);c.Ec=!1;c.Ub=!1;c.Yb=!1;c.qa=a;return c};f.iO=function(a){var c=r(18);c.Ub=!0;c.Yb=!1;c.qa=a;return c};f.AO=function(a,k){var b=r(9);b.qa=a;v(b,k);return b};f.oO=function(a){var c=r(19);c.Ub=!1;c.Yb=!1;c.qa=a;c.Gc=!0;return c};f.CO=function(a,k,b){var c=r(20);c.Ub=!1;c.Yb=!1;c.Ad=!1;c.qa=a;c.ue=
k.ue;c.Bi.set(k.ue);c.Np=b.radius_increase;c.Lp=b.OQ;c.Mp=b.influence;c.Kp=b.dist_factor;c.Fn=b.bT;c.Gc=!0;return c};f.DO=function(a,k){var b=r(21);b.Ub=!1;b.Yb=!1;b.Ad=!1;b.qa=a;b.Ip=k.JM;b.Jp=k.blur_discard_value;b.Gc=!0;return b};f.hO=function(a){var c=r(22);c.Ub=!1;c.Yb=!1;c.Ad=!1;c.uf=1/a.xp;c.jv=a.HD;c.qa=C.jd(C.Wc);c.Gc=!0;return c};f.Bz=function(a,k){var b=r(a);b.Ub=23==a||24==a?!0:!1;b.Yb=!1;b.Ad=!1;b.uf=1/k.xp;b.qa=C.jd(C.Wc);23==a&&(b.iR=new Float32Array(4));b.Gc=!0;return b};f.mO=function(a,
k,b,h){var c=r(27);c.Ub=!1;c.Yb=!1;c.Ad=!1;c.qa=C.jd(C.Wc);c.brightness=a;c.contrast=k;c.exposure=b;c.saturation=h;c.Gc=!0;return c};f.uO=function(a,k){var b=r(28);b.Ub=!1;b.Yb=!1;b.Ad=!1;b.qa=C.jd(C.Wc);b.Iq=!0;b.mb_decay_threshold=a;b.mb_factor=k;b.Gc=!0;return b};f.yz=function(a,k){var b=r(29);b.Ub=!1;b.Yb=!1;b.Ad=!1;b.qa=a;b.uf=b.qa.dof_power;b.tu=k;b.Gc=!0;return b};f.YE=function(a,k){var b=r(30);b.Ub=!1;b.Yb=!1;b.Ad=!1;b.qa=a;b.uf=a.dof_power;b.dof_bokeh=k;b.Gc=!0;return b};f.wO=function(a,
k){var b=r(31);b.Ad=!1;b.qa=a;v(b,k);return b};f.vO=function(a){var c=r(32);k.outlining_overview_mode?c.si.set(k.si):c.si.set(a.si);c.tn=a.tn;c.Cr=5;c.Qq=3;c.Ad=!1;c.qa=C.jd(C.Wc);c.Gc=!0;return c};f.Az=function(a,k,b,h,d,m,f){var c=r(33);c.Ub=!1;c.Yb=!1;c.Ad=!1;c.we=new Float32Array([1,1,1]);c.Fe=new Float32Array([1,1,1]);c.Rg=1;c.Lw=h;c.Bg=k;c.vp=d;c.zl=b;c.Tl=f;c.qa=a;v(c,m);return c};f.qO=function(a,k){var b=r(34);b.Ub=!1;b.Yb=!1;b.Ad=!1;b.qa=C.jd(C.Wc);b.god_rays_intensity=a;v(b,k);b.Gc=!0;return b};
f.BO=function(a,k,b,h){var c=r(35);c.enqueue=!1;c.Ub=!1;c.Yb=!1;c.Ad=!1;var d=C.jd(C.Wc);d.width=h;d.height=h;c.qa=d;c.sh=y._5();v(c,k);c.we=new Float32Array([1,1,1]);c.Fe=new Float32Array([1,1,1]);c.Rg=1;c.Sl.set(b.Sl);c.procedural_skydome=b.procedural_skydome;c.use_as_environment_lighting=b.use_as_environment_lighting;c.rayleigh_brightness=b.rayleigh_brightness;c.mie_brightness=b.mie_brightness;c.spot_brightness=b.spot_brightness;c.scatter_strength=b.scatter_strength;c.rayleigh_strength=b.rayleigh_strength;
c.mie_strength=b.mie_strength;c.rayleigh_collection_power=b.rayleigh_collection_power;c.mie_collection_power=b.mie_collection_power;c.mie_distribution=b.mie_distribution;if(a){c.we.set(a.we);c.Fe.set(a.Fe);c.Rg=a.Rg;if(k=a.Cn)c.Hp.set([k.bE,k.iG,k.KJ,k.JJ]),c.Fp.set(k.color),c.Gp=k.mb,c.qx=k.invert,c.yx=k.rJ,c.ux=k.mJ,c.vx=k.nJ,c.xx=k.pJ,c.wx=k.oJ,c.px=k.cE;c.Kn=a.Kn;c.Ln=a.Ln;c.Mn=a.Mn;c.rx=a.Me}return c};f.rO=function(a,k){var b=r(46);b.enqueue=!1;b.Ub=!1;b.Yb=!1;b.Ad=!1;var c=C.jd(C.Wc);c.width=
k;c.height=k;b.qa=c;b.sh=y._5();v(b,a);return b};f.yO=function(a){var c=r(47);c.enqueue=!1;c.Ub=!1;c.Yb=!1;c.Ad=!1;var b=C.jd(C.Wc);b.width=128;b.height=128;c.qa=b;c.sh=y._5();v(c,a);return c};f.lO=function(){var a=r(48);a.enqueue=!1;a.Ub=!1;a.Yb=!1;a.Ad=!1;var k=C.jd(C.Wc);k.width=512;k.height=512;a.qa=k;return a};f.zz=function(){var a=r(36);a.Ub=!1;a.Yb=!1;a.qa=C.jd(C.Wc);a.Gc=!0;return a};f.EO=function(a,k){var b=r(37);b.Ub=!1;b.Yb=!1;b.fc=a?"HMD":k?"ANAGLYPH":"SIDEBYSIDE";b.qa=C.jd(C.Wc);b.Gc=
!0;return b};f.sO=function(){var a=r(38);a.Ub=!1;a.Yb=!1;a.qa=C.jd(C.Wc);a.Gc=!0;return a};f.jO=function(){var a=r(39);a.Ub=!1;a.Yb=!1;a.qa=C.jd(C.Wc);a.Gc=!0;return a};f.$N=function(){var a=r(45);a.Ub=!1;a.Yb=!1;a.qa=C.jd(C.Wc);a.Gc=!0;return a};f.tO=function(a,k,b,h){var c=r(40);c.Ub=!1;c.Yb=!1;c.no=a;c.mo=k;c.qa=h;v(c,b);c.Gc=!0;return c};f.kO=function(a){var c=r(41);c.Ub=!1;c.Yb=!1;c.qa=C.jd(C.Wc);c.ko=a;c.iu=5;c.Gc=!0;return c};f.fX=function(a){var c=r(42);c.Ub=!1;c.Yb=!1;c.qa=a;c.Gc=!0;return c};
f.$E=function(){var a=r(43);a.enqueue=!1;return a};f.xO=function(){var a=r(44);a.Gc=!0;return a};f.Mx=function(a){switch(a.type){case 0:return"MAIN OPAQUE";case 1:return"MAIN BLEND";case 2:return"MAIN XRAY";case 3:return"MAIN PLANE REFLECT";case 4:return"MAIN CUBE REFLECT";case 5:return"MAIN PLANE REFLECT BLEND";case 6:return"MAIN CUBE REFLECT BLEND";case 7:return"MAIN GLOW";case 8:return"SHADOW CAST";case 9:return"SHADOW RECEIVE";case 10:return"GRASS MAP";case 11:return"POSTPROCESSING ("+a.As.replace(/_/g,
" ")+")";case 13:return"GLOW COMBINE";case 14:return"RESOLVE";case 15:return"COLOR PICKING";case 16:return"COLOR PICKING XRAY";case 17:return"DEBUG VIEW";case 18:return"ANCHOR VISIBILITY";case 19:return"DEPTH PACK";case 20:return"SSAO";case 21:return"SSAO BLUR";case 22:return"ANTIALIASING";case 23:return"SMAA BLENDING WEIGHT CALCULATION";case 24:return"SMAA EDGE DETECTION";case 25:return"SMAA RESOLVE";case 26:return"SMAA NEIGHBORHOOD BLENDING";case 27:return"COMPOSITING";case 28:return"MOTION BLUR";
case 29:return"COC";case 30:return"DOF";case 31:return"OUTLINE MASK";case 32:return"OUTLINE";case 33:return"GOD RAYS";case 34:return"GOD RAYS COMBINE";case 35:return"SKY";case 46:return"IRRADIANCE";case 47:return"ROUGHNESS_CONVOLUTION";case 48:return"PRE-COMPUTE_BRDF";case 36:return"COPY";case 37:return"STEREO";case 38:return"LUMINANCE";case 39:return"AVERAGE LUMINANCE";case 40:return"LUMINANCE TRUNCED";case 41:return"BLOOM";case 42:return"VELOCITY";case 44:return"PERFORMANCE";case 43:return"SINK";
case 45:return"RESIZE";default:return"UNKNOWN"}};f.zd=function(a,k){for(var b=k.fb,c=b.ec,d=b.Yf,l=0;l<a.vb.length;l++){var m=a.vb[l].jb,f=m.indexOf(k);if(-1!=f&&(m.splice(f,1),!m.length)){a.vb.splice(l,1);break}}l=a.Ob?b.Yd:0;a:{m=a.vb;for(f=0;f<m.length;f++){var r=m[f];if(r.ec==c&&r.Yf==d&&r.Yd==l&&r.ek==b.ek){m=r;break a}}m=null}m?m.jb.push(k):(a.vb.push({ec:c,jb:[k],Yf:d,Yd:l,ek:b.ek,Ec:!0,Qk:Infinity}),a.ms=!0)};f.cj=function(a,k,b){k={Ec:!0,Lz:[!0,!0,!0,!0,!0,!0],$g:k,fb:a,Ft:b||null,Qv:null,
Qk:Infinity};a.Uf&&a.$a.Ke&&(b=a.$a.Ke,k.Qv={UR:new Float32Array(b.length),VR:new Float32Array(b.length),WO:new Float32Array(b.length/3),LJ:new Float32Array(3),FM:d.m(a.Xb.Bf)});return k};f.rP=function(a,k,b){for(var c=0;c<a.vb.length;c++)for(var d=0;d<a.vb[c].jb.length;d++)if(a.vb[c].jb[d].fb==k&&a.vb[c].jb[d].ka==b)return!0;return!1};f.$T=function(a){a.vb.sort(z);a.ms=!1}});w.a=f},function(D,w,f){D=f(0);var N=f(38),U=f(5),n=f(16),y=f(25),d=f(14),m=f(4),C=f(59),v=f(15),r=f(31),p=f(20),z=f(57),a=
f(74),H=f(52),k=f(9),c=f(47),l=f(19),b=f(1),h=f(64),G=f(8),ka=f(10),u=f(11),E=f(23),R=f(17),O=f(18),L=f(13),B=f(6),Y=f(2),K=f(3),ha=f(56),T=f(55),V=f(22),A=f(29),aa=f(58);f=Object(D.a)("__objects",function(f,P){function q(a){var g=a.Aa;a=a.ka;for(var b=0;b<g.length;b++){var e=g[b].Bb;e.sa.outline&&a.mj&&Ba.TS(e)}}function J(a){a.ka.mj=0;a=Ja.indexOf(a);-1!=a&&Ja.splice(a,1)}function I(a){if(a.Do)for(var g=a.Aa,b=0;b<g.length;b++)Ba.cJ(g[b].Bb,a)}function t(a,g){a=a.Aa;for(var b=g.Aa,c=0;c<a.length;c++){for(var h=
!1,k=0;k<b.length;k++)if(a[c].Bb==b[k].Bb){h=!0;break}h||e(g,a[c].Bb)&&na.Fq(g,a[c].Bb)}}function e(a,g){return!g.GD&&"SPEAKER"==a.type||!g.UL&&"LAMP"==a.type?!1:!0}function ma(a){var g=a.b4w_do_not_batch,b=a.b4w_collision,e=a.b4w_vehicle,c=a.b4w_floating,h=a.b4w_character,k=xa.JQ(a),d=qa.gE(a),F=0<a.data.b4w_shape_keys.length,q=a.b4w_dynamic_geometry,l=ja(a);if(!(g=ua.fE(a)||g||b||e||F||c||k||h||d||q))a:{a=a.data;for(g=0;g<a.materials.length;g++)if(b=a.materials[g],b.Sa.fj||b.dj||ta(b.ne)){g=!0;
break a}g=!1}return g||l}function ja(a){var g=!1,b=a.constraints.length;if(b){var e=null;for(--b;0<=b;b--){var c=a.constraints[b];if("LOCKED_TRACK"!=c.type||"REFLECTION PLANE"!=c.name){e=c;break}}if(!e||!e.target)return!1;a=e.target;e=a.type;if(a.parent)return e=a.parent.type,g="MESH"==e?g||ma(a.parent):"EMPTY"==e?g||pa(a.parent):!0;g="MESH"==e?g||ma(a):"EMPTY"==e?g||pa(a):!0}return g}function pa(a){var g=qa.gE(a),b=a.b4w_do_not_batch,e=!!a.b4w_anchor,c=ja(a);return ua.fE(a)||g||b||e||c}function ta(a){if(!a)return!1;
a=a.nodes;for(var g=0;g<a.length;g++){var b=a[g];if("VECT_TRANSFORM"==b.type){var e=b.convert_from,c=b.convert_to,h=b.outputs[0];if(!(!h.is_linked||"WORLD"==e&&"CAMERA"==c||"CAMERA"==e&&"WORLD"==c||"OBJECT"==e&&"OBJECT"==c))return!0}if("NORMAL_MAP"==b.type&&(e=b.space,h=b.outputs[0],h.is_linked&&("OBJECT"==e||"BLENDER_OBJECT"==e))||"TEX_COORD"==b.type&&b.outputs[3].is_linked||"OBJECT_INFO"==b.type&&(h=b.outputs[1],e=b.outputs[3],b.outputs[0].is_linked||h.is_linked||e.is_linked))return!0}return!1}
function w(a){if(ea(a,fa.ALL,!1,-1)){for(var g=1,b;;){b="."+(3>String(g).length?("000"+String(g)).slice(-3):String(g));if(!ea(a+b,fa.ALL,!1,-1))break;g++}Fa.error('Object "'+a+'" already exists. Name was replaced by "'+a+b+'".');return b}return""}function M(a,g,b){g=fa[g]||[];for(var e=[],c=0;c<g.length;c++){var h=g[c];if(h.ka.Rd==b||-1==b)for(var k=h.Aa,d=0;d<k.length;d++)k[d].Bb==a&&e.push(h)}return e}function oa(a,g){a=fa[a]||[];if(-1==g)return a;for(var b=[],e=0;e<a.length;e++){var c=a[e];c.ka.Rd==
g&&b.push(c)}return b}function ca(a,g,b,e){for(var c=0;c<a.Aa.length;c++)for(var h=a.Aa[c].Ia,k=0;k<h.length;k++){var d=h[k];d.$a&&(d.$a.rh=g);d.rh=g;d.ec&&(d.ec.rh=b);la.lT(e)}}function ea(a,g,b,e,c){for(var h=null,k=0;k<g.length;k++){var d=g[k];if(!((b?d.oe:d.name)!=a||d.ka.Rd!=e&&-1!=e||c&&d.ul||(h=d,na.get_dg_parent(h))))break}return h}function Da(a){fa.ALL.push(a);fa[a.type]||(fa[a.type]=[]);fa[a.type].push(a);var g=a.ka.Gd;if(null!=g)for(var b=0;b<hb.length;b++){var e=hb[b];e.ka.Gd==g&&e.zn.push(a)}}
function S(a,g,b){if(!g.dk)return!0;a=a.xl;if(a.Vi!=a.Df)if(a.st){var e=Y._50(a.Vi-a.Df);a.Df+=e*Za.cQ()/.4;a.Df=Y.M(a.Df,0,1)}else a.Df=a.Vi;e="STATIC"==g.type?g.fs:K.add(g.Ye.Da,g.nw,eb);b=K.dist(e,b);0==a.Qo?(e=Math.max(g.Wg-a.Po/2,0),g=g.Vg+a.Oo/2):-1==a.Qo?(e=g.Wg+a.Po/2,g=g.Vg+a.Oo/2):(e=Math.max(g.Wg-a.Po/2,0),g=Math.max(g.Vg-a.Oo/2,0));a.Qo=b<e?-1:b<g?0:1;a.Vi=b<e||b>g?0:1;a.su=0==a.Vi?-1:1;Math.abs(b-a.Qw)>Sa.lod_leap_smooth_threshold&&(0==a.Df||1==a.Df)&&(a.Df=a.Vi);a.Qw=b;return 0!=a.Vi||
0!=a.Df}function Na(a,g){ca(a,!0,!1,!0);for(var b=oa("ALL",-1),e=0;e<b.length;e++){var c=b[e];c!=a&&ca(c,!1,!1,!1)}Ba.MH(a,g);for(e=0;e<a.Aa.length;e++)for(c=a.Aa[e].Ia.length-1;0<=c;c--){var h=a.Aa[e].Ia[c];0!=h.Hc.length&&-1==h.Hc.indexOf(g)||na.SH(a.Aa[e],c)}za.eb(a)&&za.remove_object(a);for(e=0;e<b.length;e++)b[e]!=a&&ca(b[e],!0,!0,!0);ua.SO(a,g);g=a.Uk.qb;a.Uk.qb=a;return g}function wa(a,g){a.Uk.qb=g;ca(a,!0,!0,!0)}function X(a,g,b,e){var c=b.Kf.El.indexOf(e);g=a.Sc[a.Kf.El.indexOf(g)];b.Sc[c]=
g;a=g.name;g.name=e;for(e=0;e<b.Sc.length;e++)b.Kf.bn[e]=e!=c;return a}function Ga(a,g,b,e){for(var c=0;c<b.Sc.length;c++)b.Kf.bn[c]=!1;a.Sc[a.Kf.El.indexOf(g)].name=e}function Ha(a,g,b,e,c){for(var h=1;h<a.ka.qg.length;h++)ya.$y(a,a.ka.qg[h].name,a.ka.qg[h].value);if(ua.is_animated(a))for(h=0;h<a.Za.length;h++){var k=a.Za[h];if(k)switch(k.type){case ua.OBJ_ANIM_TYPE_PARTICLES:ua.set_frame(a,ua.bA(a,h),h);break;case ua.OBJ_ANIM_TYPE_MATERIAL:if(k.lp)for(var d=k.lp.length-1;0<=d;d--)-1!=k.lp[d].Hc.indexOf(g)&&
k.lp.splice(d,1)}}e&&la.IA(a,g,function(g){if(g.sb){var b=g.sb.name;if(e[b]){var c=g.sb.qo!=e[b].qo;g.sb=xa.IE(e[b]);c&&xa.set_factor(a,b,g.sb.qo)}}},"PARTICLES");c&&(h=la.Zb(a,g,"MAIN"))&&(h.Qc.set(c.Qc),h.Je=c.Je,h.Wi=c.Wi,h.he.set(c.he),h.Re.set(c.Re),h.Dk=c.Dk,h.tf.set(c.tf),h.rg=c.rg,h.ie=c.ie,h.fe=c.fe,h.Ii=c.Ii,h.nn=c.nn,h.mp=c.mp,h.reflect_factor=c.reflect_factor,h.Nh=c.Nh,h.ii.set(c.ii),h.parallax_scale=c.parallax_scale,h.Rh.set(c.Rh),h.shallow_water_col.set(c.shallow_water_col),h.shallow_water_col_fac=
c.shallow_water_col_fac,h.shore_water_col.set(c.shore_water_col),h.shore_water_col_fac=c.shore_water_col_fac,h.foam_factor=c.foam_factor,h.jm=c.jm,h.pi=c.pi.slice(),h.Ne=c.Ne.slice());la.IA(a,g,function(g){for(var e=0;e<g.bg.length;e++){var c=g.bg[e],F=g.Ua[e];if("IMAGE"==F.source||"ENVIRONMENT"==F.source){var h=Ea.wv(b,c);h&&F.ol!=h.ol&&Ea.IT(a,c,h)}}})}var ua=Object(N.a)(f),Ca=Object(U.a)(f),la=Object(n.a)(f),sa=Object(d.a)(f),ia=Object(m.a)(f),ra=Object(C.a)(f),Q=Object(v.a)(f),Aa=Object(r.a)(f),
ya=Object(p.a)(f),qa=Object(H.a)(f),na=Object(k.a)(f),xa=Object(c.a)(f),za=Object(l.a)(f),Fa=Object(b.a)(f),g=Object(h.a)(f),Ba=Object(ka.a)(f),Va=Object(u.a)(f),Xa=Object(E.a)(f),Ea=Object(R.a)(f),Za=Object(O.a)(f),Ua=Object(L.a)(f),W=Object(T.a)(f),La=Object(V.a)(f),D=Object(A.a)(f),Ya=Object(aa.a)(f),Sa=ia.wa,Ka=ia.Ed,fa={ALL:[]},Pa=0,Wa=0,hb=[],ib=[],Ja=[],eb=new Float32Array(3),bb=new Float32Array(4);P.Ly=0;P.Ky=1;P.qe=2;P.DATA_ID_ALL=-1;P.update=function(a){for(var g=0;g<Ja.length;g++){var b=
Ja[g],e=b,c=a,h=0,k=e.sH;0==k.Xx&&(k.Xx=c);c-=k.Xx;if(k.FB&&c/k.bh>=k.FB)J(e);else{c%=k.bh;if(c<k.qB)switch(k=c/(k.qB/5),c=Math.floor(k),c){case 0:h=(k-c)/2;break;case 1:h=(k-c)/2+.5;break;case 2:h=1;break;case 3:h=1-(k-c)/2;break;case 4:h=.5-(k-c)/2}e.ka.mj=h}b.ka.mj&&q(b)}if(a=fa.ARMATURE)for(g=0;g<a.length;g++)b=a[g],b.hB&&(Ua.Ea(b),b.hB=!1)};P.set_outline_intensity=function(a,g){a.ka.mj=g;q(a)};P.apply_outline_anim=function(a,g,b,e){var c=a.sH;c.Xx=0;c.qB=g;c.bh=b;c.FB=e;-1==Ja.indexOf(a)&&Ja.push(a)};
P.clear_outline_anim=J;P.VE=function(a,g){var b=na.ro(g?"%meta_world%"+a.name:a.name,g?"WORLD":a.type,g?"%meta_world%"+a.name:a.origin_name);if("MESH"==b.type)for(var e=0;e<a.data.materials.length;e++)b.Sc.push(a.data.materials[e]);for(e=0;e<a.re.length;e++)na.Fq(b,a.re[e]);a.qb=b;if(g)b.nd=a.uuid,b.ul=!1,b.Lm=a.eo,b.is_dynamic=a.Dj,b.ka=na.Gm(b.type),b.qt=a.b4w_use_default_animation,b.um=ua.Yy(a.b4w_anim_behavior);else{b.nd=a.uuid;b.ul=!1;b.Lm=a.eo;b.is_dynamic=a.Dj;b.Ur=a.FD||!1;b.mg=a.b4w_vehicle;
b.is_character=a.b4w_character;b.dn=a.b4w_floating;b.Jn=a.b4w_collision;b.Rb=a.b4w_collision_id;b.yu=a.b4w_correct_bounding_offset;g=a.game;b.Fd={tk:g.physics_type,Ai:g.use_ghost,sJ:g.use_sleep,mf:g.mass,yt:g.velocity_min,xt:g.velocity_max,nr:g.damping,Ls:g.rotation_damping,ER:g.lock_location_x,FR:g.lock_location_y,GR:g.lock_location_z,HR:g.lock_rotation_x,IR:g.lock_rotation_y,JR:g.lock_rotation_z,$e:g.collision_margin,Ze:g.collision_group,af:g.collision_mask,KC:g.use_collision_bounds,uu:g.collision_bounds_type,
aq:g.use_collision_compound};if(g=a.b4w_vehicle_settings)b.xg={name:g.name,og:g.part,uU:g.suspension_rest_length,nC:g.suspension_compression,pC:g.suspension_stiffness,oC:g.suspension_damping,TC:g.wheel_friction,LB:g.roll_influence,VA:g.max_suspension_travel_cm,Fr:g.force_max,Tq:g.brake_max,Pp:g.steering_max,bp:g.max_speed_angle,rr:g.delta_tach_angle,$s:g.speed_ratio,bt:g.steering_ratio,Tr:g.inverse_control,Pm:g.floating_factor,Rn:g.water_lin_damp,Sn:g.water_rot_damp,KI:g.synchronize_position};if(g=
a.b4w_floating_settings)b.Fo={name:g.name,og:g.part,Pm:g.floating_factor,Rn:g.water_lin_damp,Sn:g.water_rot_damp,KI:g.synchronize_position};if(g=a.b4w_character_settings)b.qE={GV:g.walk_speed,$S:g.run_speed,nU:g.step_height,lR:g.jump_strength,JV:g.waterline};for(g=0;g<a.constraints.length;g++)e=a.constraints[g],"RIGID_BODY_JOINT"==e.type&&b.xB.push({target:e.target.qb,uS:e.pivot_type,vS:e.pivot_x,wS:e.pivot_y,xS:e.pivot_z,Cb:e.axis_x,Db:e.axis_y,Eb:e.axis_z,uV:e.use_limit_x,vV:e.use_limit_y,wV:e.use_limit_z,
qV:e.use_angular_limit_x,rV:e.use_angular_limit_y,sV:e.use_angular_limit_z,wR:e.limit_max_x,xR:e.limit_max_y,yR:e.limit_max_z,zR:e.limit_min_x,AR:e.limit_min_y,BR:e.limit_min_z,qR:e.limit_angle_max_x,rR:e.limit_angle_max_y,sR:e.limit_angle_max_z,tR:e.limit_angle_min_x,uR:e.limit_angle_min_y,vR:e.limit_angle_min_z});g=b.ka=na.Gm("MESH"===b.type?b.is_dynamic?"DYNAMIC":"STATIC":b.type);if(a.parent){if(b.parent=a.parent.qb,"BONE"==a.parent_type&&"ARMATURE"==a.parent.type&&(b.qs=a.parent_bone),a.pinverse_tsr)if(9===
a.pinverse_tsr.length)b.ts=B.a(a.pinverse_tsr,B.b());else{b.ts=B.b();e=K.set(a.pinverse_tsr[0],a.pinverse_tsr[1],a.pinverse_tsr[2],eb);var c=a.pinverse_tsr[3],h=G.set(a.pinverse_tsr[4],a.pinverse_tsr[5],a.pinverse_tsr[6],a.pinverse_tsr[7],bb);B.t(e,c,h,b.ts)}}else a.dg_parent&&(b.parent=a.dg_parent.qb,b.Jl=!0);e=a.location;c=a.scale;Y._29(a.rotation_quaternion,bb);Ua.set_translation(b,e);Ua.set_rotation(b,bb);Ua.set_scale(b,c);b.qt=a.b4w_use_default_animation;b.um=ua.Yy(a.b4w_anim_behavior);a.b4w_object_tags&&
(b.sw={title:a.b4w_object_tags.title,description:a.b4w_object_tags.description,category:a.b4w_object_tags.category});b.Eu=a.b4w_custom_prop;a.b4w_viewport_alignment&&(b.sy={YL:a.b4w_viewport_alignment.alignment,distance:a.b4w_viewport_alignment.distance});g.hide=a.b4w_hidden_on_load;g.gG=a.b4w_hide_chldr_on_load;switch(a.type){case "ARMATURE":ha.e(a,b);e=g.Mg;c=ua.UM(e);a.b4w_animation_mixing?(g.ye=new Float32Array(c.uc),g.qf=new Float32Array(c.uc),g.De=new Float32Array(c.trans),g.wf=new Float32Array(c.trans)):
(g.ye=c.uc,g.qf=c.uc,g.De=c.trans,g.wf=c.trans);for(var k in e)h=e[k],1==h.qu.length&&ha.d(h,!0,c.trans,c.uc);g.ys=c;g.lg=0;g.Gj=a.b4w_animation_mixing;break;case "MESH":g.Jj=la.EM(a.data.b4w_boundings.bb);b.qG=a.data.is_boundings_overridden;g.cf=a.b4w_do_not_render;g.Ol=Ka.outlining_overview_mode||a.b4w_selectable;g.Hw=a.b4w_selectable;g.Ed=Ka.outlining_overview_mode||a.b4w_outlining;g.Gw=a.b4w_outlining;g.Iw=Ka.outlining_overview_mode||a.b4w_outline_on_select;g.ph=a.b4w_billboard;g.Nq=a.b4w_pres_glob_orientation;
g.Pq="BASIC";g.Oq="SPHERICAL"==a.b4w_billboard_geometry;k=g.lj;k.Fl=a.b4w_outline_settings.outline_duration;k.Gl=a.b4w_outline_settings.outline_period;k.Hl=a.b4w_outline_settings.outline_relapses;g.Ol&&(g.al=Aa.GF(Pa),Pa++);for(k=0;k<a.data.b4w_vertex_anim.length;k++)e=a.data.b4w_vertex_anim[k],b.Ld.push({name:e.name,rb:e.frame_start,$b:e.frame_end,RW:e.averaging,SW:e.averaging_interval,ZL:e.allow_nla});b.ka.Ld=b.Ld.length?!0:!1;"MESH"!=a.type&&Ca.va("Wrong object type: "+a.name);k=b.ka;if(a.data.b4w_shape_keys.length)for(k.Rf=
!0,e=0;e<a.data.b4w_shape_keys.length;e++)c={},c.value=a.data.b4w_shape_keys[e].value,c.name=a.data.b4w_shape_keys[e].name,k.qg.push(c);else k.Rf=!1;g.Of=a.b4w_shadow_cast;g.Be=a.b4w_shadow_receive;g.sf=a.b4w_shadow_cast_only&&g.Of;g.Pe=a.b4w_reflexible;g.ze=a.b4w_reflexible_only&&g.Pe;g.Hd=a.b4w_reflective;g.Mh=a.b4w_reflection_type;if(!g.Hd)for(k=b.Sc,e=0;e<k.length;e++)c=k[e],!c.jh||-1==c.ne.Cq.indexOf("BSDF_GLOSSY")&&-1==c.ne.Cq.indexOf("BSDF_DIFFUSE")&&-1==c.ne.Cq.indexOf("BSDF_PRINCIPLED")||
(b.ka.Hd=!0,b.ka.Mh="PBR");g.Ng=a.b4w_caustics;if(g.yf=a.b4w_wind_bending)g.Vn=a.b4w_wind_bending_angle,k=la.GJ(Y.T(a.b4w_wind_bending_angle),g.Jj,a.scale[0]),g.Cg=k,g.Dg=a.b4w_wind_bending_freq,g.ig=a.b4w_detail_bending_freq,g.hg=a.b4w_detail_bending_amp,g.cg=a.b4w_branch_bending_amp,g.kk=a.b4w_main_bend_stiffness_col,k=a.b4w_detail_bend_colors,g.Ef.NA=k.leaves_stiffness_col,g.Ef.MA=k.leaves_phase_col,g.Ef.rB=k.overall_stiffness_col;g.df=a.b4w_dynamic_geometry;if(g.df)for(b.Uk=a,k=0;k<b.Sc.length;k++)b.Kf.El.push(b.Sc[k].name),
b.Kf.bn.push(!1);k=b.Sc[0];g.ve=k.Fd.ve;g.th=k.Fd.th;g.Wg=0;g.Vg=na.Ny;g.nj=a.pass_index;break;case "LINE":g.gb=y.w();g.jc=y.y();g.ai=y.w();g.Xk=y.y();break;case "CAMERA":sa.YM(a,b);sa.vM(b);break;case "LAMP":z.a(a,b);break;case "SPEAKER":b.Ra=Xa.aO();g=!1;for(k=0;k<b.Aa.length;k++)if(b.Aa[k].Bb.yd){g=!0;break}g&&Xa.dy(a,b);break;case "EMPTY":k=y.w(),g.gb=k,k=y.A(),g.Xc=k,a.field&&(b.Do={type:a.field.type,EI:a.field.strength}),a.b4w_anchor&&(b.anchor={type:a.b4w_anchor.type,yo:a.b4w_anchor.detect_visibility,
fl:a.b4w_anchor.element_id,SR:a.b4w_anchor.max_width})}}Da(b);return b};P.XU=function(a,g){var b=g.ka;if("MESH"==g.type){var e=ua.PF(a);if(e){var c=e.qb,h=c.ka.ys,k=g.ka,d=a.data;g.au=c;d=d.vertex_groups;if(d.length){c=c.ka.Mg;var F=0,q={};for(m in c){var l=Y._19("name",m,d);l&&(q[m]={xJ:l.index,Ni:c[m].Ni,Hz:F++})}k.Oi=q;var m=F;d=ua.UF();k.li=m;m>2*d?(k.vl=!1,Fa.error('too many bones for "'+a.name+'" / '+k.li+" bones (max "+d+" with blending, "+2*d+" without blending). Skinning will be disabled.")):
k.vl=!0}h=ua.lP(h.trans,h.uc,b.Oi);e.b4w_animation_mixing?(b.ye=new Float32Array(h.uc),b.qf=new Float32Array(h.uc),b.De=new Float32Array(h.trans),b.wf=new Float32Array(h.trans)):(b.ye=h.uc,b.qf=h.uc,b.De=h.trans,b.wf=h.trans);b.jo=new Float32Array(4);b.Gq=G.create();b.ys=h;b.lg=0}if(b.Hd)if(b=g.ka,"CUBE"==b.Mh)b.Qd=Wa++,ib.push(g);else if("PLANE"==b.Mh){a:{a=a.constraints;for(e=0;e<a.length;e++)if(h=a[e],"LOCKED_TRACK"==h.type&&"REFLECTION PLANE"==h.name){if(h.target&&h.target.qb){a=h.target.qb;break a}Fa.warn('Reflection plane target for object: "'+
g.name+"\" is not present on the scene. Using object's Z-axis.")}a=null}a||(a=Aa.mt("%reflection%"),a=na.ro(a,"EMPTY"),e=na.Gm("EMPTY"),e.Rd=g.ka.Rd,a.ka=e,t(g,a),ra.PD(a,g,[0,0,0],null,1),Da(a));e=null;for(h=0;h<hb.length;h++)if(hb[h]==a){e=h;break}null==e&&(e=hb.length,hb.push(a));a.ka.Gd=e;b.Gd=e;a.zn.push(g)}}};P.QU=I;P.DU=function(a){if(0<=a.ka.Gd)for(var g=0;g<a.Aa.length;g++){for(var b=a.Aa[g].Bb.sa.Ya,e=0;e<hb.length;e++){var c=hb[e];if(c.ka.Gd==a.ka.Gd){var h=c.zn.indexOf(a);-1<h&&c.zn.splice(h,
1);var k=[];D.Na(b,function(a,g){g.type!=Va.de&&g.type!=Va.Ue||g.wp!=c||k.push(g)});for(h=0;h<k.length;h++){var d=k[h];D.rf(b,D.eA(b,d));Ba.HE(d)}D.$q(b)}}a.Aa[g].Bb.sa.rj=Ya.xz(b)}};P.CU=function(a){if(0<=a.ka.Qd)for(var g=0;g<a.Aa.length;g++){for(var b=a.Aa[g].Bb.sa.Ya,e=0;e<ib.length;e++){var c=ib[e];if(c.ka.Qd==a.ka.Qd){var h=[];D.Na(b,function(a,g){g.type!=Va.xd&&g.type!=Va.Ge||g.wp!=c||h.push(g)});for(var k=0;k<h.length;k++){var d=h[k];D.rf(b,D.eA(b,d));Ba.HE(d)}D.$q(b)}}a.Aa[g].Bb.sa.rj=Ya.xz(b)}};
P.cX=t;P.fN=e;P.YU=function(a){for(var g=0;g<a.length;g++){var b=a[g];!b.ka||"DYNAMIC"!=b.ka.type&&"CAMERA"!=b.ka.type||Ua.Ea(b);b.qt&&ua.pH(b)&&(ua.apply_def(b),b.Za.length&&ua.play(b,null,ua.SLOT_ALL))}};P.hE=function(a){if(a.b4w_hidden_on_load||a.dg_parent&&a.dg_parent.Dj||a.parent&&a.parent.Dj)return!0;switch(a.type){case "MESH":return ma(a);case "EMPTY":return pa(a);default:return!0}};P.get_meta_tags=function(a){return Y.O(a.sw)};P.get_custom_prop=function(a){return a.Eu};P.cleanup=function(){Wa=
Pa=0;hb.length=0;ib.length=0;Ja.length=0;fa={ALL:[]}};P.copy=function(g,b,e){var c=na.get_dg_parent(g);c=c?na.HF(c.name,b):b;var h=w(c);b=na.ro(c+h,g.type,b+h);b.ul=g.ul;b.Uk=g.Uk;b.Kf.El=na.ir(g.Kf.El);b.Kf.bn=na.ir(g.Kf.bn);b.is_dynamic=g.is_dynamic;b.Ur=g.Ur;b.qt=g.qt;b.Lm=g.Lm;b.ka=na.oz(g.ka);b.ka.dk=!1;b.sw=na.jr(g.sw);b.Eu=na.jr(g.Eu);t(g,b);b.fo=na.ir(g.fo);b.parent=na.ir(g.parent);b.Jl=g.Jl;b.qs=g.qs;b.Ld=na.ir(g.Ld);b.um=g.um;!g.xa||g.mg||g.is_character||g.dn||(b.Jn=g.Jn,b.xa=null);b.Rb=
g.Rb;b.yu=g.yu;b.Fd=na.jr(g.Fd);c=[];for(h=0;h<g.Aa.length;h++){var k=b.Aa[h],d=g.Aa[h].Ia;if(e){for(var q=k.Ia,F=0;F<d.length;F++)if(!d[F].xh){var l=na.jr(d[F]);l.$a=ya.tN(d[F].$a);na.Ig(b,k.Bb,l);c.push(d[F].$a)}for(F=0;F<d.length;F++)if(d[F].xh){l=na.jr(d[F]);na.Ig(b,k.Bb,l);for(var m=0;m<c.length;m++)c[m]==d[F].$a&&(l.$a=q[m].$a)}for(F=0;F<q.length;F++)q[F].$a&&ya.HC(q[F].$a),Sa.Wy&&q[F].$a&&La.yM(q[F]),q[F].Dl=la.LP(q[F],b.ka,b.nd),la.GU(q[F]);Ea.TT(q)}else for(F=0;F<d.length;F++)na.Ig(b,k.Bb,
d[F])}for(c=0;c<g.Sc.length;c++)b.Sc.push(a.a(g.Sc[c]));na.QB(b,!1);Da(b);b.ka.EA=!0;b.ka.Tv=e;b.ka.al=Aa.GF(Pa);Pa++;return b};P.QF=function(a,g){var b=[],e=a.animation_data,c=a.data?a.data.animation_data:null;e&&e.action&&(e=e.action,(e.sa.type==ua.OBJ_ANIM_TYPE_OBJECT||e.sa.type==ua.OBJ_ANIM_TYPE_ARMATURE&&"ARMATURE"==a.type||e.sa.type==ua.PK&&"LAMP"==a.type||e.sa.type==ua.OK&&g)&&b.push(ua.lG(null,e)));c&&c.action&&("SPEAKER"==a.type||"LAMP"==a.type)&&b.push(ua.lG(null,c.action));"MESH"==a.type&&
b.push.apply(b,ua.RP(a));g&&b.push.apply(b,ua.SP(a));return b};P.update_boundings=function(a){for(var b=a.ka,e=null,c=a.Aa[0].Ia,h=0;h<c.length;h++){var k=c[h],d=a.Aa[0].Lg[h];if(k.$a&&d.ag&&d.Bf){var q=ya.Ko("a_position");if(q=ya.jA(k.$a.Pc,q)){var F=k.$a.mc.a_position.offset,l=k.$a.mc.a_position.length+F;la.SU(k,q.subarray(F,l));na.jJ(k,b.na,d);"MAIN"==k.type&&(e?y.D(e,k.Xb.Bf):e=y.n(k.Xb.Bf))}}}e=e||y.w();if(b.ph)na.fJ(a,e);else{d=[];for(h=0;h<c.length;h++)if(k=c[h],"MAIN"==k.type&&(q=ya.Ko("a_position"),
q=ya.jA(k.$a.Pc,q)))k=c[h].$a.mc,F=k.a_position.offset,l=k.a_position.length+F,d.push(q.subarray(F,l));na.cV(a,e,d)}if(Sa.debug_view)for(h=0;h<c.length;h++)if("DEBUG_VIEW"===c[h].type&&c[h].Uj){a=b.jc;b=g.Xz(1,a.Da);ya.RH(b,[a.Cb[0],a.Db[1],a.Eb[2]],a.Da);ya.Kx(b,1,!0);b.hb.a_polyindex=ya.$u(b);la.ZI(c[h],b);break}};P.tc=M;P.YF=function(a,g,b){g=fa[g]||[];for(var e=[],c=0;c<g.length;c++){var h=g[c];if(!(h.ka.Rd!=b&&-1!=b||h.ul))for(var k=h.Aa,d=0;d<k.length;d++)k[d].Bb==a&&e.push(h)}return e};P.get_all_objects=
oa;P.get_first_character=function(a){var g=fa.MESH;if(g)for(var b=0;b<g.length;b++){var e=g[b];if(za.dG(e))for(var c=e.Aa,h=0;h<c.length;h++)if(c[h].Bb==a)return e}return null};P.pp=ca;P.get_selectable_objects=function(){var a=[],g=fa.MESH;if(g)for(var b=0;b<g.length;b++){var e=g[b];e.ka.Ol&&!e.ul&&a.push(e)}return a};P.get_outlining_objects=function(){var a=[],g=fa.MESH;if(g)for(var b=0;b<g.length;b++){var e=g[b];e.ka.Ed&&!e.ul&&a.push(e)}return a};P.Cd=function(a,g,b,e){var c=null,h=fa.ALL;switch(a){case P.Ly:c=
ea(g,h,!0,b,e);break;case P.Ky:a:{for(a=0;a<h.length;a++)if(c=h[a],c.oe==b&&(c.ka.Rd==e||-1==e)){var k=na.get_dg_parent(c);if(k&&k.oe==g)break a}c=null}break;case P.qe:a:{for(e=0;e<h.length;e++){a=h[e];c=g.length-1;k=a;for(var d=!0;0<=c&&d;)d=k&&k.oe==g[c]&&(k.ka.Rd==b||-1==b),k&&(k=na.get_dg_parent(k)),c--;if(d&&!k){c=a;break a}}c=null}}return c};P.get_world_by_name=function(a,g){return ea("%meta_world%"+a,fa.WORLD,!0,g)};P.xv=function(a){return a.oe.replace("%meta_world%","")};P.pick_object=function(a,
g){var b=Ba.Ah();if(!b)return Fa.error("No active scene"),null;var e=Ba.yc(b,Va.mh);e&&e.enable_hmd_stereo&&(g=Q.get_canvas(),a=g.clientHeight/2,g=g.clientWidth/2);if(e=W.sS(a,g))return e;a=Ba.tS(b,a,g);if(!a)return null;b=M(b,"MESH",-1);for(g=0;g<b.length;g++){e=b[g].ka;var c=e.al;if(c&&3>Math.abs(255*c[0]-a[0])&&3>Math.abs(255*c[1]-a[1])&&3>Math.abs(255*c[2]-a[2]))return e.Ed&&e.Iw&&(Ka.outlining_overview_mode?P.apply_outline_anim(b[g],Ka.Fl,Ka.Gl,Ka.Hl):(a=e.lj,P.apply_outline_anim(b[g],a.Fl,a.Gl,
a.Hl))),b[g]}return null};P.set_wind_params=function(a,g){a=M(a,"EMPTY",-1);for(var b=0;b<a.length;b++){var e=a[b];if(e.Do&&"WIND"===e.Do.type){var c=e;break}}if(!c)return Fa.error("There is no wind on the scene"),0;"number"==typeof g.wind_dir&&(a=Y.T(g.wind_dir),K.set(Math.sin(a),-Math.cos(a),0,eb),Y.U(eb,Y.f,bb),Ua.set_rotation(c,bb));"number"==typeof g.wind_strength&&(c.Do.EI=g.wind_strength);I(c)};P.remove_object=function(a){ra.gN(a)&&ra.remove(a);var g=fa.ALL,b=fa[a.type],e=g.indexOf(a);a=b.indexOf(a);
-1!=e&&g.splice(e,1);-1!=a&&b.splice(a,1)};P.gS=Da;P.sY=function(a){return fa[a.type]&&-1<fa[a.type].indexOf(a)};P.TU=function(a,g){if(a.ka.dk){var b=a.ka,e=g.sa;if(b.dk)for(var c=Ua.get_translation(g.Hi,eb),h=0;h<a.Aa.length;h++)if(a.Aa[h].Bb==g)for(var k=0;k<a.Aa[h].Ia.length;k++){var d=a.Aa[h].Ia[k],F=d.xl,q="SHADOW"==d.type&&"RECEIVE"==d.fc&&!Sa.yp;Sa.lod_smooth_transitions&&!q&&(q=e.KR,"ALL"==q||"NON-OPAQUE"==q&&(d.Ob||d.Ej))&&(F.st=!0);S(d,b,c);F.Df=F.Vi;F.Po=Math.min(e.QG,.6*b.ik);F.Oo=Math.min(e.QG,
.6*b.jk)}}};P.UU=S;P.wT=function(a){var g=a.ka,b=g.Cg,e=g.Dg,c=g.ig,h=g.hg,k=g.cg;a=a.Aa;for(g=0;g<a.length;g++)for(var d=a[g].Ia,F=0;F<d.length;F++){var q=d[F].$a,l=q.mc,t=l.au_wind_bending_amp,m=l.au_wind_bending_freq,f=l.au_detail_bending_amp,A=l.au_detail_bending_freq;l=l.au_branch_bending_amp;if(m){var u=Array.apply(null,Array(m.length)).map(function(){return e});ya.nt(q,ya.ao,new Float32Array(u),m.offset)}t&&(u=Array.apply(null,Array(t.length)).map(function(){return b}),ya.nt(q,ya.ao,new Float32Array(u),
t.offset));f&&(u=Array.apply(null,Array(f.length)).map(function(){return h}),ya.nt(q,ya.ao,new Float32Array(u),f.offset));A&&(u=Array.apply(null,Array(A.length)).map(function(){return c}),ya.nt(q,ya.ao,new Float32Array(u),A.offset));l&&(u=Array.apply(null,Array(l.length)).map(function(){return k}),ya.nt(q,ya.ao,new Float32Array(u),l.offset))}};P.inherit_material=function(a,g,b,e){if(a.ka.df&&b.ka.df){var c=la.Zb(a,g,"MAIN"),h=null;la.IA(b,e,function(a){h||(h={});a.sb&&(h[a.sb.name]=a.sb)},"PARTICLES");
for(var k=Na(b,e),d=X(a,g,b,e),F=Ba.get_active(),q=0;q<b.Aa.length;q++){var l=b.Aa[q].Bb;Ba.set_active(l);var t=M(l,"LAMP",0),m=b.Aa[q].Ia;b.Aa[q].Ia=[];b.Aa[q].Lg=[];la.KF(l,[b.Uk],t,[]);la.zu(b,Ba.rv(l),l);Ba.TD(l,[b]);Ba.append_object(l,b,!1);za.append_object(b,l);for(t=0;t<m.length;t++)na.Ig(b,l,m[t])}Ga(a,g,b,d);wa(b,k);Ha(b,e,a,h,c);Ba.set_active(F)}};P.create_line=function(a){a=a||"";a+=w(a);a=na.ro(a,"LINE");a.ka=na.Gm("EMPTY");a.is_dynamic=!0;la.JF(Ba.Ah(),[a]);Ba.append_object(Ba.Ah(),a);
Da(a);return a};P.create_empty=function(a){a=a||"";a+=w(a);a=na.ro(a,"EMPTY");a.ka=na.Gm("EMPTY");a.is_dynamic=!0;na.Fq(a,Ba.Ah());Da(a);return a};P.KP=function(a,g){var b=g.ka,e=y.n(b.Jj);b.ph?na.fJ(g,e):na.bV(g,e,a.data.b4w_boundings)};P.set_nodemat_value=function(a,g,b,e){for(var c=na.is_world(a),h=!1,k=0;k<a.Aa.length;k++)for(var d=a.Aa[k].Ia,F=0;F<d.length;F++){var q=d[F];if(c||-1!=q.Hc.indexOf(g))h|=la.set_nodemat_value(q,b,e)}h&&c&&Ba.ey(a);return h};P.set_nodemat_rgb=function(a,g,b,e,c,h){for(var k=
na.is_world(a),d=!1,F=0;F<a.Aa.length;F++)for(var q=a.Aa[F].Ia,l=0;l<q.length;l++){var t=q[l];if(k||-1!=t.Hc.indexOf(g))d|=la.set_nodemat_rgb(t,b,e,c,h)}d&&k&&Ba.ey(a);return d};P.get_nodemat_value=function(a,g,b){return la.get_nodemat_value(la.vh(a,g,"MAIN")||la.vh(a,g,"PARTICLES"),b)};P.get_nodemat_rgb=function(a,g,b,e){return la.get_nodemat_rgb(la.vh(a,g,"MAIN")||la.vh(a,g,"PARTICLES"),b,e)}});w.a=f},function(D,w,f){D=f(0);var N=f(25),U=f(14),n=f(59),y=f(57);f(8);var d=f(12),m=f(9),C=f(10),v=f(23),
r=f(6),p=f(2),z=f(3);f=Object(D.a)("__transform",function(a,f){function k(a,b){R.Ch(a)?r.v(b,R.zh(a)):r.v(b,a.ka.na)}function c(a,b){var c=a.ka;R.Ch(a)?(r.r(b,c.na),b=R.mv(a),b=r.p(b,V),r.q(b,c.na,R.zh(a))):r.r(b,c.na)}function l(a,b){R.Ch(a)?r.r(b,R.zh(a)):r.r(b,a.ka.na)}function b(a,b){r.g(a.ka.na,b);return b}function h(a,b){R.Ch(a)?r.g(R.zh(a),b):r.g(a.ka.na,b);return b}function G(a,b){R.Ch(a)?r.a(b,R.zh(a)):r.a(b,a.ka.na)}function H(a,b){R.Ch(a)?r.a(R.zh(a),b):r.a(a.ka.na,b);return b}function u(a){var b=
a.ka,c=a.Aa,h=a.type;R.OU(a,aa);"CAMERA"==h&&E.MU(a);N.h(b.gb,b.na,b.ai);N.k(b.Xc,b.na,b.Ye);for(var k=0;k<c.length;k++)for(var e=c[k].Ia,d=0;d<e.length;d++)L.jJ(e[d],b.na,c[k].Lg[d]);switch(h){case "MESH":a.fH&&r.p(a.ka.na,a.ka.By);if(e=a.au)k=e.ka.na,0!=k[3]&&0!=k[4]&&0!=k[5]?(r.p(k,V),r.q(V,b.na,V),r.l(V,b.jo),r.g(V,b.Gq)):r.l(k,b.jo);b.Gr=!0;break;case "CAMERA":for(k=0;k<c.length;k++)E.NU(a,c[k]);break;case "SPEAKER":Y.eU(a,aa,J);break;case "LAMP":y.g(a)}e=r.j(b.na,K);var l=r.g(b.na,T);for(k=
0;k<c.length;k++)if(d=c[k],d.Sv){var m=d.Bb,f=m.sa;switch(h){case "MESH":b.Of&&B.RB(m);f=d.Tj;null!=b.Qd&&f&&B.bJ(f,e);break;case "EMPTY":O.QU(a);break;case "CAMERA":if(B.get_active()==m&&B.ll(m)==a){B.cT(m);if(f.Id){(f.Id.enable_csm||f.Id.aP)&&B.RB(m);var A=L.kb(a,m).Qa[0];B.hV(A,f.Ya)}Y.CR(m,e,l,aa,J)}break;case "LAMP":B.Zp(a,m)}f=d.oj;A=a.zn;if(A.length)for(d=0;d<f.length;d++){var P=f[d].qa;B.dJ(f[d],e,l);L.eJ(A,P.ad);E.LT(P,B.ll(m))}}b=a.bf;for(k=0;k<b.length;k++)u(b[k]);a=a.uz;for(k=0;k<a.length;k++)b=
a[k],e=b[0],R.KU(e,b[1])}var E=Object(U.a)(a),R=Object(n.a)(a),O=Object(d.a)(a),L=Object(m.a)(a),B=Object(C.a)(a),Y=Object(v.a)(a),K=new Float32Array(3),ha=new Float32Array(3),T=new Float32Array(4),V=r.b(),A=r.b(),aa=0,J=0;f.update=function(a){aa=a;J++};f.set_translation=function(a,b){var c=a.ka;R.Ch(a)?(r.v(b,c.na),b=R.mv(a),b=r.p(b,V),r.q(b,c.na,R.zh(a))):r.v(b,c.na)};f.set_translation_rel=k;f.get_translation=function(a,b){r.j(a.ka.na,b);return b};f.get_translation_rel=function(a,b){R.Ch(a)?r.j(R.zh(a),
b):r.j(a.ka.na,b);return b};f.set_rotation=c;f.set_rotation_rel=l;f.get_rotation=b;f.get_rotation_rel=h;f.set_rotation_euler=function(a,b){b=p.Y(b,T);c(a,b)};f.set_rotation_euler_rel=function(a,b){b=p.Y(b,T);l(a,b)};f.get_rotation_euler=function(a,c){a=b(a,T);return c=p._36(a,c)};f.get_rotation_euler_rel=function(a,b){a=h(a,T);return b=p._36(a,b)};f.set_scale=function(a,b){var c=a.ka;R.Ch(a)?(r.s(b,c.na),b=R.mv(a),b=r.p(b,V),r.q(b,c.na,R.zh(a))):r.s(b,c.na)};f.set_scale_rel=function(a,b){var c=a.ka;
R.Ch(a)?r.s(b,R.zh(a)):r.s(b,c.na)};f.get_scale=function(a,b){return r.i(a.ka.na,b)};f.get_scale_rel=function(a,b){return R.Ch(a)?r.i(R.zh(a),b):r.i(a.ka.na,b)};f.set_tsr=function(a,b){r.a(b,a.ka.na);R.Ch(a)&&(b=R.mv(a),b=r.p(b,V),r.q(b,a.ka.na,R.zh(a)))};f.set_tsr_rel=G;f.get_tsr=function(a,b){return r.a(a.ka.na,b)};f.get_tsr_rel=H;f.get_object_size=function(){var a=z.create();return function(b){var c=b.ka;b=c.Jj;var h=r.i(c.na,a);c=h[0]*(b.max_x-b.min_x);var k=h[1]*(b.max_y-b.min_y);b=h[2]*(b.max_z-
b.min_z);return.5*Math.sqrt(c*c+k*k+b*b)}}();f.get_object_center=function(a,b,c){b?(a=a.ka,z.copy(a.Ye.Da,c)):(a=a.ka,b=a.Jj,c[0]=(b.max_x+b.min_x)/2,c[1]=(b.max_y+b.min_y)/2,c[2]=(b.max_z+b.min_z)/2,r.D(c,a.na,c));return c};f.move_local=function(a,b,c,h){var d=H(a,V),e=K;e[0]=b;e[1]=c;e[2]=h;r.D(e,d,e);k(a,e)};f.MB=function(a,b){var c=H(a,V);b=r.r(b,r.m(A));r.q(c,b,b);G(a,b)};f.Ea=u;f.distance=function(a,b){a=r.j(a.ka.na,K);b=r.j(b.ka.na,ha);return z.dist(a,b)};f.ns=function(a,b){a=r.j(a.ka.na,K);
return z.dist(a,b)}});w.a=f},function(D,w,f){D=f(0);var N=f(5),U=f(25),n=f(15),y=f(21),d=f(42),m=f(9),C=f(1),v=f(8),r=f(10),p=f(11),z=f(13),a=f(6),H=f(2),k=f(3),c=f(7);f=Object(D.a)("__camera",function(l,b){function h(a,g,b,e,c){ya.set_translation(a,g);b&&A(a,g,b);aa(a,e);J(a,c)}function f(a,g,b,e,c,h,k,d){var F=a.ka;ya.set_translation(a,g);F.pivot.set(b);A(a,g,b);aa(a,e);J(a,c);I(a,h);t(a,k);F.use_panning=d}function ka(a,g,b,c,h,k,d,l){var F=a.ka;ya.set_translation(a,g);F.$c.set(b);A(a,g,b);da(a,
c);P(a,h);e(a,k);ma(a,d);F.Xi=l}function u(g){g={type:g,name:"",uI:1,width:0,height:0,Hf:null,Hr:null,wc:null,gg:null,Wb:0,Rc:0,Eo:"VERTICAL",near:0,far:0,left:0,right:0,top:0,bottom:0,Vd:c.create(),na:a.c(),Kc:new Float32Array(16),pq:new Float32Array(16),Bt:{trans:k.create(),angle:0},gc:new Float32Array(16),zg:new Float32Array(16),qy:new Float32Array(16),zB:new Float32Array(16),Oh:new Float32Array(16),direction:new Float32Array(3),Ag:a.c(),ry:a.c(),Fs:a.c(),Ww:a.c(),Ts:a.c(),dof_distance:0,dof_front_start:0,
dof_front_end:0,dof_rear_start:0,dof_rear_end:0,dof_power:0,dof_bokeh_intensity:0,dof_object:null,dof_bokeh:!1,te:!1,dof_on:!1,iw:new Float32Array(3),Um:R(),Ul:0,tg:0,ad:null,Ti:null,mr:null,Bu:new Float32Array(4),sp:new Float32Array(4)};g.Vd[0]=g.Vd[2]=0;g.Vd[1]=g.Vd[3]=0;return g}function E(g,b){var e=u(g.type);e.name=g.name;e.uI=g.uI;e.width=g.width;e.height=g.height;b||(e.Hf=g.Hf,e.Hr=g.Hr,e.wc=g.wc,e.gg=g.gg);e.Wb=g.Wb;e.Eo=g.Eo;e.Rc=g.Rc;e.near=g.near;e.far=g.far;e.left=g.left;e.right=g.right;
e.top=g.top;e.bottom=g.bottom;c.copy(g.Vd,e.Vd);a.a(g.na,e.na);y.copy(g.Kc,e.Kc);y.copy(g.pq,e.pq);e.Bt=H.O(g.Bt);y.copy(g.gc,e.gc);y.copy(g.zg,e.zg);y.copy(g.qy,e.qy);y.copy(g.zB,e.zB);y.copy(g.Oh,e.Oh);e.direction.set(g.direction);a.a(g.Ag,e.Ag);a.a(g.ry,e.ry);a.a(g.Fs,e.Fs);a.a(g.Ww,e.Ww);a.a(g.Ts,e.Ts);e.dof_distance=g.dof_distance;e.dof_front_start=g.dof_front_start;e.dof_front_end=g.dof_front_end;e.dof_rear_start=g.dof_rear_start;e.dof_rear_end=g.dof_rear_end;e.dof_power=g.dof_power;e.dof_bokeh_intensity=
g.dof_bokeh_intensity;e.dof_object=g.dof_object;e.dof_bokeh=g.dof_bokeh;e.te=g.te;e.dof_on=g.dof_on;k.copy(g.iw,e.iw);b=g.Um;var h=e.Um;c.copy(b.left,h.left);c.copy(b.right,h.right);c.copy(b.top,h.top);c.copy(b.bottom,h.bottom);c.copy(b.near,h.near);c.copy(b.far,h.far);e.Ul=g.Ul;e.tg=g.tg;g.ad&&(e.ad=c.clone(g.ad));if(g.Ti){b=g.Ti.length;e.Ti=Array(b);for(h=0;h<b;h++)e.Ti[h]=k.clone(g.Ti[h]);e.mr=new Float32Array(g.mr)}c.copy(g.Bu,e.Bu);c.copy(g.sp,e.sp);return e}function R(){return{left:new Float32Array([0,
0,0,0]),right:new Float32Array([0,0,0,0]),top:new Float32Array([0,0,0,0]),bottom:new Float32Array([0,0,0,0]),near:new Float32Array([0,0,0,0]),far:new Float32Array([0,0,0,0])}}function O(a){switch(a){case "STATIC":return b.MS_STATIC;case "TARGET":return b.MS_TARGET_CONTROLS;case "EYE":return b.MS_EYE_CONTROLS;case "HOVER":return b.MS_HOVER_CONTROLS;default:la.va("Unknown move style")}}function L(a){var g=u(a);if(a==b.Wc)return g;switch(a){case b.qd:ha(g,qa,.1,1E3);break;case b.Xe:ha(g,2.5,.1,1E3);
break;case b.Wf:break;case b.Yh:break;case b.Cj:break;case b.fd:case b.rd:case b.Vf:case b.Af:la.va("Stereo camera may only be created from perspective one");break;default:la.va("Unknown camera type")}return g}function B(a,g,e){a.type!=b.fd&&a.type!=b.rd&&a.type!=b.Vf&&a.type!=b.Af&&la.va("set_stereo_params(): wrong camera type");if(a.type==b.fd||a.type==b.rd)a.Ul=g;a.tg=e;ca(a,!1);if(Q.zb()&&(g=Q.get_active(),a=g.sa.Id))for(g=ia.kb(Q.ll(g),g).Qa,e=0;e<g.length;e++)X(g[e],a)}function Y(a,g,b){var e=
Xa,c=Ea;0<k.dot(g,H.f)?(k.cross(H.d,g,e),k.normalize(e,e)):k.copy(H.f,e);k.cross(g,e,c);var h=H._34(a,H.f,Za),F=H._34(a,H.b,Ua);k.normalize(h,h);k.normalize(F,F);a=-Math.asin(k.dot(h,g));g=k.dot(F,g);h=Math.abs(a)>Math.PI/4?k.scale(F,-H._50(a),W):k.scale(h,-H._50(Math.asin(g)),La);F=Math.atan(Math.abs(k.dot(c,h)/k.dot(e,h)));0<g&&(a=H._50(a)*Math.PI-a);g=F;0>k.dot(e,h)&&(g=Math.PI-g);0>k.dot(c,h)&&(g=2*Math.PI-g);b[0]=g;b[1]=a;return b}function K(a){switch(a.Eo){case "AUTO":return 1<a.Wb?ua(a)?a.Rc/
a.Wb:2*Math.atan(Math.tan(a.Rc/2)/a.Wb):a.Rc;case "HORIZONTAL":return ua(a)?a.Rc/a.Wb:2*Math.atan(Math.tan(a.Rc/2)/a.Wb);case "VERTICAL":return a.Rc}}function ha(a,g,e,c){switch(a.type){case b.qd:case b.fd:case b.rd:a.Rc=g;a.Wb=1;break;case b.Xe:a.Rc=g;a.Wb=1;break;case b.Vf:case b.Af:break;default:la.va("set_frustum(): Unsupported camera type: "+a.type)}a.near=e;a.far=c}function T(a,g){ca(a,!0);var b=Ya,e=Ka;y.invert(a.Kc,e);y.transpose(e,e);c.transformMat4(a.ad,e,b);e=Sa;e[0]=(H._50(b[0])+a.gc[8])/
a.gc[0];e[1]=(H._50(b[1])+a.gc[9])/a.gc[5];e[2]=-1;e[3]=(1+a.gc[10])/a.gc[14];c.scale(b,2/(b[0]*e[0]+b[1]*e[1]+b[2]*e[2]+b[3]*e[3]),b);a.gc[2]=b[0];a.gc[6]=b[1];a.gc[10]=b[2]+1;a.gc[14]=b[3];ea(a);g||Da(a)}function V(a,g,b){b=k.subtract(b,g,Xa);k.length(b)&&(k.normalize(b,b),b=H._48(H.c,b,D),ya.set_rotation(a,b));ya.set_translation(a,g)}function A(a,g,b){var e=a.ka,c=eb(a);V(a,g,b);c?(g=k.copy(e.od,Xa),k.negate(g,g),Ja(a,g,!0)):Ja(a,e.od,!0)}function aa(a,e){var c=a.ka;e?(c.zc=c.zc||{},c.zc.left=
e.left,c.zc.right=e.right,c.zc.$o=e.left,c.zc.zp=e.right,c.zc.camera_space=!!e.camera_space,c=a.ka,!(e=c.zc)||c.cc!=b.MS_EYE_CONTROLS&&c.cc!=b.MS_TARGET_CONTROLS||(a=Pa(a,g),e.camera_space?(e.left+=a[0],e.right+=a[0]):(e.$o-=a[0],e.zp-=a[0]),e.left=H.A(e.left),e.right=H.A(e.right),e.$o=H.A(e.$o),e.zp=H.A(e.zp))):c.zc=null}function J(a,g){var b=a.ka;g?(b.Hb=b.Hb||{},b.Hb.down=g.down,b.Hb.up=g.up,b.Hb.Ao=g.down,b.Hb.Yp=g.up,b.Hb.camera_space=!!g.camera_space,q(a)):b.Hb=null}function P(a,b){var e=a.ka;
b||(b=Pa(a,g),b={down:b[1],up:b[1]});e.Hb=e.Hb||{};e.Hb.down=b.down;e.Hb.up=b.up;q(a);e.rc&&e.Hb&&Kb(a)}function q(a){var e=a.ka,c=e.Hb;if(c)switch(e.cc){case b.MS_EYE_CONTROLS:case b.MS_TARGET_CONTROLS:a=Pa(a,g);c.camera_space?(c.up+=a[1],c.down+=a[1]):(c.Yp-=a[1],c.Ao-=a[1]);c.up=H.B(c.up,-Math.PI,Math.PI);c.down=H.B(c.down,-Math.PI,Math.PI);c.Yp=H.B(c.Yp,-Math.PI,Math.PI);c.Ao=H.B(c.Ao,-Math.PI,Math.PI);break;case b.MS_HOVER_CONTROLS:c.up=H.B(c.up,-Math.PI,Math.PI),c.down=H.B(c.down,-Math.PI,Math.PI),
c.up=H.M(c.up,-Math.PI/2,0),c.down=H.M(c.down,-Math.PI/2,0)}}function da(a,g){var b=a.ka;g||(g=ya.ns(a,b.$c),g={min:g,max:g});b.rc=b.rc||{};b.rc.min=g.min;b.rc.max=g.max;b.rc&&b.Hb&&Kb(a)}function I(a,g){a=a.ka;g?(a.rc=a.rc||{},a.rc.min=g.min,a.rc.max=g.max):a.rc=null}function t(a,g){a=a.ka;g?(a.Oe=a.Oe||{},a.Oe.min_z=g.min_z,a.Oe.max_z=g.max_z):a.Oe=null}function e(a,g){a=a.ka;g?(a.le=a.le||{},a.le.min=g.min,a.le.max=g.max):a.le=null}function ma(a,g){a=a.ka;g?(a.me=a.me||{},a.me.min=g.min,a.me.max=
g.max):a.me=null}function ja(a){var e=a.ka,c=e.cc;if(c===b.MS_TARGET_CONTROLS||c===b.MS_EYE_CONTROLS){if(e.zc){var h=e.zc.left,k=e.zc.right,F=Pa(a,g);(F=c==b.MS_TARGET_CONTROLS?H.H(F[0],h,k):H.H(F[0],k,h))&&(c==b.MS_TARGET_CONTROLS?ta(a,F,0):nb(a,F,0))}e.Hb&&(h=e.Hb.down,k=e.Hb.up,F=Pa(a,g),(F=c==b.MS_TARGET_CONTROLS?H.H(F[1],k,h):H.H(F[1],h,k))&&(c==b.MS_TARGET_CONTROLS?ta(a,0,F):nb(a,0,F)));c===b.MS_TARGET_CONTROLS&&e.rc&&Pb(a)}c===b.MS_TARGET_CONTROLS&&e.Oe&&wb(a);c===b.MS_HOVER_CONTROLS&&(Ia(a),
e=a.ka,c=Pa(a,g)[1],(e=H.H(c,e.Hb.up,e.Hb.down))&&M(a,0,e))}function pa(a,g,b,e){a=Pa(a,Va);e[0]=g-a[0];e[1]=b-a[1];return e}function ta(a,g,b){kb(a,a.ka.pivot,g,b)}function w(a,g,b){g=pa(a,g,b,Ba);ta(a,g[0],g[1])}function M(a,g,b){var e=a.ka;e.Xi||(g=0);kb(a,e.$c,g,b);b&&Kb(a)}function oa(a,g,b){g=pa(a,g,b,Ba);M(a,g[0],g[1])}function ca(a,g){switch(a.type){case b.qd:case b.Wf:y.perspective(K(a),a.Wb,a.near,a.far,a.gc);break;case b.Xe:case b.Yh:var e=K(a),c=e*a.Wb;y.ortho(-c,c,-e,e,a.near,a.far,a.gc);
break;case b.Cj:y.ortho(a.left,a.right,a.bottom,a.top,a.near,a.far,a.gc);break;case b.fd:case b.rd:c=Math.tan(K(a)/2);e=a.near*c;var h=a.Wb*a.Ul*c;a.type==b.fd?(c=h-a.tg/2,h+=a.tg/2):(c=h+a.tg/2,h-=a.tg/2);c=-(a.near/a.Ul*c);h*=a.near/a.Ul;y.frustum(c,h,-e,e,a.near,a.far,a.gc);a.left=c;a.right=h;break;case b.Vf:case b.Af:Q.zb()&&(e=Q.get_active(),(e=Q.yc(e,Aa.mh))&&e.enable_hmd_stereo?(e=Math.tan(a.Vd[1]),c=Math.tan(a.Vd[2]),h=Math.tan(a.Vd[3]),a.top=a.near*Math.tan(a.Vd[0]),a.right=a.near*e,a.bottom=
-a.near*c,a.left=-a.near*h,y.frustum(a.left,a.right,a.bottom,a.top,a.near,a.far,a.gc)):(a.top=a.near*Math.tan(K(a)/2),a.bottom=-a.top,a.right=a.top*a.Wb,a.left=-a.right,y.perspective(K(a),a.Wb,a.near,a.far,a.gc)));break;case b.Wc:return;default:la.va("Wrong camera type: "+a.type)}ea(a);g||Da(a)}function ea(a){y.translate(a.gc,a.Bt.trans,a.gc);y.rotateZ(a.gc,a.Bt.angle,a.gc)}function Da(a){S(a);Na(a);H._0(a.zg,a.Um)}function S(a){y.copy(a.Kc,a.zg);y.multiply(a.gc,a.zg,a.zg);y.invert(a.zg,a.qy)}function Na(a){y.copy(a.Kc,
a.Oh);a.Oh[12]=0;a.Oh[13]=0;a.Oh[14]=0;a.Oh[15]=1;y.multiply(a.gc,a.Oh,a.Oh);y.invert(a.Oh,a.Oh)}function wa(a,g,e,c,h){c||(c=new Float32Array(24));g||(g=a.near);e||(e=a.far);switch(a.type){case b.Wc:la.va("Extraction from NONE camera is not possible");break;case b.qd:case b.Wf:var k=g*Math.tan(K(a)/2);var F=-k;var d=k*a.Wb;var l=-d;var q=e/g*k;var t=-q;var m=q*a.Wb;var f=-m;break;case b.Xe:case b.Yh:F=K(a);l=F*a.Wb;k=q=F;d=m=l;F=t=-F;l=f=-l;break;case b.Cj:k=q=a.top;d=m=a.right;F=t=a.bottom;l=f=
a.left;break;case b.fd:case b.rd:q=g/a.near;k=g*Math.tan(K(a)/2);F=-k;d=a.right*q;l=a.left*q;f=e/g;q=k*f;t=-q;m=d*f;f*=l;break;case b.Vf:case b.Af:q=g/a.near;k=a.top*q;F=a.bottom*q;d=a.right*q;l=a.left*q;f=e/g;q=k*f;t=F*f;m=d*f;f*=l;break;default:la.va("Wrong camera type: "+a.type)}c[0]=l;c[1]=F;c[2]=-g;c[3]=d;c[4]=F;c[5]=-g;c[6]=d;c[7]=k;c[8]=-g;c[9]=l;c[10]=k;c[11]=-g;c[12]=f;c[13]=t;c[14]=-e;c[15]=f;c[16]=q;c[17]=-e;c[18]=m;c[19]=q;c[20]=-e;c[21]=m;c[22]=t;c[23]=-e;h&&(g=Ka,y.invert(a.Kc,g),H._28(c,
g,c,0));return c}function X(a,g){if(g.enable_csm){var b=g.csm_num;if(!a.Ti){var e=g.csm_num;a.Ti=Array(e);for(var c=0;c<e;c++)a.Ti[c]=new Float32Array(3);a.mr=new Float32Array(e)}for(e=0;e<b;e++){c=0==e?a.near:Ga(g,a,e-1);var h=Ga(g,a,e);c=wa(a,c,h,fa);c=U.H(c);a.Ti[e].set(c.Da);a.mr[e]=c.Lb;a.Bu[e]=k.length(c.Da);a.sp[e]=Ha(g.first_cascade_blur_radius,g.last_cascade_blur_radius,b,e)}}else a.sp[0]=g.first_cascade_blur_radius}function Ga(a,g,b){var e=a.csm_num,c=H.M(a.csm_first_cascade_border,g.near,
g.far);a=H.M(a.csm_last_cascade_border,g.near,g.far);return H.M(Ha(c,a,e,b),g.near,g.far)}function Ha(a,g,b,e){switch(e){case 0:break;case b-1:a=g;break;default:a=0==a?0:a*Math.pow(g/a,e/(b-1))}return a}function ua(a){switch(a.type){case b.Xe:case b.Yh:case b.Cj:return!0;default:return!1}}function Ca(g,b){b||(b=new Float32Array(3));return a.j(g.ka.na,b)}var la=Object(N.a)(l),sa=Object(n.a)(l),ia=Object(m.a)(l),ra=Object(C.a)(l),Q=Object(r.a)(l),Aa=Object(p.a)(l),ya=Object(z.a)(l);b.Wc=10;b.qd=20;
b.Xe=30;b.Wf=40;b.Yh=50;b.Cj=60;b.fd=70;b.rd=80;b.Vf=90;b.Af=100;b.MS_STATIC=0;b.MS_TARGET_CONTROLS=2;b.MS_EYE_CONTROLS=3;b.MS_HOVER_CONTROLS=4;var qa=H.T(40),na=H.T(.5),xa=new Float32Array([1,1,1,1]),za=new Float32Array([-1,-1,1,1]),Fa=new Float32Array([0,0,-1,1]),g=new Float32Array(2),Ba=new Float32Array(2),Va=new Float32Array(2),Xa=new Float32Array(3),Ea=new Float32Array(3),Za=new Float32Array(3),Ua=new Float32Array(3),W=new Float32Array(3),La=new Float32Array(3);v.create();var D=new Float32Array(4),
Ya=new Float32Array(4),Sa=new Float32Array(4),Ka=new Float32Array(16),fa=new Float32Array(24);b.YM=function(){var g=k.create(),e=k.create();return function(c,k){var F=k.ka,d=c.data;switch(d.type){case "PERSP":var l=L(b.qd);l.Eo=d.sensor_fit;ha(l,d.angle,d.clip_start,d.clip_end);break;case "ORTHO":l=L(b.Xe),l.Eo=d.sensor_fit,ha(l,d.ortho_scale/2,d.clip_start,d.clip_end)}l.name=k.name;var q=k.Aa;q[0].Qa.push(l);for(var t=1;t<q.length;t++){var m=E(l,!1);q[t].Qa.push(m)}F.cc=O(d.b4w_move_style);F.dof_distance=
d.dof_distance;l=d.dof_object;F.dof_object=l?l.qb:null;F.dof_front_start=d.b4w_dof_front_start;F.dof_front_end=d.b4w_dof_front_end;F.dof_rear_start=d.b4w_dof_rear_start;F.dof_rear_end=d.b4w_dof_rear_end;F.dof_power=d.b4w_dof_power;F.dof_bokeh=d.b4w_dof_bokeh;F.dof_bokeh_intensity=d.b4w_dof_bokeh_intensity;F.te=d.b4w_dof_foreground_blur;F.kq=d.b4w_trans_velocity;F.jq=d.b4w_rot_velocity;F.lq=d.b4w_zoom_velocity;l=k.ka.cc;q=c.data;t=null;l!=b.MS_TARGET_CONTROLS&&l!=b.MS_EYE_CONTROLS||!q.b4w_use_horizontal_clamping||
(t={left:q.b4w_rotation_left_limit,right:q.b4w_rotation_right_limit,camera_space:"LOCAL"==q.b4w_horizontal_clamping_type},l==b.MS_EYE_CONTROLS&&(t.left*=-1,t.right*=-1));l=t;q=k.ka.cc;t=c.data;m=null;q!=b.MS_TARGET_CONTROLS&&q!=b.MS_EYE_CONTROLS||!t.b4w_use_vertical_clamping?q==b.MS_HOVER_CONTROLS&&t.b4w_use_zooming&&(t.b4w_hover_angle_min<=t.b4w_hover_angle_max?(m={down:t.b4w_hover_angle_min,up:t.b4w_hover_angle_max},m.down*=-1,m.up*=-1):ra.error("Wrong angle limits for the HOVER camera. Disabling angle limits.")):
(m={down:t.b4w_rotation_down_limit,up:t.b4w_rotation_up_limit,camera_space:"LOCAL"==t.b4w_vertical_clamping_type},q==b.MS_TARGET_CONTROLS&&(m.down*=-1,m.up*=-1));q=m;t=k.ka.cc;m=c.data;var A=null;t==b.MS_TARGET_CONTROLS&&m.b4w_use_target_distance_limits&&m.b4w_distance_min<=m.b4w_distance_max?A={min:m.b4w_distance_min,max:m.b4w_distance_max}:t===b.MS_HOVER_CONTROLS&&m.b4w_use_zooming&&(m.b4w_distance_min<=m.b4w_distance_max?A={min:m.b4w_distance_min,max:m.b4w_distance_max}:ra.error("Wrong distance limits for the HOVER camera. Disabling distance limits."));
t=A;m=c.data;A=null;k.ka.cc==b.MS_HOVER_CONTROLS&&m.b4w_use_horizontal_clamping&&m.b4w_horizontal_translation_min<=m.b4w_horizontal_translation_max&&(A={min:m.b4w_horizontal_translation_min,max:m.b4w_horizontal_translation_max});m=A;A=c.data;var u=null;k.ka.cc==b.MS_HOVER_CONTROLS&&A.b4w_use_vertical_clamping&&A.b4w_vertical_translation_min<=A.b4w_vertical_translation_max&&(u={min:A.b4w_vertical_translation_min,max:A.b4w_vertical_translation_max});A=u;u=c.data;var Ma=null;k.ka.cc==b.MS_TARGET_CONTROLS&&
u.b4w_use_pivot_limits&&(Ma={min_z:u.b4w_pivot_z_min,max_z:u.b4w_pivot_z_max});u=Ma;switch(F.cc){case b.MS_EYE_CONTROLS:F=a.j(k.ka.na,g);h(k,F,null,l,q);break;case b.MS_TARGET_CONTROLS:F=a.j(k.ka.na,g);f(k,F,d.b4w_target,l,q,t,u,d.b4w_use_panning);break;case b.MS_HOVER_CONTROLS:F=a.j(k.ka.na,g),c=Wa(k,c.data.b4w_hover_zero_level,e),ka(k,F,c,t,q,m,A,d.b4w_enable_hover_hor_rotation)}ja(k);hb(k)}}();b.lI=h;b.nI=f;b.mI=ka;var Pa=function(){var g=v.create();return function(b,e){var c=a.g(b.ka.na,g);return Y(c,
b.ka.od,e)}}();b.get_camera_angles=Pa;var Wa=function(){var g=new Float32Array(6),b=v.create(),e=new Float32Array(2),h=k.create(),l=k.create(),q=c.create();return function(c,k,F){var t=c.ka,m=a.j(t.na,h);t=a.g(t.na,b);q.set(H.f);q[3]=0;c=Pa(c,e)[1];t=H._34(t,H.c,l);d.R(g,m);d.Q(g,t);if(!H._22(q,-k,g,F)||Math.abs(c)<na)ra.warn("Active hover camera view vector and the supporting plane are parallel to each other. Hover pivot will be set based on the camera position."),F[0]=m[0],F[1]=m[1],F[2]=0;return F}}(),
hb=function(){var g=k.create();return function(e){for(var c=e.ka,h=0;h<e.Aa.length;h++){var F=e.Aa[h].Qa[0];if(F.type==b.Xe)switch(c.cc){case b.MS_TARGET_CONTROLS:var d=a.j(c.na,g);c.pl=k.dist(d,c.pivot);c.ql=F.Rc;break;case b.MS_HOVER_CONTROLS:d=a.j(c.na,g),c.pl=k.dist(d,c.$c),c.ql=F.Rc}}}}();b.So=hb;b.sd=E;b.ON=R;b.pY=O;b.jd=L;b.XW=function(a,g){switch(g){case "COLOR":case "CUBEMAP":return!!a.wc;case "DEPTH":return!!a.gg;case "SCREEN":return!a.wc&&!a.gg;default:la.va("Wrong attachment type: "+g)}};
b.dx=function(a,g,b){switch(g){case "COLOR":case "CUBEMAP":a.wc=b;break;case "DEPTH":a.gg=b;break;case "SCREEN":a.wc=null;a.gg=null;break;default:la.va("Wrong attachment type: "+g)}};b.vX=function(a,g){switch(g){case "COLOR":case "CUBEMAP":return a.wc;case "DEPTH":return a.gg;case "SCREEN":return null;default:la.va("Wrong attachment type: "+g)}};b.ow=function(a,g){(a.type!=b.qd||g!=b.fd&&g!=b.rd&&g!=b.Vf&&g!=b.Af)&&la.va("make_stereo(): wrong camera type");a.type=g;B(a,6,.065)};b.GT=B;b.aA=Y;b.get_camera_angles_char=
function(a,g){Pa(a,g);g[0]=H.A(g[0]+Math.PI);g[1]*=-1;return g};b.set_fov=function(a,g){switch(a.type){case b.qd:case b.Wf:case b.fd:case b.rd:a.Rc=g}};b.get_fov=function(a){switch(a.type){case b.qd:case b.Wf:case b.fd:case b.rd:return a.Rc;default:return 0}};b.BQ=K;b.$H=ha;b.aI=function(a,g,e,c,h){switch(a.type){case b.qd:case b.fd:case b.rd:case b.Xe:a.Rc=e;a.Wb=1;break;case b.Wf:case b.Yh:a.Rc=e;a.Wb=g/e;break;case b.Vf:case b.Af:break;default:la.va("set_frustum2(): Unsupported camera type: "+
a.type)}a.near=c;a.far=h};b.vT=function(a,g,e,c,h,k,d){switch(a.type){case b.Cj:a.left=g;a.right=e;a.bottom=c;a.top=h;a.near=k;a.far=d;break;default:la.va("set_frustum_asymmetric(): Unsupported camera type: "+a.type)}};b.get_move_style=function(a){return a.ka.cc};var ib=function(){var g=k.create(),e=v.create(),c=y.create();return function(h,F){var d=a.j(F.ka.na,g);F=a.g(F.ka.na,e);var l=y.fromRotationTranslation(F,d,c);y.invert(l,h.Kc);if(Q.zb()){var q=Q.get_active();q=Q.yc(q,Aa.mh)}if(h.type==b.fd||
q&&q.enable_hmd_stereo&&h.type==b.Vf)h.Kc[12]+=h.tg/2;else if(h.type==b.rd||q&&q.enable_hmd_stereo&&h.type==b.Af)h.Kc[12]-=h.tg/2;if(h.ad){a.d(h.Kc,h.Fs);a.p(h.Fs,h.Ww);q=h.ad[0];l=h.ad[1];var t=h.ad[2],m=h.ad[3],f=h.pq;f[0]=1-2*q*q;f[1]=-2*q*l;f[2]=-2*q*t;f[3]=0;f[4]=-2*q*l;f[5]=1-2*l*l;f[6]=-2*l*t;f[7]=0;f[8]=-2*q*t;f[9]=-2*l*t;f[10]=1-2*t*t;f[11]=0;f[12]=-2*q*m;f[13]=-2*l*m;f[14]=-2*t*m;f[15]=1;y.multiply(h.Kc,h.pq,h.Kc);T(h,!0);k.transformMat4(d,h.pq,d)}a.d(h.Kc,h.Ag);a.p(h.Ag,h.ry);a.t(d,1,F,
h.na);Da(h)}}();b.LT=ib;b.hI=T;b.WB=function(g,e,c){var h=Xa;h[0]=0;h[1]=0;h[2]=-1;k.transformQuat(h,c,h);h[0]+=e[0];h[1]+=e[1];h[2]+=e[2];var F=Ea;F[0]=0;F[1]=1;F[2]=0;k.transformQuat(F,c,F);y.lookAt(e,h,F,g.Kc);c=Q.get_active();c=Q.yc(c,Aa.mh);if(g.type==b.fd||c&&c.enable_hmd_stereo&&g.type==b.Vf)g.Kc[12]+=g.tg/2;else if(g.type==b.rd||c&&c.enable_hmd_stereo&&g.type==b.Af)g.Kc[12]-=g.tg/2;a.d(g.Kc,g.Ag);S(g);Na(g);a.v(e,g.na)};b.eI=V;var Ja=function(){var g=k.create(),b=k.create(),e=k.create(),c=
v.create(),h=v.create();return function(F,d,l){F=F.ka;var q=a.g(F.na,c),t=H._34(q,H.f,g);k.normalize(t,t);if(.999999<Math.abs(k.dot(d,t)))t=v.identity(h);else{var m=k.cross(d,t,b);k.normalize(m,m);var f=H._34(q,H.b,e);0<k.dot(f,d)&&k.negate(m,m);f=H._34(q,H.d,e);k.normalize(f,f);var A=H.M(k.dot(f,m),-1,1);t=-.999999>=A?v.setAxisAngle(t,Math.acos(A),h):v.rotationTo(f,m,h);v.normalize(t,t)}v.multiply(t,q,q);l&&(l=H._34(q,H.e,g),0>k.dot(d,l)&&v.rotateZ(q,Math.PI,q));a.r(q,F.na)}}();b.correct_up=Ja;var eb=
function(){var g=v.create(),b=k.create();return function(e){var c=a.g(e.ka.na,g);e=e.ka.od;c=H._34(c,H.e,b);return 0>k.dot(c,e)}}();b.yT=A;var bb=function(){var g=k.create(),b=k.create(),e=k.create(),c=v.create();return function(h,F){var d=h.ka,l=F.Qa,q=a.g(d.na,c);q=H._34(q,H.c,g);var t=a.j(d.na,b),m=F.rI;for(F=0;F<m.length;F++){var f=m[F];k.copy(q,f.direction);a.j(d.na,f.iw)}for(F=0;F<l.length;F++)f=l[F],ib(f,h),k.copy(q,f.direction),f.dof_object&&f.dof_on&&(d=ya.get_translation(f.dof_object,e),
d=k.dist(t,d),f.dof_distance=d)}}();b.NU=bb;b.MU=function(){var g=v.create(),e=k.create();return function(c){var h=c.ka;ja(c);Vb(c);switch(h.cc){case b.MS_TARGET_CONTROLS:var F=a.j(h.na,e),d=a.g(h.na,g);H._31(F,d,h.pivot,H.c);a.r(d,h.na);for(d=0;d<c.Aa.length;d++)for(var l=c.Aa[d].Qa,q=0;q<l.length;q++){var t=l[q];t.type!=b.fd&&t.type!=b.rd||B(t,k.dist(F,h.pivot),t.tg)}Ja(c,h.od);break;case b.MS_EYE_CONTROLS:c.Yc||Ja(c,h.od)}}}();b.fx=aa;b.gx=J;b.hover_set_vertical_limits=P;b.hover_set_distance_limits=
da;b.VH=I;b.gI=t;b.cI=e;b.jI=ma;var Vb=function(){var g=k.create();return function(e){var c=e.ka;if(ia.is_camera(e))for(var h=e.Aa,F=0;F<h.length;F++){var d=h[F].Qa;if(d[0].type===b.Xe){switch(c.cc){case b.MS_TARGET_CONTROLS:var l=a.j(c.na,g);l=k.dist(l,c.pivot);l=l/c.pl*c.ql;break;case b.MS_HOVER_CONTROLS:l=a.j(c.na,g);l=k.distance(l,c.$c);l=l/c.pl*c.ql;break;default:l=d[0].Rc}for(var q=0;q<d.length;q++){var t=d[q];t.Rc=l;ca(t,!0)}bb(e,h[F])}}}}();b.ZU=Vb;var Pb=function(){var g=v.create(),b=k.create(),
e=k.create(),c=k.create();return function(h){h=h.ka;var F=a.j(h.na,b),d=k.subtract(F,h.pivot,e),l=k.length(d);l>h.rc.max?(k.scale(d,h.rc.max/l,d),k.add(h.pivot,d,F)):l<h.rc.min&&(l=a.g(h.na,g),l=H._34(l,H.c,c),k.scale(l,100*h.rc.min,l),k.add(d,l,d),k.scale(d,-h.rc.min/k.length(d),d),k.add(h.pivot,d,F));a.v(F,h.na)}}(),kb=function(){var g=v.create(),b=v.create(),e=v.create(),c=k.create(),h=k.create();return function(k,F,d,l){var q=k.ka;if(d||l){var t=v.identity(g);d&&v.setAxisAngle(k.ka.od,d,t);k=
a.g(q.na,b);l&&(d=H._34(k,H.d,c),l=v.setAxisAngle(d,l,e),v.normalize(l,l),v.multiply(t,l,t));l=a.j(q.na,h);H._46(l,F,t,l);a.v(l,q.na);v.multiply(t,k,k);v.normalize(k,k);a.r(k,q.na)}}}();b.CY=ta;b.KY=w;var nb=function(){var g=v.create(),b=v.create(),e=v.create(),c=k.create();return function(h,k,F){h=h.ka;if(k||F){var d=v.identity(g);k&&(k=v.setAxisAngle(h.od,k,b),v.multiply(d,k,d));k=a.g(h.na,b);if(F){var l=H._34(k,H.d,c);F=v.setAxisAngle(l,F,e);v.normalize(F,F);v.multiply(d,F,d)}v.multiply(d,k,k);
v.normalize(k,k);a.r(k,h.na)}}}();b.BY=nb;b.zY=function(a,g,b){nb(a,g,b)};b.IY=function(a,g,b){tb(a,g,b)};var tb=function(){var g=new Float32Array(2),b=v.create();return function(e,c,h){var k=e.ka,F=a.g(k.na,b);k=Y(F,k.od,g);nb(e,c-k[0],h-k[1])}}();b.JY=tb;b.AY=M;b.FT=oa;b.XS=function(a,g,e){var c=a.ka.cc;c===b.MS_TARGET_CONTROLS?ta(a,g,e):c===b.MS_EYE_CONTROLS?nb(a,g,e):c===b.MS_HOVER_CONTROLS?M(a,g,e):c===b.MS_STATIC&&nb(a,g,e)};b.ET=function(a,g,e){var c=a.ka.cc;c===b.MS_TARGET_CONTROLS?w(a,g,
e):c===b.MS_EYE_CONTROLS?tb(a,g,e):c===b.MS_HOVER_CONTROLS?oa(a,g,e):c===b.MS_STATIC&&tb(a,g,e)};var Kb=function(){var g=v.create(),b=new Float32Array(2),e=k.create(),c=k.create();return function(h){var F=h.ka,d=Pa(h,b)[1],l=h.ka;h=l.Hb;l=l.rc;h.down-h.up?(d=(h.down-d)/(h.down-h.up),d=Math.max(d,0)):d=0;d=d*(l.max-l.min)+l.min;h=a.j(F.na,e);l=a.g(F.na,g);l=H._34(l,H.c,c);k.normalize(l,l);k.scale(l,d,l);k.subtract(F.$c,l,h);a.v(h,F.na)}}(),wb=function(){var g=k.create(),b=k.create();return function(e){e=
e.ka;var c=e.pivot[2],h=H.M(e.pivot[2],e.Oe.min_z,e.Oe.max_z);h!=c&&(c=k.set(0,0,h-c,g),k.add(e.pivot,c,e.pivot),h=a.j(e.na,b),k.add(h,c,h),a.v(h,e.na))}}(),Ia=function(){var g=k.create();return function(b){b=b.ka;if(b.le){var e=H.M(b.$c[0],b.le.min,b.le.max)-b.$c[0];b.$c[0]+=e;var c=a.j(b.na,g);c[0]+=e;a.v(c,b.na)}b.me&&(e=H.M(b.$c[1],b.me.min,b.me.max)-b.$c[1],b.$c[1]+=e,c=a.j(b.na,g),c[1]+=e,a.v(c,b.na))}}();b.cY=function(a){switch(a.type){case b.qd:case b.Xe:case b.fd:case b.rd:return!0;default:return!1}};
b.OP=function(a){switch(a.type){case b.qd:case b.Wf:case b.fd:case b.rd:a:{switch(a.Eo){case "AUTO":var g=1<a.Wb?a.Rc:ua(a)?a.Rc*a.Wb:2*Math.atan(Math.tan(a.Rc/2)*a.Wb);break a;case "HORIZONTAL":g=a.Rc;break a;case "VERTICAL":g=ua(a)?a.Rc*a.Wb:2*Math.atan(Math.tan(a.Rc/2)*a.Wb);break a}g=void 0}return Math.min(K(a),g);default:return ra.error("get_angular_diameter(): Unsupported camera type: "+a.type),0}};b.jT=function(a,g){switch(a.type){case b.Wf:case b.Yh:ra.error("set_aspect(): Unsupported camera type: "+
a.type);break;default:a.Wb=g}};b.uX=function(a){return a.Wb};b.set_projection=ca;b.mT=function(a,g,e,c,h){var k=1/Math.max(h,c);switch(a.type){case b.Wc:case b.qd:case b.Wf:h/=2;c/=2;e=-(e-h)/h*Math.tan(K(a)/2);g=(g-c)/c*Math.tan(K(a)/2)*a.Wb;c=a.near*(e+k);h=a.near*(g+k);e=a.near*(e-k);g=a.near*(g-k);y.frustum(g,h,e,c,a.near,a.far,a.gc);break;case b.Xe:case b.Yh:e=-e/h;g/=c;c=K(a);h=c*a.Wb;y.ortho(-h+(g-k)*(h+h),-h+(g+k)*(h+h),c+(e-k)*(c+c),c+(e+k)*(c+c),a.near,a.far,a.gc);break;case b.Cj:e=-e/h,
g/=c,c=a.top+(e+k)*(a.top-a.bottom),h=a.left+(g+k)*(a.right-a.left),e=a.top+(e-k)*(a.top-a.bottom),g=a.left+(g-k)*(a.right-a.left),y.ortho(g,h,e,c,a.near,a.far,a.gc)}ea(a);Da(a)};b.VM=Na;b.jP=wa;b.vM=function(a){a=a.ka;var g=U.w();g.min_x=-1;g.max_x=1;g.min_y=-1;g.max_y=1;g.min_z=-1;g.max_z=1;a.gb=g;var b=U.l(1,H._1([0,0,0]));a.Xc=b;a.Kq=U.b(1,g);a.Mq=U.d(1,g);a.Lq=U.c(1,g)};b.is_static_camera=function(a){return ia.is_camera(a)&&a.ka&&a.ka.cc==b.MS_STATIC};b.is_target_camera=function(a){return ia.is_camera(a)&&
a.ka&&a.ka.cc==b.MS_TARGET_CONTROLS};b.is_eye_camera=function(a){return ia.is_camera(a)&&a.ka&&a.ka.cc==b.MS_EYE_CONTROLS};b.is_hover_camera=function(a){return ia.is_camera(a)&&a.ka&&a.ka.cc==b.MS_HOVER_CONTROLS};b.is_ortho_camera=function(a){return ia.is_camera(a)&&a.ka&&a.Aa[0].Qa[0].type==b.Xe};b.GC=X;b.JO=Ga;b.project_point=function(a,g,e){a=a.Aa[0].Qa[0];switch(a.type){case b.qd:case b.Wf:case b.Xe:case b.Yh:case b.fd:case b.rd:case b.Vf:case b.Af:case b.Wc:var h=Ya;h.set(g);h[3]=1;c.transformMat4(h,
a.zg,h);g=-h[1]/h[3];e[0]=(h[0]/h[3]+1)/2*a.width;e[1]=(g+1)/2*a.height;sa.BV(e[0],e[1],e,a);2<e.length&&(e[2]=(h[2]/Math.abs(h[3])+1)/2);return e;default:return ra.error("Non-compatible camera"),e}};b.gQ=function(a){return a.Aa[0].Qa[0]};b.nv=function(a,g){switch(a.type){case b.qd:case b.Wf:case b.fd:case b.rd:var e=Math.tan(K(a)/2);switch(g){case "LEFT":return-e*a.Wb;case "RIGHT":return e*a.Wb;case "TOP":return e;case "BOTTOM":return-e}break;case b.Xe:case b.Yh:switch(g){case "LEFT":return-K(a)*
a.Wb;case "RIGHT":return K(a)*a.Wb;case "TOP":return K(a);case "BOTTOM":return-K(a)}break;case b.Cj:switch(g){case "LEFT":return a.left;case "RIGHT":return a.right;case "TOP":return a.top;case "BOTTOM":return a.bottom}break;case b.Vf:case b.Af:e=Q.get_active();if((e=Q.yc(e,Aa.mh))&&e.enable_hmd_stereo)switch(g){case "LEFT":return-Math.tan(Math.min(a.Vd[1],a.Vd[3]));case "RIGHT":return Math.tan(Math.min(a.Vd[1],a.Vd[3]));case "TOP":return Math.tan(Math.min(a.Vd[0],a.Vd[2]));case "BOTTOM":return-Math.tan(Math.min(a.Vd[0],
a.Vd[2]))}else switch(e=Math.tan(K(a)/2),g){case "LEFT":return-e*a.Wb;case "RIGHT":return e*a.Wb;case "TOP":return e;case "BOTTOM":return-e}break;default:la.va("Unknown camera type")}};b.gR=ua;b.VB=function(g,b,e){g=g.ka;a.v(b,g.na);k.copy(e,g.pivot)};b.dI=function(){var g=k.create(),b=k.create();return function(e,c){var h=e.ka,d=k.subtract(c,h.$c,g),F=a.j(h.na,b);d=k.add(d,F,d);ya.set_translation(e,d);k.copy(c,h.$c)}}();b.HT=function(){var g=k.create(),b=k.create();return function(e,c){var h=e.ka,
d=k.subtract(c,h.pivot,g),F=a.j(h.na,b);d=k.add(d,F,d);ya.set_translation(e,d);k.copy(c,h.pivot)}}();b.yX=Ca;b.HY=function(){var g=k.create(),e=k.create(),c=v.create();return function(h,d){h.ka.cc=d;h.ka.zc=null;h.ka.Hb=null;h.ka.rc=null;h.ka.le=null;h.ka.me=null;hb(h);switch(d){case b.MS_HOVER_CONTROLS:d=a.j(h.ka.na,g);var F=Wa(h,0,e);ka(h,d,F,null,null,null,null,h.ka.Xi);break;case b.MS_TARGET_CONTROLS:d=Ca(h,g),F=a.g(h.ka.na,c),F=H._34(F,H.c,e),F=k.scaleAndAdd(d,F,10,F),k.copy(F,h.ka.pivot)}}}();
b.Dt=function(a){a=a.ka;a.cc=0;k.set(0,0,0,a.pivot);k.set(0,0,0,a.$c);a.use_panning=!1;a.zc=null;a.Hb=null;a.rc=null;a.le=null;a.me=null;a.Oe=null;a.Xi=!0};b.set_eye_distance=function(a,g){for(var b=0;b<a.length;b++){var e=a[b];70!=e.type&&80!=e.type&&90!=e.type&&100!=e.type||B(e,e.Ul,g)}};b.set_hmd_fov=function(a,g,b){var e=Q.get_active();a=ia.kb(a,e).Qa;for(e=0;e<a.length;e++){var h=a[e];if(90==h.type||100==h.type)90==h.type&&c.copy(g,h.Vd),100==h.type&&c.copy(b,h.Vd),h.ad?T(h,!1):ca(h,!1)}};b.GY=
function(a,g,b){var e=Q.get_active();a=ia.kb(a,e).Qa;for(e=0;e<a.length;e++){var c=a[e];if(90==c.type||100==c.type)90==c.type&&g&&y.copy(g,c.gc),100==c.type&&b&&y.copy(b,c.gc),ea(c),Da(c)}};b.BT=function(a,g){var e=Q.get_active();a=ia.kb(a,e).Qa;for(e=0;e<a.length;e++){var h=a[e];if(h.type==b.Wc&&h.near||h.type==b.qd||h.type==b.Wf){var k=h.near;g=y.invert(g,Ka);var d=c.transformMat4(xa,g,Ya);var F=d[0]*k;d=d[1]*k;var l=c.transformMat4(za,g,Ya);var q=l[0]*k;l=l[1]*k;g=c.transformMat4(Fa,g,Ya);var t=
-g[2]*g[3];var m=y.frustum(q,F,l,d,k,t,Ka);var f=(F-q)/(d-l);break}}for(e=0;e<a.length;e++)if(h=a[e],h.type==b.Wc||h.type==b.qd||h.type==b.Wf)h.far=t,h.near=k,h.right=F,h.top=d,h.left=q,h.bottom=l,h.Wb=f,h.Rc=Math.atan(d/k)-Math.atan(l/k),y.copy(m,h.gc),ea(h),Da(h)}});w.a=f},function(D,w,f){D=f(0);var N=f(5),U=f(4),n=f(43),y=f(51),d=f(1),m=f(10),C=f(11),v=f(13);f(2);f=Object(D.a)("__container",function(f,p){var r;function a(){Y.getBoundingClientRect()}function H(a,b,c,h){O.jG?(c=c.getBoundingClientRect(),
h[0]=a-c.left,h[1]=b-c.top):(T.clientX=a,T.clientY=b,T.view=window,a=new MouseEvent("b4w_convert",T),c.dispatchEvent(a),h[0]=a.offsetX,h[1]=a.offsetY);return h}function k(a,b,c,h){a.style.width=c+"px";a.style.height=h+"px";b&&(b.style.width=c+"px",b.style.height=h+"px")}function c(a,b,c){var d=Y,l=K;c&&k(d,l,a,b);l&&(l.width=a,l.height=b,G.Hn());c=Math.floor(a*O.canvas_resolution_factor);b=Math.floor(b*O.canvas_resolution_factor);d.width=c;d.height=b;l=Math.min(B.drawingBufferWidth,L.TA,L.YA[0]);
var m=Math.min(B.drawingBufferHeight,L.TA,L.YA[1]);if(c>l||b>m)ka.warn("Canvas size exceeds platform limits, downscaling"),l=Math.min(l/c,l/b),c*=l,b*=l;d.width=Math.floor(c);d.height=Math.floor(b);u.kI(d.width,d.height,a?c/a:1);u.zb()&&R.Ea(u.get_active().Hi);h.VU(d.width,d.height)}var l=Object(N.a)(f),b=Object(U.a)(f),h=Object(n.a)(f),G=Object(y.a)(f),ka=Object(d.a)(f),u=Object(m.a)(f),E=Object(C.a)(f),R=Object(v.a)(f),O=b.wa,L=b.di,B=null,Y=null,K=null,ha=null,T={clientX:0,clientY:0};var V=r=0;
var A=1;p.fh=function(a){B=a};p.get_canvas=function(){return Y};p.get_canvas_hud=function(){return K};p.get_container=function(){return ha};p.init=function(a,b){a&&a.parentNode?(Y=a,K=b,ha=a.parentNode):l.va("canvas container is not available")};p.insert_to_container=function(a,b){b=b||"LAST";switch(b){case "FIRST":ha.insertBefore(a,ha.firstElementChild);break;case "JUST_BEFORE_CANVAS":ha.insertBefore(a,Y);break;case "JUST_AFTER_CANVAS":Y.nextElementSibling?ha.insertBefore(a,Y.nextElementSibling):
ha.appendChild(a,Y);break;case "LAST":ha.appendChild(a,Y);break;default:ka.error(b+" invalid stack order")}};p.aG=function(){return r};p.$F=function(){return V};p.set_canvas_offsets=function(){};p.update_canvas_offsets=a;p.PT=function(b,c,h){r=b;V=c;A=h;a()};p.force_offsets_updating=function(){};p.client_to_canvas_coords=function(a,b,c){return H(a,b,Y,c)};p.get_coords_target_space=function(a,b,c){a.constructor==MouseEvent?(c[0]=a.offsetX,c[1]=a.offsetY):a.constructor==TouchEvent?(b="touchend"==a.type?
a.changedTouches:b?a.targetTouches:a.touches,H(b[0].clientX,b[0].clientY,a.target,c)):(c[0]=-1,c[1]=-1);return c};p.client_to_element_coords=H;p.Wq=function(a,b,c,h){c||(c=new Float32Array(2));c[0]=a*A;c[1]=b*A;h&&(a=h.width/r,c[0]*=a,c[1]*=a);return c};p.BV=function(a,b,c,h){c||(c=new Float32Array(2));c[0]=a/A;c[1]=b/A;h&&(a=h.width/r,c[0]/=a,c[1]/=a)};p.sG=function(a){return a&&a.parentNode?a.parentNode==ha?!0:p.sG(a.parentNode):!1};p.xG=function(){return O.allow_hidpi&&2<=window.devicePixelRatio?
!0:!1};p.resize=c;p.resize_to_container=function(a){var b=ha,h=Y,d=b.clientWidth;b=b.clientHeight;if(a||d!=h.clientWidth||b!=h.clientHeight){a=h.width;h=h.height;k(Y,K,d,b);if(u.zb()){var l=u.get_active();if((l=u.yc(l,E.mh))&&l.enable_hmd_stereo){c(a,h,!1);return}}c(d,b,!1)}};p.reset=function(){ha=K=Y=B=null}});w.a=f},function(D,w,f){D=f(0);var N=f(5),U=f(25),n=f(4),y=f(31),d=f(1),m=f(28),C=f(29),v=f(27),r=f(62),p=f(9),z=f(47),a=f(64),H=f(8),k=f(22),c=f(58),l=f(10),b=f(34),h=f(11),G=f(17),ka=f(6),
u=f(20),E=f(2),R=f(3),O=f(7);f=Object(D.a)("__batch",function(f,B){function L(a){a={type:a,fc:"",id:0,Rd:0,cr:-1,Dl:"",Gu:-1,uo:-1,pr:0,fg:0,el:[],Ua:[],vg:[],bg:[],Hc:[],Qj:[],xj:null,ud:{},ec:null,Mb:La.XQ(),Me:"",Jq:[],$a:null,Sf:E.S(),Rf:!1,Uj:!1,Iu:!1,num_vertices:0,num_triangles:0,Xv:0,Yv:0,ld:!1,zv:0,bk:0,Ud:new Float32Array(3),eg:new Float32Array(16),Ej:!1,Yf:!1,Ob:!1,Ab:!1,Ei:!1,pb:!1,bd:!1,df:!1,Of:!1,sf:!1,Be:!1,Pe:!1,ze:!1,Hd:!1,fi:Sa.Xn,Uf:!1,xh:!1,Wj:!1,Ng:!1,Vg:Va.Ny,Wg:0,ik:0,jk:0,
xl:ha(),Qd:-1,Gd:-1,Fv:!1,Jv:0,Gv:0,Kv:0,Lv:0,Iv:new Float32Array(3),Hv:new Float32Array(3),Pr:!1,fe:0,ie:0,Je:1,reflect_factor:0,Dk:0,rg:1,parallax_scale:0,Wi:0,Ii:1,mp:0,nn:0,Yd:0,Nh:0,he:new Float32Array(2),tf:new Float32Array(3),Rh:new Float32Array(3),Re:new Float32Array(3),Qc:new Float32Array(4),ii:new Float32Array(2),gn:null,Zo:null,Zr:null,Yr:null,bc:!1,wireframe_edge_color:R.create(),Bg:!1,water_dynamic:!1,Tn:!1,vy:!1,wy:0,xy:0,uy:0,jm:.1,shallow_water_col_fac:0,shore_water_col_fac:0,foam_factor:0,
ev:new Float32Array(2),dv:new Float32Array(2),Er:new Float32Array(2),shallow_water_col:new Float32Array(3),shore_water_col:new Float32Array(3),qk:null,sj:!1,ek:!1,Ru:!1,sb:null,kn:0,tm:null,rs:null,pi:[],oi:[],Ne:[],ni:[],Xb:U.L(),fm:!1,$d:null,rh:!0,mG:0,op:new Float32Array(3),hj:[]};a.Qc[3]=1;a.Ab=!0;a.kn=1;a.xl.Qo=-1;return a}function K(a){var g=L(a.type);g.fc=a.fc;g.id=a.id;g.cr=a.cr;g.Dl=a.Dl;g.Gu=a.Gu;g.uo=a.uo;g.pr=a.pr;g.fg=a.fg;g.el=[];g.Ua=a.Ua.slice();g.vg=a.vg.slice();g.bg=a.bg.slice();
g.Hc=a.Hc.slice();g.Qj=a.Qj.slice();g.xj=E.O(a.xj);g.ud=E.O(a.ud);g.ec=a.ec;g.Mb=La.uN(a.Mb);g.Me=a.Me;g.Jq=Za.rN(a.Jq);g.$a=a.$a;g.Rf=a.Rf;g.Uj=a.Uj;g.Iu=a.Iu;g.num_vertices=a.num_vertices;g.num_triangles=a.num_triangles;g.Xv=a.Xv;g.Yv=a.Yv;g.zv=a.zv;g.bk=a.bk;g.Ud=a.Ud;g.eg=a.eg;g.Ej=a.Ej;g.Yf=a.Yf;g.Ob=a.Ob;g.Ab=a.Ab;g.Ei=a.Ei;g.pb=a.pb;g.bd=a.bd;g.df=a.df;g.Of=a.Of;g.sf=a.sf;g.Be=a.Be;g.Pe=a.Pe;g.ze=a.ze;g.Hd=a.Hd;g.ld=a.ld;g.fi=a.fi;g.Uf=a.Uf;g.xh=a.xh;g.Wj=a.Wj;g.Ng=a.Ng;g.Vg=a.Vg;g.Wg=a.Wg;
g.ik=a.ik;g.jk=a.jk;var b=a.xl,e=ha();e.st=b.st;e.Df=b.Df;e.su=b.su;e.Vi=b.Vi;e.Qo=b.Qo;e.Po=b.Po;e.Oo=b.Oo;e.Qw=b.Qw;g.xl=e;g.Qd=a.Qd;g.Gd=a.Gd;g.Fv=a.Fv;g.Jv=a.Jv;g.Gv=a.Gv;g.Kv=a.Kv;g.Lv=a.Lv;R.copy(a.Iv,g.Iv);R.copy(a.Hv,g.Hv);g.Pr=a.Pr;g.fe=a.fe;g.ie=a.ie;g.Je=a.Je;g.reflect_factor=a.reflect_factor;g.Dk=a.Dk;g.rg=a.rg;g.parallax_scale=a.parallax_scale;g.Wi=a.Wi;g.Ii=a.Ii;g.mp=a.mp;g.nn=a.nn;g.Yd=a.Yd;g.Nh=a.Nh;g.he[0]=a.he[0];g.he[1]=a.he[1];R.copy(a.tf,g.tf);R.copy(a.Rh,g.Rh);R.copy(a.Re,g.Re);
O.copy(a.Qc,g.Qc);g.ii.set(a.ii);g.gn=E.O(a.gn);a.Zo&&(g.Zo=new Float32Array(a.Zo),g.Zr=new Float32Array(a.Zr),g.Yr=new Float32Array(a.Yr));g.bc=a.bc;R.copy(a.wireframe_edge_color,g.wireframe_edge_color);g.Bg=a.Bg;g.water_dynamic=a.water_dynamic;g.Tn=a.Tn;g.vy=a.vy;g.wy=a.wy;g.xy=a.xy;g.uy=a.uy;g.jm=a.jm;g.shallow_water_col_fac=a.shallow_water_col_fac;g.shore_water_col_fac=a.shore_water_col_fac;g.foam_factor=a.foam_factor;g.ev.set(a.ev);g.dv.set(a.dv);g.Er.set(a.Er);R.copy(a.shallow_water_col,g.shallow_water_col);
R.copy(a.shore_water_col,g.shore_water_col);g.qk=E.O(a.qk);g.sj=a.sj;g.ek=a.ek;g.Ru=a.Ru;a.sb&&(g.sb=Xa.IE(a.sb));g.kn=a.kn;a.tm&&(g.tm=new Float32Array(a.tm));g.rs=E.O(a.rs);g.pi=a.pi.slice();g.oi=a.oi.slice();g.Ne=a.Ne.slice();g.ni=a.ni.slice();U.t(a.Xb,g.Xb);g.fm=a.fm;g.rh=a.rh;g.op=a.op;g.hj=a.hj;return g}function ha(){return{st:!1,Df:0,Vi:0,Qo:0,Po:0,Oo:0,Qw:0,su:1}}function T(a){switch(a.type){case "MAIN":case "PARTICLES":case "LINE":a.fc=a.Ob?a.Ei?"XRAY":"BLEND":"OPAQUE";break;case "SHADOW":a.fc=
a.sf?"CAST":"RECEIVE";break;case "COLOR_ID":a.fc=a.Ei?"COLOR_ID_XRAY":"COLOR_ID"}}function V(a,g,b){for(var e=[],c=0;c<a.length;c++){var h=a[c],k=h.qb;k.Ur||e.push.apply(e,A(h,k.ka,g,b))}return e}function A(a,g,b,e){var c=[],h=a.qb,k=J(b,g,!g.cf,!1),d=a.data,l=h.Sc,F=Array(l.length),q=Array(l.length),t=[],f=Ua.xc(b,D.ic),m=!1;f&&(m=f.jn.length?!0:!1);for(var A=0;A<k.length;A++)for(var u=k[A],r=0;r<l.length;r++){var v=l[r];if(!ya(h,r)&&!Sa.fG(d,r))if("PHYSICS"==u&&a.b4w_collision&&"NAVMESH"==a.game.physics_type)t.push(Sa.av(d,
r,[],g.Oi,{},null));else if(!v.dj||m){var p=L(u);p.hj=E.O(e);"MAIN"==u?F[r]=p:"DEBUG_VIEW"==u&&(q[r]=p);p.cr=a.b4w_cluster_data.cluster_id;if(ua(p,v)&&P(p,v,d)){"SHADOW"==u&&F[r]&&(p.bd=F[r].bd);p.fi=g.Rf||g.df?Sa.Ht:Sa.Xn;Da(p,g);Na(p,a.particle_systems);if("DYNAMIC"==g.type||"COLOR_ID"==p.type)p.Dl=Aa(p,g,a.uuid);p.Wj=a.b4w_do_not_cull;"MAIN"==p.type&&(p.Ng=a.b4w_caustics);X(p,"DISABLE_FOG",("COLOR_ID"!=u&&"SHADOW"!=u&&a.b4w_disable_fogging)|0);var T=Sa.av(d,r,p.Qj,g.Oi,p.ud,p.xj);!v.Se||"a_shade_tangs"in
T.Va[0]||(X(p,"CALC_TBN",1),wa(p,"a_tbn"));if(v.dj){for(var n=T,I=n.Gb,B=n.Va[0].a_position,aa=[],C=[],Ma=0;Ma<I;Ma++)C.push(B[3*Ma]),aa.push(B[3*Ma+1]),C.push(B[3*Ma+2]);aa=new Float32Array(aa);C=new Float32Array(C);n.hb.a_lf_dist=aa;n.hb.a_lf_bb_vertex=C;T=n}Ca(p);c.push({fb:p,$g:g,hu:g,$d:T,Ih:[v.name],Qe:[a]})}}}if(t.length){p=L("PHYSICS");p.fc="NAVMESH";p.Dl=Aa(p,g,a.uuid);T=Sa.HI(t);var V=[];for(A=0;A<l.length;A++)V.push(l[A].name);Ca(p);c.push({fb:p,$g:g,hu:g,$d:T,Ih:V,Qe:[a]})}for(A=0;A<q.length;A++)q[A]&&
(q[A].uo=F[A].id,Ca(q[A]));var z=a.particle_systems;if(0<z.length){var fa=!1,da=!1;for(A=0;A<z.length;A++){var G=z[A],Q=G.settings;Q.use_render_emitter&&c.length&&(fa=!0);"HAIR"!=Q.type||"OBJECT"!=Q.render_type&&"GROUP"!=Q.render_type&&G.transforms.length||(da=!0);if(fa&&da)break}if(c.length)var Ba=c[0];else{var K=L("TMP");Na(K,z);var H=Sa.av(d,0,K.Qj,g.Oi,K.ud,K.xj);Ba={fb:K,$d:H}}var kb=Ba,pa=kb.fb.ud;if(da){if(1<l.length){for(var ib={},eb=0;eb<z.length;eb++){var nb=z[eb].settings;if("HAIR"==nb.type&&
("OBJECT"==nb.render_type||"GROUP"==nb.render_type)){var ca=nb.b4w_vcol_from_name,ja=nb.b4w_vcol_to_name;""!==ca&&""!==ja&&(ib[ca]=E.O(pa[ca]))}}"a_bending_col_main"in pa&&(ib.a_bending_col_main=E.O(pa.a_bending_col_main));"a_bending_col_detail"in pa&&(ib.a_bending_col_detail=E.O(pa.a_bending_col_detail));var ma=Sa.yF(d,[],ib)}else ma=kb.$d;var y=ma}else y=null;for(var M=y,ia=a.qb,na=[],O=a.particle_systems,ta=a.data,R=0;R<O.length;R++){var la=O[R],Ja=la.settings;if(Ja.count)if("EMITTER"==Ja.type){if("DYNAMIC"==
g.type){var ka=L("PARTICLES");ka.Xb.Bf=g.gb;ka.Xb.ag=g.jc;ka.Xb.Cf=g.Xc;ka.hj=E.O(e);var S=la.settings.material-1;S>=ia.Sc.length&&(za.warn('Wrong material used for rendering particle system "'+la.name+'"'),S=0);var ub=S;var Pa=ia.Sc[ub];if(!ya(ia,ub)&&("HALO"===la.settings.render_type&&"HALO"==Pa.type&&(ka.Pr=!0),P(ka,Pa,ta))){var bb=ka,ha=ia,oa=la.settings;switch(oa.b4w_billboard_align){case "VIEW":X(bb,"BILLBOARD_ALIGN","BILLBOARD_ALIGN_VIEW");break;case "XY":X(bb,"BILLBOARD_ALIGN","BILLBOARD_ALIGN_XY");
break;case "YZ":X(bb,"BILLBOARD_ALIGN","BILLBOARD_ALIGN_YZ");break;case "ZX":X(bb,"BILLBOARD_ALIGN","BILLBOARD_ALIGN_ZX");break;default:qa.va("Wrong billboard align value")}X(bb,"BILLBOARD",0);var Y=oa.b4w_enable_soft_particles&&Va.tE(ha,oa);X(bb,"SOFT_PARTICLES",0<oa.b4w_particles_softness&&Y&&Ka.Ju?1:0);X(bb,"SOFT_STRENGTH",La.Ga(oa.b4w_particles_softness));La.Wa(bb.Mb,"WORLD_SPACE","WORLD"==oa.b4w_coordinate_system?1:0);ka.df=!0;ka.Wj=a.b4w_do_not_cull;ka.Dl=Aa(ka,g,ia.name+"_"+Ja.uuid);Xa.WN(ka,
la,Pa);var W=Xa.FP(ka,ta,la,ia.ka);Xa.aV(W,ka,Ja.count);Xa.$U(ia);Da(ka,ia.ka);Ca(ka);na.push({fb:ka,$g:g,hu:g,$d:W,Ih:[Pa.name],Qe:[a]})}}}else if("HAIR"==Ja.type){var xa=E._13(la.seed),w=-1!=E._70(Ka.PA,Kb)&&!Ja.b4w_initial_rand_rotation&&!Ja.b4w_hair_billboard,sa=4;w&&(sa=8);if(la.transforms.length)var ea=la.transforms;else{var Vb=Sa.Yz(M,Ja.count,!1,xa);ea=new Float32Array(Vb.length*sa);for(var Oa=0;Oa<Vb.length;Oa++){var Ea=.75+.5*E._40(xa);ea[Oa*sa]=Vb[Oa][0];ea[Oa*sa+1]=Vb[Oa][1];ea[Oa*sa+
2]=Vb[Oa][2];ea[Oa*sa+3]=Ea;w&&(ea[Oa*sa+4]=1,ea[Oa*sa+5]=0,ea[Oa*sa+6]=0,ea[Oa*sa+7]=0)}}var Wa=Ua.xc(b,D.Bj)?!0:!1;if("OBJECT"==Ja.render_type){var Qb=[J(b,Ja.dupli_object.qb.ka,!g.cf,!0)],tb=Ha(a,g,pa,M,[Ja.dupli_object],Qb,[ea],Ja,la,Wa,xa,!1,e);na.push.apply(na,tb)}else if("GROUP"==Ja.render_type){var ra=Ja.dupli_group.objects;Qb=[];for(Oa=0;Oa<ra.length;Oa++){var wb=J(b,ra[Oa].qb.ka,!g.cf,!0);Qb.push(wb)}var hb=!1,N=[];for(Oa=0;Oa<ra.length;Oa++)N.push(ra[Oa].qb);if(Ja.use_whole_group){var Pb=
Ia(ea,N,w,sa);hb=!0}else{if(Ja.use_group_count){for(var Za=ea,Fa=N,Ga=Ja.dupli_weights,U=xa,Ab=w,Ya=sa,xc={},pc=[],Mb=0;Mb<Fa.length;Mb++)for(var Qc=Fa[Mb],Jc=Qc.oe||Qc.name,mc=0;mc<Ga.length;mc++){var qc=Ga[mc];Jc==qc.name&&pc.push(qc)}Ga.length!=pc.length&&za.error("dupli weights match failed");for(Mb=0;Mb<Za.length;Mb+=Ya){for(var jc,Dc=pc,uc=[0],Sb=0;Sb<Dc.length;Sb++)uc[Sb+1]=uc[Sb]+Dc[Sb].count;var jd=uc[uc.length-1]*E._40(U),vb=0;for(Sb=0;Sb<uc.length;Sb++)if(jd>=uc[Sb]&&jd<uc[Sb+1]){vb=Sb;
break}jc=vb;xc[jc]=xc[jc]||[];xc[jc].push(Za[Mb],Za[Mb+1],Za[Mb+2],Za[Mb+3]);Ab&&xc[jc].push(Za[Mb+4],Za[Mb+5],Za[Mb+6],Za[Mb+7])}for(jc in xc)xc[jc]=new Float32Array(xc[jc]);var $b=xc}else{for(var Nb=ea,vc=xa,Bc=w,nc=sa,ac=N.length,Eb={},ab=0;ab<Nb.length;ab+=nc){var bc=Math.floor(ac*E._40(vc));Eb[bc]=Eb[bc]||[];Eb[bc].push(Nb[ab],Nb[ab+1],Nb[ab+2],Nb[ab+3]);Bc&&Eb[bc].push(Nb[ab+4],Nb[ab+5],Nb[ab+6],Nb[ab+7])}for(bc in Eb)Eb[bc]=new Float32Array(Eb[bc]);$b=Eb}Pb=$b}tb=Ha(a,g,pa,M,ra,Qb,Pb,Ja,la,
Wa,xa,hb,e);na.push.apply(na,tb)}"INSTANCE"==Ja.b4w_wind_bend_inheritance&&ia.ka.yf&&za.warn('Emitter object "'+ia.name+"\" has a particle system with wind bending inheritance from the particle instance. Wind bending on the emitter isn't disabled. Expect unforeseen behavior.")}else qa.va("Unknown particle settings type")}fa?c.push.apply(c,na):c=na}return c}function aa(a){for(var g=[],b=[],e={},c=0;c<a.length;c++){var h=a[c].fb,k=null;if(h.id in e){var d=e[h.id],l=b[d].fb;la(h,function(a){la(l,function(g){E._59(a,
g)&&1!=a.mG&&(k=b[d])})});if(!k){do h.id++;while(e[h.id])}}k||(k={fb:h,qH:[],YD:[],JI:[],Qe:[],LH:[],Ih:[]},e[h.id]=b.length,b.push(k));if(a[c].$d&&a[c].$d.Gb){k.qH.push(a[c].$g);k.YD.push(a[c].hu);k.JI.push(a[c].$d);for(var F=0;F<a[c].Qe.length;F++)h=a[c].Qe[F],-1==k.LH.indexOf(h.uuid)&&(k.Qe.push(h),k.LH.push(h.uuid));for(F=0;F<a[c].Ih.length;F++)h=a[c].Ih[F],-1==k.Ih.indexOf(h)&&k.Ih.push(h)}k.Ih.sort()}for(c=0;c<b.length;c++){h=b[c].fb;var q=b[c].qH,t=b[c].YD,f=b[c].JI;a="DYNAMIC"==t[0].type||
"COLOR_ID"==h.type?t[0]:Va.oz(t[0]);if("STATIC"==a.type&&"COLOR_ID"!=h.type)for(F=0;F<q.length;F++){var m=q[F],A=t[F];e=f[F];var u=ka.m(Pb);if(m.ph&&!m.Nq){var r=ka.j(m.na,ib);ka.v(r,u);m=ka.i(m.na,ib);ka.s(m,u)}else ka.a(m.na,u);A.tl?e.If||(A.ph?Sa.rU(e,u):Sa.lC(e,u)):Sa.lC(e,u);if(A.tl)X(h,"AU_QUALIFIER","GLSL_IN");else if(1<b[c].Qe.length){m={};if(A.yf||A.ph)m.au_center_pos=ka.j(u,R.create());A.yf&&(m.au_wind_bending_amp=[A.Cg],m.au_wind_bending_freq=[A.Dg],m.au_detail_bending_amp=[A.hg],m.au_detail_bending_freq=
[A.ig],m.au_branch_bending_amp=[A.cg]);Sa.qU(e,m);X(h,"AU_QUALIFIER","GLSL_IN")}else a.pu.set(u.subarray(0,3)),X(h,"AU_QUALIFIER","uniform")}if(0==f.length)e=Sa.Gh(xa.mt("%empty"));else if(1==f.length)e=f[0];else{e=[];for(F=0;F<f.length;F++)Sa.eR(f[F])||e.push(F);if(e.length<f.length)for(F=0;F<e.length;F++)Sa.Kx(f[e[F]]);e=Sa.HI(f)}if("STATIC"==a.type){if("COLOR_ID"!=h.type){f=[];for(F=0;F<b[c].Qe.length;F++)U.G(b[c].Qe[F].qb.ka.ZD,f);U.a(f,0,f.length,a.ai);U.o(a.ai,a.gb);a.Xk=U.z(E._1(f),!0);U.s(a.Xk,
a.jc);a.Ye=U.B(a.Xk);U.u(a.Ye,a.Xc)}a.dk&&(F=b[c].Qe[0].b4w_cluster_data,F.cluster_center?a.fs.set(F.cluster_center):a.fs.set(a.Ye.Da))}"PARTICLES"!=h.type&&(F=e.Jd,a.ph?(U.o(a.gb,h.Xb.Bf),U.s(a.jc,h.Xb.ag),U.u(a.Xc,h.Xb.Cf),h.fm=!1):(U.o(F.gb,h.Xb.Bf),U.s(F.jc,h.Xb.ag),a.Xc.Lb<F.Xc.Lb?"STATIC"==a.type&&"COLOR_ID"!=h.type?U.u(a.Ye,h.Xb.Cf):U.u(a.Xc,h.Xb.Cf):U.u(F.Xc,h.Xb.Cf),h.fm=U.M(h.Xb.ag,h.Xb.Cf)));g.push({fb:h,ka:a,$d:e,Ih:b[c].Ih,Qe:b[c].Qe})}return g}function J(a,g,b,e){var c=[];e||(g.Ol&&
Ua.xc(a,D.zf)||g.Ed&&Ua.xc(a,D.Wh))&&c.push("COLOR_ID");b&&(c.push("MAIN"),c.push("NODES_GLOW"),Ua.xc(a,D.Vh)&&c.push("DEBUG_VIEW"),Ua.xc(a,D.Gg)&&c.push("SHADOW"),Ua.xc(a,D.Bj)&&c.push("GRASS_MAP"));c.push("PHYSICS");if(g.sf||g.ze)for(a=null,g.sf&&(a=["MAIN","NODES_GLOW","COLOR_ID","PHYSICS","DEBUG_VIEW"]),g.ze&&(g=["COLOR_ID","PHYSICS","SHADOW","DEBUG_VIEW"],a=null!==a?E.D(a,g):g),g=a,a=0;a<g.length;a++)b=c.indexOf(g[a]),-1!==b&&c.splice(b,1);return c}function P(a,g,b){switch(a.type){case "MAIN":if(g.cf)var c=
!1;else{if(g.jh&&"HALO"!=g.type)ta(a,g,b,"MAIN");else{t(a,g);a.pb=g.pb;a.Ei=g.vk&&"OPAQUE"!=g.Pb&&"CLIP"!=g.Pb&&"ALPHA_ANTIALIASING"!=g.Pb;a.Yd=g.Yd;a.Rh.set([1,1,1]);var h=g.hh;a.Qc.set(g.Qc);a.Qc[3]=g.alpha;if(g.dj){ia(a,"lens_flares.glslv","lens_flares.glslf");wa(a,"a_position");wa(a,"a_texcoord");var k=Ya.hf(h[0]),d=h[0].texture;ra(a,k,"u_sampler",d.name)}else{ia(a,"main.glslv","main_stack.glslf");g.bd||(b={bd:g.bd,Ff:g.Ff,Pf:g.Pf,Se:g.Se},c=q(g.nd,"MAIN"),b=Ba.wz(c,b,a.hj),a.Mb.Mf=Ba.fr(b));
var l=e("use_map_color_diffuse",!0,h);c=e("use_map_color_spec",!0,h);var f=e("use_map_normal",!0,h),m=e("use_map_mirror",!0,h),F=e("use_stencil",!0,h);b=l[0];c=c[0];f=f[0];m=m[0];l=l[1];h=F[0]&&e("use_rgb_to_intensity",!0,h)[0];if(b){d=b.texture;switch(b.blend_type){case "MIX":X(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX");break;case "MULTIPLY":X(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY")}k=Ya.hf(b);ra(a,k,"u_colormap0",d.name);a.Wi=b.diffuse_color_factor;a.Ii=b.use_map_alpha?b.alpha_factor:
0;a.Rh.set(b.scale)}F=b&&b==c;c&&(F||(d=c.texture,k=Ya.hf(c),ra(a,k,"u_specmap0",d.name)),a.Dk=c.specular_color_factor);if(f&&(d=f.texture,wa(a,"a_tbn"),k=Ya.hf(f),ra(a,k,"u_normalmap0",d.name),a.mp=f.normal_factor,d.b4w_use_map_parallax&&Ka.Mw)){k=La.Ga(d.b4w_parallax_steps);var A=La.Ga(d.b4w_parallax_lod_dist);X(a,"PARALLAX",1);X(a,"PARALLAX_STEPS",k);X(a,"PARALLAX_LOD_DIST",A);a.parallax_scale=d.b4w_parallax_scale}m&&(d=m.texture,k=Ya.hf(m),ra(a,k,"u_mirrormap",d.name),a.nn=m.mirror_factor);if(m=
b&&l&&h?1:0)k=Ya.hf(l),d=l.texture,ra(a,k,"u_colormap1",d.name),k=Ya.hf(h),d=h.texture,ra(a,k,"u_stencil0",d.name);(d=b||c||f)&&a.Rh.set(d.scale);X(a,"TEXTURE_SPEC",void 0==c?0:1);X(a,"ALPHA_AS_SPEC",F?1:0);X(a,"TEXTURE_STENCIL_ALPHA_MASK",m);wa(a,"a_position");wa(a,"a_tbn");(b||c||f)&&wa(a,"a_texcoord");if(g.Sa.fj){a.Bg=!0;a.water_dynamic=g.Sa.is_dynamic;g.Sa.shore_smoothing&&!a.Ob?(za.warn('Material: "'+g.name+'" is opaque.',"Disabling water shore smoothing."),a.Tn=!1):a.Tn="REFLECT"!=a.fc?g.Sa.shore_smoothing:
!1;ia(a,"water.glslv","water.glslf");m={bd:!1,Ff:g.Ff,Pf:g.Pf,Se:g.Se};F=q(g.nd);m=Ba.wz(F,m,a.hj);a.Mb.Mf=Ba.fr(m);wa(a,"a_position");Ka.FJ?(wa(a,"a_polyindex"),a.Ab=!0,R.set(0,0,0,a.wireframe_edge_color),Fa.hA()?X(a,"DEBUG_WIREFRAME",1):X(a,"DEBUG_WIREFRAME",2)):X(a,"DEBUG_WIREFRAME",0);F=g.hh;m=e("use_map_normal",!0,F);k=e("use_map_mirror",!0,F)[0];m.length&&(d=m[0].texture,ra(a,Ya.hf(m[0]),"u_normalmap0",d.name),a.jm=g.Sa.norm_uv_velocity);X(a,"NUM_NORMALMAPS",m.length);a.qk=Array(m.length);for(d=
0;d<m.length;d++)a.qk[d]=new Float32Array(2),a.qk[d].set([m[d].scale[0],m[d].scale[1]]);k&&(A=Ya.hf(k),d=k.texture,ra(a,A,"u_mirrormap",d.name),a.nn=k.mirror_factor);k=null;if(Ka.Go)for(d=0;d<F.length;d++){var u=F[d];if(!0===u.texture.b4w_water_foam){k=u;break}}k&&(X(a,"FOAM",1),A=Ya.hf(k),d=k.texture,ra(a,A,"u_foam",d.name),a.foam_factor=g.Sa.foam_factor,a.ev.set(d.b4w_foam_uv_freq),a.dv.set(d.b4w_foam_uv_magnitude),a.Er[0]=k.scale[0],a.Er[1]=k.scale[1]);for(d=0;d<F.length;d++)if(u=F[d],!0===u.texture.b4w_shore_dist_map){var r=
u;break}r&&Ka.Wt&&(F=Ya.hf(r),d=r.texture,ra(a,F,"u_shore_dist_map",d.name),X(a,"SHORE_PARAMS",1),r=u.texture.b4w_shore_boundings,X(a,"MAX_SHORE_DIST",La.Ga(u.texture.b4w_max_shore_dist)),X(a,"SHORE_MAP_SIZE_X",La.Ga(r[0]-r[1])),X(a,"SHORE_MAP_SIZE_Y",La.Ga(r[2]-r[3])),X(a,"SHORE_MAP_CENTER_X",La.Ga((r[0]+r[1])/2)),X(a,"SHORE_MAP_CENTER_Y",La.Ga((r[2]+r[3])/2)));g.Sa.Uv?(X(a,"GENERATED_MESH",1),a.vy=!0,a.wy=g.Sa.Cw,a.xy=g.Sa.Dw,a.uy=g.Sa.Lu):(wa(a,"a_tbn"),(k||m.length)&&wa(a,"a_texcoord"),X(a,"GENERATED_MESH",
0));if(g.Sa.is_dynamic){u=La.Ga(g.Sa.dst_noise_scale0);r=La.Ga(g.Sa.dst_noise_scale1);m=La.Ga(g.Sa.dst_noise_freq0);F=La.Ga(g.Sa.dst_noise_freq1);d=La.Ga(g.Sa.dir_min_shore_fac);k=La.Ga(g.Sa.dir_freq);A=La.Ga(g.Sa.dir_noise_scale);var v=La.Ga(g.Sa.dir_noise_freq),p=La.Ga(g.Sa.dir_min_noise_fac),T=La.Ga(g.Sa.dst_min_fac),J=La.Ga(g.Sa.waves_hor_fac);X(a,"DST_NOISE_SCALE_0",u);X(a,"DST_NOISE_SCALE_1",r);X(a,"DST_NOISE_FREQ_0",m);X(a,"DST_NOISE_FREQ_1",F);X(a,"DIR_MIN_SHR_FAC",d);X(a,"DIR_FREQ",k);X(a,
"DIR_NOISE_SCALE",A);X(a,"DIR_NOISE_FREQ",v);X(a,"DIR_MIN_NOISE_FAC",p);X(a,"DST_MIN_FAC",T);X(a,"WAVES_HOR_FAC",J)}ja(a,g);pa(a,g);a.shallow_water_col.set(g.Sa.hx);a.shore_water_col.set(g.Sa.kx);a.shallow_water_col_fac=g.Sa.ix;a.shore_water_col_fac=g.Sa.lx;X(a,"ABSORB",La.Ga(g.Sa.absorb_factor));X(a,"SSS_STRENGTH",La.Ga(g.Sa.sss_strength));X(a,"SSS_WIDTH",La.Ga(g.Sa.sss_width))}"HALO"===g.type&&(ia(a,"halo.glslv","halo.glslf"),da(a,g),a.Qj=["a_position"]);g.Se&&(X(a,"USE_TBN_SHADING",1),wa(a,"a_shade_tangs"));
X(a,"TEXCOORD",0);X(a,"NORMAL_TEXCOORD",0);b&&I(a,b,"TEXTURE_COLOR0_CO");l&&I(a,l,"TEXTURE_COLOR1_CO");h&&I(a,h,"TEXTURE_STENCIL_ALPHA_MASK_CO");c&&I(a,c,"TEXTURE_SPEC_CO");f&&I(a,f,"TEXTURE_NORM_CO");X(a,"SHADELESS",g.bd?1:0);a.bd=g.bd}X(a,"ALPHA","OPAQUE"===g.Pb?0:1);X(a,"ALPHA_CLIP","CLIP"===g.Pb?1:0);X(a,"DOUBLE_SIDED_LIGHTING",g.bq?1:0);g.tt?(X(a,"VERTEX_COLOR",1),wa(a,"a_color")):X(a,"VERTEX_COLOR",0);a.fe=g.fe;a.Je=g.Je;a.ie=g.ie;a.Re.set(g.Re);a.rg=g.rg;ja(a,g);pa(a,g);g.Wr?X(a,"WETTABLE",
1):X(a,"WETTABLE",0);ma(a,g);g.fn&&!a.Ob?(za.warn('Material "'+g.name+'" is not blend. Disabling refractions.'),a.sj=!1):a.sj=g.fn;a.Nh=g.Nh}c=!0}break;case "NODES_GLOW":c=ta(a,g,b,"GLOW");break;case "SHADOW":if(g.dj||g.Sa.fj||g.cf||"HALO"==g.type)c=!1;else if(t(a,g),a.pb=g.pb,a.Ob)c=!1;else{!g.jh||"CLIP"!=g.Pb&&"ALPHA_ANTIALIASING"!=g.Pb?ia(a,"shadow.glslv","shadow.glslf"):ta(a,g,b,"SHADOW");a.Ab=a.Ab&&!(Ka.yp&&"ALPHA_ANTIALIASING"==g.Pb);O.set(0,0,0,g.alpha,a.Qc);wa(a,"a_position");wa(a,"a_tbn");
X(a,"ALPHA","OPAQUE"===g.Pb?0:1);a.Rh.set([1,1,1]);b=e("use_map_color_diffuse",!0,g.hh)[0];if(!b||"CLIP"!=g.Pb&&"ALPHA_ANTIALIASING"!=g.Pb)X(a,"TEXTURE_COLOR",0);else{switch(b.blend_type){case "MIX":X(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX");break;case "MULTIPLY":X(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY")}a.Rh.set(b.scale);X(a,"TEXTURE_COLOR",1);wa(a,"a_texcoord");g=Ya.hf(b);b=b.texture;"IMAGE"!=g.source&&"ENVIRONMENT_MAP"!=g.source&&"CANVAS"!=g.source&&"NONE"!=g.source||ra(a,
g,"u_colormap0",b.name)}c=!0}break;case "PHYSICS":b=g.Fd;g=g.Sa;b.$p?(a.Ai=b.Ai,a.Rb=b.Rb,a.$e=b.$e,a.Ze=b.Ze,a.af=b.af,a.ve=b.ve,a.th=b.th,c=!0):g.fj?(a.Bg=!0,a.IV=g.is_dynamic,a.dst_noise_scale0=g.dst_noise_scale0,a.dst_noise_scale1=g.dst_noise_scale1,a.dst_noise_freq0=g.dst_noise_freq0,a.dst_noise_freq1=g.dst_noise_freq1,a.dir_min_shore_fac=g.dir_min_shore_fac,a.dir_freq=g.dir_freq,a.dir_noise_scale=g.dir_noise_scale,a.dir_noise_freq=g.dir_noise_freq,a.dir_min_noise_fac=g.dir_min_noise_fac,a.dst_min_fac=
g.dst_min_fac,a.waves_hor_fac=g.waves_hor_fac,c=!0):c=!1;break;case "COLOR_ID":if(g.dj||"HALO"==g.type)c=!1;else{f=c=g.Pb;"ALPHA_ANTIALIASING"==f&&(f="CLIP",g.Pb="CLIP");t(a,g);a.pb=g.pb;a.Uf=!1;a.Ab=!0;a.Ob=!1;a.Ei=g.vk&&"OPAQUE"!=f&&"CLIP"!=f;g.jh&&"CLIP"==f?ta(a,g,b,"COLOR_ID"):ia(a,"color_id.glslv","color_id.glslf");O.set(0,0,0,g.alpha,a.Qc);wa(a,"a_position");X(a,"ALPHA","OPAQUE"===f?0:1);a.Rh.set([1,1,1]);b=e("use_map_color_diffuse",!0,g.hh)[0];X(a,"ALPHA_CLIP","CLIP"===f?1:0);if(b&&"CLIP"==
f){switch(b.blend_type){case "MIX":X(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX");break;case "MULTIPLY":X(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY")}a.Rh.set(b.scale);X(a,"TEXTURE_COLOR",1);wa(a,"a_texcoord");f=Ya.hf(b);b=b.texture;"IMAGE"!=f.source&&"ENVIRONMENT_MAP"!=f.source&&"CANVAS"!=f.source&&"NONE"!=f.source||ra(a,f,"u_colormap0",b.name)}else X(a,"TEXTURE_COLOR",0);g.Pb=c;c=!0}break;case "GRASS_MAP":!g.uj.Wo||g.cf?c=!1:(t(a,g),a.pb=g.pb,a.Ob=!1,a.Uf=!1,a.Ab=!0,ia(a,"grass_map.glslv",
"grass_map.glslf"),wa(a,"a_position"),b=g.uj.zr?g.uj.zr:null,g=g.uj.yr?g.uj.yr:null,a.ud.a_grass_size={Wm:!0,src:[]},b?(a.ud.a_grass_size.src.push({name:b,Hh:4}),X(a,"DYNAMIC_GRASS_SIZE",1)):X(a,"DYNAMIC_GRASS_SIZE",0),a.ud.a_grass_color={Wm:!0,src:[]},g?(a.ud.a_grass_color.src.push({name:g,Hh:7}),X(a,"DYNAMIC_GRASS_COLOR",1)):X(a,"DYNAMIC_GRASS_COLOR",0),X(a,"GRASS_TEXTURE_SIZE",La.Ga(Pa.Mo)),c=!0);break;case "DEBUG_VIEW":c=ea(a,g);break;case "PARTICLES":a:if(g.cf)c=!1;else{c=g.hh;if(a.Pr)ia(a,"particle_system.glslv",
"particle_system_stack.glslf"),X(a,"HALO_PARTICLES",1),da(a,g);else{f={bd:!1,Ff:g.Ff,Pf:g.Pf,Se:g.Se};if(g.jh){ia(a,"particle_system.glslv","particle_system.glslf");ta(a,g,b,"PARTICLES");c=!0;break a}ia(a,"particle_system.glslv","particle_system_stack.glslf");b=q(g.nd);b=Ba.wz(b,f,a.hj);a.Mb.Mf=Ba.fr(b);if(b=e("use_map_color_diffuse",!0,c)[0]){X(a,"TEXTURE_COLOR",1);switch(b.blend_type){case "MIX":X(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX");break;case "MULTIPLY":X(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY")}a.Wi=
b.diffuse_color_factor;a.Ii=b.use_map_alpha?b.alpha_factor:0;ra(a,Ya.hf(b),"default"+String(a.Ua.length),b.texture.name)}}a.Qc.set(g.Qc);a.Qc[3]=g.alpha;a.fe=g.fe;a.Je=g.Je;a.ie=g.ie;a.Re.set(g.Re);a.rg=g.rg;wa(a,"a_position");wa(a,"a_tbn");X(a,"ALPHA","OPAQUE"===g.Pb?0:1);X(a,"ALPHA_CLIP","CLIP"===g.Pb?1:0);X(a,"PARTICLES_SHADELESS",g.bd?1:0);ja(a,g);pa(a,g);t(a,g);a.pb=g.pb;a.Ei=g.vk&&"OPAQUE"!=g.Pb&&"CLIP"!=g.Pb&&"ALPHA_ANTIALIASING"!=g.Pb;a.Yd=g.Yd;c=!0}break;default:qa.va("Wrong batch type: "+
a.type)}return c}function q(a,g,b){var e="";W.zb()&&(e=W.get_active().uuid);return Ba.IP(a,g,e,b)}function da(a,g){g=g.No;X(a,"NUM_RINGS",g.Zw);X(a,"NUM_LINES",g.ew);X(a,"NUM_STARS",g.Gx);X(a,"SKY_STARS",g.Wv?1:0);a.Jv=g.size;a.Gv=g.Qr/20;a.Iv.set(g.$w);a.Hv.set(g.gw);a.Kv=1/g.Hx;a.Lv=g.Ix;a.Fv=!0}function I(a,g,b){switch(g.texture_coords){case "UV":case "ORCO":X(a,b,"TEXTURE_COORDS_UV_ORCO");X(a,"TEXCOORD",1);break;case "NORMAL":X(a,b,"TEXTURE_COORDS_NORMAL");X(a,"NORMAL_TEXCOORD",1);break;default:X(a,
b,"TEXTURE_COORDS_NONE")}}function t(a,g){switch(g.Pb){case "ALPHA_ANTIALIASING":a.Ob=!1;a.Uf=!1;a.Ab=!0;a.Ej=!1;a.Yf=!0;break;case "ALPHA_SORT":a.Ob=!0;a.Uf=!0;a.Ab=!0;a.Ej=!1;a.Yf=!1;break;case "ALPHA":a.Ob=!0;a.Uf=!1;a.Ab=!0;a.Ej=!1;a.Yf=!1;break;case "CLIP":a.Ob=!1;a.Uf=!1;a.Ab=!0;a.Ej=!0;a.Yf=!1;break;case "ADD":a.Ob=!0;a.Uf=!1;a.Ab=!1;a.Ej=!1;a.Yf=!1;break;case "OPAQUE":a.Ob=!1;a.Uf=!1;a.Ab=!0;a.Ej=!1;a.Yf=!1;break;default:qa.va("Unknown alpha blend mode: "+g.Pb)}}function e(a,g,b){for(var e=
[],c=b.length,h=0;h<c;h++){var k=b[h];k[a]==g&&k.texture&&k.texture.sa&&e.push(k)}return e}function ma(a,g){g=g.yn;a.reflect_factor=g.reflect_factor;a.ii[0]=g.fresnel;a.ii[1]=1-g.fresnel_factor/5}function ja(a,g){var b=0;switch(g.Pf){case "PHONG":case "COOKTORR":var e=g.Dn;break;case "WARDISO":e=g.Bx;break;case "TOON":e=g.Cx;b=g.Dx;break;case "BLINN":e=g.Ax;b=g.Dn;break;default:za.error("unsupported specular shader: "+g.Pf+' (material "'+g.name+'")'),e=g.Dn}a.tf[0]=g.Zs;a.tf[1]=e;a.tf[2]=b}function pa(a,
g){switch(g.Ff){case "LAMBERT":a.he[0]=0;a.he[1]=0;break;case "OREN_NAYAR":a.he[0]=g.ax;a.he[1]=0;break;case "FRESNEL":a.he[0]=g.Mu;a.he[1]=g.Nu;break;case "MINNAERT":a.he[0]=g.Fu;a.he[1]=0;break;case "TOON":a.he[0]=g.Ou;a.he[1]=g.Pu;break;default:za.error("unsupported diffuse shader: "+g.Ff+' (material "'+g.name+'")'),a.he[0]=0,a.he[1]=0}}function ta(a,b,e,c){if(!b.jh||b.cf)return!1;switch(c){case "MAIN":ia(a,"main.glslv","main.glslf");var h=!1;break;case "GLOW":ia(a,"main.glslv","main.glslf");h=
!0;break;case "SHADOW":ia(a,"shadow.glslv","shadow.glslf");h=!1;break;case "COLOR_ID":ia(a,"color_id.glslv","color_id.glslf"),h=!1}var k=b.ne;e={NC:e.active_vcol_name,MC:e.active_uv_name};var d=q(b.nd,c,e);c=Ba.NE(k,d,c,e,a.hj);if(!c.Ya)return za.error('Failed to create node graph for material "'+b.name+'", disable nodes'),ca(a,b),!0;a.Me=c.id;a.bc=!0;X(a,"NODES",1);X(a,"DOUBLE_SIDED_LIGHTING",b.bq?1:0);wa(a,"a_position");b.jy&&wa(a,"a_orco_tex_coord");t(a,b);a.pb=b.pb;a.Yd=b.Yd;h?(X(a,"ALPHA",1),
X(a,"ALPHA_CLIP",0)):(X(a,"ALPHA","OPAQUE"===b.Pb?0:1),X(a,"ALPHA_CLIP","CLIP"===b.Pb?1:0));a.Ei=b.vk&&"OPAQUE"!=b.Pb&&"CLIP"!=b.Pb&&"ALPHA_ANTIALIASING"!=b.Pb;a.ie=b.ie;a.fe=b.fe;ma(a,b);b.Wr?X(a,"WETTABLE",1):X(a,"WETTABLE",0);var l=null,f=!1;g.Na(c.Ya,function(g,e){switch(e.type){case "UVMAP":case "TEX_COORD_UV":case "GEOMETRY_UV":case "UV_MERGED":g=e.data.name;e=e.data.value;a.xj||(a.xj={});a.xj[e]=g;break;case "GEOMETRY_VC":case "GEOMETRY_VC1":case "GEOMETRY_VC2":case "GEOMETRY_VC3":g=e.data.name;
a.ud[g]={Wm:!0,src:[{name:e.data.value}]};var c=0;if("GEOMETRY_VC"==e.type)c=7;else for(var h=0;h<e.outputs.length;h++){var k="RGB".indexOf(e.outputs[h].identifier);-1<k&&(c|=1<<2-k)}a.ud[g].src[0].Hh=c;break;case "TEX_COORD_NO":case "TEX_COORD_RE":case "GEOMETRY_NO":case "FRESNEL":case "LAYER_WEIGHT":wa(a,"a_tbn");break;case "TEX_COORD_OB":X(a,"USE_MODEL_TSR_INVERSE",1);break;case "TEX_COORD_WI":X(a,"USE_POSITION_CLIP",1);break;case "MATERIAL_BEGIN":e.data.value.Se&&(X(a,"USE_TBN_SHADING",1),"PARTICLES"!=
a.type&&wa(a,"a_shade_tangs"));wa(a,"a_tbn");f=!0;break;case "BSDF_BEGIN":f=!0;wa(a,"a_tbn");break;case "TEXTURE_COLOR":case "TEXTURE_ENVIRONMENT_CUBE":case "TEXTURE_ENVIRONMENT_EQUIRECTANGULAR":case "TEXTURE_ENVIRONMENT_MIRROR_BALL":g=e.data.name;c=e.data.Rq;e=e.data.value;ra(a,e,g,c);break;case "TEXTURE_NORMAL":case "B4W_PARALLAX":X(a,"CALC_TBN_SPACE",1);wa(a,"a_tbn");e.data&&(g=e.data.name,c=e.data.Rq,e=e.data.value,ra(a,e,g,c));break;case "NORMAL_MAP":wa(a,"a_tbn");switch(Number(e.Jb[0][1])){case Ba.FK:X(a,
"CALC_TBN_SPACE",1);break;case Ba.EK:case Ba.DK:X(a,"USE_MODEL_TSR",1)}break;case "LAMP":e.data&&(a.gn=e.data);break;case "B4W_REFRACTION":a.Ob?a.sj=!0:(a.sj=!1,za.warn('Material "'+b.name+'" is not blend. Disabling refractions.'));X(a,"USE_POSITION_CLIP",1);break;case "VALTORGB":case "CURVE_VEC":case "CURVE_RGB":l||(l=e.data.yb);break;case "PARTICLE_INFO":"PARTICLES"==a.type&&e.data&&(a.rs=e.data);break;case "VECT_TRANSFORM":switch(Number(e.Jb[1][1])){case Ba.CD:X(a,"USE_MODEL_TSR_INVERSE",1);break;
case Ba.BD:X(a,"USE_VIEW_TSR",1);break;case Ba.AD:X(a,"USE_MODEL_TSR",1);break;case Ba.zD:X(a,"USE_MODEL_TSR",1);X(a,"USE_VIEW_TSR",1);break;case Ba.yD:X(a,"USE_VIEW_TSR_INVERSE",1);break;case Ba.xD:X(a,"USE_MODEL_TSR_INVERSE",1),X(a,"USE_VIEW_TSR_INVERSE",1)}break;case "OBJECT_INFO":X(a,"USE_MODEL_TSR",1);a.op[1]=b.nj;a.op[2]=Math.random();break;case "B4W_VECTOR_VIEW":case "GEOMETRY_VW":X(a,"USE_VIEW_TSR",1);break;case "B4W_REFLECT":X(a,"USE_VIEW_TSR_INVERSE",1);break;case "BUMP":case "DISPLACEMENT_BUMP":wa(a,
"a_tbn");Fa.hA()?X(a,"USE_DERIVATIVES_EXT",1):za.warn('"OES_standard_derivatives" extension is not available. Disabling the BUMP node in the "'+b.name+'" material.');break;case "BSDF_TRANSPARENT":e.data.value.pV?X(a,"USE_BSDF_TRANSPARENT_ALPHA",1):(a.Ob=!0,a.sj=!0,X(a,"USE_BSDF_TRANSPARENT_REFRACT",1));break;case "BSDF_GLOSSY":case "BSDF_DIFFUSE":X(a,"USE_BSDF_SKY_DIM",1);Fa.iA()&&X(a,"USE_TEXTURE_LOD_EXT",1);break;case "BSDF_PRINCIPLED":X(a,"USE_BSDF_SKY_DIM",1),Fa.iA()&&X(a,"USE_TEXTURE_LOD_EXT",
1),e.data.value.xV&&(a.Ob=!0,a.sj=!0,X(a,"USE_BSDF_PRINCIPLED_REFRACT",1),X(a,"USE_VIEW_TSR",1),X(a,"USE_PROJ_MATRIX_FRAG",1))}});l&&ra(a,l,"u_nodes_texture");f||(a.bd=!0);h=a.Mb.Mf=Ba.fr(c.Ya);M(c.Ya,a,b.name);c=a.oi;k=a.ni;for(e=0;e<h.length;e++)switch(d=h[e],d.id){case "VALUE":var m=d.qp[0];if(m)for(var A=0;A<c.length;A+=3)if(c[A]==m){d.Jb.push(["VALUE_ROW_IND",c[A+1]]);d.Jb.push(["VALUE_COL_IND",c[A+2]]);break}break;case "RGB":if(m=d.qp[0])for(A=0;A<k.length;A+=2)if(k[A]==m){d.Jb.push(["RGB_IND",
k[A+1]]);break}}X(a,"NUM_VALUES",a.pi.length/4);X(a,"NUM_RGBS",a.Ne.length);return!0}function w(a,b){var e=b.sa.Aj;if(""!=e.Me){a.bc=!0;a.Me=e.Me;var c=Ba.tv(e.Me).Ya;if(!c)return za.error('Failed to create node graph for world "'+b.world.name+'", disable nodes'),ca(a,b.world.name),!0;var h=null;g.Na(c,function(g,b){switch(b.type){case "TEXTURE_COLOR":case "TEXTURE_ENVIRONMENT_EQUIRECTANGULAR":case "TEXTURE_ENVIRONMENT_MIRROR_BALL":ra(a,b.data.value,b.data.name,b.data.Rq);break;case "VALTORGB":case "CURVE_VEC":case "CURVE_RGB":h||
(h=b.data.yb);break;case "VECT_TRANSFORM":switch(Number(b.Jb[1][1])){case Ba.CD:X(a,"USE_MODEL_TSR_INVERSE",1);break;case Ba.BD:X(a,"USE_VIEW_TSR",1);break;case Ba.AD:X(a,"USE_MODEL_TSR",1);break;case Ba.zD:X(a,"USE_MODEL_TSR",1);X(a,"USE_VIEW_TSR",1);break;case Ba.yD:X(a,"USE_VIEW_TSR_INVERSE",1);break;case Ba.xD:X(a,"USE_MODEL_TSR_INVERSE",1),X(a,"USE_VIEW_TSR_INVERSE",1)}break;case "B4W_VECTOR_VIEW":X(a,"USE_VIEW_TSR",1);break;case "B4W_REFLECT":X(a,"USE_VIEW_TSR_INVERSE",1)}});h&&ra(a,h,"u_nodes_texture");
e=a.Mb.Mf=Ba.fr(c);M(c,a,b.world.name);b=a.oi;c=a.ni;for(var k=0;k<e.length;k++){var d=e[k];switch(d.id){case "VALUE":var l=d.qp[0];if(l)for(var q=0;q<b.length;q+=3)if(b[q]==l){d.Jb.push(["VALUE_ROW_IND",b[q+1]]);d.Jb.push(["VALUE_COL_IND",b[q+2]]);break}break;case "RGB":if(l=d.qp[0])for(q=0;q<c.length;q+=2)if(c[q]==l){d.Jb.push(["RGB_IND",c[q+1]]);break}}}X(a,"NUM_VALUES",a.pi.length/4);X(a,"NUM_RGBS",a.Ne.length);return!0}return!1}function M(a,g){var b=[],e=[],c=[],h=[];oa(a,"",b,e,c,h);g.pi=b;
g.oi=e;g.Ne=c;g.ni=h}function oa(a,b,e,c,h,k){g.Na(a,function(a,g){"VALUE"==g.type?(a=(b?b+"%join%":"")+g.name,e.push(g.outputs[0].mb),g=c.length/3,c.push(a,parseInt(g/4),parseInt(g%4))):"RGB"==g.type&&(a=(b?b+"%join%":"")+g.name,g=g.outputs[0].mb.slice(0,3),h.push(g[0],g[1],g[2]),k.push(a,k.length/2))});a=e.length+4-e.length%4;for(var d=e.length;d<a;d++)e.push(0)}function ca(a,g){switch(a.type){case "SHADOW":ia(a,"shadow.glslv","shadow.glslf");break;case "COLOR_ID":ia(a,"color_id.glslv","color_id.glslf");
break;default:ia(a,"main.glslv","main_stack.glslf")}X(a,"SHADELESS",1);wa(a,"a_position");wa(a,"a_tbn");O.set(1,0,1,1,a.Qc);g&&(X(a,"ALPHA","OPAQUE"===g.Pb?0:1),X(a,"ALPHA_CLIP","CLIP"===g.Pb?1:0),X(a,"VERTEX_COLOR",0),a.Yd=g.Yd,t(a,g),a.pb=g.pb);return!0}function ea(a,g){if(g&&(g.dj||g.cf))return!1;ia(a,"debug_view.glslv","debug_view.glslf");wa(a,"a_position");wa(a,"a_tbn");wa(a,"a_polyindex");a.Ab=!0;R.set(0,0,0,a.wireframe_edge_color);return!0}function Da(a,g){a.Rd=g.Rd;if("PHYSICS"!==a.type){"DYNAMIC"==
g.type||"COLOR_ID"==a.type?(g.tl?X(a,"AU_QUALIFIER","GLSL_IN"):X(a,"AU_QUALIFIER","uniform"),X(a,"STATIC_BATCH",0)):(X(a,"AU_QUALIFIER","GLSL_IN"),X(a,"STATIC_BATCH",1));"DEBUG_VIEW"==a.type&&(Fa.hA()?X(a,"WIREFRAME_QUALITY",1):X(a,"WIREFRAME_QUALITY",0),a.Uj?(X(a,"DEBUG_SPHERE",1),a.Iu?X(a,"DEBUG_SPHERE_DYNAMIC",1):X(a,"DEBUG_SPHERE_DYNAMIC",0)):X(a,"DEBUG_SPHERE",0),X(a,"ALPHA",1));g.Rf&&"PARTICLES"!=a.type&&!g.tl&&(a.Rf=g.Rf);g.yf?(""!==g.kk?(a.ud.a_bending_col_main={Wm:!0,src:[{name:g.kk,Hh:4}]},
wa(a,"a_bending_col_main"),""!==g.Ef.NA&&""!==g.Ef.MA&&""!==g.Ef.rB?(a.ud.a_bending_col_detail={Wm:!0,src:[{name:g.Ef.NA,Hh:4},{name:g.Ef.MA,Hh:2},{name:g.Ef.rB,Hh:1}]},wa(a,"a_bending_col_detail"),wa(a,"a_tbn"),X(a,"DETAIL_BEND",1)):X(a,"DETAIL_BEND",0),X(a,"MAIN_BEND_COL",1)):X(a,"MAIN_BEND_COL",0),g.ym?X(a,"BEND_CENTER_ONLY",1):X(a,"BEND_CENTER_ONLY",0),X(a,"WIND_BEND",1)):X(a,"WIND_BEND",0);X(a,"BILLBOARD_PRES_GLOB_ORIENTATION",g.Nq|0);g.ph?X(a,"BILLBOARD",1):X(a,"BILLBOARD",0);g.ph&&g.tl?X(a,
"HAIR_BILLBOARD",1):X(a,"HAIR_BILLBOARD",0);g.Oq?X(a,"BILLBOARD_SPHERICAL",1):X(a,"BILLBOARD_SPHERICAL",0);switch(g.Pq){case "RANDOM":X(a,"BILLBOARD_RANDOM",1);X(a,"BILLBOARD_JITTERED",0);break;case "JITTERED":X(a,"BILLBOARD_RANDOM",0);X(a,"BILLBOARD_JITTERED",1);break;default:X(a,"BILLBOARD_RANDOM",0),X(a,"BILLBOARD_JITTERED",0)}g.ld&&Ka.Wt?X(a,"DYNAMIC_GRASS",1):X(a,"DYNAMIC_GRASS",0);a.ld=g.ld;"PARTICLES"!=a.type&&(a.df=g.df);a.Of=g.Of;a.sf=g.sf;a.Be=g.Be&&!a.bd&&!(a.Ob&&Ka.Jz);Ka.Ks?("MAIN"==
a.type&&a.Be||"SHADOW"==a.type)&&X(a,"RGBA_SHADOWS",1):X(a,"RGBA_SHADOWS",0);a.Pe=g.Pe;a.ze=g.ze;a.Hd=g.Hd;a.op[0]=g.nj;a.Vg=g.Vg;a.Wg=g.Wg;a.ik=g.ik;a.jk=g.jk;a.Qd=g.Qd;a.Gd=g.Gd;g.vl?(wa(a,"a_influence"),X(a,"SKINNED",1),Ka.nx?(X(a,"DISABLE_TANGENT_SKINNING",1),X(a,"FRAMES_BLENDING",0)):(X(a,"DISABLE_TANGENT_SKINNING",0),g.Tm?X(a,"FRAMES_BLENDING",1):X(a,"FRAMES_BLENDING",0)),X(a,"MAX_BONES",g.li)):(X(a,"SKINNED",0),X(a,"FRAMES_BLENDING",0),X(a,"DISABLE_TANGENT_SKINNING",0));g.Ld?(X(a,"VERTEX_ANIM",
1),Ka.wJ?X(a,"VERTEX_ANIM_MIX_NORMALS_FACTOR",.5):X(a,"VERTEX_ANIM_MIX_NORMALS_FACTOR","u_va_frame_factor")):X(a,"VERTEX_ANIM",0);g.vl&&g.Ld&&qa.va("Skinning and vertex animation are mutually exlusive")}}function S(a,g,b){if(g.length){for(var e=Va.vv(g,Ka.ssao&&b.b4w_enable_ssao),c=a.Mb,h=a.gn,k=0,d=0;d<a.Mb.Mf.length;d++){var l=a.Mb.Mf[d];if("LIGHTING_LAMP"==l.id){var q=g[k++%g.length],t=q.lc,f=Va.kb(q,b);if("SPOT"==t.type||"POINT"==t.type)var m=Math.cos(t.En/2);if("SPOT"==t.type)var A=t.at*(1-m);
q=e.indexOf(q);l.Jb=[["LAMP_TYPE",t.type],["LAMP_IND",f.es],["LAMP_SPOT_SIZE",La.Ga(m||.01)],["LAMP_SPOT_BLEND",La.Ga(A||.01)],["LAMP_LIGHT_DIST",La.Ga(t.distance)],["LAMP_USE_SPHERE",t.LC?1:0],["LAMP_SHADOW_MAP_IND",q]]}else if("LAMP"==l.id&&h){f=l.Jb[0][1];for(var u=0;u<g.length;u++)if(q=g[u],h[q.nd]==f){t=q.lc;if("SPOT"==t.type||"POINT"==t.type)m=Math.cos(t.En/2);"SPOT"==t.type&&(A=t.at*(1-m));l.Jb.push(["LAMP_TYPE",t.type],["LAMP_SPOT_SIZE",La.Ga(m||.01)],["LAMP_SPOT_BLEND",La.Ga(A||.01)],["LAMP_LIGHT_DIST",
La.Ga(t.distance)],["LAMP_USE_SPHERE",t.LC?1:0])}}}if(h){b=0;for(var r in h)b++;a.Zo=new Float32Array(3*b);a.Zr=new Float32Array(3*b);a.Yr=new Float32Array(3*b);La.Wa(c,"NUM_LAMP_LIGHTS",b);for(d=0;d<g.length;d++)wb(a,g[d])}}}function Na(a,g){for(var b=0;b<g.length;b++){var e=g[b].settings.b4w_vcol_from_name,c=g[b].settings.b4w_vcol_to_name;""!==e&&""!==c&&(a.ud[e]={Wm:!1,src:[{name:e,Hh:7}]})}}function wa(a,g){var b=a.Qj;-1==b.indexOf(g)&&b.push(g);a.Qj=b.sort()}function X(a,g,b){La.Wa(a.Mb,g,b)}
function Ga(a,g,b){if("PHYSICS"==a.type)"NAVMESH"==a.fc?a.$a=Sa.II(g,Sa.Xn,[]):(0<g.Tb.length&&Sa.sU(g,g.Va[0],b),a.$d=g);else{b=a.fi;a.Fv&&"PARTICLES"!=a.type&&(g=Sa.kP(g));a.vy&&(g=Ea.EP(a.wy,a.xy,a.uy));b=Sa.II(g,b,a.ud);a.$a=b;a.df||a.Uf||a.Rf||(b.Ke=null,b.Pc.length=0);b=g.Va.length;a.num_vertices=g.Gb*b;a:switch(a.fi){case Sa.Xn:case Sa.vq:case Sa.Ht:var e=!0;break a;default:e=!1}e?Sa.dR(g)?a.num_triangles=g.ab.length/3*b:a.num_triangles=g.Gb/3*b:a.num_triangles=0}}function Ha(a,g,b,e,c,h,k,
d,l,q,t,f,m){var A=a.qb,u=[],r=d.b4w_dynamic_grass;if(!q&&r)return u;for(var F="INSTANCE"==d.b4w_wind_bend_inheritance,v="INSTANCE"==d.b4w_shadow_inheritance,p="INSTANCE"==d.b4w_reflection_inheritance,T=[],J=[],n=0;n<c.length;n++){var I=c[n].qb.ka,B=Va.oz(g);B.ph=d.b4w_hair_billboard;B.Pq=d.b4w_hair_billboard_type;B.Oq="SPHERICAL"==d.b4w_hair_billboard_geometry;B.ld=r;B.tl=!0;F?(B.yf=I.yf,B.Vn=I.Vn,B.Dg=I.Dg,B.ig=I.ig,B.kk=I.kk,B.hg=I.hg,B.cg=I.cg,B.Cg=I.Cg,B.Ef=I.Ef,B.ym=!1):(B.yf=A.ka.yf,B.Vn=A.ka.Vn,
B.Dg=A.ka.Dg,B.ig=A.ka.ig,B.kk=A.ka.kk,B.hg=A.ka.hg,B.cg=A.ka.cg,B.Cg=A.ka.Cg,B.Ef=A.ka.Ef,B.ym=!0);v?(B.Of=I.Of,B.sf=I.sf,B.Be=I.Be):(B.Of=A.ka.Of,B.sf=A.ka.sf,B.Be=A.ka.Be);p?(B.Pe=I.Pe,B.ze=I.ze,B.Hd=I.Hd,B.Qd=I.Qd,B.Gd=I.Gd,B.Mh=I.Mh):(B.Pe=A.ka.Pe,B.ze=A.ka.ze,B.Hd=A.ka.Hd,B.Qd=A.ka.Qd,B.Gd=A.ka.Gd,B.Mh=A.ka.Mh);T.push(B);var aa=k[n];aa||(aa=new Float32Array);f&&E._13(l.seed,t);var C=new Float32Array(3),z=new Float32Array([0,0,0,1]),V=[],fa=-1!=E._70(Ka.PA,Kb)&&!d.b4w_initial_rand_rotation&&
!d.b4w_hair_billboard,da=4;fa&&(da=8);for(var G=0;G<aa.length;G+=da){C[0]=aa[G];C[1]=aa[G+1];C[2]=aa[G+2];var Q=aa[G+3]*ka.i(I.na);if(d.b4w_initial_rand_rotation){switch(d.b4w_rotation_type){case "XYZ":var Ba=new Float32Array([E._40(t),E._40(t),E._40(t)]);R.normalize(Ba,Ba);break;case "Z":Ba=new Float32Array([0,0,1]);break;default:qa.va("Unsupported random rotation type: "+d.b4w_rotation_type)}H.setAxisAngle(Ba,d.b4w_rand_rotation_strength*(2*Math.PI*E._40(t)-Math.PI),z)}else if(fa&&(z.set(aa.subarray(G+
4,G+8)),E._29(z,z),!d.use_whole_group))if(d.use_rotation_dupli){var K=ka.g(I.na,Vb);H.multiply(z,K,z)}else H.multiply(z,hb,z);var pa=ka.t(C,Q,z,ka.b());V.push(pa)}J.push(V)}var kb={},ib=0;for(n=0;n<c.length;n++){var eb=c[n].qb.Sc;for(G=0;G<eb.length;G++)eb[G].name in kb?kb[eb[G].name]++:(kb[eb[G].name]=1,ib++)}ib=ib?ib:1;var nb={};for(n=0;n<c.length;n++){var ca=c[n],ja=h[n];B=T[n];var ma={};B.yf&&(ma.au_wind_bending_amp=[B.Cg],ma.au_wind_bending_freq=[B.Dg],ma.au_detail_bending_freq=[B.ig],ma.au_detail_bending_amp=
[B.hg],ma.au_branch_bending_amp=[B.cg],B.Cg=0,B.Dg=0,B.ig=0,B.hg=0,B.cg=0);V=J[n];if(V.length){var y=ca.data;eb=ca.qb.Sc;var M=Array(eb.length),ia=Array(eb.length);for(G=0;G<eb.length;G++)if(!ya(A,G)&&!Sa.fG(y,G))for(var na=0;na<ja.length;na++){var O=ja[na],ta=L(O),la=eb[G];"MAIN"==O?M[G]=ta:"DEBUG_VIEW"==O&&(ia[G]=ta);ta.cr=a.b4w_cluster_data.cluster_id;if(ua(ta,la)&&(ta.hj=E.O(m),P(ta,la,y))){"SHADOW"==O&&M[G]&&(ta.bd=M[G].bd);ta.fi=Sa.Xn;Da(ta,B);ta.Dl=Aa(ta,B,d.uuid);ta.Wj=a.b4w_do_not_cull||
d.b4w_dynamic_grass;"MAIN"==ta.type&&(ta.Ng=a.b4w_caustics);X(ta,"DISABLE_FOG",("COLOR_ID"!=O&&"SHADOW"!=O&&a.b4w_disable_fogging)|0);"JITTERED"==d.b4w_hair_billboard_type&&(ta.Xv=d.b4w_hair_billboard_jitter_amp,ta.Yv=d.b4w_hair_billboard_jitter_freq);r&&(ta.zv=d.b4w_dynamic_grass_scale_threshold);F||(delete ta.ud.a_bending_col_main,delete ta.ud.a_bending_col_detail);var Ja=Sa.av(y,G,ta.Qj,g.Oi,ta.ud,ta.xj),Ma=A.ka.na,S=!0;if(1<kb[la.name]){var bb=0,Pa;for(Pa in Ja.Va)bb++;S=Ja.ab.length*V.length*
bb*kb[la.name]>2E5*ib}var oa=Ka.ND&&S&&"PHYSICS"!=ta.type;if(oa){ta.mG=d.use_whole_group?2:1;var ha=Sa.vN(Ja);Sa.kE(Ja,ha,V);ha.If={jt:V,iC:Ma,BI:"STATIC"==g.type,Lx:ma,rp:{},Tu:r};if(B.yf&&B.ym){var Y=R.fromValues(0,0,0);ka.D(Y,A.ka.na,Y);for(var W=[],xa=0;xa<V.length;xa++)W.push(Y[0],Y[1],Y[2]);ha.If.rp.a_emitter_center={Tc:3,data:W}}Sa.kE(Ja,Ja,V);"STATIC"==g.type&&Sa.LM(ha.Jd,Ma)}else{var sa=ha=Sa.NR(Ja,ma,V),w=V;sa.hb.au_center_pos=new Float32Array(3*sa.Gb);for(var Xa=w.length,ea=sa.Gb/Xa,Oa=
0;Oa<Xa;Oa++)for(var Ha=w[Oa],ub=3*ea*Oa,Ea=0;Ea<ea;Ea++)sa.hb.au_center_pos[ub+3*Ea]=Ha[0],sa.hb.au_center_pos[ub+3*Ea+1]=Ha[1],sa.hb.au_center_pos[ub+3*Ea+2]=Ha[2];ha=sa;if(B.yf&&B.ym){var Wa=ha,Na=A.ka.na;Wa.hb.a_emitter_center=new Float32Array(3*Wa.Gb);var tb=R.fromValues(0,0,0);ka.D(tb,Na,tb);for(var ra=0;ra<Wa.Gb;ra++)Wa.hb.a_emitter_center[3*ra]=tb[0],Wa.hb.a_emitter_center[3*ra+1]=tb[1],Wa.hb.a_emitter_center[3*ra+2]=tb[2];ha=Wa}}var wb=d.b4w_vcol_from_name,N=d.b4w_vcol_to_name,$a=ta,Za=b,
Pb=!F,Ua=y,Ia=[];if(""!==wb&&""!==N){var Fa=void 0,Ga=N,Qb=$a.ud,wa=[];for(Fa in Qb)for(var La=Qb[Fa].src,D=0,U=0;U<La.length;U++){var ad=La[U].Hh;Ga==La[U].name&&wa.push(Fa,ad,D);D+=E._43(ad)}var Ab=wa;if(0<Ab.length)for(var Wb=0;Wb<Ab.length;Wb+=3)Ia.push({Ar:wb,Vu:7,Nw:Ab[Wb],Ow:Ab[Wb+1],Su:Ab[Wb+2]});else Sa.HQ($a.Qj,"a_color")&&N==Ua.active_vcol_name&&Ia.push({Ar:wb,Vu:7,Nw:"a_color",Ow:7,Su:0})}Pb&&("a_bending_col_main"in Za&&Ia.push({Ar:"a_bending_col_main",Vu:4,Nw:"a_bending_col_main",Ow:4,
Su:0}),"a_bending_col_detail"in Za&&Ia.push({Ar:"a_bending_col_detail",Vu:7,Nw:"a_bending_col_detail",Ow:7,Su:0}));for(var Ya=ha,Hc=V,Ta=e,sb=Ia,Ic=ta.ud,dc=oa,zc=!1,$b=0;$b<sb.length;$b++){var Nb=sb[$b].Ar,vc=Ta.hb[Nb];if(vc&&0<vc.length){zc=!0;break}}if(dc)var Bc=Ya.If.rp;if(zc){var nc=A.ka.gb,ac=Ta.Va[0].a_position,Eb=Hc,ab=nb,bc=new Float32Array(3),Ob=new Float32Array(3),rc=new Uint32Array(Eb.length);if(!("verts_indices"in ab)){ab.Oj=new Float32Array(3);ab.Ij=new Float32Array(3);ab.OC=new Uint32Array(ac.length/
3);ab.os=new Uint32Array(ac.length/3);ab.Oj[0]=(nc.max_x-nc.min_x)/20;ab.Oj[1]=(nc.max_y-nc.min_y)/20;ab.Oj[2]=(nc.max_z-nc.min_z)/20;ab.Ij[0]=nc.min_x;ab.Ij[1]=nc.min_y;ab.Ij[2]=nc.min_z;for(var fb=0;fb<ac.length/3;fb++){var ae=ac[3*fb+1],be=ac[3*fb+2],Db=E._64((ac[3*fb]-ab.Ij[0])/ab.Oj[0]),Rc=E._64((ae-ab.Ij[1])/ab.Oj[1]),gc=E._64((be-ab.Ij[2])/ab.Oj[2]);Db=E.M(Db,0,19);Rc=E.M(Rc,0,19);gc=E.M(gc,0,19);ab.OC[fb]=fb;ab.os[fb]=gc*Math.pow(20,2)+20*Rc+Db}Sa.aU(ab.os,ab.OC,Sa.Ry,!0);ab.Pn=new Uint32Array(Math.pow(20,
3));for(fb=0;fb<ab.os.length;fb++)ab.Pn[ab.os[fb]]++;delete ab.os;for(fb=1;fb<ab.Pn.length;fb++)ab.Pn[fb]+=ab.Pn[fb-1]}for(var dd=0;dd<Eb.length;dd++){bc[0]=Eb[dd][0];bc[1]=Eb[dd][1];bc[2]=Eb[dd][2];var qd=1E10,yc=-1,Id=E._64((bc[0]-ab.Ij[0])/ab.Oj[0]),Jd=E._64((bc[1]-ab.Ij[1])/ab.Oj[1]),Wc=E._64((bc[2]-ab.Ij[2])/ab.Oj[2]);Id=E.M(Id,0,19);Jd=E.M(Jd,0,19);Wc=E.M(Wc,0,19);for(var ce=Wc*Math.pow(20,2)+20*Jd+Id,Ec=ab.Pn[ce],Kc=0==ce?0:ab.Pn[ce-1];Kc<Ec;Kc++){var ed=ab.OC[Kc];Ob[0]=ac[3*ed];Ob[1]=ac[3*
ed+1];Ob[2]=ac[3*ed+2];R.sub(Ob,bc,Ob);var kd=R.sqrLen(Ob);kd<=qd&&(qd=kd,yc=ed)}if(-1==yc)for(Kc=0;Kc<ac.length/3;Kc++)Ob[0]=ac[3*Kc],Ob[1]=ac[3*Kc+1],Ob[2]=ac[3*Kc+2],R.sub(Ob,bc,Ob),kd=R.sqrLen(Ob),kd<=qd&&(qd=kd,yc=Kc);rc[dd]=yc}var Sd=rc;var Kd=Ya.Gb/Hc.length;for($b=0;$b<sb.length;$b++){var Sc=sb[$b].Nw,zd=sb[$b].Ow;Nb=sb[$b].Ar;var rd=sb[$b].Vu;vc=Ta.hb[Nb];switch(Sc){case "a_bending_col_main":var Xc=1;break;case "a_bending_col_detail":Xc=3;break;case "a_color":Xc=3;break;default:for(var wc=
Xc=0;wc<Ic[Sc].src.length;wc++)Xc+=E._43(Ic[Sc].src[wc].Hh)}if(vc&&0<vc.length){var Td=E._43(rd),Ld=E._43(zd),Ud=rd&zd,Vd=E._44(Ud);Ud!=zd&&za.error("Wrong color extraction from "+Nb+" to "+Sc+".");if(dc)for(Bc[Sc]={Tc:Xc,data:[]},wc=0;wc<Hc.length;wc++)for(Ad=Sd[wc],Bd=Ad*Td,sc=0;sc<Vd.length;sc++)Vd[sc]&&(sd=E._42(rd,sc),Bc[Sc].data.push(vc[Bd+sd]));else{if("a_bending_col_main"==Sc||"a_bending_col_detail"==Sc)Ya.hb[Sc]=new Float32Array(Ya.Gb*Ld);for(wc=0;wc<Hc.length;wc++){var Ad=Sd[wc],Bd=Ad*Td,
Md=wc*Kd*Xc;if(-1!=Ad)for(var td=0;td<Kd;td++)for(var fd=td*Xc,sc=0;sc<Vd.length;sc++)if(Vd[sc]){var sd=E._42(rd,sc),de=sb[$b].Su+E._42(zd,sc);Ya.hb[Sc][Md+fd+de]=vc[Bd+sd]}}}}else Ya.hb[Sc]=new Float32Array(0)}}ha=Ya;X(ta,"USE_INSTANCED_PARTCLS",ha.If?1:0);Ca(ta);u.push({fb:ta,$g:g,hu:B,$d:ha,Ih:[la.name],Qe:[a]})}}for(G=0;G<ia.length;G++)ia[G]&&(ia[G].uo=M[G].id,Ca(ia[G]))}}return u}function ua(a,g){var b=!0;"NODES_GLOW"==a.type&&(b=Ba.sE(g));return b}function Ca(a){la(a,function(a){a.id=0;a.id=
xa.lE(a)})}function la(a,g){for(var b=null,e=null,c=[],h=0;h<a.Ua.length;h++){var k=a.Ua[h],d=k.qh;d&&(b||(b={}),b[h]=d,k.qh=null);if(d=k.Qb)e||(e={}),e[h]=d,k.Qb=null;c.push(k.lH);k.lH=0}k=a.Xb;a.Xb=null;d=a.Sf;a.Sf=null;var l=a.$a;a.$a=null;var q=a.$d;a.$d=null;g(a);a.$a=l;a.$d=q;a.Sf=d;a.Xb=k;if(b)for(h in b)a.Ua[h].qh=b[h];if(e)for(h in e)a.Ua[h].Qb=e[h];for(h=0;h<a.Ua.length;h++)a.Ua[h].lH=c[h]}function sa(a,g,b,e){var c=L("DEBUG_VIEW");ia(c,"debug_view.glslv","debug_view.glslf");c.Uj=!0;c.Ab=
!0;c.Dl=Aa(c,a,g);c.Iu=b;Da(c,a);Ca(c);if(e.fm){a=e.Xb.ag;var h=R.create();g=Ea.Xz(1,h);b=R.fromValues(R.length(a.Cb),R.length(a.Db),R.length(a.Eb));Sa.RH(g,b,h);h=R.normalize(a.Cb,ib);var k=R.normalize(a.Db,Ja),d=R.normalize(a.Eb,eb);!b[0]&&b[1]&&b[2]?R.cross(k,d,h):!b[1]&&b[0]&&b[2]?R.cross(d,h,k):!b[2]&&b[0]&&b[1]&&R.cross(h,k,d);b=E.W(h,k,d,kb);v.invert(b,b);b=H.fromMat3(b,bb);ka.r(b,Pb);ka.s(1,Pb);ka.v(a.Da,Pb);Sa.lC(g,Pb)}else a=e.Xb.Cf,g=Ea.Xz(a.Lb,a.Da);U.t(e.Xb,c.Xb);Sa.Kx(g,1,!0);g.hb.a_polyindex=
Sa.$u(g);Ga(c,g);return c}function ia(a,g,b){a.Mb.yg=g;a.Mb.ff=b;La.qT(a.Mb)}function ra(a,g,b,e){e=e||"";-1==a.vg.indexOf(b)&&(a.Ua.push(g),a.vg.push(b),a.bg.push(e));a.ec&&Za.VD(a)}function Q(a){a.Mb||qa.va("No shaders info for batch "+a.name);a.ec=La.XP(a.Mb);var g=a.Mb;if(g.status===La.wD){var b=a.ec.attributes,e=a.$a.mc,c;for(c in b)e[c]||qa.va('missing data for "'+c+'" attribute')}g.status&La.RJ&&za.error("Texture limit exceeded for shader - "+g.ff+', materials: "'+a.Hc.join(", ")+'". Maximum texture count: '+
fa.WA+", actual texture count: "+g.Sx);g.status&La.QJ&&za.error("Fragment uniform limit exceeded for shader - "+g.ff+', materials: "'+a.Hc.join(", ")+'". ');g.status&La.UJ&&za.error("Vertex uniform limit exceeded for shader - "+g.yg+', materials: "'+a.Hc.join(", ")+'". ');g.status&La.TJ&&za.error("Vertex attribute limit exceeded for shader - "+g.yg+', materials: "'+a.Hc.join(", ")+'". Maximum attribute count: '+fa.XA+", actual attribute count: "+g.cu);g.status&La.SJ&&("MAIN"!=a.type||a.bc||za.error("Varying limit exceeded for shader - "+
a.Mb.ff+', materials: "'+a.Hc.join(", ")+'"'),"MAIN"==a.type&&a.bc||"NODES_GLOW"==a.type)&&(e=b=0,a.xj&&(b=E._8(a.xj)),a.ud&&(e=E._8(a.ud)),za.error("Varying limit exceeded for node shader - "+a.Mb.ff+", uv: "+b+", vc: "+e+', materials: "'+a.Hc.join(", ")+'"'));g.status&La.OJ&&za.error("Shader compilation/linking error: "+g.yg+", "+g.ff+', materials: "'+a.Hc.join(", ")+'"');return a.Mb.status===La.wD?(Za.xM(a.ec),Za.bu(a),Za.VD(a),!0):!1}function Aa(a,g,b){return"NAVMESH"==a.fc?b:g.df?"_odd_id_"+
xa.YI():b}function ya(a,g){return 0<=g&&g<a.Kf.bn.length&&a.Kf.bn[g]}var qa=Object(N.a)(f),na=Object(n.a)(f),xa=Object(y.a)(f),za=Object(d.a)(f),Fa=Object(m.a)(f),g=Object(C.a)(f),Ba=Object(r.a)(f),Va=Object(p.a)(f),Xa=Object(z.a)(f),Ea=Object(a.a)(f),Za=Object(k.a)(f),Ua=Object(c.a)(f),W=Object(l.a)(f),La=Object(b.a)(f),D=Object(h.a)(f),Ya=Object(G.a)(f),Sa=Object(u.a)(f),Ka=na.wa,fa=na.di,Pa=na.An,Wa=na.hG,hb=new Float32Array([0,0,-Math.sqrt(.5),Math.sqrt(.5)]),ib=new Float32Array(3),Ja=new Float32Array(3),
eb=new Float32Array(3),bb=new Float32Array(4),Vb=H.create(),Pb=ka.b(),kb=v.create(),nb={},tb=new Float32Array(24),Kb=[5,4];B.CM=function(a){return nb[a]||null};B.DM=function(a,g){nb[a]=g};B.sN=K;B.KF=function(a,g,b,e){var c=(b||[]).map(function(a){return a.lc});c=V(g,a.sa.Ya,c);c=aa(c);for(var h=0;h<c.length;h++){var k=c[h].fb;k.Hc=c[h].Ih;Ga(k,c[h].$d);S(k,b,a);if("STATIC"==c[h].ka.type&&"COLOR_ID"!=k.type){var d=xa.mt("%meta%"+k.type+"%"+k.Hc.join("%")+"%"),l=Va.ro(d,"MESH");Va.WR(l,c[h].ka);Va.Fq(l,
a);Va.Ig(l,a,k);e.push(l);if("MAIN"==k.type)for(var q=0;q<c[h].Qe.length;q++)d=c[h].Qe[q].qb,d.gs.push(l)}else d=c[h].Qe[0].qb,Va.Ig(d,a,k)}if(Ka.debug_view){for(h=0;h<c.length;h++)if(b=c[h].ka,"DYNAMIC"==b.type&&(d=c[h].Qe[0].qb,k=c[h].fb,"MAIN"==k.type)){q=Va.kb(d,a);l=q.Ia;var t=!1;for(q=0;q<l.length;q++)l[q].Uj&&(t=!0);t||(k=sa(b,d.name,!0,k),Va.Ig(d,a,k))}for(h=0;h<e.length;h++)d=e[h],b=d.ka,q=Va.kb(d,a),k=q.Ia[0],"MAIN"==k.type&&(k=sa(b,d.name,!1,k),Va.Ig(d,a,k));for(h=0;h<c.length;h++)k=c[h].fb,
"DEBUG_VIEW"==k.type&&(k.Gu=h)}for(h=0;h<g.length;h++)for(q=Va.kb(g[h].qb,a),l=q.Ia,q=0;q<l.length;q++)T(l[q]);for(h=0;h<e.length;h++)for(q=Va.kb(e[h],a),l=q.Ia,q=0;q<l.length;q++)T(l[q])};B.mM=function(a,g,b){var e=a.sa.Aj,c=L("MAIN");ia(c,"sky.glslv","sky.glslf");c.ek=!0;c.Ab=!1;if(g.procedural_skydome)X(c,"PROCEDURAL_SKYDOME",1),c.Ru=!0;else{var h=e.Cn,k=Ua.xc(a.sa.Ya,D.Ve).qa.wc;ra(c,k,"u_sky");h&&(X(c,"WO_SKYTEX",1),h.invert&&X(c,"MTEX_NEGATIVE",1),h.rJ&&X(c,"MTEX_RGBTOINT",1),X(c,"BLENDTYPE",
h.cE),h.mJ&&X(c,"WOMAP_BLEND",1),h.nJ&&X(c,"WOMAP_HORIZ",1),h.pJ&&X(c,"WOMAP_ZENUP",1),h.oJ&&X(c,"WOMAP_ZENDOWN",1));e.Kn&&X(c,"WO_SKYBLEND",1);e.Ln&&X(c,"WO_SKYPAPER",1);e.Mn&&X(c,"WO_SKYREAL",1)}g.Pe&&(c.Pe=!0,g.ze&&(c.ze=!0));wa(c,"a_position");g=Ea.HP();Ga(c,g);T(c);c.Wj=!0;Ca(c);Va.Ig(b,a,c);Ua.xc(a.sa.Ya,D.Vh)&&(e=K(c),e.type="DEBUG_VIEW",e.fc="",ea(e),X(e,"DEBUG_VIEW_SPECIAL_SKYDOME",1),g.hb.a_polyindex=Sa.$u(g),Ga(e,g),e.uo=c.id,Ca(e),Va.Ig(b,a,e))};B.zu=function(a,g,b){var e=Va.kb(a,b).Ia,
c=[],h=Ua.xc(g,D.de),k=Ua.xc(g,D.xd),d=Ua.xc(g,D.Wh);g=Ua.xc(g,D.zf);for(var l=0;l<e.length;l++){var q=e[l],t=null;"SHADOW"==q.type&&"RECEIVE"==q.fc&&q.Of&&(t=K(q),t.fc="CAST");"MAIN"!=q.type&&"PARTICLES"!=q.type||!h&&!k||!q.Pe||(t=K(q),t.fc="REFLECT",t.sj=!1,t.Uf&&(t.Uf=!1,t.Ab=!1),t.sb=q.sb);"COLOR_ID"==q.type&&d&&a.ka.Ed&&(g&&a.ka.Ol?(t=K(q),t.fc="OUTLINE"):q.fc="OUTLINE");t&&(t.xh=!0,Ca(t),c.push(t))}for(e=0;e<c.length;e++)Va.Ig(a,b,c[e])};B.GJ=function(a,g,b){g=b*(g.max_z-g.min_z);return 0==
g?0:.5*(Math.sqrt(2*Math.sqrt(4*g*Math.tan(a)+1)+2)/2-1)/g};B.KV=function(a,g,b){g=b*(g.max_z-g.min_z);if(0==g)return 0;a*=2*g;return Math.atan((Math.pow(a+1,4)-Math.pow(a+1,2))/g)};B.EM=function(a){var g=U.w();g.max_x=a.max_x;g.min_x=a.min_x;g.max_y=a.max_y;g.min_y=a.min_y;g.max_z=a.max_z;g.min_z=a.min_z;return g};B.hs=function(a,g){var b=a[g];for(g+=1;g<a.length;g++)b=(b?b+"%join%":"")+a[g];return b};B.IU=ca;B.HU=S;var wb=function(){var a=R.create();return function(g,b){if(b.nd in g.gn){var e=g.gn[b.nd],
c=ka.j(b.ka.na,a);g.Zo.set(c,3*e);g.Zr.set(b.lc.direction,3*e);g.Yr.set(b.lc.dr,3*e)}}}();B.xT=wb;B.UD=function(a,g){X(a,"CSM_SECTION1",0);X(a,"CSM_SECTION2",0);X(a,"CSM_SECTION3",0);X(a,"NUM_CAST_LAMPS",0);if(g){X(a,"NUM_CAST_LAMPS",g.ki.length);Ka.mw&&X(a,"MAC_OS_SHADOW_HACK",1);for(var b=1;b<g.csm_num;b++)X(a,"CSM_SECTION"+String(b),1);X(a,"SHADOW_TEX_RES",La.Ga(g.csm_resolution));X(a,"CSM_FADE_LAST_CASCADE",g.fade_last_cascade?1:0);X(a,"CSM_BLEND_BETWEEN_CASCADES",g.blend_between_cascades&&!Ka.xE?
1:0)}else X(a,"SHADOW_TEX_RES",0),X(a,"CSM_FADE_LAST_CASCADE",0),X(a,"CSM_BLEND_BETWEEN_CASCADES",0)};B.dc=X;B.Td=function(a,g){return La.eQ(a.Mb,g)};B.ZI=Ga;var Ia=function(){var a=R.create();return function(g,b,e,c){for(var h={},k=new Float32Array([0,0,0,1]),d=0;d<g.length;d+=c)for(var l=0;l<b.length;l++){var q=R.create(),t=ka.i(b[l].ka.na),f=ka.j(b[l].ka.na,a);R.scale(f,t,q);t=R.clone([g[d],g[d+1],g[d+2]]);h[l]||(h[l]=new Float32Array(g.length));e&&(h[l][d+4]=k[0]=g[d+4],h[l][d+5]=k[1]=g[d+5],
h[l][d+6]=k[2]=g[d+6],h[l][d+7]=k[3]=g[d+7],E._29(k,k),E._62(q,k,q));R.add(t,q,t);h[l][d]=t[0];h[l][d+1]=t[1];h[l][d+2]=t[2];h[l][d+3]=g[d+3]}return h}}();B.GU=Ca;B.SU=function(a,g){a.Xb.Bf=U.a(g,0,g.length,a.Xb.Bf);g=U.F(a.Xb.Bf,tb);a.Xb.ag=U.z(g,!0);a.Xb.Cf=U.B(a.Xb.ag);a.fm=U.M(a.Xb.ag,a.Xb.Cf)};B.$t=ia;B.$h=ra;B.HB=function(a,g,b){b=a.vg.indexOf(b);-1<b&&(a.Ua[b]=g)};B.bO=function(a,g){var b=L("MAIN");b.Ob=!0;O.set(g[0],g[1],g[2],.5,b.Qc);b.fi=Sa.vq;Ga(b,a);ia(b,"main.glslv","main_stack.glslf");
X(b,"SHADELESS",1);Q(b);return b};B.md=Q;B.JF=function(a,g){for(var b=0;b<g.length;b++){var e=g[b],c=L("LINE");ia(c,"line.glslv","line.glslf");c.Ob=!0;c.Wj=!0;var h=Ea.JP();Ga(c,h);T(c);Va.Fq(e,a);Va.Ig(e,a,c);Q(c)}};B.dN=function(a){return a.ec.ss.length?a.ec.wB.u_cube_fog?!0:!1:!1};B.MN=function(){var a=L("DEPTH_PACK");a.pb=!0;a.Ab=!1;var g=Ea.Sd();Ga(a,g);ia(a,"postprocessing/postprocessing.glslv","postprocessing/depth_pack.glslf");Q(a);return a};B.Au=function(a){var g=L("POSTPROCESSING");ia(g,
"postprocessing/postprocessing.glslv","postprocessing/postprocessing.glslf");switch(a){case "NONE":X(g,"POST_EFFECT","POST_EFFECT_NONE");break;case "GRAYSCALE":X(g,"POST_EFFECT","POST_EFFECT_GRAYSCALE");break;case "X_BLUR":case "Y_BLUR":X(g,"POST_EFFECT","POST_EFFECT_BLUR");break;case "X_GLOW_BLUR":case "Y_GLOW_BLUR":case "X_BLOOM_BLUR":case "Y_BLOOM_BLUR":X(g,"POST_EFFECT","POST_EFFECT_GLOW_BLUR");break;case "X_DOF_BLUR":case "Y_DOF_BLUR":X(g,"POST_EFFECT","POST_EFFECT_DOF_BLUR");break;case "X_ALPHA_BLUR":case "Y_ALPHA_BLUR":X(g,
"POST_EFFECT","POST_EFFECT_ALPHA_BLUR");break;case "X_EXTEND":case "Y_EXTEND":X(g,"POST_EFFECT","POST_EFFECT_EXTEND");break;case "FLIP_CUBEMAP_COORDS":X(g,"POST_EFFECT","FLIP_CUBEMAP_COORDS");break;default:qa.va("Wrong postprocessing effect: "+a)}X(g,"SHADOW_USAGE","NO_SHADOWS");g.pb=!0;g.Ab=!1;a=Ea.Sd();Ga(g,a);Q(g);return g};B.eO=function(a){var g=L("SSAO");g.Ab=!1;g.pb=!0;var b=Ea.Sd();Ga(g,b);ia(g,"postprocessing/postprocessing.glslv","postprocessing/ssao.glslf");X(g,"SSAO_QUALITY","SSAO_QUALITY_"+
a.Fn);X(g,"SSAO_HEMISPHERE",a.Lp?1:0);X(g,"SHADOW_USAGE","NO_SHADOWS");a={width:4,height:4,data:new Uint8Array([150,123,254,0,127,3,97,0,164,246,99,0,155,177,14,0,54,83,221,0,2,142,143,0,32,57,79,0,49,160,32,0,57,232,115,0,178,216,203,0,70,196,218,0,241,164,82,0,225,58,85,0,233,88,189,0,144,25,203,0,117,73,12,0])};b=Ya.Sj(Ya.Xh,!1);b.source="NODE_TEX";Ya.ot(b,a,0);ra(g,b,"u_ssao_special_tex");Q(g);return g};B.fO=function(a){var g=L("SSAO_BLUR");g.Ab=!1;g.pb=!0;var b=Ea.Sd();Ga(g,b);ia(g,"postprocessing/postprocessing.glslv",
"postprocessing/ssao_blur.glslf");X(g,"SSAO_BLUR_DEPTH",a.Ip?1:0);X(g,"SHADOW_USAGE","NO_SHADOWS");Q(g);return g};B.GN=function(a){var g=L("COC");g.Ab=!1;g.pb=!0;var b=Ea.Sd();Ga(g,b);ia(g,"postprocessing/postprocessing.glslv","postprocessing/coc.glslf");X(g,"DEPTH_RGBA",1);switch(a){case "COC_ALL":X(g,"COC_TYPE","COC_ALL");break;case "COC_FOREGROUND":X(g,"COC_TYPE","COC_FOREGROUND");break;case "COC_COMBINE":X(g,"COC_TYPE","COC_COMBINE")}X(g,"SHADOW_USAGE","NO_SHADOWS");Q(g);return g};B.NN=function(a){var g=
L("DOF");g.Ab=!1;g.pb=!0;var b=Ea.Sd();Ga(g,b);ia(g,"postprocessing/postprocessing.glslv","postprocessing/dof.glslf");a.dof_bokeh?X(g,"DOF_TYPE","DOF_BOKEH"):(X(g,"DOF_TYPE","DOF_SIMPLE"),X(g,"DEPTH_RGBA",1));X(g,"SHADOW_USAGE","NO_SHADOWS");Q(g);return g};B.VN=function(){var a=L("OUTLINE");a.Ab=!1;a.pb=!0;var g=Ea.Sd();Ga(a,g);ia(a,"postprocessing/postprocessing.glslv","postprocessing/outline.glslf");Q(a);return a};B.PN=function(){var a=L("GLOW_COMBINE");a.Ab=!1;a.pb=!0;var g=Ea.Sd();Ga(a,g);ia(a,
"postprocessing/postprocessing.glslv","postprocessing/glow.glslf");Q(a);return a};B.QN=function(a,g,b){var e=L("GOD_RAYS");e.Ab=!1;e.pb=!0;var c=Ea.DP();Ga(e,c);ia(e,"postprocessing/god_rays.glslv","postprocessing/god_rays.glslf");X(e,"DEPTH_RGBA",a?1:0);X(e,"WATER_EFFECTS",g?1:0);X(e,"STEPS_PER_PASS",La.Ga(b,1));X(e,"SHADOW_USAGE","NO_SHADOWS");Q(e);return e};B.RN=function(){var a=L("GOD_RAYS_COM");a.Ab=!1;a.pb=!0;var g=Ea.Sd();Ga(a,g);ia(a,"postprocessing/postprocessing.glslv","postprocessing/god_rays_combine.glslf");
X(a,"SAFARI_CANVAS_ALPHA_HACK",Ka.QH?1:0);Q(a);return a};B.KN=function(a,g){var b=L("SKY");b.Ab=!1;b.pb=!1;var e=Ea.lv();Ga(b,e);""!=g.rx?(ia(b,"skybox.glslv","node_skybox.glslf"),X(b,"IS_WORLD",1),w(b,a)):g.procedural_skydome?(ia(b,"skybox.glslv","proc_skybox.glslf"),X(b,"WATER_EFFECTS",1)):(ia(b,"skybox.glslv","tex_skybox.glslf"),a&&(a=a.sa.Aj,a.tx&&ra(b,Ya.hf(a.tx),"u_sky_texture",a.tx.texture.name),a.Cn&&X(b,"WO_SKYTEX",1)),g.qx&&X(b,"MTEX_NEGATIVE",1),g.yx&&X(b,"MTEX_RGBTOINT",1),X(b,"BLENDTYPE",
g.px),g.ux&&X(b,"WOMAP_BLEND",1),g.vx&&X(b,"WOMAP_HORIZ",1),g.xx&&X(b,"WOMAP_ZENUP",1),g.wx&&X(b,"WOMAP_ZENDOWN",1),g.Kn&&X(b,"WO_SKYBLEND",1),g.Ln&&X(b,"WO_SKYPAPER",1),g.Mn&&X(b,"WO_SKYREAL",1));Q(b);return b};B.fM=function(a,g){var b=Ua.xc(a.sa.Ya,D.Ve);b&&Va.Ig(g,a,b.vb[0].jb[0].fb)};B.IN=function(){var a=L("IRRADIANCE");a.Ab=!1;a.pb=!1;var g=Ea.lv();Ga(a,g);ia(a,"skybox.glslv","irradiance_skybox.glslf");Q(a);return a};B.JN=function(){var a=L("R_CONVOLUTION");a.Ab=!1;a.pb=!1;var g=Ea.lv();Ga(a,
g);ia(a,"skybox.glslv","r_convolution_skybox.glslf");Q(a);return a};B.FN=function(){var a=L("BRDF");a.Ab=!1;a.pb=!1;var g=Ea.lv();Ga(a,g);ia(a,"postprocessing/postprocessing.glslv","postprocessing/precompute_brdf.glslf");Q(a);return a};B.CN=function(a){var g=L("ANTIALIASING");g.Ab=!1;g.pb=!0;var b=Ea.Sd();Ga(g,b);ia(g,"postprocessing/postprocessing.glslv","postprocessing/antialiasing.glslf");Ka.EH?(X(g,"AA_METHOD","AA_METHOD_FXAA_QUALITY"),X(g,"AA_QUALITY",a.jv)):X(g,"AA_METHOD","AA_METHOD_FXAA_LIGHT");
Q(g);return g};B.cO=function(a){var g=L("SMAA"),b=Ea.Sd();Ga(g,b);ia(g,"postprocessing/smaa.glslv","postprocessing/smaa.glslf");X(g,"AA_METHOD","AA_METHOD_SMAA_HIGH");X(g,"SMAA_PASS",a);X(g,"SMAA_PREDICATION",0);X(g,"SMAA_REPROJECTION",0);Q(g);g.Ab=!1;g.pb=!0;return g};B.HN=function(){var a=L("COMPOSITING");a.Ab=!1;a.pb=!0;var g=Ea.Sd();Ga(a,g);ia(a,"postprocessing/postprocessing.glslv","postprocessing/compositing.glslf");Q(a);return a};B.UN=function(){var a=L("MOTION_BLUR");a.pb=!0;a.Ab=!1;var g=
Ea.Sd();Ga(a,g);ia(a,"postprocessing/postprocessing.glslv","postprocessing/motion_blur.glslf");Q(a);return a};B.gO=function(a){var g=L("STEREO");g.pb=!0;g.Ab=!1;var b=Ea.Sd();Ga(g,b);ia(g,"postprocessing/postprocessing.glslv","postprocessing/stereo.glslf");X(g,"ANAGLYPH","ANAGLYPH"===a?1:0);X(g,"SIDEBYSIDE","SIDEBYSIDE"===a?1:0);X(g,"DISTOR_SCALE",Wa.nonwebvr.rF);Q(g);return g};B.SN=function(){var a=L("LUMINANCE");a.Ab=!1;a.pb=!0;var g=Ea.Sd();Ga(a,g);ia(a,"postprocessing/postprocessing.glslv","postprocessing/luminance.glslf");
Q(a);return a};B.DN=function(){var a=L("LUMINANCE");a.Ab=!1;a.pb=!0;var g=Ea.Sd();Ga(a,g);ia(a,"postprocessing/postprocessing.glslv","postprocessing/luminance_av.glslf");Q(a);return a};B.TN=function(a){var g=L("LUMINANCE_X_BLUR");g.Ab=!1;g.pb=!0;var b=Ea.Sd();Ga(g,b);ia(g,"postprocessing/postprocessing.glslv","postprocessing/luminance_truncated.glslf");a&&La.Wa(g.Mb,"ADAPTIVE_BLOOM",1);Q(g);return g};B.EN=function(a){var g=L("BLOOM");g.Ab=!1;g.pb=!0;var b=Ea.Sd();Ga(g,b);ia(g,"postprocessing/postprocessing.glslv",
"postprocessing/bloom_combine.glslf");if(1==a)var e="BLUR_PASS_1";else 2==a?e="BLUR_PASS_2":3==a?e="BLUR_PASS_3":4==a?e="BLUR_PASS_4":5==a&&(e="BLUR_PASS_5");La.Wa(g.Mb,"BLUR_PASS_NUM",e);Q(g);return g};B.GO=function(){var a=L("VELOCITY");a.Ab=!1;a.pb=!0;var g=Ea.Sd();Ga(a,g);ia(a,"postprocessing/postprocessing.glslv","postprocessing/velocity.glslf");Q(a);return a};B.BN=function(){var a=L("ANCHOR_VISIBILITY");a.Ab=!0;a.pb=!0;a.fi=Sa.vq;ia(a,"anchors.glslv","anchors.glslf");var g=Ea.IF(1);Ga(a,g);
X(a,"ANCHOR_NUM",1);Q(a);a.tm=new Float32Array(3);return a};B.XN=function(){var a=L("PERFORMANCE");a.Ab=!1;a.pb=!0;var g=Ea.Sd();Ga(a,g);ia(a,"postprocessing/postprocessing.glslv","postprocessing/performance.glslf");Q(a);return a};B.FU=function(a,g){var b=g.length/3;if(b!=a.tm.length/3){var e=Ea.IF(b);Ga(a,e);X(a,"ANCHOR_NUM",b);Q(a)}a.tm=g};B.ov=function(a){if(!a.Aa.length)return null;a=a.Aa[0];return a.Ia.length?a.Ia[0]:null};B.vh=function(a,g,b){a=a.Aa[0].Ia;for(var e=0;e<a.length;e++)if(a[e].type==
b&&-1!=a[e].Hc.indexOf(g))return a[e];return null};B.Zb=function(a,g,b){a=a.Aa[0].Ia;for(var e=0;e<a.length;e++)if(a[e].type==b&&!a[e].xh&&-1!=a[e].Hc.indexOf(g))return a[e];return null};B.Sg=function(a,g,b){a=a.Aa[0].Ia;for(var e=0;e<a.length;e++)if(a[e].type==b&&a[e].xh&&-1!=a[e].Hc.indexOf(g))return a[e];return null};B.IA=function(a,g,b,e){a=a.Aa[0].Ia;for(var c=0;c<a.length;c++){var h=a[c];if(-1!=h.Hc.indexOf(g)&&(!e||h.type==e)&&b(h))break}};B.YW=function(a,g){a=a.Aa[0].Ia;for(var b=0;b<a.length;b++)if(a[b].type==
g)return!0;return!1};B.Nr=function(a,g){a=(g?Va.kb(a,g):a.Aa[0]).Ia;for(g=0;g<a.length;g++)if("SKY"==a[g].type)return a[g];return null};B.GE=function(a){var g=a.Ua;a.Ua=[];for(var b=0;b<g.length;b++)Ya.FE(g[b]);a.Ua=g;a.$a&&a.$a.rh&&Sa.mN(a.$a);a.rh&&a.Sf.length&&Za.pN(a);a.ec&&a.ec.rh&&La.oN(a.ec);a.Me&&(g=Ba.tv(a.Me))&&g.EE&&Ba.nN(a.Me)};B.lT=function(a){""!==a.Me&&(a=Ba.tv(a.Me))&&(a.EE=void 0)};B.LP=Aa;B.cleanup=function(){nb={}};B.set_nodemat_value=function(a,g,b){for(var e=a.oi,c=0;c<e.length;c+=
3)if(e[c]==g)return a.pi[4*e[c+1]+e[c+2]]=b,!0;return!1};B.set_nodemat_rgb=function(a,g,b,e,c){for(var h=a.ni,k=0;k<h.length;k+=2)if(h[k]==g)return g=h[k+1],a.Ne[3*g]=b,a.Ne[3*g+1]=e,a.Ne[3*g+2]=c,!0;return!1};B.get_nodemat_value=function(a,g){for(var b=a.oi,e=0;e<b.length;e+=3)if(b[e]==g)return a.pi[4*b[e+1]+b[e+2]];return null};B.get_nodemat_rgb=function(a,g,b){for(var e=a.ni,c=0;c<e.length;c+=2)if(e[c]==g)return g=e[c+1],b[0]=a.Ne[3*g],b[1]=a.Ne[3*g+1],b[2]=a.Ne[3*g+2],b;return null}});w.a=f},
function(D,w,f){D=f(0);var N=f(5),U=f(35),n=f(4),y=f(70),d=f(45),m=f(28),C=f(1),v=f(18),r=f(2),p=f(22),z=f(12),a=f(9),H=f(75),k=f(3),c=f(10),l=f(48);f=Object(D.a)("__textures",function(b,h){function f(){Xa||(Xa=W.createFramebuffer());return Xa}function ka(){Va||(Va=W.createTexture());return Va}function u(){return{type:0,source:"",Ys:"",width:0,height:0,gr:1,anisotropic_filtering:0,Bk:1024,hl:!1,qh:null,Vb:0,hc:null,Tf:null,ej:!1,qq:-1,Qb:null,zt:"",Al:0,yh:0,rb:0,Mc:0,jl:0,Jh:!1,vi:1,Ee:!1,dH:0,pe:null,
Qs:0,Ps:0,yk:-1,Ss:!1,Pl:-1,At:!1,JC:!1,Mk:!1,gm:!1,repeat:!0,ol:"",Ro:"",Ym:"",xA:"",wA:"",nl:""}}function E(a,g,b){a.Ym=g.uuid;a.Ro=g.filepath;a.xA=g.source;a.wA=g.name;a.ol=Object(l.b)(b+g.filepath);a.nl=g.nh;-1==Ea.Ua.indexOf(a)&&(Ea.Ua.push(a),Ea.ap.push(!1))}function R(a,g,b){var e=-1<g.indexOf(".pvr");a.nl=-1<g.indexOf(".dds")?"dds":e?"pvr":"";a.Ro=g;a.ol=b;a.Ym=r._4();Ea.Ua.push(a);Ea.ap.push(!0)}function O(a,g,b){var e=u();e.type=a;e.source="NONE";e.Ee=b;if(a==h.Qt||a==h.Ot||a==h.Rt||a==
h.Pt)e.Tf=W.createRenderbuffer();else{var c=W.TEXTURE_2D,k=W.createTexture();W.bindTexture(c,k);W.texParameteri(c,W.TEXTURE_MAG_FILTER,W.LINEAR);b?W.texParameteri(c,W.TEXTURE_MIN_FILTER,La[za.Gk]):W.texParameteri(c,W.TEXTURE_MIN_FILTER,W.LINEAR);W.texParameteri(c,W.TEXTURE_WRAP_S,W.CLAMP_TO_EDGE);W.texParameteri(c,W.TEXTURE_WRAP_T,W.CLAMP_TO_EDGE);b=P(e);var d=q(e),l=I(e);W.texImage2D(c,0,d,1,1,0,b,l,a==h.nm?null:a==h.om?new Float32Array([204,204,204,255]):new Uint8Array([204,204,204,255]));za.er&&
g&&W.texParameterf(c,W.TEXTURE_COMPARE_MODE,W.COMPARE_REF_TO_TEXTURE);W.bindTexture(c,null);e.Vb=c;e.hc=k}return e}function L(a){var g=a.Vb;W.bindTexture(g,a.hc);var b=P(a),e=q(a),c=I(a),h=a.qh.canvas;W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,!0);W.texImage2D(g,0,e,b,c,h);W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,!1);a.hl&&W.generateMipmap(g);W.bindTexture(g,null);a.width=h.width;a.height=h.height}function B(a){var g=a.Vb;W.bindTexture(g,a.hc);W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,!0);4!=a.Qb.length?a.Jh?ha(a,
a.Qb,a.width*a.vi,a.height*a.vi,!1):W.texImage2D(g,0,W.RGBA,W.RGBA,W.UNSIGNED_BYTE,a.Qb):W.texImage2D(g,0,W.RGBA,1,1,0,W.RGBA,W.UNSIGNED_BYTE,a.Qb);W.bindTexture(g,null)}function Y(a){var g=a.Vb;W.bindTexture(g,a.hc);W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,!0);a.Jh?ha(a,a.pe[a.yk],a.width*a.vi,a.height*a.vi,!1):W.texImage2D(g,0,W.RGBA,W.RGBA,W.UNSIGNED_BYTE,a.pe[a.yk]);W.bindTexture(g,null)}function K(){Ba||(Ba=document.createElement("canvas"));return Ba}function ha(a,g,b,e,c){c||(V(W.TEXTURE_2D),W.texImage2D(W.TEXTURE_2D,
0,W.RGBA,W.RGBA,W.UNSIGNED_BYTE,g));W.bindTexture(W.TEXTURE_2D,null);g=f();c=ka();Aa.ZO(a,b,e,g,c)}function T(a,g,b,e){for(a=0;6>a;a++){var c=D[a],h=Ya[a],k=K();k.width=e;k.height=e;var d=k.getContext("2d");d.translate(e/2,e/2);"TEXTURE_CUBE_MAP_POSITIVE_X"==c?(d.rotate(Math.PI/2),d.scale(1,-1)):"TEXTURE_CUBE_MAP_NEGATIVE_X"==c?(d.rotate(Math.PI/2),d.scale(-1,1)):"TEXTURE_CUBE_MAP_POSITIVE_Y"==c||"TEXTURE_CUBE_MAP_POSITIVE_Z"==c?d.scale(1,-1):("TEXTURE_CUBE_MAP_NEGATIVE_Y"==c||"TEXTURE_CUBE_MAP_NEGATIVE_Z"==
c)&&d.scale(-1,1);d.drawImage(g,h[0]*b,h[1]*b,b,b,-e/2,-e/2,e,e);za.gF?W.texImage2D(W[c],0,W.RGBA,e,e,0,W.RGBA,W.UNSIGNED_BYTE,new Uint8Array(d.getImageData(0,0,e,e).data.buffer)):W.texImage2D(W[c],0,W.RGBA,W.RGBA,W.UNSIGNED_BYTE,k)}}function V(a){W.bindTexture(a,null);var g=ka();W.bindTexture(a,g);W.texParameteri(a,W.TEXTURE_WRAP_S,W.CLAMP_TO_EDGE);W.texParameteri(a,W.TEXTURE_WRAP_T,W.CLAMP_TO_EDGE);W.texParameteri(a,W.TEXTURE_MAG_FILTER,W.LINEAR);W.texParameteri(a,W.TEXTURE_MIN_FILTER,W.LINEAR)}
function A(a,b,e){var c=a.source,h=a.hc,k=a.Vb,d=a.nl,l=a.Ro;W.bindTexture(k,h);a.repeat?(W.texParameteri(k,W.TEXTURE_WRAP_S,W.REPEAT),W.texParameteri(k,W.TEXTURE_WRAP_T,W.REPEAT)):(W.texParameteri(k,W.TEXTURE_WRAP_S,W.CLAMP_TO_EDGE),W.texParameteri(k,W.TEXTURE_WRAP_T,W.CLAMP_TO_EDGE));a.ej||"NODE_TEX"==c?W.texParameteri(k,W.TEXTURE_MIN_FILTER,W.LINEAR):W.texParameteri(k,W.TEXTURE_MIN_FILTER,La[za.Gk]);a.anisotropic_filtering&&W.texParameterf(k,ia.$z().TEXTURE_MAX_ANISOTROPY_EXT,a.anisotropic_filtering);
if(4==b.length){var q=!0;b=new Uint8Array([255*b[0],255*b[1],255*b[2],255*b[3]])}if("IMAGE"==c)if(q)W.texImage2D(k,0,W.RGBA,1,1,0,W.RGBA,W.UNSIGNED_BYTE,b),a.width=1,a.height=1;else if(d){q=la.bG(b,d);e=r.L(q.width)||r.L(q.height);if(q.width>Fa.Ic||q.height>Fa.Ic){ra.error('Image "'+l+'" has unsupported size: '+q.width+"x"+q.height+". Max available: "+Fa.Ic+"x"+Fa.Ic+".");return}c=q.width;q=q.height;if(e||"pvr"==d)a.Jh=!0,V(k),c=J(c*a.vi),q=J(q*a.vi);"dds"==d?la.nV(W,ia.XF(),b,!0):"pvr"==d&&la.oV(W,
ia.WF(),b);a.Jh&&(ha(a,null,c,q,!0),W.bindTexture(k,h),W.generateMipmap(k));a.width=c;a.height=q;a.gr=la.YP(b,d)}else{W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,!0);a.ej?za.Rs?(c=b[0].width,q=b[0].height):(c=b.videoWidth,q=b.videoHeight):(c=b.width,q=b.height);a.width=c;a.height=q;if(c>Fa.Ic||q>Fa.Ic)ra.warn('Image "'+l+'" has unsupported size: '+c+"x"+q+". Max available: "+Fa.Ic+"x"+Fa.Ic+". Reduced image size will be used."),a.vi=Math.min(Fa.Ic/c,Fa.Ic/q),a.Jh=!0;a.ej&&(e in Ua||(Ua[e]={}),Ua[e][a.zt]=
a,za.Rs?(a.pe=b,a.Qs=b.length,a.yh=a.Ps*a.Al/b.length,b=b[0]):(a.Qb=b,a.Qb.loop=a.Mk,a.yh=b.duration?a.Al/b.duration:Q.ke(),g.oF||(b.playbackRate=Q.ke()/a.yh,g.BE&&2<b.playbackRate&&(b.playbackRate=2)),aa(a)));c=J(a.width*a.vi);q=J(a.height*a.vi);a.Jh||za.OH?(l=K(),d=l.getContext("2d"),l.width=c,l.height=q,d.drawImage(b,0,0,a.width,a.height,0,0,c,q),za.gF?W.texImage2D(k,0,W.RGBA,c,q,0,W.RGBA,W.UNSIGNED_BYTE,new Uint8Array(d.getImageData(0,0,c,q).data.buffer)):W.texImage2D(k,0,W.RGBA,W.RGBA,W.UNSIGNED_BYTE,
l)):za.Ib||!r.L(a.width)&&!r.L(a.height)?W.texImage2D(k,0,W.RGBA,W.RGBA,W.UNSIGNED_BYTE,b):(ha(a,b,c,q,!1),a.Jh=!0);a.width=c;a.height=q;a.ej||(W.bindTexture(k,h),W.generateMipmap(k))}else if("ENVIRONMENT_MAP"==c)if(q){for(h=0;6>h;h++)W.texImage2D(W["TEXTURE_CUBE_MAP_"+D[h]],0,W.RGBA,1,1,0,W.RGBA,W.UNSIGNED_BYTE,b);a.width=3;a.height=2}else{W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,!1);if(b.width%3||b.height%2){ra.error('Cubemap Image "'+l+'" has unsupported size: '+b.width+"x"+b.height+". The width must be multiple of three and the height - multiple of two.");
return}h=b.width/3;h>Fa.Xg?(ra.warn('Cubemap Image "'+l+'" has unsupported size: '+b.width+"x"+b.height+". Max available: "+3*Fa.Xg+"x"+2*Fa.Xg+". Reduced image size will be used."),l=J(Fa.Xg/h*h),a.Jh=!0):(l=J(h),!za.Ib&&(3*l>Fa.Ic||2*l>Fa.Ic)&&(a.Jh=!0));if(a.Jh||za.Is)T(a,b,h,l);else{d=b;c=l;V(W.TEXTURE_2D);W.texImage2D(W.TEXTURE_2D,0,W.RGBA,W.RGBA,W.UNSIGNED_BYTE,d);W.bindTexture(W.TEXTURE_2D,null);for(d=0;6>d;d++)W.texImage2D(W.TEXTURE_CUBE_MAP_POSITIVE_X+d,0,W.RGBA,c,c,0,W.RGBA,W.UNSIGNED_BYTE,
null);W.bindTexture(a.Vb,null);d=f();W.bindFramebuffer(W.FRAMEBUFFER,d);q=ka();for(d=0;6>d;d++)Aa.YO(a,W[D[d]],c,h,q,d);W.bindFramebuffer(W.FRAMEBUFFER,null);W.bindTexture(a.Vb,a.hc);W.texParameteri(a.Vb,W.TEXTURE_MIN_FILTER,La[za.Gk]);W.texParameteri(a.Vb,W.TEXTURE_MAG_FILTER,W.LINEAR)}sa.pP()&&(ra.warn("Firefox detected, setting max cubemap size to 256, use canvas for resizing."),T(a,b,h,ua.qD));a.width=3*l;a.height=2*l;W.generateMipmap(k)}else"NODE_TEX"==c&&(W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,
!1),W.texImage2D(k,0,W.RGBA,b.width,b.height,0,W.RGBA,W.UNSIGNED_BYTE,b.data),a.width=b.width,a.height=b.height);W.bindTexture(k,null)}function aa(a){a.Qb.oncanplay=function(){pa(a)&&B(a)}}function J(a){return r.L(a)?r.M(Math.pow(2,(a|0).toString(2).length),2,Fa.Ic):a}function P(a){switch(a.type){case h.Xh:var g=W.RGBA;break;case h.St:g=W.RGB;break;case h.om:g=W.RGBA;break;case h.Bq:g=W.RGB;break;case h.nm:g=W.DEPTH_COMPONENT;break;default:Ha.va("Wrong texture type")}return g}function q(a){switch(a.type){case h.Xh:var g=
za.Ib?W.RGBA8:W.RGBA;break;case h.St:g=za.Ib?W.RGB8:W.RGB;break;case h.om:g=za.Ib?W.RGBA32F:W.RGBA;break;case h.Bq:g=za.Ib?W.RGB8:W.RGB;break;case h.nm:g=za.Ib?da(Fa.xo):W.DEPTH_COMPONENT;break;default:Ha.va("Wrong texture type")}return g}function da(a){switch(a){case 16:a=W.DEPTH_COMPONENT16;break;case 24:a=W.DEPTH_COMPONENT24;break;case 32:a=W.DEPTH_COMPONENT32F;break;default:a=W.DEPTH_COMPONENT24}return a}function I(a){switch(a.type){case h.Xh:var g=W.UNSIGNED_BYTE;break;case h.St:g=W.UNSIGNED_BYTE;
break;case h.om:g=W.FLOAT;break;case h.Bq:g=W.FLOAT;break;case h.nm:g=W.UNSIGNED_INT;break;default:Ha.va("Wrong texture type")}return g}function t(a){a.Qb?a.Qb.play():a.pe&&(a.Ss=!0);a.At=!1}function e(a){a.Qb?a.Qb.pause():a.pe&&(a.Ss=!1);a.At=!0}function ma(a){a.Qb?a.Qb.currentTime=a.Mc/a.yh:a.pe&&(a.yk=ta(a,a.Mc),Y(a))}function ja(a){return a.Qb?!a.Qb.paused:a.pe?a.Ss:!1}function pa(a){return a.Qb||a.pe?a.Qb?2<=a.Qb.readyState:!0:0}function ta(a,g){return Math.round(g*a.Qs/a.Al)}function w(a,g){if(qa.is_dynamic(a))return oa(a,
g);a=a.gs;for(var b=0;b<a.length;b++){var e=oa(a[b],g);if(e)return e}return null}function M(a,g,b){if(qa.is_dynamic(a))ca(a,g,b);else{a=a.gs;for(var e=0;e<a.length;e++)ca(a[e],g,b)}}function oa(a,g){a=a.Aa;if(a.length){a=a[0].Ia;for(var b=0;b<a.length;b++){var e=a[b];if("MAIN"==e.type||"SKY"==e.type)for(var c=0;c<e.Ua.length;c++)if(e.bg[c]==g)return e.Ua[c]}}return null}function ca(a,g,b){a=a.Aa;if(a.length){a=a[0].Ia;for(var e=0;e<a.length;e++){var c=a[e];if("MAIN"==c.type)for(var h=0;h<c.Ua.length;h++)if(c.bg[h]==
g){var k=c.Ua[h];c.Ua[h]=b;wa(k)}}}}function ea(a,g){a=a.Aa;if(a.length){a=a[0].Ia;for(var b=0;b<a.length;b++){var e=a[b];if("MAIN"==e.type)for(var c=0;c<e.Ua.length;c++){var h=e.Ua[c],k=e.bg[c];-1==g.indexOf(k)&&"NODE_TEX"!=h.source&&g.push(k)}}}}function Da(a,g,b){var e=a.elements;a=a.interpolation;for(var c=0;c<g;c++){var h=c/(g-1),k=S(e,h,!0),d=Na(e,h,!0);if(k&&d)if("CONSTANT"==a)b.push.apply(b,k.color);else{var l=b,q=k,t=d;q==t?l.push.apply(l,q.color):(l.push(na.fw(t.color[0],t.position,q.color[0],
q.position,h)),l.push(na.fw(t.color[1],t.position,q.color[1],q.position,h)),l.push(na.fw(t.color[2],t.position,q.color[2],q.position,h)),l.push(na.fw(t.color[3],t.position,q.color[3],q.position,h)))}d&&!k&&b.push.apply(b,d.color);k&&!d&&b.push.apply(b,k.color)}}function S(a,g,b){for(var e=null,c=0;c<a.length;c++){var h=b?g-a[c].position:g-a[c][1][0];0<=h&&(e?h<=(b?g-e.position:g-a[c][1][0])&&(e=a[c]):e=a[c])}return e}function Na(a,g,b){for(var e=null,c=0;c<a.length;c++){var h=b?a[c].position-g:a[c][1][0]-
g;0<=h&&(e?h<=(b?e.position-g:e[1][0]-g)&&(e=a[c]):e=a[c])}return e}function wa(a){var g;if(!(g=za.enable_texture_cache))a:{g=ya.get_all_objects("ALL",ya.DATA_ID_ALL);for(var b=0;b<g.length;b++){var e=g[b];if(X(e,a)){g=!0;break a}e=e.gs;for(var c=0;c<e.length;c++)if(X(e[c],a)){g=!0;break a}}g=!1}g||(a.hc&&W.deleteTexture(a.hc),a=Ea.Ua.indexOf(a),-1!=a&&(Ea.Ua.splice(a,1),Ea.ap.splice(a,1)))}function X(a,g){for(var b=0;b<a.Aa.length;b++)for(var e=a.Aa[b].Ia,c=0;c<e.length;c++)for(var h=e[c].Ua,k=0;k<
h.length;k++)if(h[k]==g)return!0}function Ga(a,g){for(var b=0;b<Ea.Ua.length;b++){var e=Ea.Ua[b];if(e.ol==a&&e.type==g.type&&e.source==g.source&&e.repeat==g.repeat&&e.anisotropic_filtering==g.anisotropic_filtering&&e.gm==g.gm)return e}return null}var Ha=Object(N.a)(b),ua=Object(U.a)(b),Ca=Object(n.a)(b),la=Object(y.a)(b),sa=Object(d.a)(b),ia=Object(m.a)(b),ra=Object(C.a)(b),Q=Object(v.a)(b),Aa=Object(p.a)(b),ya=Object(z.a)(b),qa=Object(a.a)(b),na=Object(H.a)(b),xa=Object(c.a)(b),za=Ca.wa,Fa=Ca.di,
g=Ca.Ra,Ba=null,Va=null,Xa=null;h.We=0;h.Ca=0;h.OL=0;h.ML=0;h.NL=0;h.Gi=0;h.Xh=10;h.St=20;h.om=30;h.Bq=40;h.nm=50;h.Qt=60;h.Ot=70;h.Rt=80;h.Pt=90;h.YC=128;h.NJ=128;h.uD=128;var Ea={Ua:[],ap:[]},Za={},Ua={},W=null,La,D="TEXTURE_CUBE_MAP_POSITIVE_X TEXTURE_CUBE_MAP_NEGATIVE_X TEXTURE_CUBE_MAP_POSITIVE_Y TEXTURE_CUBE_MAP_NEGATIVE_Y TEXTURE_CUBE_MAP_POSITIVE_Z TEXTURE_CUBE_MAP_NEGATIVE_Z".split(" "),Ya=[[2,0],[0,0],[2,1],[1,0],[1,1],[0,1]];h.fh=function(a){La=[a.NEAREST_MIPMAP_NEAREST,a.NEAREST_MIPMAP_LINEAR,
a.LINEAR_MIPMAP_NEAREST,a.LINEAR_MIPMAP_LINEAR];h.We=a.NEAREST;h.Ca=a.LINEAR;h.OL=a.NEAREST_MIPMAP_NEAREST;h.ML=a.LINEAR_MIPMAP_NEAREST;h.NL=a.NEAREST_MIPMAP_LINEAR;h.Gi=a.LINEAR_MIPMAP_LINEAR;W=a};h.wX=function(a,g){return g in Za&&a in Za[g]?Za[g][a].qh:null};h.SY=function(a,g){return g in Za&&a in Za[g]?(L(Za[g][a]),!0):!1};h.OD=E;h.Sj=O;h.LN=function(a,g){var b=W.createTexture(),e=W.TEXTURE_CUBE_MAP;W.bindTexture(e,b);W.texParameteri(e,W.TEXTURE_MAG_FILTER,W.LINEAR);g?W.texParameteri(e,W.TEXTURE_MIN_FILTER,
La[za.Gk]):W.texParameteri(e,W.TEXTURE_MIN_FILTER,W.LINEAR);W.texParameteri(e,W.TEXTURE_WRAP_S,W.CLAMP_TO_EDGE);W.texParameteri(e,W.TEXTURE_WRAP_T,W.CLAMP_TO_EDGE);for(var c=0;6>c;c++)W.texImage2D(W[D[c]],0,W.RGBA,a,a,0,W.RGBA,W.UNSIGNED_BYTE,null);W.bindTexture(e,null);e=u();e.type=h.Xh;e.source="NONE";e.width=3*a;e.height=2*a;e.gr=1;e.Ee=g;e.hc=b;e.Vb=W.TEXTURE_CUBE_MAP;return e};h.ex=function(a,g){var b=a.Vb;W.bindTexture(b,a.hc);for(var e=0;6>e;e++)W.texImage2D(W[D[e]],0,W.RGBA,g,g,0,W.RGBA,W.UNSIGNED_BYTE,
null);W.bindTexture(b,null);a.width=3*g;a.height=2*g};h.TB=function(a,g,b){var e=a.Vb;W.bindTexture(e,a.hc);g&&W.texParameteri(e,W.TEXTURE_MIN_FILTER,g);b&&W.texParameteri(e,W.TEXTURE_MAG_FILTER,b);W.bindTexture(e,null)};h.resize=function(a,g,b){g=Math.max(g,1);b=Math.max(b,1);if(a.width!=g||a.height!=b){switch(a.type){case h.Qt:W.bindRenderbuffer(W.RENDERBUFFER,a.Tf);W.renderbufferStorage(W.RENDERBUFFER,W.RGB565,g,b);W.bindRenderbuffer(W.RENDERBUFFER,null);break;case h.Ot:W.bindRenderbuffer(W.RENDERBUFFER,
a.Tf);W.renderbufferStorage(W.RENDERBUFFER,da(Fa.xo),g,b);W.bindRenderbuffer(W.RENDERBUFFER,null);break;case h.Rt:W.bindRenderbuffer(W.RENDERBUFFER,a.Tf);W.renderbufferStorageMultisample(W.RENDERBUFFER,za.Jc,W.RGBA8,g,b);W.bindRenderbuffer(W.RENDERBUFFER,null);break;case h.Pt:W.bindRenderbuffer(W.RENDERBUFFER,a.Tf);W.renderbufferStorageMultisample(W.RENDERBUFFER,za.Jc,da(Fa.xo),g,b);W.bindRenderbuffer(W.RENDERBUFFER,null);break;default:var e=a.Vb;W.bindTexture(e,a.hc);var c=P(a),k=q(a),d=I(a);a.Ee&&
(za.Ib||(b=Math.max(g,b),g=J(b),b=J(b)),a.dH=Math.round(Math.log(Math.max(g,b))/Math.log(2)+.5));W.texImage2D(e,0,k,g,b,0,c,d,null);W.bindTexture(e,null)}g>Fa.Ic||b>Fa.Ic?Ha.va('Slink texture "'+a.type+'" has unsupported size: '+g+"x"+b+". Max available: "+Fa.Ic+"x"+Fa.Ic+"."):(a.width=g,a.height=b)}};h.FO=function(a,g,b,e,c){var k=a.type;if("BLEND"==k)return null;var d=a.image,q=u();q.type=h.Xh;q.width=1;q.height=1;if(za.Zy){var t=a.b4w_anisotropic_filtering;"DEFAULT"===t&&(t=g);"OFF"!==t&&za.anisotropic_filtering&&
(g=parseFloat(t.split("x")[0]),q.anisotropic_filtering=g)}if("REPEAT"!=a.extension||a.b4w_shore_dist_map)q.repeat=!1;if(d){"IMAGE"==k&&"MOVIE"==d.source&&(q.ej=!0,q.zt=a.name,q.rb=a.frame_start,q.Mc=a.frame_offset,q.jl=a.frame_duration,q.JC=a.use_auto_refresh,q.Mk=a.use_cyclic,q.Al=a.movie_length,q.gm=a.b4w_nla_video,0!=q.Mc&&ra.warn('Frame offset for texture "'+a.name+'" has a nonzero value. Can lead to undefined behaviour for mobile devices.'));q.source=k;g=Object(l.b)(c+d.filepath);if(g=Ga(g,q))return g;
E(q,d,c)}g=new Uint8Array([204,204,204,255]);switch(k){case "IMAGE":c=W.createTexture();d=W.TEXTURE_2D;W.bindTexture(d,c);W.texImage2D(d,0,W.RGBA,1,1,0,W.RGBA,W.UNSIGNED_BYTE,g);break;case "NONE":if("NONE"==a.b4w_source_type)return null;c=W.createTexture();d=W.TEXTURE_2D;q.source=a.b4w_source_type;if("SCENE"==q.source){if(!a.b4w_source_id)return null;e=r._19("name",a.b4w_source_id,b);if(!e)return null;q.Ys=a.b4w_source_id;q.Bk=a.b4w_source_size;e.Hg=e.Hg||[];e.Hg.push(q);W.bindTexture(d,c);W.texImage2D(d,
0,W.RGBA,1,1,0,W.RGBA,W.UNSIGNED_BYTE,g)}else"CANVAS"==q.source&&(b=a.b4w_source_id,g=a.b4w_source_size,q.Ys=b,q.hl=a.b4w_enable_canvas_mipmapping,a=document.createElement("canvas"),a.width=g,a.height=g,q.qh=a.getContext("2d"),e in Za||(Za[e]={}),Za[e][b]=q,W.bindTexture(d,c));break;case "ENVIRONMENT_MAP":c=W.createTexture();d=W.TEXTURE_CUBE_MAP;W.bindTexture(d,c);a="POSITIVE_X NEGATIVE_X POSITIVE_Y NEGATIVE_Y POSITIVE_Z NEGATIVE_Z".split(" ");for(e=0;6>e;e++)W.texImage2D(W["TEXTURE_CUBE_MAP_"+a[e]],
0,W.RGBA,1,1,0,W.RGBA,W.UNSIGNED_BYTE,g);break;default:return ra.error('texture "'+a.name+'" has unsupported type "'+k+'"'),null}q.hc=c;q.Vb=d;"NONE"==k?(q.hl?W.texParameteri(d,W.TEXTURE_MIN_FILTER,La[za.Gk]):W.texParameteri(d,W.TEXTURE_MIN_FILTER,W.LINEAR),q.anisotropic_filtering&&W.texParameterf(d,ia.$z().TEXTURE_MAX_ANISOTROPY_EXT,q.anisotropic_filtering),"CANVAS"==q.source&&L(q)):(W.generateMipmap(d),W.bindTexture(d,null));return q};h.lV=L;h.iJ=B;h.hJ=Y;h.ot=A;h.jz=J;h.Xo=function(a){return a&&
(a.hc||a.Tf)?!0:!1};h.Vo=function(a){return a&&a.Tf?!0:!1};h.bY=function(a){return a.type==h.om||a.type==h.Bq?!0:!1};h.AQ=function(a){var g=0;switch(a.type){case h.Xh:case h.St:g=4;break;case h.om:case h.Bq:g=32;break;case h.nm:g=3;break;case h.Qt:case h.Ot:g=2;break;case h.Rt:g=4*za.Jc;break;case h.Pt:g=3*za.Jc}return g};h.cleanup=function(){if(!za.Rs)for(var a in Ua)for(var g in Ua[a])Ua[a][g].Qb.pause(),Ua[a][g].Qb.src="",Ua[a][g].Qb.load();Ea.Ua.length=0;Ea.ap.length=0;Za={};Ua={}};h.pause=function(){for(var a in Ua)for(var g in Ua[a]){var b=
Ua[a][g];ja(b)&&e(b)}};h.reset=function(){for(var a in Ua)for(var g in Ua[a])ma(Ua[a][g])};h.play=function(a){for(var g in Ua)for(var b in Ua[g]){var e=Ua[g][b];a&&!e.At||t(e)}};h.lA=function(a,g){return g in Ua&&a in Ua[g]?Ua[g][a]:null};h.PC=function(a){return a.gm};h.play_video=t;h.pause_video=e;h.reset_video=ma;h.tT=function(a,g,b){b in Ua&&a in Ua[b]&&(a=Ua[b][a],a.Qb?a.Qb.currentTime=g/a.yh:a.pe&&(a.yk=g,Y(a)))};h.BJ=ja;h.CJ=pa;h.yJ=function(a){return a.Qb||a.pe?a.Qb?Math.round(a.Qb.currentTime*
a.yh):a.yk:0};h.AJ=function(a){return a.Qb||a.pe?a.Qb?a.Mc:ta(a,a.Mc):0};h.AV=function(a){if(!a.Qb&&!a.pe)return 0;var g=Math.min(a.jl,a.Al-a.Mc);return a.Qb?a.Mc+g:ta(a,a.Mc+g)};h.cx=function(a,g){return Math.round(g*a.Ps*(Q.ke()/a.yh))};h.zJ=function(a){return Math.min(a.jl,a.Al-a.Mc)};h.zV=ta;h.UP=function(a,g){return(a=w(a,g))&&"CANVAS"==a.source?a.qh:null};h.wv=w;h.IT=M;h.get_texture_names=function(a){var g=[];if(qa.is_dynamic(a))ea(a,g);else{a=a.gs;for(var b=0;b<a.length;b++)ea(a[b],g)}return g};
h.TT=function(a){for(var g={},b=0;b<a.length;b++){for(var e=a[b].Ua,c=a[b].vg,h=[],k=[],d=0;d<e.length;d++){var l=e[d],q=c[d];if("CANVAS"==l.source)if(q in g)l=g[q];else{var t=e[d];l=u();l.source="CANVAS";l.width=t.width;l.height=t.height;l.hl=t.hl;l.type=t.type;t=document.createElement("canvas");t.width=l.width;t.height=l.height;l.qh=t.getContext("2d");l.Vb=W.TEXTURE_2D;l.hc=W.createTexture();W.bindTexture(W.TEXTURE_2D,l.hc);l.hl?W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MIN_FILTER,La[za.Gk]):W.texParameteri(W.TEXTURE_2D,
W.TEXTURE_MIN_FILTER,W.LINEAR);W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MAG_FILTER,W.LINEAR);W.bindTexture(W.TEXTURE_2D,null);t=l;t.qh.drawImage(e[d].qh.canvas,0,0);L(t);g[q]=l}h.push(l);k.push(q)}a[b].Ua=h}};h.iP=function(a,g){for(var b=[],e=0;e<a.length;e++)Da(a[e].data.value.color_ramp,g,b);return new Uint8Array(b.map(function(a){return r.M(255*a,0,255)}))};h.TM=Da;h.mP=function(a,g){for(var b=new Float32Array(3),e=new Float32Array(3),c=[],h=0;h<a.length;h++){var d=a[h].data.value,l=[],q=d.curve_mapping.curves_data,
t=d.curve_mapping.curve_extend,f=d.curve_mapping.curves_handle_types;for(d=0;d<q.length;d++){for(var m=t[d],A=q[d],u=[],v=f[d],p=0;p<A.length;p++)u.push([new Float32Array(3),new Float32Array(A[p].concat(0)),new Float32Array(3)]);na.kz(u[0],null,u[1],v[0],v[0]);for(p=1;p<u.length-1;p++)na.kz(u[p],u[p-1],u[p+1],v[p],v[p]);na.kz(u[u.length-1],u[u.length-2],null,v[u.length-1],v[u.length-1]);if(2<u.length){if("AUTO"==v[0]){k.subtract(u[0][2],u[0][1],b);p=k.length(b);k.copy(u[1][0],e);e[0]<u[0][1][0]&&
(e[0]=u[0][1][0]);k.subtract(e,u[0][1],e);var T=k.length(e);1E-8<T&&(k.scale(e,p/T,e),k.add(u[0][1],e,u[0][2]),k.subtract(u[0][1],e,u[0][0]))}A=u.length-1;"AUTO"==v[0]&&(k.subtract(u[A][0],u[A][1],b),p=k.length(b),k.copy(u[A-1][2],e),e[0]>u[A][1][0]&&(e[0]=u[A][1][0]),k.subtract(e,u[A][1],e),T=k.length(e),1E-8<T&&(k.scale(e,p/T,e),k.add(u[A][1],e,u[A][0]),k.subtract(u[A][1],e,u[A][2])))}for(A=0;A<u.length-1;A++)na.zN(u[A][1],u[A][2],u[A+1][0],u[A+1][1]);A=[];3>=q.length?(p=Math.round(-g/2),v=Math.round(g/
2)):(p=0,v=g);for(;p<v;p++){T=p/(v-1);var J=S(u,T,!1),n=Na(u,T,!1);J&&n?A.push(na.GM(T,J[1],J[2],n[0],n[1])):n&&!J?"EXTRAPOLATED"==m?(T=n[1][0]==n[2][0]?n[1][1]:na.LG(T,n[1],n[2]),A.push(T)):A.push(n[1][1]):J&&!n&&("EXTRAPOLATED"==m?(T=J[0][0]==J[1][0]?J[1][1]:na.LG(T,J[0],J[1]),A.push(T)):A.push(J[1][1]))}l.push(A)}c.push(l)}a=[];for(p=0;p<c.length;p++)for(l=c[p],d=0;d<l[0].length;d++)3>=l.length?(g=r.M(127.5*(l[0][d]+1),0,255),b=r.M(127.5*(l[1][d]+1),0,255),e=r.M(127.5*(l[2][d]+1),0,255),A=255):
(g=r.M(255*l[0][d],0,255),b=r.M(255*l[1][d],0,255),e=r.M(255*l[2][d],0,255),A=r.M(255*l[3][d],0,255)),a.push(g,b,e,A);return new Uint8Array(a)};h.UE=function(a,g){var b=O(h.Xh,!1);b.source="NODE_TEX";b.repeat=!1;A(b,{width:g,height:a.length/(4*g),data:a});return b};h.change_image=function(a,g,b,e,c){var h=Object(l.b)(c);if("WORLD"!=a.type){var k=Ga(h,g);if(!k){k=u();k.type=g.type;k.anisotropic_filtering=g.anisotropic_filtering;k.source=g.source;k.Ys=g.Ys;k.width=g.width;k.height=g.height;k.gr=g.gr;
k.Bk=g.Bk;k.hl=g.hl;k.qh=g.qh;k.Vb=g.Vb;k.hc=g.hc;k.Tf=g.Tf;k.ej=g.ej;k.qq=g.qq;k.Qb=g.Qb;k.zt=g.zt;k.Al=g.Al;k.yh=g.yh;k.rb=g.rb;k.Mc=g.Mc;k.jl=g.jl;k.Jh=g.Jh;k.vi=g.vi;k.pe=g.pe;k.Qs=g.Qs;k.Ps=g.Ps;k.yk=g.yk;k.Ss=g.Ss;k.Pl=g.Pl;k.At=g.At;k.JC=g.JC;k.Mk=g.Mk;k.gm=g.gm;k.repeat=g.repeat;k.Ro=g.Ro;k.ol=g.ol;k.Ym=g.Ym;k.xA=g.xA;k.wA=g.wA;k.nl=g.nl;var d=k;W.bindTexture(g.Vb,g.hc);var q=W.getTexParameter(g.Vb,W.TEXTURE_MAG_FILTER),t=W.getTexParameter(g.Vb,W.TEXTURE_MIN_FILTER),f=W.getTexParameter(g.Vb,
W.TEXTURE_WRAP_S);g=W.getTexParameter(g.Vb,W.TEXTURE_WRAP_T);d.hc=W.createTexture();W.bindTexture(d.Vb,d.hc);W.texParameteri(d.Vb,W.TEXTURE_MAG_FILTER,q);W.texParameteri(d.Vb,W.TEXTURE_MIN_FILTER,t);W.texParameteri(d.Vb,W.TEXTURE_WRAP_S,f);W.texParameteri(d.Vb,W.TEXTURE_WRAP_T,g);W.bindTexture(d.Vb,null);R(k,c,h);A(k,e,0)}M(a,b,k)}else k=g,R(k,c,h),A(k,e,0),xa.PU(a,k),xa.ey(a)};h.FE=wa;h.hf=function(a){return a.texture.sa};h.VS=function(){W=null};h.TF=function(){return Ea.Ua};h.TP=function(a){a=Ea.Ua.indexOf(a);
return-1==a?!1:Ea.ap[a]};h.kT=function(a){a=Ea.Ua.indexOf(a);-1!=a&&(Ea.ap[a]=!0)}});w.a=f},function(D,w,f){D=f(0);var N=f(4);f=Object(D.a)("__time",function(f,n){function y(){return-1!==d.Wk.hv?d.Wk.hv:a}var d=Object(N.a)(f),m=0,C=0,v=[],r=0,p=0,z=[],a=-1,H=0;n.iI=function(a){m=a;C=performance.now();for(a=0;a<v.length;a++){var c=v[a];m>c.Pz&&(v.splice(a,1),a--,c.callback())}for(a=0;a<z.length;a++){c=z[a];var k=1-(c.Pz-m)/c.duration;k=Math.min(k,1);c.callback(c.from+k*(c.to-c.from));1==k&&(z.splice(a,
1),a--)}};n.get_timeline=function(){return m};n.rT=function(a){H=a};n.cQ=function(){return H};n.set_timeout=function(a,c){r++;var k=r;v.push({id:k,callback:a,Pz:m+(performance.now()-C+c)/1E3});return k};n.clear_timeout=function(a){for(var c=0;c<v.length;c++)if(v[c].id==a){v.splice(c,1);break}};n.clear_animation=function(a){for(var c=z.length;c--;)if(z[c].id==a){z.splice(c,1);break}};n.animate=function(a,c,d,b){d/=1E3;p++;var h=p;z.push({id:h,callback:b,from:a,to:c,Pz:m+d,duration:d});b(a);return h};
n.reset=function(){C=m=0;v.length=0;p=r=z.length=0};n.ke=y;n.uT=function(k){a=k};n.get_frame=function(a){return a*y()}});w.a=f},function(D,w,f){D=f(0);var N=f(5),U=f(4),n=f(63),y=f(87),d=f(9),m=f(1),C=f(8),v=f(10),r=f(11),p=f(13),z=f(6),a=f(2),H=f(3),k=f(37),c=f(73),l=f(16);f=Object(D.a)("__physics",function(b,h){function f(a,g){a=a.bf;for(var b=0;b<a.length;b++)a[b].Fd.aq&&g.push(a[b]),f(a[b],g);return null}function ka(a,g,b){for(var e=a.cd.jb,c=0;c<e.length;c++)for(var h=e[c].xa,k=0;k<h.dg.length;k++){var d=
h.dg[k];"ANY"!=d.Rb&&b!=d.Rb||da(d,a,g)}}function u(a,g,b){if(S.Sv(a))switch(g){case S.aK:var c=E(a);c.cd.IJ=!0;S.Ta(a,S.oL,Date.now()-performance.now(),la.max_fps,la.iz?sa.CF:0);break;case S.bK:wa.Wd("URANIUM:",b.slice(1));break;case S.XJ:wa.error(b);break;case S.YJ:Da.fbmsg.apply(this,b.slice(1));break;case S.fD:(a=O(b.Ja))&&Ba(a,b.time,b.trans,b.quat,b.ij,b.Ji);break;case S.dD:(a=O(b.mz))&&z.t(b.trans,1,b.quat,a.Ba.Bs[b.BB]);break;case S.ZJ:if(c=O(b[1]))a=b[4],c=c.wh.ju[b[2]],Ha.set_translation(c,
b[3]),Ha.set_rotation(c,a),Ha.Ea(c);break;case S.eK:if(a=O(b[1]))a.Ba.speed=b[2];break;case S.bD:c=E(a);L(c,b.zm,b.Am,b.result,null,null,0);break;case S.cD:c=E(a);L(c,b.zm,b.Am,b.result,b.Dm,b.coll_norm,b.coll_dist);break;case S.VJ:if(a=O(b[1]))a=a.xa,a.Cm&&a.Cm(b[2]);break;case S.My:case S.eD:c=E(a);if(a=c.cd.Ll[b.id])if(c=O(b.oo),g==S.My)g=a.callback,g(a.id,b.hit_fract,c,b.hit_time);else{g=b.hit_fract;var h=b.hit_time,k=b.hit_pos,d=a.callback;k?d(a.id,g,c,h,k,b.hit_norm):d(a.id,g,c,h)}break;case S.dK:e(b.id);
break;case S.cK:a=Q.indexOf(a);wa.log("Physics #"+a+" Ping: OUT "+(b[2]-b[1]).toFixed(3)+" ms, IN "+(performance.now()-b[2]).toFixed(3)+" ms, ALL "+(performance.now()-b[1]).toFixed(3)+" ms");break;case S.$J:ra=b[1];break;case S.WJ:a=Q.indexOf(a);wa.log("Worker: #"+String(a));wa.log(b[1]);break;default:wa.error("Wrong message: "+g)}}function E(a){for(var g=0;g<Q.length;g++)if(Q[g]==a)return Aa[g]}function R(a){for(var g=0;g<Aa.length;g++)if(Aa[g]==a)return Q[g]}function O(a){return ya[a]||null}function L(a,
g,b,e,c,h,k){a=a.cd.jb;for(var d=0;d<a.length;d++)for(var l=a[d].xa,q=0;q<l.dg.length;q++){for(var t=l.dg[q],f=t.Il,m=!1,A=0;A<f.length;A++){var u=f[A];if(u[0]===g&&u[1]===b){t.ps[A]=e;m=!0;break}}m&&(f=B(t),c&&t.fz!=g&&(m=c,A=h,u=k,m[0]+=A[0]*u,m[1]+=A[1]*u,m[2]+=A[2]*u,A[0]*=-1,A[1]*=-1,A[2]*=-1),t.callback(f,f?t.fz==g?O(b):O(g):null,c,h,k))}}function B(a){a=a.ps;for(var g=!1,b=0;b<a.length;b++)g=g||a[b];return g}function Y(){xa.body++;return xa.body}function K(a,g,b){b=b?a.xa.Ja:Y();var e=g.$d;
return{Ja:b,$d:e,positions:e.Va[0].a_position,ab:e.ab||null,trans:z.j(a.ka.na,za),ve:g.ve,Js:g.th,Rb:g.Rb,Og:ha(g.Rb),$e:g.$e,Ze:g.Ze,af:g.af}}function ha(a){var g=na.indexOf(a);return-1==g?(na.push(a),na.length-1):g}function T(a,g){return{Ja:a,type:g,mf:0,sl:!1,Rl:!0,mg:!1,is_character:!1,bR:!1,xu:null,Rb:"",Og:0,ZW:{},dg:[],Cm:null,Du:0,Ez:z.b(),ij:new Float32Array(3),Ji:new Float32Array(3),nu:new Float32Array(3),Uq:new Float32Array(4),ks:null}}function V(a,g){switch(a){case "BOX":var b=g.gb;break;
case "CYLINDER":b=g.Mq;break;case "CONE":b=g.Lq;break;case "SPHERE":b=g.Xc;break;case "CAPSULE":b=g.Kq}return b}function A(a){if(!a)return null;var g={};"number"===typeof a.min_x&&(g.min_x=a.min_x);"number"===typeof a.min_y&&(g.min_y=a.min_y);"number"===typeof a.min_z&&(g.min_z=a.min_z);"number"===typeof a.max_x&&(g.max_x=a.max_x);"number"===typeof a.max_y&&(g.max_y=a.max_y);"number"===typeof a.max_z&&(g.max_z=a.max_z);"object"===typeof a.Da&&(g.center=a.Da);"number"===typeof a.Lb&&(g.radius=a.Lb);
"number"===typeof a.height&&(g.height=a.height);return g}function aa(a){return a.xa&&a.xa.xu}function J(a,g,b,e,c,h,k,d,l,q){xa.Yc++;var t=xa.Yc.toString(16);var f=g.xa.Ja;S.Ta(P(f),S.ZK,t,a,d,f,b,e,c.xa.Ja,h,k,l,q);g.xa.xu=t}function P(a){for(var g=0;g<Aa.length;g++)for(var b=Aa[g].cd.jb,e=0;e<b.length;e++)if(b[e].xa.Ja==a)return Q[g];return null}function q(a){var g=a.xa;if(g=g?0===g.mf?!0:!0===g.sl?!0:!1===g.Rl?!0:"RIGID_BODY"!==g.type&&"DYNAMIC"!==g.type?!0:!1:!1){g=z.j(a.ka.na,za);var b=z.g(a.ka.na,
Fa);g=g[0]!=a.xa.nu[0]||g[1]!=a.xa.nu[1]||g[2]!=a.xa.nu[2]||b[0]!=a.xa.Uq[0]||b[1]!=a.xa.Uq[1]||b[2]!=a.xa.Uq[2]||b[3]!=a.xa.Uq[3]}if(g){g=a.xa;var e=a.ka;b=S.VF(S.yq);b.Ja=g.Ja;var c=z.j(e.na,b.trans);e=z.g(e.na,b.quat);H.copy(c,g.nu);C.copy(e,g.Uq);"DYNAMIC"==g.type&&C.identity(b.quat);S.Ta(P(g.Ja),S.yq)}a=a.bf;for(g=0;g<a.length;g++)q(a[g])}function da(a,g,b){var e=a.Il,c=a.ps,h=a.fz,k=[],d=a.Rb;k||ca.va("At least one destination required");for(var l=0;l<g.cd.jb.length;l++){var q=g.cd.jb[l];if("ANY"==
d||q.xa.Rb==d&&"NAVMESH"!=q.xa.type)q=q.xa.Ja,k&&-1==k.indexOf(q)&&k.push(q)}for(g=0;g<k.length;g++)d=k[g],h<d&&!I(e,h,d)?(e.push([h,d]),c.push(!1)):h>d&&!I(e,d,h)&&(e.push([d,h]),c.push(!1));S.Ta(b,S.QK,h);S.Ta(b,S.YK,e,a.Qi)}function I(a,g,b){for(var e=0;e<a.length;e++)if(a[e][0]==g&&a[e][1]==b)return!0;return!1}function t(a){a.xa&&a.xa.Cm&&(a=a.xa,S.Ta(P(a.Ja),S.kL,a.Ja),a.Cm=null)}function e(a){var g=ja(a),b=ma(a).cd;b.Ll[a]&&(delete b.Ll[a],b.EB.splice(b.EB.indexOf,1),S.Ta(g,S.tL,a))}function ma(a){for(var g=
0;g<Aa.length;g++){var b=Aa[g];if(b.cd.Ll[a])return b}return null}function ja(a){for(var g=0;g<Aa.length;g++)if(Aa[g].cd.Ll[a])return Q[g];return null}function pa(a,g,b){if(g.Qp){a=a.xa.Ja;var e=g.Co*g.Fr,c=g.Sq*g.Tq,h=-g.Op*g.Pp*2*Math.PI/g.bt;g.Tr&&(h*=-1);switch(g.type){case 10:S.Ta(b,S.JL,a,e,c,h);break;case 20:S.Ta(b,S.HL,a,e,c,h)}}}function ta(a){return a.mg&&"CHASSIS"==a.xg.og}function w(a){return a.mg&&"HULL"==a.xg.og}function M(a){return"NAVMESH"==a.Fd.tk}function oa(a){return a.dn&&"MAIN_BODY"==
a.Fo.og}var ca=Object(N.a)(b),ea=Object(U.a)(b),Da=Object(n.a)(b),S=Object(y.a)(b),Na=Object(d.a)(b),wa=Object(m.a)(b),X=Object(v.a)(b),Ga=Object(r.a)(b),Ha=Object(p.a)(b),ua=Object(c.a)(b),D=Object(l.a)(b),la=ea.xa,sa=ea.wa,ia=ea.se,ra=0,Q=[],Aa=[],ya={},qa=[],na=["ANY"],xa={body:0,Yc:0,GH:0},za=new Float32Array(3),Fa=new Float32Array(4),g=z.b();z.b();h.WQ=function(a){a.cd={IJ:!1,jb:[],Ll:{},EB:[]};var g=la.pt;ia.prevent_caching&&(g+="?v="+Object(k.c)());wa.log("%cLOAD PHYSICS","color: #0a0",la.On?
"Using Separate Worker Thread,":"Using Same Thread,","Max FPS: "+la.max_fps);wa.log("%cPHYSICS PATH","color: #0a0",g);var b=S.HO(g,!la.On);S.zM(b,u);Q.push(b);Aa.push(a);la.ping&&setInterval(function(){S.Ta(b,S.qL,performance.now())},1E3)};h.kN=function(a){return a.cd?a.cd.IJ:!0};h.cleanup=function(){for(var a=0;a<Q.length;a++)S.terminate(Q[a]);Q.length=0;Aa.length=0;ya={};qa.length=0;na=["ANY"];for(var g in xa)xa[g]=0};h.append_object=function(a,g){if(g.cd){var b=R(g),e=[];a.Fd.aq&&f(a,e);var c=
g.cd.jb;if(ta(a)||w(a)||a.is_character||oa(a)||a.Jn){var h=M(a);if(h){e=Y();e=T(e,"NAVMESH");var k=Na.kb(a,g).Ia;e.ks=null;for(var d=0;d<k.length;d++){var l=k[d];if("PHYSICS"==l.type){e.ks=ua.bS(l.$a);break}}}else e=Xa(a,e,!1),S.Ta(b,S.VK,e.Ja,e.trans,e.quat,e.tk,e.sl,e.pF,e.mf,e.yt,e.xt,e.nr,e.Ls,e.Og,e.$e,e.Ze,e.af,e.eE,e.HJ,e.size,e.ve,e.Js,e.KE,e.TE),ya[e.Ja]=a,qa.push(a),k=T(e.Ja,"BOUNDING"),k.type=e.tk,k.mf=e.mf,k.sl=e.sl,k.Rb=e.Rb,k.Og=e.Og,e=k;d=e;a.xa=d;k={fb:null,xa:d};h||(c.push(k),ka(g,
b,d.Rb))}else for(e=Na.kb(a,g).Ia,h=0;h<e.length;h++){k=e[h];if(d="PHYSICS"==k.type){a:{d=g.cd.jb;for(l=0;l<d.length;l++){var q=d[l].fb;if(q&&q.id==k.id){d=!0;break a}}d=!1}d=!d}if(d)if(k.$d.Gb)if(k.Bg&&g.sa.wd){var t=k;k=g;d=b;l=k.sa.wd;S.Ta(d,S.dL,l.yj);if(t.IV){q={};q.dst_noise_scale0=t.dst_noise_scale0;q.dst_noise_scale1=t.dst_noise_scale1;q.dst_noise_freq0=t.dst_noise_freq0;q.dst_noise_freq1=t.dst_noise_freq1;q.dir_min_shore_fac=t.dir_min_shore_fac;q.dir_freq=t.dir_freq;q.dir_noise_scale=t.dir_noise_scale;
q.dir_noise_freq=t.dir_noise_freq;q.dir_min_noise_fac=t.dir_min_noise_fac;q.dst_min_fac=t.dst_min_fac;q.waves_hor_fac=t.waves_hor_fac;t=l.waves_height;var m=l.waves_length;l.Ql?S.Ta(d,S.rD,q,l.Dp[0],l.Dp[1],l.Cp[0],l.Cp[1],l.UA,t,m,l.$B,k.sa.ZB):S.Ta(d,S.rD,q,0,0,0,0,0,t,m,0,null)}}else k.Ai?d=Va(a,k,b):(l=b,d=K(a,k),S.Ta(l,S.cL,d.Ja,d.positions,d.ab,d.trans,d.ve,d.Js,d.Og,d.$e,d.Ze,d.af),l=T(d.Ja,"STATIC_MESH"),l.Rb=d.Rb,l.Og=d.Og,d=l),a.xa=d,k={fb:k,xa:d},c.push(k),ka(g,b,d.Rb);else wa.error("Object "+
a.name+" has collision material with no assigned vertices")}if(ta(a)||w(a)){g=a.xa.Ja;ta(a)?(a.Ba.type=10,S.Ta(b,S.WK,g,a.Ba.nC,a.Ba.pC,a.Ba.oC,a.Ba.TC,a.Ba.VA)):w(a)&&(a.Ba.type=20,S.Ta(b,S.UK,g,a.Ba.Pm,a.Ba.Rn,a.Ba.Sn));if(a.Ba.xn)switch(c=a.Ba.xn,a.Ba.type){case 10:Za(c[0],a,g,!0,b);Za(c[1],a,g,!0,b);Za(c[2],a,g,!1,b);Za(c[3],a,g,!1,b);break;case 20:for(h=0;h<c.length;h++)Za(c[h],a,g,!1,b)}pa(a,a.Ba,b)}else a.is_character?(c=a.ka,g=a.xa,c=c.gb.max_z-c.gb.min_z,h=g.Ja,q=a.qE,e=q.GV,k=q.$S,d=q.nU,
l=q.lR,q=q.JV,a=Ua(a),S.Ta(b,S.XK,h,a,c,e,k,d,l,q),g.is_character=!0):oa(a)&&W(a,b);for(h=0;h<qa.length;h++)b=qa[h],b.xa&&La(b)}};h.sP=O;var Ba=function(){var a=H.create();return function(g,b,e,c,h,k){var d=g.xa;d.Du=b;g=z.i(g.ka.na,a);z.t(e,g,c,d.Ez);H.copy(h,d.ij);H.copy(k,d.Ji)}}();h.update=function(a,b){for(var e=0;e<Q.length;e++){var c=Q[e],h=a;c&&S.wG(c)&&S.Ta(c,S.LL,h,b);for(var k=0;k<qa.length;k++){var d=qa[k],l=d.xa;if(l.Rl&&l.Du){var t=S.wG(c)?h-l.Du:performance.now()/1E3-l.Du;t=Math.min(t,
10/la.max_fps);t-=1/la.max_fps;sa.cS&&(t=0);var f=g;z.n(l.Ez,t,l.ij,l.Ji,g);Ha.set_tsr(d,f);Ha.Ea(d);q(d);if(d.Ba){l=d;t=l.Ba.xn;f=l.ka.na;for(var m=g,A=0;A<t.length;A++){var u=t[A];z.q(f,l.Ba.Bs[A],m);Ha.set_tsr(u,m);Ha.Ea(u)}}d.Ba&&d.Ba.Qp&&Ya(d);d.Ba&&d.Ba.dC&&Sa(d);d.Ba&&d.Ba.qC&&Ka(d)}}S.CS(c);c=Aa[e];(h=c.sa.wd)&&0<h.waves_height&&(c=X.yc(c,Ga.ic),h=H.length(c.Ci)||1,S.Ta(Q[e],S.GL,c.time*h))}};h.MP=function(){return Aa[0]};h.pause=function(){for(var a=0;a<Q.length;a++)S.Ta(Q[a],S.pL)};h.resume=
function(){for(var a=0;a<Q.length;a++)S.Ta(Q[a],S.uL)};var Va=function(){var a=H.create();return function(g,b,e){var c=Y(),h=b.$d,k=h.Va[0].a_position,d=h.ab||null;h=b.Rb;var l=ha(h),q=b.$e,t=b.Ze;b=b.af;g=z.j(g.ka.na,a);S.Ta(e,S.aL,c,k,d,g,l,q,t,b);e=T(c,"STATIC_MESH");e.sl=!0;e.Rb=h;e.Og=l;return e}}(),Xa=function(){var a=C.create(),g=H.create();return function(b,e,c){var h=b.ka,k=b.Fd,d=k.tk;if(c)a:{for(var l in ya)if(ya[l]===b){c=l;break a}c=-1}else c=Y();if(!(0>=c)){if("CAMERA"==b.type){l=k.KC?
k.uu:"BOX";var q=V(l,h),t=.5,f=0}else if("EMPTY"==b.type)l="EMPTY",q=null,f=t=0;else{l=k.KC?k.uu:"BOX";q=V(l,h);t=z.i(h.na,g);if(1!=t[0]||1!=t[1]||1!=t[2])switch(f=q,l){case "BOX":f.min_x*=t[0];f.max_x*=t[0];f.min_y*=t[1];f.max_y*=t[1];f.min_z*=t[2];f.max_z*=t[2];break;case "CYLINDER":case "CONE":case "CAPSULE":f.height*=t[2];f.Lb*=Math.max(t[0],t[1]);break;case "SPHERE":f.Lb*=Math.max(t[0],t[1])}t=h.ve;f=h.th}q=A(q);return{Ja:c,trans:z.j(h.na,g),quat:z.g(h.na,a),sl:k.Ai,pF:k.sJ,mf:k.mf,yt:k.yt,xt:k.xt,
nr:k.nr,Ls:k.Ls,Rb:b.Rb,Og:ha(b.Rb),$e:k.$e,Ze:k.Ze,af:k.af,size:h.Xc.Lb,HJ:q,TE:b.yu,Js:f,ve:t,eE:l,tk:d,KE:Ea(h,e,l,q)}}}}(),Ea=function(){var a=C.create(),g=C.create(),b=z.b(),e=H.create();return function(c,h,k,d){if(!h.length)return[];var l=[],q={};q.quat=new Float32Array([0,0,0,1]);q.trans=new Float32Array(3);q.worker_bounding=d;q.bounding_type=k;l.push(q);k=z.p(c.na,b);c=z.g(c.na,a);c=C.invert(c,a);for(d=0;d<h.length;d++){q={};var t=h[d],f=t.Fd.uu,m=new Float32Array(4),u=new Float32Array(3),
r=z.j(t.ka.na,e),p=z.g(t.ka.na,g);z.D(r,k,u);C.multiply(c,p,m);q.trans=u;q.quat=m;q.bounding_type=f;q.worker_bounding=A(V(f,t.ka));l.push(q)}return l}}(),Za=function(){var a=z.b(),g=H.create();return function(b,e,c,h,k){var d=z.j(b.ka.na,g),l=z.p(e.ka.na,a),q=new Float32Array(3);z.D(d,l,q);switch(e.Ba.type){case 10:e=e.xg;b=b.ka.gb;S.Ta(k,S.SK,c,q,e.uU,e.LB,(b.max_z-b.min_z)/2,h);break;case 20:S.Ta(k,S.RK,c,q,b.ez)}}}(),Ua=function(){var a=C.create(),g=H.create(),b=H.create();return function(e){var c=
z.g(e.ka.na,a);switch(e.type){case "CAMERA":g[0]=0;g[1]=-1;g[2]=0;H.transformQuat(g,c,g);b[0]=0;b[1]=0;b[2]=-1;break;case "MESH":g[0]=0;g[1]=0;g[2]=1;H.transformQuat(g,c,g);b[0]=0;b[1]=0;b[2]=1;break;case "EMPTY":g[0]=0,g[1]=1,g[2]=0,H.transformQuat(g,c,g),b[0]=0,b[1]=1,b[2]=0}g[1]=0;H.normalize(g,g);e=H.dot(g,b);return Math.acos(e)*(0<-g[0]*b[2]?-1:1)}}(),W=function(){var a=H.create(),g=z.b();return function(b,e){var c=b.xa.Ja;S.Ta(e,S.$K,c,b.wh.Pm,b.wh.Rn,b.wh.Sn);if(b.wh.ju)for(var h=b.wh.ju,k=
0;k<h.length;k++){var d=h[k],l=z.j(d.ka.na,a),q=z.p(b.ka.na,g),t=new Float32Array(3);z.D(l,q,t);S.Ta(e,S.TK,c,t,d.ez)}b.xa.bR=!0}}();h.enable_simulation=function(a){(a=a.xa)||ca.va("No object physics");if(!a.Rl){var g=a.Ja,b=P(g);a.Rl=!0;S.Ta(b,S.nL,g)}};h.disable_simulation=function(a){(a=a.xa)||ca.va("No object physics");if(a.Rl){var g=a.Ja,b=P(g);a.Rl=!1;S.Ta(b,S.mL,g)}};h.Ap=function(a){return!!a.cd};h.eb=function(a){return!!a.xa};h.has_dynamic_physics=function(a){return(a=a.xa)&&a.Rl&&("RIGID_BODY"==
a.type||"DYNAMIC"==a.type)&&0<a.mf&&0==a.sl?!0:!1};h.has_simulated_physics=function(a){return(a=a.xa)&&a.Rl?!0:!1};h.set_gravity=function(a,g,b,e){a=a.xa.Ja;S.Ta(P(a),S.FL,a,g,b,e)};var La=function(){var g=C.create(),b=z.b(),e=z.b(),c=H.create();return function(h){if(!aa(h))for(var k=0;k<h.xB.length;k++){var d=h.xB[k],l=d.target,q=d.uS;if(l.xa){var t=new Float32Array([d.vS,d.wS,d.xS]),f=a.Y(new Float32Array([d.Cb,d.Db,d.Eb]),new Float32Array(4));"HINGE"==q&&C.rotateY(f,Math.PI/2,f);var m=z.m(b);m=
z.v(t,m);m=z.r(f,m);m=z.q(h.ka.na,m,b);var A=z.p(l.ka.na,e);A=z.q(A,m,A);m=z.j(A,c);A=z.g(A,g);var u={};u.use_limit_x=d.uV;u.use_limit_y=d.vV;u.use_limit_z=d.wV;u.use_angular_limit_x=d.qV;u.use_angular_limit_y=d.rV;u.use_angular_limit_z=d.sV;u.limit_max_x=d.wR;u.limit_min_x=d.zR;u.limit_max_y=d.xR;u.limit_min_y=d.AR;u.limit_max_z=d.yR;u.limit_min_z=d.BR;u.limit_angle_max_x=d.qR;u.limit_angle_min_x=d.tR;u.limit_angle_max_y=d.rR;u.limit_angle_min_y=d.uR;u.limit_angle_max_z=d.sR;u.limit_angle_min_z=
d.vR;J(q,h,t,f,l,m,A,u,null,null)}}}}();h.IQ=aa;h.apply_constraint=J;h.clear_constraint=function(a){a=a.xa;S.Ta(P(a.Ja),S.sL,a.xu);a.xu=null};h.pull_to_constraint_pivot=function(){var a=C.create(),g=z.b(),b=z.b(),e=z.b();return function(c,k,d,l,q,t){k=z.t(k,1,d,g);q=z.t(q,1,t,b);z.p(k,k);z.q(q,k,k);Ha.get_tsr(l,q);z.q(q,k,k);Ha.set_tsr(c,k);Ha.Ea(c);l=z.j(c.ka.na,e);q=z.g(c.ka.na,a);h.set_transform(c,l,q)}}();h.set_transform=function(a,g,b){var e=a.xa,c=S.VF(S.yq),h=z.j(a.ka.na,c.trans);a=z.g(a.ka.na,
c.quat);z.t(h,1,a,e.Ez);c.Ja=e.Ja;H.copy(g,c.trans);C.copy(b,c.quat);S.Ta(P(e.Ja),S.yq)};h.sync_transform=q;h.sync_bounding=function(a,g){g=R(g);var b=[];a.Fd.aq&&f(a,b);(ta(a)||w(a)||a.is_character||oa(a)||a.Jn)&&!M(a)&&(a=Xa(a,b,!0),S.Ta(g,S.IL,a.Ja,a.trans,a.quat,a.tk,a.sl,a.pF,a.mf,a.yt,a.xt,a.nr,a.Ls,a.Og,a.$e,a.Ze,a.af,a.eE,a.HJ,a.size,a.ve,a.Js,a.KE,a.TE))};h.sync_mesh=function(a,g){for(var b=R(g),e=a.Aa[0].Ia,c=0;c<e.length;c++){var h=e[c];if("PHYSICS"==h.type){D.ZI(e[c],e[c].$d,a.ka.qg);
if(h.Ai)wa.error("The function is not implemented for ghost objects yet");else{var k=b;h=K(a,h,!0);S.Ta(k,S.KL,h.Ja,h.positions,h.ab,h.trans,h.ve,h.Js,h.Og,h.$e,h.Ze,h.af)}ka(g,b,a.xa.Rb)}}};h.apply_velocity=function(a,g,b,e){var c=za;Ab(a,g,b,e,c);a=a.xa.Ja;g=Math.abs(c[0]);b=Math.abs(c[1]);e=Math.abs(c[2]);c[0]=g?c[0]/g*Math.max(g,0):0;c[1]=b?c[1]/b*Math.max(b,0):0;c[2]=e?c[2]/e*Math.max(e,0):0;S.Ta(P(a),S.tD,a,c[0],c[1],c[2])};h.apply_velocity_world=function(a,g,b,e){a=a.xa.Ja;S.Ta(P(a),S.tD,a,
g,b,e)};var Ab=function(){var a=C.create();return function(g,b,e,c,h){h=h||new Float32Array(3);g=z.g(g.ka.na,a);h[0]=b;h[1]=e;h[2]=c;return H.transformQuat(h,g,h)}}();h.apply_force=function(a,g,b,e,c){var h=za;c?(h[0]=g,h[1]=b,h[2]=e):Ab(a,g,b,e,h);a=a.xa.Ja;S.Ta(P(a),S.eL,a,h[0],h[1],h[2])};h.apply_torque=function(a,g,b,e){var c=za;Ab(a,g,b,e,c);a=a.xa.Ja;S.Ta(P(a),S.gL,a,c[0],c[1],c[2])};h.set_angular_velocity=function(a,g,b,e){a=a.xa.Ja;S.Ta(P(a),S.vL,a,g,b,e)};h.set_character_move_dir=function(a,
g,b){a=a.xa.Ja;S.Ta(P(a),S.yL,a,g,b)};h.set_character_move_type=function(a,g){a=a.xa.Ja;S.Ta(P(a),S.zL,a,g)};h.set_character_walk_velocity=function(a,g){a=a.xa.Ja;S.Ta(P(a),S.EL,a,g)};h.set_character_run_velocity=function(a,g){a=a.xa.Ja;S.Ta(P(a),S.BL,a,g)};h.set_character_fly_velocity=function(a,g){a=a.xa.Ja;S.Ta(P(a),S.wL,a,g)};h.character_jump=function(a){a=a.xa.Ja;S.Ta(P(a),S.iL,a)};h.character_rotation_inc=function(a,g,b){a=a.xa.Ja;S.Ta(P(a),S.jL,a,g,b)};h.set_character_rotation=function(a,g,
b){a=a.xa.Ja;S.Ta(P(a),S.AL,a,g,b)};h.set_character_rotation_h=function(a,g){a=a.xa.Ja;S.Ta(P(a),S.xL,a,g)};h.set_character_rotation_v=function(a,g){a=a.xa.Ja;S.Ta(P(a),S.DL,a,g)};h.set_character_vert_move_dir_angle=function(a,g){a=a.xa.Ja;S.Ta(P(a),S.CL,a,g)};h.append_collision_test=function(a,g,b,e){var c=a.xa;if(!c.ks){for(var h=c.Ja,k=0;k<c.dg.length;k++)if(a=c.dg[k],a.Rb==g&&a.callback==b)return;a={fz:h,Qi:e||!1,Rb:g,callback:b,Il:[],ps:[]};c.dg.push(a);g=P(h);da(a,E(g),g)}};h.remove_collision_test=
function(a,g,b){a=a.xa;for(var e=P(a.Ja),c=E(e),h=0;h<a.dg.length;h++){var k=a.dg[h];if(k.Rb==g&&k.callback==b){if(B(k)){var d=H.set(0,0,0,za);k.callback(!1,null,d,d,0)}a.dg.splice(h,1);h--;d=e;k=k.Il;for(var l=c.cd.jb,q=0;q<l.length;q++)for(var t=l[q].xa,f=0;f<t.dg.length;f++)for(var m=t.dg[f],A=0;A<m.Il.length;A++)for(var u=m.Il[A],r=0;r<k.length;r++){var p=k[r];u[0]==p[0]&&u[1]==p[1]&&(k.splice(r,1),r--)}k.length&&S.Ta(d,S.sD,k)}}};h.apply_collision_impulse_test=function(a,g){a.xa&&a.xa.Cm&&t(a);
a=a.xa;S.Ta(P(a.Ja),S.fL,a.Ja);a.Cm=g};h.clear_collision_impulse_test=t;h.append_ray_test=function(a,g,b,e,c,h,k,d,l){xa.GH++;var q=xa.GH;a={id:q,Ja:a?a.xa.Ja:0,from:new Float32Array(g),to:new Float32Array(b),Rb:e,Og:ha(e),XD:h,SM:k,Qi:d,Pv:l,callback:c};g=P(a.Ja)||Q[0];b=E(g).cd;b.Ll[q]=a;b.EB.push(a);S.Ta(g,S.bL,a.id,a.Ja,a.from,a.to,a.Og,a.XD,a.SM,a.Qi,a.Pv);return q};h.remove_ray_test=e;h.change_ray_test_from_to=function(a,g,b){var e=ja(a),c=ma(a).cd.Ll[a];c&&!c.XD&&(c.from.set(g),c.to.set(b),
S.Ta(e,S.hL,a,g,b))};h.yG=function(a){return ma(a).cd.Ll[a]?!0:!1};h.vehicle_throttle=function(a,g){var b=a.Ba;b.Co=g;pa(a,b,P(a.xa.Ja))};h.vehicle_steer=function(a,g){var b=a.Ba;b.Op=g;pa(a,b,P(a.xa.Ja))};h.vehicle_brake=function(a,g){var b=a.Ba;b.Sq=g;pa(a,b,P(a.xa.Ja))};var Ya=function(){var a=C.create(),g=C.create(),b=H.create();return function(e){var c=e.Ba,h=c.Qp;if(h){var k=e.Ba.CI;z.q(e.ka.na,e.Ba.DI,h.ka.na);e=z.y(k,e.ka.na,b);c=C.setAxisAngle(e,-c.Op*c.Pp*2*Math.PI,a);e=z.g(h.ka.na,g);C.multiply(c,
e,e);C.normalize(e,e);z.r(e,h.ka.na);Ha.Ea(h)}}}(),Sa=function(){var a=C.create(),g=C.create(),b=H.create();return function(e){var c=e.Ba,h=c.dC;if(h){var k=e.Ba.xI;z.q(e.ka.na,e.Ba.yI,h.ka.na);z.y(k,e.ka.na,b);e=Math.abs(c.speed)*c.$s;e>c.bp&&(e=c.bp);c=C.setAxisAngle(b,-e,a);e=z.g(h.ka.na,g);C.multiply(c,e,e);C.normalize(e,e);z.r(e,h.ka.na);Ha.Ea(h)}}}(),Ka=function(){var a=C.create(),g=C.create(),b=H.create();return function(e){var c=e.Ba,h=c.qC;if(h){var k=e.Ba.LI;z.q(e.ka.na,e.Ba.MI,h.ka.na);
z.y(k,e.ka.na,b);C.setAxisAngle(b,-Math.abs(c.Co)*c.rr,a);e=z.g(h.ka.na,g);C.multiply(a,e,e);C.normalize(e,e);z.r(e,h.ka.na);Ha.Ea(h)}}}();h.is_vehicle_chassis=ta;h.is_vehicle_hull=w;h.eY=M;h.aR=function(a){if(!a.mg)return!1;a=a.xg.og;return"WHEEL_FRONT_LEFT"==a||"WHEEL_FRONT_RIGHT"==a||"WHEEL_BACK_LEFT"==a||"WHEEL_BACK_RIGHT"==a?!0:!1};h.$Q=function(a){return a.mg?"BOB"==a.xg.og?!0:!1:!1};h.cR=function(a){return a.dn?"BOB"==a.Fo.og?!0:!1:!1};h.AG=function(a){return a.mg&&"STEERING_WHEEL"==a.xg.og?
!0:!1};h.zG=function(a){return a.mg&&"SPEEDOMETER"==a.xg.og?!0:!1};h.BG=function(a){return a.mg&&"TACHOMETER"==a.xg.og?!0:!1};h.get_vehicle_speed=function(a){return a.Ba.speed};h.LV=function(a){switch(a){case "WHEEL_FRONT_RIGHT":return 0;case "WHEEL_FRONT_LEFT":return 1;case "WHEEL_BACK_LEFT":return 2;case "WHEEL_BACK_RIGHT":return 3}};h.dG=function(a){return a.xa&&a.xa.is_character};h.dY=oa;h.lQ=function(){return ra};h.QO=function(){for(var a=0;a<Q.length;a++)S.Ta(Q[a],S.lL)};h.remove_object=function(a){var g=
a.xa.Ja;if("BOUNDING"==a.xa.type){var b=qa.indexOf(a);-1==b&&wa.error("Object "+a.name+" doesn't have bounding physics");delete ya[g];qa.splice(b,1)}b=P(g);for(var e=E(b),c=e.cd.jb,h=[],k=0;k<c.length;k++)for(var d=c[k].xa,l=0;l<d.dg.length;l++)for(var q=d.dg[l],f=0;f<q.Il.length;f++){var m=q.Il[f],A=q.ps[f];if(m[0]==g||m[1]==g)q.Il.splice(f,1),q.ps.splice(f,1),f--,A&&!B(q)&&(A=H.set(0,0,0,za),q.callback(!1,null,A,A,0)),h.push(m)}h.length&&S.Ta(b,S.sD,h);a.xa&&a.xa.Cm&&t(a);a=e.cd.jb;for(e=0;e<a.length;e++)a[e].xa.Ja==
g&&(a.splice(e,1),e--);S.Ta(b,S.rL,g)};h.KQ=function(a){var g=a.Fd;return a.mg||a.dn||a.is_character||a.Jn&&!g.Ai&&0<g.mf&&("DYNAMIC"==g.tk||"RIGID_BODY"==g.tk)}});w.a=f},function(D,w,f){D=f(0);var N=f(5),U=f(25),n=f(31),y=f(28),d=f(1),m=f(8),C=f(36),v=f(6),r=f(2),p=f(3),z=f(7);f=Object(D.a)("__geometry",function(a,f){function k(){return{length:0,frames:1,Tc:0,offset:0,Nm:0}}function c(a,b,e){var c=b.a_tbn,h=b.a_position,g=h.length;b=a.Tb.length;if(e)for(var k=a.Tb[0].gf.a_position,d=0;d<g;d++)h[d]=
k[d];for(var l=1;l<b;l++){var q=e?e[l].value:a.Tb[l].Rr;k=a.Tb[l].gf.a_position;for(d=0;d<g;d++)h[d]+=q*k[d]}b=C.f(c);if(e)for(g=a.Tb[0].gf.a_tbn,l=0;l<b;l++)C.n(c,g,l);for(l=0;l<b;l++){h=C.i(Ha);for(d=1;d<a.Tb.length;d++)if(g=a.Tb[d].gf.a_tbn,q=e?e[d].value:a.Tb[d].Rr)g=C.e(g,l,ua),q=C.p(C.i(Ca),g,q,ua),C.k(q,h,h);d=C.e(c,l,ua);d=C.k(h,d,ua);C.n(c,d,l)}}function l(a){return 65536<a.Gb?D.SF()?!1:!0:!1}function b(a){return 0<a.ab.length?!0:!1}function h(a,e,c){if(!b(a))return a;c||Ga.log('%cDEBUG max vertices exceeded for indexed submesh "'+
a.name+'": '+a.Gb*(e||1)+", will use drawArrays","color: #aa0");e=a.ab;c=a.Gb;var h=a.hb,k=a.Va;for(q in h){var g=h[q],d=J(g,c);h[q]=G(e,g,d)}for(h=0;h<k.length;h++){var l=k[h];for(q in l)g=l[q],d=J(g,c),l[q]=G(e,g,d)}for(h=0;h<a.Tb.length;h++){var q=a.Tb[h].gf;for(var t in q)g=q[t],d=J(g,c),q[t]=G(e,g,d)}a.Gb=e.length;a.ab=new Uint16Array(0);return a}function G(a,b,e){if(0==b.length)return new Float32Array(0);for(var c=new Float32Array(a.length*e),h=0;h<a.length;h++)for(var g=a[h],k=0;k<e;k++)c[e*
h+k]=b[e*g+k];return c}function H(){return{Ke:null,Pc:ja(),Xm:0,count:0,mc:{},usage:0,so:0,vo:0,be:[],Eh:null,Tb:null,an:1,rh:!0}}function u(a,b,e,c){if("a_normal"==b)return c=C.d(c),u(a,"a_tbn",e,c);var h=a.mc,g=h[b],d=ca(b);if(g)e&&g.Tc!=e&&Na.va('invalid num_comp for "'+b+'"'),ea(a.Pc,b,c,g.offset);else{g=ta(a.Pc,d);-1==g&&(a.Pc.push(pa(d,0)),g=a.Pc.length-1);d=a.Pc[g].hm;var l=new d.constructor(d.length+c.length);l.set(d);a.Pc[g].hm=l;ea(a.Pc,b,c,d.length);b=h[b]=k();b.Tc=e;b.offset=d.length;
b.length=c.length}L(a);return a}function E(a,b){if("a_normal"==b){a=E(a,"a_tbn");b=C.f(a);for(var e=new Float32Array(3*b),c=0;c<b;c++){var h=C.g(a,c,la);e.set(h,3*c)}return e}if(e=a.mc[b])return Da(b,M(a.Pc,ca(b)).subarray(e.offset,e.offset+e.length),new Float32Array(e.length));Na.va("extract_array_float() failed; invalid name: "+b)}function R(a,b){switch(b){case f.Xn:case f.vq:var e=Aa.STATIC_DRAW;break;case f.Ht:e=Aa.DYNAMIC_DRAW;break;default:Na.va("Wrong draw_mode")}a.usage=e}function O(a,b,e){function c(a,
g){h[a]||(h[a]=0);h[a]+=g}var h={},g;for(g in a[0]){var k=a[0][g],d=ca(g);c(d,k.length*a.length)}for(g in b)k=b[g],d=ca(g),c(d,k.length);if(e){a=e.jt.length;d=ca("a_part_ts");c(d,4*a);d=ca("a_part_r");c(d,4*a);b=e.rp;for(g in b)d=ca(g),c(d,b[g].Tc*a);e=e.Lx;for(g in e)d=ca(g),c(d,a)}return h}function L(a){a.Ke?(a.Eh||(a.Eh=Aa.createBuffer()),Aa.bindBuffer(Aa.ELEMENT_ARRAY_BUFFER,a.Eh),Aa.bufferData(Aa.ELEMENT_ARRAY_BUFFER,a.Ke,a.usage),a.so=a.Ke.byteLength):a.so=0;for(var b=a.vo=0;b<a.Pc.length;b++){var e=
a.Pc[b].type,c=ta(a.be,e);-1==c&&(a.be.push({Nk:null,type:e,PO:X.YI()}),c=a.be.length-1);e=a.be[c];e.Nk||(e.Nk=Aa.createBuffer());Aa.bindBuffer(Aa.ARRAY_BUFFER,e.Nk);Aa.bufferData(Aa.ARRAY_BUFFER,a.Pc[b].hm,a.usage);a.vo+=a.Pc[b].hm.byteLength}}function B(a,b){a.gb=U.h(a.gb,b);a.jc=U.i(a.jc,b);a.Xc=U.k(a.Xc,b);a.Nd=U.j(a.Nd,b)}function Y(a){for(var b=a[0],e=a[0],c=ma("JOIN_"+a.length+"_SUBMESHES"),h=0,g=0;g<a.length;g++)h+=a[g].ab.length;c.ab=new Uint32Array(h);var k=h=0;if(0<a[0].Tb.length)for(var d=
0;d<a[0].Tb.length;d++){for(g=0;g<a.length;g++)h+=a[g].Tb[d].gf.a_position.length,k+=C.f(a[g].Tb[d].gf.a_tbn);g={a_position:new Float32Array(h),a_tbn:C.c(k)};c.Tb.push({Rr:a[0].Tb[d].Rr,gf:g})}for(g=h=0;g<a.length;g++)h+=a[g].Gb;c.Gb=h;for(var l in e.hb){for(g=h=0;g<a.length;g++)h+=a[g].hb[l].length;c.hb[l]=new Float32Array(h)}for(l in e.Va[0]){for(g=h=0;g<a.length;g++)h+=a[g].Va[0][l].length;for(g=0;g<e.Va.length;g++)c.Va[g]=c.Va[g]||{},c.Va[g][l]=new Float32Array(h)}g=c.Jd;g.gb=U.n(b.Jd.gb);k=h=
0;d=[];for(e=0;e<a.length;e++){var q=a[e],t=q.ab,f=q.Gb,m=q.hb;l=q.Jd.Xc;U.D(g.gb,q.Jd.gb);U.E(g.Xc,l);U.G(q.Jd.Nd,d);for(l=0;l<t.length;l++)c.ab[h+l]=t[l]+k;h+=t.length;for(var A in m){t=m[A];var u=k*J(t,f);c.hb[A].set(t,u)}for(l=0;l<q.Va.length;l++){m=q.Va[l];var p=c.Va[l];for(A in m)t=m[A],u=k*J(t,f),p[A].set(t,u)}k+=f}g.jc=U.z(r._1(d),!0);if(0<c.Tb.length)for(e=0;e<c.Tb.length;e++)for(A=c.Tb[e].gf,l=h=g=0;l<a.length;l++)k=a[l].Tb[e].gf,A.a_position.set(k.a_position,g),A.a_tbn.set(k.a_tbn,h),g+=
k.a_position.length,h+=k.a_tbn.length;a[0].If&&(c.If={jt:b.If.jt,iC:b.If.iC,BI:!0,Lx:b.If.Lx,rp:b.If.rp,Tu:b.If.Tu});return c}function K(a,b,e){b=b.Jd;for(var c=U.w(),h=U.C(),g=[],k=0;k<e.length;k++)U.h(a.Jd.gb,e[k],c),U.D(b.gb,c),U.j(a.Jd.Nd,e[k],h),U.G(h,g);b.jc=U.z(r._1(g),!0);b.Nd=U.x(b.jc);b.Xc=U.B(b.jc)}function ha(a,b,e,c,k,g){var d=a.submeshes[b],l=d.base_length,q=ma("SUBMESH_"+a.name+"_"+a.materials[b].name);q.Gb=l;var t=!1;if(A(e,"a_texcoord")){var f=null,m=a.materials[b];b=a.submeshes[b];
if(m.hh.length)switch(m=m.hh[0],m.texture_coords){case "UV":f=V(b,m.uv_layer||a.active_uv_name,a.name);break;case "ORCO":var u=a.b4w_boundings.bb_src;f=new Float32Array(2*b.base_length);m=(u.max_x+u.min_x)/2;var v=(u.max_y+u.min_y)/2,J=u.max_x-u.min_x;u=u.max_y-u.min_y;for(var n=0,B=0;B<b.position.length;B+=3)f[n++]=(b.position[B]-m)/J+.5,f[n++]=(b.position[B+1]-v)/u+.5}null===f&&(f=new Float32Array(2*b.base_length));b=f}else b=new Float32Array(0);if(A(e,"a_orco_tex_coord")){f=a.b4w_boundings.bb_src;
m=new Float32Array(3*d.base_length);v=d.position;J=f.max_x-f.min_x;u=f.max_y-f.min_y;n=f.max_z-f.min_z;for(var P=B=0;P<v.length;P+=3)0==J?m[B++]=.5:m[B++]=r.M(parseFloat(((v[P]-f.min_x)/J).toFixed(5)),0,1),0==u?m[B++]=.5:m[B++]=r.M(parseFloat(((v[P+1]-f.min_y)/u).toFixed(5)),0,1),0==n?m[B++]=.5:m[B++]=r.M(parseFloat(((v[P+2]-f.min_z)/n).toFixed(5)),0,1);f=m}else f=new Float32Array(0);m=d.group;if(A(e,"a_influence")&&c){v=new Float32Array(4*l);J=m.length/l;u=new Float32Array(J);for(n=0;n<J;n++){u[n]=
-1;for(var C in c)if(B=c[C],B.xJ===n){u[n]=B.Hz;break}}P=3<J?J:4;c=new Float32Array(P);C=new Uint32Array(P);n=new Float32Array(4);B=new Float32Array(P);P=new Uint32Array(P);for(var E=new Float32Array(4),z=0;z<l;z++)c.set(B),C.set(P),n.set(E),v.set(aa(m,J,z,l,u,c,C,n),4*z)}else v=new Float32Array(0);c=v;k=k?r.O(k):{};k.a_color={Wm:!0};k.a_color.src=A(e,"a_color")&&a.active_vcol_name?[{name:a.active_vcol_name,Hh:7}]:[];q.hb.a_texcoord=b;q.hb.a_influence=c;q.hb.a_orco_tex_coord=f;c=q.hb;C=d.vertex_colors;
b=d.color;f=a.name;m=[];for(v=0;v<C.length;v++)m.push(C[v].name);for(var G in k)if(v=k[G].src,v.length){for(u=J=0;u<v.length;u++)J+=r._43(v[u].Hh);c[G]=new Float32Array(J*l);for(u=n=0;u<v.length;u++){var da=v[u].name;B=v[u].Hh;P=r._44(B);E=m.indexOf(da);if(-1==E)Ga.warn('vertex color "'+da+'" for mesh "'+f+'" not found'),z=7;else{z=C[E].mask;var Q=C;for(var qa=E,K=l,pa=0,ca=0;ca<qa;ca++)pa+=r._43(Q[ca].mask);Q=pa*K}qa=r._43(z);(B&z)!==B&&Ga.error("Wrong color extraction from "+da+" to "+G+' for the mesh "'+
f+'".');for(da=0;da<l;da++)for(K=0;3>K;K++)P[K]&&(pa=n+r._42(B,K),ca=r._42(z,K),c[G][da*J+pa]=-1==E?0:b[Q+da*qa+ca]);n+=qa}}else c[G]=new Float32Array(0);G=a.name;Q=q.hb;if(g)for(var H in g)Q[g[H]]=V(d,H,G);q.ab=new Uint32Array(d.indices);H=d.position.length/l/3;G=A(e,"a_tbn")&&d.tbn.length?!0:!1;Q=A(e,"a_shade_tangs")&&d.shade_tangs.length?!0:!1;0<a.b4w_shape_keys.length&&(t=!0);for(k=0;k<H;k++){g=T(d,l,G,Q,k);if(t)if(c={},c.name=a.b4w_shape_keys[k].name,q.Tb.push(c),0!=k){c.gf=g;c.Rr=a.b4w_shape_keys[k].value;
continue}else c.gf=T(d,l,G,Q,k),c.Rr=1;q.Va.push(g)}if(1<H&&!t){a=q.Va[0];g={};for(var ja in a)g[ja]=new Float32Array(a[ja]);q.Va.push(g)}A(e,"a_polyindex")&&(h(q,1,!0),q.hb.a_polyindex=I(q));d=d.boundings;e=q.Jd;e.gb=U.w();e.gb.max_x=d.bb.max_x;e.gb.max_y=d.bb.max_y;e.gb.max_z=d.bb.max_z;e.gb.min_x=d.bb.min_x;e.gb.min_y=d.bb.min_y;e.gb.min_z=d.bb.min_z;ja=d.rbb;a=d.caxis_x;l=d.caxis_y;t=d.caxis_z;g=d.be_ax;e.jc=U.e(a,l,t,d.be_cen);p.scale(e.jc.Cb,g[0],e.jc.Cb);p.scale(e.jc.Db,g[1],e.jc.Db);p.scale(e.jc.Eb,
g[2],e.jc.Eb);e.Xc=U.B(e.jc);p.copy(ja.rbb_c,e.Nd.Da);p.copy(a,e.Nd.Cb);p.copy(l,e.Nd.Db);p.copy(t,e.Nd.Eb);d=ja.rbb_s;p.scale(e.Nd.Cb,d[0],e.Nd.Cb);p.scale(e.Nd.Db,d[1],e.Nd.Db);p.scale(e.Nd.Eb,d[2],e.Nd.Eb);return q}function T(a,b,e,c,h){var g={},k=new Float32Array(3*b),d=C.c(e?b:0),l=h*b*3;k.set(a.position.subarray(l,l+3*b),0);e&&C.b(a.tbn,h*b,b,d);c&&(e=new Float32Array(3*b),e.set(a.shade_tangs.subarray(0,3*b),0),g.a_shade_tangs=e);g.a_position=k;g.a_tbn=d;return g}function V(a,b,e){var c=2*a.base_length,
h=a.uv_layers.indexOf(b);if(-1==h)return Ga.warn('uv layer "'+b+'" for mesh "'+e+'" not found'),new Float32Array(c);b=h*c;return a.texcoord.subarray(b,b+c)}function A(a,b){return-1<a.indexOf(b)?!0:!1}function aa(a,b,e,c,h,g,k,d){for(var l=!0,q=0;q<b;q++){var t=a[q*c+e];if(-1!==t){var m=h[q];-1!==m&&(g[q]=t,k[q]=m,l=!1)}}if(l)return d;P(g,k,f.Ry,!1);for(q=a=0;4>q;q++)a+=g[q];if(.01>a)return d;for(q=0;4>q;q++)g[q]/=a;if(.01>Math.abs(g[0]-1))d[0]=k[0]+1;else for(q=0;4>q;q++)d[q]=k[q]+g[q];return d}function J(a,
b){if(0==b)return 0;a=a.length;var e=a/b;e!=Math.floor(e)&&Na.va("Array size mismatch during geometry calculation: array length="+a+", base length="+b);return e}function P(a,b,e,c){for(var h=a.length,g=h,k=!1,d=c?-1:1;1<g||k;){1<g&&(g=Math.floor(g/1.247330950103979));k=!1;for(var l=0;g+l<h;l++)if(e==f.Ry?0>d*(a[l]-a[l+g]):a[l]<a[l+g]&&c)k=a[l],a[l]=a[l+g],a[l+g]=k,k=b[l],b[l]=b[l+g],b[l+g]=k,k=!0}}function q(a,b,e){var c=[],h=[];p.subtract(b,a,c);p.subtract(e,a,h);p.normalize(c,c);p.normalize(h,h);
a=r.M(p.dot(c,h),-1,1);return Math.acos(a)}function da(a,e,c){if(b(e)){e=e.ab;for(var h=e.length/3,k=0;k<h;k++){var g=new Float32Array(9),d=e[3*k];g[0]=a[3*d];g[1]=a[3*d+1];g[2]=a[3*d+2];d=e[3*k+1];g[3]=a[3*d];g[4]=a[3*d+1];g[5]=a[3*d+2];d=e[3*k+2];g[6]=a[3*d];g[7]=a[3*d+1];g[8]=a[3*d+2];c[k]=g}}else for(k=0;k<a.length;k++)g=new Float32Array(9),g[0]=a[9*k],g[1]=a[9*k+1],g[2]=a[9*k+2],g[3]=a[9*k+3],g[4]=a[9*k+4],g[5]=a[9*k+5],g[6]=a[9*k+6],g[7]=a[9*k+7],g[8]=a[9*k+8],c[k]=g;return c}function I(a){for(var b=
new Float32Array(a.Gb),e=0;e<a.Gb;e++)b[e]=e%3/2;return b}function t(a,b,e){var c=p.dist(a,b);a=p.dist(a,e);b=p.dist(b,e);e=(c+a+b)/2;return e*(e-c)*(e-a)*(e-b)}function e(a){for(var b=new Float32Array([0,0,0,1,1,1,1,0]),e=new Float32Array(8*a),c=0;c<a;c++)e.set(b,8*c);return e}function ma(a){return{name:a,Gb:0,ab:null,Va:[],hb:{a_influence:new Float32Array(0),a_color:new Float32Array(0),a_texcoord:new Float32Array(0)},Tb:[],Jd:{gb:U.w(),jc:U.y(),Xc:U.A(),Nd:U.C()},If:null}}function ja(a){var b=[],
e;for(e in a)b.push(pa(e,a[e]));return b}function pa(a,b){return{hm:new (oa(a))(b),type:a}}function ta(a,b){for(var e=0;e<a.length;e++)if(a[e].type==b)return e;return-1}function w(a,b){b=ta(a,b);return-1==b?null:a[b].Nk}function M(a,b){b=ta(a,b);return-1==b?null:a[b].hm}function oa(a){switch(a){case "float":return Float32Array;case "short":return Int16Array;case "unsigned_byte":return Uint8Array;default:return Float32Array}}function ca(a){a=a.replace(/_next$/,"");a=a.replace(/param_GEOMETRY_VC_a_\w+/,
"param_GEOMETRY_VC_a");switch(a){case "a_tbn":case "a_shade_tangs":return"short";case "a_color":case "a_bending_col_main":case "a_bending_col_detail":case "a_grass_size":case "a_grass_color":case "param_GEOMETRY_VC_a":case "a_polyindex":case "a_p_bb_vertex":case "a_halo_bb_vertex":case "a_bb_vertex":return"unsigned_byte";default:return"float"}}function ea(a,b,e,c){S(b,e,a[ta(a,ca(b))].hm.subarray(c))}function Da(a,b,e){switch(ca(a)){case "float":e.set(b);break;case "short":for(a=0;a<b.length;a++)e[a]=
r._49(b[a]);break;case "unsigned_byte":for(a=0;a<b.length;a++)e[a]=r._65(b[a])}return e}function S(a,b,e){switch(ca(a)){case "float":e.set(b);break;case "short":for(a=0;a<b.length;a++)e[a]=r._3(b[a]);break;case "unsigned_byte":for(a=0;a<b.length;a++)e[a]=r._66(b[a])}return e}var Na=Object(N.a)(a),D=Object(y.a)(a),X=Object(n.a)(a),Ga=Object(d.a)(a),Ha=C.c(),ua=C.c(),Ca=C.c(),la=new Float32Array(3),sa=new Float32Array(3),ia=new Float32Array(3),ra=m.create(),Q=v.b();f.vq=10;f.Ht=20;f.Ry=0;f.gW=1;f.Xn=
f.vq;var Aa=null;f.ao="float";f.iW="short";f.jW="unsigned_byte";f.fh=function(a){Aa=a};f.II=function(a,b,e){l(a)&&h(a);var d=a.ab,q=a.Gb,g=a.Va,t={};for(f in a.hb)f in e&&!e[f].Wm||(t[f]=a.hb[f]);e=H();0<a.Tb.length&&c(a,g[0]);var f=a.If;if(d.length){var m=d.length;if(65536>=q){d=new Uint16Array(d);var A=Aa.UNSIGNED_SHORT}else d=new Uint32Array(d),A=Aa.UNSIGNED_INT}else m=q,d=null;var u=O(g,t,f);u=ja(u);for(var r={},v=0;v<u.length;v++)r[u[v].type]=0;var p={},T;for(T in t){var n=t[T],I=n.length;if(I){var B=
ca(T);v=p[T]=k();v.length=I;v.Tc=J(n,q);v.offset=r[B];ea(u,T,n,r[B]);r[B]+=I}}t=g.length;for(T in g[0])if(n=g[0][T],B=ca(T),I=n.length,n=J(n,q),I)for(v=p[T]=k(),v.length=I,v.frames=t,v.Tc=n,v.offset=r[B],1<t&&(v=p[T+"_next"]=k(),v.length=I,v.frames=t,v.Tc=n,v.offset=r[B]+I),v=0;v<t;v++)n=g[v][T],B=ca(T),ea(u,T,n,r[B]),r[B]+=I;f&&(ya(f,p,u,r),e.an=f.jt.length);e.count=m;e.Ke=d;e.Pc=u;e.Xm=A;e.mc=p;R(e,b);L(e);e.Tb=a.Tb;return e};f.sU=c;f.eR=l;f.dR=b;f.Kx=h;f.aJ=function(a,b,e){R(a,b);a.count=e.length;
a.Ke=e;a.Xm=e instanceof Uint16Array?Aa.UNSIGNED_SHORT:Aa.UNSIGNED_INT};f.$I=u;f.Rz=E;f.kY=function(a){a.usage=Aa.STATIC_DRAW};f.MR=function(a){a.usage=Aa.DYNAMIC_DRAW};var ya=function(){var a=z.create(),b=m.create();return function(e,c,h,g){var d=e.jt,l=e.iC,q=e.rp,t=e.Lx,f=e.BI,m={a_part_ts:{data:[],Tc:4},a_part_r:{data:[],Tc:4}},A;for(A in q)m[A]={data:[],Tc:q[A].Tc};for(A in t)m[A]={data:[],Tc:1};for(var u=0;u<d.length;u++){var r=d[u];f&&l&&!e.Tu&&(r=v.q(l,d[u],Q));!f&&e.Tu&&p.subtract(d[u],l,
d[u]);var T=v.l(r,a);r=v.g(r,b);var n=m.a_part_ts.data,J=m.a_part_r.data;n.push.apply(n,T);J.push.apply(J,r);for(A in q)for(T=q[A].Tc,r=0;r<T;r++)m[A].data.push(q[A].data[u*T+r]);for(A in t)m[A].data.push(t[A][0])}for(A in m)e=ca(A),ea(h,A,m[A].data,g[e]),d=k(),d.Tc=m[A].Tc,d.offset=g[e],d.Nm=1,d.length=m[A].data.length,c[A]=d,g[e]+=d.length}}();f.HC=L;f.nt=function(a,b,e,c){Aa.bindBuffer(Aa.ARRAY_BUFFER,a.be[ta(a.be,b)].Nk);Aa.bufferSubData(Aa.ARRAY_BUFFER,r.h*c,e)};f.mN=function(a){a.Eh&&Aa.deleteBuffer(a.Eh);
for(var b=0;b<a.be.length;b++)a.be[b].Nk&&Aa.deleteBuffer(a.be[b].Nk);a.be.length=0};f.fG=function(a,b){return a.submeshes[b].base_length?!1:!0};f.lC=function(a,b){for(var e=0;e<a.Va.length;e++){var c=a.Va[e].a_position;v.F(c,b,c,0);c=a.Va[e].a_tbn;C.m(c,b,c);(c=a.Va[e].a_shade_tangs)&&0<c.length&&v.z(c,b,c,0)}(e=a.hb.au_center_pos)&&e.length&&v.F(e,b,e,0);B(a.Jd,b)};f.rU=function(a,b){var e=a.hb.au_center_pos;if(e&&e.length){var c=new Float32Array(e);v.F(c,b,c,0);for(var h=0;h<a.Va.length;h++)for(var g=
0;g<c.length;g++)a.Va[h].a_position[g]+=c[g]-e[g];e.set(c)}else Na.va('Attribute "au_center_pos" is missing in particle submesh');B(a.Jd,b)};f.LM=B;f.qU=function(a,b){var e=a.Gb,c;for(c in b){var h=b[c].length;a.hb[c]=new Float32Array(h*e);for(var g=0;g<e;g++)for(var k=0;k<h;k++)a.hb[c][g*h+k]=b[c][k]}};f.HI=Y;f.NR=function(a,b,e){if(!a.Gb)return ma("EMPTY");var c=e.length;65536<a.Gb*c&&!D.SF()&&h(a,c);var k=a.ab,g=a.Gb,d=a.hb,l=a.Va;for(m in b){var q=b[m].length,t=q*g;d[m]=new Float32Array(t);for(var f=
0;f<g;f++)for(t=0;t<q;t++)d[m][f*q+t]=b[m][t]}b=ma("CLONE_"+c+"_SUBMESHES");b.Gb=g*c;b.ab=new Uint32Array(k.length*c);for(f=0;f<c;f++){q=k.length*f;var m=g*f;for(t=0;t<k.length;t++)b.ab[q+t]=k[t]+m}for(var A in d)for(k=d[A],t=k.length*c,q=J(k,g),b.hb[A]=new Float32Array(t),f=0;f<c;f++)m=g*q*f,b.hb[A].set(k,m);for(A in l[0])for(f=0;f<l.length;f++)for(k=l[f][A],t=k.length*c,q=J(k,g),b.Va[f]=b.Va[f]||{},b.Va[f][A]=new Float32Array(t),t=0;t<c;t++)switch(d=e[t],m=g*q*t,A){case "a_position":v.F(k,d,b.Va[f][A],
m);break;case "a_tbn":v.B(k,d,b.Va[f][A],m);break;case "a_shade_tangs":v.C(k,d,b.Va[f][A],m);break;default:Na.va("Wrong attribute name: "+A)}K(a,b,e);return b};f.kE=K;f.av=ha;f.kP=function(a){var b=a.Gb,c=a.Va[0].a_position,h=new Float32Array(12*b);a=new Uint32Array(4*a.ab.length);for(var k=new Float32Array(4*b),g=0;g<b;g++){h[12*g]=c[3*g];h[12*g+1]=c[3*g+1];h[12*g+2]=c[3*g+2];h[12*g+3]=c[3*g];h[12*g+4]=c[3*g+1];h[12*g+5]=c[3*g+2];h[12*g+6]=c[3*g];h[12*g+7]=c[3*g+1];h[12*g+8]=c[3*g+2];h[12*g+9]=c[3*
g];h[12*g+10]=c[3*g+1];h[12*g+11]=c[3*g+2];a[6*g]=4*g+2;a[6*g+1]=4*g+1;a[6*g+2]=4*g;a[6*g+3]=4*g+2;a[6*g+4]=4*g;a[6*g+5]=4*g+3;var d=Math.random();k[4*g]=d;k[4*g+1]=d;k[4*g+2]=d;k[4*g+3]=d}c=ma("HALO");c.Va[0]={};c.Gb=4*b;c.Va[0].a_position=h;c.hb.a_halo_bb_vertex=e(b);c.hb.a_random_vals=k;c.ab=a;return c};f.HQ=A;f.yF=function(a,b,e){for(var c=[],h=0;h<a.submeshes.length;h++){var g=ha(a,h,b,null,e,null);g.Gb&&c.push(g)}return 0==c.length?ma("EMPTY"):1==c.length?c[0]:Y(c)};f.LU=function(a,b,e,c){var h=
a.Ke,g=E(a,"a_position"),k=b.UR,d=b.VR;b=b.WO;for(var l=h,q=l.length/3,t=0;t<q;t++){var f=l[3*t],m=l[3*t+1],A=l[3*t+2],u=g[3*f+1],r=g[3*f+2],p=g[3*m+1],T=g[3*m+2],n=g[3*A+1],J=g[3*A+2];k[3*t]=(g[3*f]+g[3*m]+g[3*A])/3;k[3*t+1]=(u+p+n)/3;k[3*t+2]=(r+T+J)/3}v.F(k,e,d);e=d.length/3;for(g=0;g<e;g++)k=d[3*g]-c[0],l=d[3*g+1]-c[1],q=d[3*g+2]-c[2],b[g]=k*k+l*l+q*q;c=h;h=b.length;if(!(2>h))for(d=h,g=!1;1<d||g;)for(1<d&&(d=Math.floor(d/1.247330950103979)),g=!1,e=0;d+e<h;e++)0>b[e]-b[e+d]&&(g=b[e],b[e]=b[e+d],
b[e+d]=g,g=c,k=e,l=e+d,q=g[3*k],t=g[3*k+1],f=g[3*k+2],g[3*k]=g[3*l],g[3*k+1]=g[3*l+1],g[3*k+2]=g[3*l+2],g[3*l]=q,g[3*l+1]=t,g[3*l+2]=f,g=!0);h=c;Aa.bindBuffer(Aa.ELEMENT_ARRAY_BUFFER,a.Eh);Aa.bufferData(Aa.ELEMENT_ARRAY_BUFFER,h,Aa.DYNAMIC_DRAW)};f.aU=P;f.iE=function(a,b,e){for(var c=b.length/3,h=a.length/3,g=[],k=Array(3),d=Array(3),l=Array(3),t=0;t<h;t++){for(var f=a[3*t],m=a[3*t+1],A=a[3*t+2],u=0;3>u;u++)k[u]=b[3*f+u],d[u]=b[3*m+u],l[u]=b[3*A+u];if(e){u=q(k,d,l);var r=q(d,l,k),v=Math.PI-u-r}else v=
r=u=1;var T=g;var n=k;var J=l,I=[],B=[],P=[];p.subtract(d,n,I);p.subtract(J,n,B);p.cross(I,B,P);p.normalize(P,P);n=P;for(J=0;3>J;J++)I=3*m+J,B=3*A+J,T[3*f+J]=u*n[J],T[I]=r*n[J],T[B]=v*n[J]}if(e)for(var aa in e)for(t=e[aa],a=0;3>a;a++){b=3*t[0]+a;for(h=1;h<t.length;h++)k=3*t[h]+a,g[b]+=g[k];for(h=1;h<t.length;h++)k=3*t[h]+a,g[k]=g[b]}for(t=0;t<c;t++){e=t;aa=g;a=new Float32Array(3);for(b=0;3>b;b++)h=3*e+b,a[b]=aa[h];p.normalize(a,a);for(b=0;3>b;b++)h=3*e+b,aa[h]=a[b]}return g};f.jE=function(a,b,e){for(var c=
{},h=b.length/3,g=0;g<h;g++){var k=String(b[3*g])+String(b[3*g+1])+String(b[3*g+2]);c[k]=[]}b=a.length;for(g=0;g<b;g++)h=a[g],k=String(e[3*h])+String(e[3*h+1])+String(e[3*h+2]),k in c&&c[k].push(h);return c};f.Yz=function(a,b,e,c){var h=da(a.Va[0].a_position,a,[]);if(e){var g=a.Va[0].a_tbn;for(var k=C.f(g),d=new Float32Array(3*k),l=0;l<k;l++){var q=C.h(g,l,ra);q=p.transformQuat(r.e,q,la);d[3*l]=q[0];d[3*l+1]=q[1];d[3*l+2]=q[2]}g=da(d,a,[])}d=h.length;l=new Float32Array(d);k=la;for(a=0;a<d;a++){var f=
h[a];k.set(f.subarray(0,3));sa.set(f.subarray(3,6));ia.set(f.subarray(6));l[a]=Math.sqrt(t(k,sa,ia))}k=new Float32Array(d);k[0]=l[0];for(a=1;a<d;a++)k[a]=k[a-1]+l[a];d=k[l.length-1];l=[];for(a=0;a<b;a++){q=d*r._40(c);q=r.F(k,q,0,k.length-1);f=e?g[q]:h[q];var A=c;(q=la)||(q=new Float32Array(3));var u=f[0],v=f[1],T=f[2],n=f[3],J=f[4],I=f[5],B=f[6],P=f[7];f=f[8];var aa=r._40(A);A=r._40(A);1<aa+A&&(aa=1-aa,A=1-A);var E=1-aa-A;q[0]=E*u+aa*n+A*B;q[1]=E*v+aa*J+A*P;q[2]=E*T+aa*I+A*f;e?(l[a]=new Float32Array(4),
p.normalize(q,q),q=m.rotationTo(r.e,q,ra),l[a][0]=q[0],l[a][1]=q[1],l[a][2]=q[2],l[a][3]=q[3]):(l[a]=new Float32Array(3),l[a][0]=q[0],l[a][1]=q[1],l[a][2]=q[2])}return l};f.$u=I;f.PY=t;f.FF=e;f.RH=function(a,b,e){a=a.Va[0].a_position;for(var c=0;c<a.length;c+=3)a[c]=(a[c]-e[0])*b[0]+e[0],a[c+1]=(a[c+1]-e[1])*b[1]+e[1],a[c+2]=(a[c+2]-e[2])*b[2]+e[2]};f.$y=function(a,b,e){var c=a.Aa[0].Ia;a=a.ka.qg;for(var h=1;h<a.length;h++)a[h].name==b&&(a[h].value=e);for(h=0;h<c.length;h++)if(!c[h].xh&&c[h].Rf&&
!c[h].Uj){b=c[h].$a;e=ca("a_position");var g=M(b.Pc,e);Aa.bindBuffer(Aa.ARRAY_BUFFER,w(b.be,e));var k=b.mc.a_position;e=c[h];var d=a;if(k){var l=k.offset;k=k.length+l;for(var q=e.$a.Tb[0].gf.a_position,t=l;t<k;t++)g[t]=q[t-l];for(t=1;t<e.$a.Tb.length;t++){q=e.$a.Tb[t].gf.a_position;var f=d[t].value;if(f)for(var m=l;m<k;m++)g[m]+=f*q[m-l]}Aa.bufferSubData(Aa.ARRAY_BUFFER,r.h*l,g.subarray(l))}g=ca("a_tbn");e=M(b.Pc,g);Aa.bindBuffer(Aa.ARRAY_BUFFER,w(b.be,g));d=b.mc.a_tbn;b=e;e=a;if(d){g=d.offset;d=
d.length+g;l=c[h].$a.Tb;k=l[0].gf.a_tbn;t=C.i(Ha);for(q=g;q<d;q+=C.a){f=C.i(Ca);m=(q-g)/C.a;for(var A=1;A<l.length;A++){var u=e[A].value;if(u){var v=C.e(l[A].gf.a_tbn,m,ua);u=C.p(t,v,u,ua);C.k(u,t,f)}}m=C.e(k,m,ua);f=C.k(f,m,ua);b[q]=r._3(f[0]);b[q+1]=r._3(f[1]);b[q+2]=r._3(f[2]);b[q+3]=r._3(f[3])}Aa.bufferSubData(Aa.ARRAY_BUFFER,r.h*g,b.subarray(g))}}};f.check_shape_keys=function(a){return a.ka.Rf};f.get_shape_keys_names=function(a){var b=[];if(a.ka)for(var e=1;e<a.ka.qg.length;e++)b.push(a.ka.qg[e].name);
return b};f.get_shape_key_value=function(a,b){if(a.ka)for(var e=1;e<a.ka.qg.length;e++)if(b==a.ka.qg[e].name)return a.ka.qg[e].value;return 0};f.tA=function(a,b){if(a=a.ka.qg)for(var e=1;e<a.length;e++)if(a[e].name==b)return!0;return!1};f.ck=function(a){return a&&a.ka&&a.ka.df?!0:!1};f.draw_line=function(a,b,e){var c=a.$a;if(c){for(var h=e?b.length/3/2:b.length/3-1,g=new Float32Array(12*h),k=new Float32Array(12*h),d=new Uint16Array(6*h),l=0;l<h;l++){if(e)var q=6*l,t=6*l+3;else q=3*l,t=3*(l+1);var m=
b[q],A=b[q+1];q=b[q+2];var u=b[t],r=b[t+1];t=b[t+2];var v=u-m,p=r-A,T=t-q;g[12*l]=m;g[12*l+1]=A;g[12*l+2]=q;k[12*l]=v;k[12*l+1]=p;k[12*l+2]=T;g[12*l+3]=u;g[12*l+4]=r;g[12*l+5]=t;k[12*l+3]=-v;k[12*l+4]=-p;k[12*l+5]=-T;g[12*l+6]=m;g[12*l+7]=A;g[12*l+8]=q;k[12*l+6]=-v;k[12*l+7]=-p;k[12*l+8]=-T;g[12*l+9]=u;g[12*l+10]=r;g[12*l+11]=t;k[12*l+9]=v;k[12*l+10]=p;k[12*l+11]=T;d[6*l]=4*l;d[6*l+1]=4*l+1;d[6*l+2]=4*l+2;d[6*l+3]=4*l;d[6*l+4]=4*l+3;d[6*l+5]=4*l+1}e=0;for(var n in c.mc)b=c.mc[n],e+=g.length/3*b.Tc;
b={};b["float"]=e;e=c.Pc=ja(b);f.aJ(c,a.fi,d);a=0;for(n in c.mc)switch(b=c.mc[n],n){case "a_position":ea(e,n,g,a);b.offset=a;b.length=g.length;a+=b.length;break;case "a_direction":ea(e,n,k,a);b.offset=a;b.length=k.length;a+=b.length;break;default:b.offset=a,b.length=g.length/3*b.Tc,d=new Float32Array(b.length),ea(e,n,d,a),a+=b.length}L(c)}};f.tN=function(a){if(a){var b=H();if(a.Ke)switch(a.Xm){case Aa.UNSIGNED_SHORT:b.Ke=new Uint16Array(a.Ke);break;case Aa.UNSIGNED_INT:b.Ke=new Uint32Array(a.Ke)}else b.Ke=
null;for(var e=b,c=a.Pc,h=[],g=0;g<c.length;g++){var k=c[g].hm,d=c[g].type;h.push({hm:new k.constructor(k),type:d})}e.Pc=h;b.Xm=a.Xm;b.count=a.count;b.mc=r.O(a.mc);b.usage=a.usage;b.so=a.so;b.vo=a.vo;b.Eh=null;b.Qv=r.O(a.Qv);b.Tb=r.O(a.Tb);b.an=a.an;b.rh=a.rh}else b=null;return b};f.Gh=ma;f.vN=function(a){var b=ma(a.name);b.Gb=a.Gb;b.ab=r.O(a.ab);b.Va=r.O(a.Va);b.hb=r.O(a.hb);b.Tb=r.O(a.Tb);U.o(a.Jd.gb,b.Jd.gb);U.s(a.Jd.jc,b.Jd.jc);U.u(a.Jd.Xc,b.Jd.Xc);U.v(a.Jd.Nd,b.Jd.Nd);b.If=r.O(a.If);return b};
f.reset=function(){Aa=null};f.YQ=ja;f.dT=ta;f.FX=w;f.jA=M;f.ZP=oa;f.Ko=ca;f.ZF=function(a){switch(ca(a)){case "float":return r.h;case "short":return r.l;case "unsigned_byte":return r.g;default:return r.h}};f.oQ=function(a){switch(ca(a)){case "float":return Aa.FLOAT;case "short":return Aa.SHORT;case "unsigned_byte":return Aa.UNSIGNED_BYTE;default:return Aa.FLOAT}};f.wt=ea;f.WY=function(a,b){switch(ca(a)){case "short":return r._49(b);case "unsigned_byte":return r._65(b)}return b};f.VY=function(a,b){switch(ca(a)){case "short":return r._3(b);
case "unsigned_byte":return r._66(b)}return b};f.QW=Da;f.PW=S;f.Si=function(){return{a_position:new Float32Array(0),a_tbn:C.c(0)}}});w.a=f},function(D,w,f){function N(d){d[0]=1;d[1]=0;d[2]=0;d[3]=0;d[4]=0;d[5]=1;d[6]=0;d[7]=0;d[8]=0;d[9]=0;d[10]=1;d[11]=0;d[12]=0;d[13]=0;d[14]=0;d[15]=1;return d}function U(d,f,n){var m=d[0],r=d[1],p=d[2],C=d[3],a=d[4],H=d[5],k=d[6],c=d[7],l=d[8],b=d[9],h=d[10],G=d[11],y=d[12],u=d[13],E=d[14];d=d[15];var R=f[0],O=f[1],L=f[2],B=f[3];n[0]=R*m+O*a+L*l+B*y;n[1]=R*r+O*
H+L*b+B*u;n[2]=R*p+O*k+L*h+B*E;n[3]=R*C+O*c+L*G+B*d;R=f[4];O=f[5];L=f[6];B=f[7];n[4]=R*m+O*a+L*l+B*y;n[5]=R*r+O*H+L*b+B*u;n[6]=R*p+O*k+L*h+B*E;n[7]=R*C+O*c+L*G+B*d;R=f[8];O=f[9];L=f[10];B=f[11];n[8]=R*m+O*a+L*l+B*y;n[9]=R*r+O*H+L*b+B*u;n[10]=R*p+O*k+L*h+B*E;n[11]=R*C+O*c+L*G+B*d;R=f[12];O=f[13];L=f[14];B=f[15];n[12]=R*m+O*a+L*l+B*y;n[13]=R*r+O*H+L*b+B*u;n[14]=R*p+O*k+L*h+B*E;n[15]=R*C+O*c+L*G+B*d;return n}Object.defineProperty(w,"__esModule",{value:!0});w.create=function(){var d=new y(16);d[0]=1;
d[1]=0;d[2]=0;d[3]=0;d[4]=0;d[5]=1;d[6]=0;d[7]=0;d[8]=0;d[9]=0;d[10]=1;d[11]=0;d[12]=0;d[13]=0;d[14]=0;d[15]=1;return d};w.clone=function(d){var f=new y(16);f[0]=d[0];f[1]=d[1];f[2]=d[2];f[3]=d[3];f[4]=d[4];f[5]=d[5];f[6]=d[6];f[7]=d[7];f[8]=d[8];f[9]=d[9];f[10]=d[10];f[11]=d[11];f[12]=d[12];f[13]=d[13];f[14]=d[14];f[15]=d[15];return f};w.copy=function(d,f){f[0]=d[0];f[1]=d[1];f[2]=d[2];f[3]=d[3];f[4]=d[4];f[5]=d[5];f[6]=d[6];f[7]=d[7];f[8]=d[8];f[9]=d[9];f[10]=d[10];f[11]=d[11];f[12]=d[12];f[13]=
d[13];f[14]=d[14];f[15]=d[15];return f};w.identity=N;w.transpose=function(d,f){if(f===d){var m=d[1],v=d[2],r=d[3],p=d[6],n=d[7],a=d[11];f[1]=d[4];f[2]=d[8];f[3]=d[12];f[4]=m;f[6]=d[9];f[7]=d[13];f[8]=v;f[9]=p;f[11]=d[14];f[12]=r;f[13]=n;f[14]=a}else f[0]=d[0],f[1]=d[4],f[2]=d[8],f[3]=d[12],f[4]=d[1],f[5]=d[5],f[6]=d[9],f[7]=d[13],f[8]=d[2],f[9]=d[6],f[10]=d[10],f[11]=d[14],f[12]=d[3],f[13]=d[7],f[14]=d[11],f[15]=d[15];return f};w.invert=function(d,f){var m=d[0],v=d[1],r=d[2],p=d[3],n=d[4],a=d[5],
H=d[6],k=d[7],c=d[8],l=d[9],b=d[10],h=d[11],G=d[12],y=d[13],u=d[14];d=d[15];var E=m*a-v*n,R=m*H-r*n,O=m*k-p*n,L=v*H-r*a,B=v*k-p*a,Y=r*k-p*H,K=c*y-l*G,ha=c*u-b*G,T=c*d-h*G,V=l*u-b*y,A=l*d-h*y,aa=b*d-h*u,J=E*aa-R*A+O*V+L*T-B*ha+Y*K;if(!J)return null;J=1/J;f[0]=(a*aa-H*A+k*V)*J;f[1]=(r*A-v*aa-p*V)*J;f[2]=(y*Y-u*B+d*L)*J;f[3]=(b*B-l*Y-h*L)*J;f[4]=(H*T-n*aa-k*ha)*J;f[5]=(m*aa-r*T+p*ha)*J;f[6]=(u*O-G*Y-d*R)*J;f[7]=(c*Y-b*O+h*R)*J;f[8]=(n*A-a*T+k*K)*J;f[9]=(v*T-m*A-p*K)*J;f[10]=(G*B-y*O+d*E)*J;f[11]=(l*
O-c*B-h*E)*J;f[12]=(a*ha-n*V-H*K)*J;f[13]=(m*V-v*ha+r*K)*J;f[14]=(y*R-G*L-u*E)*J;f[15]=(c*L-l*R+b*E)*J;return f};w.adjoint=function(d,f){var m=d[0],v=d[1],r=d[2],p=d[3],n=d[4],a=d[5],H=d[6],k=d[7],c=d[8],l=d[9],b=d[10],h=d[11],G=d[12],y=d[13],u=d[14];d=d[15];f[0]=a*(b*d-h*u)-l*(H*d-k*u)+y*(H*h-k*b);f[1]=-(v*(b*d-h*u)-l*(r*d-p*u)+y*(r*h-p*b));f[2]=v*(H*d-k*u)-a*(r*d-p*u)+y*(r*k-p*H);f[3]=-(v*(H*h-k*b)-a*(r*h-p*b)+l*(r*k-p*H));f[4]=-(n*(b*d-h*u)-c*(H*d-k*u)+G*(H*h-k*b));f[5]=m*(b*d-h*u)-c*(r*d-p*u)+
G*(r*h-p*b);f[6]=-(m*(H*d-k*u)-n*(r*d-p*u)+G*(r*k-p*H));f[7]=m*(H*h-k*b)-n*(r*h-p*b)+c*(r*k-p*H);f[8]=n*(l*d-h*y)-c*(a*d-k*y)+G*(a*h-k*l);f[9]=-(m*(l*d-h*y)-c*(v*d-p*y)+G*(v*h-p*l));f[10]=m*(a*d-k*y)-n*(v*d-p*y)+G*(v*k-p*a);f[11]=-(m*(a*h-k*l)-n*(v*h-p*l)+c*(v*k-p*a));f[12]=-(n*(l*u-b*y)-c*(a*u-H*y)+G*(a*b-H*l));f[13]=m*(l*u-b*y)-c*(v*u-r*y)+G*(v*b-r*l);f[14]=-(m*(a*u-H*y)-n*(v*u-r*y)+G*(v*H-r*a));f[15]=m*(a*b-H*l)-n*(v*b-r*l)+c*(v*H-r*a);return f};w.determinant=function(d){var f=d[0],n=d[1],v=d[2],
r=d[3],p=d[4],z=d[5],a=d[6],y=d[7],k=d[8],c=d[9],l=d[10],b=d[11],h=d[12],G=d[13],ka=d[14];d=d[15];return(f*z-n*p)*(l*d-b*ka)-(f*a-v*p)*(c*d-b*G)+(f*y-r*p)*(c*ka-l*G)+(n*a-v*z)*(k*d-b*h)-(n*y-r*z)*(k*ka-l*h)+(v*y-r*a)*(k*G-c*h)};w.multiply=U;f.d(w,"mul",function(){return U});w.translate=function(d,f,n){var m=f[0],r=f[1];f=f[2];if(d===n)n[12]=d[0]*m+d[4]*r+d[8]*f+d[12],n[13]=d[1]*m+d[5]*r+d[9]*f+d[13],n[14]=d[2]*m+d[6]*r+d[10]*f+d[14],n[15]=d[3]*m+d[7]*r+d[11]*f+d[15];else{var p=d[0];var z=d[1];var a=
d[2];var C=d[3];var k=d[4];var c=d[5];var l=d[6];var b=d[7];var h=d[8];var G=d[9];var y=d[10];var u=d[11];n[0]=p;n[1]=z;n[2]=a;n[3]=C;n[4]=k;n[5]=c;n[6]=l;n[7]=b;n[8]=h;n[9]=G;n[10]=y;n[11]=u;n[12]=p*m+k*r+h*f+d[12];n[13]=z*m+c*r+G*f+d[13];n[14]=a*m+l*r+y*f+d[14];n[15]=C*m+b*r+u*f+d[15]}return n};w.scale=function(d,f,n){var m=f[0],r=f[1];f=f[2];n[0]=d[0]*m;n[1]=d[1]*m;n[2]=d[2]*m;n[3]=d[3]*m;n[4]=d[4]*r;n[5]=d[5]*r;n[6]=d[6]*r;n[7]=d[7]*r;n[8]=d[8]*f;n[9]=d[9]*f;n[10]=d[10]*f;n[11]=d[11]*f;n[12]=
d[12];n[13]=d[13];n[14]=d[14];n[15]=d[15];return n};w.rotate=function(d,f,C,v){var m=C[0],p=C[1];C=C[2];var z=Math.sqrt(m*m+p*p+C*C);if(Math.abs(z)<n)return null;z=1/z;m*=z;p*=z;C*=z;var a=Math.sin(f);var y=Math.cos(f);var k=1-y;f=d[0];z=d[1];var c=d[2];var l=d[3];var b=d[4];var h=d[5];var G=d[6];var ka=d[7];var u=d[8];var E=d[9];var R=d[10];var O=d[11];var L=m*m*k+y;var B=p*m*k+C*a;var Y=C*m*k-p*a;var K=m*p*k-C*a;var ha=p*p*k+y;var T=C*p*k+m*a;var V=m*C*k+p*a;m=p*C*k-m*a;p=C*C*k+y;v[0]=f*L+b*B+u*
Y;v[1]=z*L+h*B+E*Y;v[2]=c*L+G*B+R*Y;v[3]=l*L+ka*B+O*Y;v[4]=f*K+b*ha+u*T;v[5]=z*K+h*ha+E*T;v[6]=c*K+G*ha+R*T;v[7]=l*K+ka*ha+O*T;v[8]=f*V+b*m+u*p;v[9]=z*V+h*m+E*p;v[10]=c*V+G*m+R*p;v[11]=l*V+ka*m+O*p;d!==v&&(v[12]=d[12],v[13]=d[13],v[14]=d[14],v[15]=d[15]);return v};w.rotateX=function(d,f,n){var m=Math.sin(f);f=Math.cos(f);var r=d[4],p=d[5],z=d[6],a=d[7],C=d[8],k=d[9],c=d[10],l=d[11];d!==n&&(n[0]=d[0],n[1]=d[1],n[2]=d[2],n[3]=d[3],n[12]=d[12],n[13]=d[13],n[14]=d[14],n[15]=d[15]);n[4]=r*f+C*m;n[5]=p*
f+k*m;n[6]=z*f+c*m;n[7]=a*f+l*m;n[8]=C*f-r*m;n[9]=k*f-p*m;n[10]=c*f-z*m;n[11]=l*f-a*m;return n};w.rotateY=function(d,f,n){var m=Math.sin(f);f=Math.cos(f);var r=d[0],p=d[1],z=d[2],a=d[3],C=d[8],k=d[9],c=d[10],l=d[11];d!==n&&(n[4]=d[4],n[5]=d[5],n[6]=d[6],n[7]=d[7],n[12]=d[12],n[13]=d[13],n[14]=d[14],n[15]=d[15]);n[0]=r*f-C*m;n[1]=p*f-k*m;n[2]=z*f-c*m;n[3]=a*f-l*m;n[8]=r*m+C*f;n[9]=p*m+k*f;n[10]=z*m+c*f;n[11]=a*m+l*f;return n};w.rotateZ=function(d,f,n){var m=Math.sin(f);f=Math.cos(f);var r=d[0],p=d[1],
z=d[2],a=d[3],C=d[4],k=d[5],c=d[6],l=d[7];d!==n&&(n[8]=d[8],n[9]=d[9],n[10]=d[10],n[11]=d[11],n[12]=d[12],n[13]=d[13],n[14]=d[14],n[15]=d[15]);n[0]=r*f+C*m;n[1]=p*f+k*m;n[2]=z*f+c*m;n[3]=a*f+l*m;n[4]=C*f-r*m;n[5]=k*f-p*m;n[6]=c*f-z*m;n[7]=l*f-a*m;return n};w.fromTranslation=function(d,f){f[0]=1;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=1;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=1;f[11]=0;f[12]=d[0];f[13]=d[1];f[14]=d[2];f[15]=1;return f};w.fromScaling=function(d,f){f[0]=d[0];f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=d[1];
f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=d[2];f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f};w.fromRotation=function(d,f,C){var m=f[0],r=f[1];f=f[2];var p=Math.sqrt(m*m+r*r+f*f);if(Math.abs(p)<n)return null;p=1/p;m*=p;r*=p;f*=p;p=Math.sin(d);d=Math.cos(d);var z=1-d;C[0]=m*m*z+d;C[1]=r*m*z+f*p;C[2]=f*m*z-r*p;C[3]=0;C[4]=m*r*z-f*p;C[5]=r*r*z+d;C[6]=f*r*z+m*p;C[7]=0;C[8]=m*f*z+r*p;C[9]=r*f*z-m*p;C[10]=f*f*z+d;C[11]=0;C[12]=0;C[13]=0;C[14]=0;C[15]=1;return C};w.fromXRotation=function(d,f){var m=Math.sin(d);
d=Math.cos(d);f[0]=1;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=d;f[6]=m;f[7]=0;f[8]=0;f[9]=-m;f[10]=d;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f};w.fromYRotation=function(d,f){var m=Math.sin(d);d=Math.cos(d);f[0]=d;f[1]=0;f[2]=-m;f[3]=0;f[4]=0;f[5]=1;f[6]=0;f[7]=0;f[8]=m;f[9]=0;f[10]=d;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f};w.fromZRotation=function(d,f){var m=Math.sin(d);d=Math.cos(d);f[0]=d;f[1]=m;f[2]=0;f[3]=0;f[4]=-m;f[5]=d;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=1;f[11]=0;f[12]=0;f[13]=0;f[14]=
0;f[15]=1;return f};w.fromRotationTranslation=function(d,f,n){var m=d[0],r=d[1],p=d[2],z=d[3],a=m+m,C=r+r,k=p+p;d=m*a;var c=m*C;m*=k;var l=r*C;r*=k;p*=k;a*=z;C*=z;z*=k;n[0]=1-(l+p);n[1]=c+z;n[2]=m-C;n[3]=0;n[4]=c-z;n[5]=1-(d+p);n[6]=r+a;n[7]=0;n[8]=m+C;n[9]=r-a;n[10]=1-(d+l);n[11]=0;n[12]=f[0];n[13]=f[1];n[14]=f[2];n[15]=1;return n};w.fromRotationTranslationScale=function(d,f,n,v){var m=d[0],p=d[1],z=d[2],a=d[3],C=m+m,k=p+p,c=z+z;d=m*C;var l=m*k;m*=c;var b=p*k;p*=c;z*=c;C*=a;k*=a;a*=c;c=n[0];var h=
n[1];n=n[2];v[0]=(1-(b+z))*c;v[1]=(l+a)*c;v[2]=(m-k)*c;v[3]=0;v[4]=(l-a)*h;v[5]=(1-(d+z))*h;v[6]=(p+C)*h;v[7]=0;v[8]=(m+k)*n;v[9]=(p-C)*n;v[10]=(1-(d+b))*n;v[11]=0;v[12]=f[0];v[13]=f[1];v[14]=f[2];v[15]=1;return v};w.fromRotationTranslationScaleOrigin=function(d,f,n,v,r){var m=d[0],z=d[1],a=d[2],C=d[3],k=m+m,c=z+z,l=a+a;d=m*k;var b=m*c;m*=l;var h=z*c;z*=l;a*=l;k*=C;c*=C;C*=l;l=n[0];var G=n[1];n=n[2];var y=v[0],u=v[1];v=v[2];r[0]=(1-(h+a))*l;r[1]=(b+C)*l;r[2]=(m-c)*l;r[3]=0;r[4]=(b-C)*G;r[5]=(1-(d+
a))*G;r[6]=(z+k)*G;r[7]=0;r[8]=(m+c)*n;r[9]=(z-k)*n;r[10]=(1-(d+h))*n;r[11]=0;r[12]=f[0]+y-(r[0]*y+r[4]*u+r[8]*v);r[13]=f[1]+u-(r[1]*y+r[5]*u+r[9]*v);r[14]=f[2]+v-(r[2]*y+r[6]*u+r[10]*v);r[15]=1;return r};w.fromQuat=function(d,f){var m=d[0],n=d[1],r=d[2];d=d[3];var p=m+m,z=n+n,a=r+r;m*=p;var y=n*p;n*=z;var k=r*p,c=r*z;r*=a;p*=d;z*=d;d*=a;f[0]=1-n-r;f[1]=y+d;f[2]=k-z;f[3]=0;f[4]=y-d;f[5]=1-m-r;f[6]=c+p;f[7]=0;f[8]=k+z;f[9]=c-p;f[10]=1-m-n;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f};w.frustum=
function(d,f,n,v,r,p,z){var a=1/(f-d),m=1/(v-n),k=1/(r-p);z[0]=2*r*a;z[1]=0;z[2]=0;z[3]=0;z[4]=0;z[5]=2*r*m;z[6]=0;z[7]=0;z[8]=(f+d)*a;z[9]=(v+n)*m;z[10]=(p+r)*k;z[11]=-1;z[12]=0;z[13]=0;z[14]=p*r*2*k;z[15]=0;return z};w.perspective=function(d,f,n,v,r){d=1/Math.tan(d/2);var m=1/(n-v);r[0]=d/f;r[1]=0;r[2]=0;r[3]=0;r[4]=0;r[5]=d;r[6]=0;r[7]=0;r[8]=0;r[9]=0;r[10]=(v+n)*m;r[11]=-1;r[12]=0;r[13]=0;r[14]=2*v*n*m;r[15]=0;return r};w.perspectiveFromFieldOfView=function(d,f,n,v){var m=Math.tan(d.upDegrees*
Math.PI/180),p=Math.tan(d.downDegrees*Math.PI/180),z=Math.tan(d.leftDegrees*Math.PI/180);d=Math.tan(d.rightDegrees*Math.PI/180);var a=2/(z+d),C=2/(m+p);v[0]=a;v[1]=0;v[2]=0;v[3]=0;v[4]=0;v[5]=C;v[6]=0;v[7]=0;v[8]=-((z-d)*a*.5);v[9]=(m-p)*C*.5;v[10]=n/(f-n);v[11]=-1;v[12]=0;v[13]=0;v[14]=n*f/(f-n);v[15]=0;return v};w.ortho=function(d,f,n,v,r,p,z){var a=1/(d-f),m=1/(n-v),k=1/(r-p);z[0]=-2*a;z[1]=0;z[2]=0;z[3]=0;z[4]=0;z[5]=-2*m;z[6]=0;z[7]=0;z[8]=0;z[9]=0;z[10]=2*k;z[11]=0;z[12]=(d+f)*a;z[13]=(v+n)*
m;z[14]=(p+r)*k;z[15]=1;return z};w.lookAt=function(d,f,C,v){var m=d[0],p=d[1];d=d[2];var z=C[0];var a=C[1];var y=C[2];var k=f[0];C=f[1];var c=f[2];if(Math.abs(m-k)<n&&Math.abs(p-C)<n&&Math.abs(d-c)<n)return N(v);f=m-k;C=p-C;k=d-c;var l=1/Math.sqrt(f*f+C*C+k*k);f*=l;C*=l;k*=l;c=a*k-y*C;y=y*f-z*k;z=z*C-a*f;(l=Math.sqrt(c*c+y*y+z*z))?(l=1/l,c*=l,y*=l,z*=l):z=y=c=0;a=C*z-k*y;var b=k*c-f*z;var h=f*y-C*c;(l=Math.sqrt(a*a+b*b+h*h))?(l=1/l,a*=l,b*=l,h*=l):h=b=a=0;v[0]=c;v[1]=a;v[2]=f;v[3]=0;v[4]=y;v[5]=
b;v[6]=C;v[7]=0;v[8]=z;v[9]=h;v[10]=k;v[11]=0;v[12]=-(c*m+y*p+z*d);v[13]=-(a*m+b*p+h*d);v[14]=-(f*m+C*p+k*d);v[15]=1;return v};w.str=function(d){return"mat4("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+", "+d[4]+", "+d[5]+", "+d[6]+", "+d[7]+", "+d[8]+", "+d[9]+", "+d[10]+", "+d[11]+", "+d[12]+", "+d[13]+", "+d[14]+", "+d[15]+")"};w.frob=function(d){return Math.sqrt(Math.pow(d[0],2)+Math.pow(d[1],2)+Math.pow(d[2],2)+Math.pow(d[3],2)+Math.pow(d[4],2)+Math.pow(d[5],2)+Math.pow(d[6],2)+Math.pow(d[7],2)+Math.pow(d[8],
2)+Math.pow(d[9],2)+Math.pow(d[10],2)+Math.pow(d[11],2)+Math.pow(d[12],2)+Math.pow(d[13],2)+Math.pow(d[14],2)+Math.pow(d[15],2))};var n=1E-7,y="undefined"!==typeof Float32Array?Float32Array:Array},function(D,w,f){D=f(0);var N=f(16),U=f(14),n=f(4),y=f(71),d=f(45),m=f(72),C=f(28),v=f(20),r=f(8),p=f(11),z=f(17),a=f(6),H=f(2),k=f(37),c=f(3);f=Object(D.a)("__renderer",function(f,b){function h(b){for(var e=b.qa,h=b.vb,k=null,d=a.j(e.na,ta),f=0;f<h.length;f++){var l=h[f];if(l.Ec){var q=l.ec,t=l.jb;if(q.qj!=
k){I.useProgram(q.qj);k=b;for(var m=e,u=q,n=u.WI,r=n.length;r--;){var p=n[r];p.Io(I,p.lf,k,m)}if(u.hp&&!u.Bw)for(u.vB.length||E(u),u=u.vB,n=u.length;n--;)p=u[n],p.Io(I,p.lf,k,m);k=q.qj}l.Yf?(I.enable(I.SAMPLE_ALPHA_TO_COVERAGE),b.Ob||I.enable(I.BLEND)):(I.disable(I.SAMPLE_ALPHA_TO_COVERAGE),b.Ob||I.disable(I.BLEND));for(l=0;l<t.length;l++)if(n=t[l],n.Ec){u=n.$g;m=n.fb;K.mU(m);K.vG()&&"DEBUG_VIEW"==m.type&&(m.pr=H._51(R.CM(m.uo),m.pr,1,15));if(oa.alpha_sort&&m.Uf){p=u;n=n.Qv;r=d;var v=m.$a;if(c.dist(r,
n.LJ)>oa.alpha_sort_threshold*Math.min(n.FM,1)||p.Gr)T.LU(v,n,p.na,r),c.copy(r,n.LJ),p.Gr=!1}p=b;n=m;r=q;for(var J=r.XI,B=J.length;B--;)v=J[B],v.Io(I,v.lf,u,n);if(r.hp&&!r.Bw){r.ss.length||E(r);J=r.ss;for(B=J.length;B--;)v=J[B],v.Io(I,v.lf,u,n);r.hp=!1}I.depthMask(n.Ab);n.pb?I.enable(I.CULL_FACE):I.disable(I.CULL_FACE);v=n.Ua;J=I;for(B=0;B<v.length;B++){var P=v[B];J.activeTexture(J.TEXTURE0+B);J.bindTexture(P.Vb,P.hc);P.Ee&&J.generateMipmap(P.Vb)}if(p.type==V.Ve||p.type==V.Sk){u=p;r=r.cm;J=u.qa.wc;
v=J.hc;J=J.Vb;B=u.sh;for(P=0;6>P;P++){var aa=ka(P);oa.nz?(I.bindTexture(I.TEXTURE_CUBE_MAP,v),I.texImage2D(aa,0,I.RGBA,1,1,0,I.RGBA,I.UNSIGNED_BYTE,da)):(I.uniformMatrix4fv(r.u_cube_view_matrix,!1,B[P]),I.uniform4fv(r.u_sky_tex_fac,u.Hp),I.uniform3fv(r.u_sky_tex_color,u.Fp),I.uniform1f(r.u_sky_tex_dvar,u.Gp),I.uniform3fv(r.u_horizon_color,u.we),I.uniform3fv(r.u_zenith_color,u.Fe),I.framebufferTexture2D(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,aa,v,0),pa(n,0));if(u.gp&&5!=P){aa=u;var z=P,G=M;oa.nz?G.set(da):
(I.readPixels(191,191,1,1,I.RGBA,I.UNSIGNED_BYTE,G),255!=G[0]&&255!=G[1]&&255!=G[2]||I.readPixels(191,220,1,1,I.RGBA,I.UNSIGNED_BYTE,G));var C=G[0],y=G[1];G=G[2];C/=255;y/=255;G/=255;4===z?(aa.eg[3]=C,aa.eg[7]=y,aa.eg[11]=G):(aa.eg[4*z]=C,aa.eg[4*z+1]=y,aa.eg[4*z+2]=G)}}oa.Tx&&(I.bindTexture(J,v),I.generateMipmap(J),I.texParameteri(J,I.TEXTURE_MIN_FILTER,A.Gi));I.bindFramebuffer(I.FRAMEBUFFER,null);p.cl+=6}else if(p.type==V.$n){u=n;n=r.cm;v=p.qa.wc;r=v.hc;J=v.Vb;v=p.sh;oa.Tx&&(I.activeTexture(I.TEXTURE7),
I.bindTexture(J,r),I.generateMipmap(J),I.texParameteri(J,I.TEXTURE_MIN_FILTER,A.Gi));for(J=0;5>J;++J)for(I.viewport(0,0,128*Math.pow(.5,J),128*Math.pow(.5,J)),B=J/4,P=0;6>P;P++)aa=ka(P),I.uniformMatrix4fv(n.u_cube_view_matrix,!1,v[P]),I.uniform1f(n.u_roughness,B),I.framebufferTexture2D(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,aa,r,J),pa(u,0);p.cl+=30}else pa(n,u.ly),p.cl++;K.oU(m);K.vG()&&"MAIN"==m.type&&R.DM(m.id,m.fg)}}}}function l(a){if(a){var b=(a.Ub?I.COLOR_BUFFER_BIT:0)|(a.Yb?I.DEPTH_BUFFER_BIT:0);
if(!b)return;switch(a.type){case V.He:a=q;break;case V.ee:a=aa;break;case V.Gg:a=J;break;case V.zf:case V.Uh:case V.Wn:a=P;break;case V.ic:case V.Wh:case V.Aq:case V.Lt:a=q;break;default:a=oa.background_color}}else b=I.COLOR_BUFFER_BIT|I.DEPTH_BUFFER_BIT,a=oa.background_color;I.colorMask(!0,!0,!0,!0);I.depthMask(!0);I.clearColor(a[0],a[1],a[2],a[3]);I.clear(b)}function ka(a){switch(a){case 0:return I.TEXTURE_CUBE_MAP_POSITIVE_X;case 1:return I.TEXTURE_CUBE_MAP_NEGATIVE_X;case 2:return I.TEXTURE_CUBE_MAP_POSITIVE_Y;
case 3:return I.TEXTURE_CUBE_MAP_NEGATIVE_Y;case 4:return I.TEXTURE_CUBE_MAP_POSITIVE_Z;case 5:return I.TEXTURE_CUBE_MAP_NEGATIVE_Z}}function u(a){var b=ha.kA(),c=a.Jq,h=a.$a,k=h.mc;a.Sf.length=0;var d=1;for(f in k)d=Math.max(d,k[f].frames);for(k=0;k<d;k++){var f=b.createVertexArray();ja(f);h.Eh&&I.bindBuffer(I.ELEMENT_ARRAY_BUFFER,h.Eh);for(var l=0;l<h.be.length;l++){I.bindBuffer(I.ARRAY_BUFFER,h.be[l].Nk);for(var q=0;q<c.length;q++){var t=c[q];t.oy==h.be[l].type&&(I.enableVertexAttribArray(t.lf),
I.vertexAttribPointer(t.lf,t.Tc,t.Lo,t.Lo==I.FLOAT?!1:!0,0,t.gu+t.gv*k),e(t.lf,t.Nm))}}ja(null);a.Sf.push(f)}}function E(b){var e=b.cm,c=b.XI,h=b.ss,k=b.WI,d=b.vB;c.length=0;h.length=0;k.length=0;d.length=0;for(var f in e){var l=!1,q=null,t=null;switch(f){case "u_proj_matrix":case "u_proj_matrix_frag":q=function(a,b,e,c){a.uniformMatrix4fv(b,!1,c.gc)};l=!0;break;case "u_view_refl_matrix":q=function(a,b,e,c){a.uniformMatrix4fv(b,!1,c.pq)};l=!0;break;case "u_view_tsr":case "u_view_tsr_frag":q=function(a,
b,e,c){c.ad?a.uniformMatrix3fv(b,!1,c.Fs):a.uniformMatrix3fv(b,!1,c.Ag)};l=!0;break;case "u_view_tsr_inverse":q=function(a,b,e,c){c.ad?a.uniformMatrix3fv(b,!1,c.Ww):a.uniformMatrix3fv(b,!1,c.ry)};l=!0;break;case "u_shadow_cast_billboard_view_tsr":q=function(a,b,e,c){a.uniformMatrix3fv(b,!1,c.Ts)};l=!0;break;case "u_view_proj_prev":q=function(a,b,e,c){a.uniformMatrix4fv(b,!1,c.zB)};l=!0;break;case "u_view_proj_matrix":q=function(a,b,e,c){a.uniformMatrix4fv(b,!1,c.zg)};l=!0;break;case "u_view_proj_inverse":q=
function(a,b,e,c){a.uniformMatrix4fv(b,!1,c.qy)};l=!0;break;case "u_sky_vp_inverse":q=function(a,b,e,c){a.uniformMatrix4fv(b,!1,c.Oh)};l=!0;break;case "u_camera_eye":case "u_camera_eye_frag":q=function(b,e,c,h){b.uniform3fv(e,a.j(h.na,ta))};l=!0;break;case "u_camera_quat":q=function(b,e,c,h){b.uniform4fv(e,a.g(h.na,w))};l=!0;break;case "u_view_max_depth":q=function(a,b,e,c){a.uniform1f(b,c.far)};l=!0;break;case "u_camera_range":q=function(a,b,e,c){a.uniform2f(b,c.near,c.far)};l=!0;break;case "u_csm_center_dists":q=
function(a,b,e,c){a.uniform4fv(b,c.Bu)};break;case "u_height":q=function(a,b,e,c){a.uniform1f(b,c.height)};l=!0;break;case "u_pcf_blur_radii":q=function(a,b,e,c){a.uniform4fv(b,c.sp)};break;case "u_dof_dist":q=function(a,b,e,c){c.dof_on?a.uniform1f(b,c.dof_distance):a.uniform1f(b,0)};l=!0;break;case "u_dof_front_start":q=function(a,b,e,c){a.uniform1f(b,c.dof_front_start)};l=!0;break;case "u_dof_front_end":q=function(a,b,e,c){a.uniform1f(b,c.dof_front_end)};l=!0;break;case "u_dof_rear_start":q=function(a,
b,e,c){a.uniform1f(b,c.dof_rear_start)};l=!0;break;case "u_dof_rear_end":q=function(a,b,e,c){a.uniform1f(b,c.dof_rear_end)};l=!0;break;case "u_dof_bokeh_intensity":q=function(a,b,e,c){a.uniform1f(b,c.dof_bokeh_intensity)};l=!0;break;case "u_camera_direction":q=function(a,b,e,c){a.uniform3fv(b,c.direction)};l=!0;break;case "u_cam_water_depth":q=function(a,b,e){a.uniform1f(b,e.Vq)};l=!0;break;case "u_fog_color_density":q=function(a,b,e){a.uniform4fv(b,e.ue)};break;case "u_fog_params":q=function(a,b,
e){a.uniform4fv(b,e.kg)};break;case "u_underwater_fog_color_density":q=function(a,b,e){a.uniform4fv(b,e.Bi)};break;case "u_bloom_key":q=function(a,b,e){a.uniform1f(b,e.no)};break;case "u_average_lum_val":q=function(a,b,e){a.uniform1f(b,e.average_luminance)};break;case "u_mipmap_1x1":q=function(a,b,e){a.uniform1f(b,e.aw)};break;case "u_bloom_edge_lum":q=function(a,b,e){a.uniform1f(b,e.mo)};break;case "u_time":q=function(a,b,e){a.uniform1f(b,e.time)};l=!0;break;case "u_wind":q=function(a,b,e){a.uniform3fv(b,
e.Ci)};l=!0;break;case "u_sky_tex_dvar":q=function(a,b,e){a.uniform1f(b,e.Gp)};break;case "u_sky_tex_fac":q=function(a,b,e){a.uniform4fv(b,e.Hp)};break;case "u_sky_tex_color":q=function(a,b,e){a.uniform3fv(b,e.Fp)};break;case "u_horizon_color":q=function(a,b,e){a.uniform3fv(b,e.we)};break;case "u_zenith_color":q=function(a,b,e){a.uniform3fv(b,e.Fe)};break;case "u_environment_energy":q=function(a,b,e){a.uniform1f(b,e.Rg)};break;case "u_bsdf_cube_sky_dim":q=function(a,b,e){a.uniform1f(b,e.lu)};l=!0;
break;case "u_sky_color":q=function(a,b,e){a.uniform3fv(b,e.Sl)};break;case "u_rayleigh_brightness":q=function(a,b,e){a.uniform1f(b,e.rayleigh_brightness)};break;case "u_mie_brightness":q=function(a,b,e){a.uniform1f(b,e.mie_brightness)};break;case "u_spot_brightness":q=function(a,b,e){a.uniform1f(b,e.spot_brightness)};break;case "u_scatter_strength":q=function(a,b,e){a.uniform1f(b,e.scatter_strength)};break;case "u_rayleigh_strength":q=function(a,b,e){a.uniform1f(b,e.rayleigh_strength)};break;case "u_mie_strength":q=
function(a,b,e){a.uniform1f(b,e.mie_strength)};break;case "u_rayleigh_collection_power":q=function(a,b,e){a.uniform1f(b,e.rayleigh_collection_power)};break;case "u_mie_collection_power":q=function(a,b,e){a.uniform1f(b,e.mie_collection_power)};break;case "u_mie_distribution":q=function(a,b,e){a.uniform1f(b,e.mie_distribution)};break;case "u_light_positions":q=function(a,b,e){a.uniform4fv(b,e.jn)};break;case "u_light_directions":q=function(a,b,e){a.uniform3fv(b,e.ds)};break;case "u_light_color_intensities":q=
function(a,b,e){a.uniform4fv(b,e.hn)};break;case "u_sun_quaternion":q=function(a,b,e){a.uniform4fv(b,e.Px)};break;case "u_sun_intensity":q=function(a,b,e){a.uniform3fv(b,e.Ox)};break;case "u_sun_direction":q=function(a,b,e){a.uniform3fv(b,e.Nx)};break;case "u_debug_view_mode":q=function(a,b,e){a.uniform1i(b,e.debug_view_mode)};break;case "u_debug_colors_seed":q=function(a,b,e){a.uniform1f(b,e.debug_colors_seed)};break;case "u_debug_render_time_threshold":q=function(a,b,e){a.uniform1f(b,e.Hu)};break;
case "u_subpixel_jitter":q=function(a,b,e){a.uniform2fv(b,e.JA)};l=!0;break;case "u_subsample_indices":q=function(a,b,e){a.uniform4fv(b,e.iR)};l=!0;break;case "u_radial_blur_step":q=function(a,b,e){a.uniform1f(b,e.vp)};break;case "u_god_rays_intensity":q=function(a,b,e){a.uniform1f(b,e.god_rays_intensity)};break;case "u_ssao_radius_increase":q=function(a,b,e){a.uniform1f(b,e.Np)};break;case "u_ssao_blur_discard_value":q=function(a,b,e){a.uniform1f(b,e.Jp)};l=!0;break;case "u_ssao_influence":q=function(a,
b,e){a.uniform1f(b,e.Mp)};break;case "u_ssao_dist_factor":q=function(a,b,e){a.uniform1f(b,e.Kp)};break;case "u_texel_size":q=function(a,b,e){a.uniform2fv(b,e.ft)};l=!0;break;case "u_normal_offset":q=function(a,b,e){a.uniform1f(b,e.self_shadow_normal_offset)};break;case "u_v_light_ts":q=function(a,b,e){a.uniform4fv(b,e.iq)};l=!0;break;case "u_v_light_r":q=function(a,b,e){a.uniform4fv(b,e.hq)};l=!0;break;case "u_v_light_tsr":q=function(a,b,e){a.uniformMatrix3fv(b,!1,e.vt)};l=!0;break;case "u_p_light_matrix0":q=
function(a,b,e){a.uniformMatrix4fv(b,!1,e.rk[0])};l=!0;break;case "u_p_light_matrix1":q=function(a,b,e){a.uniformMatrix4fv(b,!1,e.rk[1])};l=!0;break;case "u_p_light_matrix2":q=function(a,b,e){a.uniformMatrix4fv(b,!1,e.rk[2])};l=!0;break;case "u_p_light_matrix3":q=function(a,b,e){a.uniformMatrix4fv(b,!1,e.rk[3])};l=!0;break;case "u_outline_color":q=function(a,b,e){a.uniform3fv(b,e.si)};break;case "u_draw_outline":q=function(a,b,e){a.uniform1f(b,e.wr)};l=!0;break;case "u_glow_mask_small_coeff":q=function(a,
b,e){a.uniform1f(b,e.small_glow_mask_coeff)};l=!0;break;case "u_glow_mask_large_coeff":q=function(a,b,e){a.uniform1f(b,e.large_glow_mask_coeff)};l=!0;break;case "u_brightness":q=function(a,b,e){a.uniform1f(b,e.brightness)};break;case "u_contrast":q=function(a,b,e){a.uniform1f(b,e.contrast)};break;case "u_exposure":q=function(a,b,e){a.uniform1f(b,e.exposure)};break;case "u_saturation":q=function(a,b,e){a.uniform1f(b,e.saturation)};break;case "u_enable_hmd_stereo":q=function(a,b,e){a.uniform1i(b,e.enable_hmd_stereo)};
break;case "u_distortion_params":q=function(a,b,e){a.uniform4fv(b,e.Vj)};break;case "u_chromatic_aberration_coefs":q=function(a,b,e){a.uniform4fv(b,e.chromatic_aberration_coefs)};break;case "u_motion_blur_exp":q=function(a,b,e){a.uniform1f(b,e.uw)};l=!0;break;case "u_motion_blur_decay_threshold":q=function(a,b,e){a.uniform1f(b,e.mb_decay_threshold)};l=!0;break;case "u_model_tsr":t=function(a,b,e){a.uniformMatrix3fv(b,!1,e.na)};l=!0;break;case "u_model_tsr_inverse":t=function(a,b,e){a.uniformMatrix3fv(b,
!1,e.By)};l=!0;break;case "u_transb":t=function(a,b,e){a.uniform4fv(b,e.De)};l=!0;break;case "u_transa":t=function(a,b,e){a.uniform4fv(b,e.wf)};l=!0;break;case "u_arm_rel_trans":t=function(a,b,e){a.uniform4fv(b,e.jo)};l=!0;break;case "u_arm_rel_quat":t=function(a,b,e){a.uniform4fv(b,e.Gq)};l=!0;break;case "u_quat":t=function(b,e,c){b.uniform4fv(e,a.g(c.na,w))};l=!0;break;case "u_quatsb":t=function(a,b,e){a.uniform4fv(b,e.ye)};l=!0;break;case "u_quatsa":t=function(a,b,e){a.uniform4fv(b,e.qf)};l=!0;
break;case "u_frame_factor":t=function(a,b,e){a.uniform1f(b,e.lg)};l=!0;break;case "au_center_pos":t=function(a,b,e){a.uniform3fv(b,e.pu)};l=!0;break;case "au_wind_bending_amp":t=function(a,b,e){a.uniform1f(b,e.Cg)};l=!0;break;case "au_wind_bending_freq":t=function(a,b,e){a.uniform1f(b,e.Dg)};l=!0;break;case "au_detail_bending_freq":t=function(a,b,e){a.uniform1f(b,e.ig)};l=!0;break;case "au_detail_bending_amp":t=function(a,b,e){a.uniform1f(b,e.hg)};l=!0;break;case "au_branch_bending_amp":t=function(a,
b,e){a.uniform1f(b,e.cg)};l=!0;break;case "u_node_values":t=function(a,b,e,c){a.uniform4fv(b,c.pi)};l=!0;break;case "u_node_rgbs":t=function(a,b,e,c){a.uniform3fv(b,c.Ne)};l=!0;break;case "u_lod_coverage":t=function(a,b,e,c){a.uniform1f(b,c.xl.Df)};l=!0;break;case "u_lod_cmp_logic":t=function(a,b,e,c){a.uniform1f(b,c.xl.su)};l=!0;break;case "u_diffuse_color":t=function(a,b,e,c){a.uniform4fv(b,c.Qc)};l=!0;break;case "u_diffuse_intensity":t=function(a,b,e,c){a.uniform1f(b,c.Je)};l=!0;break;case "u_diffuse_params":t=
function(a,b,e,c){a.uniform2fv(b,c.he)};l=!0;break;case "u_emit":t=function(a,b,e,c){a.uniform1f(b,c.ie)};l=!0;break;case "u_ambient":t=function(a,b,e,c){a.uniform1f(b,c.fe)};l=!0;break;case "u_specular_color":t=function(a,b,e,c){a.uniform3fv(b,c.Re)};l=!0;break;case "u_specular_alpha":t=function(a,b,e,c){a.uniform1f(b,c.rg)};l=!0;break;case "u_specular_params":t=function(a,b,e,c){a.uniform3fv(b,c.tf)};l=!0;break;case "u_reflect_factor":t=function(a,b,e,c){a.uniform1f(b,c.reflect_factor)};l=!0;break;
case "u_mirror_factor":t=function(a,b,e,c){a.uniform1f(b,c.nn)};l=!0;break;case "u_grass_map_dim":t=function(a,b,e,c){a.uniform3fv(b,c.Ud)};l=!0;break;case "u_grass_size":t=function(a,b,e,c){a.uniform1f(b,c.bk)};l=!0;break;case "u_scale_threshold":t=function(a,b,e,c){a.uniform1f(b,c.zv)};l=!0;break;case "u_cube_fog":t=function(a,b,e,c){a.uniformMatrix4fv(b,!1,c.eg)};break;case "u_jitter_amp":t=function(a,b,e,c){a.uniform1f(b,c.Xv)};l=!0;break;case "u_jitter_freq":t=function(a,b,e,c){a.uniform1f(b,
c.Yv)};l=!0;break;case "u_wireframe_edge_color":t=function(a,b,e,c){a.uniform3fv(b,c.wireframe_edge_color)};break;case "u_cluster_id":t=function(a,b,e,c){a.uniform1f(b,c.cr)};l=!0;break;case "u_batch_debug_id_color":t=function(a,b,e,c){a.uniform1f(b,c.Gu)};l=!0;break;case "u_batch_debug_main_render_time":t=function(a,b,e,c){a.uniform1f(b,c.pr)};l=!0;break;case "u_refr_bump":t=function(a,b,e,c){a.uniform1f(b,c.Nh)};l=!0;break;case "u_line_width":t=function(a,b,e,c){a.uniform1f(b,c.kn)};l=!0;break;
case "u_lamp_light_positions":t=function(a,b,e,c){a.uniform3fv(b,c.Zo)};break;case "u_lamp_light_directions":t=function(a,b,e,c){a.uniform3fv(b,c.Zr)};break;case "u_lamp_light_color_intensities":t=function(a,b,e,c){a.uniform3fv(b,c.Yr)};break;case "u_halo_size":t=function(a,b,e,c){a.uniform1f(b,c.Jv)};l=!0;break;case "u_halo_hardness":t=function(a,b,e,c){a.uniform1f(b,c.Gv)};l=!0;break;case "u_halo_rings_color":t=function(a,b,e,c){a.uniform3fv(b,c.Iv)};l=!0;break;case "u_halo_lines_color":t=function(a,
b,e,c){a.uniform3fv(b,c.Hv)};l=!0;break;case "u_halo_stars_blend":t=function(a,b,e,c){a.uniform1f(b,c.Kv)};l=!0;break;case "u_halo_stars_height":t=function(a,b,e,c){a.uniform1f(b,c.Lv)};l=!0;break;case "u_fresnel_params":t=function(a,b,e,c){a.uniform2fv(b,c.ii)};l=!0;break;case "u_texture_scale":t=function(a,b,e,c){a.uniform3fv(b,c.Rh)};l=!0;break;case "u_parallax_scale":t=function(a,b,e,c){a.uniform1f(b,c.parallax_scale)};l=!0;break;case "u_color_id":t=function(a,b,e){a.uniform3fv(b,e.al)};l=!0;
break;case "u_diffuse_color_factor":t=function(a,b,e,c){a.uniform1f(b,c.Wi)};l=!0;break;case "u_alpha_factor":t=function(a,b,e,c){a.uniform1f(b,c.Ii)};l=!0;break;case "u_specular_color_factor":t=function(a,b,e,c){a.uniform1f(b,c.Dk)};l=!0;break;case "u_normal_factor":t=function(a,b,e,c){a.uniform1f(b,c.mp)};l=!0;break;case "u_normalmap0_scale":t=function(a,b,e,c){a.uniform2fv(b,c.qk[0])};l=!0;break;case "u_normalmap1_scale":t=function(a,b,e,c){a.uniform2fv(b,c.qk[1])};l=!0;break;case "u_normalmap2_scale":t=
function(a,b,e,c){a.uniform2fv(b,c.qk[2])};l=!0;break;case "u_normalmap3_scale":t=function(a,b,e,c){a.uniform2fv(b,c.qk[3])};l=!0;break;case "u_foam_factor":t=function(a,b,e,c){a.uniform1f(b,c.foam_factor)};l=!0;break;case "u_foam_uv_freq":t=function(a,b,e,c){a.uniform2fv(b,c.ev)};l=!0;break;case "u_foam_mag":t=function(a,b,e,c){a.uniform2fv(b,c.dv)};l=!0;break;case "u_foam_scale":t=function(a,b,e,c){a.uniform2fv(b,c.Er)};l=!0;break;case "u_water_norm_uv_velocity":t=function(a,b,e,c){a.uniform1f(b,
c.jm)};l=!0;break;case "u_shallow_water_col":t=function(a,b,e,c){a.uniform3fv(b,c.shallow_water_col)};l=!0;break;case "u_shore_water_col":t=function(a,b,e,c){a.uniform3fv(b,c.shore_water_col)};l=!0;break;case "u_water_shallow_col_fac":t=function(a,b,e,c){a.uniform1f(b,c.shallow_water_col_fac)};l=!0;break;case "u_water_shore_col_fac":t=function(a,b,e,c){a.uniform1f(b,c.shore_water_col_fac)};l=!0;break;case "u_p_length":t=function(a,b,e,c){a.uniform1f(b,c.sb.Wx)};l=!0;break;case "u_p_cyclic":t=function(a,
b,e,c){a.uniform1i(b,c.sb.cyclic)};l=!0;break;case "u_p_max_lifetime":t=function(a,b,e,c){a.uniform1f(b,c.sb.dw)};l=!0;break;case "u_p_fade_in":t=function(a,b,e,c){a.uniform1f(b,c.sb.Yj)};l=!0;break;case "u_p_fade_out":t=function(a,b,e,c){a.uniform1f(b,c.sb.Gf)};l=!0;break;case "u_p_size":t=function(a,b,e,c){a.uniform1f(b,c.sb.size)};l=!0;break;case "u_p_alpha_start":t=function(a,b,e,c){a.uniform1f(b,c.sb.Yt)};l=!0;break;case "u_p_alpha_end":t=function(a,b,e,c){a.uniform1f(b,c.sb.Xt)};l=!0;break;
case "u_p_nfactor":t=function(a,b,e,c){a.uniform1f(b,c.sb.ip)};l=!0;break;case "u_p_gravity":t=function(a,b,e,c){a.uniform1f(b,c.sb.Av)};l=!0;break;case "u_p_mass":t=function(a,b,e,c){a.uniform1f(b,c.sb.mf)};l=!0;break;case "u_p_color_ramp":t=function(a,b,e,c){a.uniform4fv(b,c.sb.vu)};l=!0;break;case "u_p_wind_fac":t=function(a,b,e,c){a.uniform1f(b,c.sb.zy)};l=!0;break;case "u_p_time":t=function(a,b,e,c){a.uniform1f(b,c.sb.time)};l=!0;break;case "u_p_tilt":t=function(a,b,e,c){a.uniform1f(b,c.sb.Ux)};
l=!0;break;case "u_p_tilt_rand":t=function(a,b,e,c){a.uniform1f(b,c.sb.Vx)};l=!0;break;case "u_position":t=function(a,b,e,c){a.uniform3fv(b,c.tm)};l=!0;break;case "u_va_frame_factor":t=function(a,b,e){a.uniform1f(b,e.my)};l=!0;break;case "u_refl_plane":t=function(a,b,e){a.uniform4fv(b,e.ad)};l=!0;break;case "u_outline_intensity":t=function(a,b,e){a.uniform1f(b,e.mj)};l=!0;break;case "u_obj_info":t=function(a,b,e,c){a.uniform3fv(b,c.op)},l=!0}t&&(t={name:f,Io:t,lf:e[f]},l?c.push(t):h.push(t));q&&(t=
{name:f,Io:q,lf:e[f]},l?k.push(t):d.push(t))}if(h.length||d.length){b=b.wB;for(var A in b)delete b[A];for(A=0;A<h.length;A++)t=h[A],b[t.name]=t;for(A=0;A<d.length;A++)t=d[A],b[t.name]=t}else b.Bw=!0}var R=Object(N.a)(f),O=Object(U.a)(f),L=Object(n.a)(f),B=Object(y.a)(f),Y=Object(d.a)(f),K=Object(m.a)(f),ha=Object(C.a)(f),T=Object(v.a)(f),V=Object(p.a)(f),A=Object(z.a)(f),aa=[1,0,0,1],J=[1,1,1,1],P=[0,0,0,1],q=[0,0,0,0],da=new Uint8Array([91.8,142.8,.96*255,255]),I=null,t=null,e=null,ma=null,ja=null,
pa=null,ta=new Float32Array(3),w=r.create(),M=new Uint8Array(4),oa=L.wa;b.fh=function(a){var b=oa.background_color;a.clearColor(b[0],b[1],b[2],b[3]);a.clearDepth(1);a.enable(a.DEPTH_TEST);a.depthFunc(a.LEQUAL);a.enable(a.CULL_FACE);a.frontFace(a.CCW);a.cullFace(a.BACK);a.enable(a.BLEND);a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA);I=a};b.Xj=function(b){if(b.Ec&&!b.Rm)if(b.type==V.Kt){K.hC(b);var e=b.qa;I.bindFramebuffer(I.READ_FRAMEBUFFER,e.Hr);I.bindFramebuffer(I.DRAW_FRAMEBUFFER,e.Hf);var c=0;e.wc&&
(c|=I.COLOR_BUFFER_BIT);e.gg&&(c|=I.DEPTH_BUFFER_BIT);I.blitFramebuffer(0,0,e.width,e.height,0,0,e.width,e.height,c,I.NEAREST);K.kC(b);Y.mA("draw resolve")}else if(b.type==V.Gy)K.hC(b),e=b.qa,I.bindFramebuffer(I.FRAMEBUFFER,e.Hr),I.bindTexture(I.TEXTURE_2D,e.wc.hc),I.copyTexSubImage2D(I.TEXTURE_2D,0,0,0,0,0,e.width,e.height,0),K.kC(b),Y.mA("draw copy");else{K.hC(b);e=b.qa;I.bindFramebuffer(I.FRAMEBUFFER,e.Hf);b.Iq&&(c=e.wc,I.framebufferTexture2D(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,c.Vb,c.hc,0));I.viewport(0,
0,e.width,e.height);b.type!=V.xd&&b.type!=V.Ge&&l(b);b.Ob?I.enable(I.BLEND):I.disable(I.BLEND);b.Ad?I.enable(I.DEPTH_TEST):I.disable(I.DEPTH_TEST);switch(b.type){case V.ee:I.enable(I.POLYGON_OFFSET_FILL);I.polygonOffset(b.self_shadow_polygon_offset,b.self_shadow_polygon_offset);I.cullFace(I.BACK);break;case V.de:case V.Ue:I.disable(I.POLYGON_OFFSET_FILL);I.cullFace(I.FRONT);break;case V.Vh:I.enable(I.POLYGON_OFFSET_FILL);I.polygonOffset(-4,-4);I.cullFace(I.BACK);break;case V.He:if(1<oa.Jc||oa.aT){I.enable(I.POLYGON_OFFSET_FILL);
I.polygonOffset(-2,-2);break}default:I.disable(I.POLYGON_OFFSET_FILL),I.cullFace(I.BACK)}if(b.type==V.xd||b.type==V.Ge){e=b.qa;c=e.wc.hc;for(var k=0;6>k;k++){var d=ka(k);e.Kc=b.sh[k];a.d(e.Kc,e.Ag);O.VM(e);I.framebufferTexture2D(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,d,c,0);l(b);d=b.vb;for(var f=0;f<d.length;f++)for(var q=0;q<d[f].jb.length;q++){var t=d[f].jb[q];t.Ec=t.Lz[k]}h(b)}}else h(b);K.kC(b);Y.mA("draw subscene: "+V.Mx(b));b.type==V.Dy&&I.bindFramebuffer(I.FRAMEBUFFER,null)}};b.clear=function(a){if(a)I.bindFramebuffer(I.FRAMEBUFFER,
a.qa.Hf);else{var b=oa.background_color;if(b[0]===q[0]&&b[1]===q[1]&&b[2]===q[2]&&b[3]===q[3])return}l(a)};b.bu=function(a){var b=a.Jq;b.length=0;var e=a.$a,c=e.mc,h=a.ec.attributes,d;for(d in h){var l=c[d],f=T.Ko(d),q=T.ZF(d);b.push({oy:f,Lo:T.oQ(d),lf:h[d],gu:l.offset*q,gv:1<l.frames?l.length*q:0,Tc:l.Tc,Nm:l.Nm})}if("DEBUG"==Object(k.d)())for(d in c)f=T.Ko(d),b=T.dT(e.be,f),B.qP(e.be[b].PO,a.Mb.yg+" | "+a.Mb.ff,d,c[d].length*c[d].frames*T.ZF(d),d in h);oa.Wy&&u(a)};b.yM=u;b.pN=function(a){for(var b=
ha.kA(),e=0;e<a.Sf.length;e++)b.deleteVertexArray(a.Sf[e]);a.Sf.length=0};b.rN=function(a){for(var b=[],e=0;e<a.length;e++){var c=a[e];b.push({oy:c.oy,Lo:c.Lo,lf:c.lf,gu:c.gu,gv:c.gv,Tc:c.Tc,Nm:c.Nm})}return b};b.xM=E;b.VD=function(a){var b=a.ec,e=a.Ua;a=a.vg;I.useProgram(b.qj);for(var c=0;c<e.length;c++)I.uniform1i(b.cm[a[c]],c)};b.Vw=function(a,b,e,c,h,k){I.bindFramebuffer(I.FRAMEBUFFER,a);I.readPixels(b,e,c,h,I.RGBA,I.UNSIGNED_BYTE,k);I.bindFramebuffer(I.FRAMEBUFFER,null);return k};b.JU=function(a){var b=
a.ec;b.Bw||(I.useProgram(b.qj),b.ss.length||E(b),b=b.wB.u_cube_fog,b.Io(I,b.lf,null,a))};b.QS=function(a,b){var e=I.createFramebuffer();I.bindFramebuffer(I.FRAMEBUFFER,e);if(A.Vo(a))a=a.Tf,I.framebufferRenderbuffer(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,I.RENDERBUFFER,a);else if(A.Xo(a)){var c=a;a=c.hc;c=c.Vb==I.TEXTURE_CUBE_MAP?I.TEXTURE_CUBE_MAP_NEGATIVE_Z:c.Vb;I.framebufferTexture2D(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,c,a,0)}A.Vo(b)?(a=b.Tf,I.framebufferRenderbuffer(I.FRAMEBUFFER,I.DEPTH_ATTACHMENT,I.RENDERBUFFER,
a)):A.Xo(b)&&(c=b,a=c.hc,c=c.Vb,I.framebufferTexture2D(I.FRAMEBUFFER,I.DEPTH_ATTACHMENT,c,a,0));Y.KM();I.bindFramebuffer(I.FRAMEBUFFER,null);return e};b.PS=function(a,b,e,c,h){null==a?(I.bindFramebuffer(I.FRAMEBUFFER,a),I.viewport(0,0,c,h),I.clear(I.COLOR_BUFFER_BIT|I.DEPTH_BUFFER_BIT)):(A.Vo(b)?I.deleteRenderbuffer(b.Tf):A.Xo(b)&&I.deleteTexture(b.hc),A.Vo(e)?I.deleteRenderbuffer(e.Tf):A.Xo(e)&&I.deleteTexture(e.hc),I.deleteFramebuffer(a))};b.RX=function(){};b.YO=function(a,b,e,c,h,k){a=a.hc;I.viewport(0,
0,e,e);I.framebufferTexture2D(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,b,a,0);b=R.Au("FLIP_CUBEMAP_COORDS");a=b.ec;I.activeTexture(I.TEXTURE0);I.bindTexture(I.TEXTURE_2D,h);var d=h=0;e!=c&&(h=1/(6*c),d=1/(4*c));I.uniform1i(a.cm.u_tex_number,k);I.uniform2fv(a.cm.u_delta,[h,d]);I.useProgram(a.qj);pa(b,0);I.bindTexture(I.TEXTURE_2D,null)};b.ZO=function(a,b,e,c,h){I.bindFramebuffer(I.FRAMEBUFFER,c);c=a.hc;a=a.Vb;I.bindTexture(a,c);I.viewport(0,0,b,e);I.texImage2D(a,0,I.RGBA,b,e,0,I.RGBA,I.UNSIGNED_BYTE,null);
I.framebufferTexture2D(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,a,c,0);b=R.Au("NONE");e=b.ec;I.activeTexture(I.TEXTURE0);I.bindTexture(a,h);I.useProgram(e.qj);pa(b,0);I.bindFramebuffer(I.FRAMEBUFFER,null);I.bindTexture(a,null)};b.cleanup=function(){};b.sT=function(){var a=ha.qQ(),b=ha.kA();oa.ND=a?!0:!1;oa.Wy=b?!0:!1;a?(t=function(b,e,c,h){a.drawElementsInstanced(I.TRIANGLES,b,e,c,h)},e=function(b,e){a.vertexAttribDivisor(b,e)},ma=function(b,e,c){a.drawArraysInstanced(I.TRIANGLES,b,e,c)}):(t=function(a,
b,e){I.drawElements(I.TRIANGLES,a,b,e)},e=function(){},ma=function(a,b){I.drawArrays(I.TRIANGLES,a,b)});b?(ja=function(a){b.bindVertexArray(a)},pa=function(a,b){var e=a.$a;ja(a.Sf[b]);e.Eh?t(e.count,e.Xm,0,e.an):ma(0,e.count,e.an);ja(null)}):pa=function(a,b){var c=a.$a;a=a.Jq;for(var h=0;h<c.be.length;h++){I.bindBuffer(I.ARRAY_BUFFER,c.be[h].Nk);for(var k=0;k<a.length;k++){var d=a[k];d.oy==c.be[h].type&&(I.enableVertexAttribArray(d.lf),I.vertexAttribPointer(d.lf,d.Tc,d.Lo,d.Lo==I.FLOAT?!1:!0,0,d.gu+
d.gv*b),e(d.lf,d.Nm))}}c.Eh?(I.bindBuffer(I.ELEMENT_ARRAY_BUFFER,c.Eh),t(c.count,c.Xm,0,c.an)):ma(0,c.count,c.an);for(h=0;h<a.length;h++)d=a[h],I.disableVertexAttribArray(d.lf)}};b.reset=function(){ja=ma=e=t=I=null}});w.a=f},function(D,w,f){D=f(0);var N=f(5),U=f(4),n=f(1),y=f(8),d=f(18),m=f(6),C=f(2),v=f(3);f=Object(D.a)("__sfx",function(f,p){function r(){var a=window.AudioContext||window.webkitAudioContext;if(a){try{var b=new a}catch(Oa){return K.error('Unable to initialize AudioContext: "'+Oa+'". The audio is disabled.'),
null}if(b.createGain)return b;K.warn("deprecated WebAudio implementation");return null}K.warn("WebAudio is not supported");return null}function a(a,e,h){var d=a.Ra;if("NONE"!=d.behavior){var f=d.loop,q=d.pitch;if(d.src&&(f||0<=h)){d.bz=Math.floor(5E4*Math.random());var t=da.currentTime+e;t=Math.max(0,t);d.sg=t;d.state=20;var A=I.yd;"POSITIONAL"==d.behavior&&"none"==A.ur&&(d.behavior="BACKGROUND_SOUND");ja(a,I.yd);if("POSITIONAL"==d.behavior||"BACKGROUND_SOUND"==d.behavior){e=da.createBufferSource();
e.buffer=d.src;e.playbackRate.value=q;if(f){d.Uc&&d.Uc.disconnect();d.Ce&&d.Ce.disconnect();e.loop=!0;e.loopStart=d.UG;if(e.loopEnd=d.lw)h=da.createBufferSource(),h.buffer=d.src,h.playbackRate.value=q,d.Ce=h,h.connect(d.xe);e.start(t);d.duration=0}else f=e.buffer?e.buffer.duration:0,h>f?(f=t+h+d.Gf,e.loop=!0,e.start(t),e.stop(f),d.duration=h):(e.loop=!1,e.start(t),d.duration=f);e.connect(d.xe);d.Uc=e;k(d);c(d);l(d)}else"BACKGROUND_MUSIC"==d.behavior&&(ha.clear_timeout(d.cz),ha.clear_timeout(d.dz),
h=function(){var b=a.Ra,e=b.src;e&&(e.volume=1,e.loop=b.loop,b.Uc=b.Uc||da.createMediaElementSource(e),b.Uc.connect(b.xe),20==b.state&&(e.currentTime&&(e.currentTime=0),e.play()))},0==e?h():d.cz=ha.set_timeout(h,1E3*e),d.duration=f?0:L(a));b(d,t)}}}function H(b){var e=b.Ra;a(b,e.delay+e.lF*Math.random(),e.duration)}function k(a){var b=a.Ce||a.Uc;C._17(b.onended)&&(b.onended=function(){a.state=50})}function c(a){a.Qn&&a.DB.gain.cancelScheduledValues(a.sg);a.tp&&(a.Uc.playbackRate.cancelScheduledValues(a.sg),
a.Ce&&a.Ce.playbackRate.cancelScheduledValues(a.sg));a.Ct=a.sg}function l(a){if(a.Qn||a.tp){var b=a.DB,c=a.Uc,h=c.buffer?c.buffer.duration:0;if(h){var k=a.sg;e[0]=a.bz;for(var d=0;5>d;){var l=a.pitch+a.tp*C._40(e);if(k>=a.Ct){if(a.Qn){var f=1-C.M(a.Qn,0,1)*Math.random();b.gain.setTargetAtTime(f,k,.015)}a.tp&&(c.playbackRate.setTargetAtTime(l,k,.015),a.Ce&&a.Ce.playbackRate.setTargetAtTime(l,k,.015));d++}k+=h/l}a.Ct=k-.001}}}function b(a,b){if(a.Yj||a.Gf){var e=a.il;e.gain.cancelScheduledValues(b);
a.Yj?(e.gain.setTargetAtTime(0,b,.015),e.gain.linearRampToValueAtTime(1,b+a.Yj)):e.gain.setTargetAtTime(1,b,.015);a.Gf&&!a.loop&&(e.gain.setTargetAtTime(1,b+a.duration,.015),e.gain.linearRampToValueAtTime(0,b+a.duration+a.Gf))}}function h(a){"SPEAKER"!=a.type&&B.va("Wrong object type");var b=a.Ra;if(50==b.state)b.state=30;else if(20==b.state||40==b.state){var e=b.il,c=da.currentTime;b.Gf&&(e.gain.setTargetAtTime(e.gain.value,c,.015),e.gain.linearRampToValueAtTime(0,c+b.Gf,.015));"BACKGROUND_MUSIC"==
b.behavior?b.src&&(ha.clear_timeout(b.cz),ha.clear_timeout(b.dz),b.dz=ha.set_timeout(function(){var b=a.Ra.src;b&&(b.currentTime&&(b.currentTime=0),b.pause())},1E3*b.Gf)):(e=b.Uc,e.onended=function(){},b.duration<e.buffer.duration?b.Gf&&20==b.state?e.stop(c+b.Gf):20==b.state&&(e.stop(0),e.disconnect()):e.disconnect(),b.sg=0,b.uB=0,b.hz=0);b.state=30}}function G(a){a=a.Ra;if(20==a.state){var b=da.currentTime;a.uB=b;"BACKGROUND_MUSIC"==a.behavior?(b=a.src)&&b.pause():(a.hz=b>a.sg?ka(a,b):0,a.Uc.onended=
function(){},a.Uc.stop(0),a.Uc.disconnect(),c(a));a.state=40}}function ka(a,b){e[0]=a.bz;for(var c=a.Uc.buffer.duration,h=a.sg,k;h<b;)k=a.pitch+a.tp*C._40(e),h+=c/k;return(c/k-(h-b))*k}function u(a){var e=a.Ra;if(40==e.state){var c=da.currentTime;e.sg+=c-e.uB;if("BACKGROUND_MUSIC"==e.behavior)e.src.play();else{a=a.Ra;var h=da.createBufferSource();h.loop=a.Uc.loop;h.loopStart=a.Uc.loopStart;h.loopEnd=a.Uc.loopEnd;h.buffer=a.Uc.buffer;h.playbackRate.value=a.Uc.playbackRate.value;h.connect(a.xe);a.Uc=
h;a.Ce&&(h=da.createBufferSource(),h.loop=a.Ce.loop,h.buffer=a.Ce.buffer,h.playbackRate.value=a.Ce.playbackRate.value,h.connect(a.xe),a.Ce=h);e.Ct=c;c=e.Uc;k(e);c.start(e.sg,e.hz);l(e)}b(e,e.sg);e.state=20}}function E(a,b,e){var c=b.XO;if(0<c){var h=b.fU;if(0!=v.dot(a.py,a.py)||0!=v.dot(b.ln,b.ln)){var k=v.subtract(a.LA,b.jj,A),d=v.length(k);b=v.dot(k,b.ln)/d;k=v.dot(k,a.py)/d;d=h/c;b=Math.min(-b,d);k=Math.min(-k,d);c=(h-c*b)/(h-c*k);isFinite(c)||(c=0);c=Math.min(c,16);c=Math.max(c,.125);c=C._51(c,
a.HG,e,.3);a.Uc.playbackRate.value=c;a.HG=c}}}function R(a){a=a.Ra;return!a||20!=a.state&&40!=a.state&&30!=a.state&&50!=a.state?!1:!0}function O(a){return a.muted?0:a.volume}function L(a){a=a.Ra;return(a=a.src)?a.duration:0}var B=Object(N.a)(f),Y=Object(U.a)(f),K=Object(n.a)(f),ha=Object(d.a)(f),T=Y.wa,V=Y.Ra,A=new Float32Array(3),aa=new Float32Array(3),J=y.create(),P=[],q=[],da=null,I=null,t=[],e=[1],ma=null;p.WC=10;p.Cy=20;p.VC=30;p.aO=function(){return{nd:-1,Zi:"",behavior:"NONE",muted:!1,volume:1,
pitch:1,attenuation:1,dist_ref:1,dist_max:1E4,OE:360,PE:360,QE:1,autoplay:!1,cyclic:!1,loop:!1,UG:0,lw:0,delay:0,lF:0,Qn:0,tp:0,Yj:0,Gf:0,sg:0,uB:0,hz:0,duration:0,Ct:0,bz:1,src:null,state:10,LA:new Float32Array(3),py:new Float32Array(3),Xu:!1,HG:1,cz:-1,dz:-1,Om:0,xe:null,Uc:null,Ce:null,sB:null,gi:null,Jo:null,il:null,DB:null,em:0}};p.init=function(){var a=document.createElement("audio"),b=document.createElement("video");a.canPlayType&&(""!=a.canPlayType("audio/ogg")&&(P.push("ogg"),P.push("ogv"),
P.push("oga")),""!=a.canPlayType("audio/mpeg")&&P.push("mp3"),""!=a.canPlayType("audio/mp4")&&(P.push("mp4"),P.push("m4v"),P.push("m4a")),""!=a.canPlayType("audio/webm")&&P.push("webm"));b.canPlayType&&(""!=b.canPlayType("video/ogg")&&(q.push("ogv"),q.push("ogg"),q.push("oga")),""!=b.canPlayType("video/mp4")&&(q.push("m4v"),q.push("mp4")),""!=b.canPlayType("video/webm")&&q.push("webm"),""!=b.canPlayType("video/mpeg")&&q.push("mp3"))};p.AM=function(a){V.RC&&!da&&(da=r())&&K.log("%cINIT WEBAUDIO: "+
da.sampleRate+"Hz","color: #00a");if(da){var b={jj:new Float32Array(3),ln:new Float32Array(3),em:0},e=da.createGain(),c=da.createGain();b.Jo=e;b.il=c;e.connect(c);c.connect(da.destination);if(a.b4w_enable_dynamic_compressor){c=da.createDynamicsCompressor();var h=a.b4w_dynamic_compressor_settings;c.threshold.value=h.threshold;c.knee.value=h.knee;c.ratio.value=h.ratio;c.attack.value=h.attack;c.release.value=h.release;c.connect(e);b.hr=c;b.xe=c}else b.hr=null,b.xe=e;switch(a.audio_distance_model){case "INVERSE":case "INVERSE_CLAMPED":b.ur=
"inverse";break;case "LINEAR":case "LINEAR_CLAMPED":b.ur="linear";break;case "EXPONENT":case "EXPONENT_CLAMPED":b.ur="exponential";break;case "NONE":b.ur="none";break;default:B.va("Wrong audio distance model")}b.XO=a.audio_doppler_factor;b.fU=a.audio_doppler_speed;b.muted=!1;b.volume=a.audio_volume;e.gain.value=O(b);b.Om=0}else b=null;a.yd=b};p.iT=function(a){I=a};p.detect_audio_container=function(a){a||(a="ogg");return-1<P.indexOf(a)?a:-1<P.indexOf("m4a")?"m4a":-1<P.indexOf("oga")?"oga":""};p.detect_video_container=
function(a){a||(a="webm");return-1<q.indexOf(a)?a:-1<q.indexOf("m4v")?"m4v":-1<q.indexOf("webm")?"webm":""};p.dy=function(a,b){var e=a.data,c=b.Ra;if(a.data.sound){c.nd=a.data.sound.uuid;c.Zi=a.data.sound.filepath;switch(e.b4w_behavior){case "POSITIONAL":case "BACKGROUND_SOUND":c.behavior=da?e.b4w_behavior:"NONE";break;case "BACKGROUND_MUSIC":da?(window.MediaElementAudioSourceNode?a=!0:(K.warn("MediaElementAudioSourceNode not found"),a=!1),a=a&&!T.yE?"BACKGROUND_MUSIC":"BACKGROUND_SOUND"):a="NONE";
c.behavior=a;break;default:B.va("Wrong speaker behavior")}e.sound||(c.behavior="NONE");c.Xu=e.b4w_enable_doppler;c.muted=e.muted;c.volume=e.volume;c.pitch=e.pitch;c.attenuation=e.attenuation;c.dist_ref=e.distance_reference;c.dist_max=e.distance_max||1E4;c.OE=e.cone_angle_inner;c.PE=e.cone_angle_outer;c.QE=e.cone_volume_outer;c.autoplay=e.b4w_auto_play;c.cyclic=e.b4w_cyclic_play;c.loop=e.b4w_loop;c.UG=e.b4w_loop_start;c.lw=e.b4w_loop_end;c.delay=e.b4w_delay;c.lF=e.b4w_delay_random;c.Qn=e.b4w_volume_random;
c.tp=e.b4w_pitch_random;c.Yj=e.b4w_fade_in;c.Gf=e.b4w_fade_out;t.push(b)}};p.wI=function(a){"SPEAKER"!=a.type&&B.va("Wrong object type");switch(a.Ra.behavior){case "POSITIONAL":return p.Cy;case "BACKGROUND_SOUND":return p.Cy;case "BACKGROUND_MUSIC":return p.VC;case "NONE":return p.WC;default:B.va("Wrong speaker behavior")}};p.jV=function(a,b){a=a.Ra;switch(a.behavior){case "POSITIONAL":case "BACKGROUND_SOUND":case "BACKGROUND_MUSIC":a.src=b;break;case "NONE":break;default:B.va("Wrong speaker behavior")}};
p.yH=function(){var a=da.createBufferSource();a.buffer=da.createBuffer(1,22050,22050);a.connect(da.destination);a.start(0)};p.RO=function(a,b,e){da?da.decodeAudioData(a,b,e):e()};p.cU=function(a){h(a);a.Ra=null;t.splice(t.indexOf(a),1)};p.cleanup=function(){for(var a=0;a<t.length;a++){var b=t[a].Ra;"BACKGROUND_MUSIC"==b.behavior?(b=b.src)&&b.pause():(b.Uc&&b.Uc.disconnect(),b.Ce&&b.Ce.disconnect())}I&&I.yd&&(a=I.yd,a.jj[0]=0,a.jj[1]=0,a.jj[2]=0,a.ln[0]=0,a.ln[1]=0,a.ln[2]=0);I=null;t.splice(0);ma=
null};p.update=function(a){if(da&&0!=t.length){for(var b=0;b<t.length;b++){var e=t[b],c=e.Ra,k=c.Uc,d=da.currentTime;!c.loop&&20==c.state&&c.duration&&c.sg+c.duration<d&&("BACKGROUND_MUSIC"==c.behavior||k&&!C._17(k.onended))&&(c.state=50);c.cyclic&&50==c.state&&H(e);20==c.state&&3>c.Ct-d&&l(c)}ma&&ma.Ck.length&&(-1==ma.active||a>ma.MD+ma.tF[ma.active])&&(b=ma,-1<b.active&&h(b.Ck[b.active]),e=-1==b.active&&b.random?Math.round(Math.random()*(b.Ck.length-1)):b.random?(b.active+(1+Math.round(Math.random()*
(b.Ck.length-2))))%b.Ck.length:(b.active+1)%b.Ck.length,H(b.Ck[e]),b.active=e,b.MD=a)}};var ja=function(){var a=y.create(),b=v.create();return function(e,c){var h=e.Ra;if(!h.xe){if(V.tw){var k=da.createBiquadFilter();k.type="peaking"}else k=null;var d=da.createGain();switch(h.behavior){case "POSITIONAL":var l=da.createPanner();"string"!=typeof l.panningModel?(l.panningModel=l.EQUALPOWER,l.distanceModel=l.INVERSE_DISTANCE):(l.panningModel="equalpower",l.distanceModel=c.ur);var f=m.j(e.ka.na,b);e=m.g(e.ka.na,
a);l.setPosition(f[0],f[1],f[2]);v.copy(f,h.LA);C._34(e,C.c,b);l.setOrientation(b[0],b[1],b[2]);l.refDistance=h.dist_ref;l.maxDistance=h.dist_max;l.rolloffFactor=h.attenuation;l.coneInnerAngle=h.OE;l.coneOuterAngle=h.PE;l.coneOuterGain=h.QE;f=da.createGain();f.gain.value=O(h);k?(l.connect(k),k.connect(f)):l.connect(f);f.connect(d);h.xe=l;if(h.Qn){var q=da.createGain();d.connect(q);q.connect(c.xe)}else q=null,d.connect(c.xe);break;case "BACKGROUND_SOUND":l=null;f=da.createGain();f.gain.value=O(h);
k?(h.xe=k,k.connect(f)):h.xe=f;f.connect(d);h.Qn?(q=da.createGain(),d.connect(q),q.connect(c.xe)):(q=null,d.connect(c.xe));break;case "BACKGROUND_MUSIC":q=l=null,f=da.createGain(),f.gain.value=O(h),k?(h.xe=k,k.connect(f)):h.xe=f,f.connect(d),d.connect(c.xe)}h.sB=l;h.gi=k;h.Jo=f;h.il=d;h.DB=q}}}();p.play=a;p.play_def=H;p.stop=h;p.is_playing=function(a){return 20==a.Ra.state};p.bU=G;p.dU=u;p.loop_stop=function(a,b){var e=a.Ra,c=e.Ce;R(a)&&("POSITIONAL"==e.behavior||"BACKGROUND_SOUND"==e.behavior)&&
c&&(a=da.currentTime+b,e.Uc.stop(a),c.start(a,e.lw))};p.playrate=function(a,b){var e=a.Ra;e.pitch=b;!R(a)||"POSITIONAL"!=e.behavior&&"BACKGROUND_SOUND"!=e.behavior||(e.Uc.playbackRate.value=b,e.Ce&&(e.Ce.playbackRate.value=b),c(e),l(e))};p.get_playrate=function(a){return a.Ra.pitch};p.cyclic=function(a,b){a.Ra.cyclic=!!b};p.ZQ=function(a){return a.Ra.autoplay};p.is_cyclic=function(a){return a.Ra.cyclic};p.CR=function(a,b,e,c,h){if(a=a.yd){var k=A;k[0]=0;k[1]=0;k[2]=-1;v.transformQuat(k,e,k);aa[0]=
0;aa[1]=1;aa[2]=0;v.transformQuat(aa,e,aa);e=da.listener;e.setPosition(b[0],b[1],b[2]);e.setOrientation(k[0],k[1],k[2],aa[0],aa[1],aa[2]);if(c&&a.em!=h){if(a.listener_stride)a.listener_stride=!1,v.copy(b,a.jj);else for(e=a.ln,e[0]=(b[0]-a.jj[0])/c,e[1]=(b[1]-a.jj[1])/c,e[2]=(b[2]-a.jj[2])/c,v.copy(b,a.jj),b=0;b<t.length;b++)e=t[b],k=e.Ra,R(e)&&"POSITIONAL"==k.behavior&&k.Xu&&E(k,a,c);a.em=h}else v.copy(b,a.jj)}};p.listener_stride=function(){var a=I.yd;a&&(a.listener_stride=!0)};p.eU=function(a,b,
e){var c=a.Ra;if(R(a)&&"POSITIONAL"==c.behavior){var h=m.j(a.ka.na,A);a=m.g(a.ka.na,J);var k=c.sB;k.setPosition(h[0],h[1],h[2]);C._34(a,C.c,aa);k.setOrientation(aa[0],aa[1],aa[2]);c.Xu&&(a=c.LA,b&&c.em!=e?(c.FI?(v.copy(h,a),c.FI=!1):(k=c.py,k[0]=(h[0]-a[0])/b,k[1]=(h[1]-a[1])/b,k[2]=(h[2]-a[2])/b,v.copy(h,a),E(c,I.yd,b)),c.em=e):v.copy(h,a))}};p.speaker_stride=function(a){var b=a.Ra;R(a)&&"POSITIONAL"==b.behavior&&b.Xu&&(b.FI=!0)};p.gA=function(a){return a.Ra.behavior};p.check_active_speakers=function(){for(var a=
0;a<t.length;a++)if(R(t[a]))return!0;return!1};p.zT=function(a){var b=I.yd;b&&(b.volume=a,da&&(b.Jo.gain.value=O(b)))};p.rQ=function(){var a=I.yd;return a?a.volume:0};p.set_volume=function(a,b){var e=a.Ra;e.volume=b;R(a)&&(e.Jo.gain.value=O(e))};p.get_volume=function(a){return a.Ra.volume};p.mute=function(a,b){a.Ra.muted=!!b;R(a)&&(a.Ra.Jo.gain.value=O(a.Ra))};p.is_muted=function(a){return a.Ra.muted};p.aS=function(a){var b=I.yd;b&&(b.muted=!!a,da&&(b.Jo.gain.value=O(b)))};p.fR=function(){var a=I.yd;
return a?a.muted:!1};p.get_speaker_objects=function(){return t};p.pause=function(){for(var a=0;a<t.length;a++)G(t[a])};p.resume=function(){for(var a=0;a<t.length;a++)u(t[a])};p.set_compressor_params=function(a,b){a.yd&&a.yd.hr&&(a=a.yd.hr,a.threshold.value=b.threshold,a.knee.value=b.knee,a.ratio.value=b.ratio,a.attack.value=b.attack,a.release.value=b.release)};p.get_compressor_params=function(a){if(!a.yd||!a.yd.hr)return null;a=a.yd.hr;return{threshold:a.threshold.value,knee:a.knee.value,ratio:a.ratio.value,
attack:a.attack.value,release:a.release.value}};p.duck=function(a,b,e){if(R(a)){a=a.Ra;var c=a.il,h=da.currentTime;c.gain.setTargetAtTime(c.gain.value,h,.015);c.gain.linearRampToValueAtTime(b,h+e);a.Om=e}};p.unduck=function(a){if(R(a)){a=a.Ra;var b=a.il,e=da.currentTime;b.gain.setTargetAtTime(b.gain.value,e,.015);b.gain.linearRampToValueAtTime(1,e+a.Om);a.Om=0}};p.$O=function(a,b){if(da){var e=I.yd,c=e.il,h=da.currentTime;c.gain.setTargetAtTime(c.gain.value,h,.015);c.gain.linearRampToValueAtTime(a,
h+b);e.Om=b}};p.BU=function(){if(da){var a=I.yd,b=a.il,e=da.currentTime;b.gain.setTargetAtTime(b.gain.value,e,.015);b.gain.linearRampToValueAtTime(1,e+a.Om);a.Om=0}};p.apply_playlist=function(a,b,e){ma={active:-1,MD:0,random:e,Ck:[],tF:[]};for(e=0;e<a.length;e++){var c=a[e],k=L(c);0==k?K.warn("Ignoring speaker with zero duration: "+c.name):(h(c),c.Ra.cyclic=!1,ma.Ck.push(c),ma.tF.push(k+b))}};p.get_duration=L;p.clear_playlist=function(){if(ma)for(var a=ma.Ck,b=0;b<a.length;b++)h(a[b]);ma=null};p.get_positional_params=
function(a){return(a=a.Ra)&&"POSITIONAL"==a.behavior?{dist_ref:a.dist_ref,dist_max:a.dist_max,attenuation:a.attenuation}:null};p.set_positional_params=function(a,b){(a=a.Ra)&&"POSITIONAL"==a.behavior&&(a.dist_ref=b.dist_ref,a.dist_max=b.dist_max,a.attenuation=b.attenuation,b=a.sB)&&(b.refDistance=a.dist_ref,b.maxDistance=a.dist_max,b.rolloffFactor=a.attenuation)};p.set_filter_params=function(a,b){(a=a.Ra)&&a.gi&&(a.gi.frequency.value=b.freq,a.gi.Q.value=b.Q,a.gi.gain.value=b.gain)};p.get_filter_params=
function(a){return(a=a.Ra)&&a.gi?{freq:a.gi.frequency.value,Q:a.gi.Q.value,gain:a.gi.gain.value}:null};p.get_filter_freq_response=function(a,b,e,c){a=a.Ra;if(!a||!a.gi)return null;a.gi.getFrequencyResponse(b,e,c)};p.reset=function(){P.length=0;q.length=0;da=null}});w.a=f},function(D,w,f){D=f(0);var N=f(53),U=f(19),n=f(1);f=Object(D.a)("controls",function(f,d){var m=Object(N.a)(f),C=Object(U.a)(f),v=Object(n.a)(f);d.CT_POSITIVE=m.CT_POSITIVE;d.CT_CONTINUOUS=m.CT_CONTINUOUS;d.CT_TRIGGER=m.CT_TRIGGER;
d.CT_SHOT=m.CT_SHOT;d.CT_LEVEL=m.CT_LEVEL;d.CT_CHANGE=m.CT_CHANGE;d.KEY_BACKSPACE=8;d.KEY_TAB=9;d.KEY_ENTER=13;d.KEY_SHIFT=16;d.KEY_CTRL=17;d.KEY_ALT=18;d.KEY_PAUSE=19;d.KEY_CAPSLOCK=20;d.KEY_ESC=27;d.KEY_SPACE=32;d.KEY_LEFT=37;d.KEY_UP=38;d.KEY_RIGHT=39;d.KEY_DOWN=40;d.KEY_1=49;d.KEY_2=50;d.KEY_3=51;d.KEY_4=52;d.KEY_5=53;d.KEY_6=54;d.KEY_7=55;d.KEY_8=56;d.KEY_9=57;d.KEY_A=65;d.KEY_B=66;d.KEY_C=67;d.KEY_D=68;d.KEY_E=69;d.KEY_F=70;d.KEY_G=71;d.KEY_H=72;d.KEY_I=73;d.KEY_J=74;d.KEY_K=75;d.KEY_L=76;d.KEY_M=
77;d.KEY_N=78;d.KEY_O=79;d.KEY_P=80;d.KEY_Q=81;d.KEY_R=82;d.KEY_S=83;d.KEY_T=84;d.KEY_U=85;d.KEY_V=86;d.KEY_W=87;d.KEY_X=88;d.KEY_Y=89;d.KEY_Z=90;d.KEY_NUM0=96;d.KEY_NUM1=97;d.KEY_NUM2=98;d.KEY_NUM3=99;d.KEY_NUM4=100;d.KEY_NUM5=101;d.KEY_NUM6=102;d.KEY_NUM7=103;d.KEY_NUM8=104;d.KEY_NUM9=105;d.KEY_MULT=106;d.KEY_ADD=107;d.KEY_SUB=109;d.KEY_DEC_POINT=110;d.KEY_DIV=111;d.KEY_SEMI_COLON=186;d.KEY_EQUAL_SIGN=187;d.KEY_COMMA=188;d.KEY_DASH=189;d.KEY_PERIOD=190;d.KEY_FORWARD_SLASH=191;d.KEY_GRAVE_ACCENT=
192;d.KEY_LEFT_SQ_BRACKET=219;d.KEY_BACK_SLASH=220;d.KEY_RIGHT_SQ_BRACKET=221;d.KEY_SINGLE_QUOTE=222;d.PL_SINGLE_TOUCH_MOVE=m.PL_SINGLE_TOUCH_MOVE;d.PL_MULTITOUCH_MOVE_ZOOM=m.PL_MULTITOUCH_MOVE_ZOOM;d.PL_MULTITOUCH_MOVE_PAN=m.PL_MULTITOUCH_MOVE_PAN;d.PL_MULTITOUCH_MOVE_ROTATE=m.PL_MULTITOUCH_MOVE_ROTATE;d.default_AND_logic_fun=m.default_AND_logic_fun;d.default_OR_logic_fun=m.default_OR_logic_fun;d.create_gamepad_btn_sensor=m.create_gamepad_btn_sensor;d.create_gamepad_axis_sensor=m.create_gamepad_axis_sensor;
d.create_gamepad_position_sensor=m.create_gamepad_position_sensor;d.create_gamepad_orientation_sensor=m.create_gamepad_orientation_sensor;d.create_custom_sensor=m.create_custom_sensor;d.create_keyboard_sensor=m.create_keyboard_sensor;d.create_collision_sensor=function(d,f,n){return m.create_collision_sensor(d,f||"ANY",n||!1)};d.create_collision_impulse_sensor=m.create_collision_impulse_sensor;d.create_ray_sensor=function(d,f,n,a,y,k,c){if(d&&!C.eb(d))v.Ma("No physics for object "+d.name);else return m.create_ray_sensor(d,
f,n,a||"ANY",y||!1,k||!1,c||!1)};d.create_mouse_click_sensor=m.create_mouse_click_sensor;d.create_mouse_wheel_sensor=m.create_mouse_wheel_sensor;d.create_mouse_move_sensor=m.create_mouse_move_sensor;d.create_plock_mouse_sensor=m.create_plock_mouse_sensor;d.create_plock_sensor=m.create_plock_sensor;d.create_touch_move_sensor=m.create_touch_move_sensor;d.create_touch_zoom_sensor=m.create_touch_zoom_sensor;d.create_touch_rotate_sensor=m.create_touch_rotate_sensor;d.create_touch_click_sensor=m.create_touch_click_sensor;
d.create_motion_sensor=m.create_motion_sensor;d.create_vertical_velocity_sensor=m.create_vertical_velocity_sensor;d.create_gyro_angles_sensor=m.create_gyro_angles_sensor;d.create_gyro_quat_sensor=m.create_gyro_quat_sensor;d.create_gyro_delta_sensor=m.create_gyro_delta_sensor;d.create_hmd_quat_sensor=m.create_hmd_quat_sensor;d.create_hmd_position_sensor=m.create_hmd_position_sensor;d.create_timer_sensor=function(d,f){return m.create_timer_sensor(d,f||!1)};d.reset_timer_sensor=m.reset_timer_sensor;
d.create_elapsed_sensor=m.create_elapsed_sensor;d.create_timeline_sensor=m.create_timeline_sensor;d.create_selection_sensor=function(d,f){return m.create_selection_sensor(d,f||!1)};d.create_callback_sensor=function(d,f){return m.create_callback_sensor(d,f||0)};d.set_custom_sensor=function(d,f){m.fT(d,f)};d.get_custom_sensor=function(d){return d.value};d.get_sensor_value=m.get_sensor_value;d.get_sensor_payload=m.get_sensor_payload;d.create_sensor_manifold=function(d,f,n,a,v,k,c){v=v||m.default_AND_logic_fun;
m.create_sensor_manifold(d,f,n,a,v,k,void 0===c?null:c)};d.create_kb_sensor_manifold=function(d,f,n,a,v,k){a=m.create_keyboard_sensor(a);m.create_sensor_manifold(d,f,n,[a],m.default_AND_logic_fun,v,void 0===k?null:k)};d.check_sensor_manifolds=function(d){return m.check_sensor_manifold(d,null)};d.check_sensor_manifold=m.check_sensor_manifold;d.remove_sensor_manifold=m.remove_sensor_manifold;d.reset=m.reset;d.set_plock_smooth_factor=m.set_plock_smooth_factor});w.a=f},function(D,w,f){function N(){return{max_x:0,
min_x:0,max_y:0,min_y:0,max_z:0,min_z:0}}function U(a,b){b.min_x=a.min_x;b.max_x=a.max_x;b.min_y=a.min_y;b.max_y=a.max_y;b.min_z=a.min_z;b.max_z=a.max_z;return b}function n(){return{Da:new Float32Array(3),Cb:new Float32Array(3),Db:new Float32Array(3),Eb:new Float32Array(3)}}function y(a,b){var c=a.max_y,h=a.max_z,k=a.min_x,d=a.min_y,l=a.min_z;a.max_x=Math.max(b.max_x,a.max_x);a.max_y=Math.max(b.max_y,c);a.max_z=Math.max(b.max_z,h);a.min_x=Math.min(b.min_x,k);a.min_y=Math.min(b.min_y,d);a.min_z=Math.min(b.min_z,
l);return a}function d(a,b,c,h){var k=a[b],d=a[b+1],l=a[b+2],f=a[b],e=a[b+1],m=a[b+2];for(b+=3;b<c;b+=3){var A=a[b],u=a[b+1],n=a[b+2];k=Math.max(k,A);d=Math.max(d,u);l=Math.max(l,n);f=Math.min(f,A);e=Math.min(e,u);m=Math.min(m,n)}h.max_x=k;h.max_y=d;h.max_z=l;h.min_x=f;h.min_y=e;h.min_z=m;return h}function m(a,b){b||(b=new Float32Array(24));var c=a.max_x,h=a.max_y,k=a.max_z,d=a.min_x,l=a.min_y;a=a.min_z;b[0]=d;b[1]=l;b[2]=a;b[3]=c;b[4]=l;b[5]=a;b[6]=c;b[7]=h;b[8]=a;b[9]=d;b[10]=h;b[11]=a;b[12]=d;
b[13]=l;b[14]=k;b[15]=c;b[16]=l;b[17]=k;b[18]=c;b[19]=h;b[20]=k;b[21]=d;b[22]=h;b[23]=k;return b}function C(){return{Da:new Float32Array(3),Lb:0}}function v(a,b){b.Da[0]=a.Da[0];b.Da[1]=a.Da[1];b.Da[2]=a.Da[2];b.Lb=a.Lb;return b}function r(){return{Cb:new Float32Array(3),Db:new Float32Array(3),Eb:new Float32Array(3),Da:new Float32Array(3)}}function p(a,b){h.copy(a.Cb,b.Cb);h.copy(a.Db,b.Db);h.copy(a.Eb,b.Eb);h.copy(a.Da,b.Da);return b}function z(a,b,c,h){return{Cb:new Float32Array(a),Db:new Float32Array(b),
Eb:new Float32Array(c),Da:new Float32Array([h[0],h[1],h[2]])}}function a(a,b){var c=G.g(a,L);b=b?G.e(a,c,Y):ka.identity(Y);b=G.L(b,T,B);h.copy(a,E);h.transformMat3(E,b,E);var k=E[0],d=k,l=E[1],f=l,t=E[2],e=t;for(c=3;c<a.length;c+=3){E[0]=a[c];E[1]=a[c+1];E[2]=a[c+2];h.transformMat3(E,b,E);var m=E[0];var A=E[1];var u=E[2];m>k&&(k=m);m<d&&(d=m);A>l&&(l=A);A<f&&(f=A);u>t&&(t=u);u<e&&(e=u)}k=Math.max(k-d,ha);l=Math.max(l-f,ha);t=Math.max(t-e,ha);e=ka.identity(Y);e[0]=0!=k?1/k:1/V;e[4]=0!=l?1/l:1/V;e[8]=
0!=t?1/t:1/V;ka.transpose(b,K);E[0]=a[0];E[1]=a[1];E[2]=a[2];h.transformMat3(E,b,E);h.transformMat3(E,e,E);h.transformMat3(E,K,E);f=E[0];d=E[0];m=E[1];A=E[1];u=E[2];var n=E[2];for(c=3;c<a.length;c+=3)E[0]=a[c],E[1]=a[c+1],E[2]=a[c+2],h.transformMat3(E,b,E),h.transformMat3(E,e,E),h.transformMat3(E,K,E),f=Math.max(f,E[0]),d=Math.min(d,E[0]),m=Math.max(m,E[1]),A=Math.min(A,E[1]),u=Math.max(u,E[2]),n=Math.min(n,E[2]);a=Math.sqrt((f-d)*(f-d)+(m-A)*(m-A)+(u-n)*(u-n))/2;a=Math.min(a,1);O[0]=(f+d)/2;O[1]=
(m+A)/2;O[2]=(u+n)/2;c=O;e=ka.identity(Y);e[0]=k;e[4]=l;e[8]=t;h.transformMat3(c,b,c);h.transformMat3(c,e,c);h.transformMat3(c,K,c);e=[b[0],b[3],b[6]];f=[b[1],b[4],b[7]];b=[b[2],b[5],b[8]];h.scale(e,k*a,e);h.scale(f,l*a,f);h.scale(b,t*a,b);return z(e,f,b,c)}function H(){return{Lb:0,height:0,Da:new Float32Array(3)}}function k(a,b){b.Lb=a.Lb;b.height=a.height;b.Da.set(a.Da);return b}function c(a,b,c){h.add(b,c,a.Da);h.scale(a.Da,.5,a.Da);a.Lb=h.distance(a.Da,b);return a}w.L=function(){return{Bf:N(),
ag:r(),Cf:C()}};w.t=function(a,b){U(a.Bf,b.Bf);p(a.ag,b.ag);v(a.Cf,b.Cf);return b};w.w=N;w.o=U;w.C=n;w.v=function(a,b){h.copy(a.Da,b.Da);h.copy(a.Cb,b.Cb);h.copy(a.Db,b.Db);h.copy(a.Eb,b.Eb);return b};w.f=function(){return{max_x:1E12,min_x:-1E12,max_y:1E12,min_y:-1E12,max_z:1E12,min_z:-1E12}};w.P=function(a){a.max_x=0;a.min_x=0;a.max_y=0;a.min_y=0;a.max_z=0;a.min_z=0;return a};w.n=function(a){var b=N();U(a,b);return b};w.m=function(a){var b=a.max_x-a.min_x,c=a.max_y-a.min_y;c<b&&(b=c);a=a.max_z-a.min_z;
a<b&&(b=a);return b};w.D=y;w.a=d;w.h=function(a,b,c){c||(c=N());a=m(a,u);l.F(a,b,a);return d(a,0,a.length,c)};w.F=m;w.k=function(a,b,c){c||(c=C());l.D(a.Da,b,c.Da);b=l.i(b);c.Lb=a.Lb*(0>b?-b:b);return c};w.i=function(a,b,c){c||(c=r());l.D(a.Da,b,c.Da);h.copy(a.Cb,c.Cb);h.copy(a.Db,c.Db);h.copy(a.Eb,c.Eb);l.y(c.Cb,b,c.Cb);l.y(c.Db,b,c.Db);l.y(c.Eb,b,c.Eb);return c};w.j=function(a,b,c){c||(c=n());l.D(a.Da,b,c.Da);h.copy(a.Cb,c.Cb);h.copy(a.Db,c.Db);h.copy(a.Eb,c.Eb);l.y(c.Cb,b,c.Cb);l.y(c.Db,b,c.Db);
l.y(c.Eb,b,c.Eb);return c};w.l=function(a,b){var c=C();h.copy(b,c.Da);c.Lb=a;return c};w.O=function(a,b,c,k,d){var l=n();h.copy(a,l.Da);h.copy(b,l.Cb);h.copy(c,l.Db);h.copy(k,l.Eb);h.scale(l.Cb,d[0],l.Cb);h.scale(l.Db,d[1],l.Db);h.scale(l.Eb,d[2],l.Eb);return l};w.A=C;w.u=v;w.y=r;w.s=p;w.e=z;w.g=function(a){a||(a=C());h.set(0,0,0,a.Da);a.Lb=1E12;return a};w.E=function(a,b){var c=h.subtract(b.Da,a.Da,h.create());0==h.length(c)&&h.set(1,0,0,c);c=h.normalize(c,h.create());var k=h.scale(c,a.Lb,h.create());
h.add(k,a.Da,k);var d=h.scale(c,-a.Lb,h.create());h.add(d,a.Da,d);var l=h.scale(c,b.Lb,h.create());h.add(l,b.Da,l);var f=h.scale(c,-b.Lb,h.create());h.add(f,b.Da,f);b=[k,d,l,f];c=h.normalize(c,h.create());k=b[0];d=b[0];for(l=1;l<b.length;l++)f=h.dot(b[l],c),f<h.dot(k,c)&&(k=b[l]),f>h.dot(d,c)&&(d=b[l]);c=[k,d];b=c[0];c=c[1];a.Da=h.scale(h.add(b,c,h.create()),.5,h.create());a.Lb=h.length(h.subtract(c,b,h.create()))/2};w.G=function(a,b){h.add(a.Da,a.Db,E);h.add(E,a.Cb,E);h.add(E,a.Eb,E);b.push(E[0],
E[1],E[2]);h.add(a.Da,a.Db,E);h.add(E,a.Cb,E);h.subtract(E,a.Eb,E);b.push(E[0],E[1],E[2]);h.add(a.Da,a.Db,E);h.subtract(E,a.Cb,E);h.add(E,a.Eb,E);b.push(E[0],E[1],E[2]);h.add(a.Da,a.Db,E);h.subtract(E,a.Cb,E);h.subtract(E,a.Eb,E);b.push(E[0],E[1],E[2]);h.subtract(a.Da,a.Db,E);h.add(E,a.Cb,E);h.add(E,a.Eb,E);b.push(E[0],E[1],E[2]);h.subtract(a.Da,a.Db,E);h.add(E,a.Cb,E);h.subtract(E,a.Eb,E);b.push(E[0],E[1],E[2]);h.subtract(a.Da,a.Db,E);h.subtract(E,a.Cb,E);h.add(E,a.Eb,E);b.push(E[0],E[1],E[2]);h.subtract(a.Da,
a.Db,E);h.subtract(E,a.Cb,E);h.subtract(E,a.Eb,E);b.push(E[0],E[1],E[2])};w.z=a;w.x=function(a){var b=n();h.copy(a.Cb,b.Cb);h.copy(a.Db,b.Db);h.copy(a.Eb,b.Eb);h.copy(a.Da,b.Da);return b};w.B=function(a){var b=C();var c=h.length(a.Cb);var k=h.length(a.Db),d=h.length(a.Eb);c=c>k?c:k;b.Da=a.Da;b.Lb=d>c?d:c;return b};w.M=function(a,b){var c=h.length(a.Cb),k=h.length(a.Db);a=h.length(a.Eb);return.75*b.Lb*b.Lb*b.Lb>c*k*a};f.d(w,"I",function(){return H});f.d(w,"K",function(){return H});f.d(w,"J",function(){return H});
w.b=function(a,b){var c=b.max_z;b=b.min_z;var h=Math.max(0,c-b-2*a),k=H();k.Lb=a;k.height=h;k.Da[0]=0;k.Da[1]=0;k.Da[2]=(c+b)/2;return k};w.d=function(a,b){var c=b.max_z;b=b.min_z;var h=Math.max(0,c-b),k=H();k.Lb=a;k.height=h;k.Da[0]=0;k.Da[1]=0;k.Da[2]=(c+b)/2;return k};w.c=function(a,b){var c=b.max_z;b=b.min_z;var h=Math.max(0,c-b),k=H();k.Lb=a;k.height=h;k.Da[0]=0;k.Da[1]=0;k.Da[2]=(c+b)/2;return k};f.d(w,"p",function(){return k});f.d(w,"r",function(){return k});f.d(w,"q",function(){return k});
w.N=function(b){for(var c=0,h=0,k=N(),l=0;l<b.submeshes.length;l++){for(var f=b.submeshes[l],n=f.position,t=0;t<n.length/3;t++){var e=n[3*t],A=n[3*t+1],r=n[3*t+2];c=Math.max(Math.sqrt(e*e+A*A+r*r),c);h=Math.max(Math.sqrt(e*e+A*A),h)}t=f.boundings.bb;n=d(n,0,n.length,N());t.max_x=n.max_x;t.min_x=n.min_x;t.max_y=n.max_y;t.min_y=n.min_y;t.max_z=n.max_z;t.min_z=n.min_z;t=m(n,u);t=a(t,!1);f.boundings.be_cen=t.Da;f.boundings.be_ax=[t.Cb[0],t.Db[1],t.Eb[2]];0==l?U(n,k):y(k,n)}l=b.b4w_boundings.bb;l.max_x=
k.max_x;l.min_x=k.min_x;l.max_y=k.max_y;l.min_y=k.min_y;l.max_z=k.max_z;l.min_z=k.min_z;l=b.b4w_boundings.bb_src;l.max_x=k.max_x;l.min_x=k.min_x;l.max_y=k.max_y;l.min_y=k.min_y;l.max_z=k.max_z;l.min_z=k.min_z;b.b4w_boundings.bs_rad=c;b.b4w_boundings.bc_rad=h;t=m(k,u);t=a(t,!1);b.b4w_boundings.be_cen=t.Da;b.b4w_boundings.be_ax=[t.Cb[0],t.Db[1],t.Eb[2]]};w.H=function(a){var k=a.subarray(0,3),d=a.subarray(6,9),l=a.subarray(12,15),f=a.subarray(18,21);a=h.subtract(d,k,E);h.normalize(a,a);var m=b._10(k,
d,l,R);m=h.cross(m,a,m);h.normalize(m,m);var u=h.create(),t=h.create();h.subtract(d,k,O);t[0]=h.dot(O,a);t[1]=h.dot(O,m);d=h.create();h.subtract(l,k,O);d[0]=h.dot(O,a);d[1]=h.dot(O,m);l=h.create();h.subtract(f,k,O);l[0]=h.dot(O,a);l[1]=h.dot(O,m);f=C();l=[u,t,d,l];u=c(f,l[0],l[1]);for(f=2;f<l.length;f++)if(h.distance(u.Da,l[f])>u.Lb){var e=u;u=l;t=l[f];d=f-1;e=c(e,t,u[0]);for(var n=1;n<=d;n++)if(h.distance(e.Da,u[n])>e.Lb){var A=e;e=u;var r=t,p=u[n],v=n-1;A=c(A,r,p);for(var T=0;T<=v;T++)if(h.distance(A.Da,
e[T])>A.Lb){var B=r,V=p,z=e[T],G=h.subtract(V,z,O);G=h.squaredLength(G);var K=h.subtract(B,z,O),y=h.squaredLength(K);K=h.subtract(B,V,O);var H=h.squaredLength(K);K=G*(y+H-G);var L=y*(H+G-y);G=H*(G+y-H);y=K+L+G;h.copy(B,A.Da);h.scale(A.Da,K/y,A.Da);h.scaleAndAdd(A.Da,V,L/y,A.Da);h.scaleAndAdd(A.Da,z,G/y,A.Da);A.Lb=h.distance(A.Da,B)}e=A}u=e}f=u;a=h.scale(a,f.Da[0],O);h.scaleAndAdd(a,m,f.Da[1],a);h.add(a,k,f.Da);return f};var l=f(6),b=f(2),h=f(3),G=f(42),ka=f(27),u=new Float32Array(24),E=new Float32Array(3),
R=new Float32Array(3),O=new Float32Array(3),L=new Float32Array(3),B=new Float32Array(9),Y=new Float32Array(9),K=new Float32Array(9),ha=.001,T=5E-4,V=ha/2},function(D,w,f){D=f(0);var N=f(5),U=f(35),n=f(31),y=f(1),d=f(8),m=f(36),C=f(2),v=f(3);f=Object(D.a)("util",function(f,p){var r=Object(N.a)(f),a=Object(U.a)(f),H=Object(n.a)(f),k=Object(y.a)(f);p.AXIS_X=new Float32Array([1,0,0]);p.AXIS_Y=new Float32Array([0,1,0]);p.AXIS_Z=new Float32Array([0,0,1]);p.AXIS_MX=new Float32Array([-1,0,0]);p.AXIS_MY=new Float32Array([0,
-1,0]);p.AXIS_MZ=new Float32Array([0,0,-1]);p.XYX=C.o;p.YZY=C.v;p.ZXZ=C.x;p.XZX=C.q;p.YXY=C.s;p.ZYZ=C.z;p.XYZ=C.p;p.YZX=C.u;p.ZXY=C.w;p.XZY=C.r;p.YXZ=C.t;p.ZYX=C.y;p.f32=function(a){return C._1(a||0)};p.assert=r.assert;p.keyfind=C._18;p.keysearch=C._19;p.matrix_to_quat=function(a){return C._24(a)};p.euler_to_quat=function(a,k){k||(k=new Float32Array(4));return C.Y(a,k)};p.ordered_angles_to_quat=function(a,k,b){b||(b=d.create());return C._27(a,k,b)};p.quat_to_ordered_angles=function(a,k,b){b||(b=v.create());
return C._37(a,k,b)};p.quat_to_euler=function(a,k){k||(k=new Float32Array(3));return C._36(a,k)};p.sign=C._50;p.clamp=C.M;p.quat_to_dir=C._34;p.ground_project_cam_quat=function(a,k){return C._30(a,C.c,C.f,C.e,k)};p.cam_quat_to_mesh_quat=function(a,k){return C.I(a,k)};p.quat_project=function(a,d,b,h,f){return 0!=v.dot(b,h)?(k.error("Wrong in-plane direction"),null):C._30(a,d,b,h,f)};p.hash_code=function(){return H.hash_code.apply(H,arguments)};p.smooth=C._51;p.smooth_v=C._54;p.is_vector=C._16;p.correct_cam_quat_up=
C.R;p.quat_to_angle_axis=C._33;p.random_from_array=C._41;p.horizontal_direction=C._12;p.angle_wrap_0_2pi=C.A;p.angle_wrap_periodic=C.B;p.smooth_step=C._53;p.lerp=C._20;p.deg_to_rad=C.T;p.rad_to_deg=C._39;p.dir_to_quat=C.U;p.is_ie11=a.is_ie11;p.gen_tbn_quats=function(a,d){k.Ma("util.gen_tbn_quats() deprecated. Do not use it anymore.");return m.d(a,d)};p.trunc=C._64});w.a=f},function(D,w,f){function N(f,y,d){var m=f[0],n=f[1],v=f[2],r=f[3],p=f[4],z=f[5],a=f[6],H=f[7];f=f[8];var k=y[0],c=y[1],l=y[2],
b=y[3],h=y[4],G=y[5],ka=y[6],u=y[7];y=y[8];d[0]=k*m+c*r+l*a;d[1]=k*n+c*p+l*H;d[2]=k*v+c*z+l*f;d[3]=b*m+h*r+G*a;d[4]=b*n+h*p+G*H;d[5]=b*v+h*z+G*f;d[6]=ka*m+u*r+y*a;d[7]=ka*n+u*p+y*H;d[8]=ka*v+u*z+y*f;return d}Object.defineProperty(w,"__esModule",{value:!0});w.create=function(){var f=new U(9);f[0]=1;f[1]=0;f[2]=0;f[3]=0;f[4]=1;f[5]=0;f[6]=0;f[7]=0;f[8]=1;return f};w.fromMat4=function(f,y){y[0]=f[0];y[1]=f[1];y[2]=f[2];y[3]=f[4];y[4]=f[5];y[5]=f[6];y[6]=f[8];y[7]=f[9];y[8]=f[10];return y};w.clone=function(f){var n=
new U(9);n[0]=f[0];n[1]=f[1];n[2]=f[2];n[3]=f[3];n[4]=f[4];n[5]=f[5];n[6]=f[6];n[7]=f[7];n[8]=f[8];return n};w.copy=function(f,y){y[0]=f[0];y[1]=f[1];y[2]=f[2];y[3]=f[3];y[4]=f[4];y[5]=f[5];y[6]=f[6];y[7]=f[7];y[8]=f[8];return y};w.identity=function(f){f[0]=1;f[1]=0;f[2]=0;f[3]=0;f[4]=1;f[5]=0;f[6]=0;f[7]=0;f[8]=1;return f};w.transpose=function(f,y){if(y===f){var d=f[1],m=f[2],n=f[5];y[1]=f[3];y[2]=f[6];y[3]=d;y[5]=f[7];y[6]=m;y[7]=n}else y[0]=f[0],y[1]=f[3],y[2]=f[6],y[3]=f[1],y[4]=f[4],y[5]=f[7],
y[6]=f[2],y[7]=f[5],y[8]=f[8];return y};w.invert=function(f,y){var d=f[0],m=f[1],n=f[2],v=f[3],r=f[4],p=f[5],z=f[6],a=f[7];f=f[8];var H=f*r-p*a,k=-f*v+p*z,c=a*v-r*z,l=d*H+m*k+n*c;if(!l)return null;l=1/l;y[0]=H*l;y[1]=(-f*m+n*a)*l;y[2]=(p*m-n*r)*l;y[3]=k*l;y[4]=(f*d-n*z)*l;y[5]=(-p*d+n*v)*l;y[6]=c*l;y[7]=(-a*d+m*z)*l;y[8]=(r*d-m*v)*l;return y};w.adjoint=function(f,y){var d=f[0],m=f[1],n=f[2],v=f[3],r=f[4],p=f[5],z=f[6],a=f[7];f=f[8];y[0]=r*f-p*a;y[1]=n*a-m*f;y[2]=m*p-n*r;y[3]=p*z-v*f;y[4]=d*f-n*z;
y[5]=n*v-d*p;y[6]=v*a-r*z;y[7]=m*z-d*a;y[8]=d*r-m*v;return y};w.determinant=function(f){var n=f[3],d=f[4],m=f[5],C=f[6],v=f[7],r=f[8];return f[0]*(r*d-m*v)+f[1]*(-r*n+m*C)+f[2]*(v*n-d*C)};w.multiply=N;f.d(w,"mul",function(){return N});w.translate=function(f,y,d){var m=f[0],n=f[1],v=f[2],r=f[3],p=f[4],z=f[5],a=f[6],H=f[7];f=f[8];var k=y[0];y=y[1];d[0]=m;d[1]=n;d[2]=v;d[3]=r;d[4]=p;d[5]=z;d[6]=k*m+y*r+a;d[7]=k*n+y*p+H;d[8]=k*v+y*z+f;return d};w.rotate=function(f,y,d){var m=f[0],n=f[1],v=f[2],r=f[3],
p=f[4],z=f[5],a=f[6],H=f[7];f=f[8];var k=Math.sin(y);y=Math.cos(y);d[0]=y*m+k*r;d[1]=y*n+k*p;d[2]=y*v+k*z;d[3]=y*r-k*m;d[4]=y*p-k*n;d[5]=y*z-k*v;d[6]=a;d[7]=H;d[8]=f;return d};w.scale=function(f,y,d){var m=y[0];y=y[1];d[0]=m*f[0];d[1]=m*f[1];d[2]=m*f[2];d[3]=y*f[3];d[4]=y*f[4];d[5]=y*f[5];d[6]=f[6];d[7]=f[7];d[8]=f[8];return d};w.fromTranslation=function(f,y){y[0]=1;y[1]=0;y[2]=0;y[3]=0;y[4]=1;y[5]=0;y[6]=f[0];y[7]=f[1];y[8]=1;return y};w.fromRotation=function(f,y){var d=Math.sin(f);f=Math.cos(f);
y[0]=f;y[1]=d;y[2]=0;y[3]=-d;y[4]=f;y[5]=0;y[6]=0;y[7]=0;y[8]=1;return y};w.fromScaling=function(f,y){y[0]=f[0];y[1]=0;y[2]=0;y[3]=0;y[4]=f[1];y[5]=0;y[6]=0;y[7]=0;y[8]=1;return y};w.fromMat2d=function(f,y){y[0]=f[0];y[1]=f[1];y[2]=0;y[3]=f[2];y[4]=f[3];y[5]=0;y[6]=f[4];y[7]=f[5];y[8]=1;return y};w.fromQuat=function(f,y){var d=f[0],m=f[1],n=f[2];f=f[3];var v=d+d,r=m+m,p=n+n;d*=v;var z=m*v;m*=r;var a=n*v,H=n*r;n*=p;v*=f;r*=f;f*=p;y[0]=1-m-n;y[3]=z-f;y[6]=a+r;y[1]=z+f;y[4]=1-d-n;y[7]=H-v;y[2]=a-r;y[5]=
H+v;y[8]=1-d-m;return y};w.normalFromMat4=function(f,y){var d=f[0],m=f[1],n=f[2],v=f[3],r=f[4],p=f[5],z=f[6],a=f[7],H=f[8],k=f[9],c=f[10],l=f[11],b=f[12],h=f[13],G=f[14];f=f[15];var ka=d*p-m*r,u=d*z-n*r,E=d*a-v*r,R=m*z-n*p,O=m*a-v*p,L=n*a-v*z,B=H*h-k*b,Y=H*G-c*b;H=H*f-l*b;var K=k*G-c*h;k=k*f-l*h;c=c*f-l*G;l=ka*c-u*k+E*K+R*H-O*Y+L*B;if(!l)return null;l=1/l;y[0]=(p*c-z*k+a*K)*l;y[1]=(z*H-r*c-a*Y)*l;y[2]=(r*k-p*H+a*B)*l;y[3]=(n*k-m*c-v*K)*l;y[4]=(d*c-n*H+v*Y)*l;y[5]=(m*H-d*k-v*B)*l;y[6]=(h*L-G*O+f*R)*
l;y[7]=(G*E-b*L-f*u)*l;y[8]=(b*O-h*E+f*ka)*l;return y};w.str=function(f){return"mat3("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+", "+f[4]+", "+f[5]+", "+f[6]+", "+f[7]+", "+f[8]+")"};w.frob=function(f){return Math.sqrt(Math.pow(f[0],2)+Math.pow(f[1],2)+Math.pow(f[2],2)+Math.pow(f[3],2)+Math.pow(f[4],2)+Math.pow(f[5],2)+Math.pow(f[6],2)+Math.pow(f[7],2)+Math.pow(f[8],2))};var U="undefined"!==typeof Float32Array?Float32Array:Array},function(D,w,f){D=f(0);var N=f(4),U=f(1);f=Object(D.a)("__extensions",function(f,
y){function d(){return z.Ib?v("OES_texture_float_linear"):n("OES_texture_float_linear")}function m(){return z.Ib?v("EXT_color_buffer_float"):n("WEBGL_color_buffer_float")}function n(k){if(k in H)return H[k];var c=a.getExtension(k)||null;H[k]=c;p.log("%cGET EXTENSION","color: #"+(c?"0a0":"a00"),k);return c}function v(k){if(k in H)return H[k];switch(k){case "WEBGL_depth_texture":case "OES_element_index_uint":case "OES_standard_derivatives":case "EXT_shader_texture_lod":case "OES_texture_float":case "OES_texture_half_float":var c=
{};break;case "ANGLE_instanced_arrays":case "OES_vertex_array_object":c=a;break;default:c=a.getExtension(k)||null}H[k]=c;p.log("%cGET EXTENSION (WebGL 2)","color: #"+(c?"0a0":"a00"),k);return c}var r=Object(N.a)(f),p=Object(U.a)(f),z=r.wa,a=null,H={};y.fh=function(k){a=k};y.XF=function(){return n("WEBGL_compressed_texture_s3tc")||n("WEBKIT_WEBGL_compressed_texture_s3tc")};y.WF=function(){return n("WEBKIT_WEBGL_compressed_texture_pvrtc")||n("WEBGL_compressed_texture_pvrtc")};y.dQ=function(){return z.Ib?
v("WEBGL_depth_texture"):n("WEBGL_depth_texture")||n("WEBKIT_WEBGL_depth_texture")};y.wQ=function(){return z.Ib?v("OES_texture_float"):n("OES_texture_float")};y.yQ=function(){return z.Ib?v("OES_texture_half_float"):n("OES_texture_half_float")};y.xQ=d;y.zQ=function(){return z.Ib?d():n("OES_texture_half_float_linear")};y.VP=m;y.WP=function(){return z.Ib?m():n("EXT_color_buffer_half_float")};y.$z=function(){return n("EXT_texture_filter_anisotropic")||n("WEBKIT_EXT_texture_filter_anisotropic")};y.iA=
function(){return z.Ib?v("EXT_shader_texture_lod"):n("EXT_shader_texture_lod")};y.aQ=function(){return n("WEBGL_debug_shaders")};y.get_renderer_info=function(){return n("WEBGL_debug_renderer_info")};y.SF=function(){return z.Ib?v("OES_element_index_uint"):n("OES_element_index_uint")};y.hA=function(){return z.Ib?v("OES_standard_derivatives"):n("OES_standard_derivatives")};y.dA=function(){var k=z.Ib?v("EXT_disjoint_timer_query_webgl2"):n("EXT_disjoint_timer_query");return null==k?k:k.createQueryEXT?
{createQuery:function(){return k.createQueryEXT()},beginQuery:function(a){k.beginQueryEXT(k.TIME_ELAPSED_EXT,a)},endQuery:function(){k.endQueryEXT(k.TIME_ELAPSED_EXT)},NF:function(a){return k.getQueryObjectEXT(a,k.QUERY_RESULT_AVAILABLE_EXT)},OF:function(a){return k.getQueryObjectEXT(a,k.QUERY_RESULT_EXT)},MF:function(){return a.getParameter(k.GPU_DISJOINT_EXT)}}:{createQuery:function(){return a.createQuery()},beginQuery:function(c){a.beginQuery(k.TIME_ELAPSED_EXT,c)},endQuery:function(){a.endQuery(k.TIME_ELAPSED_EXT)},
NF:function(c){return a.getQueryParameter(c,a.QUERY_RESULT_AVAILABLE)},OF:function(c){return a.getQueryParameter(c,a.QUERY_RESULT)},MF:function(){return a.getParameter(k.GPU_DISJOINT_EXT)}}};y.qQ=function(){if(z.Ib)return v("ANGLE_instanced_arrays");var a=n("ANGLE_instanced_arrays");return null==a?a:{drawElementsInstanced:function(c,k,b,h,d){a.drawElementsInstancedANGLE(c,k,b,h,d)},vertexAttribDivisor:function(c,k){a.vertexAttribDivisorANGLE(c,k)},drawArraysInstanced:function(c,k,b,h){a.drawArraysInstancedANGLE(c,
k,b,h)}}};y.kA=function(){if(z.Ib)return v("OES_vertex_array_object");var a=n("OES_vertex_array_object");return null==a?a:{bindVertexArray:function(c){a.bindVertexArrayOES(c)},createVertexArray:function(){return a.createVertexArrayOES()},deleteVertexArray:function(c){a.deleteVertexArrayOES(c)},isVertexArray:function(c){return a.isVertexArrayOES(c)}}};y.cleanup=function(){H={}};y.reset=function(){a=null}});w.a=f},function(D,w,f){D=f(0);var N=f(5),U=f(2);f=Object(D.a)("__graph",function(f,y){function d(a,
b,c){c||(c=null);m(a,b)?A.va("Graph already has node with given ID"):a.Ha.push(b,c)}function m(a,b){a=a.Ha;for(var c=0;c<a.length;c+=2)if(a[c]==b)return!0;return!1}function n(a,b,c,h){h||(h=null);m(a,b)&&m(a,c)?a.nb.push(b,c,h):A.va("Wrong node IDs")}function v(a,b){m(a,b)||A.va("Node not found");a=a.Ha;for(var c=0;c<a.length;c+=2)a[c]==b&&(a.splice(c,2),c-=2)}function r(a,b,c,h){K(a,b,c)||A.va("Edge not found");a=a.nb;for(var k=0,d=0;d<a.length;d+=3)if(a[d]==b&&a[d+1]==c){if(-1==h)a.splice(d,3);
else{if(h==k){a.splice(d,3);break}k++}d-=3}}function p(a){a=a.Ha;for(var b=-1,c=0;c<a.length;c+=2)b=Math.max(b,a[c]);return++b}function z(a,b){a=a.Ha;for(var c=0;c<a.length;c+=2)if(a[c+1]==b)return a[c];return-1}function a(a){var b=[],c={};H(a,c);for(var h=a.Ha,d=0;d<h.length;d+=2)0==L(a,h[d])&&k(a,h[d],c,b);return{Ha:b,nb:a.nb.slice(0)}}function H(a,b){a=a.Ha;for(var c=0;c<a.length;c+=2)b[a[c]]=!1}function k(a,b,c,h){if(!c[b]){c[b]=!0;for(var d=0;d<O(a,b);d++)k(a,B(a,b,d),c,h);h.unshift(b,R(a,b))}}
function c(a,b,h,k){if(!h[b]){h[b]=!0;if(10==k||30==k)for(var d=0;d<O(a,b);d++){var f=B(a,b,d);c(a,f,h,k)}if(20==k||30==k)for(d=0;d<L(a,b);d++)f=Y(a,b,d),c(a,f,h,k)}}function l(a){for(var b=a.nb,c=0;c<b.length;c+=3){var h=b[c+1];m(a,b[c])&&m(a,h)||(b.splice(c,3),c-=3)}}function b(a){for(var b=[],c=a.Ha,h=0;h<c.length;h+=2){var k=c[h];O(a,k)||b.push(k)}return b}function h(a){var b=a.Ha;a=a.nb;for(var c=[],h=[],k=[],d=0;d<b.length;d++)k[b[2*d]]=d,c.push(d,b[2*d+1]);for(d=0;d<a.length;d+=3)h.push(k[a[d]],
k[a[d+1]],a[d+2]);return{Ha:c,nb:h}}function G(a,b,c){if(c.Ri==c.Bl){for(var h=0,k=0;h<c.Bl;h++)-1!=c.Rj[h]&&(a[k]=h,b[k]=c.Rj[h],k++);return!0}if(c.Bl>c.fp||c.Xl>c.Yl||c.Sp>c.Up||c.Rp>c.Tp)return!1;k=h=-1;for(var d=!1;!d&&ka(c,aa,h,k);)if(h=aa[0],k=aa[1],u(c,h,k)){var e=c;d={};d.Kr=e.Kr;d.Lr=e.Lr;d.iB=e.iB;d.Uu=e.Uu;d.Bl=e.Bl;d.fp=e.fp;d.order=e.order;d.Ri=d.Fw=e.Ri;d.Rp=e.Rp;d.Sp=e.Sp;d.Xl=e.Xl;d.Tp=e.Tp;d.Up=e.Up;d.Yl=e.Yl;d.Dq=-1;d.Rj=e.Rj;d.Fm=e.Fm;d.Zm=e.Zm;d.$m=e.$m;d.rn=e.rn;d.sn=e.sn;d.jx=
e.jx;e.jx[0]+=1;d=e=d;var f=h,l=k,q=d.Kr,m=d.Lr,A=d.Bl,n=d.fp,r=d.Rj,p=d.Fm,v=d.Zm,T=d.$m,J=d.rn,V=d.sn;E(f<A);E(l<n);E(d.Ri<A);E(d.Ri<n);A=++d.Ri;d.Dq=f;v[f]||(v[f]=A,d.Rp++,J[f]&&d.Xl++);J[f]||(J[f]=A,d.Sp++,v[f]&&d.Xl++);T[l]||(T[l]=A,d.Tp++,V[l]&&d.Yl++);V[l]||(V[l]=A,d.Up++,T[l]&&d.Yl++);r[f]=l;p[l]=f;for(r=0;r<L(q,f);r++)p=Y(q,f,r),v[p]||(v[p]=A,d.Rp++,J[p]&&d.Xl++);for(r=0;r<O(q,f);r++)p=B(q,f,r),J[p]||(J[p]=A,d.Sp++,v[p]&&d.Xl++);for(r=0;r<L(m,l);r++)p=Y(m,l,r),T[p]||(T[p]=A,d.Tp++,V[p]&&
d.Yl++);for(r=0;r<O(m,l);r++)p=B(m,l,r),V[p]||(V[p]=A,d.Up++,T[p]&&d.Yl++);d=G(a,b,e);E(1>=e.Ri-e.Fw);E(-1!=e.Dq);p=e.Kr;f=e.Lr;l=e.Ri;q=e.Dq;m=e.Rj;v=e.Fm;A=e.Zm;T=e.$m;n=e.rn;J=e.sn;if(e.Fw<l){A[q]==l&&(A[q]=0);for(V=0;V<L(p,q);V++)r=Y(p,q,V),A[r]==l&&(A[r]=0);n[q]==l&&(n[q]=0);for(V=0;V<O(p,q);V++)r=B(p,q,V),n[r]==l&&(n[r]=0);p=m[q];T[p]==l&&(T[p]=0);for(V=0;V<L(f,p);V++)r=Y(f,p,V),T[r]==l&&(T[r]=0);J[p]==l&&(J[p]=0);for(V=0;V<O(f,p);V++)r=B(f,p,V),J[r]==l&&(J[r]=0);m[q]=-1;v[p]=-1;e.Ri=e.Fw;e.Dq=
-1}}return d}function ka(a,b,c,h){-1==c&&(c=0);-1==h?h=0:h++;var k=a.Xl,d=a.Yl,e=a.Sp,f=a.Up,l=a.Rp,q=a.Tp,m=a.Ri,u=a.Bl,A=a.fp,r=a.Rj,n=a.Fm,p=a.Zm,v=a.$m,T=a.rn,B=a.sn;if(k>m&&d>m)for(;c<u&&(-1!=r[c]||0==T[c]||0==p[c]);)c++,h=0;else if(e>m&&f>m)for(;c<u&&(-1!=r[c]||0==T[c]);)c++,h=0;else if(l>m&&q>m)for(;c<u&&(-1!=r[c]||0==p[c]);)c++,h=0;else if(0==c&&0!=a.order){for(p=0;p<u&&-1!=r[c=a.order[p]];)p++;p==u&&(c=u)}else for(;c<u&&-1!=r[c];)c++,h=0;if(k>m&&d>m)for(;h<A&&(-1!=n[h]||0==B[h]||0==v[h]);)h++;
else if(e>m&&f>m)for(;h<A&&(-1!=n[h]||0==B[h]);)h++;else if(l>m&&q>m)for(;h<A&&(-1!=n[h]||0==v[h]);)h++;else for(;h<A&&-1!=n[h];)h++;return c<u&&h<A?(b[0]=c,b[1]=h,!0):!1}function u(a,b,c){var h=a.Kr,k=a.Lr,d=a.fp,e=a.Rj,f=a.Fm,l=a.Zm,q=a.$m,m=a.rn,u=a.sn;E(b<a.Bl);E(c<d);E(-1==e[b]);E(-1==f[c]);if(!(0,a.iB)(R(h,b),R(k,c)))return!1;for(var A=d=0,r=0,n=0,p=0,v=0,T=0;T<O(h,b);T++){var V=B(h,b,T);if(-1!=e[V]){var J=e[V];if(!K(k,c,J)||!ha(a.Uu,h,b,V,k,c,J))return!1}else l[V]&&r++,m[V]&&d++,l[V]||m[V]||
p++}for(T=0;T<L(h,b);T++)if(V=Y(h,b,T),-1!=e[V]){if(J=e[V],!K(k,J,c)||!ha(a.Uu,h,V,b,k,J,c))return!1}else l[V]&&r++,m[V]&&d++,l[V]||m[V]||p++;for(T=0;T<O(k,c);T++)if(J=B(k,c,T),-1!=f[J]){if(V=f[J],!K(h,b,V))return!1}else q[J]&&n++,u[J]&&A++,q[J]||u[J]||v++;for(T=0;T<L(k,c);T++)if(J=Y(k,c,T),-1!=f[J]){if(V=f[J],!K(h,V,b))return!1}else q[J]&&n++,u[J]&&A++,q[J]||u[J]||v++;return r<=n&&d<=A&&p<=v}function E(a){a||A.va("Assertion failed")}function R(a,b){a=a.Ha;for(var c=0;c<a.length;c+=2)if(a[c]==b)return a[c+
1];return null}function O(a,b){a=a.nb;for(var c=0,h=0;h<a.length;h+=3)a[h]==b&&c++;return c}function L(a,b){a=a.nb;for(var c=0,h=0;h<a.length;h+=3)a[h+1]==b&&c++;return c}function B(a,b,c){a=a.nb;for(var h=0,k=0;k<a.length;k+=3)if(a[k]==b){if(h==c)return a[k+1];h++}return-1}function Y(a,b,c){a=a.nb;for(var h=0,k=0;k<a.length;k+=3)if(a[k+1]==b){if(h==c)return a[k];h++}return-1}function K(a,b,c){a=a.nb;for(var h=0;h<a.length;h+=3)if(a[h]==b&&a[h+1]==c)return!0;return!1}function ha(a,b,c,h,k,d,e){for(var f=
T(b,c,h),l=T(k,d,e),q=0;q<f;q++){for(var t=!1,m=0;m<l;m++)if(a(V(b,c,h,q),V(k,d,e,m))){t=!0;break}if(!t)return!1}return!0}function T(a,b,c){var h=0;a=a.nb;for(var k=0;k<a.length;k+=3)a[k]==b&&a[k+1]==c&&h++;return h}function V(a,b,c,h){a=a.nb;for(var k=0,d=0;d<a.length;d+=3)if(a[d]==b&&a[d+1]==c){if(k==h)return a[d+2];k++}return null}var A=Object(N.a)(f),aa=[-1,-1];y.Py=-1;y.$V=10;y.Rk=20;y.hW=30;y.create=function(){for(var a=arguments,b=[],c=[],h=0;h<a.length;h++){var k=a[h];switch(k.length){case 2:b.push(k[0],
k[1]);break;case 3:c.push(k[0],k[1],k[2]);break;default:A.va("Wrong graph constructor params")}}return{Ha:b,nb:c}};y.clone=function(a,b,c){if(b)for(var h=Array(a.Ha.length),k=0;k<a.Ha.length;k+=2)h[k]=a.Ha[k],h[k+1]=b(a.Ha[k+1]);else h=U.O(a.Ha);if(c)for(b=Array(a.nb.length),k=0;k<a.nb.length;k+=3)b[k]=a.nb[k],b[k+1]=a.nb[k+1],b[k+2]=c(a.nb[k+2]);else b=U.O(a.nb);return a={Ha:h,nb:b}};y.dX=function(a,b){for(var c=[],h=[],k=0;k<a.length;k++)c.push(a[k][0],a[k][1]);for(k=0;k<b.length;k++)h.push(b[k][0],
b[k][1],b[k][2]);return{Ha:c,nb:h}};y.Zh=d;y.LX=m;y.gd=n;y.rf=v;y.Nl=r;y.ui=function(a,b,c,h){K(a,b,c)||A.va("Edge not found");a=a.nb;for(var k=0;k<a.length;k+=3)if(a[k]==b&&a[k+1]==c&&a[k+2][0]==h[0]&&a[k+2][1]==h[1]){a.splice(k,3);break}};y.Fa=function(a,b){if(-1==z(a,b)){var c=p(a);d(a,c,b);return c}A.va("Non-unique attribute")};y.SS=function(a,b,c,h,k){a=a.nb;for(var d=0;d<a.length;d+=3)a[d]==b&&a[d+1]==c&&a[d+2]==h&&(a[d+2]=k)};y.QD=function(a,b,c,h){c=c||[];h=h||[];for(var k={},f=0;f<a.Ha.length;f+=
2){var e=a.Ha[f],l=p(b);d(b,l,a.Ha[f+1]);k[e]=l}for(f=0;f<a.nb.length;f+=3){l=k[a.nb[f]];var q=k[a.nb[f+1]];e=a.nb[f+2];n(b,l,q,e)}for(f=0;f<c.length;f+=3)l=k[c[f]],a=c[f+1],e=c[f+2],n(b,l,a,e);for(f=0;f<h.length;f+=3)c=h[f],q=k[h[f+1]],e=h[f+2],n(b,c,q,e)};y.ak=p;y.pk=z;y.ra=function(a,b,c,h){b=z(a,b);c=z(a,c);-1!=b&&-1!=c?n(a,b,c,h):A.va("Attributes not found")};y.Na=function(a,b){a=a.Ha;for(var c=0;c<a.length&&!b(a[c],a[c+1]);c+=2);};y.Th=function(a,b){a=a.nb;for(var c=0;c<a.length&&!b(a[c],a[c+
1],a[c+2]);c+=3);};y.Lk=function(a,b,c){for(var h=a.nb,k=0;k<h.length;k+=3)if(h[k+1]==b){var d=h[k];if(c(d,R(a,d),h[k+2]))break}};y.am=function(a,b,c){for(var h=a.nb,k=0;k<h.length;k+=3)if(h[k]==b){var d=h[k+1];if(c(d,R(a,d),h[k+2]))break}};y.tC=a;y.AU=function(b){b=a(b).Ha;for(var c=[],h=0;h<b.length;h+=2)c.push(b[h+1]);return c};y.$X=function(){};y.Vl=function(a,b,h){m(a,b)||A.va("No such node");var k={};H(a,k);c(a,b,k,h);b=[];for(var d in k)k[d]&&(d=Number(d),b.push(d,R(a,d)));a={Ha:b,nb:a.nb.slice(0)};
l(a);return a};y.$q=l;y.uQ=function(a){for(var b=[],c=a.Ha,h=0;h<c.length;h+=2){var k=c[h];L(a,k)||b.push(k)}return b};y.Or=b;y.match=function(a,b,c,k){var d={};d.Kr=h(a);d.Lr=h(b);d.iB=c||function(a,b){return a==b};d.Uu=k||function(a,b){return a==b};k=a.Ha.length/2;var f=b.Ha.length/2;d.Bl=k;d.fp=f;d.order=0;d.Ri=d.Fw=0;d.Xl=d.Rp=d.Sp=0;d.Yl=d.Tp=d.Up=0;d.Dq=-1;d.Rj=Array(k);d.Fm=Array(f);d.Zm=Array(k);d.$m=Array(f);d.rn=Array(k);d.sn=Array(f);d.jx=[1];for(c=0;c<k;c++)d.Rj[c]=-1,d.Zm[c]=0,d.rn[c]=
0;for(c=0;c<f;c++)d.Fm[c]=-1,d.$m[c]=0,d.sn[c]=0;f=Array(k);k=Array(k);if(G(f,k,d)){for(c=0;c<f.length;c++)f[c]=a.Ha[2*f[c]],k[c]=b.Ha[2*k[c]];return[f,k]}return null};y.eA=function(a,b){a=a.Ha;for(var c=1;c<a.length;c+=2)if(a[c]==b)return a[c-1];return null};y.Kb=R;y.ah=O;y.bj=L;y.Bh=B;y.Tg=Y;y.xX=T;y.td=V;y.replace=function(a,b,c){for(var h=a.nb,k=p(a),f=0;f<b.length;f++){var e=b[f];v(a,e);for(var l=0;l<h.length;l+=3)h[l]==e&&(h[l]=k),h[l+1]==e&&(h[l+1]=k),h[l]==h[l+1]&&(h.splice(l,3),l-=3)}d(a,
k,c)};y.IS=function(a,b,c,h,k){K(a,b,c)||A.va("Edge not found");a=a.nb;for(var d=0;d<a.length;d+=3)a[d]==b&&a[d+1]==c&&(a[d]=h,a[d+1]=k)};y.fP=function(a,c){function h(a,b){if(-1!=l.indexOf(a)){var e=l.slice(l.indexOf(a));if(-1!=d[e[e.length-1]].indexOf(e[0])){m.push([a,e[e.length-1]]);return}}l.push(a);for(a=0;a<b.length;a++)b[a]in d&&h(b[a],d[b[a]])}c||(c=b(a)[0]);var k=a.nb;if(k.length&&-1!=k.indexOf(c)){for(var d={},f=0,e=0;e<k.length;e+=3)k[e+1]in d?d[k[e+1]].push(k[e]):d[k[e+1]]=[k[e]],f++;
var l=[],m=[];h(c,d[c]);for(e=0;e<m.length;e++)for(c=f=0;c<k.length;c+=3)m[e][1]==k[c+1]&&m[e][0]==k[c]&&r(a,k[c],k[c+1],f),f++}};y.hF=function(a,b,c){var h=a.Ha;a=a.nb;var k="digraph debug {\n    node [shape=box];\n";for(var d=0;d<h.length;d+=2){var e=h[d],f=h[d+1];f=b?b(e,f):String(e);k+="    ";k+=String(e)+' [label="'+f.replace(/"/g,'\\"')+'"];\n'}for(d=0;d<a.length;d+=3)b=a[d],h=a[d+1],f=a[d+2],k+="    ",k+=String(b)+" -> "+String(h),c&&(k+=' [label="'+c(b,h,f)+'"]'),k+=";\n";return k+"}"}});
w.a=f},function(D,w,f){D=f(0);var N=f(16),U=f(14),n=f(15),y=f(43),d=f(29),m=f(12),C=f(9),v=f(1),r=f(19),p=f(10),z=f(11),a=f(2);f=Object(D.a)("scenes",function(f,k){function c(){var a=G.get_canvas();return E.pick_object(a.clientWidth/2,a.clientHeight/2)}function l(a){return R.kc(a)||R.is_empty(a)||R.is_line(a)||R.is_lamp(a)}var b=Object(N.a)(f),h=Object(U.a)(f),G=Object(n.a)(f),H=Object(y.a)(f),u=Object(d.a)(f),E=Object(m.a)(f),R=Object(C.a)(f),O=Object(v.a)(f),L=Object(r.a)(f),B=Object(p.a)(f),Y=
Object(z.a)(f);k.DATA_ID_ALL=E.DATA_ID_ALL;k.set_active=function(b){var c=B.Mr();B.set_active(a._19("name",b,c))};k.get_active=function(){return B.zb()?B.get_active().name:""};k.get_scenes=function(){for(var a=B.Mr(),b=[],c=0;c<a.length;c++)b.push(a[c].name);return b};k.get_active_camera=function(){if(B.zb())return B.ll(B.get_active());O.error("No active scene");return!1};k.get_object_by_name=function(a,b){if(b=E.Cd(E.Ly,a,b|0,!0))return b;O.error("get object "+a+": not found")};k.get_object_by_dupli_name=
function(a,b,c){if(a=E.Cd(E.Ky,a,b,c|0))return a;O.error("get object "+b+": not found")};k.get_object_by_dupli_name_list=function(a,b){if(b=E.Cd(E.qe,a,b|0))return b;O.error("get object "+a+": not found")};k.get_world_by_name=function(a,b){if(b=E.get_world_by_name(a,b|0))return b;O.error("get object "+a+": not found")};k.get_object_data_id=function(a){return R.get_object_data_id(a)};k.pick_object=function(a,b){var h=B.Ah();return h?(h=B.yc(h,Y.mh))&&h.enable_hmd_stereo?(O.Ma("pick_object() is not available in the stereo rendering mode. Use scenes.pick_center instead."),
c()):E.pick_object(a,b):(O.error("No active scene"),null)};k.pick_center=c;k.outlining_is_enabled=function(a){return a&&a.ka&&a.ka.Ed};k.set_outline_intensity=function(a,b){a&&a.ka&&a.ka.Ed?E.set_outline_intensity(a,b):O.error("set_outline_intensity(): wrong object")};k.get_outline_intensity=function(a){if(a&&a.ka&&a.ka.Ed)return a.ka.mj;O.error("get_outline_intensity(): wrong object");return 0};k.apply_outline_anim=function(a,b,c,h){a&&a.ka&&a.ka.Ed?E.apply_outline_anim(a,b,c,h):O.error("apply_outline_anim(): wrong object")};
k.apply_outline_anim_def=function(a){if(a&&a.ka&&a.ka.Ed){var b=a.ka.lj;E.apply_outline_anim(a,b.Fl,b.Gl,b.Hl)}else O.error("apply_outline_anim_def(): wrong object")};k.clear_outline_anim=function(a){a&&a.ka&&a.ka.Ed?E.clear_outline_anim(a):O.error("clear_outline_anim(): wrong object")};k.set_outline_color=B.set_outline_color;k.get_outline_color=function(a){var b=B.get_active();if(b=B.yc(b,Y.Zn))return a=a||new Float32Array(3),a.set(b.si),a};k.set_hmd_params=function(a){B.zb()?a&&(!a.distortion_coefs||
a.distortion_coefs instanceof Array||(a.distortion_coefs=null),!a.chromatic_aberration_coefs||a.chromatic_aberration_coefs instanceof Array||(a.chromatic_aberration_coefs=null),"number"!=typeof a.base_line_factor&&(a.base_line_factor=null),"number"!=typeof a.inter_lens_factor&&(a.inter_lens_factor=null),"boolean"!=typeof a.enable_hmd_stereo&&(a.enable_hmd_stereo=null),B.set_hmd_params(a)):O.error("No active scene")};k.get_shadow_params=function(){if(!B.zb())return O.error("No active scene"),!1;var a=
B.get_active(),b=B.yc(a,Y.ee);if(!b)return null;var c=a.sa.Id,h=B.yc(a,Y.ic),k=B.yc(a,Y.Gg),d={};d.csm_resolution=c.csm_resolution;d.self_shadow_polygon_offset=b.self_shadow_polygon_offset;k&&(d.self_shadow_normal_offset=k.self_shadow_normal_offset);d.enable_csm=c.enable_csm;d.csm_num=c.csm_num;d.csm_first_cascade_border=c.csm_first_cascade_border;d.first_cascade_blur_radius=c.first_cascade_blur_radius;d.csm_last_cascade_border=c.csm_last_cascade_border;d.last_cascade_blur_radius=c.last_cascade_blur_radius;
d.fade_last_cascade=c.fade_last_cascade;d.blend_between_cascades=c.blend_between_cascades;c.enable_csm?(d.csm_borders=B.$P(a,h.qa),d.blur_radii=new Float32Array(c.csm_num),d.blur_radii.set(h.qa.sp.subarray(0,c.csm_num))):(d.csm_borders=null,d.blur_radii=null);return d};k.set_shadow_params=function(a){if(B.zb()){var c=B.get_active();"number"==typeof a.self_shadow_polygon_offset&&u.Na(c.sa.Ya,function(b,c){c.type==Y.ee&&(c.self_shadow_polygon_offset=a.self_shadow_polygon_offset)});for(var k=B.ug(c,
[Y.Gg]),d=0;d<k.length;d++){var f=k[d];"number"==typeof a.self_shadow_normal_offset&&(f.self_shadow_normal_offset=a.self_shadow_normal_offset);"number"==typeof a.pcf_blur_radius&&(f.pcf_blur_radius=a.pcf_blur_radius)}k=B.ug(c,[Y.Md]);for(d=0;d<k.length;d++){var l=k[d];"number"==typeof a.self_shadow_normal_offset&&(l.self_shadow_normal_offset=a.self_shadow_normal_offset);"number"==typeof a.pcf_blur_radius&&(l.pcf_blur_radius=a.pcf_blur_radius);l.wb=!0}k=c.sa.Id;"number"==typeof a.csm_first_cascade_border&&
(k.csm_first_cascade_border=a.csm_first_cascade_border);"number"==typeof a.first_cascade_blur_radius&&(k.first_cascade_blur_radius=a.first_cascade_blur_radius);"number"==typeof a.csm_last_cascade_border&&(k.csm_last_cascade_border=a.csm_last_cascade_border);"number"==typeof a.last_cascade_blur_radius&&(k.last_cascade_blur_radius=a.last_cascade_blur_radius);if(f){l=f.vb;for(d=0;d<l.length;d++)for(var m=l[d].jb,r=0;r<m.length;r++){var q=m[r];if(q.$g.Be){var n=q.fb;b.UD(n,k);b.md(n);Y.zd(f,q)}}f.wb=
!0}f=R.kb(c.Hi,c).Qa;for(d=0;d<f.length;d++)h.GC(f[d],k);B.RB(c)}else O.error("No active scene")};k.get_environment_colors=function(){if(!B.zb())return O.error("No active scene"),[];var a=B.get_active();return B.get_environment_colors(a)};k.set_environment_colors=function(a,b,c){if(B.zb()){var h=B.get_active(),k=B.yc(h,Y.ic);B.set_environment_colors(h,a||0==a?parseFloat(a):k.Rg,b||0==b?b:k.we,c||0==c?c:k.Fe)}else O.error("No active scene")};k.get_fog_color_density=function(a){if(!B.zb())return O.error("No active scene"),
!1;var b=B.get_active();return B.get_fog_color_density(b,a)};k.set_fog_color_density=function(a){if(B.zb()){var b=B.get_active();B.set_fog_color_density(b,a)}else O.error("No active scene")};k.get_fog_params=function(){if(!B.zb())return O.error("No active scene"),!1;var a=B.get_active(),b={};b.fog_intensity=B.jQ(a);b.fog_depth=B.hQ(a);b.fog_start=B.kQ(a);b.fog_height=B.iQ(a);return b};k.set_fog_params=function(a){if(B.zb()){var b=B.get_active();"number"==typeof a.fog_intensity&&B.YH(b,a.fog_intensity);
"number"==typeof a.fog_depth&&B.WH(b,a.fog_depth);"number"==typeof a.fog_start&&B.ZH(b,a.fog_start);"number"==typeof a.fog_height&&B.XH(b,a.fog_height)}else O.error("No active scene")};k.get_ssao_params=function(){if(!B.zb())return O.error("No active scene"),!1;var a=B.get_active();return B.get_ssao_params(a)};k.set_ssao_params=function(a){if(B.zb()){var c=B.get_active(),h=B.ug(c,[Y.Nt]);c=B.ug(c,[Y.Sy]);if(!h.length)return O.error("SSAO is not enabled on the scene"),0;for(var k=0;k<h.length;k++){var d=
h[k],f=c[k],l=a,m=B.get_active(),q=d.vb[0].jb[0],u=q.fb,r=f.vb[0].jb[0],t=r.fb;if("quality"in l){var e=l.quality;8===e||16===e||24===e||32===e?(d.Fn=e,b.dc(u,"SSAO_QUALITY","SSAO_QUALITY_"+e),b.md(u),Y.zd(d,q)):O.error('set_ssao_params(): Wrong "quality" value.')}"use_hemisphere"in l&&(d.Lp=l.use_hemisphere,b.dc(u,"SSAO_HEMISPHERE",l.use_hemisphere|0),b.md(u),Y.zd(d,q));"use_blur_depth"in l&&(f.Ip=l.use_blur_depth,b.dc(t,"SSAO_BLUR_DEPTH",l.use_blur_depth|0),b.md(t),Y.zd(f,r),B.yN(m.sa.Ya,f,t,!1));
"ssao_white"in l&&(d.ssao_white=l.ssao_white,b.dc(u,"SSAO_WHITE",l.ssao_white|0),b.md(u),Y.zd(d,q));"blur_discard_value"in l&&(f.Jp=l.blur_discard_value);"radius_increase"in l&&(d.Np=l.radius_increase);"influence"in l&&(d.Mp=l.influence);"dist_factor"in l&&(d.Kp=l.dist_factor);if("boolean"==typeof l.ssao_only){m=B.yc(m,Y.ic);m.ssao_only=l.ssao_only;q=m.vb;u=[];for(r=0;r<q.length;r++)for(t=q[r].jb,e=0;e<t.length;e++){var n=t[e].fb;b.dc(n,"SSAO_ONLY",l.ssao_only|0);b.md(n);u.push(t[e])}for(r=0;r<u.length;r++)Y.zd(m,
u[r])}d.wb=!0;f.wb=!0}}else O.error("No active scene")};k.get_color_correction_params=function(){if(!B.zb())return O.error("No active scene"),null;var a=B.get_active();a=B.yc(a,Y.Fy);if(!a)return null;var b={};b.brightness=a.brightness;b.contrast=a.contrast;b.exposure=a.exposure;b.saturation=a.saturation;return b};k.set_color_correction_params=function(a){if(B.zb()){var b=B.get_active();if(b=B.yc(b,Y.Fy))"brightness"in a&&(b.brightness=a.brightness),"contrast"in a&&(b.contrast=a.contrast),"exposure"in
a&&(b.exposure=a.exposure),"saturation"in a&&(b.saturation=a.saturation),b.wb=!0}else O.error("No active scene")};k.get_sky_params=function(){if(!B.zb())return O.error("No active scene"),!1;var a=B.get_active();return B.get_sky_params(a)};k.set_sky_params=function(a){if(B.zb()){var b=B.get_active(),c=B.yc(b,Y.Ve);c&&("color"in a&&c.Sl.set(a.color),"rayleigh_brightness"in a&&(c.rayleigh_brightness=a.rayleigh_brightness),"mie_brightness"in a&&(c.mie_brightness=a.mie_brightness),"spot_brightness"in a&&
(c.spot_brightness=a.spot_brightness),"scatter_strength"in a&&(c.scatter_strength=a.scatter_strength),"rayleigh_strength"in a&&(c.rayleigh_strength=a.rayleigh_strength),"mie_strength"in a&&(c.mie_strength=a.mie_strength),"rayleigh_collection_power"in a&&(c.rayleigh_collection_power=a.rayleigh_collection_power),"mie_collection_power"in a&&(c.mie_collection_power=a.mie_collection_power),"mie_distribution"in a&&(c.mie_distribution=a.mie_distribution),c.wb=!0,c.gp=!0,B.iV(b,c))}else O.error("No active scene")};
k.get_dof_params=function(){if(!B.zb())return O.error("No active scene"),!1;var a=B.get_active();return B.yc(a,Y.wq)?B.get_dof_params(a):null};k.set_dof_params=function(a){if(B.zb()){var b=B.get_active();B.set_dof_params(b,a)}else O.error("No active scene")};k.get_god_rays_params=function(){if(!B.zb())return O.error("No active scene"),!1;var a=B.get_active();return B.yc(a,Y.Yn)?B.get_god_rays_params(a):null};k.set_god_rays_params=function(a){if(B.zb()){var b=B.get_active();B.set_god_rays_params(b,
a)}else O.error("No active scene")};k.get_bloom_params=function(){if(!B.zb())return O.error("No active scene"),!1;var a=B.get_active();return B.yc(a,Y.sq)?B.get_bloom_params(a):null};k.set_bloom_params=function(a){if(B.zb()){var b=B.get_active();B.set_bloom_params(b,a)}else O.error("No active scene")};k.get_glow_material_params=function(){if(!B.zb())return O.error("No active scene"),!1;var a=B.get_active();return B.yc(a,Y.xq)?B.get_glow_material_params(a):null};k.set_glow_material_params=function(a){if(B.zb()){var b=
B.get_active();B.set_glow_material_params(b,a)}else O.error("No active scene")};k.get_wind_params=function(){if(!B.zb())return O.error("No active scene"),!1;var a=B.get_active();return B.get_wind_params(a)};k.set_wind_params=function(a){if(B.zb()){var b=B.get_active();E.set_wind_params(b,a)}else O.error("No active scene")};k.get_water_surface_level=function(a,b){if(!B.zb())return O.error("No active scene"),0;var c=B.get_active();return c.sa.wd?B.get_water_surface_level(c,a,b):(O.error("No water parameters on the active scene"),
0)};k.set_water_params=function(a){if(B.zb()){var b=B.get_active();B.set_water_params(b,a)}else O.error("No active scene")};k.get_water_mat_params=function(a){if(B.zb()){var b=B.get_active();B.get_water_mat_params(b,a)}else O.error("No active scene")};k.update_scene_materials_params=function(){if(B.zb()){var a=B.get_active();B.gJ(a)}else O.error("No active scene")};k.hide_object=function(a,b){b=b||!1;l(a)?b?B.Bm(a,!0):B.Zq(a,!0):O.error("show/hide is only supported for dynamic objects.")};k.show_object=
function(a,b){b=b||!1;l(a)?b?B.Bm(a,!1):B.Zq(a,!1):O.error("show/hide is only supported for dynamic objects.")};k.is_hidden=function(a){if(l(a))return B.is_hidden(a);O.error("show/hide is only supported for dynamic meshes/empties and lamps");return!1};k.is_visible=function(a){return a.ka.is_visible};k.check_object_by_name=function(a,b){return E.Cd(E.Ly,a,b|0,!0)?!0:!1};k.check_object_by_dupli_name=function(a,b,c){return E.Cd(E.Ky,a,b,c|0)?!0:!1};k.check_object_by_dupli_name_list=function(a,b){return E.Cd(E.qe,
a,b|0)?!0:!1};k.get_all_objects=function(a,b){var c=B.get_active();a||(a="ALL");b||0===b||(b=E.DATA_ID_ALL);return E.YF(c,a,b)};k.get_object_name=function(a){return a?a.oe:(O.error("Wrong object name"),"")};k.get_object_name_hierarchy=function(a){if(!a)return O.error("Wrong object name"),null;for(var b=[];a;)b.push(a.oe),a=R.get_dg_parent(a);return b.reverse()};k.get_object_type=function(a){return a&&a.type?a.type:(O.error("Wrong object"),"UNDEFINED")};k.get_object_children=function(a){return a.bf.slice(0)};
k.get_first_character=function(){return E.get_first_character(B.get_active())};k.get_shore_dist=function(a,b){b||0===b||(b=1);if(!B.zb())return O.error("No active scene"),0;var c=B.get_active();return B.get_shore_dist(c,a,b)};k.get_cam_water_depth=function(){return B.get_cam_water_depth()};k.get_type_mesh_object=function(a){return R.is_mesh(a)?a.ka.type:""};k.get_meta_tags=function(){if(!B.zb())return O.error("No active scene"),!1;var a=B.get_active();return B.get_meta_tags(a)};k.get_custom_prop=
function(){if(!B.zb())return O.error("No active scene"),!1;var a=B.get_active();return B.get_custom_prop(a)};k.append_object=function(b,c){if(c){var h=B.Mr();c=a._19("name",c,h)}else c=B.get_active();B.append_object(c,b,!0);L.append_object(b,c)};k.remove_object=function(a){R.kc(a)||R.is_empty(a)||R.is_line(a)?(E.pp(a,a.ka.Tv,!1,!1),H.AH(a),E.pp(a,!0,!0,!0),E.remove_object(a)):O.error("Can't remove object \""+a.name+'". It must be dynamic and type of MESH or EMPTY.')};k.marker_frame=function(a){var b=
B.get_active();if(b.timeline_markers&&a in b.timeline_markers)return B.marker_frame(b,a);O.error('"'+a+'" marker not found.');return 0};k.get_mb_params=function(){var a=B.get_active();return(a=B.yc(a,Y.Fi))?{mb_factor:a.mb_factor,mb_decay_threshold:a.mb_decay_threshold}:null};k.set_mb_params=function(a){var b=B.get_active();b=B.ug(b,[Y.Fi]);if(b.length)for(var c=0;c<b.length;c++){var h=b[c];"number"==typeof a.mb_decay_threshold&&(h.mb_decay_threshold=a.mb_decay_threshold);"number"==typeof a.mb_factor&&
(h.mb_factor=a.mb_factor)}else O.error("The motion blur subscene doesn't exist.")};k.can_select_objects=function(){var a=B.get_active();return!!B.yc(a,Y.zf)}});w.a=f},function(D,w,f){D=f(0);var N=f(5),U=f(1);f=Object(D.a)("generator",function(f,y){function d(a,c){switch(typeof a){case "object":if(a)switch(a.constructor){case Object:for(var k in a)c=d(a[k],c);break;case Int8Array:case Uint8Array:case Uint8ClampedArray:case Int16Array:case Uint16Array:case Int32Array:case Uint32Array:case Float32Array:case Float64Array:for(k=
0;k<a.length;k++)c=m(a[k],c);break;case Array:for(k=0;k<a.length;k++)c=d(a[k],c);break;case WebGLUniformLocation:case WebGLProgram:case WebGLShader:case WebGLFramebuffer:case WebGLRenderbuffer:case WebGLTexture:case WebGLBuffer:c=m(0,c);break;default:n.va("Wrong object constructor:",a.constructor)}else c=m(0,c);return c;case "number":return m(a,c);case "boolean":return m(a|0,c);case "string":for(k=0;k<a.length;k++)c=(c<<5)-c+a.charCodeAt(k),c&=c;return c;case "function":case "undefined":return m(0,
c)}}function m(k,c){a[0]=k;c=(c<<5)-c+H[0];c&=c;c=(c<<5)-c+H[1];return c&c}var n=Object(N.a)(f),v=Object(U.a)(f),r=1,p=0,z={},a=new Float64Array(1),H=new Uint32Array(a.buffer);y.mt=function(a){z[a]||(z[a]=0);var c=a+z[a];z[a]++;return c};y.cleanup=function(){p=0;z={}};y.YI=function(){p++;return p.toString(10)};y.GF=function(a){a++;132651<a&&v.error("Color ID pool depleted");var c=Math.floor(a/2601);a%=2601;return new Float32Array([c/51,Math.floor(a/51)/51,a%51/51])};y.HS=function(){r=(69069*r+5)%
Math.pow(2,32);return Math.round(r/65536)%32768/32767};y.kU=function(a){r=a};y.lE=function(a){return d(a,0)};y.hash_code=d});w.a=f},function(D,w){D=!1;try{var f=window.b4w}catch(y){f=self.b4w,D=!0}if(!f){f={};D?self.b4w=f:window.b4w=f;var N={},U={};f.module=N;f._n_module=U;var n={};f.cleanup=function(f,d){if(f=N[f])f.co=null;n[d||"__b4w_default"]=null};f.register=function(f,d){N[f]||(N[f]=d)};f.require=function(f,d){if(!N[f]&&!U[f])throw Error('Module "'+f+'" not found');d=d||"__b4w_default";if(void 0!==
U[f])return U[f](d);n[d]||(n[d]=function(d){return function(f){if(!N[f]&&!U[f])throw Error('Module "'+f+'" not found');if(void 0!==U[f])return U[f](d);f=N[f];f.co||(f.co={});f.co[d]||(f.co[d]={},f(f.co[d],n[d]));return f.co[d]}}(d));return n[d](f)};f.module_check=function(f){return void 0!==N[f]||void 0!==U[f]};f.get_namespace=function(f){for(var d in n)if(n[d]==f)return d;return""};f.worker_listeners=[];f.worker_namespaces=[]}w.a=f},function(D,w,f){D=f(0);var N=f(14),U=f(15),n=f(42),y=f(9),d=f(19),
m=f(1),C=f(10),v=f(13),r=f(6),p=f(2),z=f(3),a=f(7),H=f(8);f=Object(D.a)("camera",function(k,c){function f(a,b){if(!G.is_camera(a))return u.error("get_view_vector(): Wrong camera object"),null;b=b||new Float32Array(3);a=r.g(a.ka.na,Y);p._34(a,p.c,b);return b}var b=Object(N.a)(k),h=Object(U.a)(k),G=Object(y.a)(k),ka=Object(d.a)(k),u=Object(m.a)(k),E=Object(C.a)(k),R=Object(v.a)(k),O=new Float32Array(2),L=new Float32Array(3),B=new Float32Array(3),Y=H.create(),K={},w={};c.MS_STATIC=b.MS_STATIC;c.MS_TARGET_CONTROLS=
b.MS_TARGET_CONTROLS;c.MS_EYE_CONTROLS=b.MS_EYE_CONTROLS;c.MS_HOVER_CONTROLS=b.MS_HOVER_CONTROLS;c.static_setup=function(a,c){if(G.is_camera(a)){b.Dt(a);a.ka.cc=b.MS_STATIC;if(c){var h=c.pos||r.j(a.ka.na,L);c.look_at?b.eI(a,h,c.look_at):R.set_translation(a,h)}R.Ea(a);ka.sync_transform(a);b.So(a)}else u.error("static_setup(): Wrong camera object")};c.static_set_look_at=function(a,c,h){b.is_static_camera(a)?(c=c||r.j(a.ka.na,L),h?b.eI(a,c,h):R.set_translation(a,c),R.Ea(a),ka.sync_transform(a)):u.error("static_set_look_at(): Wrong camera object or camera move style")};
c.static_set_rotation=function(a,c){b.is_static_camera(a)?(R.set_rotation(a,c),R.Ea(a),ka.sync_transform(a)):u.error("static_set_rotation(): Wrong camera object or camera move style")};c.static_get_rotation=function(a,c){if(!b.is_static_camera(a))return u.error("static_get_rotation(): Wrong camera object or camera move style"),null;c=c||new Float32Array(4);return R.get_rotation(a,c)};c.eye_setup=function(a,c){if(G.is_camera(a))if(c&&c.horiz_rot_lim&&("number"!=typeof c.horiz_rot_lim.left||"number"!=
typeof c.horiz_rot_lim.right))u.error("eye_setup(): Wrong horizontal limits object.");else if(c&&c.vert_rot_lim&&("number"!=typeof c.vert_rot_lim.down||"number"!=typeof c.vert_rot_lim.up))u.error("eye_setup(): Wrong vertical limits object.");else{b.Dt(a);a.ka.cc=b.MS_EYE_CONTROLS;if(c){var h=c.pos||r.j(a.ka.na,L);b.lI(a,h,c.look_at,c.horiz_rot_lim,c.vert_rot_lim)}R.Ea(a);ka.sync_transform(a);b.So(a)}else u.error("eye_setup(): Wrong camera object")};c.eye_set_look_at=function(a,c,h){b.is_eye_camera(a)?
(c=c||r.j(a.ka.na,L),h?b.yT(a,c,h):R.set_translation(a,c),b.correct_up(a,a.ka.od,!0),R.Ea(a),ka.sync_transform(a)):u.error("eye_set_look_at(): Wrong camera object or camera move style")};c.eye_rotate=function(a,h,k,d){u.ef("eye_rotate","rotate_camera");b.is_eye_camera(a)?c.rotate_camera(a,h,k,d||!1):u.error("eye_rotate(): Wrong camera object or camera move style")};c.eye_set_vertical_limits=function(a,c){b.is_eye_camera(a)?!c||"number"==typeof c.down&&"number"==typeof c.up?(b.gx(a,c),R.Ea(a),ka.sync_transform(a)):
u.error("eye_set_vertical_limits(): Incorrect limits object."):u.error("eye_set_vertical_limits(): Wrong camera object or camera move style")};c.eye_get_vertical_limits=function(a,c,h){if(!b.is_eye_camera(a))return u.error("eye_get_vertical_limits(): Wrong camera object or camera move style"),null;a=a.ka;return a.Hb?(c=c||{},h?(c.down=a.Hb.Ao,c.up=a.Hb.Yp):(c.down=a.Hb.down,c.up=a.Hb.up),c.camera_space=h||!1,c):null};c.eye_set_horizontal_limits=function(a,c){b.is_eye_camera(a)?!c||"number"==typeof c.left&&
"number"==typeof c.right?(b.fx(a,c),R.Ea(a),ka.sync_transform(a)):u.error("eye_set_horizontal_limits(): Incorrect limits object."):u.error("eye_set_horizontal_limits(): Wrong camera object or camera move style")};c.eye_get_horizontal_limits=function(a,c,h){if(!b.is_eye_camera(a))return u.error("eye_get_horizontal_limits(): Wrong camera object or camera move style"),null;a=a.ka;return a.zc?(c=c||{},h?(c.left=a.zc.$o,c.right=a.zc.zp):(c.left=a.zc.left,c.right=a.zc.right),c.camera_space=h||!1,c):null};
c.target_setup=function(a,c){if(G.is_camera(a))if(!c.horiz_rot_lim||"number"==typeof c.horiz_rot_lim.left&&"number"==typeof c.horiz_rot_lim.right)if(!c.vert_rot_lim||"number"==typeof c.vert_rot_lim.down&&"number"==typeof c.vert_rot_lim.up){if(c.dist_lim){if("number"!=typeof c.dist_lim.min||"number"!=typeof c.dist_lim.max||c.dist_lim.min>c.dist_lim.max){u.error("target_setup(): Wrong distance limits object");return}c.dist_lim.min=Math.max(c.dist_lim.min,0);c.dist_lim.max=Math.max(c.dist_lim.max,0)}if(c.us&&
("number"!=typeof c.us.min_y||"number"!=typeof c.us.max_y||c.us.min_y>c.us.max_y))u.error("target_setup(): Wrong pivot limits object");else{b.Dt(a);a.ka.cc=b.MS_TARGET_CONTROLS;var h=c.pos||r.j(a.ka.na,L),k=c.pivot;k||(k=f(a,B),k=z.add(h,k,k));b.nI(a,h,k,c.horiz_rot_lim,c.vert_rot_lim,c.dist_lim,c.us,c.use_panning||!1);R.Ea(a);ka.sync_transform(a);b.So(a)}}else u.error("target_setup(): Wrong vertical limits object");else u.error("target_setup(): Wrong horizontal limits object");else u.error("target_setup(): Wrong camera object")};
c.target_rotate=function(a,h,k,d){u.ef("target_rotate","rotate_camera");b.is_target_camera(a)?c.rotate_camera(a,h,k,d||!1):u.error("target_rotate(): Wrong camera object or camera move style")};c.target_set_trans_pivot=function(a,c,h){b.is_target_camera(a)?(c=c||r.j(a.ka.na,L),h=h||a.ka.pivot,b.VB(a,c,h),R.Ea(a),ka.sync_transform(a)):u.error("target_set_trans_pivot(): Wrong camera object or camera move style")};c.target_set_pivot_translation=function(a,c){b.is_target_camera(a)?(b.HT(a,c),R.Ea(a),ka.sync_transform(a)):
u.error("target_set_pivot_translation(): Wrong camera object or camera move style")};c.target_set_distance=function(a,c){if(b.is_target_camera(a)){var h=R.ns(a,a.ka.pivot);R.move_local(a,0,0,Math.max(0,c)-h);R.Ea(a);ka.sync_transform(a)}else u.error("target_set_distance(): Wrong camera object or camera move style")};c.target_get_distance=function(a){return b.is_target_camera(a)?R.ns(a,a.ka.pivot):(u.error("target_get_distance(): Wrong camera object or camera move style"),0)};c.target_zoom_object=
function(a,c){if(b.is_target_camera(a)){var h=R.get_object_center(c,!1,L);c=R.get_object_size(c);var k=E.get_active();k=G.kb(a,k).Qa[0];k=b.OP(k)/2;c/=Math.sin(k);k=R.ns(a,h);b.VB(a,r.j(a.ka.na,B),h);R.Ea(a);R.move_local(a,0,0,c-k);R.Ea(a);ka.sync_transform(a)}else u.error("target_zoom_object(): Wrong camera object or camera move style")};c.target_get_pivot=function(a,c){if(!b.is_target_camera(a))return u.error("target_get_pivot(): Wrong camera object or camera move style"),null;c=c||new Float32Array(3);
z.copy(a.ka.pivot,c);return c};c.target_set_distance_limits=function(a,c){if(b.is_target_camera(a)){if(c){if("number"!=typeof c.min||"number"!=typeof c.max||c.min>c.max){u.error("target_set_distance_limits(): Wrong limits object");return}c.min=Math.max(c.min,0);c.max=Math.max(c.max,0)}b.VH(a,c);R.Ea(a);ka.sync_transform(a)}else u.error("target_set_distance_limits(): Wrong camera object or camera move style")};c.target_get_distance_limits=function(a,c){if(!b.is_target_camera(a))return u.error("target_get_distance_limits(): Wrong camera object or camera move style"),
null;a=a.ka;return a.rc?(c=c||{},c.min=a.rc.min,c.max=a.rc.max,c):null};c.target_set_vertical_limits=function(a,c){b.is_target_camera(a)?!c||"number"==typeof c.down&&"number"==typeof c.up?(b.gx(a,c),R.Ea(a),ka.sync_transform(a)):u.error("target_set_vertical_limits(): Wrong limits object"):u.error("target_set_vertical_limits(): Wrong camera object or camera move style")};c.target_get_vertical_limits=function(a,c,h){if(!b.is_target_camera(a))return u.error("target_get_vertical_limits(): Wrong camera object or camera move style"),
null;a=a.ka;return a.Hb?(c=c||{},h?(c.down=a.Hb.Ao,c.up=a.Hb.Yp):(c.down=a.Hb.down,c.up=a.Hb.up),c.camera_space=h||!1,c):null};c.target_set_horizontal_limits=function(a,c){b.is_target_camera(a)?!c||"number"==typeof c.left&&"number"==typeof c.right?(b.fx(a,c),R.Ea(a),ka.sync_transform(a)):u.error("target_set_horizontal_limits(): Wrong limits object"):u.error("target_set_horizontal_limits(): Wrong camera object or camera move style")};c.target_get_horizontal_limits=function(a,c,h){if(!b.is_target_camera(a))return u.error("target_get_horizontal_limits(): Wrong camera object or camera move style"),
null;a=a.ka;return a.zc?(c=c||{},h?(c.left=a.zc.$o,c.right=a.zc.zp):(c.left=a.zc.left,c.right=a.zc.right),c.camera_space=h||!1,c):null};c.target_set_pivot_limits=function(a,c){b.is_target_camera(a)?c&&("number"!=typeof c.min_z||"number"!=typeof c.max_z||c.min_z>c.max_z)?u.error("target_set_pivot_limits(): Wrong limits object"):(b.gI(a,c),R.Ea(a),ka.sync_transform(a)):u.error("target_set_pivot_limits(): Wrong camera object or camera move style")};c.target_get_pivot_limits=function(a,c){if(!b.is_target_camera(a))return u.error("target_get_pivot_limits(): Wrong camera object or camera move style"),
null;a=a.ka;return a.Oe?(c=c||{},c.min_z=a.Oe.min_z,c.max_z=a.Oe.max_z,c):null};c.target_pan_pivot=function(a,c,h){if(b.is_target_camera(a)){var k=a.ka;k.use_panning&&(L[0]=c,L[1]=-h,L[2]=0,r.y(L,k.na,L),z.add(k.pivot,L,k.pivot),c=r.j(k.na,B),z.add(c,L,c),r.v(c,k.na),R.Ea(a),ka.sync_transform(a))}else u.error("target_pan_pivot(): wrong object")};c.target_switch_panning=function(a,c){if(!b.is_target_camera(a))return u.error("target_switch_panning(): Wrong camera object or camera move style"),null;
a.ka.use_panning=c};c.hover_setup_rel=function(a,h){c.hover_setup(a,{pos:h.pos,pivot:h.pivot});var k="undefined"==typeof h.dist_interval?0:Math.max(h.dist_interval,0),d="undefined"==typeof h.angle_interval?0:Math.max(h.angle_interval,0);h="undefined"==typeof h.t?.5:p.M(h.t,0,1);var f=c.hover_get_distance_limits(a,K);f.min=Math.max(f.min-h*k,0);f.max+=(1-h)*k;k=c.hover_get_vertical_limits(a,w);k.down=p.M(k.down+h*d,-Math.PI/2,0);k.up=p.M(k.up-(1-h)*d,-Math.PI/2,0);b.hover_set_distance_limits(a,f);
b.hover_set_vertical_limits(a,k);R.Ea(a);ka.sync_transform(a);b.So(a)};c.hover_setup=function(a,c){if(G.is_camera(a)){if(c.dist_lim){if("number"!=typeof c.dist_lim.min||"number"!=typeof c.dist_lim.max||c.dist_lim.min>c.dist_lim.max){u.error("hover_setup(): Wrong distance limits object");return}c.dist_lim.min=Math.max(c.dist_lim.min,0);c.dist_lim.max=Math.max(c.dist_lim.max,0)}if(c.hover_angle_lim&&("number"!=typeof c.hover_angle_lim.down||"number"!=typeof c.hover_angle_lim.up||c.hover_angle_lim.down<
c.hover_angle_lim.up))u.error("hover_setup(): Wrong hover angle limits object");else if(c.horiz_trans_lim&&("number"!=typeof c.horiz_trans_lim.min||"number"!=typeof c.horiz_trans_lim.max||c.horiz_trans_lim.min>c.horiz_trans_lim.max))u.error("hover_setup(): Wrong horizontal translation limits object");else if(c.vert_trans_lim&&("number"!=typeof c.vert_trans_lim.min||"number"!=typeof c.vert_trans_lim.max||c.vert_trans_lim.min>c.vert_trans_lim.max))u.error("hover_setup(): Wrong vertical translation limits object");
else{b.Dt(a);a.ka.cc=b.MS_HOVER_CONTROLS;var h=c.pos||r.j(a.ka.na,L);b.mI(a,h,c.pivot,c.dist_lim,c.hover_angle_lim,c.horiz_trans_lim,c.vert_trans_lim,c.enable_horiz_rot||!1);R.Ea(a);ka.sync_transform(a);b.So(a)}}else u.error("hover_setup(): Wrong camera object")};c.hover_rotate=function(a,h,k,d){u.ef("hover_rotate","rotate_camera");b.is_hover_camera(a)?c.rotate_camera(a,h,k,d||!1):u.error("hover_rotate(): Wrong camera object or camera move style")};c.hover_set_pivot_translation=function(a,c){b.is_hover_camera(a)?
(b.dI(a,c),R.Ea(a),ka.sync_transform(a)):u.error("hover_set_pivot_translation(): Wrong camera object or camera move style")};c.hover_get_pivot=function(a,c){if(!b.is_hover_camera(a))return u.error("hover_get_pivot(): Wrong camera object or camera move style"),null;c=c||new Float32Array(3);z.copy(a.ka.$c,c);return c};c.hover_get_distance=function(a){return b.is_hover_camera(a)?R.ns(a,a.ka.$c):(u.error("hover_get_distance(): Wrong camera object or camera move style"),0)};c.hover_set_vertical_limits=
function(a,c){b.is_hover_camera(a)?"number"!=typeof c.down||"number"!=typeof c.up||c.down<c.up?u.error("hover_set_vertical_limits(): Wrong limits object"):(b.hover_set_vertical_limits(a,c),R.Ea(a),ka.sync_transform(a)):u.error("hover_set_vertical_limits(): Wrong camera object or camera move style")};c.hover_get_vertical_limits=function(a,c){if(!b.is_hover_camera(a))return u.error("hover_get_vertical_limits(): Wrong camera object or camera move style"),null;a=a.ka;c=c||{};c.down=a.Hb.down;c.up=a.Hb.up;
return c};c.hover_set_distance_limits=function(a,c){b.is_hover_camera(a)?"number"!=typeof c.min||"number"!=typeof c.max||c.min>c.max?u.error("hover_set_distance_limits(): Wrong limits object"):(c.min=Math.max(c.min,0),c.max=Math.max(c.max,0),b.hover_set_distance_limits(a,c),R.Ea(a),ka.sync_transform(a)):u.error("hover_set_distance_limits(): Wrong camera object or camera move style")};c.hover_get_distance_limits=function(a,c){if(!b.is_hover_camera(a))return u.error("hover_get_distance_limits(): Wrong camera object or camera move style"),
null;a=a.ka;c=c||{};c.min=a.rc.min;c.max=a.rc.max;return c};c.hover_set_vert_trans_limits=function(a,c){b.is_hover_camera(a)?c&&("number"!=typeof c.min||"number"!=typeof c.max||c.min>c.max)?u.error("hover_set_vert_trans_limits(): Wrong limits object"):(b.jI(a,c),R.Ea(a),ka.sync_transform(a)):u.error("hover_set_vert_trans_limits(): Wrong camera object or camera move style")};c.hover_get_vert_trans_limits=function(a,c){if(!b.is_hover_camera(a))return u.error("hover_get_vert_trans_limits(): Wrong camera object or camera move style"),
null;a=a.ka;return a.me?(c=c||{},c.min=a.me.min,c.max=a.me.max,c):null};c.hover_set_horiz_trans_limits=function(a,c){b.is_hover_camera(a)?c&&("number"!=typeof c.min||"number"!=typeof c.max||c.min>c.max)?u.error("hover_set_horiz_trans_limits(): Wrong limits object"):(b.cI(a,c),R.Ea(a),ka.sync_transform(a)):u.error("hover_set_horiz_trans_limits(): Wrong camera object or camera move style")};c.hover_get_horiz_trans_limits=function(a,c){if(!b.is_hover_camera(a))return u.error("hover_get_horiz_trans_limits(): Wrong camera object or camera move style"),
null;a=a.ka;return a.le?(c=c||{},c.min=a.le.min,c.max=a.le.max,c):null};c.hover_switch_horiz_rotation=function(a,c){if(!b.is_hover_camera(a))return u.error("hover_switch_horiz_rotation(): Wrong camera object or camera move style"),null;a.ka.Xi=c};c.is_static_camera=b.is_static_camera;c.is_target_camera=b.is_target_camera;c.is_eye_camera=b.is_eye_camera;c.is_hover_camera=b.is_hover_camera;c.get_move_style=function(a){return G.is_camera(a)?b.get_move_style(a):(u.error("get_move_style(): Wrong camera object"),
null)};c.set_translation=function(a,c){if(G.is_camera(a)){var h=a.ka;if(b.is_target_camera(a)){var k=r.j(h.na,L);k=z.subtract(c,k,L);z.add(k,h.pivot,h.pivot)}else b.is_hover_camera(a)&&(k=r.j(h.na,L),k=z.subtract(c,k,L),z.add(k,h.$c,h.$c));R.set_translation(a,c);R.Ea(a);ka.sync_transform(a)}else u.error("set_translation(): Wrong camera object")};c.get_translation=function(a,b){if(!G.is_camera(a))return u.error("get_translation(): Wrong camera object"),null;b=b||new Float32Array(3);return R.get_translation(a,
b)};c.rotate_camera=function(a,c,h,k){G.is_camera(a)?(k?b.ET(a,c,h):b.XS(a,c,h),R.Ea(a),ka.sync_transform(a)):u.error("rotate_camera(): Wrong camera object")};c.set_velocities=function(a,b){G.is_camera(a)?(a=a.ka,"number"==typeof b.trans&&(a.kq=p.M(b.trans,0,Infinity)),"number"==typeof b.rot&&(a.jq=p.M(b.rot,0,Infinity)),"number"==typeof b.zoom&&(a.lq=p.M(b.zoom,0,.99))):u.error("set_velocities(): Wrong camera object")};c.get_velocities=function(a,b){if(!G.is_camera(a))return u.error("get_velocities(): Wrong camera object"),
null;a=a.ka;b=b||{};b.trans=a.kq;b.rot=a.jq;b.zoom=a.lq;return b};c.is_look_up=function(a){if(!G.is_camera(a))return u.error("is_look_up(): Wrong camera object"),!1;a=r.g(a.ka.na,Y);return 0<=p._34(a,p.c,L)[1]};c.get_camera_angles=function(a,c){if(!G.is_camera(a))return u.error("get_camera_angles(): Wrong camera object"),null;c=c||new Float32Array(2);b.get_camera_angles(a,c);return c};c.get_camera_angles_char=function(a,c){if(!G.is_camera(a))return u.error("get_camera_angles_char(): Wrong camera object"),
null;c=c||new Float32Array(2);b.get_camera_angles_char(a,c);return c};c.get_camera_angles_dir=function(a,c){c=c||new Float32Array(2);a=z.normalize(a,L);a=p._48(p.c,a,Y);p.R(a,!0);b.aA(a,p.f,c);return c};c.set_stereo_distance=function(a,c){if(G.is_camera(a)){var h=E.get_active();a=G.kb(a,h).Qa;for(h=0;h<a.length;h++){var k=a[h];k.type!=b.fd&&k.type!=b.rd&&k.type!=b.Vf&&k.type!=b.Af||b.GT(k,c,k.tg)}}else u.error("set_stereo_distance(): Wrong camera object")};c.get_stereo_distance=function(a){if(!G.is_camera(a))return u.error("get_stereo_distance(): Wrong camera object"),
0;var c=E.get_active();a=G.kb(a,c).Qa;for(c=0;c<a.length;c++){var h=a[c];if(h.type==b.fd||h.type==b.rd)return h.Ul}return 0};c.set_eye_distance=function(a,c){if(G.is_camera(a)){var h=E.get_active();a=G.kb(a,h).Qa;b.set_eye_distance(a,c)}else u.error("set_eye_distance(): Wrong camera object")};c.get_eye_distance=function(a){if(!G.is_camera(a))return u.error("get_eye_distance(): Wrong camera object"),0;var c=E.get_active();a=G.kb(a,c).Qa;for(c=0;c<a.length;c++){var h=a[c];if(h.type==b.fd||h.type==b.rd||
h.type==b.Vf||h.type==b.Af)return h.tg}return 0};c.set_vertical_axis=function(a,b){G.is_camera(a)?(z.copy(b,a.ka.od),R.Ea(a),ka.sync_transform(a)):u.error("set_vertical_axis(): Wrong camera object")};c.get_vertical_axis=function(a,b){if(G.is_camera(a))return b||(b=z.create()),z.copy(a.ka.od,b),b;u.error("get_vertical_axis(): Wrong camera object")};c.translate_view=function(a,c,h){if(G.is_camera(a)){var k=E.get_active();a=G.kb(a,k).Qa;for(k=0;k<a.length;k++){var d=a[k];z.set(-c,-h,0,d.Bt.trans);d.ad?
b.hI(d,!1):b.set_projection(d,!1)}}else u.error("translate_view(): Wrong camera object")};c.get_view_vector=f;c.get_fov=function(a){if(!G.is_camera(a))return u.error("get_fov(): Wrong camera object"),0;var c=E.get_active();a=G.kb(a,c).Qa;return b.get_fov(a[0])};c.set_fov=function(a,c){if(G.is_camera(a)){var h=E.get_active();a=G.kb(a,h).Qa;for(h=0;h<a.length;h++){var k=a[h];b.set_fov(k,c);k.ad?b.hI(k,!1):b.set_projection(k,!1)}}else u.error("set_fov(): Wrong camera object")};c.set_hmd_fov=function(){u.Ma("set_hmd_fov() deprecated")};
c.correct_up=function(a,c,h){G.is_camera(a)?(c=c||a.ka.od,b.correct_up(a,c,h||!1),R.Ea(a),ka.sync_transform(a)):u.error("correct_up(): Wrong camera object")};c.set_ortho_scale=function(a,c){if(G.is_camera(a)&&b.is_ortho_camera(a)){var h=a.ka;if(b.is_target_camera(a)){var k=r.j(h.na,L);k=z.dist(k,h.pivot);h.ql=c/2*h.pl/k}else b.is_hover_camera(a)?(k=r.j(h.na,L),k=z.distance(k,h.$c),h.ql=c/2*h.pl/k):(h=E.get_active(),G.kb(a,h).Qa[0].Rc=c/2);b.ZU(a)}else u.error("set_ortho_scale(): Wrong camera object")};
c.get_ortho_scale=function(a){if(!G.is_camera(a)||!b.is_ortho_camera(a))return u.error("get_ortho_scale(): Wrong camera object"),0;var c=E.get_active();return 2*G.kb(a,c).Qa[0].Rc};c.is_ortho_camera=function(a){return G.is_camera(a)?b.is_ortho_camera(a):(u.error("is_ortho_camera(): Wrong camera object"),!1)};c.calc_ray=function(a,c,k,d){if(!G.is_camera(a))return u.error("calc_ray(): Wrong camera object"),null;var f=E.get_active(),l=G.kb(a,f).Qa[0];d&&3==d.length?u.Ma('dest parameter in the function "calc_ray" should be type of parametric line.'):
d=d||new Float32Array(6);switch(l.type){case b.qd:case b.Wf:case b.fd:case b.rd:var q=Math.tan(b.BQ(l)/2),m=q*l.Wb;f=L;c=h.Wq(c,k,O,l);f[0]=(2*c[0]/l.width-1)*m;f[1]=(1-2*c[1]/l.height)*q;f[2]=-1;r.y(f,a.ka.na,f);z.normalize(f,f);3==d.length?z.copy(f,d):(a=R.get_translation(a,B),n.R(d,a),n.Q(d,f));return d;case b.Xe:return f=L,c=h.Wq(c,k,O,l),f[0]=(2*c[0]/l.width-1)*l.top*l.Wb,f[1]=(1-2*c[1]/l.height)*l.top,f[2]=0,r.D(f,a.ka.na,f),z.copy(f,d),a=r.g(a.ka.na,Y),z.transformQuat(p.c,a,f),n.Q(d,f),d;default:return u.error("calc_ray(): Non-compatible camera"),
d}};c.project_point=function(a,c,h){if(!G.is_camera(a))return u.error("project_point(): Wrong camera object"),null;h=h||new Float32Array(2);return b.project_point(a,c,h)};c.has_distance_limits=function(a){return(b.is_target_camera(a)||b.is_hover_camera(a))&&null!==a.ka.rc};c.has_vertical_rot_limits=function(a){return(b.is_eye_camera(a)||b.is_target_camera(a)||b.is_hover_camera(a))&&null!==a.ka.Hb};c.has_horizontal_rot_limits=function(a){return(b.is_target_camera(a)||b.is_eye_camera(a))&&null!==a.ka.zc};
c.has_vertical_trans_limits=function(a){return b.is_hover_camera(a)&&null!==a.ka.me};c.has_horizontal_trans_limits=function(a){return b.is_hover_camera(a)&&null!==a.ka.le};c.get_frustum_planes=function(b,c){if(!G.is_camera(b))return u.error("get_frustum_planes(): Wrong camera object"),null;var h=E.get_active();b=G.kb(b,h).Qa[0].Um;a.copy(b.left,c.left);a.copy(b.right,c.right);a.copy(b.top,c.top);a.copy(b.bottom,c.bottom);a.copy(b.near,c.near);a.copy(b.far,c.far);return c};c.set_projection=function(a,
c){G.is_camera(a)?b.BT(a,c):u.error("set_projection(): Wrong camera object")}});w.a=f},function(D,w,f){D=f(0);var N=f(32),U=f(5),n=f(44),y=f(4),d=f(37);f(90);var m=f(91),C=f(1),v=f(2),r=f(48),p={qS:{parse:function(){}}};"DEBUG"==d.d()&&(p=m);f=Object(D.a)("__shaders",function(d,a){function f(){return{yg:"",ff:"",ei:[],Mf:[],status:0,cu:0,Sx:0}}function k(a){var b=f();b.yg=a.yg;b.ff=a.ff;b.ei=v.O(a.ei);b.Mf=v.O(a.Mf);b.status=a.status;b.cu=a.cu;b.Sx=a.Sx;return b}function c(a,b,c){var e=a.ei;"string"==
typeof c?(a=l(a,c))&&(c=a[1]):c=String(c);for(a=0;a<e.length;a++)if(e[a][0]==b){e[a][1]=c;break}}function l(a,b){a=a.ei;for(var c=0;c<a.length;c++)if(a[c][0]==b)return a[c];return!1}function b(a,b){var c=a+b;if(!(c in ca)){a=w(ta.shaders_path,a);var e=w(ta.shaders_path,b);b=V(a);a=V(e);for(var h in a)b[h]=a[h];a=[];for(h in b)a.push([h,b[h]]);ca[c]=a}return ca[c]}function h(a,b,c){ja.gl_debug&&(c=z(c),ma.error("shader compilation failed:\n"+c+"\n"+ra.getShaderInfoLog(a)+" ("+b+")"))}function z(a){a=
a.split("\n");for(var b=0;b<a.length;b++)a[b]=b+1+" "+a[b];return a=a.join("\n")}function ka(a,b){return a+b}function u(a,b){return(a.split(";").map(function(a){return(a=a.match(b))&&(a[3]?parseInt(a[3],10):1)}).filter(function(a){return a})||[]).reduce(ka,0)}function E(a,b){var c=K(a.type),e=K(b.type);a=a.xm;b=b.xm;return c>e?-1:c<e?1:a>b?-1:a<b?1:0}function R(a){if(ja.Ib){a=a.replace(/(.*?)\([^()]*?\)(.*?)/g,"$1$2");var b=Na}else b=wa;a=a.split(";").map(function(a){return(a=a.match(b))&&{type:a[2],
xm:a[4]?parseInt(a[4],10):1}}).filter(function(a){return a});return L(a,Ha,pa.pw)}function O(a,b,c){a=a.split(";");for(var e=[],h=0;h<a.length;h++){var k=a[h].match(S);k&&e.push({type:k[2],xm:k[4]?parseInt(k[4],10):1})}return L(e,b,c)}function L(a,b,c){function e(){for(var c=0;l<a.length;){var e=a[l];if(3!=K(e.type))break;c+=Y(e.type)*e.xm;l++}g=f+c;if(g>sa)return!1;B(b,f,c,0,3);return!0}function h(){for(var c=sa-g,e=c,h=c;l<a.length;){var k=a[l];if(2!=K(k.type))break;k=Y(k.type)*k.xm;if(k<=e)e-=
k;else if(k<=h)h-=k;else return!1;l++}h=c-h;B(b,g,c-e,0,2);B(b,sa-h,h,2,2);return!0}function k(){for(;l<a.length;){var g=a[l];g=Y(g.type)*g.xm;for(var e=-1,h=c+1,k=-1,d=0;4>d;d++){var f=Ga;f[0]=0;f[1]=1;var q=b;for(var t=d,m=g,u=f;la<q.length&&15===q[la];)la++;for(;0<sa&&15===q[sa];)sa--;if(sa-la<m)q=!1;else{t=1<<t;for(var r=0,n=-1,A=q.length+1,p=!1,v=la;v<=sa;v++)v<sa&&!(q[v]&t)?p||(r=v,p=!0):(p&&(p=v-r,p>=m&&p<A&&(A=p,n=r)),p=!1);0>n?q=!1:(u[0]=n,u[1]=A,q=!0)}q&&f[1]<h&&(k=f[0],h=f[1],e=d)}if(0>
e)return!1;B(b,k,g,e,1);l++}return!0}if(!a.length)return!0;for(var d=0;d<c;d++)b[d]=0;sa=c;a.sort(E);var g=0,f=0,l=0;return function(){for(;l<a.length;){var g=a[l];if(4!=K(g.type))break;f+=Y(g.type)*g.xm;l++}if(f>sa)return!1;la=f;B(b,0,f,0,4);return!0}()&&e()&&h()&&k()}function B(a,b,c,e,h){for(var k=0,d=0;d<h;d++)k|=1<<e+d;for(d=0;d<c;d++)a[b+d]|=k}function Y(a){switch(a){case "mat4":a=4;break;case "mat3":a=3;break;case "mat2":a=2;break;default:a=1}return a}function K(a){switch(a){case "mat4":case "vec4":case "ivec4":case "bvec4":case "mat2":a=
4;break;case "mat3":case "vec3":case "ivec3":case "bvec3":a=3;break;case "vec2":case "ivec2":case "bvec2":a=2;break;default:a=1}return a}function w(a,b){a+=b;if(M[a])return M[a];if(oa){b=oa[b];if(!b)return null;b=p.qS.parse(b)}else if(b=N.a.require("shader_texts")[b],!b)return null;return M[a]=b}function T(a,b){for(var c={},e=b.ei||[],h=0;h<e.length;h++)c[e[h][0]]=[e[h][1]];for(h=0;h<b.Mf.length;h++)c["USE_NODE_"+b.Mf[h].id]=["1"];ja.Ib?(c.GLSL1=["0"],c.GLSL3=["1"],c.GLSL_VERSION=["300 es"],c.GLSL_IN=
["in"],c.GLSL_OUT=["out"],c.GLSL_OUT_FRAG_COLOR=["glsl_out_frag_color"],c.GLSL_TEXTURE=["texture"],c.GLSL_TEXTURE_CUBE=["texture"],c.GLSL_TEXTURE_PROJ=["textureProj"],c.GLSL_TEXTURE_LOD=["textureLod"],c.GLSL_TEXTURE_CUBE_LOD=["textureLod"]):(c.GLSL1=["1"],c.GLSL3=["0"],c.GLSL_VERSION=["100"],c.GLSL_IN="vert"==a?["attribute"]:["varying"],c.GLSL_OUT="vert"==a?["varying"]:[""],c.GLSL_OUT_FRAG_COLOR=["gl_FragColor"],c.GLSL_TEXTURE=["texture2D"],c.GLSL_TEXTURE_CUBE=["textureCube"],c.GLSL_TEXTURE_PROJ=
["texture2DProj"],c.GLSL_TEXTURE_LOD=["textureLod"],ja.Tx?(c.GLSL_TEXTURE_LOD=["texture2DLodEXT"],c.GLSL_TEXTURE_CUBE_LOD=["textureCubeLodEXT"]):(c.GLSL_TEXTURE_LOD=["texture2D"],c.GLSL_TEXTURE_CUBE_LOD=["textureCube"]));c.GLSL_SMPLR2D_SHDW=ja.er&&!ja.Ks?["sampler2DShadow"]:["sampler2D"];for(var k in c)c[k][0].constructor!=String&&ma.warn("Warning! The value of a directive '"+k+"' is not of type string.");return c}function V(a){function b(a){"var"==a.$?e[a.ba]=a.aa.join(""):"include"==a.$&&(a=w(ta.shaders_path,
ta.qI+a.oa),c(a,b))}function c(a,b,e){if(a instanceof Array)for(var g=0;g<a.length;g++)c(a[g],b,e);else if(a instanceof Object&&a){b&&b(a);for(g in a)c(a[g],b,e);e&&e(a)}}var e={};c(a,b);return e}function A(a,b,c){function e(b){b=b.da;for(var c=0;c<b.length;c++){var l=b[c];switch(l.$){case "cond":a:{l=l.da;for(var n=0;n<l.length;n++){var v=l[n];switch(v.$){case "if":case "elif":if(h(v.ga)){e(v.ha);break a}break;case "else":e(v.ha);break a;case "ifdef":v.ba in m&&e(v.ha);break;case "ifndef":v.ba in
m||e(v.ha)}}}break;case "include":l=l.oa;n=w(ta.shaders_path,ta.qI+l);r.push("include/"+l);e(n);r.pop();break;case "var":break;case "define":m[l.ba]=l.aa;break;case "error":I.va("Shader error: #error "+l.aa.join(" "));break;case "line":break;case "pragma":t.push("#pragma "+l.ba+" "+l.aa.join(" "));break;case "undef":delete m[l.ba];break;case "warning":ma.warn("Shader warning: #warning "+l.aa.join(" "));break;case "extension":l=f(l.aa,m,u,!1);t.push("#extension "+l.join(" "));break;case "version":l=
f(l.aa,m,u,!1),t.push("#version "+l.join(" "));case "#":break;case "node":A[l.ba]=l;break;case "nodes_global":l=q;for(n=0;n<l.length;n++){v=l[n];var B=A[v.id];if(B)for(var E=0,P=0;P<B.la.length;P++){var C=B.la[P];if("node_param"==C.$){if("PARTICLE_INFO"==v.id&&C.ea)if(1==m.PARTICLE_BATCH){var y=!1;switch(E){case 0:y=da(v.Jb,"PART_INFO_IND")||da(v.Jb,"PART_INFO_AGE")||da(v.Jb,"PART_INFO_LT")||da(v.Jb,"PART_INFO_SIZE");break;case 1:y=da(v.Jb,"PART_INFO_LOC");break;case 2:y=da(v.Jb,"PART_INFO_VEL");
break;case 3:y=da(v.Jb,"PART_INFO_A_VEL");break;case 4:y=da(v.Jb,"PART_INFO_IND")}}else y=!1;else y=!0;y&&(C=C.fa.join(" ")+" ","vert"==a?C+=v.xf[E]:"frag"==a&&(C+=v.Oa[E],null!==v.qp[E]&&(C+="="+v.qp[E])),C+=";",g(d(C)));E++}}}break;case "nodes_main":l=q;for(n=0;n<l.length;n++)if(v=l[n],B=A[v.id]){E={};Q=G=z=0;P=B;C=v;y=P;for(var J={},aa=0;aa<y.ma.length;aa++){var F=y.ma[aa];J[F.ba]=[F.aa.join("")]}y=J;for(J=0;J<C.Jb.length;J++)aa=C.Jb[J][0],aa in y&&(y[aa]=[C.Jb[J][1]]);for(J=aa=0;J<P.la.length;J++)F=
P.la[J],"node_out"==F.$&&(y["USE_OUT_"+F.ba]=[-1<p.indexOf(C.outputs[aa])|0],aa++);P=y;C=v;y=B.la;J=E;aa=P;for(F=0;F<y.length;F++){var T=y[F];switch(T.$){case "node_in":var O=C.inputs[z];if(null!==C.BA[z]){if(("MATERIAL_BEGIN"==C.id&&3===z||!aa.MATERIAL_EXT&&("MATERIAL_BEGIN"==C.id&&4===z||"MATERIAL_END"==C.id&&3===z||"MATERIAL_END"==C.id&&4===z||"MATERIAL_END"==C.id&&5===z)||"TEXTURE_COLOR"==C.id||"TEXTURE_NORMAL"==C.id)&&T.ea){J[T.ba]=C.BA[z];z++;continue}var ja=T.fa.join(" ")+" ";ja+=O+"="+C.BA[z]+
";";g(d(ja))}J[T.ba]=O;z++;break;case "node_out":O=C.outputs[G];if(!T.ea||-1<p.indexOf(O))ja=T.fa.join(" ")+" ",ja+=O+";",g(d(ja)),J[T.ba]=O;G++;break;case "node_param":"vert"==a?O=C.xf[Q]:"frag"==a&&(O=C.Oa[Q]),J[T.ba]=O,Q++}}t.push("{");k(v,B.ja,E,P);t.push("}")}break;case "txt":g(l.aa);break;default:I.va("Unknown element type: "+l.$)}}}function h(a,b){a=f(a,m,u,!0,b);b=[];for(var g=0;g<a.length;g++)if(a[g]instanceof Object)switch(a[g].$){case "conditional_expr":var c=b.pop(),e=b.pop();b.pop()?
b.push(e):b.push(c);break;case "logical_or_expr":e=b.pop();for(var h=0;h<a[g].ia-1;h++)c=b.pop(),e=e||c;b.push(e);break;case "logical_and_expr":e=b.pop();for(h=0;h<a[g].ia-1;h++)c=b.pop(),e=e&&c;b.push(e);break;case "logical_bitor_expr":e=b.pop();for(h=0;h<a[g].ia-1;h++)e|=b.pop();b.push(e);break;case "logical_bitxor_expr":e=b.pop();for(h=0;h<a[g].ia-1;h++)e^=b.pop();b.push(e);break;case "logical_bitand_expr":e=b.pop();for(h=0;h<a[g].ia-1;h++)e&=b.pop();b.push(e);break;case "equal_expr":c=b.pop();
e=b.pop();b.push(e==c);break;case "non_equal_expr":c=b.pop();e=b.pop();b.push(e!=c);break;case "le_expr":c=b.pop();e=b.pop();b.push(e<=c);break;case "ge_expr":c=b.pop();e=b.pop();b.push(e>=c);break;case "l_expr":c=b.pop();e=b.pop();b.push(e<c);break;case "g_expr":c=b.pop();e=b.pop();b.push(e>c);break;case "left_shift_expr":e=b.pop();c=b.pop();b.push(e<<c);break;case "right_shift_expr":e=b.pop();c=b.pop();b.push(e>>c);break;case "add_expr":e=b.pop();c=b.pop();b.push(e+c);break;case "sub_expr":e=b.pop();
c=b.pop();b.push(e-c);break;case "mul_expr":e=b.pop();c=b.pop();b.push(e*c);break;case "div_expr":e=b.pop();c=b.pop();b.push(e/c);break;case "mod_expr":e=b.pop();c=b.pop();b.push(e%c);break;case "pre_inc_expr":case "post_inc_expr":c=b.pop();b.push(++c);break;case "pre_dec_expr":case "post_dec_expr":c=b.pop();b.push(--c);break;case "positive_expr":c=b.pop();b.push(+c);break;case "negative_expr":c=b.pop();b.push(-c);break;case "one_compl_expr":c=b.pop();b.push(~c);break;case "logic_negative_expr":c=
b.pop();b.push(!c);break;default:I.va("Unknown operation type: "+a[g].$)}else c=a[g],/^[a-zA-Z_$][a-zA-Z_$0-9]*$/.test(c)?(b.push(0),0!=c.indexOf("USE_NODE_")&&(e=r[r.length-1],e in n||(n[e]=[]),-1==n[e].indexOf(c)&&(n[e].push(c),ma.error("Undefined directive '"+c+"' in shader '"+e+"'. Should it be defined with #var/#node_var or #define?")))):b.push(parseFloat(a[g]));1==b.length?a=b[0]:(I.va("Incorrect expression: "+a.join(" ")),a=void 0);return a}function k(a,b,c,e){for(var d=0;d<b.length;d++){var f=
b[d];switch(f.$){case "node_cond":a:{var l=a;f=f.da;for(var q=c,t=e,u=0;u<f.length;u++){var r=f[u];switch(r.$){case "node_if":case "node_elif":if(h(r.ga,t)){k(l,r.ja,q,t);break a}break;case "node_else":k(l,r.ja,q,t);break a;case "node_ifdef":(r.ba in m||r.ba in t)&&k(l,r.ja,q,t);break;case "node_ifndef":r.ba in m||r.ba in t||k(l,r.ja,q,t)}}}break;case "txt":l=[];for(q=0;q<f.aa.length;q++)t=f.aa[q],t in c?l.push(c[t]):l.push(t);g(l,e)}}}function d(a){return a.match(/([\d]+\.[\d]+|[\w]+|[^\s])/g)}function g(b,
g){ja.Ib||"frag"!=a||(b=b.join(" "),E&&(b.match(/[^;]*;/)?(b=b.replace(/[^;]*;/,""),E=!1):b=""),b=b.replace(/GLSL_OUT [^;]*;/g,""),b.match(/GLSL_OUT(?:$| [^;]*)/)&&(b=b.replace(/GLSL_OUT(?:$| [^;]*)/,""),E=!0),b=b.replace(/ {2,}/g," "),b=(b=b.trim())?b.split(" "):[]);b.length&&(g=f(b,m,u,!1,g),t.push(g.join(" ")))}function f(a,b,g,c,e){var h=[];l(a,b,g,c,h,e);return h}function l(a,b,g,c,e,h){for(var k=0;k<a.length;k++){var d=a[k];if(h&&d in h)d=h[d];else if(d in b)d=b[d];else{e.push(d);continue}0==
d.length&&c?e.push(0):l(d,b,g,c,e,h)}}var q=c.Mf,t=[],m=T(a,c),u={},r=[c[a]],n={},A={},p=[],v;for(v in q)for(var B in q[v].inputs)p.push(q[v].inputs[B]);var E=!1;e(b);var z=0,G=0,Q=0;return t.join("\n")}function aa(a,b,c,e){b=a.createShader(e);a.shaderSource(b,c);a.compileShader(b);return b}function J(a){ra.deleteProgram(a.qj);ra.deleteShader(a.ty);ra.deleteShader(a.iv);delete D[a.QT]}function P(a,b){!b&&a.length?b=a.length:b||(b=1);switch(b){case 1:return q(a);case 2:return"vec2("+q(a[0])+","+q(a[1])+
")";case 3:return"vec3("+q(a[0])+","+q(a[1])+","+q(a[2])+")";case 4:return"vec4("+q(a[0])+","+q(a[1])+","+q(a[2])+","+q(a[3])+")";case 9:return"mat3("+q(a[0])+","+q(a[1])+","+q(a[2])+","+q(a[3])+","+q(a[4])+","+q(a[5])+","+q(a[6])+","+q(a[7])+","+q(a[8])+")";case 16:return"mat4("+q(a[0])+","+q(a[1])+","+q(a[2])+","+q(a[3])+","+q(a[4])+","+q(a[5])+","+q(a[6])+","+q(a[7])+","+q(a[8])+","+q(a[9])+","+q(a[10])+","+q(a[11])+","+q(a[12])+","+q(a[13])+","+q(a[14])+","+q(a[15])+")";default:I.va("Wrong glsl value dimension")}}
function q(a){return a%1?String(a):String(a)+".0"}function da(a,b){for(var c=0;c<a.length;c++)if(a[c][0]==b)return!0;return!1}var I=Object(U.a)(d),t=Object(n.a)(d),e=Object(y.a)(d),ma=Object(C.a)(d),ja=e.wa,pa=e.di,ta=e.Nf,D={},M={},oa=null,ca={},ea="anchors.glslf anchors.glslv color_id.glslf color_id.glslv shadow.glslf shadow.glslv error.glslf error.glslv grass_map.glslf grass_map.glslv halo.glslf halo.glslv irradiance_skybox.glslf line.glslf line.glslv main.glslf main.glslv main_stack.glslf particle_system.glslf particle_system_stack.glslf particle_system.glslv proc_skybox.glslf r_convolution_skybox.glslf skybox.glslv lens_flares.glslf lens_flares.glslv sky.glslf sky.glslv water.glslf water.glslv tex_skybox.glslf debug_view.glslf debug_view.glslv node_skybox.glslf postprocessing/antialiasing.glslf postprocessing/bloom_combine.glslf postprocessing/coc.glslf postprocessing/compositing.glslf postprocessing/depth_pack.glslf postprocessing/dof.glslf postprocessing/glow.glslf postprocessing/god_rays.glslf postprocessing/god_rays.glslv postprocessing/god_rays_combine.glslf postprocessing/luminance.glslf postprocessing/luminance_av.glslf postprocessing/luminance_truncated.glslf postprocessing/motion_blur.glslf postprocessing/outline.glslf postprocessing/performance.glslf postprocessing/postprocessing.glslf postprocessing/postprocessing.glslv postprocessing/smaa.glslf postprocessing/smaa.glslv postprocessing/ssao.glslf postprocessing/ssao_blur.glslf postprocessing/stereo.glslf postprocessing/precompute_brdf.glslf include/blending.glslf include/caustics.glslf include/color_util.glslf include/coverage.glslf include/depth_fetch.glslf include/dynamic_grass.glslv include/environment.glslf include/fog.glslf include/fxaa.glslf include/halo_color.glslf include/lighting_nodes.glslf include/math.glslv include/mirror.glslf include/nodes.glslf include/nodes.glslv include/pack.glslf include/particles.glslv include/particles_nodes.glslf include/particles_nodes.glslv include/precision_statement.glslf include/procedural.glslf include/refraction.glslf include/scale_texcoord.glslv include/shadow.glslf include/shadow.glslv include/skin.glslv include/sky_blending.glslf include/std.glsl include/to_world.glslv include/wind_bending.glslv".split(" ");
a.wD=0;a.RJ=1;a.QJ=2;a.UJ=4;a.TJ=8;a.SJ=16;a.OJ=32;var Da=/(?:^|[^a-zA-Z_])uniform.*?(sampler2D|samplerCube)(?=\s)(.*?\[\s*([0-9]*)\s*\])?/,S=/(?:^|[^a-zA-Z_])(uniform)(?=\s)\s*(float|vec2|vec3|vec4|ivec2|ivec3|ivec4|bvec2|bvec3|bvec4|mat2|mat3|mat4|sampler2D|samplerCube)\s*(.*?\[\s*([0-9]*)\s*\])?/,Na=/(?:^|[^a-zA-Z_])(in)(?=\s)\s*(float|vec2|vec3|vec4|mat2|mat3|mat4)\s*(.*?\[\s*([0-9]*)\s*\])?/,wa=/(?:^|[^a-zA-Z_])(varying)(?=\s)\s*(float|vec2|vec3|vec4|mat2|mat3|mat4)\s*(.*?\[\s*([0-9]*)\s*\])?/,
X=/(?:\W|^)discard(\W|$)/,Ga=new Int16Array(2),Ha=null,ua=null,Ca=null,la=0,sa=0,ia=[],ra=null,Q=!1;a.fh=function(a){ra=a};a.XQ=f;a.uN=k;a.Wa=c;a.eQ=l;a.qT=function(a){a.ei=v.O(b(a.yg,a.ff));c(a,"PRECISION",e.wa.precision);"highp"==e.wa.precision?c(a,"EPSILON",P(1E-6)):c(a,"EPSILON",P(1E-4));c(a,"CONSTANTS_HACK",ja.XB|0);c(a,"SRGB",ja.srgb_type);c(a,"COMPARED_MODE",ja.er|0)};a.GX=function(a){return a.yg};a.zX=function(a){return a.ff};a.XP=function(a){var b=JSON.stringify(a.yg)+JSON.stringify(a.ff)+
JSON.stringify(a.ei)+JSON.stringify(a.Mf),c=D[b];if(c)return c;var e=a.ff,d=w(ta.shaders_path,a.yg);e=w(ta.shaders_path,e);if(!d||!e)return null;d=A("vert",d,a);e=A("frag",e,a);c=0;var f=u(e,Da);a.Sx=f;f>pa.WA&&(c|=1);Ha||(Ha=new Uint32Array(pa.pw));ua||(ua=new Uint32Array(pa.SA));Ca||(Ca=new Uint32Array(pa.qw));O(e,ua,pa.SA)||(c|=2);O(d,Ca,pa.qw)||(c|=4);f=ja.Ib?(d.replace(/(.*?)\([^()]*?\)(.*?)/g,"$1$2").match(/(?:^|[^a-zA-Z_])in(?=\s)/g)||[]).length:(d.match(/(?:^|[^a-zA-Z_])attribute(?=\s)/g)||
[]).length;a.cu=f;f>pa.XA&&(c|=8);R(e)||(c|=16);a.status=c;if(0===a.status){c=ra;var l=aa(c,b,d,c.VERTEX_SHADER,a),g=aa(c,b,e,c.FRAGMENT_SHADER,a);f=c.createProgram();c.attachShader(f,l);c.attachShader(f,g);c.linkProgram(f);l={ty:l,iv:g,qj:f,attributes:{},cm:{},ss:v.S(),vB:v.S(),wB:{},hp:!0,Bw:!1,XI:v.S(),WI:v.S(),Mb:k(a),QT:b,eG:!!e.match(X),rh:!0};var q=c.getProgramParameter(f,c.ACTIVE_ATTRIBUTES);for(g=0;g<q;g++){var t=c.getActiveAttrib(f,g).name;l.attributes[t]=c.getAttribLocation(f,t)}q=c.getProgramParameter(f,
c.ACTIVE_UNIFORMS);for(g=0;g<q;g++)t=c.getActiveUniform(f,g).name.split("[0]").join(""),l.cm[t]=c.getUniformLocation(f,t);D[b]=c=l;f=!ra.getShaderParameter(c.iv,ra.COMPILE_STATUS);l=!ra.getShaderParameter(c.ty,ra.COMPILE_STATUS);g=!ra.getProgramParameter(c.qj,ra.LINK_STATUS);f?h(c.iv,b,e):l?h(c.ty,b,d):g&&(q=c.qj,ja.gl_debug&&(d=z(d),e=z(e),ma.error("shader linking failed:\n"+d+"\n\n\n"+e+"\n"+ra.getProgramInfoLog(q)+" ("+b+")")));if(f||l||g)a.status|=32,c=null}else c=null;return c};a.DR=function(){Q=
!1;if(p==m){for(var a=[],b=t.AT_TEXT,c=0;c<ea.length;c++){var e=Object(r.b)(ta.shaders_path+ea[c]);a.push({id:ea[c],type:b,url:e})}b=function(a,b){oa||(oa={});oa[b]=a};a.length?t.enqueue(a,b,function(){Q=!0}):ma.error("Shaders have not been found.")}else Q=!0};a.uE=function(){return Q};a.hX=function(){return ia};a.RF=function(){return D};a.cleanup=function(){for(var a in D)J(D[a]);for(var b in M)delete M[b];for(var c in ia)delete ia[c];Ca=ua=Ha=null;ca={}};a.oN=J;a.iX=function(a){var b=a.ei;ma.log("Shader: "+
a.yg+" "+a.ff+", "+String(b.length)+" directives: ");for(a=0;a<b.length;a++)ma.log("  "+b[a][0],b[a][1])};a.Ga=P;a.vE=function(a,b){return b in a.cm?!0:!1};a.reset=function(){ra=null}});w.a=f},function(D,w,f){D=f(0);var N=f(4),U=f(45),n=f(28),y=f(1),d=f(22);f=Object(D.a)("__compat",function(f,C){function m(a){return-1<navigator.userAgent.indexOf(a)?!0:!1}function r(){return navigator.userAgent.match(/Windows Phone/i)||navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||
navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)}function p(){return!window.ActiveXObject&&"ActiveXObject"in window}var z=Object(N.a)(f),a=Object(U.a)(f),H=Object(n.a)(f),k=Object(y.a)(f),c=Object(d.a)(f),l="R600;RV610;RV630;RV620;RV635;RV670;RS780;RS880;RV770;RV730;RV710;RV740;CEDAR;REDWOOD;JUNIPER;CYPRESS;PALM (Wrestler/Ontario);SUMO (Llano);SUMO2 (Llano);ARUBA (Trinity/Richland);BARTS;TURKS;CAICOS;CAYMAN".split(";");C.qD=256;var b=
z.Wk,h=z.wa,G=z.Km,ka=z.context,u=z.di,E=z.Ra,R=z.xa,O=z.se;C.UO=function(a){a.getError()==a.INVALID_ENUM&&k.warn("Possible Tegra invalid enum issue detected, ignoring")};C.bI=function(d,f){function n(a){f&&k.warn(a)}u.QR=d.getParameter(d.MAX_COMBINED_TEXTURE_IMAGE_UNITS);u.SA=d.getParameter(d.MAX_FRAGMENT_UNIFORM_VECTORS);u.WA=d.getParameter(d.MAX_TEXTURE_IMAGE_UNITS);u.pw=d.getParameter(d.MAX_VARYING_VECTORS);u.XA=d.getParameter(d.MAX_VERTEX_ATTRIBS);u.aH=d.getParameter(d.MAX_VERTEX_TEXTURE_IMAGE_UNITS);
u.qw=d.getParameter(d.MAX_VERTEX_UNIFORM_VECTORS);u.Xg=d.getParameter(d.MAX_CUBE_MAP_TEXTURE_SIZE);u.TA=d.getParameter(d.MAX_RENDERBUFFER_SIZE);u.Ic=d.getParameter(d.MAX_TEXTURE_SIZE);u.YA=d.getParameter(d.MAX_VIEWPORT_DIMS);var v=H.get_renderer_info();if(v){var B=d.getParameter(v.UNMASKED_VENDOR_WEBGL),y=d.getParameter(v.UNMASKED_RENDERER_WEBGL);-1<B.indexOf("Qualcomm")&&-1<y.indexOf("330")&&(m("Chrome")||m("Firefox"))&&(n("Chrome/Firefox and Qualcomm 330 detected, force enable WebGL 1, disable blending cascaded shadow maps."),
h.Ib=!1,h.xE=!0)}u.xo=h.Ib?24:16;h.Ib&&!G.enabled&&(h.er=!0);h.Ib?(h.Jc=Math.min(h.Jc,d.getParameter(d.MAX_SAMPLES)),m("Firefox")&&(n("Firefox and WebGL 2 detected, applying framebuffer hack."),h.rE=!0),m("Windows")&&m("Chrome")&&(n("Windows, Chrome and WebGL 2 detected, applying multisample hack, disabling MSAA."),h.Jc=1)):h.Jc=1;m("Firefox")&&"NONE"!==h.stereo&&(n("Firefox and Stereo rendering detected, disable texture reusage"),h.zF=!0);if(h.Ib&&a.$R()||m("Firefox"))n("Firefox detected, disabling multisample"),
h.Jc=1;m("Mac OS X")&&m("Chrome/60")&&(n("macOS and Chrome 60 detected, disabling multisample"),h.Jc=1);c.sT();var V=!!H.dQ();m("Firefox/28.0")&&(m("Linux")||m("Macintosh"))&&(n("Firefox 28 detected, applying depth hack"),V=!1);m("Windows Phone")||(m("iPad")||m("iPhone")?(n("iOS detected, applying alpha hack, applying vertex animation mix normals hack, disable smaa. Disable ssao for performance. Initialize WebAudio context with empty sound. Applying glow hack."),ka.alpha||(h.background_color[3]=1),
h.Rv=!0,h.wJ=!0,h.smaa=!1,h.ssao=!1,h.AA=!0,H.WF()&&O.Tw&&(h.Em="pvr")):m("Mac OS X")&&m("Safari")&&!m("Chrome")&&(n("OS X / Safari detected, force to wait complete loading. Applying playback rate hack for video textures. Applying canvas alpha hack."),h.QH=!0,E.WD=!0,E.BE=!0));m("Windows")&&(m("Chrome/40")||m("Firefox/33")||m("Firefox/34")||m("Firefox/35")||m("Firefox/36"))&&(n("Windows/Chrome40 or Firefox33-36 detected. Applying clear procedural skydome hack."),h.nz=!0);m("Chrome")&&!r()&&z.rG()&&
(n('Chrome (non-mobile) was detected for a single HTML-exported file. "Background Music" speakers were changed to "Background Sound".'),h.yE=!0);m("Mac OS X")&&(h.mw=!0,n("OS X detected, applying shadows hack"));r()&&(n("Mobile detected, applying various hacks for video textures."),h.is_mobile_device=!0,m("iPad")||m("iPhone")||m("Windows Phone")||(n("Mobile (not iOS) detected, disable playback rate for video textures."),E.oF=!0));m("iPad")&&(n('iPad detected, use "autoplay" hack for video textures.'),
h.oG=!0);(m("Firefox/35.0")||m("Firefox/36.0"))&&m("Windows")&&(n("Windows/Firefox 35/36 detected, applying shadows slink hack"),h.sI=!0);if(m("iPhone")||p())n("iPhone or IE11 detected. Enable sequential video fallback for video textures."),h.Rs=!0;10>u.pw&&(n("Not enough varyings, disable shadows on blend objects"),h.Jz=!0);m("Windows Phone")&&(n("Windows Phone detected. Disable debug view mode, glow materials, ssao, smaa, shadows, reflections, refractions."),h.debug_view=!1,h.glow_materials=!1,
h.ssao=!1,h.smaa=!1,h.shadows=!1,h.reflections=!1,h.refractions=!1,h.EH=!1);if(m("UCBrowser")||m("Chrome")&&m("Nexus")&&h.is_mobile_device)n("Mobile Nexus Chrome or UCBrowser detected, disable workers."),R.On=!1;m("Firefox")&&(n("Firefox detected, disabling workers"),R.On=!1);if(p()||m("Edge"))n("IE11 or Edge detected, disabling workers"),R.On=!1;m("Chrome")&&m("Linux")&&(n("Chrome and Linux detected, disabling wasm physics."),R.ut=!1);if(v){B=d.getParameter(v.UNMASKED_VENDOR_WEBGL);y=d.getParameter(v.UNMASKED_RENDERER_WEBGL);
v=/\b4\d{2}\b/;B.indexOf("Intel")&&(-1<y.indexOf("3000")||-1<y.indexOf("2000"))&&(h.yp=!1,n("Intel HD Graphics 2000/3000 detected, disable depth reuse."));m("Chrome")&&-1<y.indexOf("Mali-T720")&&(n('Chrome and ARM Mali-T720 detected, changing "Alpha Anti-Aliasing" materials to "Alpha Clip".'),h.XG=!0);-1<y.indexOf("AMD")&&m("Windows")&&m("Firefox")&&(n("AMD, Windows and Firefox detected, disabling depth textures."),V=!1);-1<B.indexOf("ARM")&&v.test(y)&&(n("ARM Mali-400 series detected, applying lamps, depth and frames blending hacks"),
V=!1,b.DF=!0,h.WG=!0);-1<B.indexOf("ARM")&&-1<y.indexOf("Mali-T604")&&(n("ARM Mali-T604 detected, disabling shadows."),h.shadows=!1);-1<B.indexOf("ARM")&&-1<y.indexOf("Mali-T760")&&(n("ARM Mali-T760 detected, disabling SSAO."),h.ssao=!1,h.nx=!0,h.Ib&&(h.Jc=1,n("ARM Mali-T760 and WebGL 2 detected, switching MSAA samples to 1.")));-1<B.indexOf("ARM")&&-1<y.indexOf("Mali-T720")&&(n("ARM Mali-T720 detected, disabling depth textures."),V=!1,h.Ib&&(h.Jc=1,n("ARM Mali-T720 and WebGL 2 detected, switching MSAA samples to 1.")));
-1<B.indexOf("Qualcomm")&&-1<y.indexOf("Adreno")&&(n("Qualcomm Adreno detected, applying shader constants hack."),h.XB=!0,-1<y.indexOf("420")&&(n("Qualcomm Adreno420 detected, setting max cubemap size to 12288x8192, setting max texture size to 4096x4096."),u.Ic=Math.min(u.Ic,4096),u.Xg=Math.min(u.Xg,4096)),m("Chrome")&&(y.match(/4../)||y.match(/5../))&&(n("Qualcomm Adreno 4xx or 5xx detected, switch MSAA samples to 1."),h.Jc=1));-1<B.indexOf("NVIDIA")&&-1<y.indexOf("Tegra 3")&&(n("NVIDIA Tegra 3 detected, force low quality for B4W_LEVELS_OF_QUALITY nodes."),
h.BF=!0);m("Windows")&&m("Chrome")&&!m("Edge")&&(y.match(/NVIDIA GeForce 8..0/)||y.match(/NVIDIA GeForce 9..0/)||y.match(/NVIDIA GeForce( (G|GT|GTS|GTX))? 2../))&&(n("Chrome / Windows / NVIDIA GeForce 8/9/200 series detected, setting max cubemap size to 768x512, use canvas for resizing."),u.Xg=C.qD,h.Is=!0);-1<y.indexOf("PowerVR")&&-1<y.indexOf("SGX")&&(n("PowerVR SGX series detected, use canvas for resizing. Disable shadows. Apply skinning hack, disable skin blending between frames."),h.Is=!0,h.nx=
!0,h.shadows=!1);m("Windows")&&-1<y.indexOf("Direct3D9")&&(n("DirectX 9.0 detected, using canvas for resizing textures/cubemap textures."),h.gF=!0,h.Is=!0,h.OH=!0);B="";for(v=0;v<l.length;v++)if(-1<y.indexOf(l[v])){B=l[v];break}B&&(n("Architecture "+B+" detected. Blending between frames and shadows on blend objects will be disabled."),h.nx=!0,h.Jz=!0)}0==u.aH&&(n("Vertex textures are not allowed. Disabling vertex textures"),h.Wt=!1);V||(h.Go=!1,h.ld=!1,h.water_dynamic=!1,h.shore_smoothing=!1,h.Bp=
!1,h.smaa=!1,h.ssao=!1,h.Ks=!0);h.lJ=!!H.XF()||"pvr"==h.Em;h.Ju=V;if(d.getShaderPrecisionFormat)var A=d.getShaderPrecisionFormat(d.FRAGMENT_SHADER,d.HIGH_FLOAT);d.getShaderPrecisionFormat&&0!==A.precision||(h.precision="mediump");if(p()&&m("Touch")||m("Edge"))n("IE11 and touchscreen or Edge detected. Behaviour of the mouse move sensor will be changed."),h.Ov=!0;if(p()||m("Edge"))h.kG=!0,h.jG=!0,h.Is=!0;r()&&m("Firefox")&&(k.log("Mobile firefox detected. Applying autoplay media hack.Setting max cubemap size to 12288x8192, setting max texture size to 4096x4096."),
h.$A=!0,u.Ic=Math.min(u.Ic,4096),u.Xg=Math.min(u.Xg,4096));d=!!H.$z();h.Zy=d;d=!!H.iA();h.Tx=d;d=!!H.wQ();h.QI=d;d=!!H.yQ();h.wU=d;d=!!H.xQ();h.vU=d;d=!!H.zQ();h.xU=d;d=!!H.VP();h.pE=d;d=!!H.WP();h.bN=d};C.wE=m;C.detect_mobile=r;C.sM=function(){m("Firefox/35.0")&&m("Windows")&&(k.warn("Windows/Firefox 35 detected, forcing context's alpha"),z.context.alpha=!0)};C.is_ie11=p});w.a=f},function(D,w,f){function N(b,c,h){b=v(b,c||0,h);a.normalize(b,h);return h}function U(b,h,k){k=k||0;var d=v(b,k,O),f=a.length(d),
m=c._50(d[3])*c._50(h[3])||1;a.scale(h,m*f,d);Math.abs(d[3])<l&&(d[3]=0<d[3]?l:-l);r(b,d,k);return b}function n(a,b){return c._50(a[4*(b||0)+3])}function y(b,h,k){k=k||0;var d=v(b,k,O);0>c._50(d[3])*h&&a.scale(d,-1,d);r(b,d,k);return b}function d(b,c,h){h=h||0;var k=v(b,h,O);a.normalize(k,k);a.scale(k,c,k);Math.abs(k[3])<l&&(k[3]=0<k[3]?k[3]+l:k[3]-l);r(b,k,h);return b}function m(b,c){b=v(b,c||0,O);return a.length(b)}function C(a){a=0!==a?a||1:0;for(var b=new Float32Array(4*a),c=0;c<a;c++)b[4*c+3]=
h;return b}function v(a,b,c){c[0]=a[4*b];c[1]=a[4*b+1];c[2]=a[4*b+2];c[3]=a[4*b+3];return c}function r(a,b,c){a[4*c]=b[0];a[4*c+1]=b[1];a[4*c+2]=b[2];a[4*c+3]=b[3];return a}function p(a){return a.length/4}function z(b,c,h){for(var k=p(b),f=0;f<k;f++){var l=n(b,f),u=m(b,f),r=N(b,f,ka);r=a.multiply(c,r,ka);U(h,r,f);d(h,u,f);y(h,l,f)}}f.d(w,"a",function(){return b});w.d=function(f,m,n){var r=!(!m||!m.length),p=f.length/3;n=n||C(p);for(var v=0;v<p;++v){var A=u;A[0]=f[3*v];A[1]=f[3*v+1];A[2]=f[3*v+2];
k.normalize(A,A);if(r){var B=L;B[0]=m[b*v];B[1]=m[b*v+1];B[2]=m[b*v+2];B[3]=m[b*v+3];k.normalize(B,B);var z=k.cross(B,A,E);k.normalize(z,z);var P=a.rotationTo(c.f,z,G),q=k.transformQuat(c.e,P,R);q=a.rotationTo(q,A,ka);P=a.multiply(q,P,G);a.normalize(P,P);q=h;z=k.cross(A,z,R);if(Math.abs(z[0]-B[0])>l||Math.abs(z[1]-B[1])>l||Math.abs(z[2]-B[2])>l)q=Math.acos(k.dot(A,B))/Math.PI;U(n,P,v);y(n,c._50(B[3]),v);d(n,q,v)}else P=a.rotationTo(c.e,A,G),U(n,P,v)}return n};w.b=function(a,b,c,h){if(0!==c){b=4*b||
0;c=c||a.length;for(var k=0,d=0;k<4*c;k+=4,d+=4)h[d]=a[b+k],h[d+1]=a[b+k+1],h[d+2]=a[b+k+2],h[d+3]=a[b+k+3]}};w.h=N;w.o=U;w.g=function(a,b,h){a=N(a,b,G);return k.transformQuat(c.e,a,h)};w.c=C;w.i=function(a){for(var b=0;b<a.length;b+=4)a[b]=0,a[b+1]=0,a[b+2]=0,a[b+3]=h;return a};w.e=v;w.n=r;w.f=p;w.j=z;w.m=function(a,b,c){b=H.g(b,G);return z(a,b,c)};w.p=function(b,c,h,k){var f=n(c,0),l=N(b,0,G),u=N(c,0,ka);b=m(b);c=m(c);l=a.slerp(l,u,h,ka);a.normalize(l,l);U(k,l,0);d(k,h*(b-c)+c);y(k,f,0);return k};
w.k=function(b,c,k){var f=n(c,0),l=N(b,0,G),u=N(c,0,ka);b=m(b,0);c=m(c,0);l=a.multiply(l,u,G);U(k,l,0);d(k,b+c-h);y(k,f,0);return k};w.l=function(b,c,k){var f=n(c,0),l=N(b,0,G),u=N(c,0,ka);b=m(b);c=m(c);u=a.invert(u,ka);l=a.multiply(l,u,G);U(k,l,0);d(k,b-c+h);y(k,f,0);return k};var a=f(8),H=f(6),k=f(3);D=f(7);var c=f(2),l=3.1E-5,b=4,h=.5,G=a.create(),ka=a.create(),u=k.create(),E=k.create(),R=k.create(),O=D.create(),L=D.create()},function(D,w){function f(){if("DEBUG"==n){var f=N();return[parseInt(String(f.getFullYear()).slice(-2),
10),f.getMonth()+1]}return d}function N(){return"DEBUG"==n?new Date:y}function U(){var d=N(),f=d.getDate();f=10>f?"0"+String(f):String(f);var m=d.getMonth()+1;m=10>m?"0"+String(m):String(m);var n=String(d.getFullYear()),z=d.getHours();z=10>z?"0"+String(z):String(z);var a=d.getMinutes();a=10>a?"0"+String(a):String(a);d=d.getSeconds();d=10>d?"0"+String(d):String(d);return f+"."+m+"."+n+" "+z+":"+a+":"+d}w.e=f;w.f=function(){for(var d="",m=f(),n=0;n<m.length;n++)d=1==n?d+(10>m[n]?"0"+m[n]:m[n]):d+m[n],
n!=m.length-1&&(d+=".");return d};w.d=function(){return n};w.a=N;w.b=U;w.c=function(){if("DEBUG"!=n)return m;var d=U();return d=d.split(" ").join("").split(":").join("").split(".").join("")};var n="RELEASE",y=new Date(2018,5,6,11,28,50),d=[18,5,0],m="_b4w_ver_18_05_0_"},function(D,w,f){D=f(0);var N=f(56),U=f(5),n=f(4),y=f(57),d=f(9),m=f(47),C=f(19),v=f(1),r=f(8),p=f(10),z=f(23),a=f(11),H=f(18),k=f(13),c=f(6),l=f(2),b=f(3);f(7);f=Object(D.a)("__animation",function(h,f){function G(a,b){var g=a.Za[b];
g&&g.Tz&&g.Br&&(g.Br=!1,g.Tz(a,b))}function u(a,b,g){g=a.Za[g];g.type=30;var c=b.rb,e=b.$b-c+1;g.start=c;g.length=e;g.Pg=c;g.Hj=b.name;for(e=c=0;e<a.Ld.length;e++){var h=a.Ld[e];if(h==b)break;else c+=h.$b-h.rb+1}g.uJ=c}function E(a,b,g){b.type=50;b.Hj=g.name;b.start=g.rb;b.length=g.$b-b.start;g.cyclic||(b.length+=g.cs)}function R(a,b){var g={type:null,Hj:null,Ty:null,LD:0,JD:null,Pj:new Int8Array(8),uc:null,scale:null,trans:null,Kj:null,Lj:null,aC:[],play:!1,behavior:20,Pg:0,start:0,length:0,CC:0,
CB:0,Br:!1,uJ:null,speed:1,volume:null,pitch:null,color:null,Qg:null,Fe:null,we:null,fog_intensity:null,fog_depth:null,fog_start:null,fog_height:null,Qm:null,jH:[],oi:[],iH:[],ni:[],lp:null};if(!a.Za.length)for(var c=0;8>c;c++)a.Za.push(null);a.Za[b]=g}function O(a){return a.replace(/_B4W_BAKED$/,"")}function L(a,b){return{qn:a,action:b}}function B(a,b,g){if(a.animation_data){var c=a.animation_data.action;c&&60==c.sa.type&&b.push(L(g,c))}a=a.nodes;for(c=0;c<a.length;c++){var e=a[c];if(e.node_group){var h=
e.node_group.node_tree;if(h){var k=g.slice();k.push(e.name);B(h,b,k)}}}}function w(a){return sa.is_mesh(a)&&a.ka.Ld?!0:!1}function K(a,b,g){var c=a.Za;if(-1==g)for(g=0;8>g;g++){var e=c[g];e&&(e.Pg=b,T(a,0,g,!0))}else if(e=c[g])e.Pg=b,T(a,0,g,!0)}function ha(a,b,g){if(-1==b)for(b=0;8>b;b++){var c=a[b];c&&g(c)}else(c=a[b])&&g(c)}function T(a,b,g,c){da(a,b,g,c);G(a,g);a.ka.Gj&&(ja(a,b),t(a,b))}function V(a,b,g,c){var e=g.frame_range;if(e[0]>e[1])return Q.warn('Incompatible action "'+g.name+'" has been applied to object "'+
a.name+'"'),!1;var h=g.sa,k=a.Za[c];k.Hj=g.name;k.Ty=e;k.LD=h.wH;k.JD=h.$D;k.Pj.set(h.Pj);k.start=e[0];k.length=e[1]-e[0];k.Pg=e[0];switch(h.type){case 10:if(sa.is_armature(a)){k.type=10;var d=A(a,b,g);d||(d=pa(g,a.ka.Mg),aa(a,b,g,d));k.trans=d.trans;k.uc=d.uc;k.Kj=d.Kj;k.Lj=d.Lj;J(a,c,g,d)}break;case 40:sa.is_speaker(a)&&(k.volume=h.Oa.volume||null,k.pitch=h.Oa.pitch||null,k.type=40);break;case 70:sa.is_lamp(a)&&(k.color=h.Oa.color||null,k.Qg=h.Oa.energy||null,k.type=70);break;case 60:if("MESH"==
a.type||"WORLD"==a.type){k.type=60;e=sa.is_world(a);var f=[],l=[],t=[],m=[],u=[];g=g.sa;var n=b?b[0]:null;for(d in g.Oa){var r=b;var p=d.match(/"(.*?)"/)[1];if(r&&1<r.length){for(var v=r[1],B=2;B<r.length;B++)v=v+"%join%"+r[B];v+="%join%"+p}else v=p;r=v;for(p=0;p<a.Aa.length;p++)for(v=a.Aa[p].Ia,B=0;B<v.length;B++){var E=v[B];if(e||!n||-1!=E.Hc.indexOf(n)){var z=E.ni;var I=d;var G=r,P=g,y=l,C=f,O=E.oi;if(O){for(var T=!1,ja=0;ja<O.length;ja+=3)G==O[ja]&&(C.push(4*O[ja+1]+O[ja+2]),y.push(new Float32Array(P.Oa[I])),
T=!0);I=T}else I=!1;G=d;P=r;y=g;C=m;O=t;if(z){T=!1;for(ja=0;ja<z.length;ja+=2)P==z[ja]&&(O.push(z[ja+1]),C.push(new Float32Array(y.Oa[G])),T=!0);z=T}else z=!1;(I||z)&&u.push(E)}}}k.oi=f;k.jH=l;k.ni=t;k.iH=m;k.lp=u}break;case 20:if(d=h.Oa.tsr)k.type=20,e=A(a,b,g),e||(e=hb(a,g,d),aa(a,b,g,e)),k.trans=e.trans,k.scale=e.scale,k.uc=e.uc,ia.kB(a)&&ia.kV(a,k.trans[0],k.scale[0],k.uc[0]);else return Q.warn('Incompatible action "'+g.name+'" has been applied to object "'+a.name+'"'),!1;break;case 80:sa.is_world(a)&&
(k.Qg=h.Oa["light_settings.environment_energy"]||null,k.we=h.Oa.horizon_color||null,k.Fe=h.Oa.zenith_color||null,k.fog_intensity=h.Oa["mist_settings.intensity"]||null,k.fog_depth=h.Oa["mist_settings.depth"]||null,k.fog_start=h.Oa["mist_settings.start"]||null,k.fog_height=h.Oa["mist_settings.height"]||null,k.Qm=h.Oa.b4w_fog_color||null,k.type=80)}sa.is_armature(a)&&10!=h.type&&q(a,c);return!0}function A(a,b,g){a=a.fo;b=b?b.join("%join%"):null;for(var c=0;c<a.length;c+=3)if(g==a[c]&&b==a[c+1])return a[c+
2];return null}function aa(a,b,g,c){a.fo.push(g,b?b.join("%join%"):null,c)}function J(a,b,g,c){var e=a.ka,h=e.Ep,k=a.Za[b],d=k.aC;a:{var f=e.mx;for(var l=0;l<f.length;l+=2)if(g==f[l]){f=f[l+1];break a}f=null}if(f)k.aC=f;else{for(k=0;k<h.length;k++){f=h[k].Oi;l=[];for(var q=[],t=c.trans,m=c.uc,u=0;u<t.length;u++){var n=D(t[u],m[u],f);l.push(n.trans);q.push(n.uc)}d.push({trans:l,uc:q})}e.mx.push(g,d)}e.Gj&&(g=e.Mi,b>g[1]?(c=g[1],g[1]=b,g[0]=c):b>g[0]&&b<g[1]&&(g[0]=b),P(a))}function P(a){var b=a.ka.Mi;
if(-1!=b[0]&&-1!=b[1]){var g=a.Za;a=g[b[1]].Pg;var c=Math.floor(a),e=a-c;b=g[b[0]];a=b.Pg;c=Math.floor(a);b.Pg=c+e}}function q(a,b){var g=a.ka.Mi,c=g[1];g[0]=-1;g[1]=-1;if(-1!=b)for(a=a.Za;0<=c;c--)if((b=a[c])&&10==b.type)if(c>g[1])g[1]=c;else{c>g[0]&&(g[1]=c);break}}function da(a,e,h,k){if((h=a.Za[h])&&null!=h.type&&(h.play||k)){var d=a.ka,f=h.Pg,q=h.start,t=h.length;f+=h.speed*e*na.ke();var m=h.type,u=h.speed;if(0<=u&&f>=q+t||0>u&&f<q)switch(k||(h.Br=!0),h.behavior){case 10:f=0<=u?(f-q)%t+q:q+t-
1E-6;break;case 20:f=0<=u?q:q+t-1E-6;h.play=!1;break;case 30:f=0<=u?q+t-1E-6:q,h.play=!1}h.Pg=f;switch(m){case 10:if(!d.Gj){k=I(h);e=k[0];var n=k[1];k=k[2];d.ye=h.uc[e];d.qf=h.uc[n];d.De=h.trans[e];d.wf=h.trans[n];d.lg=k;k=d.Ep;h=h.aC;for(var A=0;A<k.length;A++){var p=k[A],v=h[A];p.ye=v.uc[e];p.qf=v.uc[n];p.De=v.trans[e];p.wf=v.trans[n];p.lg=d.lg}xa.Ea(a)}break;case 20:k=I(h);d=Ba;n=k[0];A=k[1];p=k[2];v=h.trans;var B=v[n][1];f=v[n][2];q=v[A][1];t=v[A][2];d[0]=(1-p)*v[n][0]+p*v[A][0];d[1]=(1-p)*B+
p*q;d[2]=(1-p)*f+p*t;n=Va;A=k[0];p=k[1];v=k[2];B=h.scale;f=B[A][1];q=B[A][2];t=B[p][1];m=B[p][2];n[0]=(1-v)*B[A][0]+v*B[p][0];n[1]=(1-v)*f+v*t;n[2]=(1-v)*q+v*m;A=La;v=k[0];p=k[1];k=k[2];B=h.uc;f=Ab;f[0]=B[v][0];f[1]=B[v][1];f[2]=B[v][2];f[3]=B[v][3];v=Ya;v[0]=B[p][0];v[1]=B[p][1];v[2]=B[p][2];v[3]=B[p][3];r.slerp(f,v,k,A);a.parent&&a.ts&&(k=Ka,c.t(d,n,A,k),c.q(a.ts,k,k),c.j(k,d),c.i(k,n),c.g(k,A));h.CC&&(k=xa.get_translation(a,Xa),l._54(d,k,e,h.CC,d));h.CB&&(k=Ab,xa.get_rotation(a,k),l._52(A,k,e,
h.CB,A));f=h.Pj;f[0]&&xa.set_translation_rel(a,d);f[1]&&xa.set_rotation_rel(a,A);f[2]&&xa.set_scale_rel(a,n);xa.Ea(a);ra.sync_transform(a);break;case 30:k=h.Pg-h.start;0>k&&(k=0);k>=h.length&&(k=h.length);a=Math.floor(k);e=a+1;k-=a;10!=h.behavior&&e==h.length&&(e=--a,k=1);h=h.uJ;g[0]=a+h;g[1]=e+h;g[2]=k;k=g;d.ly=k[0];d.my=k[2];break;case 40:k=I(h);e=k[0];d=k[1];k=k[2];h.volume&&ya.set_volume(a,(1-k)*h.volume[e]+k*h.volume[d]);h.pitch&&ya.playrate(a,(1-k)*h.pitch[e]+k*h.pitch[d]);break;case 50:e=10==
h.behavior?(f-q)/na.ke():f/na.ke();ia.JT(a,h.Hj,e);break;case 60:k=I(h);e=k[0];d=k[1];k=k[2];B=h.jH;f=h.oi;n=h.iH;A=h.ni;p=h.lp;for(h=0;h<f.length;h++)for(q=B[h],v=f[h],t=(1-k)*q[e]+k*q[d],q=0;q<p.length;q++)p[q].pi[v]=t;for(h=0;h<A.length;h++)for(B=n[h],v=A[h],B=b.lerp(B.subarray(3*e,3*e+3),B.subarray(3*d,3*d+3),k,Ba),q=0;q<p.length;q++)p[q].Ne[3*v]=B[0],p[q].Ne[3*v+1]=B[1],p[q].Ne[3*v+2]=B[2];sa.is_world(a)&&Aa.ey(a);break;case 70:k=I(h);e=k[0];d=k[1];k=k[2];f=h.Pj;(t=h.Qg)&&f[0]&&y.d(a.lc,(1-k)*
t[e]+k*t[d]);(h=h.color)&&f[1]&&(Ba[0]=(1-k)*h[3*e]+k*h[3*d],Ba[1]=(1-k)*h[3*e+1]+k*h[3*d+1],Ba[2]=(1-k)*h[3*e+2]+k*h[3*d+2],y.b(a.lc,Ba));q=a.Aa;for(h=0;h<q.length;h++)Aa.RU(a,q[h].Bb);break;case 80:k=I(h);e=k[0];d=k[1];k=k[2];f=h.Pj;q=a.Aa;u=Aa.yc(q[0].Bb,qa.ic);t=h.Qg;t=f[0]?(1-k)*t[e]+k*t[d]:u.Qg;m=h.we;f[1]?(Ba[0]=(1-k)*m[3*e]+k*m[3*d],Ba[1]=(1-k)*m[3*e+1]+k*m[3*d+1],Ba[2]=(1-k)*m[3*e+2]+k*m[3*d+2],m=Ba):m=u.we;var E=h.Fe;f[2]?(Va[0]=(1-k)*E[3*e]+k*E[3*d],Va[1]=(1-k)*E[3*e+1]+k*E[3*d+1],Va[2]=
(1-k)*E[3*e+2]+k*E[3*d+2],u=Va):u=u.Fe;E=h.fog_intensity;f[3]&&(n=(1-k)*E[e]+k*E[d]);E=h.fog_depth;f[4]&&(A=(1-k)*E[e]+k*E[d]);E=h.fog_start;f[5]&&(p=(1-k)*E[e]+k*E[d]);E=h.fog_height;f[6]&&(v=(1-k)*E[e]+k*E[d]);h=h.Qm;f[7]&&(La[0]=(1-k)*h[3*e]+k*h[3*d],La[1]=(1-k)*h[3*e+1]+k*h[3*d+1],La[2]=(1-k)*h[3*e+2]+k*h[3*d+2],B=La);for(h=0;h<q.length;h++)e=a.Aa[h].Bb,(f[0]||f[1]||f[2])&&Aa.set_environment_colors(e,t,m,u),f[3]&&Aa.YH(e,n),f[4]&&Aa.WH(e,A),f[5]&&Aa.ZH(e,p),f[6]&&Aa.XH(e,v),f[7]&&Aa.set_fog_color_density(e,
B);break;default:Ca.va("Unknown animation type:"+m)}}}function I(a){var b=a.Ty[0],c=a.Ty[1]-b;b=a.Pg-b;0>b&&(b=0);b>=c&&(b=c);b/=a.LD;c=Math.floor(b);a=a.JD[c]?b-c:0;b=Math.ceil(c+a);g[0]=c;g[1]=b;g[2]=a;return g}function t(a,b){var g=a.ka,c=g.Zf,h=g.Mi,k=h[0];h=h[1];if(-1!=h){if(-1!=k){var d=a.Za[k];if(d.play||0==b||g.mi){var f=I(d),l=f[0],q=f[1];g.lg=f[2];f=d.uc[l];var t=d.uc[q],m=d.trans[l],u=d.trans[q]}else c=1}else c=1;h=a.Za[h];if(h.play||0==b||g.mi){b=I(h);var n=b[0],r=b[1];g.lg=b[2]}else if(-1!=
k&&d.play)c=0;else return;b=h.uc[n];k=h.uc[r];var A=h.trans[n],p=h.trans[r];if(1!=c||g.mi)if(0!=c||g.mi){c=g.Mg;if(g.mi&&!g.$l&&!g.Kl){g.$l=new Float32Array(g.De.length);g.Kl=new Float32Array(g.ye.length);for(var v in c)f=c[v],f.un||ma(g,f)}for(v in c)f=c[v],f.un||e(g,f,d,h,l,q,n,r)}else g.ye.set(f),g.qf.set(t),g.De.set(m),g.wf.set(u);else g.ye.set(b),g.qf.set(k),g.De.set(A),g.wf.set(p);xa.Ea(a);N.f(a)}}function e(a,b,g,h,k,d,f,q){var t=b.un,m=a.Zf,u=La,n=Ab,A=Ea,p=Za,v=Ya,B=Sa,E=Ua,z=W,I=4*b.Ni,
G=h.Kj[f],P=h.Lj[f],Q=h.Kj[q],y=h.Lj[q];if(!a.mi)var C=g.Kj[k],J=g.Lj[k],aa=g.Kj[d],O=g.Lj[d];for(var ja=0;4>ja;ja++)n[ja]=G[I+ja],p[ja]=P[I+ja],B[ja]=Q[I+ja],z[ja]=y[I+ja],a.mi?(u[ja]=a.Kl[I+ja],A[ja]=a.$l[I+ja],v[ja]=a.Kl[I+ja],E[ja]=a.$l[I+ja]):(u[ja]=C[I+ja],A[ja]=J[I+ja],v[ja]=aa[I+ja],E[ja]=O[I+ja]);r.slerp(u,n,m,u);l.G(A,p,m,A);c.w(A,Ka);c.r(u,Ka);t&&c.q(t.cy,Ka,Ka);c.a(Ka,b.cy);c.q(Ka,b.FC,Ka);c.l(Ka,A);c.g(Ka,u);r.slerp(v,B,m,v);l.G(E,z,m,E);c.w(E,Ka);c.r(v,Ka);t&&c.q(t.by,Ka,Ka);c.a(Ka,
b.by);c.q(Ka,b.FC,Ka);c.l(Ka,E);c.g(Ka,v);for(ja=0;4>ja;ja++)a.ye[I+ja]=u[ja],a.De[I+ja]=A[ja],a.qf[I+ja]=v[ja],a.wf[I+ja]=E[ja];b=b.Ku;for(ja=0;ja<b.length;ja++)e(a,b[ja],g,h,k,d,f,q)}function ma(a,b){for(var g=4*b.Ni,e=b.un,h=a.Zf,k=Ea,d=La,f=Za,q=Ab,t=0;4>t;t++)k[t]=a.De[g+t],d[t]=a.ye[g+t],f[t]=a.wf[g+t],q[t]=a.qf[g+t];c.w(k,Ka);c.r(d,Ka);c.q(Ka,b.zi,Ka);c.a(Ka,b.cy);e&&(c.p(e.cy,fa),c.q(fa,Ka,Ka));c.l(Ka,k);c.g(Ka,d);c.w(f,Ka);c.r(q,Ka);c.q(Ka,b.zi,Ka);c.a(Ka,b.by);e&&(c.p(e.by,fa),c.q(fa,Ka,
Ka));c.l(Ka,f);c.g(Ka,q);r.slerp(d,q,h,d);l.G(k,f,h,k);for(t=0;4>t;t++)a.Kl[g+t]=d[t],a.$l[g+t]=k[t];b=b.Ku;for(t=0;t<b.length;t++)ma(a,b[t])}function ja(a,b){a=a.ka;var g=a.Zf,c=a.io;0!=c&&(!a.mi||a.$l||a.Kl||(g=a.Zf=0),g=a.ho-g,b*=c,l._50(g)==l._50(c)&&Math.abs(b)<Math.abs(g)?a.Zf+=b:(a.Zf=a.ho,a.io=0,a.Fj&&(a.Fj(),a.Fj=null),a.mi&&(a.$l=null,a.Kl=null,a.mi=!1)))}function pa(a,b){for(var g=[],e=[],h=[],k=[],d=a.sa.jB,f=0;f<d;f++){for(var l in b){var q=b[l],t=q.kt,m=a.sa.gz[l];m?c.f(m,f,t):c.m(t);
q.ay=!1}q=ta(b);g.push(q.trans);e.push(q.uc);h.push(q.Lj);k.push(q.Kj)}return{trans:g,uc:e,Lj:h,Kj:k}}function ta(a){var b=[],g=[],e=[],h=[],k=new Float32Array(4),d=new Float32Array(4),f=new Float32Array(4),l=new Float32Array(4),q;for(q in a){var t=a[q],m=k,u=d,n=t.qu,r=n[n.length-1],A=r.EC;r.ay||c.m(A);for(r=n.length-1;0<=r;r--){var p=n[r],v=p.EC;if(p.ay)A=v;else{var B=p.zi,E=p.kt;c.p(B,Ka);c.q(E,Ka,Ka);c.q(B,Ka,Ka);c.q(A,Ka,v);A=v;p.ay=!0}}n=p.EC;c.l(n,m);c.g(n,u);m=t.Ni;c.q(t.Xp,t.kt,Ka);c.l(Ka,
f);c.g(Ka,l);for(t=0;4>t;t++)u=4*m+t,b[u]=k[t],g[u]=d[t],e[u]=f[t],h[u]=l[t]}return{trans:b,uc:g,Lj:e,Kj:h}}function D(a,b,g){var c=[],e=[],h;for(h in g){var k=g[h],d=k.Ni;k=k.Hz;for(var f=0;4>f;f++){var l=4*k+f,q=4*d+f;c[l]=a[q];e[l]=b[q]}}c=new Float32Array(c);e=new Float32Array(e);return{trans:c,uc:e}}function M(a){var b=a.sa;if(b.gz)var g=10;else if(b.Oa)if("volume"in b.Oa||"pitch"in b.Oa)g=40;else{var c;a:{if(c=a.sa.Oa)for(var e in c)if(-1!=e.indexOf("nodes")){c=!0;break a}c=!1}if(c)g=60;else{a:{if(a.sa.Oa){c=
a.fcurves;for(h in c)if("color"==h&&!c[h][3]){var h=!0;break a}if("energy"==h){h=!0;break a}}h=!1}if(h)g=70;else if(h=a.sa.Oa,"light_settings.environment_energy"in h||"horizon_color"in h||"zenith_color"in h||"mist_settings.intensity"in h||"mist_settings.depth"in h||"mist_settings.start"in h||"mist_settings.height"in h||"b4w_fog_color"in h)g=80;else{a:{if(a.sa.Oa)for(g in a=a.fcurves,a)if("location"==g||"rotation_quaternion"==g||"scale"==g){g=!0;break a}g=!1}g=g?20:0}}}else g=0;b.type=g}function oa(a,
b){b[0]=b[1]=b[2]=0;for(var g in a)"location"==g?b[0]=1:"rotation_quaternion"==g?b[1]=1:"scale"==g&&(b[2]=1)}function ca(a,b){b[0]=b[1]=0;for(var g in a)"energy"==g?b[0]=1:"color"==g&&(b[1]=1)}function ea(a,b){b[0]=b[1]=b[2]=0;b[3]=b[4]=b[5]=0;b[6]=b[7]=0;for(var g in a)"light_settings.environment_energy"==g?b[0]=1:"horizon_color"==g?b[1]=1:"zenith_color"==g?b[2]=1:"mist_settings.intensity"==g?b[3]=1:"mist_settings.depth"==g?b[4]=1:"mist_settings.start"==g?b[5]=1:"mist_settings.height"==g?b[6]=1:
"b4w_fog_color"==g&&(b[7]=1)}function Da(a,b,g,c,e,h,k){var d=a+(b-a)/2,f=S(d,c,e,h,k)-g;return.02>Math.abs(f)?d:0<f?Da(a,d,g,c,e,h,k):Da(d,b,g,c,e,h,k)}function S(a,b,g,c,e){var h=1-a;return b*h*h*h+3*g*h*h*a+3*c*h*a*a+e*a*a*a}function Na(a,b){R(a,b);-1==Pa.indexOf(a)&&Pa.push(a)}function wa(a,b){xa.Ea(a);ra.sync_transform(a);T(a,0,b,!0)}function X(a,b,g,c){c=c||0;if(sa.is_mesh(a)){var e=Ga(a,g);if(e)return Na(a,c),u(a,e,c),wa(a,c),!0;if((e=Ha(a,g))&&"EMITTER"==e.Kw){Na(a,c);b=e.name;g=c;e=a.Aa;
for(var h=0;h<e.length;h++)for(var k=e[h].Ia,d=0;d<k.length;d++){var f=k[d].sb;f&&f.name==b&&E(k[d],a.Za[g],f)}wa(a,c);return!0}}if(e=l._19("name",g,Wa)||l._19("name",g+"_B4W_BAKED",Wa)){Na(a,c);if(V(a,b,e,c))return wa(a,c),!0;a.Za[c]=null}Q.error('Unsupported object: "'+a.name+'" or animation name: "'+g+'"');return!1}function Ga(a,b){for(var g=0;g<a.Ld.length;g++){var c=a.Ld[g];if(c.name===b)return c}return null}function Ha(a,b){a=a.Aa;for(var g=0;g<a.length;g++)for(var c=a[g].Ia,e=0;e<c.length;e++){var h=
c[e].sb;if(h&&h.name===b)return h}return null}function ua(a){a=a.modifiers;for(var b=0;b<a.length;b++){var g=a[b];if("ARMATURE"==g.type)return g.object}return null}var Ca=Object(U.a)(h),la=Object(n.a)(h),sa=Object(d.a)(h),ia=Object(m.a)(h),ra=Object(C.a)(h),Q=Object(v.a)(h),Aa=Object(p.a)(h),ya=Object(z.a)(h),qa=Object(a.a)(h),na=Object(H.a)(h),xa=Object(k.a)(h),za=la.Wk,Fa=la.di;f.fK=1E-6;f.OBJ_ANIM_TYPE_NONE=0;f.OBJ_ANIM_TYPE_ARMATURE=10;f.OBJ_ANIM_TYPE_OBJECT=20;f.OBJ_ANIM_TYPE_VERTEX=30;f.OBJ_ANIM_TYPE_SOUND=
40;f.OBJ_ANIM_TYPE_PARTICLES=50;f.OBJ_ANIM_TYPE_MATERIAL=60;f.PK=70;f.OK=80;f.SLOT_0=0;f.SLOT_1=1;f.SLOT_2=2;f.SLOT_3=3;f.SLOT_4=4;f.SLOT_5=5;f.SLOT_6=6;f.SLOT_7=7;f.SLOT_ALL=-1;f.AB_CYCLIC=10;f.AB_FINISH_RESET=20;f.AB_FINISH_STOP=30;var g=Array(3),Ba=new Float32Array(3),Va=new Float32Array(3),Xa=new Float32Array(3),Ea=new Float32Array(4),Za=new Float32Array(4),Ua=new Float32Array(4),W=new Float32Array(4),La=new Float32Array(4),Ab=new Float32Array(4),Ya=new Float32Array(4),Sa=new Float32Array(4),
Ka=c.b(),fa=c.b(),Pa=[],Wa=[];f.UF=function(){return l._64((Fa.qw-50)/4)};f.frame_to_sec=function(a){return a/na.ke()};f.update=function(a){for(var b=0;b<Pa.length;b++){for(var g=Pa[b],c=0;8>c;c++)da(g,a,c);g.ka.Gj&&(ja(g,a),t(g,a))}for(b=0;b<Pa.length;b++)for(g=Pa[b],c=0;8>c&&g.Za.length;c++)G(g,c)};f.NP=function(){return Wa};f.get_anim_names=function(a){var b=[];if(w(a))for(var g=0;g<a.Ld.length;g++)b.push(a.Ld[g].name);var c=[];for(g=0;g<Wa.length;g++){var e=Wa[g],h=e.sa;20==h.type?c.push(e):60!=
e.sa.type||"MESH"!=a.type&&"WORLD"!=a.type?10==h.type&&"ARMATURE"==a.type?c.push(e):40==h.type&&"SPEAKER"==a.type?c.push(e):80==h.type&&"WORLD"==a.type&&c.push(e):c.push(e)}for(g=0;g<c.length;g++)b.push(O(c[g].name));if(ia.kB(a)&&ia.nH(a))for(a=a.Aa,g=0;g<a.length;g++)for(c=a[g].Ia,e=0;e<c.length;e++)(h=c[e].sb)&&b.push(h.name);return b};f.GI=O;f.get_anim_type=function(a,b){return(a=a.Za[b])?a.type:0};f.apply_def=function(a){for(var b=0,g=a.Aa,c=0;c<g.length;c++)for(var e=g[c].Ia,h=0;h<e.length;h++){var k=
e[h].sb;k&&"EMITTER"==k.Kw&&!e[h].xh&&(Na(a,b),E(e[h],a.Za[b],k),wa(a,b),a.Za[b].behavior=k.cyclic?10:a.um,b++)}g=a.Lm.slice();for(c=0;c<g.length;c++)h=g[c],e=h.qn,h=h.action,Na(a,b),V(a,e,h,b)?(wa(a,b),a.Za[b].behavior=a.um,b++):a.Za[b]=null;w(a)&&(Na(a,b),u(a,a.Ld[0],b),wa(a,b),a.Za[b].behavior=a.um)};f.Yy=function(a){switch(a){case "CYCLIC":return 10;case "FINISH_RESET":return 20;case "FINISH_STOP":return 30;default:Ca.va("Wrong animation behavior")}};f.RP=function(a){var b=[];a=a.data.materials;
for(var g=0;g<a.length;g++){var c=a[g],e=c.ne;e&&B(e,b,[c.name])}return b};f.SP=function(a){var b=[],g=a.node_tree;g&&B(g,b,[a.name]);return b};f.lG=L;f.play=function(a,b,g){ha(a.Za,g,function(a){a.play=!0;a.Tz=b?b:null;a.Br=!1});a.ka.Gj&&P(a)};f.stop=function(a,b){ha(a.Za,b,function(a){a.play=!1;a.Tz=null;a.Br=!1})};f.is_play=function(a,b){a=a.Za;if(-1==b)for(b=0;8>b;b++){if(a[b]&&a[b].play)return!0}else if(b=a[b])return b.play;return!1};f.set_frame=K;f.set_first_frame=function(a,b){b=b||0;ha(a.Za,
b,function(g){K(a,g.start,b)})};f.bA=function(a,b){return(a=a.Za[b])&&a.Pg?a.Pg:0};f.is_cyclic=function(a,b){return(a=a.Za[b])&&10==a.behavior};f.set_behavior=function(a,b,g){ha(a.Za,g,function(a){a.behavior=b})};f.get_behavior=function(a,b){return(a=a.Za[b])&&a.behavior};f.apply_smoothing=function(a,b,g,c){ha(a.Za,c,function(a){a.CC=b||0;a.CB=g||0})};f.remove_slot_animation=function(a,b){if(-1==b)for(var g=0;8>g;g++)a.Za[g]=null;else a.Za[b]=null;a.ka.Gj&&q(a,b)};f.WU=T;f.pH=function(a){if("ARMATURE"==
a.type||a.au||"WORLD"==a.type)return!0;for(var b=0;b<a.Lm.length;b++){var g=a.Lm[b].action.sa.type;if(20==g||10==g||40==g&&"SPEAKER"==a.type||70==g&&"LAMP"==a.type||60==g&&"MESH"==a.type)return!0}return ia.kB(a)&&ia.nH(a)||"MESH"==a.type&&a.Ld.length?!0:!1};f.fE=function(a){if(ua(a))return!0;if(a.eo)for(var b=0;b<a.eo.length;b++){var g=a.eo[b].action.sa.type;if(20==g||60==g&&"MESH"==a.type)return!0}return ia.NM(a)&&ia.MM(a)||"MESH"==a.type&&a.data.b4w_vertex_anim.length?!0:!1};f.is_animated=function(a){return!!a.Za.length};
f.TQ=function(a,b,g,c,e){if(g=g?l._19("uuid",g,Wa):l._19("name",c,Wa)||l._19("name",c+"_B4W_BAKED",Wa))if(R(a,e),-1==Pa.indexOf(a)&&Pa.push(a),c=g.frame_range,c[0]>c[1])Q.warn('Incompatible action "'+g.name+'" has been applied to object "'+a.name+'"');else switch(c=g.sa,c.type){case 10:sa.is_armature(a)&&(c=A(a,b,g),c||(c=pa(g,a.ka.Mg),aa(a,b,g,c)),J(a,e,g,c));break;case 20:(e=c.Oa.tsr)?(c=A(a,b,g),c||(c=hb(a,g,e),aa(a,b,g,c))):Q.warn('Incompatible action "'+g.name+'" has been applied to object "'+
a.name+'"')}};f.SO=function(a,b){for(var g=a.fo,c=[],e=0;e<g.length;e+=3)(60!=g[e].sa.type||null!==g[e+1]&&g[e+1].split("%join%")[0]!=b)&&c.push(g[e],g[e+1],g[e+2]);a.fo=c};var hb=function(){var a=c.b();return function(g,e,h){g=e.sa.jB;e=[];for(var k=[],d=[],f=0;f<g;f++){var l=c.f(h,f,a),q=c.j(l,b.create()),t=c.i(l,b.create());l=c.g(l,r.create());e.push(q);k.push(t);d.push(l)}return{trans:e,scale:k,uc:d}}}();f.UM=ta;f.lP=D;f.bM=function(a){function b(a,b){-1<a.indexOf("location")?a=0:-1<a.indexOf("rotation_quaternion")?
(a=6,b=0==b?NaN:b-1):a=-1<a.indexOf("scale")?3:0;return a+b}function g(a,b,g,c,k){if(-1<g.search(e)){a=b;g=g.split('"')[1];var d=h}else 8==k||9==k?(g="tsr",d=h):d=1<k?new Float32Array(k):0;if(!a[g]){k=a;b=g;if("object"==typeof d&&d.length)for(var f=d.length,l=new Float32Array(c*f),q=0;q<c;q++)for(var t=0;t<f;t++)l[q*f+t]=d[t];else if("number"==typeof d)for(l=new Float32Array(c),q=0;q<c;q++)l[q]=d;else Ca.va("Wrong storage default value");k[b]=l}return a[g]}var e=new RegExp(/pose.bones\[".+"\]/g),
h=c.b(),k=a.sa={type:0,jB:0,wH:0,Oa:null,gz:null,$D:null,Pj:new Int8Array(8)};k.wH=1/za.Sm;var d=a.fcurves,f={},q={},t=0,m;for(m in d){var u=d[m];Object.keys(u);for(var n in u){var r=u[n],A=r.Xf,p=r.num_channels;t||(t=A.length);r=g(f,q,m,t,p);var v=r.length/t,B=b(m,n|0);if(B==B)if(-1<m.indexOf("scale")&&8===p)for(p=0;p<t;p++)r[p*v+B]=A[p],r[p*v+B+1]=A[p],r[p*v+B+2]=A[p];else for(p=0;p<t;p++)r[p*v+B]=A[p]}if(-1<m.indexOf("rotation_quaternion")&&0 in u)for(r=u[0],A=r.Xf,p=r.num_channels,r=g(f,q,m,t,
p),v=r.length/t,p=0;p<t;p++)0>A[p]&&(r[p*v+6]=-r[p*v+6],r[p*v+7]=-r[p*v+7],r[p*v+8]=-r[p*v+8])}l._8(f)&&(k.Oa=f);l._8(q)&&(k.gz=q);k.jB=t;k.$D=a.SL;"tsr"in f&&oa(d,k.Pj);("color"in f||"energy"in f)&&ca(d,k.Pj);("light_settings.environment_energy"in f||"horizon_color"in f||"zenith_color"in f||"mist_settings.intensity"in f||"mist_settings.depth"in f||"mist_settings.start"in f||"mist_settings.height"in f||"b4w_fog_color"in f)&&ea(d,k.Pj);M(a);Wa.push(a)};f.QP=function(a,b){return(b-a)*za.Sm+1};f.uM=
function(a,b,g,c,e,h){var k=new Float32Array(2),d=new Float32Array(2),f=new Float32Array(2),l=new Float32Array(2),q=b[1],t=b[2],m=b[a.last_frame_offset+1];a=b[a.last_frame_offset+2];for(var u=0,n=0,r=null;e<=h;e++)if(e<q)for(var p=0;p<za.Sm;p++)g[u++]=t;else if(e>m)for(p=0;p<za.Sm;p++)g[u++]=a;else{var A=b[n],v=3;0===A&&(v+=2);0===r&&(v+=2);var B=2===A?0:1;if(b[n+1]==b[n+v+1])r=A,n+=v;else{p=0;e==b[n+1]&&(B&&(c[u]=1),g[u]=b[n+2],u++,p++);if(e==m)for(;p<za.Sm;p++)g[u++]=a;else for(k[0]=b[n+1],k[1]=
b[n+2],0!==A?(d[0]=0,d[1]=0):0===r?(d[0]=b[n+5],d[1]=b[n+6]):(d[0]=b[n+3],d[1]=b[n+4]),0!==A?(f[0]=0,f[1]=0):(f[0]=b[n+v+3],f[1]=b[n+v+4]),l[0]=b[n+v+1],l[1]=b[n+v+2];p<za.Sm;p++){var E=e+p/za.Sm;switch(A){case 0:var z=k,I=d,G=f,P=l,Q=[],y=[];Q[0]=z[0]-I[0];Q[1]=z[1]-I[1];y[0]=P[0]-G[0];y[1]=P[1]-G[1];var C=P[0]-z[0];var J=Math.abs(Q[0]);var ja=Math.abs(y[0]);0!=J+ja&&J+ja>C&&(C/=J+ja,I[0]=z[0]-C*Q[0],I[1]=z[1]-C*Q[1],G[0]=P[0]-C*y[0],G[1]=P[1]-C*y[1]);B&&(c[u]=1);g[u]=S(Da(0,1,E,k[0],d[0],f[0],l[0]),
k[1],d[1],f[1],l[1]);u++;break;case 1:B&&(c[u]=1);z=k[0];I=k[1];G=(l[1]-I)/(l[0]-z);g[u]=G*E+(I-G*z);u++;break;case 2:B&&(c[u]=1);g[u]=b[n+2];u++;break;default:Ca.va("Unknown keyframe interpolation mode: "+A)}}e+1==b[n+v+1]&&(r=A,n+=v)}}};f.apply=X;f.rM=function(a,b,g,c){c=c||0;var e=l._19("uuid",g,Wa);if(e){Na(a,c);if(V(a,b,e,c)){wa(a,c);return}a.Za[c]=null}Q.error('Unsupported object: "'+a.name+'" or animation uuid: "'+g+'"')};f.vJ=function(a,b){var g=l._19("name",b,Wa)||l._19("name",b+"_B4W_BAKED",
Wa);if(g){if(0==g.sa.type)return!1}else if(!(Ha(a,b)||sa.is_mesh(a)&&Ga(a,b)))return!1;return!0};f.get_slot_num_by_anim=function(a,b){a=a.Za;for(var g=0;g<a.length;g++){var c=a[g];if(c&&O(c.Hj)==O(b))return g}return-1};f.PP=function(a,b){return(a=a.Za[b])&&a.Hj?O(a.Hj):null};f.remove=function(a){a.Za.length=0;a=Pa.indexOf(a);-1!=a&&Pa.splice(a,1)};f.KS=function(a){for(var b=Wa.length-1;0<=b;b--)Wa[b].TL==a&&Wa.splice(b,1)};f.apply_to_first_empty_slot=function(a,b){if(!a.Za.length)return X(a,null,
b,0)?0:-1;for(var g=0;g<a.Za.length;g++)if(!a.Za[g])return X(a,null,b,g)?g:-1};f.set_skel_mix_factor=function(a,b,g,c){a=a.ka;a.io=(b-a.Zf)/g;a.ho=b;a.Fj&&a.Fj();a.Fj=c};f.mix_from_cur_pos=function(a,b,g,c){a=a.ka;a.Mi[1]=b;a.io=1/g;a.ho=1;a.Fj&&a.Fj();a.Fj=c;a.$l=null;a.Kl=null;a.mi=!0};f.set_speed=function(a,b,g){ha(a.Za,g,function(a){a.speed=b})};f.get_speed=function(a,b){return a.Za[b].speed};f.get_anim_start_frame=function(a,b){return a.Za[b].start};f.get_anim_length=function(a,b){return a.Za[b].length};
f.cleanup=function(){Pa.length=0;Wa.length=0};f.oP=function(a){var b=(a[0]||a[1]||a[2]).Xf.length,g=La,c=Ba,e=!!a[0];e||(a[0]={Xf:new Float32Array(b),num_channels:8});var h=!!a[1];h||(a[1]={Xf:new Float32Array(b),num_channels:8});var k=!!a[2];k||(a[2]={Xf:new Float32Array(b),num_channels:8});a[3]={Xf:new Float32Array(b),num_channels:8};for(var d=0;d<b;d++)c[0]=e?a[0].Xf[d]:0,c[1]=h?a[1].Xf[d]:0,c[2]=k?a[2].Xf[d]:0,l.Y(c,g),a[0].Xf[d]=g[3],a[1].Xf[d]=g[0],a[2].Xf[d]=g[1],a[3].Xf[d]=g[2]};f.PF=ua;f.WT=
function(a,b){for(var g=7,c=0,e=0;e<Wa.length;e++){var h=Wa[e];if(h.name==b){c=h.sa.type;break}}0==c&&(Ga(a,b)?c=30:(e=Ha(a,b))&&"EMITTER"==e.Kw&&(c=50));for(e=0;8>e;e++)if(b=a.Za[e]){if(b.type==c)return e}else e<g&&(g=e);return g}});w.a=f},function(D,w,f){D=f(0);var N=f(35),U=f(15),n=f(4),y=f(21),d=f(1),m=f(6),C=f(8),v=f(2),r=f(3),p=f(7);f=Object(D.a)("__input",function(f,a){function z(a){var b=M.detect_mobile();return(20!=a||navigator.getVRDevices||navigator.getVRDisplays||b&&D())&&(10!=a||b&&window.DeviceOrientationEvent)?
!0:!1}function k(a,b){if(!z(a))return null;var c={type:a,eh:!1,Lh:[],ri:[],lk:[],Le:[],mk:[],nk:[],Xr:[],EG:[],fk:[],Kk:[],Ik:[],Hk:[],element:b,pj:!0,Oc:[],xw:new Float32Array(2),YR:0,distortion_coefs:new Float32Array(2),chromatic_aberration_coefs:new Float32Array(4),Hs:null,Un:null,zj:null,ce:null,orientation:C.create(),position:r.create(),hi:window.VRFrameData?new VRFrameData:null,fC:m.b(),Zj:new Float32Array(4),$j:new Float32Array(4),ji:0,Ki:0,Ns:0,lm:0,aj:0,Li:0,Vm:[],kl:[0,0,0,0,0,0,0,0,0,0,
0,0],EF:[0,0,0,0,0,0,0,0,0,0,0,0],kv:[]};c.Zj[0]=c.Zj[1]=c.Zj[2]=c.Zj[3]=Math.PI/4;c.$j[0]=c.$j[1]=c.$j[2]=c.$j[3]=Math.PI/4;30==a||40==a||50==a?(c.eh=!!b,50==a?document.addEventListener("touchstart",function(){}):40==a&&(c.pj=!1)):10==a?c.eh=!0:20==a&&l(c);return c}function c(b,c){10==b||20==b?c=window:c||(c=40==b?document:oa.get_container());for(var e=0;e<ra.length;e++)if(ra[e].type==b&&ra[e].element==c)return ra[e];c=k(b,c);60!=b&&70!=b&&80!=b&&90!=b||c.kv.push(a.GMPD_BUTTON_0,a.GMPD_BUTTON_1,
a.GMPD_BUTTON_2,a.GMPD_BUTTON_3,a.GMPD_BUTTON_4,a.GMPD_BUTTON_5,a.GMPD_BUTTON_6,a.GMPD_BUTTON_7,a.GMPD_BUTTON_8,a.GMPD_BUTTON_9,a.GMPD_BUTTON_10,a.GMPD_BUTTON_11,a.GMPD_BUTTON_12,a.GMPD_BUTTON_13,a.GMPD_BUTTON_14,a.GMPD_BUTTON_15,a.GMPD_BUTTON_16,a.GMPD_BUTTON_17,a.GMPD_BUTTON_18,a.GMPD_BUTTON_19,a.GMPD_BUTTON_20,a.GMPD_BUTTON_21,a.GMPD_BUTTON_22,a.GMPD_BUTTON_23,a.GMPD_BUTTON_24,a.GMPD_BUTTON_25,a.GMPD_AXIS_0,a.GMPD_AXIS_1,a.GMPD_AXIS_2,a.GMPD_AXIS_3,a.GMPD_AXIS_4,a.GMPD_AXIS_5,a.GMPD_AXIS_6,a.GMPD_AXIS_7,
a.GMPD_AXIS_8,a.GMPD_AXIS_9,a.GMPD_AXIS_10,a.GMPD_AXIS_11);c&&ra.push(c);return c}function l(a){20==a.type&&(navigator.getVRDisplays?navigator.getVRDisplays().then(function(b){0<b.length&&(a.ce=b[0],a.eh=!0,a.ce.getFrameData(a.hi),a.Hs&&a.Hs())},function(){ea.Ma("WebVR displays are not found.");a.eh=!1}):navigator.getVRDevices?(navigator.getVRDevices().then(function(b){ka(a,b);b.length&&(a.eh=!0);a.Hs&&a.Hs()},function(){ea.Ma("WebVR devices are not found.");a.eh=!1}),h(a,S.webvr)):(b(a),a.eh=!0))}
function b(a){var b=S.nonwebvr;a.lm=b.lm;a.aj=b.aj;a.Li=b.Li;h(a,b);a.ji=b.ji;a.Ki=b.Ki;a.Ns=b.Ns;G(a)}function h(a,b){a.distortion_coefs[0]=b.distortion_coefs[0];a.distortion_coefs[1]=b.distortion_coefs[1];a.chromatic_aberration_coefs[0]=b.chromatic_aberration_coefs[0];a.chromatic_aberration_coefs[1]=b.chromatic_aberration_coefs[1];a.chromatic_aberration_coefs[2]=b.chromatic_aberration_coefs[2];a.chromatic_aberration_coefs[3]=b.chromatic_aberration_coefs[3]}function G(a){var b=Math.atan(a.ji/2/a.Ns*
S.nonwebvr.rF);b&&(a.Zj[0]=a.$j[0]=Math.min(b,Math.PI/3));b&&(a.Zj[1]=a.$j[3]=Math.min(b,Math.PI/3));b&&(a.Zj[2]=a.$j[2]=Math.min(b,Math.PI/3));b&&(a.Zj[3]=a.$j[1]=Math.min(b,Math.PI/3))}function ka(a,b){var c=b.filter(function(a){return a instanceof HMDVRDevice}),e=null;c.length&&(e=c[0]);c=null;e&&(c=b.filter(function(a){return-1!==a.deviceName.toLowerCase().indexOf("oculus")&&a.hardwareUnitId==e.hardwareUnitId&&a instanceof PositionSensorVRDevice}));a.Un=e;a.zj=c}function u(a,b,c){switch(a.type){case 20:var e=
R(a,0);if(e&1){var h="left"==b?a.Zj:a.$j;p.copy(h,c)}else if(h=a.ce||a.Un)h=h.getEyeParameters(b),(h=h.fieldOfView||h.currentFieldOfView)?(c[0]=v.T(h.upDegrees),c[1]=v.T(h.rightDegrees),c[2]=v.T(h.downDegrees),c[3]=v.T(h.leftDegrees)):e&16&&(e=X,"left"==b?y.copy(a.hi.leftProjectionMatrix,e):y.copy(a.hi.rightProjectionMatrix,e),(a=y.invert(e,e))||(a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),r.transformMat4([1,1,-1],a,ua),c[0]=Math.atan(-ua[1]/ua[2]),c[1]=Math.atan(-ua[0]/ua[2]),r.transformMat4([-1,-1,-1],
a,ua),c[2]=Math.atan(ua[1]/ua[2]),c[3]=Math.atan(ua[0]/ua[2]));break;default:ea.error("fov is undefined for device: ",a.type)}return c}function E(a,b,c){switch(a.type){case 20:a.ce&&("left"==b?y.copy(a.hi.leftProjectionMatrix,c):"right"==b?y.copy(a.hi.rightProjectionMatrix,c):ea.error("Unknown type of eye: ",b));break;default:ea.error("Projection matrix is undefined for device: ",a.type)}return c}function R(a,b){switch(b){case 0:return b=0,navigator.getVRDisplays&&(b|=8,a.hi&&(b|=16)),navigator.getVRDevices&&
(b=Da.is_mobile_device?b|4:b|2),b||1;case 23:var c=a.ce||a.Un;return c?(b=c.getEyeParameters("left"),c=c.getEyeParameters("right"),a.ce?c.offset[0]-b.offset[0]:c.eyeTranslation.x-b.eyeTranslation.x):a.ji}}function O(a,b){if(a){for(var e=0;e<a.buttons.length;e++)b.Vm[e]=a.buttons[e].value||+a.buttons[e].pressed;if(a.axes)for(e=0;e<a.axes.length;e++)b.kl[e]=a.axes[e];if(a=a.pose)e=c(20).fC,a.position&&m.D(a.position,e,b.position),a.orientation&&m.A(a.orientation,e,b.orientation)}}function L(a){for(var b=
0;b<a.Vm;b++)a.Vm[b]=0;for(b=0;b<a.kl.length;b++)a.EF[b]=a.kl[b],a.kl[b]=0;a.position.set(v.m);a.orientation.set(v.k)}function B(a,b){b=a.indexOf(b);0<=b&&(a[b]=null)}function w(a){return null===a}function K(a,b,c,h){switch(b){case 130:c&&B(a.Lh,c);if(h||a.ri.every(w)&&a.Lh.every(w))a.Lh.length=0,a.ri.length=0,b=a.Oc.indexOf(141),0<=b&&(a.Oc.splice(b,1),a.element.removeEventListener("deviceorientation",T,!1));break;case 140:c&&B(a.ri,c);if(h||a.ri.every(w)&&a.Lh.every(w))a.Lh.length=0,a.ri.length=
0,b=a.Oc.indexOf(141),0<=b&&(a.Oc.splice(b,1),a.element.removeEventListener("deviceorientation",T,!1));break;case 50:c&&B(a.lk,c);if(h||a.lk.every(w))a.lk.length=0,b=a.Oc.indexOf(b),0<=b&&(a.Oc.splice(b,1),a.element.removeEventListener("mousedown",J,!1));break;case 40:c&&B(a.Le,c);if(h||a.Le.every(w))a.Le.length=0,b=a.Oc.indexOf(b),0<=b&&(a.Oc.splice(b,1),a.element.removeEventListener("mousemove",A,!1));break;case 41:c&&B(a.Le,c);if(h||a.Le.every(w))a.Le.length=0,b=a.Oc.indexOf(b),0<=b&&(a.Oc.splice(b,
1),a.element.removeEventListener("mousemove",aa,!1));break;case 60:c&&B(a.mk,c);if(h||a.mk.every(w))a.mk.length=0,b=a.Oc.indexOf(b),0<=b&&(a.Oc.splice(b,1),a.element.removeEventListener("mouseout",P,!1),a.element.removeEventListener("mouseup",q,!1));break;case 70:c&&B(a.nk,c);if(h||a.nk.every(w))a.nk.length=0,b=a.Oc.indexOf(b),0<=b&&(a.Oc.splice(b,1),a.element.removeEventListener("wheel",da,!1));break;case 90:c&&B(a.Xr,c);if(h||a.Xr.every(w))a.Xr.length=0,b=a.Oc.indexOf(b),0<=b&&(a.Oc.splice(b,1),
a.element.removeEventListener("keydown",I,!1));break;case 80:c&&B(a.fk,c);if(h||a.fk.every(w))a.fk.length=0,b=a.Oc.indexOf(b),0<=b&&(a.Oc.splice(b,1),a.element.removeEventListener("keyup",t,!1));break;case 100:c&&B(a.Kk,c);if(h||a.Kk.every(w))a.Kk.length=0,b=a.Oc.indexOf(b),0<=b&&(a.Oc.splice(b,1),a.element.removeEventListener("touchstart",e,!1));break;case 110:c&&B(a.Ik,c);if(h||a.Ik.every(w))a.Ik.length=0,b=a.Oc.indexOf(b),0<=b&&(a.Oc.splice(b,1),a.element.removeEventListener("touchmove",ma,!1));
break;case 120:if(c&&B(a.Hk,c),h||a.Hk.every(w))a.Hk.length=0,b=a.Oc.indexOf(b),0<=b&&(a.Oc.splice(b,1),a.element.removeEventListener("touchend",ja,!1))}}function ha(a,b){v._27(a,v.w,b);a="orientation"in window?v.T(window.orientation):"orientation"in window.screen?v.T(window.screen.orientation.angle):0;a=C.setAxisAngle(v.c,a,Ha);C.multiply(b,a,b);return b}function T(a){var b=ua;null===a.alpha||null===a.beta||null===a.gamma?b[0]=b[1]=b[2]=0:(b[0]=v.T(a.alpha),b[1]=v.T(a.beta),b[2]=v.T(a.gamma));a=
c(10,a.currentTarget);for(var e=0;e<a.ri.length;e++){var h=a.ri[e];h&&(r.copy(b,la),h(la))}if(a.Lh.length)for(b=ha(b,Ga),e=0;e<a.Lh.length;e++)if(h=a.Lh[e])C.copy(b,sa),h(sa);for(e=0;e<a.Lh.length;e++)a.Lh[e]||a.Lh.splice(e,1);for(e=0;e<a.ri.length;e++)a.ri[e]||a.ri.splice(e,1)}function V(a,b){switch(a.type){case 30:a.xw[0]=b.clientX,a.xw[1]=b.clientY,a.YR=b.which}}function A(a){if(!ia||!(a.sourceCapabilities&&a.sourceCapabilities.firesTouchEvents||5==a.mozInputSource)){var b=c(30,a.currentTarget);
V(b,a);for(var e=0;e<b.Le.length;e++){var h=b.Le[e];h&&(Ca[0]=a.clientX,Ca[1]=a.clientY,h(Ca))}b.pj&&a.preventDefault();for(e=0;e<b.Le.length;e++)b.Le[e]||b.Le.splice(e,1)}}function aa(a){if(!ia||!(a.sourceCapabilities&&a.sourceCapabilities.firesTouchEvents||5==a.mozInputSource)){var b=c(30,a.currentTarget);V(b,a);for(var e=0;e<b.Le.length;e++){var h=b.Le[e];if(h){if("number"==typeof a.movementX)var k=a.movementX,d=a.movementY;else"number"==typeof a.webkitMovementX?(k=a.webkitMovementX,d=a.webkitMovementY):
"number"==typeof a.mozMovementX?(k=a.mozMovementX,d=a.mozMovementY):d=k=0;Ca[0]=k;Ca[1]=d;h(Ca)}}b.pj&&a.preventDefault();for(e=0;e<b.Le.length;e++)b.Le[e]||b.Le.splice(e,1)}}function J(a){if(!ia||!(a.sourceCapabilities&&a.sourceCapabilities.firesTouchEvents||5==a.mozInputSource)){var b=c(30,a.currentTarget);V(b,a);for(var e=0;e<b.lk.length;e++){var h=b.lk[e];h&&h(a.which)}b.pj&&(window.frameElement&&window.frameElement.focus(),a.preventDefault());for(e=0;e<b.lk.length;e++)b.lk[e]||b.lk.splice(e,
1)}}function P(a){!oa.sG(a.relatedTarget)&&a.which&&q(a)}function q(a){if(!ia||!(a.sourceCapabilities&&a.sourceCapabilities.firesTouchEvents||5==a.mozInputSource)){var b=c(30,a.currentTarget);V(b,a);for(var e=0;e<b.mk.length;e++){var h=b.mk[e];h&&h(a.which)}b.pj&&a.preventDefault();for(e=0;e<b.mk.length;e++)b.mk[e]||b.mk.splice(e,1)}}function da(a){for(var b=c(30,a.currentTarget),e=0;e<b.nk.length;e++){var h=b.nk[e];if(h){var k=a;var d=0;k.wheelDelta?d=0==k.wheelDelta%120?k.wheelDelta/120:v._50(k.wheelDelta):
k.deltaY&&(d=0==k.deltaY%3?-k.deltaY/3:-v._50(k.deltaY));k=v.M(100*d,-2E3,2E3);h(k)}}b.pj&&a.preventDefault();for(e=0;e<b.nk.length;e++)b.nk[e]||b.nk.splice(e,1)}function I(a){for(var b=c(40,a.currentTarget),e=a.ctrlKey||a.altKey||a.metaKey?b.EG:b.Xr,h=0;h<e.length;h++){var k=e[h];k?k(a.keyCode):e.splice(h--,1)}b.pj&&a.preventDefault()}function t(a){for(var b=c(40,a.currentTarget),e=0;e<b.fk.length;e++){var h=b.fk[e];h&&h(a.keyCode)}b.pj&&a.preventDefault();for(e=0;e<b.fk.length;e++)b.fk[e]||b.fk.splice(e,
1)}function e(a){for(var b=c(50,a.currentTarget),e=0;e<b.Kk.length;e++){var h=b.Kk[e];h&&h(a.targetTouches)}for(e=0;e<b.Kk.length;e++)b.Kk[e]||b.Kk.splice(e,1)}function ma(a){for(var b=c(50,a.currentTarget),e=0;e<b.Ik.length;e++){var h=b.Ik[e];h&&h(a.targetTouches)}b.pj&&a.preventDefault();for(e=0;e<b.Ik.length;e++)b.Ik[e]||b.Ik.splice(e,1)}function ja(a){for(var b=c(50,a.currentTarget),e=0;e<b.Hk.length;e++){var h=b.Hk[e];h&&h(a.targetTouches)}for(e=0;e<b.Hk.length;e++)b.Hk[e]||b.Hk.splice(e,1)}
function pa(a){switch(a){case 0:a=60;break;case 1:a=70;break;case 2:a=80;break;case 3:a=90;break;default:a=60}return a}function ta(a){function b(){document.pointerLockElement===c||document.webkitPointerLockElement===c||document.mozPointerLockElement===c?a.value=1:(a.value=0,document.removeEventListener("pointerlockchange",b,!1),document.removeEventListener("webkitpointerlockchange",b,!1),document.removeEventListener("mozpointerlockchange",b,!1))}var c=a.element;document.addEventListener("pointerlockchange",
b,!1);document.addEventListener("webkitpointerlockchange",b,!1);document.addEventListener("mozpointerlockchange",b,!1);var e=c.requestPointerLock||c.webkitRequestPointerLock||c.mozRequestPointerLock;"function"===typeof e&&e.apply(c)}function D(){return window.document.fullscreenEnabled||window.document.mozFullScreenEnabled||window.document.msFullscreenEnabled||window.document.webkitFullscreenEnabled?!0:!1}var M=Object(N.a)(f),oa=Object(U.a)(f),ca=Object(n.a)(f),ea=Object(d.a)(f),Da=ca.wa,S=ca.hG,
Na=m.b(),wa=m.b(),X=y.create();a.DEVICE_GYRO=10;a.DEVICE_HMD=20;a.DEVICE_MOUSE=30;a.DEVICE_KEYBOARD=40;a.DEVICE_TOUCH=50;a.Gt=60;a.Hy=70;a.Iy=80;a.Jy=90;a.HMD_WEBVR_DESKTOP=2;a.HMD_WEBVR_MOBILE=4;a.HMD_NON_WEBVR=1;a.HMD_WEBVR1=8;a.HMD_WEBVR1_1=16;a.HMD_WEBVR_TYPE=0;a.HMD_ORIENTATION_QUAT=10;a.HMD_POSITION=20;a.$C=21;a.aD=22;a.HMD_EYE_DISTANCE=23;a.HMD_DISTORTION=24;a.HMD_BASELINE_DIST=25;a.HMD_SCREEN_LENS_DIST=26;a.HMD_SCREEN_WIDTH=27;a.HMD_SCREEN_HEIGHT=28;a.HMD_BEVEL_SIZE=29;a.aW=30;a.bW=31;a.MOUSE_LOCATION=
40;a.hD=41;a.MOUSE_DOWN_WHICH=50;a.MOUSE_UP_WHICH=60;a.MOUSE_WHEEL=70;a.KEYBOARD_UP=80;a.KEYBOARD_DOWN=90;a.gD=91;a.TOUCH_START=100;a.TOUCH_MOVE=110;a.TOUCH_END=120;a.GYRO_ORIENTATION_QUAT=130;a.GYRO_ORIENTATION_ANGLES=140;a.GMPD_BUTTON_0=300;a.GMPD_BUTTON_1=301;a.GMPD_BUTTON_2=302;a.GMPD_BUTTON_3=303;a.GMPD_BUTTON_4=304;a.GMPD_BUTTON_5=305;a.GMPD_BUTTON_6=306;a.GMPD_BUTTON_7=307;a.GMPD_BUTTON_8=308;a.GMPD_BUTTON_9=309;a.GMPD_BUTTON_10=310;a.GMPD_BUTTON_11=311;a.GMPD_BUTTON_12=312;a.GMPD_BUTTON_13=
313;a.GMPD_BUTTON_14=314;a.GMPD_BUTTON_15=315;a.GMPD_BUTTON_16=316;a.GMPD_BUTTON_17=317;a.GMPD_BUTTON_18=318;a.GMPD_BUTTON_19=319;a.GMPD_BUTTON_20=320;a.GMPD_BUTTON_21=321;a.GMPD_BUTTON_22=322;a.GMPD_BUTTON_23=323;a.GMPD_BUTTON_24=324;a.GMPD_BUTTON_25=325;a.GMPD_TRACKPAD_BUTTON=300;a.GMPD_TRIGGER_BUTTON=301;a.GMPD_GRIPS_BUTTON=302;a.GMPD_MENU_BUTTON=303;a.GMPD_AXIS_0=326;a.GMPD_AXIS_1=327;a.GMPD_AXIS_2=328;a.GMPD_AXIS_3=329;a.GMPD_AXIS_4=330;a.GMPD_AXIS_5=331;a.GMPD_AXIS_6=332;a.GMPD_AXIS_7=333;a.GMPD_AXIS_8=
334;a.GMPD_AXIS_9=335;a.GMPD_AXIS_10=336;a.GMPD_AXIS_11=337;var Ga=C.create(),Ha=C.create(),ua=r.create(),Ca=new Float32Array(2),la=r.create(),sa=C.create(),ia="ontouchstart"in document.documentElement,ra=[];a.can_use_device=z;a.init=function(){if("HMD"==Da.stereo||"NONE"==Da.stereo&&Da.is_mobile_device){var a=c(20);a&&document.addEventListener("onvrdisplayconnect",function(b){a.ce=b.display;a.eh=!0;a.ce.getFrameData(a.hi)})}};a.get_device_by_type_element=c;a.US=l;a.switch_prevent_default=function(a,
b){a.pj=b};a.reset_device=function(a){switch(a.type){case 20:if(a.eh)if(a.ce)a.ce.resetPose();else if(a.zj)for(var b=0;b<a.zj.length;b++)a.zj[b].resetSensor();break;default:ea.error("reset_device() is undefined for device: ",a.type)}};a.get_vector_param=function(a,b,c){switch(b){case 10:a:switch(a.type){case 20:r.copy(v.k,c);if(a.ce)c[0]=a.orientation[0],c[1]=a.orientation[1],c[2]=a.orientation[2],c[3]=a.orientation[3];else if(a.zj)for(b=0;b<a.zj.length;b++){var e=a.zj[b];e=e.getState&&e.getState()||
e.getImmediateState&&e.getImmediateState();e.orientation&&(c[0]=e.orientation.x,c[1]=e.orientation.y,c[2]=e.orientation.z,c[3]=e.orientation.w)}a=c;break a;default:ea.error("orientation_quat is undefined for device: ",a.type),a=c}return a;case 20:a:switch(a.type){case 20:r.copy(v.n,c);if(a.ce)c[0]=a.position[0],c[1]=a.position[1],c[2]=a.position[2];else if(a.zj)for(b=0;b<a.zj.length;b++)e=a.zj[b],e=e.getState&&e.getState()||e.getImmediateState&&e.getImmediateState(),e.position&&(c[0]=e.position.x,
c[1]=-e.position.z,c[2]=e.position.y);a=c;break a;default:ea.error("position is undefined for device: ",a.type),a=c}return a;case 21:return u(a,"left",c);case 22:return u(a,"right",c);case 30:return E(a,"left",c);case 31:return E(a,"right",c);case 40:case 41:return c[0]=a.xw[0],c[1]=a.xw[1],c}};a.get_value_param=R;a.set_config=function(a,b,c){switch(a.type){case 20:if(R(a,0)&8)break;switch(b){case 24:a.distortion_coefs[0]=c[0];a.distortion_coefs[1]=c[1];break;case 23:a.ji=c;G(a);break;case 25:a.Ki=
c;G(a);break;case 26:a.Ns=c;G(a);break;case 27:a.lm=c;G(a);break;case 28:a.aj=c;G(a);break;case 29:a.Li=c,G(a)}break;case 60:case 70:case 80:case 90:a.kv[b]=c}};a.nQ=function(a,b){b-=300;return b<a.Vm.length?a.Vm[a.kv[b]-300]:!1};a.mQ=function(a,b){return b-326<a.kl.length?a.kl[a.kv[b-300]-326]:0};a.get_gamepad_position=function(a,b){b.set(a.position);return b};a.get_gamepad_orientation=function(a,b){b.set(a.orientation);return b};a.update=function(){for(var a=navigator.getGamepads?navigator.getGamepads():
navigator.webkitGetGamepads?navigator.webkitGetGamepads:[],b=0;b<ra.length;b++){var c=ra[b];switch(c.type){case 60:L(c);O(a[0],c);break;case 70:L(c);O(a[1],c);break;case 80:L(c);O(a[2],c);break;case 90:L(c);O(a[3],c);break;case 20:if(c.ce){var e=c.ce;if(c.hi&&e.getFrameData(c.hi)){var h=c.hi.pose,k=v._26(c.hi.leftViewMatrix,ua);c.ji=2*r.length(k)}else e.getPose&&(h=e.getPose());h&&(k=C.setAxisAngle(v.d,Math.PI/2,Ga),e.stageParameters&&e.stageParameters.sittingToStandingTransform?(e=m.d(e.stageParameters.sittingToStandingTransform,
Na),m.m(wa),k=m.r(k,wa),e=m.q(k,e,c.fC)):(m.m(Na),e=m.r(k,c.fC)),h.orientation&&m.A(h.orientation,e,c.orientation),h.position&&m.D(h.position,e,c.position))}}}};a.attach_param_cb=function(a,b,c){switch(b){case 130:a.Lh.push(c);b=141;break;case 140:a.ri.push(c);b=141;break;case 50:a.lk.push(c);break;case 40:case 41:a.Le.push(c);break;case 60:a.mk.push(c);break;case 70:a.nk.push(c);break;case 90:a.Xr.push(c);break;case 91:a.EG.push(c);b=90;break;case 80:a.fk.push(c);break;case 100:a.Kk.push(c);break;
case 110:a.Ik.push(c);break;case 120:a.Hk.push(c)}if(-1==a.Oc.indexOf(b)&&(a.Oc.push(b),a.eh))switch(b){case 50:/iPad|iPhone|iPod/.test(navigator.platform)||a.element.addEventListener("mousedown",J,!1);break;case 40:a.element.addEventListener("mousemove",A,!1);break;case 41:a.element.addEventListener("mousemove",aa,!1);break;case 60:/iPad|iPhone|iPod/.test(navigator.platform)||(a.element!=window&&a.element.addEventListener("mouseout",P,!1),a.element.addEventListener("mouseup",q,!1));break;case 70:a.element.addEventListener("wheel",
da,!1);break;case 90:a.element.addEventListener("keydown",I,!1);break;case 80:a.element.addEventListener("keyup",t,!1);break;case 100:a.element.addEventListener("touchstart",e,!1);break;case 110:a.element.addEventListener("touchmove",ma,!1);break;case 120:a.element.addEventListener("touchend",ja,!1);break;case 141:a.element.addEventListener("deviceorientation",T,!1)}};a.detach_param_cb=function(a,b,c){K(a,b,c,!1)};a.GQ=ha;a.cleanup=function(){for(var a=0;a<ra.length;a++)for(var b=ra[a],c=0;c<b.Oc.length;c++)K(b,
b.Oc[c],null,!0);ra.length=0};a.get_pressed_gmpd_btn=function(a){a=c(pa(a));for(var b=0;b<a.Vm.length;b++)if(a.Vm[b])return b+300;return-1};a.get_moved_gmpd_axis=function(a){a=c(pa(a));for(var b=0;b<a.kl.length;b++)if(a.EF[b]-a.kl[b])return b+326;return-1};a.pv=function(){for(var a=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[],b=0;b<a.length;b++)if(a[b])return b;return 0};a.DQ=function(){var a=c(20);return a&&a.ce};a.WL=function(a){a.element.addEventListener("mousedown",
function(){a.value||ta(a)},!1)};a.add_click_listener=function(a,b){Da.is_mobile_device?a.addEventListener("touchend",b):a.addEventListener("mouseup",b)};a.remove_click_listener=function(a,b){Da.is_mobile_device?a.removeEventListener("touchend",b):a.removeEventListener("mouseup",b)};a.check_fullscreen=D});w.a=f},function(D,w,f){D=f(0);var N=f(15),U=f(1);f=Object(D.a)("container",function(f,y){var d=Object(N.a)(f),m=Object(U.a)(f);y.get_canvas=d.get_canvas;y.get_canvas_hud=d.get_canvas_hud;y.get_container=
d.get_container;y.insert_to_container=function(f,n){2!=arguments.length?m.error("insert_to_container(): two arguments required"):f&&n&&d.insert_to_container(f,n)};y.set_canvas_offsets=function(f,n){m.Ma("container.set_canvas_offsets() deprecated. Not needed anymore. Use the container.client_to_canvas_coords method.");return d.set_canvas_offsets(f,n)};y.update_canvas_offsets=function(){m.Ma("container.update_canvas_offsets() deprecated. Not needed anymore. Use the container.client_to_canvas_coords method.");
d.update_canvas_offsets()};y.client_to_canvas_coords=function(f,m,n){n||(n=new Float32Array(2));return d.client_to_canvas_coords(f,m,n)};y.client_to_element_coords=function(f,m,n,p){p||(p=new Float32Array(2));return d.client_to_element_coords(f,m,n,p)};y.get_coords_target_space=function(f,m,n){n||(n=new Float32Array(2));return d.get_coords_target_space(f,m,n)};y.force_offsets_updating=function(){m.Ma("container.force_offsets_updating() deprecated. Not needed anymore. Use the container.client_to_canvas_coords method.");
d.force_offsets_updating()};y.resize=function(f,m,n){d.resize(f,m,n)};y.resize_to_container=function(f){d.resize_to_container(f||!1)}});w.a=f},function(D,w,f){D=f(0);var N=f(25),U=f(9),n=f(19),y=f(1),d=f(8),m=f(13),C=f(6),v=f(2),r=f(3);f=Object(D.a)("transform",function(f,z){var a=Object(U.a)(f),p=Object(n.a)(f),k=Object(y.a)(f),c=Object(m.a)(f),l=C.b(),b=r.create(),h=r.create(),G=new Float32Array(4),ka=d.create();z.set_translation=function(h,d,f,l){a.is_dynamic(h)?(b[0]=d,b[1]=f,b[2]=l,c.set_translation(h,
b),c.Ea(h),p.sync_transform(h)):k.error('Wrong object: "'+h.name+'" is not dynamic.')};z.set_translation_rel=function(h,d,f,l){a.is_dynamic(h)?(b[0]=d,b[1]=f,b[2]=l,c.set_translation_rel(h,b),c.Ea(h),p.sync_transform(h)):k.error('Wrong object: "'+h.name+'" is not dynamic.')};z.set_translation_v=function(b,h){a.is_dynamic(b)?(c.set_translation(b,h),c.Ea(b),p.sync_transform(b)):k.error('Wrong object: "'+b.name+'" is not dynamic.')};z.set_translation_rel_v=function(b,h){a.is_dynamic(b)?(c.set_translation_rel(b,
h),c.Ea(b),p.sync_transform(b)):k.error('Wrong object: "'+b.name+'" is not dynamic.')};z.set_translation_obj_rel=function(d,f,l,m,n){a.is_dynamic(d)?(b[0]=f,b[1]=l,b[2]=m,f=C.j(n.ka.na,h),n=C.g(n.ka.na,ka),v._63(b,1,n,f,b),c.set_translation(d,b),c.Ea(d),p.sync_transform(d)):k.error('Wrong object: "'+d.name+'" is not dynamic.')};z.get_translation=function(a,b){b||(b=new Float32Array(3));c.get_translation(a,b);return b};z.get_translation_rel=function(a,b){b||(b=new Float32Array(3));c.get_translation_rel(a,
b);return b};z.set_rotation=function(b,h,d,f,l){a.is_dynamic(b)?(G[0]=h,G[1]=d,G[2]=f,G[3]=l,c.set_rotation(b,G),c.Ea(b),p.sync_transform(b)):k.error('Wrong object: "'+b.name+'" is not dynamic.')};z.set_rotation_rel=function(b,h,d,f,l){a.is_dynamic(b)?(G[0]=h,G[1]=d,G[2]=f,G[3]=l,c.set_rotation_rel(b,G),c.Ea(b),p.sync_transform(b)):k.error('Wrong object: "'+b.name+'" is not dynamic.')};z.set_rotation_v=function(b,h){a.is_dynamic(b)?(c.set_rotation(b,h),c.Ea(b),p.sync_transform(b)):k.error('Wrong object: "'+
b.name+'" is not dynamic.')};z.set_rotation_rel_v=function(b,h){a.is_dynamic(b)?(c.set_rotation_rel(b,h),c.Ea(b),p.sync_transform(b)):k.error('Wrong object: "'+b.name+'" is not dynamic.')};z.get_rotation_rel_v=function(b,h){if(a.is_dynamic(b))return c.get_rotation_rel(b,h),h;k.error('Wrong object: "'+b.name+'" is not dynamic.')};z.get_rotation=function(a,b){b||(b=new Float32Array(4));c.get_rotation(a,b);return b};z.get_rotation_rel=function(a,b){b||(b=new Float32Array(4));c.get_rotation_rel(a,b);
return b};z.set_rotation_euler=function(h,d,f,l){a.is_dynamic(h)?(b[0]=d,b[1]=f,b[2]=l,c.set_rotation_euler(h,b),c.Ea(h),p.sync_transform(h)):k.error('Wrong object: "'+h.name+'" is not dynamic.')};z.get_rotation_euler=function(a,b){b||(b=new Float32Array(3));c.get_rotation_euler(a,b);return b};z.get_rotation_euler_rel=function(a,b){b||(b=new Float32Array(3));c.get_rotation_euler_rel(a,b);return b};z.set_rotation_euler_rel=function(h,d,f,l){a.is_dynamic(h)?(b[0]=d,b[1]=f,b[2]=l,c.set_rotation_euler_rel(h,
b),c.Ea(h),p.sync_transform(h)):k.error('Wrong object: "'+h.name+'" is not dynamic.')};z.set_rotation_euler_v=function(b,h){a.is_dynamic(b)?(c.set_rotation_euler(b,h),c.Ea(b),p.sync_transform(b)):k.error('Wrong object: "'+b.name+'" is not dynamic.')};z.set_rotation_euler_rel_v=function(b,h){a.is_dynamic(b)?(c.set_rotation_euler_rel(b,h),c.Ea(b),p.sync_transform(b)):k.error('Wrong object: "'+b.name+'" is not dynamic.')};z.set_scale=function(b,h){a.is_dynamic(b)?(c.set_scale(b,h),c.Ea(b)):k.error('Wrong object: "'+
b.name+'" is not dynamic.')};z.set_scale_rel=function(b,h){a.is_dynamic(b)?(c.set_scale_rel(b,h),c.Ea(b)):k.error('Wrong object: "'+b.name+'" is not dynamic.')};z.get_scale=function(a,b){return c.get_scale(a,b)};z.get_scale_rel=function(a,b){return c.get_scale_rel(a,b)};z.empty_reset_transform=function(b){if("EMPTY"!=b.type)k.error("Wrong object: "+b.name);else{for(var h=0;h<b.bf.length;h++)if(!a.is_dynamic(b.bf[h])){k.error('Wrong object: "'+b.bf[h].name+'" is not dynamic.');return}c.set_translation(b,
[0,0,0]);c.set_rotation(b,[0,0,0,1]);c.set_scale(b,1);c.Ea(b);p.sync_transform(b)}};z.get_object_size=function(b){return a.is_mesh(b)?c.get_object_size(b):(k.error("Wrong object: "+b.name),0)};z.get_object_center=function(b,h,d){if(!a.is_mesh(b))return k.error("Wrong object: "+b.name),null;d||(d=new Float32Array(3));return c.get_object_center(b,h,d)};z.move_local=function(b,h,d,f){a.is_dynamic(b)?(c.move_local(b,h,d,f),c.Ea(b),p.sync_transform(b)):k.error('Wrong object: "'+b.name+'" is not dynamic.')};
z.rotate_x_local=function(b,h){a.is_dynamic(b)?(h=d.setAxisAngle(v.d,h,G),c.MB(b,h),c.Ea(b),p.sync_transform(b)):k.error('Wrong object: "'+b.name+'" is not dynamic.')};z.rotate_y_local=function(b,h){a.is_dynamic(b)?(h=d.setAxisAngle(v.b,h,G),c.MB(b,h),c.Ea(b),p.sync_transform(b)):k.error('Wrong object: "'+b.name+'" is not dynamic.')};z.rotate_z_local=function(b,h){a.is_dynamic(b)?(h=d.setAxisAngle(v.f,h,G),c.MB(b,h),c.Ea(b),p.sync_transform(b)):k.error('Wrong object: "'+b.name+'" is not dynamic.')};
z.get_object_bounding_box=function(a){return N.n(a.ka.ai)};z.set_tsr=function(b,h){a.is_dynamic(b)?(c.set_tsr(b,h),c.Ea(b),p.sync_transform(b)):k.error('Wrong object: "'+b.name+'" is not dynamic.')};z.set_tsr_rel=function(b,h){a.is_dynamic(b)?(c.set_tsr_rel(b,h),c.Ea(b),p.sync_transform(b)):k.error('Wrong object: "'+b.name+'" is not dynamic.')};z.get_tsr=function(a,b){b||(b=C.b());c.get_tsr(a,b);return b};z.get_tsr_rel=function(a,b){b||(b=C.b());c.get_tsr_rel(a,b);return b};z.distance=function(a,
b){return c.distance(a,b)};z.set_matrix=function(b,h){a.is_dynamic(b)?(C.d(h,l),c.set_tsr(b,l),c.Ea(b),p.sync_transform(b)):k.error('Wrong object: "'+b.name+'" is not dynamic.')};z.set_matrix_rel=function(b,h){a.is_dynamic(b)?(C.d(h,l),c.set_tsr_rel(b,l),c.Ea(b),p.sync_transform(b)):k.error('Wrong object: "'+b.name+'" is not dynamic.')};z.get_matrix=function(a,b){b||(b=new Float32Array(16));c.get_tsr(a,l);C.x(l,b);return b};z.get_matrix_rel=function(a,b){b||(b=new Float32Array(16));c.get_tsr_rel(a,
l);C.x(l,b);return b}});w.a=f},function(D,w,f){function N(a,c){for(var k=a[1],b=1,h=2;h<a.length;h++)4!=h&&8!=h&&Math.abs(a[h])>Math.abs(k)&&(k=a[h],b=h);var d=Math.floor(b/3);b%=3;a=.5*Math.atan(2*k/(a[3*d+d]-a[3*b+b]));for(h=0;h<c.length;h++)c[h]=0==h||4==h||8==h?1:0;c[b+3*d]=-Math.sin(a);c[d+3*b]=Math.sin(a);c[d+3*d]=Math.cos(a);c[b+3*b]=Math.cos(a);return c}function U(a){return Math.sqrt(a[1]*a[1]+a[2]*a[2]+a[5]*a[5])}function n(a,c){for(var k=a.content[c];0<c;){var b=(c+1>>1)-1,h=a.content[b];
if(a.Ms(k)<a.Ms(h))a.content[b]=k,a.content[c]=h,c=b;else break}}function y(a,c,f,b){return f-d(b-a,0,f,b)+c}function d(a,c,d,b){return(a/=b)<1/2.75?7.5625*d*a*a+c:a<2/2.75?d*(7.5625*(a-=1.5/2.75)*a+.75)+c:a<2.5/2.75?d*(7.5625*(a-=2.25/2.75)*a+.9375)+c:d*(7.5625*(a-=2.625/2.75)*a+.984375)+c}w.M=function(a,c){c=c||new Float32Array(3);c[0]=a[3];c[1]=a[4];c[2]=a[5];return c};w.N=function(a,c){c=c||new Float32Array(3);return C.copy(a,c)};w.R=function(a,c){C.copy(c,a)};w.Q=function(a,c){C.normalize(c,
v);a[3]=v[0];a[4]=v[1];a[5]=v[2]};w.f=function(a,c,d){d=d||new Float32Array(3);d[0]=a[0]+a[3]*c;d[1]=a[1]+a[4]*c;d[2]=a[2]+a[5]*c;return d};w.g=function(a,c){c[0]=0;c[1]=0;for(var k=c[2]=0;k<a.length;k+=3)c[0]+=a[k],c[1]+=a[k+1],c[2]+=a[k+2];return C.scale(c,3/a.length,c)};w.e=function(a,c,d){for(var b=0;b<d.length;b++)d[b]=0;for(b=0;b<a.length;b+=3){var h=a[b]-c[0],k=a[b+1]-c[1],f=a[b+2]-c[2];d[0]+=h*h;d[1]+=h*k;d[2]+=h*f;d[4]+=k*k;d[5]+=k*f;d[8]+=f*f}d[3]=d[1];d[6]=d[2];d[7]=d[5];for(b=0;b<d.length;b++)d[b]*=
3/a.length;return d};w.L=function(k,c,d){k=m.copy(k,r);if(U(k)<c)return m.identity(d);var b=N(k,p),h=m.transpose(b,z);m.multiply(k,h,a);m.multiply(b,a,k);d=m.copy(b,d);for(var f=1;c<=U(k)&&f<H;)b=N(k,p),h=m.transpose(b,z),m.multiply(k,h,a),m.multiply(b,a,k),m.multiply(b,d,d),f++;return d};w.P=function(a,c){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]+c[3]};w.a=function(a){return{content:[],Ms:a}};w.c=function(a,c){a.content.push(c);n(a,a.content.length-1)};w.b=function(a){var c=a.content[0],k=a.content.pop();
if(0<a.content.length){a.content[0]=k;k=0;for(var b=a.content.length,h=a.content[k],d=a.Ms(h);;){var f=k+1<<1,m=f-1,n=null;if(m<b){var p=a.Ms(a.content[m]);p<d&&(n=m)}f<b&&a.Ms(a.content[f])<(null===n?d:p)&&(n=f);if(null!==n)a.content[k]=a.content[n],a.content[n]=h,k=n;else break}}return c};w.d=function(a,c){n(a,a.content.indexOf(c))};w.O=function(a,c,d,b){return d*a/b+c};w.x=function(a,c,d,b){return d*(a/=b)*a+c};w.H=function(a,c,d,b){return-d*(a/=b)*(a-2)+c};w.t=function(a,c,d,b){return 1>(a/=b/
2)?d/2*a*a+c:-d/2*(--a*(a-2)-1)+c};w.k=function(a,c,d,b){return d*(a/=b)*a*a+c};w.E=function(a,c,d,b){return d*((a=a/b-1)*a*a+1)+c};w.q=function(a,c,d,b){return 1>(a/=b/2)?d/2*a*a*a+c:d/2*((a-=2)*a*a+2)+c};w.y=function(a,c,d,b){return d*(a/=b)*a*a*a+c};w.I=function(a,c,d,b){return-d*((a=a/b-1)*a*a*a-1)+c};w.u=function(a,c,d,b){return 1>(a/=b/2)?d/2*a*a*a*a+c:-d/2*((a-=2)*a*a*a-2)+c};w.z=function(a,c,d,b){return d*(a/=b)*a*a*a*a+c};w.J=function(a,c,d,b){return d*((a=a/b-1)*a*a*a*a+1)+c};w.v=function(a,
c,d,b){return 1>(a/=b/2)?d/2*a*a*a*a*a+c:d/2*((a-=2)*a*a*a*a+2)+c};w.A=function(a,c,d,b){return-d*Math.cos(a/b*(Math.PI/2))+d+c};w.K=function(a,c,d,b){return d*Math.sin(a/b*(Math.PI/2))+c};w.w=function(a,c,d,b){return-d/2*(Math.cos(Math.PI*a/b)-1)+c};w.m=function(a,c,d,b){return 0==a?c:d*Math.pow(2,10*(a/b-1))+c};w.G=function(a,c,d,b){return a==b?c+d:d*(-Math.pow(2,-10*a/b)+1)+c};w.s=function(a,c,d,b){return 0==a?c:a==b?c+d:1>(a/=b/2)?d/2*Math.pow(2,10*(a-1))+c:d/2*(-Math.pow(2,-10*--a)+2)+c};w.j=
function(a,c,d,b){return-d*(Math.sqrt(1-(a/=b)*a)-1)+c};w.D=function(a,c,d,b){return d*Math.sqrt(1-(a=a/b-1)*a)+c};w.p=function(a,c,d,b){return 1>(a/=b/2)?-d/2*(Math.sqrt(1-a*a)-1)+c:d/2*(Math.sqrt(1-(a-=2)*a)+1)+c};w.l=function(a,c,d,b){var h=0,k=d;if(0==a)return c;if(1==(a/=b))return c+d;h||(h=.3*b);k<Math.abs(d)?(k=d,d=h/4):d=h/(2*Math.PI)*Math.asin(d/k);return-(k*Math.pow(2,10*--a)*Math.sin(2*(a*b-d)*Math.PI/h))+c};w.F=function(a,c,d,b){var h=0,k=d;if(0==a)return c;if(1==(a/=b))return c+d;h||
(h=.3*b);if(k<Math.abs(d)){k=d;var f=h/4}else f=h/(2*Math.PI)*Math.asin(d/k);return k*Math.pow(2,-10*a)*Math.sin(2*(a*b-f)*Math.PI/h)+d+c};w.r=function(a,c,d,b){var h=0,k=d;if(0==a)return c;if(2==(a/=b/2))return c+d;h||(h=.3*b*1.5);if(k<Math.abs(d)){k=d;var f=h/4}else f=h/(2*Math.PI)*Math.asin(d/k);return 1>a?-.5*k*Math.pow(2,10*--a)*Math.sin(2*(a*b-f)*Math.PI/h)+c:k*Math.pow(2,-10*--a)*Math.sin(2*(a*b-f)*Math.PI/h)*.5+d+c};w.h=function(a,c,d,b,h){void 0==h&&(h=1.70158);return d*(a/=b)*a*((h+1)*a-
h)+c};w.B=function(a,c,d,b,h){void 0==h&&(h=1.70158);return d*((a=a/b-1)*a*((h+1)*a+h)+1)+c};w.n=function(a,c,d,b,h){void 0==h&&(h=1.70158);return 1>(a/=b/2)?d/2*a*a*(((h*=1.525)+1)*a-h)+c:d/2*((a-=2)*a*(((h*=1.525)+1)*a+h)+2)+c};w.i=y;w.C=d;w.o=function(a,c,f,b){return a<b/2?.5*y(2*a,0,f,b)+c:.5*d(2*a-b,0,f,b)+.5*f+c};var m=f(27),C=f(3),v=new Float32Array(3),r=new Float32Array(9),p=new Float32Array(9),z=new Float32Array(9),a=new Float32Array(9),H=100},function(D,w,f){D=f(0);var N=f(55),U=f(38),n=
f(5),y=f(44),d=f(16),m=f(4),C=f(59),v=f(53),r=f(70),p=f(46),z=f(28),a=f(31),H=f(39),k=f(65),c=f(74),l=f(92),b=f(52),h=f(60),G=f(47),ka=f(62),u=f(12),E=f(9),R=f(19),O=f(1),L=f(8),B=f(93),Y=f(22),K=f(10),ha=f(23),T=f(34),V=f(11),A=f(36),aa=f(17),J=f(18),P=f(13),q=f(6),da=f(2),I=f(3),t=f(7),e=f(48);f=Object(D.a)("__data",function(f,ja){function ma(a,b){Ib[b.id]=null;lc[b.id]=null}function w(a,b,c,g){a instanceof ArrayBuffer?(a=ad.bG(a,g),g=a.width,a=a.height):(g=a.width,a=a.height);Z.log("%cLOAD IMAGE "+
g+"x"+a,"color: #"+(2048<g||2048<a?"a00":1024<g||1024<a?"aa0":"0a0"),b);-1==b.indexOf(ec)&&c&&Z.warn("image",b,"is not from app root.")}function D(a,b,g,c,e,h){function d(a){h(b,g,a)}function k(c,h,l,q){if(c){Z.log("%cLOAD METADATA","color: #616",q);h=da._58(c.b4w_format_version);switch(da._70(h,gb.mn)){case -1:h[0]<gb.mn[0]?Kb.va("JSON version is too old relative to B4W engine: "+da._71(h)+", required: "+da._71(gb.mn)+". Reexport scene with the latest B4W addon to fix it."):Z.warn("JSON version is a bit old relative to B4W engine: "+
da._71(h)+", required: "+da._71(gb.mn)+". Some compatibility issues can occur. Reexport scene with the latest B4W addon to fix it.");break;case 1:h[0]>gb.mn[0]?Kb.va("B4W engine version is too old relative to JSON. Can't load the scene. Update your engine version to fix it."):Z.error("B4W engine version is a bit old relative to JSON. Some compatibility issues can occur. Update your engine version to fix it.")}gb.PA=h;for(var t in c)a[t]=c[t];b.pc&&(Cb=Ra.bv(a.scenes));(c=a.binaries[0].binfile)?b.aE=
c:(Ta.ox(b,"load_binaries"),Ta.ox(b,"prepare_bindata"));gb.is_mobile_device||Ta.ox(b,"mobile_media_start");gb.antialiasing&&gb.smaa||Ta.ox(b,"load_smaa_textures");if(a.b4w_export_errors)for(c=0;c<a.b4w_export_errors.length;c++)t=a.b4w_export_errors[c],(b.pc&&"PRIMARY"==t.type||"ALL"==t.type)&&Z.gP(t.text+" See more details in https://www.blend4web.com/doc/en/addon.html#non-critical-export-errors");if(a.b4w_export_warnings)for(c=0;c<a.b4w_export_warnings.length;c++)t=a.b4w_export_warnings[c],(b.pc&&
"PRIMARY"==t.type||"ALL"==t.type)&&Z.hP(t.text+" See more details in https://www.blend4web.com/doc/en/addon.html#other-messages");b.Ug&&sa(a);e(b,g)}else l==F.AT_JSON_ZIP?(Z.warn("Compressed file ",q,"not found or invalid. Trying to load non-compressed",f),F.enqueue([{id:f,type:F.AT_JSON,url:f,jf:b.Ug}],k,null,d)):Ta.ID(b)}var f=b.Zi;f||Kb.va("Nothing requested");if(gb.assets_gzip_available){c=f+".gz";var l=F.AT_JSON_ZIP}else c=f,l=F.AT_JSON;F.enqueue([{id:c,type:l,url:c,jf:b.Ug}],k,null,d)}function M(a,
b,c,g,e,h){function d(a){h(b,c,a)}function k(g,h,l,q){g?(Z.log("%cLOAD BINARY","color: #616",q),a.bin_data=g,h=(new Uint32Array(g,4,1))[0],g=(new Uint32Array(g,8,1))[0],g=[h,g],h=da._58(a.b4w_format_version),g[0]!=h[0]&&Kb.va("BIN version does not match to JSON version: "+da._71(g)+", required: "+da._71(gb.mn)+". Couldn't load the scene. Reexport scene to fix it."),g[1]!=h[1]&&Z.warn("BIN version does not match to JSON version: "+ +da._71(g)+", required: "+da._71(gb.mn)+". Some compatibility issues can occur. Reexport scene to fix it."),
e(b,c)):l==F.AT_ARRAYBUFFER_ZIP?(Z.warn("Compressed file ",q,"not found or invalid. Trying to load non-compressed",f),F.enqueue([{id:f,type:F.AT_ARRAYBUFFER,url:f,jf:b.Ug}],k,null,d)):Ta.ID(b)}var f=kb(b.Zi)+b.aE;f||Kb.va("Binary data is missing");if(gb.assets_gzip_available){g=f+".gz";var l=F.AT_ARRAYBUFFER_ZIP}else g=f,l=F.AT_ARRAYBUFFER;F.enqueue([{id:g,type:l,url:g,jf:b.Ug}],k,null,d)}function oa(a,b,g,c,e){$c.uE()&&e(b,g)}function ca(a,b,g,c,e){c=a.bin_data;var h=a.binaries[0],d=a.objects,k=
a.meshes;a=a.actions;for(var f=da.K(),l=["indices"],q=["position","texcoord","texcoord2","shade_tangs"],m=["normal","tangent"],n=["group"],u=["color"],p=0;p<k.length;p++)for(var r=k[p].submeshes,v=0;v<r.length;v++){for(var B in r[v]){var z=r[v][B][1];if(-1!=l.indexOf(B)){var E=r[v][B][0]*da.i+h["int"]+12,P=r[v],G=B,y=c;if(f)var C=new Uint32Array(y,E,z);else{C=new Uint32Array(z);y=new DataView(y);for(var J=0;J<z;J++)C[J]=y.getUint32(E+J*da.i,!0)}P[G]=C}else if(-1!=q.indexOf(B))E=r[v][B][0]*da.h+h["float"]+
12,r[v][B]=ea(c,E,z,f);else if(-1!=m.indexOf(B)){E=r[v][B][0]*da.l+h["short"]+12;P=r[v];G=B;y=c;C=new Float32Array(z);y=new DataView(y);for(J=0;J<z;J++)C[J]=y.getInt16(E+J*da.l,!0)/32767;P[G]=C}else if(-1!=n.indexOf(B)){E=r[v][B][0]*da.l+h.ushort+12;P=r[v];G=B;y=c;C=new Float32Array(z);y=new DataView(y);for(J=0;J<z;J++)C[J]=y.getUint16(E+J*da.l,!0)/65535;P[G]=C}else if(-1!=u.indexOf(B)){E=r[v][B][0]*da.g+h.uchar+12;P=r[v];G=B;y=c;C=new Float32Array(z);y=new DataView(y);for(J=0;J<z;J++)C[J]=y.getUint8(E+
J*da.g)/255;P[G]=C}}z=r[v];if(k[p].b4w_shape_keys.length)for(E=z.base_length,P=z.normal.length/E/3,z.tbn=A.d(z.normal.subarray(0,3*E),z.tangent.subarray(0,4*E),A.c(z.normal.length/3)),G=1;G<P;G++)for(y=G*E,C=0;C<E;C++){var ja=z.normal.subarray(3*C,3*(C+1)),F=I.add(z.normal.subarray(3*(y+C),3*(y+C+1)),ja,Gc);J=A.i(Ub);if(z.tangent.length){var aa=z.tangent.subarray(4*C,4*(C+1)),T=t.add(z.tangent.subarray(4*(y+C),4*(y+C+1)),aa,Zb);ja=A.d(ja,aa);F=A.d(F,T);A.l(F,ja,J)}else F=L.rotationTo(ja,F,kc),A.o(J,
F,0);A.n(z.tbn,J,y+C)}else z.tbn=A.d(z.normal,z.tangent);delete r[v].normal;delete r[v].tangent;"texcoord2"in r[v]&&(z=new Float32Array(r[v].texcoord.length+r[v].texcoord2.length),z.set(r[v].texcoord),z.set(r[v].texcoord2,r[v].texcoord.length),r[v].texcoord=z,delete r[v].texcoord2)}for(B=0;B<d.length;B++)for(k=d[B].particle_systems,l=0;l<k.length;l++)q=k[l],q.transforms=ea(c,q.transforms[0]*da.h+h["float"]+12,q.transforms[1],f);for(d=0;d<a.length;d++){B=a[d];k=B.fcurves;l=B.frame_range;m=l[0];n=l[1];
u=Ia.QP(m,n);l=null;0>u&&(u=0);r=p=!1;for(var O in k)p|=-1<O.indexOf("rotation_euler"),r|=-1<O.indexOf("rotation_quaternion");q=[];for(O in k)if(p&&r&&-1<O.indexOf("rotation_euler"))delete k[O];else{v=k[O];for(var H in v)z=v[H],E=ea(c,h["float"]+z.bin_data_pos[0]*da.h+12,z.bin_data_pos[1],f),P=new Float32Array(u),null===l&&(l=new Int8Array(u)),Ia.uM(z,E,P,l,m,n),z.Xf=P;-1<O.indexOf("rotation_euler")&&(Ia.oP(k[O]),q.push(O))}for(m=0;m<q.length;m++)n=q[m],u=n.replace("euler","quaternion"),k[u]=k[n],
delete k[n];B.SL=l}e(b,g)}function ea(a,b,c,g){if(g)g=new Float32Array(a,b,c);else{g=new Float32Array(c);a=new DataView(a);for(var e=0;e<c;e++)g[e]=a.getFloat32(b+e*da.h,!0)}return g}function Da(a,b,g,e,h){var d=a.cameras,k=a.groups,f=a.materials,l=a.meshes,q=a.node_groups,t=a.objects,m=a.particles,n=a.scenes,u=a.speakers,r=a.lamps,p=a.textures,A=a.worlds;q||(Z.warn('"node_groups" datablock undefined. reexport main scene.'),q=a.node_groups=[]);for(var v="actions armatures cameras curves groups images lamps materials meshes node_groups objects particles scenes sounds speakers textures worlds".split(" "),
B={},z=0;z<v.length;z++)for(var E=a[v[z]],I=0;I<E.length;I++){var P=E[I];B[P.uuid]=P}for(var G=0;G<n.length;G++){for(var y=n[G],C=y.objects,J=0;J<C.length;J++)na(C,J,B);y.camera&&na(y,"camera",B);y.world&&na(y,"world",B)}for(G=0;G<k.length;G++){var ja=k[G].objects;for(J=0;J<ja.length;J++)na(ja,J,B)}for(G=0;G<t.length;G++){var F=t[G];F.dupli_group&&na(F,"dupli_group",B);F.parent&&na(F,"parent",B);F.dg_parent&&na(F,"dg_parent",B);var aa=F.animation_data;aa&&ya(aa,B);switch(F.type){case "MESH":F.data||
Kb.va("mesh not found for object "+F.name);na(F,"data",B);var O=!1,T=F.modifiers;for(J=0;J<T.length;J++){var H=T[J];"ARMATURE"==H.type?(O&&Z.warn('Object "'+F.name+'" has more than one armature modifiers. Only the first one will be used.'),O=!0,na(H,"object",B)):"CURVE"==H.type&&na(H,"object",B)}var R=F.particle_systems;if(R)for(J=0;J<R.length;J++)na(R[J],"settings",B);break;case "ARMATURE":na(F,"data",B);var ma=F.pose.bones,Ba=F.data.bones;for(J=0;J<ma.length;J++){var L=ma[J];L.bone=Ba[L.bone];var ka=
L.constraints;if(ka)for(var V=0;V<ka.length;V++){var w=ka[V];w.target&&na(w,"target",B)}var ca=L.parent_recursive;for(V=0;V<ca.length;V++)ca[V]=ma[ca[V]]}break;case "LAMP":case "CAMERA":case "SPEAKER":case "CURVE":na(F,"data",B)}if(ka=F.constraints)for(J=0;J<ka.length;J++)w=ka[J],w.target&&na(w,"target",B);var M=F.lod_levels;if(M)for(J=0;J<M.length;J++){var nb=M[J];nb.object&&na(nb,"object",B)}}for(G=0;G<l.length;G++){var K=l[G].materials;for(J=0;J<K.length;J++)na(K,J,B)}for(G=0;G<f.length;G++){var S=
f[G],oa=S.texture_slots;for(J=0;J<oa.length;J++)na(oa[J],"texture",B);var W=S.node_tree;W&&qa(W,B)}for(G=0;G<q.length;G++)(W=q[G].node_tree)&&qa(W,B);for(G=0;G<p.length;G++){var Y=p[G],ia=Y.type;"IMAGE"!=ia&&"ENVIRONMENT_MAP"!=ia||na(Y,"image",B)}for(G=0;G<d.length;G++){var X=d[G];X.dof_object&&na(X,"dof_object",B)}for(G=0;G<u.length;G++){var ta=u[G];ta.sound&&na(ta,"sound",B);(aa=ta.animation_data)&&ya(aa,B)}for(G=0;G<m.length;G++){var Q=m[G];oa=Q.texture_slots;for(J=0;J<oa.length;J++)na(oa[J],"texture",
B);Q.dupli_group&&na(Q,"dupli_group",B);Q.dupli_object&&na(Q,"dupli_object",B)}for(G=0;G<r.length;G++)(aa=r[G].animation_data)&&ya(aa,B);for(G=0;G<A.length;G++){var ha=A[G];if(oa=ha.texture_slots)for(J=0;J<oa.length;J++)na(oa[J],"texture",B);(aa=ha.animation_data)&&ya(aa,B);(W=ha.node_tree)&&qa(W,B)}Jb.eN(a);sa(a);for(var pa=kb(b.Zi),ea=a.textures,Da=b.pc?a.scenes[0].b4w_anisotropic_filtering:Cb.b4w_anisotropic_filtering,N=0;N<ea.length;N++){var Va=ea[N];b.pc||"SCENE"!=Va.b4w_source_type||(Va.b4w_source_id=
"");var la=zb.FO(Va,Da,a.scenes,b.id,pa);Va.sa=la}for(var D={},Xa=a.objects,fa=0;fa<Xa.length;fa++){var U=Xa[fa];if("MESH"===U.type&&!U.particle_systems.length)for(var Ea=U.data,ua=Ea.name,Oa=Ea.submeshes,Ca=Ea.materials,tb=0;tb<Oa.length;tb++)0!==Oa[tb].base_length||D[ua]||(Ca[tb]&&Z.warn('material "'+Ca[tb].name+'" is not assigned to any face (object "'+U.name+'").'),D[ua]=!0)}var wb=[];a.materials=[];for(var Ma=a.meshes,Ua=0;Ua<Ma.length;Ua++){var La=Ma[Ua];if(0==La.materials.length){var Za=c.b();
La.materials.push(Za);-1==wb.indexOf(Za.nd)&&(wb.push(Za.nd),a.materials.push(Za))}else for(var $a=0;$a<La.materials.length;$a++){var ub=La.materials[$a],xa=c.c();c.d(ub,xa);La.materials[$a]=xa;-1==wb.indexOf(xa.nd)&&(wb.push(xa.nd),a.materials.push(xa))}}for(var hd=a.actions,ra=b.id,za=0;za<hd.length;za++){var ad=hd[za];ad.TL=ra;Ia.bM(ad)}for(var Mc={SG:[],jw:[]},Qb=a.scenes,eb=0;eb<Qb.length;eb++)for(var Pa=Qb[eb],Fa=Qb[eb].objects,bb=0;bb<Fa.length;bb++)Ab(Pa,Fa,Fa[bb],null,Mc);for(eb=0;eb<Mc.jw.length;eb++){var Oc=
Mc.jw[eb];for(bb=0;bb<Oc.Ew.length;bb++){var Wb=Oc.Ew[bb],Nc=Oc.hH[bb],Vb=Oc.PB[bb],Ta=Oc.mB[bb];Oc.RG[bb].object=Nc;for(var Sa=0;Sa<Ta.length;Sa++)da.C(Ta[Sa],Nc);for(var Aa=Wb,sb=Vb,Fc=0;Fc<sb.length;Fc++){for(var Ka=sb[Fc].objects,Wa=0;Wa<Ka.length;Wa++){var Pb=Ka[Wa].dupli_group;Pb&&Ya(Aa,Pb)}var Hc=Ka.indexOf(Aa);-1<Hc&&Ka.splice(Hc,1)}}}!b.pc&&1<a.scenes.length&&(a.scenes=[Ra.bv(a.scenes)],Z.warn("loading data contains multiple scenes.","Only the first one will be loaded."));var hb=b.pc?Cb:
Ra.bv(a.scenes);md.uT(Cb.fps);1<a.scenes.length&&(a.scenes.splice(a.scenes.indexOf(Cb),1),a.scenes.unshift(Cb));for(var ib=0;ib<a.scenes.length;ib++){var pb=a.scenes[ib];pb.sa={};pb.GD=pb==hb;pb.UL=b.pc;var Ic;if(Ic=Hb.enabled){var Ja;if(Ja="OFF"!=pb.b4w_enable_physics){var dc;if(!(dc="AUTO"!=pb.b4w_enable_physics))a:{for(var Fb=wa(pb,"ALL"),Bb=0;Bb<Fb.length;Bb++){if(Fb[Bb].b4w_collision){dc=!0;break a}var zc=Fb[Bb].data;if(zc.materials)for(var lb=0;lb<zc.materials.length;lb++)if(zc.materials[lb].Fd.$p){dc=
!0;break a}}dc=!1}Ja=dc}Ic=Ja}Ic&&(b.pc||!Qa.Ap(Cb)&&pb==Ra.bv(a))&&Qa.WQ(pb)}for(var jb=0;jb<a.scenes.length;jb++){var gb=a.scenes[jb];if(gb.b4w_use_logic_editor){var Ub=wa(gb,"ALL");Jb.wM(Ub,gb)}}for(var db=0;db<a.scenes.length;db++){for(var qb=a.scenes[db],Ib=wa(qb,"ALL"),gd=0;gd<Ib.length;gd++){var Xb=Ib[gd];va.fN(Xb,qb,a)&&(Xb.re||(Xb.re=[]),Xb.re.push(b.pc?qb:Cb))}for(var Gb=Ib,Zb=0;Zb<Gb.length;Zb++){var cb=Gb[Zb];if(cb.re&&"WORLD"!=cb.type)for(var mb=cb.particle_systems,Lb=0;Lb<mb.length;Lb++){var yb=
mb[Lb].settings;if("HAIR"==yb.type)if("OBJECT"==yb.render_type){var ob=yb.dupli_object;ob.re||(ob.re=cb.re.slice())}else if("GROUP"==yb.render_type)for(var ec=yb.dupli_group,cc=0;cc<ec.objects.length;cc++)ob=ec.objects[cc],ob.re||(ob.re=cb.re.slice())}}}for(var Vc=a.scenes,oc=[],Tb=0;Tb<Vc.length;Tb++)Ga(Vc[Tb].objects,0,b.pc,oc);lc[b.id]=[];for(Tb=0;Tb<oc.length;Tb++)for(var hc=oc[Tb],kc=0;kc<hc.length;kc++)for(var $c=hc[kc],Ac=0;Ac<$c.length;Ac++)lc[b.id].push($c[Ac]);var Gc=a.particles;for(Tb=
0;Tb<Gc.length;Tb++){var Xd=Gc[Tb].dupli_object;Xd&&(Xd.FD=!0,lc[b.id].push(Xd));var Ce=Gc[Tb].dupli_group;if(Ce){var De=Ce.objects;for(kc=0;kc<De.length;kc++)Xd=De[kc],Xd.FD=!0,lc[b.id].push(Xd)}}var we=lc[b.id];for(Tb=we.length-1;0<=Tb;Tb--)we[Tb].re||we.splice(Tb,1);var Pd=lc[b.id];for(db=0;db<Pd.length;db++){Xb=Pd[db];!b.pc&&Xb.parent&&-1<tc.indexOf(Xb.parent.type)&&(Xb.parent="");if("MESH"==Xb.type){var me=Jb.tM(Xb);me&&(a.meshes.push(me),Xb.data=me)}Xb.eo=va.QF(Xb,!1);Xb.Dj=va.hE(Xb)}for(db=
0;db<Pd.length;db++){Xb=Pd[db];var Lc=Xb.Dj;for(gd=0;gd<Xb.lod_levels.length;gd++){var wd=Xb.lod_levels[gd].object;wd&&(Lc=Lc||wd.Dj)}if(Lc)for(Xb.Dj=!0,gd=0;gd<Xb.lod_levels.length;gd++)if(wd=Xb.lod_levels[gd].object)wd.Dj=!0}for(var Zc=0;Zc<a.scenes.length;Zc++){var Ee=a.scenes[Zc],Uc=Ee.world;Uc.re||(Uc.re=[]);Uc.re.push(b.pc?Ee:Cb)}var x=[];for(Zc=0;Zc<a.worlds.length;Zc++)Uc=a.worlds[Zc],Uc.re?(Uc.eo=va.QF(Uc,!0),Uc.Dj=va.hE(Uc)):x.push(Uc);for(Zc=0;Zc<x.length;Zc++)Uc=x[Zc],a.worlds.splice(a.worlds.indexOf(Uc),
1);for(var Yd=a.node_groups,ne=a.materials,ld=0;ld<Yd.length;ld++){var Ed=Yd[ld].node_tree;if(Ed){var ba=[];Na(Ed,ba,!0);Ed.Cq=ba}}for(ld=0;ld<ne.length;ld++)if(Ed=ne[ld].ne)ba=[],Na(Ed,ba,!1),Ed.Cq=ba;for(var he=0;he<a.scenes.length;he++){var Xe=a.scenes[he],Fe=b.pc?Xe:Cb;Ha(b.id,Fe,"SPEAKER").length&&!Fe.yd&&rb.AM(Fe)}h(b,g)}function S(a,b,c,g,h){g=kb(b.Zi);for(var d=[],k=[],f=0;f<a.speakers.length;f++){var l=a.speakers[f],q=l.sound.uuid;if(-1==k.indexOf(q)){k.push(q);switch(l.b4w_behavior){case "POSITIONAL":case "BACKGROUND_SOUND":var t=
F.AT_AUDIOBUFFER;break;case "BACKGROUND_MUSIC":t=F.AT_AUDIO_ELEMENT}l=Object(e.b)(g+l.sound.filepath);Xa(d,q,t,l,b.Ug)}}d.length?F.enqueue(d,function(){},function(){h(b,c)}):h(b,c)}function Na(a,b,c){a=a.nodes;for(var g=0;g<a.length;g++){var e=a[g],h=e.type;if("GROUP"==h&&e.node_group){if(e=e.node_group.node_tree)if(c)Na(e,b,!0);else for(e=e.Cq,h=0;h<e.length;h++){var d=e[h];-1==b.indexOf(d)&&b.push(d)}}else-1!=Ac.indexOf(h)&&-1==b.indexOf(h)&&b.push(h)}}function wa(a,b){b||(b="ALL");var g=[];-1==
a.objects.indexOf(a.camera)&&a.objects.push(a.camera);X(a.objects,b,g);return g}function X(a,b,g){for(var c=0;c<a.length;c++){var e=a[c];"ALL"!=b&&b!=e.type||g.push(e);(e=e.dupli_group)&&X(e.objects,b,g)}}function Ga(a,b,g,c){c[b]=c[b]||[];for(var e=c[b],h=0;h<a.length;h++){var d=a[h],k=tb(d);e[k]=e[k]||[];(g||-1==tc.indexOf(d.type))&&-1==e[k].indexOf(d)&&e[k].push(d);(d=d.dupli_group)&&Ga(d.objects,b+1,g,c)}}function Ha(a,b,g){var c=[];a=lc[a];for(var e=0;e<a.length;e++){var h=a[e];if(h.type==g||
"ALL"==g)for(var d=0;d<h.re.length;d++)b==h.re[d]&&c.push(h)}return c}function ua(a,b,g,c,e){for(var h=lc[b.id],d=0;d<h.length;d++){var k=va.VE(h[d]);k.ka.Rd=b.id}var f=a.worlds;for(d=0;d<f.length;d++)va.VE(f[d],!0);c=va.get_all_objects("ALL",b.id);for(d=0;d<h.length;d++){var l=h[d];k=l.qb;dc.dy(l,k)}for(d=0;d<f.length;d++)k=f[d],dc.dy(k,k.qb);b.pc&&Ca(a,b.id);for(d=0;d<h.length;d++)l=h[d],k=l.qb,k.Ur||(Qb.ES(l,k),va.XU(l,k),db.Ea(k)),"MESH"==k.type&&va.KP(l,k);for(a=0;a<h.length;a++){var t=h[a];
f=t.qb;d=f.ka;if(pb.is_mesh(f)||pb.is_empty(f)){var m=t.lod_levels.length;if(m){f=[t];k=[0];var n=Infinity;for(l=0;l<m;l++){var u=t.lod_levels[l].object,r=t.lod_levels[l].distance;if(!u){n=r;break}f.push(u);k.push(r)}k.push(n);for(l=0;l<f.length;l++)u=f[l],t=u.qb.ka,t.dk=!0,"DYNAMIC"==d.type&&0<l&&I.subtract(d.Ye.Da,t.Ye.Da,t.nw),t.Wg=k[l],t.Vg=k[l+1],m=k[l+1]-k[l],n=l==f.length-1?Infinity:k[l+2]-k[l+1],t.ik=Math.min(0==l?0:k[l]-k[l-1],m),t.jk=Math.min(m,n)}}}for(h=0;h<c.length;h++)if(a=c[h],"MESH"==
a.type&&(d=a.au)){d=d.ka;f=a.ka.Oi;k=[];for(var p in f)l=f[p],k.push(4*l.Hz,4*l.Ni);d.rw.push(k);d.Ep.push(a.ka)}h=p=-1;a=Ia.UF();for(d=0;d<c.length;d++)f=c[d],k=f.ka,pb.is_mesh(f)&&k.vl&&(f=k.li,f>p&&(p=f),a>=f&&f>h&&(h=f));for(d=0;d<c.length;d++)f=c[d],k=f.ka,pb.is_mesh(f)&&k.vl&&(k.Tm=!0,p<a?k.li=p:k.li<=a?k.li=h:(Z.warn('too many bones for "'+f.name+'" / '+k.li+" bones (max "+a+" with blending, "+2*a+" without blending). Blending between frames will be disabled."),k.li=p,k.Tm=!1),k.Tm=k.Tm&&!Lb.DF);
for(p=0;p<c.length;p++)if(h=c[p],h.mg)if(a=h.xg,"CHASSIS"==a.og){h.Ba={};h.Ba.Fr=a.Fr;h.Ba.Tq=a.Tq;h.Ba.nC=a.nC;h.Ba.pC=a.pC;h.Ba.oC=a.oC;h.Ba.TC=a.TC;h.Ba.LB=a.LB;h.Ba.VA=a.VA;h.Ba.Co=0;h.Ba.Sq=1;h.Ba.Op=0;h.Ba.speed=0;h.Ba.xn=[];h.Ba.Bs=[];h.Ba.Qp=null;f=(d=pb.get_dg_parent(h))?pb.cA(d,c):c;for(d=0;d<f.length;d++)k=f[d],k.mg&&(l=k.xg,Qa.aR(k)&&a.name==l.name?(l=Qa.LV(k.xg.og),h.Ba.xn[l]=k,h.Ba.Bs[l]=q.b()):Qa.AG(k)&&a.name==l.name?(h.Ba.Qp=k,h.Ba.Pp=l.Pp,h.Ba.bt=l.bt,h.Ba.Tr=l.Tr,l=q.p(h.ka.na,
q.b()),k=q.q(l,k.ka.na,l),h.Ba.DI=k,l=new Float32Array([1,0,0]),q.y(l,k,l),h.Ba.CI=l):Qa.zG(k)&&a.name==l.name?(h.Ba.dC=k,h.Ba.$s=l.$s,h.Ba.bp=l.bp,l=q.p(h.ka.na,q.b()),k=q.q(l,k.ka.na,l),h.Ba.yI=k,l=new Float32Array([1,0,0]),q.y(l,k,l),h.Ba.xI=l):Qa.BG(k)&&a.name==l.name&&(h.Ba.qC=k,h.Ba.rr=l.rr,l=q.p(h.ka.na,q.b()),k=q.q(l,k.ka.na,l),h.Ba.MI=k,l=new Float32Array([1,0,0]),q.y(l,k,l),h.Ba.LI=l));4!=h.Ba.xn.length&&Kb.va("Not enough wheels for chassis "+h.name)}else if("HULL"==a.og)for(h.Ba={},h.Ba.xn=
[],h.Ba.Bs=[],h.Ba.Fr=a.Fr,h.Ba.Tq=a.Tq,h.Ba.Pm=a.Pm,h.Ba.Rn=a.Rn,h.Ba.Sn=a.Sn,h.Ba.Co=0,h.Ba.Sq=1,h.Ba.Op=0,h.Ba.speed=0,h.Ba.Qp=null,f=(d=pb.get_dg_parent(h))?pb.cA(d,c):c,d=0;d<f.length;d++)k=f[d],k.mg&&(l=k.xg,Qa.$Q(k)&&a.name==l.name?(h.Ba.xn.push(k),h.Ba.Bs.push(q.b())):Qa.AG(k)&&a.name==l.name?(h.Ba.Qp=k,h.Ba.Pp=l.Pp,h.Ba.bt=l.bt,h.Ba.Tr=l.Tr,l=q.p(h.ka.na,q.b()),k=q.q(l,k.ka.na,l),h.Ba.DI=k,l=new Float32Array([1,0,0]),q.y(l,k,l),h.Ba.CI=l):Qa.zG(k)&&a.name==l.name?(h.Ba.dC=k,h.Ba.$s=l.$s,
h.Ba.bp=l.bp,l=q.p(h.ka.na,q.b()),k=q.q(l,k.ka.na,l),h.Ba.yI=k,l=new Float32Array([1,0,0]),q.y(l,k,l),h.Ba.xI=l):Qa.BG(k)&&a.name==l.name&&(h.Ba.qC=k,h.Ba.rr=l.rr,l=q.p(h.ka.na,q.b()),k=q.q(l,k.ka.na,l),h.Ba.MI=k,l=new Float32Array([1,0,0]),q.y(l,k,l),h.Ba.LI=l));for(p=0;p<c.length;p++)if(h=c[p],h.dn&&(a=h.Fo,"MAIN_BODY"==a.og))for(h.wh={},h.wh.Pm=a.Pm,h.wh.Rn=a.Rn,h.wh.Sn=a.Sn,h.wh.ju=[],d=(d=pb.get_dg_parent(h))?pb.cA(d,c):c,f=0;f<d.length;f++)k=d[f],k.dn&&(l=k.Fo,Qa.cR(k)&&a.name==l.name&&(h.wh.ju.push(k),
k.ez=k.Fo.KI));e(b,g)}function Ca(a,b){for(var c=0;c<a.scenes.length;c++){for(var g=a.scenes[c],e=va.tc(g,"LAMP",b),h=Array(e.length),k=0;k<e.length;k++)h[k]=k;h.sort(function(a,b){a=e[a].lc;b=e[b].lc;return b.In&&b.Nn&&(!a.In||!a.Nn)||!a.In&&(b.In||!a.Nn&&b.Nn)?1:0});for(k=0;k<h.length;k++)pb.kb(e[h[k]],g).es=k}}function la(a,b,c,g,e){for(g=0;g<a.scenes.length;g++){var h=a.scenes[g];h.Hi=h.camera.qb}for(g=0;g<a.scenes.length;g++){h=b.pc?a.scenes[g]:Cb;var k=b.pc?va.tc(h,"LAMP",b.id):va.tc(h,"LAMP",
0),d=va.tc(h,"ALL",b.id),f=Ha(b.id,h,"MESH"),l=Ha(b.id,h,"EMPTY");b.pc&&Ra.iM(h,d,k,f,l);for(var q=!1,t=0;t<l.length;t++){var m=l[t].qb;d=m.Aa;for(var n=0;n<d.length;n++){var u=d[n].Bb,p=Ra.cJ(u,m);h.name==u.name&&(q=q||p)}}b.pc&&h.sa.wd&&!q&&Z.warn('Scene "'+h.name+'" has water but has no wind. Using default settings.');l=[];Ra.set_active(h);Ma.KF(h,f,k,l);t=va.tc(h,"LINE",b.id);Ma.JF(h,t);q=Ra.rv(h);if(b.pc){m=h.sa.sx;t=h.world;if(m.GB||m.procedural_skydome)d=t.qb,Ma.mM(h,m,d),Ma.zu(d,q,h);Ra.Wz(h,
q);(m=h.sa.Aj)&&(m.rt||m.Me)&&Ma.fM(h,t.qb)}if(!b.pc)for(d=va.tc(Cb,"ALL",b.id),Ra.fV(a.scenes[g],h,d,f),d=va.tc(Cb,"ALL",va.DATA_ID_ALL),n=Ra.ug(h,[Gb.de,Gb.Ue,Gb.xd,Gb.Ge]),t=0;t<d.length;t++)if(m=d[t],m.ka.Rd!=b.id)switch(m.type){case "MESH":case "LINE":case "WORLD":for(g=0;g<n.length;g++)Ra.XL(n[g],m,q,n[g].type==Gb.Ue||n[g].type==Gb.Ge,h,!0);break;case "LAMP":Ra.Zp(m,h)}for(t=0;t<f.length;t++)Ma.zu(f[t].qb,q,h);for(t=0;t<l.length;t++)Ma.zu(l[t],q,h),va.gS(l[t]);d=va.tc(h,"ALL",b.id);Ra.TD(h,
d,k);for(t=0;t<d.length;t++)m=d[t],m.ka.Rf&&!m.qG&&va.update_boundings(m),pb.iN(m)&&(m.fH=!0),va.TU(m,h)}Ra.jM(Cb,a.textures,b.id);b.pc&&Cb.sa.oq.length&&(b.uA=!0);e(b,c)}function sa(a){var b=a.materials;a=a.images;for(var c=0;c<a.length;c++){var g=a[c];g.nh="FILE"==g.source&&-1<g.filepath.indexOf(".dds")&&"dds"==gb.Em?"dds":""}if((hc.Gz&&"dds"==gb.Em||hc.Tw&&"pvr"==gb.Em)&&gb.lJ)for(a=0;a<b.length;a++){g=b[a];var e=g.texture_slots;for(c=0;c<e.length;c++){var h=e[c],k=h.texture;if("IMAGE"==k.type||
"ENVIRONMENT_MAP"==k.type){var d=k.image;d&&!d.nh&&(h=!k.b4w_disable_compression&&!h.use_map_normal&&"ENVIRONMENT_MAP"!=k.type&&!k.b4w_shore_dist_map&&"MOVIE"!=d.source,ia(d,h))}}if(c=g.node_tree)for(g=c.nodes,c=0;c<g.length;c++){e=g[c];h=!1;if("TEXTURE"==e.type){if((k=e.texture)&&(d=k.image)&&!d.nh&&(h=!k.b4w_disable_compression&&"MOVIE"!=k.image.source&&"ENVIRONMENT_MAP"!=k.type)){a:{h=e.outputs;for(e=0;e<h.length;e++)if(k=h[e],k.is_linked&&"Normal"==k.identifier){h=!0;break a}h=!1}h=!h}}else"TEX_IMAGE"==
e.type?(d=e.image)&&!d.nh&&(h="MOVIE"!=d.source):"TEX_ENVIRONMENT"==e.type&&(h=!1);d&&!d.nh&&ia(d,h)}}}function ia(a,b){-1<a.filepath.indexOf(".dds")?a.nh="dds":b?(a.nh=gb.Em,a.filepath="dds"==gb.Em?a.filepath+".dds":a.filepath+".pvr"):a.nh=""}function ra(a,b,c,g,e){g=a.groups;for(var h=a.objects,k={},d={},f={},l={},t=0;t<g.length;t++){var q=g[t];k[q.uuid]=q;f[q.uuid]=q}for(t=0;t<h.length;t++)q=h[t],d[q.uuid]=q,l[q.uuid]=q;a=a.scenes;for(t=0;t<a.length;t++)Q(a[t].objects,null,l,f,null);for(var m in f)m in
k||g.push(f[m]);for(m in l)m in d||h.push(l[m]);e(b,c)}function Q(a,b,c,g,e){for(var h=[],k=0;k<a.length;k++){var d=a[k],f=c[d.uuid];if(d=f.proxy){b&&-1==h.indexOf(d.uuid)&&h.push(d.uuid);var t=c[d.uuid],q=t.constraints;for(d=0;d<q.length;d++){var m=da.O(q[d]);m.name+="_CLONE";f.constraints.push(m)}"b4w_proxy_inherit_anim"in f&&!f.b4w_proxy_inherit_anim||(f.animation_data&&(t.animation_data=da.O(f.animation_data)),t.b4w_use_default_animation=f.b4w_use_default_animation,t.b4w_auto_skel_anim=f.b4w_auto_skel_anim,
t.b4w_anim_behavior=f.b4w_anim_behavior,t.b4w_cyclic_animation=f.b4w_cyclic_animation)}}for(k=0;k<h.length;k++)f=da._9(a,"uuid",h[k]),-1<f&&a.splice(f,1);h={};if(b)for(k=0;k<a.length;k++)d=a[k],f=c[d.uuid],q=da.O(f),t="origin_name"in f?f.origin_name:f.name,q.name=pb.HF(b.name,t),q.origin_name=t,q.dg_parent={uuid:b.uuid},Aa(q),c[q.uuid]=q,h[d.uuid]=q.uuid,d.uuid=q.uuid,e&&e[f.uuid]&&(q.b4w_cluster_data=e[f.uuid]);for(k=0;k<a.length;k++)d=a[k],f=c[d.uuid],f.dupli_group&&(d=f.dupli_group,e=g[d.uuid],
q=da.O(e),q.name=Hc.mt(e.name+"_CLONE"),q.uuid=l.a("Group"+q.name),g[q.uuid]=q,d.uuid=q.uuid,Q(q.objects,f,c,g,f.b4w_cluster_data));if(b)for(k=0;k<a.length;k++){d=a[k];f=c[d.uuid];f.parent&&f.parent.uuid in h?f.parent.uuid=h[f.parent.uuid]:f.parent&&(Z.warn("Object's \""+f.name+'" parent is not in dupli group. Disabling parenting.'),f.parent=null);q=f.constraints;for(d=0;d<q.length;d++)b=q[d],b.target&&b.target.uuid in h&&(b.target.uuid=h[b.target.uuid]);if(b=f.pose)for(g=b.bones,d=0;d<g.length;d++)if(e=
g[d].constraints)for(q=0;q<e.length;q++)b=e[q],b.target&&b.target.uuid in h&&(b.target.uuid=h[b.target.uuid]);b=f.modifiers;for(d=0;d<b.length;d++)g=b[d],g.object&&g.object.uuid in h&&(g.object.uuid=h[g.object.uuid]);if((f=f.lod_levels)&&f.length)for(d=0;d<f.length;d++)b=f[d],b.object&&b.object.uuid in h&&(b.object.uuid=h[b.object.uuid])}for(var n in h)oc[n]=h[n]}function Aa(a){a.uuid=l.a("Object"+a.name)}function ya(a,b){a.action&&na(a,"action",b);if(a.nla_tracks)for(var g=0;g<a.nla_tracks.length;g++)for(var c=
a.nla_tracks[g],e=0;e<c.strips.length;e++)c.strips[e].action&&na(c.strips[e],"action",b)}function qa(a,b){for(var g=a.nodes,c=0;c<g.length;c++){var e=g[c];"TEXTURE"==e.type&&e.texture&&na(e,"texture",b);"LAMP"==e.type&&e.lamp&&(e.lamp.uuid in oc&&(e.lamp.uuid=oc[e.lamp.uuid]),b[e.lamp.uuid]||(e.lamp=null));"GROUP"==e.type&&e.node_group&&na(e,"node_group",b);"TEX_IMAGE"!=e.type&&"TEX_ENVIRONMENT"!=e.type||!e.image||na(e,"image",b)}e=a.links;for(c=0;c<e.length;c++){var h=e[c];xa(h,"from_node",g);xa(h,
"to_node",g);za(h,"from_socket",h.from_node.outputs);za(h,"to_socket",h.to_node.inputs)}(a=a.animation_data)&&ya(a,b)}function na(a,b,c){a[b]&&((c=c[a[b].uuid])||Z.error("Dangling link found:",b,a),a[b]=c)}function xa(a,b,c){c=da._19("name",a[b].name,c);a[b]=c}function za(a,b,c){c=da._19("identifier",a[b].identifier,c);a[b]=c}function Fa(a,b,c,h,d,k){var f=[],l=[],q={};h=a.images;for(var t=zb.TF(),m=kb(b.Zi),n=0;n<h.length;n++){var u=h[n],p=u.uuid;if(p){var r=Object(e.b)(m+u.filepath),A=F.Ex(r),v=
A[1].toLowerCase(),B=u.source;if("FILE"===B){B=u.nh?F.AT_ARRAYBUFFER:F.AT_IMAGE_ELEMENT;if(!F.hN(v)){Z.error('image "'+u.name+'" has unsupported format or broken path.');continue}hc.ZA&&gb.use_min50&&(r=g(A))}else if("MOVIE"===B)if(gb.Rs)r=A[0]+".altconv.seq",B=F.AT_SEQ_VIDEO_ELEMENT;else{B=rb.detect_video_container(v);if(""==B){Z.error("failed to load video file (unsupported format)",r);continue}r=B!=v?A[0]+".altconv."+B:A[0]+"."+A[1];B=F.AT_VIDEO_ELEMENT}else{Z.error('Image "'+u.name+'" has unsupported format "'+
B+'".');continue}p in q||(q[p]=[]);for(A=0;A<t.length;A++)v=t[A],(!zb.TP(v)&&v.nl==u.nh&&v.Ym==p||b.Ug)&&q[p].push(v);u.nh&&gb.assets_gzip_available&&(B=F.AT_ARRAYBUFFER_ZIP,r+=".gz");q[p].length&&f.push({id:p,type:B,url:r,jf:b.Ug})}}if(f.length){var z=0,E=function(g,e,h,d){if(g){if(b.Ug)e=h;else{e=q[e];for(var t=0;t<e.length;t++){var m=e[t];if(h==F.AT_SEQ_VIDEO_ELEMENT)m.Ps=g.yh,zb.ot(m,g.images,b.id);else if(zb.ot(m,g,b.id),"ENVIRONMENT_MAP"==m.source&&b.pc)for(var n=0;n<a.scenes.length;n++)Ra.fy(a.scenes[n]);
zb.kT(m)}e=e[0].nl}h==F.AT_VIDEO_ELEMENT||h==F.AT_SEQ_VIDEO_ELEMENT?(h==F.AT_VIDEO_ELEMENT?(e=g.videoWidth,g=g.videoHeight):(e=g.images[0].width,g=g.images[0].height),Z.log("%cLOAD VIDEO "+e+"x"+g,"color: #"+(2048<e||2048<g?"a00":1024<e||1024<g?"aa0":"0a0"),d),-1==d.indexOf(ec)&&Z.warn("video",d,"is not from app root.")):w(g,d,!0,e)}else{a:{g=b.Ug;d=d.split("?v")[0];h=F.Ex(d);if("gz"==h[1])d=h[0],h=F.AT_ARRAYBUFFER;else if("dds"==h[1]||"pvr"==h[1])for(d=h[0],h=F.AT_IMAGE_ELEMENT,t=q[e],m=0;m<t.length;m++)t[m].nl=
"";else if(-1!=d.indexOf(".min50"))d=d.split(".min50"),d=d[0]+d[1],h=F.AT_IMAGE_ELEMENT;else{e=null;break a}e={id:e,type:h,url:d,jf:g}}e&&(Z.warn("Trying to load fallback image",e.url),l.push(e))}e=++z/(f.length+l.length);k(b,c,e)},I=function(){l.length?(F.enqueue(l,E,I),l.length=0):(Z.log("%cLOADED ALL IMAGES","color: #0a0"),d(b,c))};F.enqueue(f,E,I)}else d(b,c)}function g(a){return"dds"==a[1]?(a=F.Ex(a[0]),a[0]+".min50."+a[1]+".dds"):a[0]+".min50."+a[1]}function Ba(a,b,c,g,e){a=Ra.uv();for(g=0;g<
a.length;g++){var h=a[g];if(h.b4w_use_nla){var d=h.b4w_nla_cyclic;h.b4w_use_logic_editor&&(d=!1);dc.eV(h,d,b.id)}}e(b,c)}function Va(a,b,g,c,h,d){a=kb(b.Zi);var k=[],f={};c=va.get_all_objects("ALL",b.id);for(var l=0;l<c.length;l++){var q=c[l];if(Ea(q)){var t=q.Ra.nd;"BACKGROUND_MUSIC"==rb.gA(q)?(t=da._4(),b.rA=!0):"NONE"!=rb.gA(q)&&gb.AA&&(b.zA=!0);if(!(t in f)){f[t]=[];var m=Object(e.b)(a+q.Ra.Zi);switch(rb.wI(q)){case rb.Cy:var n=F.AT_AUDIOBUFFER;break;case rb.VC:n=F.AT_AUDIO_ELEMENT}Xa(k,t,n,m,
b.Ug)}f[t].push(q)}}if(k.length){var u=0;F.enqueue(k,function(a,c,e,h){if(a)for(Z.log("%cLOAD SOUND","color: #0aa",h),-1==h.indexOf(ec)&&Z.warn("sound",h,"is not from app root."),c=f[c],e=0;e<c.length;e++)rb.jV(c[e],a);a=++u/k.length;d(b,g,a)},function(){Z.log("%cLOADED ALL SOUNDS","color: #0aa");h(b,g)})}else h(b,g)}function Xa(a,b,c,g,e){var h=F.Ex(g),d=h[1].toLowerCase(),k=rb.detect_audio_container(d);""!=k?(g=k!=d?h[0]+".altconv."+k:h[0]+"."+h[1],a.push({id:b,type:c,url:g,jf:e})):Z.error("failed to load audio file (unsupported format)",
g)}function Ea(a){return pb.is_speaker(a)&&rb.wI(a)!=rb.WC}function Za(a,b,c){a=va.tc(a,"SPEAKER",b);for(b=0;b<a.length;b++){var g=a[b];pb.is_speaker(g)&&(rb.ZQ(g)||c)&&rb.play_def(g)}}function Ua(a,b){for(var g=a.sa.oq,c=0;c<g.length;c++){var e=g[c].sa;a.b4w_use_nla&&g[c].b4w_nla_video||!g[c].use_auto_refresh||b!=e.qq||(zb.reset_video(e),zb.play_video(e))}}function W(a,b,g,c,e){dc.DS();e(b,g)}function La(a,b,g,c,e){dc.start();Z.log("%cSTART NLA","color: #0a0");e(b,g)}function Ab(a,b,g,c,e){for(var h=
g.lod_levels.length,d=0;d<h;d++){var k=g.lod_levels[d],f=k.object;if(f){var l=e.SG.indexOf(g);if(-1==l){e.SG.push(g);var q={Ew:[],hH:[],RG:[],PB:[],mB:[]};e.jw.push(q)}else q=e.jw[l];var t=q.Ew.indexOf(f);-1!=l&&-1!=t?(q.PB[t].push(a),q.mB[t].push(b)):(l=da.N(f),l.name=g.name+"_LOD_"+String(d+1),l.b4w_cluster_data=g.b4w_cluster_data,Aa(l),l.lod_levels=[],c&&(l.dg_parent=c),q.Ew.push(f),q.hH.push(l),q.RG.push(k),q.PB.push([a]),q.mB.push([b]))}}if(b=g.dupli_group)for(b=b.objects,c=0;c<b.length;c++)Ab(a,
b,b[c],g,e)}function Ya(a,b){var g=b.objects;b=g.indexOf(a);-1<b&&g.splice(b,1);for(var c=0;c<g.length;c++)(b=g[c].dupli_group)&&Ya(a,b)}function Sa(a,b,g,c,e){c=!0;for(var h=0;h<a.scenes.length;h++)if(!Qa.kN(a.scenes[h])){c=!1;break}c&&(e(b,g),Z.log("%cPHYSICS READY","color: #0a0"))}function Ka(a,b,g,c,e){for(c=0;c<a.scenes.length;c++){var h=a.scenes[c];if(b.pc)var d=Qa.Ap(h);else d=Qa.Ap(Cb)||Qa.Ap(h),h=Cb;if(Hb.enabled&&d)for(d=0;d<cc.length;d++)for(var k=va.tc(h,cc[d],b.id),f=0;f<k.length;f++){var l=
k[f];l.ka.Rd==b.id&&(Qa.append_object(l,h),b.NG&&Qa.eb(l)&&Qa.disable_simulation(l))}}e(b,g)}function fa(a,b,g,c,h){var d={};c=[];for(var k=a.scenes,f=0;f<a.scenes.length;f++){var l=k[f];if(l.sa.wd){var q=l.sa.wd.Ql;if(q&&"FILE"===q.source){l=q.uuid;var t=Object(e.b)(kb(b.Zi)+q.filepath);c.push({id:l,type:q.nh?F.AT_ARRAYBUFFER:F.AT_IMAGE_ELEMENT,url:t});d[l]=q}}}c.length?F.enqueue(c,function(a,c,g,e){if(a){w(a,e,!0);g=[];e=zb.TF();for(var h=0;h<e.length;h++){var f=e[h];f.uri===c&&g.push(f)}for(c=
0;c<g.length;c++)zb.ot(g[c],a,b.id);for(c=0;c<k.length;c++)if(g=k[c],g.sa.wd&&(e=g.sa.wd.Ql,e===q)){f=a;var l=document.createElement("canvas");e=q.size[0];h=q.size[1];l.width=e;l.height=h;l=l.getContext("2d");l.drawImage(f,0,0);f=l.getImageData(0,0,e,h).data;l=new Float32Array(4);l[0]=1/16581375;l[1]=1/65025;l[2]=1/255;l[3]=1;e*=h;h=new Float32Array(e);for(var t=0;t<e;t++)h[t]=l[1]*f[4*t+2]+l[2]*f[4*t+3];g.sa.ZB=h}}else for(a=d[c],c=0;c<k.length;c++)g=k[c],e=g.sa.wd.Ql,e===a&&(g.sa.wd.Ql=null,Z.warn("image",
e.filepath," was not found. Disabling water shore effects."))},function(){h(b,g)}):h(b,g)}function Pa(a,b,c,g,e){g=a.scenes[0];a=[];for(var h=[Gb.Lt,Gb.Aq,Gb.Mt,Gb.Qy],d=0;d<h.length;d++){var k=Ra.yc(g,h[d]);k&&a.push(k)}if(a.length){g=[];d=F.AT_IMAGE_ELEMENT;g.push({id:"SEARCH_TEXTURE",type:d,url:ub.Nf.smaa_search_texture_path,jf:b.Ug});g.push({id:"AREA_TEXTURE",type:d,url:ub.Nf.smaa_area_texture_path,jf:b.Ug});for(d=0;d<a.length;d++)if(h=a[d],h.type==Gb.Aq){a=h.Nb;for(d=0;d<a.length;d++)if(h=a[d],
"u_search_tex"==h.to)var f=h.yb;else if("u_area_tex"==h.to)var l=h.yb;break}g.length?F.enqueue(g,function(a,c,g,e){a&&(w(a,e,!1),c="SEARCH_TEXTURE"==c?f:l,c.source="IMAGE",zb.ot(c,a,b.id),zb.TB(c,zb.Ca,zb.Ca))},function(){e(b,c)}):e(b,c)}else e(b,c)}function Wa(a,b,c,g){for(c=0;c<a.scenes.length;c++){var e=a.scenes[c];b.pc||(e=Cb);for(var h=va.tc(e,"LAMP",b.id),d=0;d<h.length;d++){var k=h[d];k.ka.Rd==b.id&&g.Vy.push({Bb:e,obj:k})}h=va.tc(e,"ALL",b.id);for(d=0;d<h.length;d++)k=h[d],"LAMP"!=k.type&&
k.ka.Rd==b.id&&(b.NG&&pb.is_mesh(k)&&Ra.Bm(k,!0),g.Vy.push({Bb:e,obj:k}))}}function hb(a,b,c,g,e){if(b.pc){a=Ra.Ah();Ra.fy(a);g=Ra.uv();for(var h=0;h<g.length;h++){var d=g[h];Ra.fy(d);Ra.BH(d,a)}Ra.set_active(a)}else Ra.gJ(Cb);a=va.get_all_objects("ALL",b.id);va.YU(a);e(b,c)}function ib(a,b,c,g,e){if(b.pc)for(a=Ra.uv(),g=0;g<a.length;g++)for(var h=a[g],d=va.tc(h,"WORLD",0),k=0;k<d.length;k++)Ra.UQ(h,d[k]),Ra.fy(h);e(b,c)}function Ja(a,b,c,g,e){if(b.pc)for(a=Ra.uv(),g=0;g<a.length;g++){var h=a[g];
h.b4w_use_logic_editor&&zc.VQ(h,b.id)}e(b,c)}function eb(a,b,g,c,e){if(b.pc)for(c=0;c<a.scenes.length;c++)Ua(a.scenes[c],b.id),Za(a.scenes[c],b.id,!1);else Ua(Cb,b.id),Za(Cb,b.id,!1);e(b,g)}function bb(a,b,c,g,e){for(g=0;g<a.scenes.length;g++)a.scenes[g].camera=null;gb.media_auto_activation&&(b.uA||b.rA||b.zA)?mb||Vb(a,e,b,c):e(b,c)}function Vb(a,b,c,g){var e=Fb.parentElement;cb=e.style.zIndex;e.style.zIndex="999";mb=document.createElement("div");mb.style.position="relative";mb.style.height="88px";
mb.style.width="88px";var h=Math.round(Fb.offsetWidth/2-44);mb.style.top=Math.round(Fb.offsetHeight/2-44).toString()+"px";mb.style.left=h.toString()+"px";mb.style.backgroundImage="url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALAAAACwCAYAAACvt+ReAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAbrwAAG68BXhqRHAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAABVDSURBVHic7Z15kF1Vncc/v05Ys7JIQJZ0GLaAgCzCQARGFMIwZKTiqCPBAbTEEodBhYKALJKSVWYsCpTBcgCLAdQBHWZACCCyhCElIRiWEMOSBZAkCglJOoTQyW/++J3Xfe95971+273v3fvOp6qr+5573+vT3d8+93vP+Z3fTwjUhKoKsC0wLvKxDTA68rEVMNK9ZDiwpft6PdDvvl4LvA+sBt5zn1cCy4EVwDJgpYhouj9RMZB2d6ATUdWtgD2BXvcxARgPbJ5RFzYAS4BFwGL38YqIvJ/R988NQcCAqm4LHADsA+yLibannX1KYBMm6JeBBcA8EVnZ3i61n64UsKoOAyYCh7iPCeTvd6HA68BcYA6wQEQ2trdL2ZO3P1rDqGoPsD9wNHAkMKqBt1nNoFctfV7j2ldj/rbPXdsvIuvd994S88QAIzCfHPXOHyHurRvt21PALOAFEdnUwHvkjsILWFV7gcnAUcDYWl8GvAEsZNCDLhKR91rfw4RvrjoWuyv0us97ALtS+99rFfAEMFNElqTRx06hkAJ2I94ngRMwXzsUmzCxzsP85csisja9HtaPqo7CbM9EzK/vRW1/vwXATODJ0h2hSBRKwO5hbAom3KFuw2uAZzD/+JyIrEm5ey1FVUcDB2Ee/hPU9vM+ANwnIu+m3L3MKISAVXU3YCrwNwx6zSTWArOBJ7Gn+P4q1+YGVR0OfByzSX+N+exKfAg8DtwtIm9m0L1UybWAVfWjwJcw4Vb6WRT4A3YbnV0U0VZCVTfDRDwZOJDKv5dNwGPAXSLydja9az25FLCqbg9MA44FhlW4bDXwIPYgszyrvnUSqrojJuRqlqof+C1wp4i8k1XfWkWuBKyqmwN/D3wRW7ZN4m3gfzHhfpBV3zoZNyofBXwem81I4gPgHsxabMiqb82SGwGr6lHAV7A50yQWA3cCT4c4gmRcPMeRwCnY0ngSK4BbRGRWZh1rgo4XsJtZOAvzdUm8CfwSeKxbJu+bxQl5EnAqsEuFy+YAPxKRP2fWsQboWAG7X/JJwGkMRnVFWQXcDjwchNsYbnVyMibkMQmXvA/8DLi/U+9qHSlg95B2HvCxhNP9wG+AO0SkL+F8oE7cws9UzCNvlnDJAuA6EVmWacdqoOMErKpHA98keS7zReAGEXkr2151B6q6C3A2sF/C6bWYpXgy215Vp2MErKpbYMI9NuF0H3ArNrPQkbeyouCs2wnA6SQPIo8AN3XKDE9HCFhVdwK+iwWv+DwLXF+k5c88oKrbAecAByecfh24shMsRdsFrKqHYn53pHdqAzYtdk8YdduDG40nA18DtvBOrwP+TURmZ96xCG0VsKp+DrtV+f1YDFwrIkuz7lOgHBeSej6wm38KmzP+deadcrRFwG765kxsmszncexBrXChf3nGzVScg63o+cwEftyOHSGZC9htmLwAONQ71Y/9N/9P1n0K1I6qngycQXkMyjPANVkPPJkKWFVHApcDe3un1mIPBc9n2Z9AY6jqgcBFlM9SLAAuy3J+PjMBu20yM4DdvVPLge+JyBtZ9SXQPC4G+zJsD1+U14BLs9p+lYmAXTzDFZRHQi0EZojIqiz6EWgtqroNcCmWQyPKUuDiLKY+Uxewqo4BrqL8CfZF4PKQrCPfuIe7S7Dg+ShvARekPTilKmBVHYGNvHt4p54FrshT3GmgMm4V9SJsf16URcBFae43TE3Abrbh+5Q/sM0Gri761p5uwwXNTwcO904twOxEKrMTqaRPcvO851Eu3uewqZYg3oIhIh9iVnGOd2ofYLrLhtRy0sr/dSbl/4nzMdvwYUrfM9Bm3MB0JfCCd+pQbFNCy2m5gN3ysL/CthCbWgmrawXHPdfMAF7xTk12iyAtpaUCVtXDsNiGKMuxqbIg3i7BzSzNwPbXRfmqC95qGS0TsKqOA75N/MGwjzDP25W41K+XYausA83AeS58tiW0RMCRucBo7oF+zPMWOrlcoDJudfUqIBrkMxK40KVIaJpWjcBnUR6MfkuIbQiIyDzgNq95d+AbrXj/pgWsqpMo3wb0eIgqC5Rw8cL+Xrrj3P7HpmhKwKr6EeBfvOYlwA3NvG+gkFyPxUhEOcvtQG+YhgXstpucSzykbgO2kyLMOARiOE1ci2XHLDES+I7TUkM0MwJPoTxvw63hoS1QCRFZjCVKiXIAcGKj79mQgJ11+LLX/BxwX6MdCXQN92K7N6Kc1qiVaHQE/ibx7JB9wA/D7uHAUDiN3MhgMRyArWlwqbluAbsskf5qyq0hb0OgVlwe4tu85sPcjFZd1CVgN/l8htf8IrYrNRCohwexAK8oX3OxxTVT7wg8FdghctyPbYEP1iFQF04zNzBYQxpge+Cz9bxPzQJ2qYb+wWu+NyTaCzSKW2q+32v+gttDWRP1jMDTiOfpXYUllg4EmuFOrJ5JiS2xDPI1UZOAXTWgT3vNt4f8vIFmcRq63Wv+jCtQMyS1jsCnEM/E8haWZjO3qOrDqrp/u/sRAGwSIFqzbjjwj7W8cEgBuwQWftDFfxagMvpngLmqerNbmAm0CVci4ude87GquvNQr61lBP6cd90SrCJ6ERiO7d/7o6pe0KoY1UBDPI5lJS3Rg2mvKlUF7J4Gj/Ga7yjgtNk2wNXAC6r6+XZ3phtxmvqF1/wpl/2nIkONwFOI1x7+E/B0/d3LDXsBvwz+uG08hRWqLLEZySl4B6goYLdN6ASv+b8LOPomEfxxG3Be+F6v+cRqq3PVRuCjie9xWwM82nj3ckfwx+3hYeLzwqNITqoNVBfw8d7xg10aqB78cYa46kd+bM3kStcnCtjVRNgn2gQ81Gznck7wx9kxE9NciYluOreMSiOwr/g/iMjbiVd2H8Efp4wr3+XvaPcdAZAgYJeYz/ccIVwyTvDH6ePf8Y9x2oyRNALvD4yNHPdhKVED5QR/nB5PY7XoSmwD7OtflCRgf9n4/0I61CEJ/rjFuCSB/sBZNhsRE7DL4XqEd01Rlo2zIPjj1uJrb5JvI/wReCIwOnK8GpiXQseKTPDHrWMutv5QYix2txvAF7Bf42BOsA8NE/xxkzjtzfWaYxr1BezvNvbTxQfqJ/jj5njWO45pdEDALuqnN3JuE5asJNAagj9ujGeJL2rs4YpmAvER+EDiyakXplkeqUsJ/rhOXMXP16JNRFKaRQU80XtteHhLj+CP68PX4sB8cE9So+Pl1LoTKBH8cW34WowL2BUlHB+5QIE/pt+vgCP44+rMJ+6DJ7h49YEReE/io/Ebwf9mTvDHFRCR1dhO+BLDcOWLS6Lt9V7j1/gKZEfwx8ks9I4nwKCAd/dOLkq9O4GhCP44jp84vRcqj8BBwJ1D8MeGr8legB5Xn8CPdg9lAjqL4I/jOSMAxquq9ADbAtFfyJpQWbNj6Vp/7BKoR3PxbQmM7QHGedcuy6xXgUbpVn+83DselyRg/6JA59Jt/tjX5g5BwPmnm/xx4gjs5576S0adCbSWbvDHK7zj7XqI78AAy7weyC9F9serveNRSQIOS8jFoIj+2Bfw6CDgYlM0f+xrc3QPVnC52kWB/FMUf+yPwCN7sBysUT7IqDOB7Mm7P97gHW+eJOCwC7n45NUff+gdb5YkYP+iQDHJoz9OFPBwrzGMwN1FnvxxooADgRLvt7sD9dJD+Yjrj8iBYrMSmA7sLyL3tbszQ1Bmd4djw/Lm3kX+016gePQDtwAXi8if292ZGqko4ChhBC4+jwDfFpEX292ROqlJwBVLGgVyz0Lg3BxYhUr4MyUbeihfeRtFoGjkyedWoyzsYTgJ68sZdSaQPnn0udVIFHBZhE9GnQmkS159bjV8bb4XBFw88u5zq+Hb27XDMX8UZfuMOhNoLSuBa4AfugIpRWQH7/id4ZTvM9oxo84EWkPRfG41fG0uTxKwr/JA51JEn1sNX5uJAg4jcOdTZJ9bjbId9D3Au8SD2EdFaxAEOoqizOfWjapuC4yINL0PvNcjIgos9a7vzapjgZroB34C7C0i1xT4Ia0aE7zjJSIyUPUwMfNfoCN4BDhIRL7eBQ9p1ej1jhfBYODOYu+kr/ZA9nSrz63EeO94CQwK2B+B90y9O4FKdMN8biPs5R0vhkEBvwJsxGoPAOyqqqNCnYxM6ab53LpQ1dHAzpGmjcCr4DK0i8h64jZCgH0y6l8g+Nyh2Jd4Ec7XnWZjlYkq1uIKpMZCYIqIHNdFixGN4GvxpdIX1QScx8QXeaFr53Mb5EDveECr0e1Dz2PF5EpD9d6qOsbVqg20huBz60RVxxCvoqUkjcAishJ4PXKhAB9Pu4NdRPC5jXEIcf/7SrSGi58XYm7CiwPNEXxuc/ganBM98AU8xzs+TFXDLuXGCD63SZz2fAHHBllfwAuI79AYSbAR9RLiFlrHwcTT/67CKzkbE7CIbASe8t7kk6l0rZgEn9tajvaOZ4nIpmhDUm60Wd7xEarqJ5QIxAk+t8W4bJmHec2+NhMF/DwWI1xiBHB467pWKILPTY8jga0jx+8SmT4rUSZgFx/sK/2ElnYt/wSfmz7HecdPOG3GqJRedaZ3fKCq7tSSbuWf4HNTRlV3BA7wmh9KujZRwCKyBJuRGGgCjm9J7/JL8LnZMZn44sV8EfF3DQGVR2AoH4VPUNUtm+1ZDgk+N0NUdQvKLauvxQGqCfgJ4nnTRgHHNt613BF8bns4jngGnjUkzD6UqChgEfkA+I3XPFVVu6EsQfC5bcBp67Ne831Oi4kMJcb7iecP3hE4orHu5YLgc9vLJCA6WbAB02BFqgpYRN4FHveap6mqJF2fY4LPbTNu9D3Fa340GnmWRC124G4guny3G+VLfHkl+NzO4Rhg18jxRuBXQ71oSAGLyJvAY17zNFUdlnB5nngAOCD43PbjRt8ves2/E5E/DfXaWh/I7iJejuuj5HxeWEROFBF/G1WgPZwI7BI57gd+XssLaxKwiLwN/NZrPlVVRyRdHwjUiqqOBKZ5zQ+LyLJaXl/PlNidwPrI8RjgS3W8PhBIYhrxed/12B2/JmoWsIi8gz3QRTlJVXdJuj4QGApV3Q34W6/5F272qybqXZT4FfF8wsOBbxVwWi2QMk4z/0x8Z/wy4N563qcuAbtpplu95n0I4ZaB+jmR8oQlP613KrPuZWERmQX83ms+XVW3q/e9At2Jqm4PnOY1zxaR2fW+V6NxDTcCfZHjEQQrEaiBiHWI7rZYB/x7I+/XkICdyb7daz4ImNLI+wW6ipOBQ72220TkL428WTORZfcDL3htp6tqbxPvGSgwqro78E9e8zxsVbQhGhaw25/0r8DaSPPmwPldGvgeqIKqbgWcD0R3uK/BEnmX7XWrlaZie92wf4PXvBtwbvDDgRJOC+cQXy4G+HGj1qFE08HpIvIUFgAe5QjKA5MD3ctUyhPkzBSRJ5t941btrriJeGZLgDNU1c/rGugyVPUgyn3vq8DNrXj/lgjYbfn4PvG8asOA74aHuu7FLRVPZ7D2CpjvvapVsdct298mIiuAHxAPft8auERVt2nV9wnkA1dZ83vEq2sqcJ2I+OWNG6alGzRF5DnKl5rHAZe6p9BAF6CqWwOXUV6c+6ci8mwrv1fLdxiLyK8Bf1/ZnsCMML1WfFxeh0uBv/JOPSgidQXq1EJaW+R/Avjr2hOBi13WwUABcQmpLwQ+5p2agz3ot5xUBOxyuF5HPD0VWLLsC0K61uLh/qYXUb5MPB+42uWebjmpLja4LUdXAHt4p54HZpSK1QXyjbMNF2PxMFEWAReKyNryV7WG1FfLXJnQq7EVuigvAZeLyLq0+xBID/dccwnltdzeBKYPldehWVJPEyUiq7H/Tj+74H7AFWGKLb+4qbJrKBfvUuCitMULGYzAJdzu0xmUVx1/BxuJ/ZW8QAfjFim+R/lU2WvApVkVyMw04MZ54sspLyTeB1wpIvOy7E+gMdzy8HTiixRgD2yXi0hf+avSIfOIMeeZLgA+4Z3aiC2C3NtMeF0gPVxU2VQstsHPzPR74NqsH8zbEvLoUgmdCZyUcHo2FiOa2X9xYGjcwPMtksuuPQjclNZUWTXaGrOrqicDX03ox1Lsv3lx5p0KlOF2UpxPeTzvJuA/0lhhq5W2B52r6gHYL2esd+pD4A7gnmAp2oOzDFOAM4jvpACLKvuBiPj1tTOl7QIGUNVx2CqOv34OVhv3epcZKJARbuv7OZQvToDNNFzZyqiyRukIAcNAZcZvUF4fDGyW4mfAA2E0Thc36v4d9qC2dcIlM4GbOyWXcscIuISqTgLOJl7kucR84AYReSPbXnUHbm73bCzwymcNcKPbQtYxdJyAYeD29R3Ki92B5Y69D7grzFS0BrfIdAqW7ml4wiXzsJmhpjZgpkFHChhqupWtxpKrPNSO6Zsi4LLsnwCcSjzFaYl1wG10sHXrWAGXcOvtX8cq2CSxHPgvTMibKlwTiOAGh0nAl4GdK1z2DPCjThx1o3S8gEs4b/wVbItSEkuxxMizOnW0aDduAWkSZhd2rXDZMmxu9+nMOtYEuREwDET8n4jd8pJsBdiIfC82Iod4YwaCzY8CvkD5YkSJ9Vj+57s7ZYahFnIl4BLOVkwDPk3yQwfYU/ODmJDfzqpvnYSq7oQVzp5MsscFeyh+GHsorjkzeqeQSwGXUNUdsTodn6JybLNiO0BmYjloczO6NIKbTz8SqyK1P5X/xhuB32HCbfuCRKPkWsAlXJ2OqZiQq+23W4cFC80C5opIf5Vrc4OzCAdhNuFwKtsrsCX6R7El+iHrsHU6hRBwCbe74yTMJ1e6ZZbow56052JiTn33QCtR1bHAwcAh2EbKoUqercFS4t6Xt5+1GoUScAm3yfAo7Dbq12FIfAmWr+t5bLXvZbcVqmNQ1THYCtm+2Bae3ant7zcfeAh4slrV97xSSAFHccujx2P1nbet9WXAW1j1+iVY4sIlWT3kuHoj44EJQC+WGKaecmbvAk9gGSALvexeeAGXcJP3+2Ej8yTKwzdroQ+bJ12BTdetwFYE10Q+r8PiZPtL03guGHw49qC5NWZvRkc+74DNb5c+GqmAugrz9rOAl7plLrxrBBzFTejvhXnHQ7C8FXn7XSjwCvCs+1jYjSuRefujpYLzl/tj/nIi5i/9PV/tZiNmZV7Gcmq8mNXO304mCDgBd8vfA/OfvZgXHQ9klZxwPbAY89+L3NevhpXFcoKA68BN05V86g7Adgz62NGYd90KG72Hua8B3sdG0H5MnH2YZy755ncY9NTLijTNlTb/Dz+sKh/f1rAbAAAAAElFTkSuQmCC')";
mb.style.backgroundSize="88px";jb=document.createElement("div");jb.style.position="relative";jb.style.height=Fb.offsetHeight.toString()+"px";jb.style.width=Fb.offsetWidth.toString()+"px";jb.style.background="rgba(0, 0, 0, 0.5)";jb.style.zIndex="999";e.appendChild(jb);jb.appendChild(mb);yb=function(){c.uA&&(zb.play(),zb.pause(),zb.reset());if(c.rA){if(c.pc)for(var e=0;e<a.scenes.length;e++)Za(a.scenes[e],c.id,!0);else Za(Cb,c.id,!0);rb.pause()}c.zA&&rb.yH();Pb();b(c,g)};Ic.add_click_listener(mb,yb)}
function Pb(){if(mb){var a=Fb.parentElement;a.style.zIndex=cb;Ic.remove_click_listener(mb,yb);jb.removeChild(mb);a.removeChild(jb);mb=jb=null;cb=0}}function kb(a){(a=a.split("/").slice(0,-1).join("/"))&&(a+="/");return a}function nb(a){Ia.is_animated(a)&&Ia.remove(a);Bb.MS(a);va.clear_outline_anim(a);$a.check_sensor_manifold(a)&&$a.remove_sensor_manifold(a);Qa.eb(a)&&Qa.remove_object(a);va.DU(a);va.CU(a);Ra.MH(a);pb.is_speaker(a)&&rb.cU(a);wb.is_anchor(a)&&wb.remove(a)}function tb(a){var b=Ia.PF(a);
return(a=b&&b.parent==a?null:a.parent||b)?1+tb(a):0}var Kb=Object(n.a)(f),wb=Object(N.a)(f),Ia=Object(U.a)(f),F=Object(y.a)(f),Ma=Object(d.a)(f),ub=Object(m.a)(f),Qb=Object(C.a)(f),$a=Object(v.a)(f),ad=Object(r.a)(f),Hc=Object(a.a)(f),Wb=Object(p.a)(f),sb=Object(z.a)(f),Ic=Object(H.a)(f),Ta=Object(k.a)(f),dc=Object(b.a)(f),zc=Object(h.a)(f),Bb=Object(G.a)(f),lb=Object(ka.a)(f),va=Object(u.a)(f),pb=Object(E.a)(f),Qa=Object(R.a)(f),Z=Object(O.a)(f),Jb=Object(B.a)(f),Vc=Object(Y.a)(f),Ra=Object(K.a)(f),
rb=Object(ha.a)(f),$c=Object(T.a)(f),Gb=Object(V.a)(f),zb=Object(aa.a)(f),md=Object(J.a)(f),db=Object(P.a)(f),Lb=ub.Wk,gb=ub.wa,hc=ub.se,Hb=ub.xa,qb=ub.Ra,Ib=null,lc=null,ec="",Cb=null,oc={},Gc=new Float32Array(3),Zb=new Float32Array(4),kc=new Float32Array(4),Ub=A.c(),mb=null,jb=null,cb=0,ob=!1,yb=null,tc=["LAMP"],cc=["MESH","CAMERA","EMPTY"],Ac=["BSDF_PRINCIPLED","BSDF_GLOSSY","BSDF_DIFFUSE","BSDF_TRANSPARENT"],Fb=null;ja.is_primary_loaded=function(a){return Ta.is_primary_loaded(a)};ja.update=function(){Ta.gV(Ib)};
var Tb=function(){var a=L.create(),b=I.create();return function(c,g,e,h,d,k){var f=h.Vy;d=h.mH;if(f.length){c=f[d].obj;var l=f[d].Bb;d=pb.kb(c,l);Ra.append_object(l,c);!c.anchor||l.sa.anaglyph_use||l.sa.Us||wb.append(c);h=++h.mH/f.length;c.ka.gG&&Ra.Zq(c,!0);f=d.Tj;if(-1!=c.ka.Qd&&f){var t=I.copy(c.ka.Ye.Da,b);Ra.bJ(f,t)}f=c.zn;if(f.length&&l.sa.pg)for(l=q.j(c.ka.na,b),c=q.g(c.ka.na,a),d=d.oj,t=0;t<d.length;t++)Ra.dJ(d[t],l,c),pb.eJ(f,d[t].qa.ad)}else h=1;k(g,e,h)}}();ja.OT=function(a){Fb=a};ja.VU=
function(a,b){mb&&(jb.style.height=b.toString()+"px",jb.style.width=a.toString()+"px",a=Math.round(a/2-44),mb.style.top=Math.round(b/2-44).toString()+"px",mb.style.left=a.toString()+"px")};ja.load=function(a,b,c,g,e){var h={load_main:{qc:Ta.kh,vc:!1,inputs:[],Ac:!1,Bc:500,Nc:!1,Dc:D},duplicate_objects:{qc:Ta.Ie,vc:!1,inputs:["load_main"],Ac:!1,Bc:50,Nc:!1,Dc:ra},load_binaries:{qc:Ta.kh,vc:!1,inputs:["load_main"],Ac:!1,Bc:500,Nc:!1,Dc:M},wait_for_shaders:{qc:Ta.Ie,vc:!1,inputs:[],Ac:!1,Bc:50,Nc:!0,
$k:oa},prepare_bindata:{qc:Ta.Ie,vc:!1,inputs:["duplicate_objects","load_binaries"],Ac:!1,Bc:100,Nc:!1,Dc:ca},prepare_bpy_data:{qc:Ta.Ie,vc:!1,inputs:["duplicate_objects","prepare_bindata"],Ac:!1,Bc:100,Nc:!1,Dc:Da},process_objects:{qc:Ta.Ie,vc:!1,inputs:["prepare_bpy_data"],Ac:!1,Bc:150,Nc:!1,Dc:ua},process_scenes:{qc:Ta.Ie,vc:!1,inputs:["process_objects","wait_for_shaders"],Ac:!1,Bc:300,Nc:!1,Dc:la},load_smaa_textures:{qc:Ta.kh,vc:!1,inputs:["process_scenes"],Ac:!1,Bc:30,Nc:!0,Dc:Pa},load_shoremap:{qc:Ta.kh,
vc:!1,inputs:["process_scenes"],Ac:!1,Bc:30,Nc:!0,Dc:fa},load_images:{qc:Ta.kh,vc:!0,inputs:["process_scenes"],Ac:!0,Bc:500,Nc:!1,Dc:Fa},update_scenes_nla:{qc:Ta.Ie,vc:!1,inputs:["process_scenes","load_images"],Ac:!1,Bc:50,Nc:!1,Dc:Ba},wait_physics_workers:{qc:Ta.Ie,vc:!1,inputs:["load_shoremap"],Ac:!1,Bc:20,Nc:!1,$k:Sa},add_physics_objects:{qc:Ta.Ie,vc:!1,inputs:["wait_physics_workers"],Ac:!1,Bc:50,Nc:!1,Dc:Ka},add_objects:{qc:Ta.Ie,vc:!1,inputs:["add_physics_objects"],Ac:!1,Bc:600,Nc:!1,Dc:Wa,$k:Tb,
Xq:hb,Yq:{Vy:[],mH:0}},init_cube_sky_dynamic_props:{qc:Ta.Ie,vc:!1,inputs:["add_objects","load_images"],Ac:!1,Bc:50,Nc:!1,Dc:ib},init_logic_nodes:{qc:Ta.Ie,vc:!1,inputs:["update_scenes_nla","add_objects"],Ac:!1,Bc:50,Nc:!1,Dc:Ja},load_speakers:{qc:Ta.kh,vc:!0,inputs:["add_objects"],Ac:!0,Bc:100,Nc:!1,Dc:Va},mobile_media_start:{qc:Ta.Ie,vc:!1,inputs:["load_images","update_scenes_nla","load_speakers","init_logic_nodes"],Ac:!0,Bc:5,Nc:!1,Dc:bb,$k:bb},synchronize_media:{qc:Ta.Ie,vc:!0,inputs:["mobile_media_start"],
Ac:!0,Bc:50,Nc:!1,Dc:eb},prepare_nla:{qc:Ta.Ie,vc:!1,inputs:["mobile_media_start"],Ac:!1,Bc:5,Nc:!0,Dc:W},start_nla:{qc:Ta.Ie,vc:!0,inputs:["prepare_nla"],Ac:!1,Bc:5,Nc:!0,Dc:La}},d=Ta.fA();d||(d=Ta.WE(),Ib={},lc={},oc={});Ib[d.wg.length]={};return Ta.aF(h,a,b,c,ma,g||qb.WD,gb.do_not_load_resources,e,!1)};ja.unload=function(a){var b=Ta.fA();if(!b||!b.wg.length||a&&!Ta.zU(b.wg[a]))Z.error("Unable to unload data!");else{if(0==a)Z.log("%cUNLOAD ALL","color: #00a"),wb.cleanup(),Ia.cleanup(),rb.cleanup(),
Ma.cleanup(),Ra.cleanup(),Ta.cleanup(),$a.cleanup(),Qa.cleanup(),va.cleanup(),Hc.cleanup(),Vc.cleanup(),lb.cleanup(),$c.cleanup(),sb.cleanup(),F.cleanup(),zb.cleanup(),zc.cleanup(),Bb.cleanup(),Ic.cleanup(),Wb.cleanup(),lc=null,oc={},Ib=Cb=null,ob=!1;else{Z.log("%cUNLOAD DATA "+a,"color: #00a");Ia.KS(a);b=va.get_all_objects("ALL",va.DATA_ID_ALL);for(var c=0;c<b.length;c++){var g=b[c];pb.get_object_data_id(g)!=a&&va.pp(g,!1,!1,!1)}b=va.get_all_objects("ALL",a);for(c=b.length-1;0<=c;c--)g=b[c],nb(g),
va.remove_object(g);b=va.get_all_objects("ALL",va.DATA_ID_ALL);for(c=0;c<b.length;c++)va.pp(b[c],!0,!0,!0)}dc.cleanup(a);Pb()}};ja.AH=nb;ja.set_debug_resources_root=function(a){ec=a};ja.activate_media=function(){ob||gb.media_auto_activation||(zb.play(),zb.pause(),zb.reset(),Za(Cb,va.DATA_ID_ALL,!0),rb.pause(),gb.AA&&rb.yH(),ob=!0)};ja.reset=function(){Fb=null};ja.prefetch=function(a,b,c){var g={load_main:{qc:Ta.kh,vc:!1,inputs:[],Ac:!1,Bc:500,Nc:!1,Dc:D},load_binaries:{qc:Ta.kh,vc:!1,inputs:["load_main"],
Ac:!1,Bc:500,Nc:!1,Dc:M},load_images:{qc:Ta.kh,vc:!1,inputs:["load_main"],Ac:!1,Bc:500,Nc:!1,Dc:Fa},preload_sounds:{qc:Ta.kh,vc:!1,inputs:["load_main"],Ac:!1,Bc:500,Nc:!1,Dc:S}},e=Ta.fA();e||(e=Ta.WE(),Ib={},lc={},oc={});Ib[e.wg.length]={};return Ta.aF(g,a,b,c,ma,!1,gb.do_not_load_resources,!1,!0)};ja.unfetch=function(){F.qN()}});w.a=f},function(D,w,f){D=f(0);var N=f(5),U=f(4),n=f(35),y=f(89),d=f(1),m=f(23),C=f(2),v=f(48),r=f(37);f=Object(D.a)("__assets",function(f,z){function a(){return B.rG()?b4w.require(B.Nf.mu).data:
null}function p(){var b={Vt:null,VL:function(a){switch(b.responseType){case "json":case "text":return a;case "arraybuffer":a=atob(a);for(var c=a.length,e=new Int8Array(c),h=0;h<c;h++)e[h]=a.charCodeAt(h);return e.buffer;default:return a}},status:0,readyState:0,response:"",responseType:"",onreadystatechange:null,overrideMimeType:function(){},addEventListener:function(){},open:function(a,c){b.Vt=c;b.readyState=1},send:function(){b.status=404;b.readyState=4;var c=a();c&&b.Vt in c&&(b.status=200,c[b.Vt]&&
(b.response=b.VL(c[b.Vt])));if("[object Function]"==={}.toString.call(b.onreadystatechange))b.onreadystatechange()}};return b}function k(a){for(var e=0,d=0;d<a.length;d++){var k=a[d];20===k.state&&e++;if(e>=V.RR)break;if(10===k.state)switch(k.state=20,e++,k.type){case z.AT_JSON_ZIP:case z.AT_ARRAYBUFFER:case z.AT_ARRAYBUFFER_ZIP:c(k,"arraybuffer");break;case z.AT_JSON:c(k,"json");break;case z.AT_TEXT:c(k,"text");break;case z.AT_AUDIOBUFFER:l(k);break;case z.AT_IMAGE_ELEMENT:b(k);break;case z.AT_AUDIO_ELEMENT:h(k);
break;case z.AT_VIDEO_ELEMENT:G(k);break;case z.AT_SEQ_VIDEO_ELEMENT:ka(k);break;default:L.va("Wrong asset type: "+k.type)}}}function c(b,c){var e=b.url.split("?v=")[0];if(e in P)"json"==c?b.Cc(C.O(P[e]),b.id,b.type,b.url,b.param):b.Cc(P[e],b.id,b.type,b.url,b.param);else{var h=a(),d=h&&b.url in h?new p:new XMLHttpRequest;h=null;if("GET"==b.request_method)d.open("GET",b.url,!0);else if("POST"==b.request_method)switch(d.open("POST",b.url,!0),b.type){case z.AT_TEXT:h="text/plain";break;case z.AT_JSON:h=
"application/json"}if(b.overwrite_header)for(var k in b.overwrite_header)"Content-Type"==k?h=b.overwrite_header[k]:d.setRequestHeader(k,b.overwrite_header[k]);h&&d.setRequestHeader("Content-Type",h);"text"==c?(d.overrideMimeType("text/plain"),d.responseType="text"):"json"==c?(d.overrideMimeType("application/json"),d.responseType="text"):d.responseType=c;d.onreadystatechange=function(){if(40!=b.state&&4==d.readyState){if(200==d.status||0==d.status){var a=d.response;if(!a||"arraybuffer"==c&&0==a.byteLength)K.error("empty responce when trying to get "+
b.url),b.Cc(null,b.id,b.type,b.url,b.param);else{switch(b.type){case z.AT_JSON_ZIP:try{a=y.a(a,{to:"string"})}catch(M){K.error(M+" (parsing gzipped file "+b.url+")");b.Cc(null,b.id,b.type,b.url,b.param);return}case z.AT_JSON:try{a=JSON.parse(a,b.jR)}catch(M){K.error(M+" (parsing JSON "+b.url+")");b.Cc(null,b.id,b.type,b.url,b.param);return}break;case z.AT_ARRAYBUFFER_ZIP:try{a=y.a(a).buffer}catch(M){K.error(M+" (parsing gzipped file "+b.url+")");b.Cc(null,b.id,b.type,b.url,b.param);return}}b.jf&&
(P[e]=b.type==z.AT_JSON||b.type==z.AT_JSON_ZIP?C.O(a):a);b.Cc(a,b.id,b.type,b.url,b.param)}}else K.error(d.status+" when trying to get "+b.url),b.Cc(null,b.id,b.type,b.url,b.param);b.state=30}};d.addEventListener("progress",function(a){a.lengthComputable&&b.DH(a.loaded/a.total)},!1);d.send(b.post_data)}}function l(b){var c=b.url.split("?v=")[0];if(c in I)b.Cc(I[c],b.id,b.type,b.url,b.param),b.state=30;else{"GET"!=b.request_method&&L.va("Unsupported request type for audio buffer");var h=(c=a())&&b.url in
c?new p:new XMLHttpRequest;h.open("GET",b.url,!0);h.responseType="arraybuffer";h.onreadystatechange=function(){if(40!=b.state&&4==h.readyState)if(200==h.status||0==h.status){var a=h.response;a?ha.RO(a,function(a){b.Cc(a,b.id,b.type,b.url,b.param);b.state=30;if(b.jf){var c=b.url.split("?v=")[0];I[c]=a}},function(){K.error("failed to decode "+b.url);b.Cc(null,b.id,b.type,b.url,b.param);b.state=30}):(K.error("empty responce when trying to get "+b.url),b.Cc(null,b.id,b.type,b.url,b.param),b.state=30)}else K.error(h.status+
" when trying to get "+b.url),b.Cc(null,b.id,b.type,b.url,b.param),b.state=30};h.send()}}function b(b){var c=b.url.split("?v=")[0];if(c in q)b.Cc(q[c],b.id,b.type,b.url,b.param),b.state=30;else{"GET"!=b.request_method&&L.va("Unsupported request type for image element");var h=document.createElement("img");T.allow_cors&&(h.crossOrigin="Anonymous");h.onload=function(){if(40!=b.state&&(b.Cc(h,b.id,b.type,b.url,b.param),b.state=30,b.jf)){var a=b.url.split("?v=")[0];q[a]=h}};h.addEventListener("error",
function(){40!=b.state&&(K.error("could not load image: "+b.url),b.Cc(null,b.id,b.type,b.url,b.param),b.state=30)},!1);if((c=a())&&b.url in c)if(c[b.url]){var d=E(b.url);h.src="data:"+d+";base64,"+c[b.url]}else w.is_ie11()?(c=document.createEvent("CustomEvent"),c.initCustomEvent("error",!1,!1,null)):c=new CustomEvent("error"),h.dispatchEvent(c);else h.src=b.url}}function h(b){var c=b.url.split("?v=")[0];if(c in da)b.Cc(da[c],b.id,b.type,b.url,b.param),b.state=30;else{"GET"!=b.request_method&&L.va("Unsupported request type for audio element");
var h=document.createElement("audio");T.allow_cors&&(h.crossOrigin="Anonymous");h.addEventListener("loadeddata",function(){if(40!=b.state&&(b.Cc(h,b.id,b.type,b.url,b.param),b.state=30,b.jf)){var a=b.url.split("?v=")[0];da[a]=h}},!1);h.addEventListener("error",function(){40!=b.state&&(K.error("could not load sound: "+b.url),b.Cc(null,b.id,b.type,b.url,b.param),b.state=30)},!1);h.addEventListener("stalled",function(){40!=b.state&&(K.error("could not load sound: "+b.url),b.Cc(null,b.id,b.type,b.url,
b.param),b.state=30)},!1);if((c=a())&&b.url in c)if(c[b.url]){var d=R(b.url);h.src="data:"+d+";base64,"+c[b.url];40!=b.state&&(b.Cc(h,b.id,b.type,b.url,b.param),b.state=30)}else w.is_ie11()?(c=document.createEvent("CustomEvent"),c.initCustomEvent("error",!1,!1,null)):c=new CustomEvent("error"),h.dispatchEvent(c);else h.src=b.url,T.is_mobile_device&&h.load();T.$A&&(h.autoplay=!0,h.pause());setTimeout(function(){h.ZT=1},5E3)}}function G(b){function c(){40!=b.state&&(K.error("could not load video: "+
b.url,b.param),b.Cc(null,b.id,b.type,b.url),b.state=30)}var h=b.url.split("?v=")[0];if(h in q)b.Cc(q[h],b.id,b.type,b.url,b.param),b.state=30;else{"GET"!=b.request_method&&L.va("Unsupported request type for video element");var d=document.createElement("video");d.muted=!0;T.allow_cors&&(d.crossOrigin="Anonymous");d.addEventListener("loadeddata",function(){d.removeEventListener("error",c,!1);if(40!=b.state&&(b.Cc(d,b.id,b.type,b.url,b.param),b.state=30,b.jf)){var a=b.url.split("?v=")[0];q[a]=d}},!1);
d.addEventListener("error",c,!1);if((h=a())&&b.url in h)if(h[b.url]){var k=O(b.url);d.src="data:"+k+";base64,"+h[b.url];40!=b.state&&d.addEventListener("loadeddata",function(){b.Cc(d,b.id,b.type,b.url,b.param);b.state=30},!1)}else w.is_ie11()?(h=document.createEvent("CustomEvent"),h.initCustomEvent("error",!1,!1,null)):h=new CustomEvent("error"),d.dispatchEvent(h);else d.src=b.url,T.is_mobile_device&&d.load();if(T.$A||T.oG)d.autoplay=!0,d.pause();setTimeout(function(){d.ZT=1},1E4)}}function ka(b){function c(a){b.Cc(a,
b.id,b.type,b.url,b.param);b.state=30;if(b.jf){var c=b.url.split("?v=")[0];q[c]=a}}var h=b.url.split("?v=")[0];if(h in q)b.Cc(q[h],b.id,b.type,b.url,b.param),b.state=30;else{"GET"!=b.request_method&&L.va("Unsupported request type for seq video element");var d=(h=a())&&b.url in h?new p:new XMLHttpRequest;d.open("GET",b.url,!0);d.responseType="arraybuffer";d.onreadystatechange=function(){if(40!=b.state&&4==d.readyState)if(200==d.status||0==d.status){var a=d.response;a?u(a,c):(K.error("empty responce when trying to get "+
b.url),b.Cc(null,b.id,b.type,b.url,b.param),b.state=30)}else K.error(d.status+" when trying to get "+b.url),b.Cc(null,b.id,b.type,b.url,b.param),b.state=30};d.addEventListener("progress",function(a){a.lengthComputable&&b.DH(a.loaded/a.total)},!1);d.send()}}function u(a,b){var c=new Int32Array(a);a=new Int8Array(a);for(var e=c[3],h={images:[],dE:[],yh:c[4]},d=20,k=0;k<e;k++){var f=c[d/4],l=new Blob([a.subarray(d+4,d+4+f)],{type:"image/jpg"}),q=document.createElement("img");q.src=window.URL.createObjectURL(l);
h.images.push(q);h.dE.push(l);d+=f+8-f%4}q.onload=function(){for(var a=0;a<h.images.length;a++)window.URL.revokeObjectURL(h.images[a].src);delete h.dE;b(h)}}function E(a){var b="image";switch(v.a(a).toLowerCase()){case "jpeg":case "jpg":b+="/jpeg";break;case "png":b+="/png"}return b}function R(a){var b="audio";switch(v.a(a).toLowerCase()){case "ogv":case "ogg":b+="/ogg";break;case "mp3":b+="/mpeg";break;case "m4v":case "mp4":b+="/mp4";break;case "webm":b+="/webm"}return b}function O(a){var b="video";
switch(v.a(a).toLowerCase()){case "ogv":b+="/ogg";break;case "webm":b+="/webm";break;case "m4v":case "mp4":b+="/mp4"}return b}var L=Object(N.a)(f),B=Object(U.a)(f),w=Object(n.a)(f),K=Object(d.a)(f),ha=Object(m.a)(f),T=B.wa,V=B.se;z.AT_ARRAYBUFFER=10;z.AT_ARRAYBUFFER_ZIP=20;z.AT_JSON=30;z.AT_JSON_ZIP=40;z.AT_TEXT=50;z.AT_AUDIOBUFFER=60;z.AT_IMAGE_ELEMENT=70;z.AT_AUDIO_ELEMENT=80;z.AT_VIDEO_ELEMENT=90;z.AT_SEQ_VIDEO_ELEMENT=100;var A=[],aa=0,J={},P={},q={},da={},I={};z.Ex=function(a){a=a.split(".");
var b=Array(2);b[0]=a.slice(0,-1).join(".");b[1]=String(a.slice(-1));return b};z.DX=function(a){if(J[a])return J[a];var b=V.prevent_caching?a+"?v="+Object(r.c)():a,c=new XMLHttpRequest;c.overrideMimeType("text/plain");c.open("GET",b,!1);c.send(null);if(200==c.status||0==c.status){b=c.responseText;if(b.length)return J[a]=b;L.va("Error XHR: responce is empty, GET "+a)}else L.va("Error XHR: "+c.status+", GET "+a)};z.cleanup=function(){for(var a=0;a<A.length;a++)A[a].state=40;A=[];aa=0;J={}};z.enqueue=
function(b,c,h,d,f){for(var e=0;e<b.length;e++){var l=b[e];l={id:l.id,type:l.type,url:l.url,jf:l.jf,request_method:l.request_method?l.request_method:"GET",overwrite_header:l.overwrite_header?l.overwrite_header:null,post_data:l.post_data?l.post_data:null,param:l.param?l.param:null,state:10,Cc:c||function(){},tH:h||function(){},DH:d||function(){},jR:f||null,uH:aa};if(V.prevent_caching){var q=a();q&&l.url in q||(l.url+="?v="+Object(r.c)())}A.push(l)}k(A);aa++};z.update=function(){k(A);for(var a=A,b=
0,c=!0,h=0;h<a.length;h++){var d=a[h];d.uH===a[b].uH?30!==d.state&&(c=!1):(c&&(a[h-1].tH(),c=h-b,a.splice(b,c),h-=c),b=h,c=30===a[h].state?!0:!1);h===a.length-1&&c&&(d=a[h],a.splice(b),d.tH())}};z.hN=function(a){return"png"==a||"jpg"==a||"jpeg"==a||"gif"==a||"bmp"==a||"dds"==a||"pvr"==a?!0:!1};z.qN=function(){P={};q={};da={};I={}}});w.a=f},function(D,w,f){D=f(0);var N=f(5),U=f(4),n=f(1),y=f(17),d=f(2);f=Object(D.a)("__debug_check",function(f,C){function m(a){return-1<navigator.userAgent.toLowerCase().indexOf(a)?
!0:!1}var r=Object(N.a)(f),p=Object(U.a)(f),z=Object(n.a)(f),a=Object(y.a)(f),H=p.wa,k=-1,c=-1,l=null,b=[];C.fh=function(a){for(var c="INVALID_ENUM INVALID_VALUE INVALID_OPERATION OUT_OF_MEMORY INVALID_FRAMEBUFFER_OPERATION CONTEXT_LOST_WEBGL".split(" "),h=0;h<c.length;h++){var d=c[h];d in a&&(b[a[d]]=d)}l=a};C.UW=function(a){switch(a.toLowerCase()){case "chrome":return m("mozilla")&&m("applewebkit")&&m("chrome");case "firefox":return m("mozilla")&&m("gecko")&&m("firefox");case "msie":return m("mozilla")&&
m("trident")&&m("msie");case "opera":return m("opera")&&m("presto");case "safari":return m("mozilla")&&m("applewebkit")&&m("safari")&&!m("chrome");default:return!1}};C.uP=function(a){if(d._16(a)){for(var b=0;b<a.length;b++)if(!isFinite(a[b]))return!1;return!!a.length}return isFinite(a)?!0:!1};C.mA=function(a){if(H.gl_debug){var c=l.getError();c!=l.NO_ERROR&&(c in b?r.va("GL Error: "+c+", gl."+b[c]+" ("+a+")"):r.va("Unknown GL error: "+c+" ("+a+")"))}};C.KM=function(){if(H.gl_debug||H.rE)switch(l.checkFramebufferStatus(l.FRAMEBUFFER)){case l.FRAMEBUFFER_COMPLETE:break;
case l.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:z.error("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_ATTACHMENT");break;case l.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:z.error("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT");break;case l.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:z.error("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_DIMENSIONS");break;case l.FRAMEBUFFER_UNSUPPORTED:z.error("Incomplete framebuffer: FRAMEBUFFER_UNSUPPORTED");break;case l.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:z.error("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_MULTISAMPLE");
break;default:z.error("FRAMEBUFFER CHECK FAILED")}};C.TO=function(){if(-1!=c)return c;var b=l.createFramebuffer();l.bindFramebuffer(l.FRAMEBUFFER,b);var d=a.Sj(a.nm,!1);a.resize(d,1,1);l.framebufferTexture2D(l.FRAMEBUFFER,l.DEPTH_ATTACHMENT,d.Vb,d.hc,0);l.checkFramebufferStatus(l.FRAMEBUFFER)!=l.FRAMEBUFFER_COMPLETE?(c=!0,z.warn("depth-only issue was found")):c=!1;l.bindFramebuffer(l.FRAMEBUFFER,null);l.deleteFramebuffer(b);return c};C.$R=function(){if(1==H.Jc)return!1;if(-1!=k)return k;l.bindRenderbuffer(l.RENDERBUFFER,
l.createRenderbuffer());l.renderbufferStorageMultisample(l.RENDERBUFFER,H.Jc,l.RGBA8,1,1);var a=l.getRenderbufferParameter(l.RENDERBUFFER,l.RENDERBUFFER_SAMPLES);a!=H.Jc?(k=!0,z.warn("multisample issue was found: requested "+H.Jc+", got "+a),l.getError()==l.INVALID_OPERATION&&z.warn("the error from multisample issue detected, ignoring")):k=!1;l.bindRenderbuffer(l.RENDERBUFFER,null);return k};C.pP=function(){return m("firefox")&&l.getError()==l.OUT_OF_MEMORY?(z.warn("Firefox/old GPUs cubemap issue was found."),
!0):!1};C.reset=function(){l=null}});w.a=f},function(D,w,f){D=f(0);D=Object(D.a)("__debug_subscene",function(f,w){w.DV_NONE=0;w.DV_OPAQUE_WIREFRAME=1;w.DV_TRANSPARENT_WIREFRAME=2;w.DV_FRONT_BACK_VIEW=3;w.DV_BOUNDINGS=4;w.DV_CLUSTERS_VIEW=5;w.DV_BATCHES_VIEW=6;w.DV_RENDER_TIME=7;var n=null;w.pT=function(f){n=f};w.bQ=function(){return n};w.cleanup=function(){n=null}});w.a=D},function(D,w,f){D=f(0);var N=f(5),U=f(4),n=f(16),y=f(31),d=f(20),m=f(36),C=f(17),v=f(18),r=f(6),p=f(2),z=f(3);f=Object(D.a)("__particles",
function(a,f){function k(){h.va("_rand() undefined")}function c(a,b){return{name:a,Kw:b,time:0,Rw:-1,fq:!1,qo:1,rb:0,$b:0,Wx:0,cs:0,dw:0,cyclic:0,mf:0,ip:0,Av:0,Yj:0,Gf:0,zy:0,size:0,Yt:0,Xt:0,wu:0,vu:new Float32Array(16),zw:!1,positions:null,zs:null,Rx:null,et:null,wo:null,qr:null,Bo:null,Jw:null,Ux:0,Vx:0}}function l(a,b,c,h,d,k){var f=a.wo,l=a.Bo,n=a.time;a=a.Rw;for(var t=0;t<f.length;t+=4){var e=f[t];n>a&&n>=e&&e>a||n<a&&(e>a||n>=e)?(r.u(h,l,t),r.a(h,Y)):r.f(l,t,Y);e=K;e[0]=b[3*t];e[1]=b[3*t+
1];e[2]=b[3*t+2];r.D(e,Y,e);d[3*t]=e[0];d[3*t+1]=e[1];d[3*t+2]=e[2];e=m.e(c,t,B);m.m(e,Y,e);m.n(k,e,t);for(var u=1;4>u;u++)d[3*(t+u)]=d[3*t],d[3*(t+u)+1]=d[3*t+1],d[3*(t+u)+2]=d[3*t+2],m.n(k,e,t+u)}}function b(a){a?(u.kU(a),k=function(){return u.HS()}):k=function(){return Math.random()}}var h=Object(N.a)(a),G=Object(U.a)(a),H=Object(n.a)(a),u=Object(y.a)(a),E=Object(d.a)(a),R=Object(C.a)(a),O=Object(v.a)(a),w=G.wa,B=m.c(),Y=r.b(),K=new Float32Array(3),ha=[];f.IE=function(a){var b=c(a.name,a.type);
b.time=a.time;b.Rw=a.Rw;b.fq=a.fq;b.qo=a.qo;b.rb=a.rb;b.$b=a.$b;b.Wx=a.Wx;b.cs=a.cs;b.dw=a.dw;b.cyclic=a.cyclic;b.mf=a.mf;b.ip=a.ip;b.Av=a.Av;b.Yj=a.Yj;b.Gf=a.Gf;b.zy=a.zy;b.size=a.size;b.Yt=a.Yt;b.Xt=a.Xt;b.wu=a.wu;b.vu.set(a.vu);b.zw=a.zw;b.positions=p.O(a.positions);b.zs=p.O(a.zs);b.Rx=p.O(a.Rx);b.et=p.O(a.et);b.wo=p.O(a.wo);b.qr=p.O(a.qr);b.Bo=p.O(a.Bo);b.Jw=p.O(a.Jw);b.Ux=a.Ux;b.Vx=a.Vx;return b};f.update=function(){for(var a=0;a<ha.length;a++)for(var b=ha[a],c=b.Aa,h=0;h<c.length;h++)for(var d=
b,k=c[h].Ia,f=0;f<k.length;f++){var m=k[f],n=m.sb;n&&n.fq&&!m.xh&&(l(n,n.positions,n.Rx,d.ka.na,n.zs,n.et),n.zw=!0)}};f.kB=function(a){a=a.Aa;for(var b=0;b<a.length;b++)for(var c=a[b].Ia,h=0;h<c.length;h++)if(c[h].sb)return!0;return!1};f.lB=function(a,b){a=a.Aa;for(var c=0;c<a.length;c++)for(var h=a[c].Ia,d=0;d<h.length;d++){var k=h[d].sb;if(k&&k.name==b)return!0}return!1};f.nH=function(a){a=a.Aa;for(var b=0;b<a.length;b++)for(var c=a[b].Ia,h=0;h<c.length;h++){var d=c[h].sb;if(d&&"EMITTER"==d.Kw)return!0}return!1};
f.NM=function(a){return 0<a.particle_systems.length};f.MM=function(a){for(var b=0;b<a.particle_systems.length;b++)if("EMITTER"==a.particle_systems[b].settings.type)return!0;return!1};f.JQ=function(a){for(var b=0;b<a.particle_systems.length;b++){var c=a.particle_systems[b].settings;if("HAIR"==c.type&&c.b4w_dynamic_grass)return!0}return!1};f.WN=function(a,b,h){var d=a.sb=c(b.name,b.settings.type);d.rb=b.settings.frame_start;d.$b=b.settings.frame_end;d.Wx=(d.$b-d.rb)/O.ke();d.cs=b.settings.lifetime;
d.dw=d.cs/O.ke();d.cyclic=b.settings.b4w_cyclic?1:0;d.mf=b.settings.mass;d.ip=b.settings.normal_factor;d.Av=9.81*b.settings.effector_weights.gravity;d.Yj=b.settings.b4w_fade_in/O.ke();d.Gf=b.settings.b4w_fade_out/O.ke();d.zy=b.settings.effector_weights.wind;d.fq="WORLD"==b.settings.b4w_coordinate_system?!0:!1;if(a.Pr){var k=h.No.size;var f=h.No.Qr;if(30>f){f=.5;var l=.9}else 40>f?(f=.1,l=1):50>f?(f=0,l=.8):(f=0,l=.5)}else k=b.settings.particle_size,l=f=1;d.size=k;d.Yt=f;d.Xt=l;h.jh&&"BILLBOARD"==
b.settings.render_type&&(H.dc(a,"NODES",1),H.dc(a,"PARTICLE_BATCH",1),a.bc=!0);b=b.settings.texture_slots;b[0]&&b[0].use_map_size&&b[0].texture&&"BLEND"==b[0].texture.type&&b[0].texture.use_color_ramp&&w.Wt&&(b=b[0].texture,k=[],R.TM(b.color_ramp,R.uD,k),k=new Uint8Array(k.map(function(a){return p.M(255*a,0,255)})),k=R.UE(k,R.uD),H.$h(a,k,"u_color_ramp_tex",b.name),H.dc(a,"USE_COLOR_RAMP",1));h=h.hh;a=[-1,0,0,0,-1,0,0,0,-1,0,0,0,-1,0,0,0];if(h[0]&&"STRAND"==h[0].texture_coords&&h[0].texture&&"BLEND"==
h[0].texture.type&&h[0].texture.use_color_ramp){h=h[0].texture.color_ramp.elements;b=Math.min(4*h.length,a.length);for(k=0;k<b;k+=4)f=h[k/4],a[k]=f.position,a[k+1]=f.color[0],a[k+2]=f.color[1],a[k+3]=f.color[2];d.wu=h.length}d.vu.set(a)};f.FP=function(a,c,d,f){var n=a.sb,u=f.na;f=d.settings.count;var q=d.settings.frame_start/O.ke(),v=d.settings.frame_end/O.ke(),A=d.settings.lifetime/O.ke(),t=d.settings.lifetime_random,e=d.settings.emit_from,G=d.settings.factor_random;if(d.settings.use_rotations)var y=
d.settings.angular_velocity_mode,C=d.settings.angular_velocity_factor;else y="NONE",C=0;var aa=d.settings.b4w_randomize_emission,R=d.settings.b4w_cyclic;n.Ux=d.settings.billboard_tilt;n.Vx=d.settings.billboard_tilt_random;b(d.seed);c=E.yF(c,["a_position","a_tbn"],null);switch(e){case "VERT":var H=c.Va[0].a_position;var w=c.Va[0].a_tbn;d=H.length/3;c=[];for(e=0;e<f;e++){var L=Math.round((d-1)*k());c.push(L);c.push(L);c.push(L);c.push(L)}d=[];for(e=0;e<c.length;e++)d.push(H[3*c[e]]),d.push(H[3*c[e]+
1]),d.push(H[3*c[e]+2]);H=new Float32Array(d);d=m.c(c.length);for(e=0;e<c.length;e++)L=m.e(w,c[e],B),m.n(d,L,e);w=d;break;case "FACE":H=[];w=[];p._13(0,w);d=E.Yz(c,f,!1,w);p._13(0,w);c=E.Yz(c,f,!0,w);w=m.c(4*d.length);for(e=0;e<d.length;e++)H.push(d[e][0],d[e][1],d[e][2]),H.push(d[e][0],d[e][1],d[e][2]),H.push(d[e][0],d[e][1],d[e][2]),H.push(d[e][0],d[e][1],d[e][2]),m.n(w,c[e],4*e),m.n(w,c[e],4*e+1),m.n(w,c[e],4*e+2),m.n(w,c[e],4*e+3);H=new Float32Array(H);break;case "VOLUME":h.va("Particle emission from volume is not supported");
break;default:h.va("Wrong emit from option")}w=[H,w];H=w[0];w=w[1];n.positions=new Float32Array(H);n.Rx=new Float32Array(w);n.zs=new Float32Array(H.length);n.et=new Float32Array(w.length);c=[];v=(v-q)/f;for(d=0;d<f;d++)e=aa?v*d+10*v*(.5-k()):v*d,R||(e+=q),c.push(e),c.push(e),c.push(e),c.push(e);q=new Float32Array(c);n.wo=new Float32Array(q);n.qr=new Float32Array(q);if(n.fq){n.Bo=new Float32Array(q.length*Y.length);for(aa=0;aa<8*q.length;aa++)r.u(u,n.Bo,aa);l(n,H,w,u,H,w)}u=E.Gh("EMITTER_PARTICLES");
aa=E.Si();aa.a_position=H;aa.a_tbn=w;u.Va[0]=aa;a.fi=E.Ht;a=[];for(aa=0;aa<f;aa++)a.push(4*aa,4*aa+2,4*aa+1,4*aa,4*aa+3,4*aa+2);a=new Uint16Array(a);u.ab=a;u.hb.a_p_bb_vertex=E.FF(f);u.Gb=H.length/3;a=[];t*=A;for(aa=0;aa<f;aa++)R=t*k(),a.push(A-R),a.push(A-R),a.push(A-R),a.push(A-R);A=u.hb;t=[];for(aa=0;aa<f;aa++)R=Math.random(),t.push(a[4*aa],q[4*aa],R),t.push(a[4*aa+1],q[4*aa+1],R),t.push(a[4*aa+2],q[4*aa+2],R),t.push(a[4*aa+3],q[4*aa+3],R);t=new Float32Array(t);A.a_p_data=t;A=u.hb;t=[];for(a=0;a<
f;a++){q=[k()-.5,k()-.5,k()-.5];z.normalize(q,q);t.push(G*q[0]);t.push(G*q[1]);t.push(G*q[2]);switch(y){case "NONE":t.push(0);break;case "SPIN":case "VELOCITY":t.push(C);break;case "RAND":t.push(2*C*(k()-.5));break;default:h.va("Undefined velocity factor")}q=t.slice(-4);for(aa=0;12>aa;aa++)t.push(q[aa%4])}f=new Float32Array(t);A.a_p_vels=f;n.Jw=new Float32Array(u.hb.a_p_data);return u};f.JT=function(a,b,c){a=a.Aa;for(var h=0;h<a.length;h++)for(var d=a[h].Ia,k=0;k<d.length;k++){var f=d[k].sb;f&&f.name==
b&&!d[k].xh&&(f.Rw=f.time,f.time=c)}};f.set_size=function(a,b,c){a=a.Aa;for(var h=0;h<a.length;h++)for(var d=a[h].Ia,k=0;k<d.length;k++){var f=d[k].sb;f&&f.name==b&&(f.size=c)}};f.set_normal_factor=function(a,b,c){a=a.Aa;for(var h=0;h<a.length;h++)for(var d=a[h].Ia,k=0;k<d.length;k++){var f=d[k].sb;f&&f.name==b&&(f.ip=c)}};f.BX=function(a,b){a=a.Aa;for(var c=0;c<a.length;c++)for(var h=a[c].Ia,d=0;d<h.length;d++){var k=h[d].sb;if(k&&k.name==b)return k.ip}return 0};f.set_factor=function(a,b,c){a=a.Aa;
for(var h=0;h<a.length;h++)for(var d=a[h].Ia,k=0;k<d.length;k++){var f=d[k],l=f.sb;if(l&&l.name==b){l.qo=c;var m=l.wo;if(1==c)var t=m;else if(0==c){t=l.qr;for(var e=0;e<t.length;e+=4)t[e]=1E4,t[e+1]=t[e],t[e+2]=t[e],t[e+3]=t[e]}else{var n=4/c;t=l.qr;var u=0;for(e=0;e<t.length;e+=4)e>=u?(t[e]=m[e],u+=n):t[e]=1E4,t[e+1]=t[e],t[e+2]=t[e],t[e+3]=t[e]}f=f.$a;if(f.mc.a_p_data){l=l.Jw;for(e=0;e<l.length;e+=3)l[e+1]=t[Math.round(e/3)];E.$I(f,"a_p_data",3,l)}}}};f.kV=function(){var a=r.b();return function(b,
c,h,d){b=b.Aa;r.v(c,a);r.s(h,a);c=r.r(d,a);for(h=0;h<b.length;h++){d=b[h].Ia;for(var k=0;k<d.length;k++){var f=d[k].sb;if(f&&f.fq)for(var l=0;l<8*f.wo.length;l++)r.u(c,f.Bo,l)}}}}();f.aV=function(a,b,c){a.hb.a_tbn=m.c(4*c);m.i(a.hb.a_tbn);if(b.rs){for(var h=[],d=0;d<c;d++)h.push(d,d,d,d);a.hb[b.rs.name]=new Float32Array(h)}};f.$U=function(a){-1==ha.indexOf(a)&&ha.push(a)};f.MS=function(a){a=ha.indexOf(a);-1!=a&&ha.splice(a,1)};f.cleanup=function(){ha.length=0}});w.a=f},function(D,w){function f(f){if(""==
f)return".";var w=0==f.indexOf("/")|0;w&&0==f.indexOf("//")&&0!=f.indexOf("///")&&(w=2);f=f.split("/");for(var n=[],y=0;y<f.length;y++){var d=f[y];""!=d&&"."!=d&&(".."!=d||!w&&!n.length||n.length&&".."==n[n.length-1]?n.push(d):n.length&&n.pop())}f=n.join("/");for(y=0;y<w;y++)f="/"+f;return f||"."}w.b=function(w){var N=w.split("://",2);return 1<N.length?(N[1]=f(N[1]),N.join("://")):f(w)};w.a=function(f){return/(?:\.([^.]+))?$/.exec(f)[1]}},function(D,w,f){D=f(0);var N=f(39),U=f(14),n=f(4),y=f(15),
d=f(9),m=f(1),C=f(10),v=f(7);f=Object(D.a)("input",function(f,p){function r(d){b.ef("enable_split_screen","screen.request_split_screen");var k=a.get_device_by_type_element(a.DEVICE_HMD);if(!k)return!1;if(u)return!0;var f=a.get_vector_param(k,a.$C,G),m=a.get_vector_param(k,a.aD,w);H.set_hmd_fov(d,f,m);if(f=a.get_value_param(k,O))m=h.get_active(),d=l.kb(d,m).Qa,H.set_eye_distance(d,f);d={base_line_factor:.5,inter_lens_factor:.5,enable_hmd_stereo:!0};a.get_value_param(k,a.HMD_WEBVR_TYPE)&(a.HMD_NON_WEBVR|
a.HMD_WEBVR_MOBILE|a.HMD_WEBVR_DESKTOP)&&(d.distortion_coefs=[k.distortion_coefs[0],k.distortion_coefs[1]],d.chromatic_aberration_coefs=[k.chromatic_aberration_coefs[0],k.chromatic_aberration_coefs[1],k.chromatic_aberration_coefs[2],k.chromatic_aberration_coefs[3]],k.Un||(k.Ki&&k.aj&&k.Li?d.base_line_factor=(k.Ki-k.Li)/k.aj:k.Li||(d.base_line_factor=k.Ki/k.aj)),k.ji&&k.lm&&!k.Un&&(d.inter_lens_factor=k.ji/k.lm),E.enabled||(f=1+k.distortion_coefs[0]+k.distortion_coefs[1],h.yw(f,f)));h.set_hmd_params(d);
c.resize_to_container(!0);a.reset_device(k);return u=!0}var a=Object(N.a)(f),H=Object(U.a)(f),k=Object(n.a)(f),c=Object(y.a)(f),l=Object(d.a)(f),b=Object(m.a)(f),h=Object(C.a)(f),G=v.create(),w=v.create(),u=!1,E=k.Km,R=k.wa;p.GMPD_BUTTON_12=a.GMPD_BUTTON_12;p.GMPD_BUTTON_13=a.GMPD_BUTTON_13;p.GMPD_BUTTON_15=a.GMPD_BUTTON_15;p.GMPD_BUTTON_14=a.GMPD_BUTTON_14;p.GMPD_BUTTON_3=a.GMPD_BUTTON_3;p.GMPD_BUTTON_0=a.GMPD_BUTTON_0;p.GMPD_BUTTON_1=a.GMPD_BUTTON_1;p.GMPD_BUTTON_2=a.GMPD_BUTTON_2;p.GMPD_BUTTON_5=
a.GMPD_BUTTON_5;p.GMPD_BUTTON_7=a.GMPD_BUTTON_7;p.GMPD_BUTTON_4=a.GMPD_BUTTON_4;p.GMPD_BUTTON_6=a.GMPD_BUTTON_6;p.GMPD_BUTTON_8=a.GMPD_BUTTON_8;p.GMPD_BUTTON_9=a.GMPD_BUTTON_9;p.GMPD_BUTTON_10=a.GMPD_BUTTON_10;p.GMPD_BUTTON_11=a.GMPD_BUTTON_11;p.GMPD_BUTTON_16=a.GMPD_BUTTON_16;p.GMPD_BUTTON_17=a.GMPD_BUTTON_17;p.GMPD_BUTTON_18=a.GMPD_BUTTON_18;p.GMPD_BUTTON_19=a.GMPD_BUTTON_19;p.GMPD_BUTTON_20=a.GMPD_BUTTON_20;p.GMPD_BUTTON_21=a.GMPD_BUTTON_21;p.GMPD_BUTTON_22=a.GMPD_BUTTON_22;p.GMPD_BUTTON_23=a.GMPD_BUTTON_23;
p.GMPD_BUTTON_24=a.GMPD_BUTTON_24;p.GMPD_BUTTON_25=a.GMPD_BUTTON_25;p.GMPD_TRACKPAD_BUTTON=a.GMPD_TRACKPAD_BUTTON;p.GMPD_TRIGGER_BUTTON=a.GMPD_TRIGGER_BUTTON;p.GMPD_GRIPS_BUTTON=a.GMPD_GRIPS_BUTTON;p.GMPD_MENU_BUTTON=a.GMPD_MENU_BUTTON;p.GMPD_AXIS_0=a.GMPD_AXIS_0;p.GMPD_AXIS_1=a.GMPD_AXIS_1;p.GMPD_AXIS_2=a.GMPD_AXIS_2;p.GMPD_AXIS_3=a.GMPD_AXIS_3;p.GMPD_AXIS_4=a.GMPD_AXIS_4;p.GMPD_AXIS_5=a.GMPD_AXIS_5;p.GMPD_AXIS_6=a.GMPD_AXIS_6;p.GMPD_AXIS_7=a.GMPD_AXIS_7;p.GMPD_AXIS_8=a.GMPD_AXIS_8;p.GMPD_AXIS_9=
a.GMPD_AXIS_9;p.GMPD_AXIS_10=a.GMPD_AXIS_10;p.GMPD_AXIS_11=a.GMPD_AXIS_11;p.HMD_ORIENTATION_QUAT=a.HMD_ORIENTATION_QUAT;p.HMD_POSITION=a.HMD_POSITION;p.HMD_WEBVR_TYPE=a.HMD_WEBVR_TYPE;p.HMD_WEBVR_DESKTOP=a.HMD_WEBVR_DESKTOP;p.HMD_WEBVR_MOBILE=a.HMD_WEBVR_MOBILE;p.HMD_NON_WEBVR=a.HMD_NON_WEBVR;p.HMD_WEBVR1=a.HMD_WEBVR1;p.HMD_WEBVR1_1=a.HMD_WEBVR1_1;var O=a.HMD_EYE_DISTANCE;p.HMD_EYE_DISTANCE=O;p.HMD_DISTORTION=a.HMD_DISTORTION;p.HMD_BASELINE_DIST=a.HMD_BASELINE_DIST;p.HMD_SCREEN_LENS_DIST=a.HMD_SCREEN_LENS_DIST;
p.HMD_SCREEN_WIDTH=a.HMD_SCREEN_WIDTH;p.HMD_SCREEN_HEIGHT=a.HMD_SCREEN_HEIGHT;p.HMD_BEVEL_SIZE=a.HMD_BEVEL_SIZE;p.MOUSE_LOCATION=a.MOUSE_LOCATION;p.MOUSE_DOWN_WHICH=a.MOUSE_DOWN_WHICH;p.MOUSE_UP_WHICH=a.MOUSE_UP_WHICH;p.MOUSE_WHEEL=a.MOUSE_WHEEL;p.KEYBOARD_UP=a.KEYBOARD_UP;p.KEYBOARD_DOWN=a.KEYBOARD_DOWN;p.TOUCH_START=a.TOUCH_START;p.TOUCH_MOVE=a.TOUCH_MOVE;p.TOUCH_END=a.TOUCH_END;p.GYRO_ORIENTATION_QUAT=a.GYRO_ORIENTATION_QUAT;p.GYRO_ORIENTATION_ANGLES=a.GYRO_ORIENTATION_ANGLES;var L={};L[a.DEVICE_HMD]=
[a.HMD_ORIENTATION_QUAT,a.HMD_POSITION];L[a.DEVICE_MOUSE]=[a.MOUSE_LOCATION];var B={};B[a.DEVICE_HMD]=[a.HMD_WEBVR_TYPE];var Y={};Y[a.DEVICE_MOUSE]=[a.MOUSE_LOCATION,a.MOUSE_DOWN_WHICH,a.MOUSE_UP_WHICH,a.MOUSE_WHEEL];Y[a.DEVICE_KEYBOARD]=[a.KEYBOARD_UP,a.KEYBOARD_DOWN];Y[a.DEVICE_TOUCH]=[a.TOUCH_START,a.TOUCH_MOVE,a.TOUCH_END];Y[a.DEVICE_GYRO]=[a.GYRO_ORIENTATION_QUAT,a.GYRO_ORIENTATION_ANGLES];var K={};K[a.DEVICE_HMD]=[a.HMD_DISTORTION,a.HMD_EYE_DISTANCE,a.HMD_BASELINE_DIST,a.HMD_SCREEN_LENS_DIST,
a.HMD_SCREEN_WIDTH,a.HMD_SCREEN_HEIGHT,a.HMD_BEVEL_SIZE];p.DEVICE_GYRO=a.DEVICE_GYRO;p.DEVICE_HMD=a.DEVICE_HMD;p.DEVICE_MOUSE=a.DEVICE_MOUSE;p.DEVICE_KEYBOARD=a.DEVICE_KEYBOARD;p.DEVICE_TOUCH=a.DEVICE_TOUCH;p.can_use_device=a.can_use_device;p.get_device_by_type_element=a.get_device_by_type_element;p.switch_prevent_default=function(b,c){b&&a.switch_prevent_default(b,c)};p.register_device=function(){b.Ma("input.register_device() deprecated")};p.reset_device=function(c){c&&c.type==a.DEVICE_HMD?a.reset_device(c):
b.error("reset_device is undefined for device.")};p.get_vector_param=function(c,h,d){if(c&&c.type in L&&0<=L[c.type].indexOf(h))return a.get_vector_param(c,h,d);b.error("device hasn't param: ",h);return null};p.get_value_param=function(c,h){if(c&&c.type in B&&0<=B[c.type].indexOf(h))return a.get_value_param(c,h);b.error("device hasn't param: ",h);return null};p.attach_param_cb=function(c,h,d){d=d||null;if(c&&c.type in Y&&0<=Y[c.type].indexOf(h))return a.attach_param_cb(c,h,d);b.error("device hasn't param: ",
h)};p.detach_param_cb=function(c,h,d){d=d||null;if(c&&c.type in Y&&0<=Y[c.type].indexOf(h))return a.detach_param_cb(c,h,d);b.error("device hasn't param: ",h)};p.set_config=function(c,h,d){if(c&&c.type in K&&0<=K[c.type].indexOf(h))return a.set_config(c,h,d);b.error("device hasn't config: ",h)};p.request_fullscreen_hmd=function(){b.ef("request_fullscreen_hmd","screen.request_fullscreen_hmd");if(h.zb()){var d=h.ll(h.get_active());if(d&&(r(d),d=a.get_device_by_type_element(a.DEVICE_HMD))){var k=d.ce;
k&&!k.isPresenting&&(k.capabilities.canPresent?(d=c.get_canvas(),k.requestPresent([{source:d}]).then(function(){if(!R.is_mobile_device){var a=k.getEyeParameters("left"),b=k.getEyeParameters("right");c.resize(2*Math.max(a.renderWidth,b.renderWidth),Math.max(a.renderHeight,b.renderHeight),!1)}},function(){b.error("HMD fullscreen request failed.")})):b.error("HMD fullscreen request failed."))}}};p.enable_split_screen=r;p.disable_split_screen=function(){b.ef("disable_split_screen","screen.exit_split_screen");
var d=a.get_device_by_type_element(a.DEVICE_HMD);if(!u||!d||!d.eh)return!1;h.set_hmd_params({enable_hmd_stereo:!1});d=1/(1+d.distortion_coefs[0]+d.distortion_coefs[1]);h.yw(d,d);c.resize_to_container(!0);return!0};p.set_gamepad_key=function(b,c,h){switch(b){case 0:b=a.Gt;break;case 1:b=a.Hy;break;case 2:b=a.Iy;break;case 3:b=a.Jy;break;default:b=a.Gt}b=a.get_device_by_type_element(b);a.set_config(b,c,h)};p.get_pressed_gmpd_btn=a.get_pressed_gmpd_btn;p.get_moved_gmpd_axis=a.get_moved_gmpd_axis;p.get_gamepad_position=
a.get_gamepad_position;p.get_gamepad_orientation=a.get_gamepad_orientation;p.check_enable_gamepad_indices=function(){for(var a=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[],b=[],c=0;c<a.length;c++)a[c]&&b.push(c);return b};p.get_vr_controller_id=function(a){for(var b=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[],c=0,h=0;4>c;c++){var d=b[c];if(d&&(""==d.id||"OpenVR Gamepad"==d.id||
"Oculus Touch (Left)"==d.id||"Oculus Touch (Right)"==d.id)){if(h==a)return h;h++}}return a};p.add_click_listener=function(b,c){b&&c&&a.add_click_listener(b,c)};p.remove_click_listener=function(b,c){b&&c&&a.remove_click_listener(b,c)}});w.a=f},function(D,w,f){D=f(0);var N=f(14),U=f(15),n=f(4),y=f(51),d=f(39),m=f(79),C=f(9),v=f(1),r=f(10),p=f(7);f=Object(D.a)("screen",function(f,a){function z(){}function k(){}function c(a,b,c){function h(){document.fullscreenElement===a||document.webkitFullscreenElement===
a||document.mozFullScreenElement===a||document.webkitIsFullScreen||document.msFullscreenElement===a?b():(document.removeEventListener("fullscreenchange",h,!1),document.removeEventListener("webkitfullscreenchange",h,!1),document.removeEventListener("mozfullscreenchange",h,!1),document.removeEventListener("MSFullscreenChange",h,!1),c())}a=a||G.get_container();b=b||function(){};c=c||function(){};document.addEventListener("fullscreenchange",h,!1);document.addEventListener("webkitfullscreenchange",h,!1);
document.addEventListener("mozfullscreenchange",h,!1);document.addEventListener("MSFullscreenChange",h,!1);a.IB=a.IB||a.webkitRequestFullScreen||a.mozRequestFullScreen||a.msRequestFullscreen;a.IB?a.IB():L.error("B4W App: request fullscreen method is not supported")}function l(){var a=document.exitFullscreen||document.webkitExitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen;"function"!=typeof a&&L.error("B4W App: exit fullscreen method is not supported");a.apply(document)}function b(a){var b=
E.get_device_by_type_element(E.DEVICE_HMD);if(!b)return!1;if(ha)return!0;var c=E.get_value_param(b,E.HMD_WEBVR_TYPE);if(c&E.HMD_WEBVR1_1){var d=b.ce,k=d.getEyeParameters("left");d=d.getEyeParameters("right");G.resize(2*Math.max(k.renderWidth,d.renderWidth),Math.max(k.renderHeight,d.renderHeight),!1)}else k=G.get_canvas(),k=Math.max(2*k.height,k.width),G.resize(k,k/2,!1);k=E.get_vector_param(b,E.$C,Y);d=E.get_vector_param(b,E.aD,K);h.set_hmd_fov(a,k,d,!(c&E.HMD_WEBVR1_1));k={base_line_factor:.5,inter_lens_factor:.5,
enable_hmd_stereo:!0};c&(E.HMD_NON_WEBVR|E.HMD_WEBVR_MOBILE|E.HMD_WEBVR_DESKTOP)&&(k.distortion_coefs=[b.distortion_coefs[0],b.distortion_coefs[1]],k.chromatic_aberration_coefs=[b.chromatic_aberration_coefs[0],b.chromatic_aberration_coefs[1],b.chromatic_aberration_coefs[2],b.chromatic_aberration_coefs[3]],b.Un||(b.Ki&&b.aj&&b.Li?k.base_line_factor=(b.Ki-b.Li)/b.aj:b.Li||(k.base_line_factor=b.Ki/b.aj)),b.ji&&b.lm&&!b.Un&&(k.inter_lens_factor=b.ji/b.lm));T.enabled||B.yw(.5,1);B.set_hmd_params(k);if(b=
E.get_value_param(b,E.HMD_EYE_DISTANCE))c=B.get_active(),a=O.kb(a,c).Qa,h.set_eye_distance(a,b);B.NS();return ha=!0}var h=Object(N.a)(f),G=Object(U.a)(f),w=Object(n.a)(f),u=Object(y.a)(f),E=Object(d.a)(f),R=Object(m.a)(f),O=Object(C.a)(f),L=Object(v.a)(f),B=Object(r.a)(f),Y=p.create(),K=p.create(),ha=!1,T=w.Km;a.draw_mixer_strip=u.draw_mixer_strip;a.plot_array=u.plot_array;a.request_fullscreen=c;a.exit_fullscreen=l;a.check_fullscreen=E.check_fullscreen;a.request_fullscreen_hmd=function(a,b,h){if("HMD"!=
!w.get("stereo")||"NONE"==w.get("stereo")&&w.get("is_mobile_device")){var d=E.get_device_by_type_element(E.DEVICE_HMD);if(d&&E.get_value_param(d,E.HMD_WEBVR_TYPE)&E.HMD_WEBVR1){var k=d.ce;k&&!k.isPresenting&&(b=b||function(){},h=h||function(){},z=function(){k.isPresenting?b():(window.removeEventListener("vrdisplaypresentchange",z),h())},window.addEventListener("vrdisplaypresentchange",z,!1),k.capabilities.canPresent?(a=G.get_canvas(),k.requestPresent([{source:a}]).then(function(){},function(){L.error("HMD fullscreen request failed.")})):
L.error("HMD fullscreen request failed."))}else c(a,b,h)}};a.exit_fullscreen_hmd=function(){if("HMD"!=!w.get("stereo")||"NONE"==w.get("stereo")&&w.get("is_mobile_device")){var a=E.get_device_by_type_element(E.DEVICE_HMD);a&&E.get_value_param(a,E.HMD_WEBVR_TYPE)&E.HMD_WEBVR1?(a=a.ce)&&a.isPresenting&&(a.exitPresent(),G.resize_to_container(!0)):l()}};a.check_fullscreen_hmd=function(){var a=E.get_device_by_type_element(E.DEVICE_HMD),b=E.get_value_param(a,E.HMD_WEBVR_TYPE)&E.HMD_WEBVR1;return a&&(b&&
a.ce||!b&&E.check_fullscreen())?!0:!1};a.request_split_screen=function(a,c){var h=E.get_device_by_type_element(E.DEVICE_HMD);if(!h)return!1;if(ha)return!0;k=c;if(B.zb()){var d=B.ll(B.get_active());d&&(h.eh?(b(d),a&&a()):(E.US(h),h.Hs=function(){b(d);a&&a()}))}};a.exit_split_screen=function(){var a=E.get_device_by_type_element(E.DEVICE_HMD);if(!ha||!a||!a.eh)return!1;B.set_hmd_params({enable_hmd_stereo:!1});ha=!1;k&&k();B.OS();T.enabled||B.yw(2,1);G.resize_to_container(!0);return!0};a.shot=function(a,
b){a=a||"image/png";R.canvas_data_url(function(b){var c="screenshot."+a.split("/")[1];navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(b,c):(c=window.document.createElement("a"),document.body.appendChild(c),c.style.display="none",c.href=b,c.download="screenshot."+a.split("/")[1],c.click(),document.body.removeChild(c))},a,b||1,!0)}});w.a=f},function(D,w,f){D=f(0);var N=f(29),U=f(11);f=Object(D.a)("__hud",function(f,y){function d(a){a.font="bold 15px Courier New";a.textBaseline="middle";a.shadowBlur=
0;a.shadowColor=null}function m(b){n(' SCENE "'+b.name+'"');n(" Active                 Subscene   Lamps   Size   RenderCalls   Time");if(b.sa){var c=0,d=0,k=0;a.Na(b.sa.Ya,function(a,b){if(b.type!=H.Tk){a=Math.round(b.qa.width)+"x"+Math.round(b.qa.height);for(var h=0,f=0;f<b.vb.length;f++)h+=b.vb[f].jb.length;f=b.cl;if(b.type==H.xd||b.type==H.Ge)h*=6;var l=b.Ec&&!b.Rm,m=l?b.fg:0;b.enqueue||(b.fg=0);var u=l?" (\u2713)":" (\u2715)",p=H.Mx(b);n(u,p,b.np,a,f,"of",h,"  ",m.toFixed(3));b.cl=0;c+=h;l&&(d+=
f,k+=m)}});return[c,d,k]}n("No INFO")}function n(){for(var a=80+20*l[0],h=arguments[0],d=1;d<arguments.length;d++){for(var f="",m=0;m<k[d]-String(arguments[d]).length;m++)f+=" ";h+=f+arguments[d]}l[0]++;c.fillText(h,30,a)}function v(a,c,d,k,f){f.x=a;f.y=c;f.pd=d;f.Fc=k;return f}function r(a,c,d){c*=a.pd;d.x=a.x+c;d.y=a.y;d.pd=a.pd-2*c;d.Fc=a.Fc;return d}function p(a){return a.x+a.pd/2}function z(a){var b=c,d={x:0,y:0,pd:0,Fc:0};v(0,0,b.canvas.width,b.canvas.height,d);r(d,.01,d);b=.02*d.Fc;d.x=d.x;
d.y+=b;d.pd=d.pd;d.Fc-=2*b;b=d.pd/8;d.x+=b*a;d.y=d.y;d.pd=b;d.Fc=d.Fc;r(d,.02,d);return d}var a=Object(N.a)(f),H=Object(U.a)(f),k=[5,30,4,10,5,3,5],c=null,l=[0,0];y.init=function(a){a=a.getContext("2d");d(a);return c=a};y.Hn=function(){c&&d(c)};y.reset=function(){var a=c;a&&(a.clearRect(0,0,a.canvas.width,a.canvas.height),a.fillStyle="rgba(0,0,0,0.5)",a.fillRect(0,0,a.canvas.width,a.canvas.height),l[0]=0,l[1]=0)};y.UT=function(a,h){var b=c;if(b){b.textAlign="left";b.fillStyle="rgba(0,255,0,255)";
n(" FPS",(1/h).toFixed(2));l[0]++;for(var d=b=h=0,k=0;k<a.length;k++){var f=m(a[k]);h+=f[0];b+=f[1];d+=f[2];l[0]++}n(" ----------------------------------------------------------------");n("    ","TOTAL ACTIVE","","",b,"of",h,"  ",d.toFixed(3))}};y.print=function(){var a=c;a&&(a.textAlign="left",a.fillStyle="rgba(0,255,0,255)",n.apply(Math,arguments))};y.plot_array=function(a,h,d,k,f,l,m){var b=c;if(b){h=z(h);var n=h.Fc/5;h.x=h.x;h.y+=4*n;h.pd=h.pd;h.Fc=n;b.textAlign="center";b.fillStyle="#00FF00";
c.fillText(a,p(h),h.y-10);b.strokeStyle="#00FF00";b.lineWidth=.5;b.beginPath();b.moveTo(h.x,h.y);b.lineTo(h.x+h.pd,h.y);b.lineTo(h.x+h.pd,h.y+h.Fc);b.lineTo(h.x,h.y+h.Fc);b.closePath();b.stroke();if(!l&&!m)for(l=1E6,m=-1E6,a=0;a<d.length;a++)l=Math.min(l,d[a]),m=Math.max(m,d[a]);b.textAlign="right";c.fillText(String(l),h.x-10,h.y+h.Fc);c.fillText(String(m),h.x-10,h.y);b.textAlign="center";c.fillText(String(k),h.x,h.y+h.Fc+15);c.fillText(String(f),h.x+h.pd,h.y+h.Fc+15);b.strokeStyle="#FF0000";b.lineWidth=
1.5;b.beginPath();k=h.pd/(d.length-1);m=h.Fc/(m-l);for(a=0;a<d.length;a++)f=h.x+k*a,n=h.y+h.Fc-(d[a]-l)*m,0==a?b.moveTo(f,n):b.lineTo(f,n);b.stroke()}};y.draw_mixer_strip=function(a,h,d,k,f,l,m){var b=c;if(b)for(b.textAlign="center",b.fillStyle="#00FF00",b.font="bold 12px Courier",d=z(d),c.fillText(h?"["+a+"]":a,p(d),d.y),0<=l&&c.fillText(l?"[M]":"[ ]",p(d)-15,d.y+30),0<=m&&c.fillText(m?"[S]":"[ ]",p(d)+15,d.y+30),a={x:0,y:0,pd:0,Fc:0},h=0;h<k.length;h++){var n=k[h];(m="VOLUME"==n[0])?v(d.x,d.y+350,
d.pd,250,a):v(d.x,d.y+50+50*h,d.pd,d.Fc,a);l=b;var u=a,r=h==f,E=n[0],y=n[1],G=n[2],C=n[3],A=(C-G)/n[4];A=1>A?Math.floor(1/A-1E-5).toFixed(0).length:0;n=n[5]?Math.log(y/G)/Math.log(C/G):(y-G)/(C-G);l.textAlign="center";r?l.fillText("["+E+"]",p(u),u.y):l.fillText(E,p(u),u.y);l.strokeStyle="#00FF00";l.lineWidth=m?3:1;m?(l.textAlign="right",l.fillText(C.toFixed(A),p(u)-10,u.y+15),l.textAlign="right",l.fillText(G.toFixed(A),p(u)-10,u.y+u.Fc-15)):(l.textAlign="right",l.fillText(G.toFixed(A),u.x+28,u.y+
15),l.textAlign="left",l.fillText(C.toFixed(A),u.x+u.pd-28,u.y+15));l.beginPath();if(m){var aa=u.y+15+(u.Fc-30)*(1-n);l.moveTo(p(u),u.y+15);l.lineTo(p(u),u.y+u.Fc-15);l.moveTo(p(u)-5,u.y+15);l.lineTo(p(u)+5,u.y+15);l.moveTo(p(u)-5,u.y+u.Fc-15);l.lineTo(p(u)+5,u.y+u.Fc-15);l.moveTo(p(u)-5,aa);l.lineTo(p(u)+5,aa)}else{var J=u.x+30+(u.pd-60)*n;l.moveTo(u.x+30,u.y+15);l.lineTo(u.x+u.pd-30,u.y+15);l.moveTo(u.x+30,u.y+15-5);l.lineTo(u.x+30,u.y+20);l.moveTo(u.x+u.pd-30,u.y+15-5);l.lineTo(u.x+u.pd-30,u.y+
20);l.moveTo(J,u.y+15-5);l.lineTo(J,u.y+20)}l.stroke();"EQ_Q"==E?(n=Math.log(1+1/(2*y*y)+Math.sqrt((2+1/(y*y))*(2+1/(y*y))/4-1))/Math.log(2),m?(l.textAlign="left",l.fillText(y.toFixed(A),p(u)+10,aa),l.textAlign="left",l.fillText("("+n.toFixed(A+1)+")",p(u)+10,aa+10)):(l.textAlign="right",l.fillText(y.toFixed(A),J,u.y+30),l.textAlign="left",l.fillText("("+n.toFixed(A+1)+")",J,u.y+30))):m?(l.textAlign="left",l.fillText(y.toFixed(A),p(u)+10,aa)):(l.textAlign="center",l.fillText(y.toFixed(A),J,u.y+30))}}});
w.a=f},function(D,w,f){D=f(0);var N=f(38),U=f(12),n=f(9),y=f(1),d=f(10),m=f(23),C=f(17),v=f(18),r=f(2);f=Object(D.a)("__nla",function(f,z){function a(a,b){for(var c=E.NP(),h=[],d=0,k=0;k<a.length;k++){var f=a[k];""!=f.Eq?f=r._19("uuid",f.Eq,c):(f=f.oh,f=r._19("name",f,c)||r._19("name",f+"_B4W_BAKED",c));if(f){f=f.fcurves;var l=[],e;for(e in f)l.push(e);h.push(l)}}for(k=0;k<h.length;k++){c=!1;for(e=0;e<k;e++)if(r.E(h[k],h[e])){a[k].dd=a[e].dd;c=!0;break}c||(a[k].dd=b+d++)}return d}function p(){return{type:"CLIP",
rb:0,$b:0,wk:!1,paused:!1,oh:"",Eq:"",dd:0,qn:null,Vk:0,pm:0,xF:0,wF:0,qJ:!1,scale:1,repeat:1,KD:0}}function k(a,b,c){if(a.animation_data){var h=a.animation_data.nla_tracks;if(h)for(var d=0;d<h.length;d++)h[d].qn=c,b.push(h[d])}a=a.nodes;for(d=0;d<a.length;d++)if(h=a[d],h.node_group){var f=h.node_group.node_tree;if(f){var l=c.slice();l.push(h.name);k(f,b,l)}}}function c(a,b){a=Math.round(a)-b.rb;b.Mk&&(a%=b.jl,0>a&&(a+=b.jl));return b.Mc+a}function l(a,b){b=(b-V)*ha.ke()+a.Mc;b>a.rb?(b-=a.rb,a.cyclic&&
(b%=a.$b-a.rb+1),b+=a.rb):b=a.rb;return b}function b(a,b){a=r.M(a,b.rb,b.$b);a=a==b.$b?b.KD:b.Vk+(a-b.rb)/b.scale%(b.pm-b.Vk);b.qJ&&(a=b.pm-a+b.Vk);return a}function h(a,b){for(var c=[],h=0;h<a.length;h++){var d=a[h],k=d.strips;if(k)for(var f=0;f<k.length;f++){var l=k[f],e=p();e.type=l.type;e.rb=l.frame_start;e.$b=l.frame_end;e.dd=b;e.Vk=l.action_frame_start;e.pm=l.action_frame_end;e.qJ=l.use_reverse;e.scale=l.scale;e.repeat=l.repeat;l.action&&(e.oh=l.action.name,e.Eq=l.action.uuid,e.qn=d.qn);c.push(e)}}return c}
function G(a){return("SPEAKER"==a.type||"LAMP"==a.type)&&a.data.animation_data&&a.data.animation_data.nla_tracks.length?!0:!1}function w(a){if("MESH"!=a.type||!a.data)return!1;a=a.data.materials;if(!a)return!1;for(var b=0;b<a.length;b++){var c=a[b],h=c.ne;if(c=c.jh&&h)a:{if(h.animation_data&&(c=h.animation_data.nla_tracks)&&c.length){c=!0;break a}h=h.nodes;for(c=0;c<h.length;c++);c=!1}if(c)return!0}return!1}function u(a,b){var c=B.get_active();c.ub&&(b=l(c.ub,b),c.ub.Mc-=b-a,c.ub.Ho=!0)}var E=Object(N.a)(f),
R=Object(U.a)(f),O=Object(n.a)(f),L=Object(y.a)(f),B=Object(d.a)(f),Y=Object(m.a)(f),K=Object(C.a)(f),ha=Object(v.a)(f),T=[],V=-1;z.dy=function(b,c){for(var d,f=null,l=c.Aa.length-1;0<=l&&(d=c.Aa[l],!d.Bb.b4w_use_nla||(f=d,!d.Bb.GD));l--);if(d=f){d.oH=!0;f=0;if((l=b.animation_data)&&l.nla_tracks.length){var m=l.nla_tracks;if(O.is_armature(c)||O.is_camera(c)||O.is_mesh(c)||O.is_empty(c)||O.is_line(c)||O.is_lamp(c)||O.is_speaker(c)||O.is_world(c))m=h(m,f),m.length&&(c.Lf=c.Lf.concat(m),f++)}G(b)&&(m=
b.data.animation_data.nla_tracks,m=h(m,f),m.length&&(c.Lf=c.Lf.concat(m),f++));if(O.is_mesh(c)){var n=c.Sc;for(l=0;l<n.length;l++){var t=n[l];t.jh&&t.ne&&(m=[],k(t.ne,m,[t.name]),m=h(m,f),m.length&&(f+=a(m,f),c.Lf=c.Lf.concat(m)))}}if(O.is_world(c))b.use_nodes&&b.node_tree&&(m=[],k(b.node_tree,m,[b.name]),m=h(m,f),m.length&&(a(m,f),c.Lf=c.Lf.concat(m)));else{for(l=0;l<b.particle_systems.length;l++)m=b.particle_systems[l],n=m.settings,"EMITTER"==n.type&&n.b4w_allow_nla&&(n=p(),n.type="CLIP",n.rb=d.Bb.frame_start,
n.$b=d.Bb.frame_end+1,n.oh=m.name,n.dd=f,n.Vk=n.rb,n.pm=n.$b,c.Lf.push(n),f++);b=f+1;for(l=0;l<c.Ld.length;l++)d=c.Ld[l],d.ZL&&(f=b,n=p(),n.type="CLIP",n.rb=d.rb,n.$b=d.$b,n.oh=d.name,n.dd=f,n.Vk=n.rb,n.pm=n.$b,c.Lf.push(n))}}};z.eV=function(a,b,c){a.ub||(a.ub={rb:a.frame_start,$b:a.frame_end,Mc:0,$r:-1,Cs:a.frame_end,Ds:a.frame_start,gq:null,cyclic:b,Sb:[],Ua:[],TH:a.name,wl:!1,Ho:!1,KB:!0},T.push(a.ub));b=a.ub;for(var h=R.YF(a,"ALL",c),d=0;d<h.length;d++){var k=h[d];if(k.Lf.length){b.Sb[c]||(b.Sb[c]=
[]);for(var f=0;f<k.Aa.length;f++){var l=k.Aa[f];l.Bb==a&&l.oH&&b.Sb[c].push(k)}f=k.Lf;l=b;for(var e=k.name,m=0;m<f.length;m++){var n=f[m];l.rb>n.$b||l.$b<n.rb?(L.warn("NLA: Strip is out of scene range: "+(e+" ["+n.rb+":"+n.$b+"]")),f.splice(m,1),m--):n.oh||"CLIP"!=n.type||(L.warn('NLA: no action in strip for object "'+e+'".'),f.splice(m,1),m--)}k=k.Lf;f=b;for(l=0;l<k.length;l++){e=k[l];m=f.rb;n=f.$b+1;for(var u=0;u<k.length;u++){var p=k[u];e.dd==p.dd&&(p.$b<=e.rb&&(m=e.rb),p.rb>=e.$b&&(n=Math.min(n,
p.rb)))}e.xF=m;e.wF=n;e.KD=0===e.repeat%1?e.pm:e.Vk+e.repeat%1*(e.pm-e.Vk)}}}a=a.sa.oq;for(d=0;d<a.length;d++)h=a[d].sa,h.gm&&(h.Qb||h.pe)&&h.qq==c&&(h.Mk||(r.M(h.rb,0,b.$b),r.M(h.rb+h.jl,0,b.$b)),b.Ua.push(h))};z.DS=function(){for(var a=0;a<T.length;a++)for(var b=T[a],c=0;c<b.Sb.length;c++){var h=b.Sb[c];if(h)for(a=0;a<h.length;a++)for(var d=h[a],k=d.Lf,f=0;f<k.length;f++){var l=k[f];E.TQ(d,l.qn,l.nd,l.oh,l.dd)}}};z.start=function(){V=0};z.vQ=function(){return V};z.AX=function(a){return a.ub?a.ub.Mc:
null};z.FY=function(a,b){return a.ub?(a.ub.Mc=b,!0):!1};z.update=function(a,h){if(!(0>V)){0==V&&(V=a);for(var d=0;d<T.length;d++){var k=T[d];k.wl&&(k.Mc-=ha.ke()*h);var f=l(k,a);if((!k.wl||k.Ho)&&f>=k.Cs)if(k.cyclic){f=k;var m=a;f.gq&&f.gq();u(f.Ds,m);f.KB=!0;f=l(f,m)}else{m=k;var n=f;m.wl=!0;m.Mc-=n-m.Cs;m.gq&&m.gq()}if(!k.wl||k.Ho){m=k;n=f;for(var t=0;t<m.Sb.length;t++){var e=m.Sb[t];if(e)for(var p=0;p<e.length;p++){for(var v=e[p],B=v.Lf,A=0;A<B.length;A++){var z=B[A];"SOUND"==z.type&&n<m.$r-1E-6&&
(z.wk=!1)}for(A=0;A<B.length;A++)switch(z=B[A],z.type){case "CLIP":if(z.xF<=n&&n<z.wF&&!z.wk){t=v;var y=z,G=y.qn;""!=y.Eq?E.rM(t,G,y.Eq,y.dd):E.apply(t,G,y.oh,y.dd);E.set_behavior(t,E.AB_FINISH_STOP,y.dd);G=b(y.rb,y);E.set_frame(t,G,y.dd);for(t=0;t<B.length;t++)B[t]!=z&&B[t].dd==z.dd&&(B[t].wk=!1);z.wk=!0}z.wk&&(y=v,G=b(n,z),1E-6<Math.abs(G-E.bA(y,z.dd))&&E.set_frame(y,G,z.dd));break;case "SOUND":if((n<m.$r-1E-6||m.$r<z.rb)&&z.rb<=n&&n<z.$b&&!z.wk){y=v;var C=z;G=(C.rb-n)/ha.ke();C=(C.$b-C.rb)/ha.ke();
Y.play(y,G,C);z.wk=!0}m.$r<z.$b&&z.$b<=n&&z.wk&&(z.wk=!1)}}}m=a;n=k;e=f;for(p=0;p<n.Ua.length;p++)if(v=n.Ua[p],v.Qb||v.pe){B=K.yJ(v);A=v;z=r.M(c(e,A),A.Mc,A.Mc+K.zJ(A)-1);A.pe&&(z=K.zV(A,z),z==A.Qs&&z--);A=z;z=K.AJ(v);y=t=!1;if(n.Ho||n.KB)y=!0;n.wl||(G=c(e,v),G=v.Mc<=G&&G<=v.Mc+K.zJ(v),C=K.BJ(v),v.Mk&&A==z&&(y=!0),C||B==A||(y=!0),G&&!C?K.play_video(v):G&&C?t=!0:!G&&C&&(v.Qb&&B<A?t=!0:K.pause_video(v)));y?(K.tT(v.zt,A,v.qq),v.pe&&(v.Pl=K.cx(v,m))):t&&K.CJ(v)&&(v.Qb?K.iJ(v):(B=K.cx(v,m),B!=v.Pl&&(v.yk=
A,K.hJ(v)),v.Pl=B))}k.$r=f}k.Ho=!1;k.KB=!1}}};z.cleanup=function(a){if(0==a)T.length=0,V=-1;else for(var b=0;b<T.length;b++)T[b].Sb[a]=null};z.gE=function(a){var b=a.animation_data;return b&&b.nla_tracks.length||G(a)||w(a)?!0:!1};z.set_frame=u;z.get_frame=function(a){var b=B.get_active();return b.ub?l(b.ub,a):-1};z.jC=function(){var a=B.get_active();if(a.ub){a.ub.wl=!0;a=a.ub.Ua;for(var b=0;b<a.length;b++)K.pause_video(a[b])}};z.zH=function(a){var b=B.get_active();b.ub&&(b.ub.wl=!1,b.ub.gq=a?a:null)};
z.get_frame_start=function(){var a=B.get_active();return a.ub?a.ub.rb:-1};z.get_frame_end=function(){var a=B.get_active();return a.ub?a.ub.$b:-1};z.is_play=function(){var a=B.get_active();return a.ub?!a.ub.wl:!1};z.check_nla=function(){var a=B.get_active();return a.ub?a.b4w_use_nla:!1};z.check_logic_nodes=function(){var a=B.get_active();return a.ub?0<a.b4w_logic_nodes.length:!1};z.set_range=function(a,b){var c=B.get_active();if(c.ub)c.ub.Ds=a,c.ub.Cs=b;else return!1};z.UB=function(a){var b=B.get_active();
b.ub&&(b.ub.Cs=a)};z.CT=function(a){var b=B.get_active();b.ub&&(b.ub.Ds=a)};z.reset_range=function(){var a=B.get_active();if(a.ub)a=a.ub,a.Ds=a.rb,a.Cs=a.$b;else return!1};z.set_cyclic=function(a){var b=B.get_active();if(b.ub)b.ub.cyclic=a;else return!1};z.clear_callback=function(){var a=B.get_active();a.ub&&(a.ub.gq=null)};z.fI=function(a){var b=B.get_active().ub;b&&(b.Mc=-(a-V)*ha.ke()+b.Ds,b.Ho=!0)};z.get_frame_end=function(){var a=B.get_active().ub;return a?a.$b:null}});w.a=f},function(D,w,f){D=
f(0);var N=f(5),U=f(4),n=f(15),y=f(39),d=f(12),m=f(1),C=f(19),v=f(8),r=f(18),p=f(6),z=f(2),a=f(3);f=Object(D.a)("__controls",function(f,k){function c(b,c){c||(c=Y.get_container());return{type:b,value:0,Pa:null,element:c,Fb:!1,key:0,Rb:"",Qi:!1,rz:null,qz:function(){},pz:null,JE:function(){},tj:null,from:new Float32Array(3),to:new Float32Array(3),pG:!1,Pv:!1,Es:0,HH:function(){},axis:"",ih:0,Vp:new Float32Array(3),Uw:new Float32Array(4),threshold:0,FH:new Float32Array(4),eu:0,du:0,PH:0,fu:0,bh:0,repeat:!1,
vF:!1,gamepad_id:0,position:a.create(),orientation:v.create(),callback:function(){}}}function l(b){function c(){return{bl:new Float32Array(2),Yo:!0,obj:null,identifier:-1,vj:0}}b||(b=Y.get_container());for(var h=0;h<t.length;h++){var d=t[h];if(b==d.element)return d}d={element:b,Vr:!0,ng:0,FA:!0,vw:0,ww:0,on:0,pn:0,ws:0,xs:0,xi:new Float32Array(2),vf:new Float32Array(2),yi:new Float32Array(2),Qf:new Float32Array(2),$x:0,BC:0,SI:0,jg:new Uint8Array(256),yy:0,nA:null,kj:c(),Jk:Array(10),GA:!1,cG:v.create(),
Ev:0,Dv:0,Cv:0,qA:0,pA:0,Bv:Infinity,pB:null,oB:null,eB:null,aB:null,cB:null,zC:null,yC:null,dB:null,bB:null,yB:null,fY:null,AC:null,xC:null,wC:null,uk:{}};for(h=0;10>h;++h)d.Jk[h]=c();d.pB=function(a){d.GA||(K.GQ(a,d.cG),d.GA=!0)};d.oB=function(b){b=a.copy(b,ja);d.Cv=b[0];d.Dv=b[1];d.Ev=b[2];Infinity==d.Bv&&(d.Bv=b[0],d.pA=b[1],d.qA=b[2])};d.eB=function(a){d.yy+=a*aa.XR};d.aB=function(a){var b=K.get_device_by_type_element(K.DEVICE_MOUSE,d.element);b=K.get_vector_param(b,K.MOUSE_LOCATION,e);d.vw=
b[0];d.ww=b[1];d.on=b[0];d.pn=b[1];if(3==d.ng||0==d.ng)d.ng=1;d.which=a};d.cB=function(){var a=K.get_device_by_type_element(K.DEVICE_MOUSE,d.element);a=K.get_vector_param(a,K.MOUSE_LOCATION,e);a=Y.client_to_canvas_coords(a[0],a[1],e);d.kj.Yo=!1;d.kj.bl[0]=a[0];d.kj.bl[1]=a[1]};d.zC=function(a){for(var b=0;b<a.length;++b){for(var c=a[b],h=null,k=null,f=0;f<d.Jk.length;f++){var l=d.Jk[f],q=3==l.vj||0==l.vj;if(l.identifier==c.identifier){q&&(k=l);break}else!h&&q&&(h=l,h.identifier=c.identifier)}if(c=
k||h)h=Y.client_to_canvas_coords(a[b].clientX,a[b].clientY,e),c.Yo=!1,c.vj=1,c.bl[0]=h[0],c.bl[1]=h[1]}};d.yC=function(a){for(var b=0;b<d.Jk.length;++b){for(var c=d.Jk[b],e=!1,h=0;h<a.length;++h)if(a[h].identifier==c.identifier){e=!0;break}e||(0!=c.vj&&(c.vj=3),c.obj=null)}};d.dB=function(a){var b=K.get_device_by_type_element(K.DEVICE_MOUSE,d.element);b=K.get_vector_param(b,K.MOUSE_LOCATION,e);d.vw=b[0];d.ww=b[1];d.on=b[0];d.pn=b[1];0!=d.ng&&(d.ng=3);d.which=a};d.bB=function(a){J.Ov&&0==d.ng||(d.on=
a[0],d.pn=a[1])};d.yB=function(a){d.ws+=a[0];d.xs+=a[1]};d.DG=function(a){2!=d.jg[a]&&(d.jg[a]=1,d.Vr=!1)};d.FG=function(){for(var a=0;a<d.jg.length;a++)0!=d.jg[a]&&(d.jg[a]=3,d.Vr=!1)};d.GG=function(a){d.Vr=!1;d.jg[a]=3};d.AC=function(a){d.FA=!1;if(1==a.length)d.xi[0]=a[0].clientX,d.xi[1]=-1,d.yi[0]=a[0].clientY,d.yi[1]=-1;else if(1<a.length){d.$x=d.BC=w(a);d.xi[0]=a[0].clientX;d.xi[1]=a[1].clientX;d.yi[0]=a[0].clientY;d.yi[1]=a[1].clientY;var b=a[0];a=a[1];d.SI=Math.atan2(b.clientY-a.clientY,b.clientX-
a.clientX)}d.vf.set(d.xi);d.Qf.set(d.yi)};d.xC=function(a){1===a.length?(d.vf[0]=a[0].clientX,d.vf[1]=-1,d.Qf[0]=a[0].clientY,d.Qf[1]=-1):1<a.length&&(d.vf[0]=a[0].clientX,d.vf[1]=a[1].clientX,d.Qf[0]=a[0].clientY,d.Qf[1]=a[1].clientY,d.$x=w(a))};d.wC=function(a){0==a.length&&(d.FA=!0)};t.push(d);return d}function b(a,b){if(b in a.uk&&0<a.uk[b])a.uk[b]+=1;else switch(a.uk[b]=1,b){case "orientation_quat":(b=K.get_device_by_type_element(K.DEVICE_GYRO))&&K.attach_param_cb(b,K.GYRO_ORIENTATION_ANGLES,
a.pB);break;case "orientation_angles":(b=K.get_device_by_type_element(K.DEVICE_GYRO))&&K.attach_param_cb(b,K.GYRO_ORIENTATION_ANGLES,a.oB);break;case "mouse_wheel":(b=K.get_device_by_type_element(K.DEVICE_MOUSE,a.element))&&K.attach_param_cb(b,K.MOUSE_WHEEL,a.eB);break;case "mouse_down_which":(b=K.get_device_by_type_element(K.DEVICE_MOUSE,a.element))&&K.attach_param_cb(b,K.MOUSE_DOWN_WHICH,a.aB);break;case "mouse_select":(b=K.get_device_by_type_element(K.DEVICE_MOUSE,a.element))&&K.attach_param_cb(b,
K.MOUSE_DOWN_WHICH,a.cB);break;case "touch_select":if(b=K.get_device_by_type_element(K.DEVICE_TOUCH,a.element))K.attach_param_cb(b,K.TOUCH_START,a.zC),K.attach_param_cb(b,K.TOUCH_END,a.yC);break;case "mouse_up_which":(b=K.get_device_by_type_element(K.DEVICE_MOUSE,a.element))&&K.attach_param_cb(b,K.MOUSE_UP_WHICH,a.dB);break;case "mouse_location":(b=K.get_device_by_type_element(K.DEVICE_MOUSE,a.element))&&K.attach_param_cb(b,K.MOUSE_LOCATION,a.bB);break;case "mouse_pointerlock":(b=K.get_device_by_type_element(K.DEVICE_MOUSE,
a.element))&&K.attach_param_cb(b,K.hD,a.yB);break;case "keyboard_downed_keys":if(b=K.get_device_by_type_element(K.DEVICE_KEYBOARD,a.element))K.attach_param_cb(b,K.KEYBOARD_DOWN,a.DG),K.attach_param_cb(b,K.gD,a.FG),K.attach_param_cb(b,K.KEYBOARD_UP,a.GG);break;case "touch_start":(b=K.get_device_by_type_element(K.DEVICE_TOUCH,a.element))&&K.attach_param_cb(b,K.TOUCH_START,a.AC);break;case "touch_move":(b=K.get_device_by_type_element(K.DEVICE_TOUCH,a.element))&&K.attach_param_cb(b,K.TOUCH_MOVE,a.xC);
break;case "touch_end":(b=K.get_device_by_type_element(K.DEVICE_TOUCH,a.element))&&K.attach_param_cb(b,K.TOUCH_END,a.wC)}}function h(a,b){if(b in a.uk&&0<a.uk[b]&&(--a.uk[b],!a.uk[b]))switch(b){case "orientation_quat":(b=K.get_device_by_type_element(K.DEVICE_GYRO))&&K.detach_param_cb(b,K.GYRO_ORIENTATION_QUAT,a.pB);break;case "orientation_angles":(b=K.get_device_by_type_element(K.DEVICE_GYRO))&&K.detach_param_cb(b,K.GYRO_ORIENTATION_ANGLES,a.oB);break;case "mouse_wheel":(b=K.get_device_by_type_element(K.DEVICE_MOUSE,
a.element))&&K.detach_param_cb(b,K.MOUSE_WHEEL,a.eB);break;case "mouse_down_which":(b=K.get_device_by_type_element(K.DEVICE_MOUSE,a.element))&&K.detach_param_cb(b,K.MOUSE_DOWN_WHICH,a.aB);break;case "mouse_select":(b=K.get_device_by_type_element(K.DEVICE_MOUSE,a.element))&&K.detach_param_cb(b,K.MOUSE_DOWN_WHICH,a.cB);break;case "touch_select":if(b=K.get_device_by_type_element(K.DEVICE_TOUCH,a.element))K.detach_param_cb(b,K.TOUCH_START,a.zC),K.detach_param_cb(b,K.TOUCH_END,a.yC);break;case "mouse_up_which":(b=
K.get_device_by_type_element(K.DEVICE_MOUSE,a.element))&&K.detach_param_cb(b,K.MOUSE_UP_WHICH,a.dB);break;case "mouse_location":(b=K.get_device_by_type_element(K.DEVICE_MOUSE,a.element))&&K.detach_param_cb(b,K.MOUSE_LOCATION,a.bB);break;case "mouse_pointerlock":(b=K.get_device_by_type_element(K.DEVICE_MOUSE,a.element))&&K.detach_param_cb(b,K.hD,a.yB);break;case "keyboard_downed_keys":if(b=K.get_device_by_type_element(K.DEVICE_KEYBOARD,a.element))K.detach_param_cb(b,K.KEYBOARD_DOWN,a.DG),K.detach_param_cb(b,
K.gD,a.FG),K.detach_param_cb(b,K.KEYBOARD_UP,a.GG);break;case "touch_start":(b=K.get_device_by_type_element(K.DEVICE_TOUCH,a.element))&&K.detach_param_cb(b,K.TOUCH_START,a.AC);break;case "touch_move":(b=K.get_device_by_type_element(K.DEVICE_TOUCH,a.element))&&K.detach_param_cb(b,K.TOUCH_MOVE,a.xC);break;case "touch_end":(b=K.get_device_by_type_element(K.DEVICE_TOUCH,a.element))&&K.detach_param_cb(b,K.TOUCH_END,a.wC)}}function G(a,b){a.value=Number(b)}function H(a){for(var b=a.xk,c=a.gT,e=0;e<b.length;e++)c[e]=
b[e].value;return a.LR(c)}function u(a,b){a=a||q;var c=a.wi;if(c){var e=a.Bn;if(b){var h=c[b];if(h){for(var d=h.xk,k=0;k<d.length;k++){var f=d[k];var l=da.indexOf(f);l=-1<l?I[l]:[];1==l.length?(E(f),f=da.indexOf(f),-1<f?(da.splice(f,1),I.splice(f,1)):L.va("Sensors cache is corrupted")):1<l.length&&l.splice(l.indexOf(h),1)}delete c[b];b=e.indexOf(h);-1<b?e.splice(b,1):L.va("Incorrect manifolds array");Object.getOwnPropertyNames(c).length||(a=P.indexOf(a),-1<a?P.splice(a,1):T.error("Wrong object"))}}else{e=
[];for(k in c)e.push(k);for(k=0;k<e.length;k++)u(a,e[k])}ta=!0}}function E(a){switch(a.type){case 90:V.remove_collision_test(a.rz,a.Rb,a.qz);a.Fb=!0;break;case 100:V.clear_collision_impulse_test(a.pz);a.Fb=!0;break;case 110:V.remove_ray_test(a.Es);a.Fb=!0;break;case 140:a.Fb=!0;break;case 20:var b=l(a.element);h(b,"keyboard_downed_keys");a.Fb=!0;break;case 30:b=l(a.element);h(b,"mouse_wheel");a.Fb=!0;break;case 40:b=l(a.element);h(b,"mouse_down_which");h(b,"mouse_up_which");h(b,"mouse_location");
a.Fb=!0;break;case 280:b=l(a.element);h(b,"mouse_pointerlock");a.Fb=!0;break;case 50:b=l(a.element);h(b,"mouse_down_which");h(b,"mouse_up_which");a.Fb=!0;break;case 60:b=l(a.element);h(b,"touch_start");h(b,"touch_move");h(b,"touch_end");a.Fb=!0;break;case 70:b=l(a.element);h(b,"touch_start");h(b,"touch_move");a.Fb=!0;break;case 75:b=l(a.element);h(b,"touch_start");h(b,"touch_move");a.Fb=!0;break;case 80:b=l(a.element);h(b,"touch_start");h(b,"touch_end");a.Fb=!0;break;case 170:b=l(a.element);h(b,"mouse_select");
h(b,"touch_select");h(b,"touch_start");h(b,"touch_end");h(b,"mouse_down_which");h(b,"mouse_up_which");a.Fb=!0;break;case 180:case 190:b=l(a.element);h(b,"orientation_angles");a.Fb=!0;break;case 200:b=l(a.element);h(b,"orientation_quat");a.Fb=!0;break;case 210:case 220:a.Fb=!0}}function w(a){var b=a[0],c=a[1];a=b.clientX-c.clientX;b=b.clientY-c.clientY;return Math.sqrt(a*a+b*b)}function O(a){return 0==a?K.get_device_by_type_element(K.Gt):1==a?K.get_device_by_type_element(K.Hy):2==a?K.get_device_by_type_element(K.Iy):
K.get_device_by_type_element(K.Jy)}var L=Object(N.a)(f),B=Object(U.a)(f),Y=Object(n.a)(f),K=Object(y.a)(f),ha=Object(d.a)(f),T=Object(m.a)(f),V=Object(C.a)(f),A=Object(r.a)(f),aa=B.controls,J=B.wa,P=[],q={},da=[],I=[],t=[],e=new Float32Array(2),ma=new Float32Array(2),ja=a.create(),pa=v.create(),ta=!1,D=0;k.CT_POSITIVE=10;k.CT_CONTINUOUS=20;k.CT_TRIGGER=30;k.CT_SHOT=40;k.CT_LEVEL=50;k.CT_CHANGE=60;k.PL_SINGLE_TOUCH_MOVE=0;k.PL_MULTITOUCH_MOVE_ZOOM=1;k.PL_MULTITOUCH_MOVE_PAN=2;k.PL_MULTITOUCH_MOVE_ROTATE=
3;var M=1;k.update=function(b,c){for(var h=0;h<t.length;h++){var d=t[h];d.kj.Yo||(d.kj.obj=ha.pick_object(d.kj.bl[0],d.kj.bl[1]),d.kj.Yo=!0,d.nA=d.kj.obj);for(var f=0;10>f;++f){var m=d.Jk[f];m.Yo||(m.obj=ha.pick_object(m.bl[0],m.bl[1]),m.Yo=!0,d.nA=m.obj)}}for(h=0;h<da.length;h++)if(d=da[h],m=b,f=c)switch(d.type){case 120:var n=d.tj,u=p.j(n.ka.na,ja);n=p.g(n.ka.na,pa);var r=a.dist(d.Vp,u),B=d.FH;v.invert(d.Uw,B);v.multiply(n,B,B);v.normalize(B,B);B=Math.abs(2*Math.acos(B[3]));r/=f;d.eu=z._51(r,d.eu,
f,.3);d.Pa[0]=r;r=B/f;d.du=z._51(r,d.du,f,.3);d.Pa[1]=r;d.eu>=d.threshold||d.du>=d.PH?G(d,1):G(d,0);a.copy(u,d.Vp);v.copy(n,d.Uw);d.ih=m;break;case 130:n=d.tj;u=p.j(n.ka.na,ja);n=Math.abs(u[1]-d.Vp[1])/f;d.fu=z._51(n,d.fu,f,.3);d.Pa=n;d.fu>=d.threshold?G(d,1):G(d,0);a.copy(u,d.Vp);d.ih=m;break;case 140:!d.Fb&&0<=d.bh&&m-d.ih>=d.bh&&(G(d,1),d.repeat?d.ih=m:d.bh=-d.bh);break;case 150:d.ih||(d.ih=m);G(d,m-d.ih);d.ih=m;break;case 160:G(d,m);break;case 180:m=l(d.element);d.Pa[0]=m.Ev-m.qA;d.Pa[1]=m.Dv-
m.pA;d.Pa[2]=m.Cv-m.Bv;break;case 190:m=l(d.element);d.Pa[0]=m.Ev;d.Pa[1]=m.Dv;d.Pa[2]=m.Cv;break;case 200:m=l(d.element);v.copy(m.cG,d.Pa);break;case 210:f=K.get_device_by_type_element(K.DEVICE_HMD);K.get_vector_param(f,K.HMD_ORIENTATION_QUAT,d.Pa);break;case 220:f=K.get_device_by_type_element(K.DEVICE_HMD);K.get_vector_param(f,K.HMD_POSITION,d.Pa);break;case 240:f=O(d.gamepad_id);d.value=K.nQ(f,d.key);break;case 250:f=O(d.gamepad_id);d.value=K.mQ(f,d.key);break;case 260:f=O(d.gamepad_id);K.get_gamepad_position(f,
d.Pa);G(d,1);break;case 270:f=O(d.gamepad_id);K.get_gamepad_orientation(f,d.Pa);G(d,1);break;case 230:G(d,d.callback());break;case 30:m=l(d.element);G(d,m.yy);break;case 40:m=l(d.element);if(!J.Ov||1==m.ng||2==m.ng)switch(u=m.on-m.vw,n=m.pn-m.ww,d.Pa.coords[0]=m.on,d.Pa.coords[1]=m.pn,d.axis){case "X":G(d,u);break;case "Y":G(d,n);break;case "XY":f=Math.sqrt(u*u+n*n),G(d,f)}break;case 280:m=l(d.element);u=m.ws;n=m.xs;r=z._51(u,0,f,.1*M);f=z._51(n,0,f,.1*M);.01<Math.abs(u)||.01<Math.abs(n)?(m.ws-=r,
m.xs-=f,d.Pa.coords[0]=r,d.Pa.coords[1]=f):(d.Pa.coords[0]=0,d.Pa.coords[1]=0);G(d,Math.sqrt(u*u+n*n));break;case 50:m=l(d.element);G(d,0!=m.ng|0);d.Pa.which=m.which;d.Pa.coords[0]=m.on;d.Pa.coords[1]=m.pn;break;case 170:m=l(d.element);G(d,0);if(d.vF)m.nA==d.tj&&G(d,1);else if(0!=m.ng&&m.kj.obj==d.tj)G(d,1);else for(f=0;10>f;++f)if(u=m.Jk[f],0!=u.vj&&u.obj==d.tj){G(d,1);break}break;case 20:m=l(d.element);d.Pa=m.jg[d.key];1==d.Pa||m.jg[0]&&16==d.key?G(d,1):d.Pa||G(d,0);break;case 60:m=l(d.element);
if(-1==m.vf[1]&&-1==m.Qf[1]){u=m.vf[0]-m.xi[0];n=m.Qf[0]-m.yi[0];f=Math.sqrt(u*u+n*n);if(-1!=m.xi[1]&&-1!=m.yi[1]){r=m.vf[0]-m.xi[1];B=m.Qf[0]-m.yi[1];var A=Math.sqrt(r*r+B*B);A<f&&(u=r,n=B,f=A)}d.Pa.gesture=k.PL_SINGLE_TOUCH_MOVE}else f=e,f[0]=(m.vf[0]+m.vf[1])/2,f[1]=(m.Qf[0]+m.Qf[1])/2,n=ma,n[0]=(m.xi[0]+m.xi[1])/2,n[1]=(m.yi[0]+m.yi[1])/2,u=f[0]-n[0],n=f[1]-n[1],f=Math.sqrt(u*u+n*n),d.Pa.gesture=k.PL_MULTITOUCH_MOVE_PAN;d.Pa.coords[0]=m.vf[0];d.Pa.coords[1]=m.Qf[0];switch(d.axis){case "X":G(d,
u);break;case "Y":G(d,n);break;case "XY":G(d,f)}break;case 70:m=l(d.element);f=m.$x-m.BC;d.Pa=k.PL_MULTITOUCH_MOVE_ZOOM;G(d,f);break;case 75:m=l(d.element);-1!=m.vf[1]&&(f=Math.atan2(m.Qf[0]-m.Qf[1],m.vf[0]-m.vf[1]),d.Pa=k.PL_MULTITOUCH_MOVE_ROTATE,G(d,f-m.SI));break;case 80:m=l(d.element),d.Pa.coords[0]=m.vf[0],d.Pa.coords[1]=m.Qf[0],m.FA?G(d,0):G(d,1)}for(h=0;h<P.length;h++)for(d=P[h],b=d.Bn,c=0;c<b.length;c++)if(f=b[c],f.em!=D){f.em=D;n=f;m=0;switch(n.type){case k.CT_POSITIVE:m=(u=H(n))?1:0;break;
case k.CT_CONTINUOUS:m=n.gk;(u=H(n))?(m=1,n.gk=1):1==m?(m=-1,n.gk=-1):m=0;break;case k.CT_TRIGGER:m=n.gk;(u=H(n))&&-1==m?(m=1,n.gk=1):u||1!=m?m=0:(m=-1,n.gk=-1);break;case k.CT_SHOT:m=n.gk;(u=H(n))&&-1==m?(m=1,n.gk=1):u||1!=m?m=0:(m=0,n.gk=-1);break;case k.CT_LEVEL:u=H(n);n.IG!=u?(m=1,n.IG=u):m=0;break;case k.CT_CHANGE:u=n.xk;n=n.nR;for(r=0;r<u.length;r++)B=u[r].value,m||B==n[r]||(m=1),n[r]=B;break;default:L.va("Wrong sensor manifold type: "+n.type)}if(m&&(u=d==q?null:d,ta=!1,f.callback(u,f.id,m,
f.WM),ta)){h=-1;break}}for(h=0;h<P.length;h++)for(d=P[h],b=d.Bn,c=0;c<b.length;c++)for(f=b[c],d=f.xk,f=0;f<d.length;f++)switch(m=d[f],m.type){case 30:G(m,0);break;case 40:G(m,0);break;case 60:G(m,0);break;case 70:G(m,0);break;case 75:G(m,0);break;case 80:G(m,0);break;case 140:G(m,0)}for(h=0;h<t.length;h++){b=d=t[h];if(!b.Vr){for(c=0;c<b.jg.length;c++)1==b.jg[c]?b.jg[c]=2:3==b.jg[c]&&(b.jg[c]=0);b.Vr=!0}1==b.ng?b.ng=2:3==b.ng&&(b.ng=0);for(c=0;c<b.Jk.length;c++)d=b.Jk[c],1==d.vj?d.vj=2:3==d.vj&&(d.vj=
0);b.yy=0;b.vw=b.on;b.ww=b.pn;b.jg[0]=0;b.xi.set(b.vf);b.yi.set(b.Qf);b.BC=b.$x;b.qA=b.Ev;b.pA=b.Dv;b.Bv=b.Cv;b.GA=!1}D++};k.create_custom_sensor=function(a){var b=c(10);G(b,a);return b};k.create_keyboard_sensor=function(a){var b=c(20,document);b.key=a;b.Fb=!0;return b};k.create_gamepad_btn_sensor=function(a,b){var e=c(240,document);b=b||K.pv();e.gamepad_id=b;e.key=a;e.Fb=!0;return e};k.create_gamepad_axis_sensor=function(a,b){var e=c(250,document);b=void 0==b?K.pv():b;e.gamepad_id=b;e.key=a;e.Fb=
!0;return e};k.create_gamepad_position_sensor=function(b){var e=c(260,document);b=void 0===b?K.pv():b;e.gamepad_id=b;e.Fb=!0;e.Pa=a.create();return e};k.create_gamepad_orientation_sensor=function(a){var b=c(270,document);a=void 0===a?K.pv():a;b.gamepad_id=a;b.Fb=!0;b.Pa=v.create();return b};k.create_collision_sensor=function(a,b,e){if(!a||!V.eb(a))return T.error("Wrong collision object"),null;var h=c(90);h.rz=a;h.Rb=b;h.Qi=e;h.Pa={coll_obj:null,coll_pos:e?new Float32Array(3):null,coll_norm:e?new Float32Array(3):
null,coll_dist:0};h.qz=function(a,b,c,e,d){G(h,a);a=h.Pa;a.coll_obj=b;h.Qi&&(a.coll_pos.set(c),a.coll_norm.set(e),a.coll_dist=d)};h.Fb=!0;return h};k.create_collision_impulse_sensor=function(a){if(!a||!a.xa)return T.error("Wrong collision impulse object"),null;var b=c(100);b.pz=a;b.JE=function(a){G(b,a)};b.Fb=!0;return b};k.create_ray_sensor=function(a,b,e,h,d,k,f){var l=c(110);l.tj=a;l.from=b;l.to=e;l.Rb=h;l.pG=d;l.Qi=k;l.Pv=f;l.Pa={hit_fract:0,obj_hit:null,hit_time:0,hit_pos:new Float32Array(3),
hit_norm:new Float32Array(3),Es:0};l.HH=function(a,b,c,e,h,d){l.pG?G(l,-1==b?0:1):G(l,b);l.Pa.hit_fract=b;l.Pa.obj_hit=c;l.Pa.hit_time=e;l.Qi&&(l.Pa.hit_pos.set(h),l.Pa.hit_norm.set(d))};l.Fb=!0;return l};k.create_mouse_click_sensor=function(a){a=c(50,a);a.Fb=!0;a.Pa={coords:new Float32Array(2),which:null};return a};k.create_mouse_wheel_sensor=function(a){a=c(30,a);a.Fb=!0;return a};k.create_mouse_move_sensor=function(a,b){b=c(40,b);b.axis=a||"XY";b.Pa={coords:new Float32Array(2)};b.Fb=!0;return b};
k.create_touch_move_sensor=function(a,b){b=c(60,b);b.axis=a||"XY";b.Pa={coords:new Float32Array(2),gesture:0};b.Fb=!0;return b};k.create_touch_zoom_sensor=function(a){a=c(70,a);a.Pa=0;a.Fb=!0;return a};k.create_touch_rotate_sensor=function(a){a=c(75,a);a.Pa=0;a.Fb=!0;return a};k.create_touch_click_sensor=function(a){a=c(80,a);a.Pa={coords:new Float32Array(2)};a.Fb=!0;return a};k.create_motion_sensor=function(){var b=v.create(),e=a.create();return function(a,h,d){if(!a)return T.error("Wrong collision object"),
null;var k=c(120);k.tj=a;var f=p.j(a.ka.na,e);a=p.g(a.ka.na,b);k.FH=new Float32Array(4);k.Vp=new Float32Array(f);k.Uw=new Float32Array(a);k.eu=0;k.du=0;k.threshold=h||.1;k.PH=d||.1;k.ih=0;k.Pa=new Float32Array([0,0]);return k}}();k.create_vertical_velocity_sensor=function(){var b=v.create(),e=a.create();return function(a,h){if(!a)return T.error("Wrong collision object"),null;var d=c(130);d.tj=a;var k=p.j(a.ka.na,e);a=p.g(a.ka.na,b);d.Vp=new Float32Array(k);d.Uw=new Float32Array(a);d.fu=0;d.threshold=
h||1;d.ih=0;d.Pa=0;return d}}();k.create_timer_sensor=function(a,b){var e=c(140);e.bh=a;e.repeat=b;e.Fb=!0;return e};k.reset_timer_sensor=function(a,b,c,e){a=a||q;a=a.wi;if(!a||!a[b])return T.error("reset_timer_sensor(): wrong object"),null;b=a[b].xk[c];if(!b)return T.error("reset_timer_sensor(): sensor not found"),null;b.ih=A.get_timeline();b.bh=e};k.create_elapsed_sensor=function(){var a=c(150);a.ih=0;return a};k.create_gyro_delta_sensor=function(){var a=c(180,window);a.Pa=new Float32Array(3);K.get_device_by_type_element(K.DEVICE_GYRO)?
G(a,1):G(a,0);a.Fb=!0;return a};k.create_gyro_angles_sensor=function(){var a=c(190,window);a.Pa=new Float32Array(3);K.get_device_by_type_element(K.DEVICE_GYRO)?G(a,1):G(a,0);a.Fb=!0;return a};k.create_gyro_quat_sensor=function(){var a=c(200,window);a.Pa=v.create();K.get_device_by_type_element(K.DEVICE_GYRO)?G(a,1):G(a,0);a.Fb=!0;return a};k.create_hmd_quat_sensor=function(){var a=c(210,window);a.Pa=v.create();K.get_device_by_type_element(K.DEVICE_HMD)?G(a,1):G(a,0);a.Fb=!0;return a};k.create_hmd_position_sensor=
function(){var b=c(220,window);b.Pa=a.create();K.get_device_by_type_element(K.DEVICE_HMD)?G(b,1):G(b,0);b.Fb=!0;return b};k.create_timeline_sensor=function(){return c(160)};k.create_selection_sensor=function(a,b){var e=c(170);e.tj=a;e.vF=b;e.Fb=!0;return e};k.create_callback_sensor=function(a,b){var e=c(230);e.callback=a;G(e,b);return e};k.create_plock_mouse_sensor=function(a){a=c(280,a);a.Pa={coords:new Float32Array(2)};a.Fb=!0;return a};k.create_plock_sensor=function(a){a=c(290,a);a.Fb=!0;return a};
k.fT=G;k.get_sensor_value=function(a,b,c){a=a||q;a=a.wi;if(!a||!a[b])return T.error("get_sensor_value(): wrong object"),null;b=a[b].xk[c];return b?b.value:(T.error("get_sensor_value(): sensor not found"),null)};k.get_sensor_payload=function(a,b,c){a=a||q;a=a.wi;if(!a||!a[b])return T.error("get_sensor_payload(): wrong object"),null;b=a[b].xk[c];return b?b.Pa:(T.error("get_sensor_payload(): sensor not found"),null)};k.cleanup=function(){P=[];q={};for(var a=0;a<da.length;a++)E(da[a]);da.length=0;I.length=
0};k.check_sensor_manifold=function(a,b){a=a||q;if(!a.wi)return!1;if(b&&a.wi[b])return!0;if(!b)for(var c in a.wi)return!0;return!1};k.create_sensor_manifold=function(a,c,e,h,d,k,f){a=a||q;a.Bn=a.Bn||[];a.wi=a.wi||{};var m=a.wi,t=a.Bn;m[c]&&u(a,c);e={id:c,type:e,xk:h.slice(0),LR:d,gT:Array(h.length),callback:k,WM:f,gk:-1,IG:0,nR:Array(h.length),em:-1};m[c]=e;t.push(e);-1==P.indexOf(a)&&P.push(a);for(a=0;a<e.xk.length;a++){m=c=e.xk[a];if(m.Fb){switch(m.type){case 90:V.append_collision_test(m.rz,m.Rb,
m.qz,m.Qi);break;case 100:V.apply_collision_impulse_test(m.pz,m.JE);break;case 110:m.Es=V.append_ray_test(m.tj,m.from,m.to,m.Rb,m.HH,!1,!1,m.Qi,m.Pv);m.Pa.Es=m.Es;break;case 140:m.ih=A.get_timeline();0>m.bh&&(m.bh=-m.bh);break;case 20:t=l(m.element);b(t,"keyboard_downed_keys");break;case 30:t=l(m.element);b(t,"mouse_wheel");break;case 40:t=l(m.element);b(t,"mouse_down_which");b(t,"mouse_up_which");b(t,"mouse_location");break;case 280:t=l(m.element);b(t,"mouse_pointerlock");break;case 290:K.WL(m);
break;case 50:t=l(m.element);b(t,"mouse_down_which");b(t,"mouse_up_which");break;case 60:t=l(m.element);b(t,"touch_start");b(t,"touch_move");b(t,"touch_end");break;case 70:t=l(m.element);b(t,"touch_start");b(t,"touch_move");break;case 75:t=l(m.element);b(t,"touch_start");b(t,"touch_move");break;case 80:t=l(m.element);b(t,"touch_start");b(t,"touch_end");break;case 170:t=l(m.element);b(t,"mouse_select");b(t,"touch_select");b(t,"touch_start");b(t,"touch_end");b(t,"mouse_down_which");b(t,"mouse_up_which");
break;case 180:case 190:t=l(m.element);b(t,"orientation_angles");break;case 200:t=l(m.element);b(t,"orientation_quat");break;case 240:case 260:case 270:0==m.gamepad_id?K.get_device_by_type_element(K.Gt):1==m.gamepad_id?K.get_device_by_type_element(K.Hy):2==m.gamepad_id?K.get_device_by_type_element(K.Iy):K.get_device_by_type_element(K.Jy)}m.Fb=!1}m=da.indexOf(c);-1==m?(da.push(c),I.push([e])):I[m].push(e)}ta=!0};k.default_AND_logic_fun=function(a){for(var b=0;b<a.length;b++)if(!a[b])return a[b];return a[a.length-
1]};k.default_OR_logic_fun=function(a){for(var b=0;b<a.length;b++)if(a[b])return a[b];return a[a.length-1]};k.remove_sensor_manifold=u;k.reset=function(){for(var a=0;a<P.length;a++){var b=P[a],c=b.wi;b=b.Bn;for(var e in c)delete c[e];b.length=0}for(a=0;a<da.length;a++)E(da[a]);P.length=0;da.length=0;I.length=0};k.debug=function(){T.log(String(P.length)+" objects with manifolds",P);T.log(String(da.length)+" sensors",da);for(var a=[],b=[],c=0;c<da.length;c++){var e=da[c];90==e.type&&a.push(e);110==
e.type&&b.push(e)}T.log(String(a.length)+" collision sensors",a);T.log(String(b.length)+" ray sensors",b)};k.set_plock_smooth_factor=function(a){M=a}});w.a=f},function(D,w,f){D=f(0);var N=f(19),U=f(1),n=f(2),y=f(73);f=Object(D.a)("physics",function(d,f){function m(a,d,k,c){return n.V(a,c[k[0]],c[k[1]],c[k[2]])}function v(a,d,k,c,f){d=Math.abs(a[2]-d[2]);return d<f&&z.hR(a,k,c)?d:Number.MAX_VALUE}var r=Object(N.a)(d),p=Object(U.a)(d),z=Object(y.a)(d);f.CM_WALK=0;f.CM_RUN=1;f.CM_CLIMB=2;f.CM_FLY=3;
f.enable_simulation=function(a){r.eb(a)?r.enable_simulation(a):p.Ma("No physics for object "+a.name)};f.disable_simulation=function(a){r.eb(a)?r.disable_simulation(a):p.Ma("No physics for object "+a.name)};f.has_physics=function(a){return r.eb(a)};f.has_simulated_physics=function(a){return r.has_simulated_physics(a)};f.has_dynamic_physics=function(a){return r.has_dynamic_physics(a)};f.set_gravity=function(a,d){p.ef("set_gravity","set_object_gravity");r.eb(a)?r.set_gravity(a,0,0,-d):p.Ma("No physics for object "+
a.name)};f.set_object_gravity=function(a,d){r.eb(a)?r.set_gravity(a,d[0],d[1],d[2]):p.Ma("No physics for object "+a.name)};f.set_transform=function(a,d,k){r.eb(a)?r.set_transform(a,d,k):p.Ma("No physics for object "+a.name)};f.sync_transform=function(a){r.eb(a)?r.sync_transform(a):p.Ma("No physics for object "+a.name)};f.apply_velocity=function(a,d,k,c){r.eb(a)?r.apply_velocity(a,d,k,c):p.Ma("No physics for object "+a.name)};f.apply_velocity_world=function(a,d,k,c){r.eb(a)?r.apply_velocity_world(a,
d,k,c):p.Ma("No physics for object "+a.name)};f.apply_force=function(a,d,k,c){r.eb(a)?r.apply_force(a,d,k,c,!1):p.Ma("No physics for object "+a.name)};f.apply_force_world=function(a,d,k,c){r.eb(a)?r.apply_force(a,d,k,c,!0):p.Ma("No physics for object "+a.name)};f.apply_torque=function(a,d,k,c){r.eb(a)?r.apply_torque(a,d,k,c):p.Ma("No physics for object "+a.name)};f.set_angular_velocity=function(a,d,k,c){r.eb(a)?r.set_angular_velocity(a,d,k,c):p.Ma("No physics for object "+a.name)};f.vehicle_throttle=
function(a,d){r.eb(a)?(r.is_vehicle_chassis(a)||r.is_vehicle_hull(a)||p.error("Wrong object"),r.vehicle_throttle(a,n.M(d,-1,1))):p.Ma("No physics for object "+a.name)};f.vehicle_throttle_inc=function(a,d,k){if(r.eb(a)){r.is_vehicle_chassis(a)||r.is_vehicle_hull(a)||p.error("Wrong object");d=n.M(d,0,1);var c=a.Ba.Co;-1==k||1==k?c=Math.max(-1,Math.min(c+k*d,1)):0==k&&0<=c?c=Math.max(0,c-d):0==k&&0>c?c=Math.min(0,c+d):p.error("Wrong steering direction");r.vehicle_throttle(a,n.M(c,-1,1))}else p.Ma("No physics for object "+
a.name)};f.vehicle_steer=function(a,d){r.eb(a)?(r.is_vehicle_chassis(a)||r.is_vehicle_hull(a)||p.error("Wrong object"),r.vehicle_steer(a,n.M(d,-1,1))):p.Ma("No physics for object "+a.name)};f.vehicle_steer_inc=function(a,d,k){if(r.eb(a)){r.is_vehicle_chassis(a)||r.is_vehicle_hull(a)||p.error("Wrong object");d=n.M(d,0,1);var c=a.Ba.Op;-1==k||1==k?c=Math.max(-1,Math.min(c+k*d,1)):0==k&&0<=c?c=Math.max(0,c-d):0==k&&0>c?c=Math.min(0,c+d):p.error("Wrong steering direction");r.vehicle_steer(a,n.M(c,-1,
1))}else p.Ma("No physics for object "+a.name)};f.vehicle_brake=function(a,d){r.eb(a)?(r.is_vehicle_chassis(a)||r.is_vehicle_hull(a)||p.error("Wrong object"),r.vehicle_brake(a,n.M(d,0,1))):p.Ma("No physics for object "+a.name)};f.vehicle_brake_inc=function(a,d){if(r.eb(a)){r.is_vehicle_chassis(a)||r.is_vehicle_hull(a)||p.error("Wrong object");d=n.M(d,-1,1);var k=a.Ba.Sq;r.vehicle_brake(a,n.M(k+k*d,0,1))}else p.Ma("No physics for object "+a.name)};f.is_vehicle_chassis=function(a){return r.is_vehicle_chassis(a)};
f.is_vehicle_hull=function(a){return r.is_vehicle_hull(a)};f.get_vehicle_name=function(a){if(!r.eb(a))return p.Ma("No physics for object "+a.name),null;if(r.is_vehicle_chassis(a)||r.is_vehicle_hull(a))return a.xg.name;p.error("Wrong object");return null};f.get_vehicle_throttle=function(a){if(!r.eb(a))return p.Ma("No physics for object "+a.name),null;if(r.is_vehicle_chassis(a)||r.is_vehicle_hull(a))return a.Ba.Co;p.error("Wrong object");return null};f.get_vehicle_steering=function(a){if(!r.eb(a))return p.Ma("No physics for object "+
a.name),0;if(r.is_vehicle_chassis(a)||r.is_vehicle_hull(a))return a.Ba.Op;p.error("Wrong object");return 0};f.get_vehicle_brake=function(a){if(!r.eb(a))return p.Ma("No physics for object "+a.name),0;if(r.is_vehicle_chassis(a)||r.is_vehicle_hull(a))return a.Ba.Sq;p.error("Wrong object");return 0};f.get_vehicle_speed=function(a){if(!r.eb(a))return p.Ma("No physics for object "+a.name),0;if(r.is_vehicle_chassis(a)||r.is_vehicle_hull(a))return r.get_vehicle_speed(a);p.error("Wrong object");return 0};
f.is_character=function(a){return r.dG(a)};f.set_character_move_dir=function(a,d,k){r.eb(a)?r.set_character_move_dir(a,d,k):p.Ma("No physics for object "+a.name)};f.set_character_move_type=function(a,d){r.eb(a)?r.set_character_move_type(a,d):p.Ma("No physics for object "+a.name)};f.set_character_walk_velocity=function(a,d){r.eb(a)?r.set_character_walk_velocity(a,d):p.Ma("No physics for object "+a.name)};f.set_character_run_velocity=function(a,d){r.eb(a)?r.set_character_run_velocity(a,d):p.Ma("No physics for object "+
a.name)};f.set_character_fly_velocity=function(a,d){r.eb(a)?r.set_character_fly_velocity(a,d):p.Ma("No physics for object "+a.name)};f.character_jump=function(a){r.eb(a)?r.character_jump(a):p.Ma("No physics for object "+a.name)};f.character_rotation_inc=function(a,d,k){r.eb(a)?r.character_rotation_inc(a,d,k):p.Ma("No physics for object "+a.name)};f.set_character_rotation=function(a,d,k){r.eb(a)?r.set_character_rotation(a,d,k):p.Ma("No physics for object "+a.name)};f.set_character_rotation_v=function(a,
d){r.eb(a)?r.set_character_rotation_v(a,d):p.Ma("No physics for object "+a.name)};f.set_character_rotation_h=function(a,d){r.eb(a)?r.set_character_rotation_h(a,d):p.Ma("No physics for object "+a.name)};f.set_character_vert_move_dir_angle=function(a,d){r.eb(a)?r.set_character_vert_move_dir_angle(a,d):p.Ma("No physics for object "+a.name)};f.append_collision_test=function(a,d,k,c){r.eb(a)?r.append_collision_test(a,d||"ANY",k,c||!1):p.Ma("No physics for object "+a.name)};f.remove_collision_test=function(a,
d,k){r.eb(a)?r.remove_collision_test(a,d||"ANY",k):p.Ma("No physics for object "+a.name)};f.apply_collision_impulse_test=function(a,d){r.eb(a)?r.apply_collision_impulse_test(a,d):p.Ma("No physics for object "+a.name)};f.clear_collision_impulse_test=function(a){r.eb(a)?r.clear_collision_impulse_test(a):p.Ma("No physics for object "+a.name)};f.append_ray_test=function(a,d,k,c,f,b){a=a||null;return null==a||r.eb(a)?r.append_ray_test(a,d,k,c||"ANY",f,b||!1,!1,!1,!1):(p.Ma("No physics for object "+a.name),
0)};f.append_ray_test_ext=function(a,d,k,c,f,b,h,m,n){a=a||null;return null==a||r.eb(a)?r.append_ray_test(a,d,k,c||"ANY",f,b||!1,h||!1,m||!1,n||!1):(p.Ma("No physics for object "+a.name),0)};f.remove_ray_test=function(a){r.yG(a)?r.remove_ray_test(a):p.error("Wrong ray test ID")};f.change_ray_test_from_to=function(a,d,k){r.yG(a)?r.change_ray_test_from_to(a,d,k):p.error("Wrong ray test ID")};f.apply_constraint=function(a,d,k,c,f,b,h,m,n,u){r.eb(d)&&r.eb(f)?r.apply_constraint(a,d,k,c,f,b,h,m,n,u):p.error("Wrong objects")};
f.clear_constraint=function(a){r.eb(a)&&r.IQ(a)?r.clear_constraint(a):p.error("Wrong object")};f.pull_to_constraint_pivot=function(a,d,k,c,f,b){r.eb(a)&&r.eb(c)?r.pull_to_constraint_pivot(a,d,k,c,f,b):p.error("Wrong objects")};f.navmesh_get_island=function(a,d,k){k||(k=m);if(r.eb(a)){var c=a.xa.ks;return c?z.navmesh_get_island(c,d,k):(p.error(a.name+" is not a navigation mesh object"),null)}p.Ma("No physics for object "+a.name)};f.navmesh_find_path=function(a,d,k,c){if(r.eb(a)){var f=a.xa.ks;if(!f)return p.error(a.name+
" is not a navigation mesh object"),null;c=c||{};a={};a.do_not_pull_string=!!c.do_not_pull_string;a.distance_to_closest=c.distance_to_closest||m;a.distance_to_farthest=c.distance_to_farthest||v;a.island=c.island||0;a.allowed_distance=c.allowed_distance||Number.MAX_VALUE;a.return_normals=c.return_normals||!1;return z.navmesh_find_path(f,d,k,a)}p.Ma("No physics for object "+a.name)};f.sync_bounding=function(a,d){d||(d=a.Aa[0].Bb);r.Ap(d)&&r.sync_bounding(a,d)};f.sync_mesh=function(a,d){d||(d=a.Aa[0].Bb);
r.Ap(d)&&r.sync_mesh(a,d)}});w.a=f},function(D,w,f){D=f(0);var N=f(16),U=f(14),n=f(4),y=f(15),d=f(39),m=f(12),C=f(9),v=f(1),r=f(22),p=f(10),z=f(11),a=f(18),H=f(13),k=f(6),c=f(3);f=Object(D.a)("__anchors",function(f,b){function h(){if(!ta&&!ma){var a=ja;if(a)if("visible"==a.lastElementChild.style.visibility)l(),ja=null;else if(1==a.style.opacity){var b=a.lastElementChild;a=a.firstElementChild;var c=b.firstElementChild,e=Math.ceil(b.getBoundingClientRect().width),h=Math.ceil(b.getBoundingClientRect().height),
d=Math.ceil(a.getBoundingClientRect().width),k=Math.ceil(a.getBoundingClientRect().height);b.style.position="absolute";b.style.visibility="visible";var f=!0,m=!0;a.style.display="none";ta=!0;d!=e?da.animate(d,e,200,function(a){a==e&&(f=!1,m||(ta=!1,c.style.visibility="visible"));b.style.width=a+"px"}):(f=!1,m||(ta=!1));k!=h?da.animate(k,h,200,function(a){a==h&&(m=!1,f||(ta=!1,c.style.visibility="visible"));b.style.height=a+"px"}):(m=!1,f||(ta=!1))}}}function l(){var a=ja.lastElementChild;ja.firstElementChild.style.display=
"";a.style.visibility="hidden";a.style.position="relative";a.firstElementChild.style.visibility="hidden"}function w(a){a.style.cssText+="color:       #fff;font-family: Arial;font-size:   12px;font-weight: bold;line-height: 1.25;"}function u(a,b,c){var e=document.createElement("div"),h=document.createElement("span");c&&(e.style.maxWidth=c+"px");e.style.cssText+="background-color:   #000;border-radius:      20px 20px 20px 0px;bottom:             0;box-shadow:         0px 0px 10px rgb(180, 180, 200);-webkit-box-shadow: 0px 0px 10px rgb(180, 180, 200);left:               0;box-sizing:         border-box;opacity:            1.0;padding:            6px 12px 6px 12px;position:           relative;z-index:            2;";
w(h);h.innerHTML=a;e.style.visibility="hidden";h.style.visibility="hidden";e.appendChild(h);b.appendChild(e);T.add_click_listener(b,function(){ta||b==ja||1!=b.style.opacity||ma||(ja&&"visible"==ja.lastElementChild.style.visibility&&l(),ja=b)})}function E(){for(var a=0,b=0;b<e.length;b++)e[b].yo&&a++;D=new Float32Array(3*a)}function R(a,b){return b.depth-a.depth}function O(a,b,c){a=a.element;t.kG&&(b=Math.floor(b),c=Math.floor(c));"transform"in a.style?a.style.transform="translate3d("+b+"px, "+c+"px, 0px)":
"webkitTransform"in a.style?a.style.webkitTransform="translate3d("+b+"px, "+c+"px, 0px)":(a.style.left=b+"px",a.style.top=c+"px")}function L(a){for(var b=0;b<e.length;b++)if(e[b].obj==a)return!0;return!1}var B=Object(N.a)(f),Y=Object(U.a)(f),K=Object(n.a)(f),ha=Object(y.a)(f),T=Object(d.a)(f),V=Object(m.a)(f),A=Object(C.a)(f),aa=Object(v.a)(f),J=Object(r.a)(f),P=Object(p.a)(f),q=Object(z.a)(f),da=Object(a.a)(f),I=Object(H.a)(f),t=K.wa,e=[],ma=!1,ja=null,pa=!1,ta=!1,D=new Float32Array(0),M=new Uint8Array(16),
oa=new Float32Array(2),ca=new Float32Array(3),ea=new Float32Array(3);b.append=function(a){if(!L(a)){var b=a.anchor.yo&&!!P.yc(P.Ah(),q.Wn);b={type:a.anchor.type,obj:a,x:0,y:0,depth:0,vm:"out",yo:b,element:null,ep:null,aM:a.anchor.SR,fl:a.anchor.fl};switch(b.type){case "ANNOTATION":var c=b.obj;a=ha.get_container();var d=V.get_meta_tags(c);c=c.name;var k="",f=document.createElement("div"),l=f.cloneNode(!1),m=document.createElement("span");f.style.cssText+="position:        absolute;height:          0;top:             0;left:            0;transform-style: preserve-3d;";
l.style.cssText+="background-color:   #000;border-radius:      20px 20px 20px 0px;box-shadow:         0px 0px 10px rgb(180, 180, 200);-webkit-box-shadow: 0px 0px 10px rgb(180, 180, 200);opacity:            1.0;box-sizing:         border-box;bottom:             0;left:               0;padding:            6px 12px 6px 12px;position:           absolute;";f.style.visibility="hidden";d&&(k=d.description||k,c=d.title||c);m.innerHTML=c;m.style.cssText+="-webkit-touch-callout: none;-webkit-user-select:   none;-khtml-user-select:    none;-moz-user-select:      none;-ms-user-select:       none;user-select:           none;cursor:                default;";
w(m);m.style.whiteSpace="nowrap";l.appendChild(m);f.appendChild(l);k&&u(k,f,b.aM);a.appendChild(f);b.element=f;break;case "ELEMENT":if(b.element=document.getElementById(a.anchor.fl),b.element)for(d=0;d<e.length;d++)"ELEMENT"==e[d].type&&e[d].fl==a.anchor.fl&&(aa.warn("Anchor with the id '"+a.anchor.fl+"' already exists, making the new anchor generic."),b.type="GENERIC");else aa.warn("Anchor HTML element with the id '"+a.anchor.fl+"' was not found, making it generic."),b.type="GENERIC"}e.push(b);E();
pa||(pa=!0,ha.get_container().addEventListener("mouseup",h))}};b.remove=function(a){for(var b=0;b<e.length;b++){var c=e[b];if(c.obj==a){"ANNOTATION"==c.type&&(a=c,ha.get_container().removeChild(a.element));e.splice(b,1);E();break}}};b.update=function(a){for(var b=0,c=e.length;c--;){var h=e[c];if(h.yo){var d=k.j(h.obj.ka.na,ca);D.set(d,3*b++)}var f=Da(h,ca);d=f[0];var l=f[1];f=f[2];if(a||d!=h.x||l!=h.y||f!=h.depth){switch(h.type){case "ANNOTATION":var m=d,t=l;O(h,m,t);break;case "ELEMENT":t=h.element.getBoundingClientRect(),
m=d-t.width/2,t=l-t.height/2,O(h,m,t)}h.x=d;h.y=l;h.depth=f;h.ep&&h.ep(d,l,h.vm,h.obj,h.element)}}e.sort(R);for(c=0;c<e.length;c++)h=e[c],"GENERIC"!=h.type&&(h.element.style.zIndex=ja==h.element?e.length:c);0<b&&(a=P.yc(P.Ah(),q.Wn),b=a.vb[0].jb[0],B.FU(b.fb,D),q.zd(a,b))};var Da=function(){var a=c.create();return function(b,c){var e=P.ll(P.Ah()),h=k.j(b.obj.ka.na,a);Y.project_point(e,h,c);k.v(h,b.obj.ka.na);return c}}();b.mV=function(){var a=ha.get_container(),b=P.get_active();b=P.yc(b,q.mh);b=!(!b||
!b.enable_hmd_stereo);for(var h=e.length;h--;){var d=e[h],k=d.obj,f=k.ka,m=d.x,t=d.y,n=d.depth,u=P.ll(P.Ah()),p=I.get_translation(k,ca);u=I.get_translation(u,ea);p=c.dist(p,u);(n=0>m||0>t||0>n||1<n||P.is_hidden(k)||m>=a.clientWidth||t>=a.clientHeight)||(f.dk?(n=f.Vg,f=p<f.Wg?!1:n==A.Ny||p<n?!0:!1):f=!0,n=!f);f=n?"out":"visible";d.yo&&"out"!=f&&(f=d,n=P.yc(P.Ah(),q.Wn).qa,p=ha.Wq(f.x,f.y,oa,n),J.Vw(n.Hf,p[0],n.height-p[1],2,2,M),f=255<=M[0]+M[4]+M[8]+M[12]?"visible":"out"==f.vm||0==M[0]+M[4]+M[8]+
M[12]?"covered":f.vm);b&&(f="out");if(f!=d.vm){switch(d.type){case "ANNOTATION":case "ELEMENT":var r=d.element;r&&("out"==f?(r.style.visibility="hidden",r.children.length&&(r.children[0].style.visibility="hidden")):"visible"==f?(r.style.visibility="visible",r.children.length&&(r.children[0].style.visibility="visible"),r.style.opacity=1):(r.style.visibility="visible",r.style.opacity=.1,r.children.length&&(r.children[0].style.visibility="visible"),"ANNOTATION"==d.type&&1<r.children.length&&"visible"==
r.lastElementChild.style.visibility&&(l(),r==ja&&(ja=null))))}d.vm=f;d.ep&&d.ep(m,t,d.vm,k,r)}}};b.attach_move_cb=function(a,b){for(var c=0;c<e.length;c++)e[c].obj==a&&(e[c].ep=b)};b.detach_move_cb=function(a){for(var b=0;b<e.length;b++)e[b].obj==a&&(e[b].ep=null)};b.cleanup=function(){for(var a=0;a<e.length;a++){var b=e[a];"ANNOTATION"==b.type&&ha.get_container().removeChild(b.element)}e.length=0};b.is_anchor=L;b.get_element_id=function(a){for(var b=0;b<e.length;b++)if(e[b].obj==a)return e[b].fl;
return!1};b.pause=function(){ma=!0};b.resume=function(){ma=!1};b.sS=function(a,b){for(var c=-1,h=0;h<e.length;h++){var d;if(d="visible"==e[h].vm){var k=e[h];if(k.element){d=Math.round(k.element.offsetWidth)||0;var f=Math.round(k.element.offsetHeight)||0}else f=d=0;var l=k.x;k=k.y;d=a>=l&&a<=l+d&&b<k&&b>=k-f?!0:!1}if(d)if(0>c){var m=e[h].depth;c=h}else e[h].depth<m&&(c=h,m=e[h].depth)}return 0>c?null:e[c].obj}});w.a=f},function(D,w,f){function N(a){a=a.ka;for(var c=a.Ep,d=a.rw,b=0;b<c.length;b++){for(var h=
c[b],k=d[b],f=0;f<k.length;f+=2)for(var m=k[f],n=k[f+1],r=0;4>r;r++)h.ye[m+r]=a.ye[n+r],h.qf[m+r]=a.qf[n+r],h.De[m+r]=a.De[n+r],h.wf[m+r]=a.wf[n+r];h.lg=a.lg}}w.e=function(a,c){var k=a.data.bones;a=a.pose.bones;for(var b={},h=0;h<a.length;h++){var f=a[h],r=f.bone,u=r.name,p=b[u]={Ni:0,xJ:-1,un:null,Ku:[],qu:[],Yc:null,Xp:n.b(),DC:n.b(),zi:n.b(),FC:n.b(),lt:n.b(),cy:n.b(),by:n.b(),kt:n.b(),EC:n.b(),ay:!1,NI:new Float32Array(3)};u=new Float32Array(r.matrix_local);var z=new Float32Array(16);d.invert(u,
z);f=new Float32Array(f.matrix_basis);var y=p.NI;m.subtract(U._1(r.tail_local),U._1(r.head_local),y);U._68(y,z,y);n.d(u,p.zi);n.d(f,p.kt);n.a(p.zi,p.lt);n.p(p.zi,p.FC)}for(h=0;h<k.length;h++){u=k[h].name;f=U._19("name",u,a);p=b[u];r=f.parent_recursive;p.qu.push(p);for(z=0;z<r.length;z++)f=r[z],f=f.name,f=b[f],p.qu.push(f);r.length?(f=r[0],f=f.name,f=b[f],p.un=f,n.p(f.zi,v),n.q(v,p.zi,p.Xp),f.Ku.push(p)):n.a(p.zi,p.Xp);p.Ni=h;p.name=u;n.q(p.Xp,p.kt,p.DC)}c.ka.Mg=b};w.b=function(d,c,f,b,h){var k=d.ka,
l=k.lg;c=k.Mg[c];var m=c.Ni;d=c.zi;var E=p,C=k.De,O=k.wf,w=k.ye;k=k.qf;var B=C[4*m+1],H=C[4*m+2],K=C[4*m+3],N=O[4*m+1],T=O[4*m+2],V=O[4*m+3];E[0]=(1-l)*C[4*m]+l*O[4*m];E[1]=(1-l)*B+l*N;E[2]=(1-l)*H+l*T;E[3]=(1-l)*K+l*V;C=z;O=a;C[0]=w[4*m];C[1]=w[4*m+1];C[2]=w[4*m+2];C[3]=w[4*m+3];O[0]=k[4*m];O[1]=k[4*m+1];O[2]=k[4*m+2];O[3]=k[4*m+3];y.slerp(C,O,l,C);l=v;n.w(E,l);n.r(C,l);f?(f=r,n.G(d,c.NI,f),n.q(l,f,l)):n.q(l,d,l);if(b){if(b=c.un)f=r,n.p(b.lt,f),n.q(f,l,l);b=r;n.p(c.Xp,b);n.q(b,l,l)}n.a(l,h)};w.c=
function(a,c,d,b){var h=a.ka;c=h.Mg[c];var k=h.De,f=h.ye;b?n.q(c.Xp,d,c.DC):n.a(d,c.lt);H(c,b,k,f);h.lg=0;N(a)};w.f=N;f.d(w,"d",function(){return H});w.a=function(a,c){return c in a.ka.Mg};var U=f(2),n=f(6),y=f(8),d=f(21),m=f(3),C=f(7),v=n.b(),r=n.b(),p=new Float32Array(4),z=new Float32Array(4),a=new Float32Array(4),H=function(){var a=y.create(),c=n.b(),d=n.b(),b=C.create();return function R(k,f,l,m){var u=k.DC,r=k.zi,p=k.lt,v=k.un;v?(v=v.lt,f?n.q(v,u,p):(n.p(v,d),n.q(d,p,u))):f?n.a(u,p):n.a(p,u);
n.p(r,c);n.q(p,c,c);f=k.Ni;n.l(c,b);l[4*f]=b[0];l[4*f+1]=b[1];l[4*f+2]=b[2];l[4*f+3]=b[3];n.g(c,a);m[4*f]=a[0];m[4*f+1]=a[1];m[4*f+2]=a[2];m[4*f+3]=a[3];k=k.Ku;for(f=0;f<k.length;f++)u=k[f],u.Yc||R(u,!0,l,m)}}()},function(D,w,f){function N(f){d.scale(f.color,f.Qg,f.dr)}f.d(w,"a",function(){return m});w.b=function(d,f){d.color[0]=f[0];d.color[1]=f[1];d.color[2]=f[2];N(d)};w.e=function(d,f){d.at=f};w.c=function(d,f){d.distance=f};w.f=function(d,f){d.En=f};w.d=function(d,f){d.Qg=f;N(d)};f.d(w,"g",function(){return C});
var U=f(8),n=f(6),y=f(2),d=f(3),m=function(){var f=U.create(),m=d.create();return function(p,r){p=p.data;var a=r.lc={name:"",type:p.type,CH:new Float32Array(3),direction:new Float32Array(3),color:new Float32Array(3),dr:new Float32Array(3),jF:0,LC:!1,En:0,at:0,br:.1,ar:30,LF:!1,gH:!1,uF:!1,In:!0,Nn:!0,Qg:1,distance:25,qX:"INVERSE_SQUARE"};a.name=r.name;a.In=p.use_diffuse;a.Nn=p.use_specular;r=n.g(r.ka.na,f);r=y._34(r,y.f,m);d.normalize(r,r);a.direction.set(r);a.color[0]=p.color[0];a.color[1]=p.color[1];
a.color[2]=p.color[2];a.Qg=a.jF=p.energy;N(a);a.distance=p.distance;a.LC=p.use_sphere;a.br=p.clip_start;a.ar=p.clip_end;if("POINT"===a.type||"SPOT"===a.type)a.distance=p.distance;"SPOT"===a.type?(a.at=p.spot_blend,a.En=p.spot_size):"POINT"===a.type&&(a.En=Math.PI/2);a.LF=p.b4w_generate_shadows;a.uF=p.b4w_dynamic_intensity}}(),C=function(){var f=U.create();return function(m){var p=m.lc;if(p){m=n.g(m.ka.na,f);y._34(m,y.f,p.direction);d.normalize(p.direction,p.direction);if("SUN"==p.type){m=Math.acos(d.dot(p.CH,
y.n));var r=Math.acos(d.dot(p.direction,y.n));p.gH=Math.floor(m/.025)!=Math.floor(r/.025)?!0:!1}d.copy(p.direction,p.CH)}}}()},function(D,w,f){D=f(0);var N=f(5),U=f(14),n=f(4),y=f(45),d=f(46),m=f(31),C=f(29),v=f(22),r=f(11),p=f(17),z=f(2);f=Object(D.a)("__scenegraph",function(a,f){function k(a,b){var c=[];M.Th(a,function(b,e,h){-1<c.indexOf(h)?M.SS(a,b,e,h,aa(h)):c.push(h)});M.Na(a,function(a,e){for(a=0;a<e.Nb.length;a++){var h=e.Nb[a];b||e.type!=ca.de&&e.type!=ca.xd&&e.type!=ca.lh||(h.Kd=!0);-1<
c.indexOf(h)?e.Nb[a]=aa(h):c.push(h)}})}function c(a,b){M.Na(a,function(c,e){e.type==ca.UC&&M.Lk(a,c,function(a,b){if(b.type==ca.Fi)for(a=0;a<b.Nb.length;a++){var c=b.Nb[a];c.Ka=ea.Ca;c.La=ea.Ca}});b||M.Lk(a,c,function(a,b,c){"DEPTH"==c.from&&(c.Kd=!0)})});M.Na(a,function(b){var c={};l(a,b,c);for(var e in c){b=c[e];for(var h=b[0],d=0;d<b.length;d++)if(b[d].Ka==ea.Ca){h=b[d];break}var k=b[0];for(d=0;d<b.length;d++)if(b[d].La==ea.Ca){k=b[d];break}var f=b[0];for(d=0;d<b.length;d++)if(!b[d].Kd){f=b[d];
break}for(d=0;d<b.length;d++)b[d].Ka=h.Ka,b[d].La=k.La,b[d].Kd=f.Kd}})}function l(a,b,c){M.Lk(a,b,function(b,e,h){h.active&&h.from==h.to&&(c[h.from]=c[h.from]||[],-1==c[h.from].indexOf(h)&&c[h.from].push(h),l(a,b,c))});M.am(a,b,function(a,b,e){e.active&&(c[e.from]=c[e.from]||[],-1==c[e.from].indexOf(e)&&c[e.from].push(e))});b=M.Kb(a,b);if(b.type==ca.Fi)for(var e=0;e<b.Nb.length;e++){var h=b.Nb[e];c[h.from].push(h)}}function b(a){var b=[ca.Fi,ca.Qy,ca.Mt,ca.de,ca.xd,ca.zq];S.Ib||b.push(ca.XC);var c=
M.tC(a),e=[];M.Na(c,function(a,d){for(var k=0;k<d.Nb.length;k++){var f=d.Nb[k];-1<b.indexOf(d.type)&&(f.dm=!0);var l=E(e,f,h(f));f.yb=l;d.Sh[k]=l}for(k=0;k<d.Sh.length;k++)l=d.Sh[k],u(e,l);M.am(c,a,function(k,f,l){if(!l.yb){if(-1<b.indexOf(d.type))l.dm=!0;else if((k=G(c,a,l.from))&&l.active&&!l.yb){w(e,k);l.yb=k;return}k=E(e,l,h(l));l.yb=k}});M.Lk(c,a,function(a,b,c){u(e,c.yb)});M.am(c,a,function(a,b,c){c.yb&&"NONE"==c.to&&u(e,c.yb)})})}function h(a){var b=a.to,c=a.active,e=a.yb;a.to="";a.active=
!1;a.yb=null;var h=Oa.lE(a);a.to=b;a.active=c;a.yb=e;return h}function G(a,b,c){var e=null;M.Lk(a,b,function(a,b,h){if(h.active&&h.from==h.to&&h.from==c&&h.yb)return e=h.yb,!0});M.am(a,b,function(a,b,h){if(h.active&&h.from==c&&h.yb)return e=h.yb,!0});return e}function w(a,b){for(var c=0;c<a.length;c++){var e=a[c];e.sC===b&&e.Gs++}}function u(a,b){for(var c=0;c<a.length;c++){var e=a[c];e.sC===b&&e.Gs&&e.Gs--}}function E(a,b,c){if(b.vn)return w(a,b.vn.yb),b.vn.yb;if(b.dm)return R(b);for(var e=null,
h=0;h<a.length;h++){var d=a[h];if(d.id==c&&0===d.Gs){e=d;break}}if(e&&!S.zF)return e.Gs++,e.sC;b=R(b);a.push({id:c,Gs:1,sC:b});return b}function R(a){var b=a.zk*a.size,c=a.Ak*a.size,h=a.iy,d=a.Ee;switch(a.from){case "COLOR":return a.Kd?(h=ea.Sj(a.Zg?ea.Rt:ea.Qt,h,d),ea.resize(h,b,c)):(h=a.Dr?ea.Sj(ea.om,h,d):ea.Sj(ea.Xh,h,d),ea.resize(h,b,c),ea.TB(h,a.Ka,a.La)),h;case "DEPTH":return a.Kd?(h=ea.Sj(a.Zg?ea.Pt:ea.Ot,h,d),ea.resize(h,b,c)):(h=ea.Sj(ea.nm,h,d),ea.resize(h,b,c),ea.TB(h,a.Ka,a.La)),h;case "CUBEMAP":return h=
ea.LN(b,d);case "SCREEN":case "NONE":return null;default:e.va("Wrong slink param: "+a.from)}}function O(a,b){var c=!1;M.Th(a,function(e,h,d){if(d&&(e=M.Kb(a,e),h=M.Kb(a,h),b(d,!1,e,h)))return c=!0});c||M.Na(a,function(a,c){for(a=0;a<c.Nb.length;a++)if(b(c.Nb[a],!0,c,null))return!0})}function L(a){M.Na(a,function(b,c){if(c.type!=ca.Tk){var e=c.qa;M.am(a,b,function(a,b,c){c.yb&&c.active&&c.yb&&(ma.dx(e,c.from,c.yb),c.from==c.to&&b.qa&&ma.dx(b.qa,c.from,c.yb))});for(b=0;b<c.Nb.length;b++){var h=c.Nb[b];
h.active&&h.from==h.to&&ma.dx(e,h.from,c.Sh[b])}!e.wc&&!e.gg||e.Hf||(e.Hf=oa.QS(e.wc,e.gg))}});M.Na(a,function(b,c){if(c.type==ca.Kt||c.type==ca.Gy)b=q(a,c),c.qa.Hr=b[0].qa.Hf})}function B(a,b,c,e,h,d,k,f){var l=k.Qa[0],m=c.KA,q=c.wd,t=c.Ay,n=c.Aj,u=d.JH,p=d.KH,g=h.mC,r=h.cC;h=h.bC;if(a&&0<a.Yw.length&&!f)for(f=0;f<a.Yw.length;f++){var v=ma.sd(l,!0);v.ad=new Float32Array(4);k.Qa.push(v);var B=ca.Hm(ca.de,v,!1,q,m,t,n,null,c.Wl);B.wp=a.Yw[f];M.Fa(e,B);var z=A("COLOR","u_plane_reflection",1,c.dh,c.dh,
!0,!0);z.Ka=ea.Ca;z.La=ea.Ca;u.push(z);a!=b&&(z=A("COLOR","u_plane_reflection",1,c.dh,c.dh,!0,!0),z.Ka=ea.Ca,z.La=ea.Ca,d.JS.push(z));g&&(M.ra(e,g,B,r),M.ra(e,g,B,h));if(a.Mv||b.Mv){v=ca.Hm(ca.Ue,v,!1,q,m,t,n,null,c.Wl);v.wp=a.Yw[f];M.Fa(e,v);z=A("DEPTH","DEPTH",1,c.dh,c.dh,!0,!0);var y=A("COLOR","COLOR",1,c.dh,c.dh,!0,!0);y.Ka=ea.We;y.La=ea.We;M.ra(e,B,v,z);M.ra(e,B,v,y);b.Pw.push([v]);p.push(v);g&&(M.ra(e,g,v,r),M.ra(e,g,v,h))}else B.Nb.push(A("DEPTH","DEPTH",1,c.dh,c.dh,!0,!0)),p.push(B);b.oj.push([B])}}
function H(a,b,c,e,h,d,k){var f=c.KA,l=c.wd,m=c.Ay,q=c.Aj,t=h.mC,n=h.cC;h=h.bC;var u=d.cF,p=d.bF;if(a&&a.Xw.length&&!k)for(k=0;k<a.Xw.length;k++){var g=ma.jd(ma.qd);g.width=c.Ui;g.height=c.Ui;ma.$H(g,Math.PI/2,.1,100);ma.set_projection(g,!1);var r=ca.Hm(ca.xd,g,!1,l,f,m,q,null,c.Wl);r.wp=a.Xw[k];r.sh=z._6();for(var v=0;6>v;v++)r.Im.push(ma.ON());M.Fa(e,r);v=A("CUBEMAP","u_cube_reflection",c.Ui,1,1,!1,!1);v.Ka=ea.Ca;v.La=ea.Ca;u.push(v);a!=b&&(v=A("CUBEMAP","u_cube_reflection",c.Ui,1,1,!1,!1),v.Ka=
ea.Ca,v.La=ea.Ca,d.LO.push(v));a!=b||a.sA||(v=A("CUBEMAP","u_sky_reflection",1,1,1,!1),v.Ee=!0,v.Ka=ea.Gi,v.La=ea.Ca,sky_reflect_links.push(v));t&&(M.ra(e,t,r,n),M.ra(e,t,r,h));a.Mv||b.Mv?(g=ca.Hm(ca.Ge,g,!1,l,f,m,q,null,c.Wl),g.wp=a.Xw[k],g.sh=r.sh,g.Im=r.Im,M.Fa(e,g),v=A("COLOR","COLOR",c.Ui,1,1,!1,!1),M.ra(e,r,g,A("DEPTH","DEPTH",c.Ui,1,1,!1,!1)),M.ra(e,r,g,v),p.push(g),b.Cz.push(g),t&&(M.ra(e,t,g,n),M.ra(e,t,g,h))):(r.Nb.push(A("DEPTH","DEPTH",c.Ui,1,1,!1,!1)),p.push(r));b.Tj.push(r)}}function K(a){var b=
null,c=0;M.Na(a,function(a,e){if(e.type==Da.dt){if(c==Da.tU)return b=e,!0;c++}});return b}function D(a,b){var c=M.pk(a,b),e=ca.kd("NONE"),h=M.Fa(a,e),d=M.Or(a)[0];M.Th(a,function(b,c){c==d&&M.IS(a,b,d,b,h)});var k=T(b,a);M.Th(a,function(h,d,f){if(h==c){if(k){h=ca.kr();M.Fa(a,h);d=A("COLOR","RESOLVE",1,1,1,!0,!0);d.Zg=!0;d.Kd=!0;var l=A("DEPTH","RESOLVE",1,1,1,!0,!0);l.Zg=!0;l.Kd=!0;M.ra(a,b,h,d);M.ra(a,b,h,l);b=h}M.ra(a,b,e,A(Da.VT,"u_color",f.size,f.zk,f.Ak,f.Hn,f.Zt));return!0}});M.gd(a,h,d,A("SCREEN",
"NONE",.5,.5,.5,!0,!0))}function T(a,b){var c=!1;a=M.pk(b,a);M.ah(b,a)&&(c=M.Bh(b,a,0),a=M.td(b,a,c,0),"COLOR"==a.from&&"COLOR"==a.to||"DEPTH"==a.from&&"DEPTH"==a.to?(c=M.Kb(b,c),c=T(c,b)):c="RESOLVE"==a.to);return c}function V(a,b,c,e){var h=c.Qa,d=b.Nv,k=b.anaglyph_use,f=b.pg.oj,l=b.pg.Pw;b=M.Vl(a,M.eA(a,e),M.Rk);var m=[],q=[],t=[];b=M.clone(b,function(b){if(-1<wa.indexOf(b.type)){q.push(b);var g=b}else{g=ca.wN(b);if(g.type==ca.de)for(var e=0;e<f.length;e++)if(f[e][0]==b){f[e]=[b,g];g.qa.ad=b.qa.ad;
c.Qa.push(g.qa);break}if(b.type==ca.Ue)for(e=0;e<f.length;e++){if(l[e][0]==b){l[e]=[b,g];g.qa=f[e][1].qa;break}}else-1<h.indexOf(b.qa)&&(d?(ma.ow(b.qa,ma.Vf),ma.ow(g.qa,ma.Af),g.Rm=!0):(ma.ow(b.qa,ma.fd),ma.ow(g.qa,ma.rd)),h.push(g.qa));var k=M.pk(a,b);M.Lk(a,k,function(a,b,c){-1<wa.indexOf(b.type)&&m.push([b,g,c])});if(b.type!==ca.Fi)for(e=0;e<b.Nb.length;e++)g.Nb[e].vn=b.Nb[e];b=!0;for(e=0;e<M.bj(a,k);e++){var n=M.Tg(a,k,e);n=M.Kb(a,n);-1==wa.indexOf(n.type)&&(b=!1)}b&&t.push(g)}return g},function(a){var b=
aa(a,!0);b.vn=a;return b});for(var n=0;n<q.length;n++)M.rf(b,M.pk(b,q[n]));M.$q(b);k=ca.EO(d,k);n=M.Fa(a,k);if(S.Rv)var u=ca.kd("NONE"),r=A("COLOR","u_color",1,1,1,!0,!0);else u=ca.zz(),r=A("COLOR","COPY",1,1,1,!0,!0);r.Ka=ea.Ca;r.La=ea.Ca;M.Fa(a,u);M.ra(a,e,u,r);var g=A("COLOR","u_sampler_left",1,1,1,!0,!0);g.dm=!0;g.Ka=ea.Ca;g.La=ea.Ca;M.ra(a,u,k,g);if(!e.Gc){if(S.Rv){g=ca.kd("NONE");var p=A("COLOR","u_color",1,1,1,!0,!0)}else g=ca.zz(),p=A("COLOR","COPY",1,1,1,!0,!0);M.Fa(b,g);p.vn=r;var v=M.Or(b)[0];
v=M.Kb(b,v);M.ra(b,v,g,p)}g=A("COLOR","u_sampler_right",1,1,1,!0,!0);e.Gc&&(g.vn=r);g.Ka=ea.Ca;g.La=ea.Ca;M.QD(b,a,[M.Or(b)[0],n,g]);for(n=0;n<m.length;n++)M.ra(a,m[n][0],m[n][1],m[n][2]);e=A("SCREEN","NONE",0,0,0,!1,!1);for(n=0;n<t.length;n++)M.ra(a,u,t[n],e);M.Th(a,function(b,c,g){M.Kb(a,b).type===ca.Fi&&(g.vn=null)});return k}function A(a,b,c,e,h,d,k){return{from:a,to:b,size:c,zk:e,Ak:h,Hn:d,Zt:k,active:!0,yb:null,Zg:!1,Dr:!1,Kd:!1,Ka:ea.We,La:ea.We,dm:!1,iy:!1,Ee:!1}}function aa(a,b){var c=A(a.from,
a.to,a.size,a.zk,a.Ak,a.Hn,a.Zt);c.active=a.active;!b&&a.yb&&e.va("Failed to clone slink with attached texture");c.yb=a.yb;c.Zg=a.Zg;c.Kd=a.Kd;c.Ka=a.Ka;c.La=a.La;c.dm=a.dm;c.iy=a.iy;c.Ee=a.Ee;return c}function J(a,b,c){if(b.type==c)return!0;b=da(a,b);for(var e=0;e<b.length;e++)if(J(a,b[e],c))return!0;return!1}function P(a,b,c){if(b.type==c)return!0;b=q(a,b);for(var e=0;e<b.length;e++)if(P(a,b[e],c))return!0;return!1}function q(a,b){b=M.pk(a,b);b==M.Py&&e.va("Subscene not in graph");for(var c=[],
h=M.bj(a,b),d=0;d<h;d++){var k=M.Tg(a,b,d);k!=b&&c.push(M.Kb(a,k))}return c}function da(a,b){b=M.pk(a,b);b==M.Py&&e.va("Subscene not in graph");for(var c=[],h=M.ah(a,b),d=0;d<h;d++){var k=M.Bh(a,b,d);k!=b&&c.push(M.Kb(a,k))}return c}function I(a){var b=[],c=[];O(a,function(a){a.yb&&-1==b.indexOf(a.yb)&&(b.push(a.yb),c.push(a.yb,b.length-1))});return c}function t(a,b,c,e){b=a.from+"\\n";b+="NONE"!=a.to?a.to+"\\n":"";b+="(";if(a.Hn){c=a.zk;var h=a.Ak;Math.round(c)!=c&&(c=c.toFixed(2));Math.round(h)!=
h&&(h=h.toFixed(2));b=b+((1==c?"":c)+"Sx"+((1==h?"":h)+"S"))+(a.Zt?" FACT":" VIEW")}else c=a.zk,h=a.Ak,b+=a.size*c+"x"+a.size*h;if("SCREEN"!=a.from){b+=" ";if(a.Kd)b+="RR";else{c=a.Ka;h=a.La;var d="";c==ea.Ca?d+="L":c==ea.We&&(d+="N");h==ea.Ca?d+="L":h==ea.We&&(d+="N");b+=d}for(c=0;c<e.length;c+=2)e[c]==a.yb&&(b+=" "+e[c+1])}return b+")\\n"}var e=Object(N.a)(a),ma=Object(U.a)(a),ja=Object(n.a)(a),pa=Object(y.a)(a),ta=Object(d.a)(a),Oa=Object(m.a)(a),M=Object(C.a)(a),oa=Object(v.a)(a),ca=Object(r.a)(a),
ea=Object(p.a)(a),Da=ja.Km,S=ja.wa,Na=ja.An,wa=[ca.Bj,ca.ee,ca.xd,ca.Ge];f.jN=function(a){switch(a.to){case "COLOR":case "CUBEMAP":case "DEPTH":case "SCREEN":case "OFFSCREEN":case "RESOLVE":case "COPY":case "NONE":return!1;default:return!0}};f.Wp=O;f.dV=function(a,e,h){function d(a,b,c){if(a.length)for(var g=0;g<a.length;g++)M.ra(f,a[g],b,c[g])}var f=a.Ya;h=h.pg;var l=a.pg,m=[],q=[],t=[],n=[],u=[],r=[];if(a.ld){var p=ca.ZE();M.Fa(f,p);var v=Na.Mo;p.qa.width=v;p.qa.height=v;var z=A("DEPTH","u_grass_map_depth",
v,1,1,!1,!1);S.Ib||(z.Ka=ea.Ca,z.La=ea.Ca);v=A("COLOR","u_grass_map_color",v,1,1,!1,!1);v.Ka=ea.Ca;v.La=ea.Ca}else v=z=p=null;p={mC:p,cC:z,bC:v};H(h,l,a,f,p,{cF:t,bF:r,LO:n});B(h,l,a,f,p,{JH:m,KH:u,JS:q},e);d(r,X,t);d(r,Ga,n);d(u,X,m);d(u,Ga,q);a.rj=[];a=a.mF;k(f,a);c(f,a);Da.enabled&&(a=K(f))&&D(f,a);b(f);L(f)};var X=null,Ga=null;f.ZN=function(a,e,h,d){function f(b){var c=ma.sd(Ia,!0);e.Qa.push(c);c=ca.Hm(b,c,!1,E,g,Y,T,N,a.Wl);M.Fa(l,c);b==ca.lh?(M.ra(l,m[0],c,A("COLOR","COLOR",1,1,1,!0,!0)),c.Nb.push(A("DEPTH",
"DEPTH",1,1,1,!0,!0))):(b=kb&&m[0].type==ca.Kt?db:m[0],M.ra(l,db,c,Kb),M.ra(l,b,c,tb));F&&(M.ra(l,F,c,ub),M.ra(l,F,c,Qb));for(b=0;b<n.length;b++)M.ra(l,n[b],c,u[b]);Zb&&M.ra(l,Zb,c,kc);if(r.length){var h=r.length;for(b=0;b<h;b++)M.ra(l,r[b],c,p[b])}if(v.length)for(b=0;b<v.length;b++)M.ra(l,v[b],c,z[b]);ec&&M.ra(l,ec,c,oc);return c}var l=M.create(),m=[],t=[],n=[],u=[],r=[],p=[],v=[],z=[],y=[],g=a.KA,E=a.wd,C=a.shore_smoothing,I=a.XT,G=a.ssao,P=a.god_rays,J=a.pg,w=a.YG,O=a.IM,ja=a.motion_blur,R=a.compositing,
ka=a.antialiasing,T=a.Aj,Y=a.Ay,N=a.Id,ha=a.TR,U=a.cN,Oa=a.EQ,la=a.jS,eb=a.dof,bb=a.mF,oa=a.refractions,wa=!!d.length,kb=1<S.Jc;S.yp=S.yp&&!!N&&!(kb&&G);var nb=S.yp,tb=A("COLOR","COLOR",1,1,1,!0,!0),Kb=A("DEPTH","DEPTH",1,1,1,!0,!0);if(kb){var wb=aa(Kb);tb.Zg=!0;tb.Kd=!0;Kb.Zg=!0;Kb.Kd=!0}var Ia=e.Qa[0];if(a.ld){var F=ca.ZE();M.Fa(l,F);var Ma=Na.Mo;F.qa.width=Ma;F.qa.height=Ma;var ub=A("DEPTH","u_grass_map_depth",Ma,1,1,!1,!1);S.Ib||(ub.Ka=ea.Ca,ub.La=ea.Ca);var Qb=A("COLOR","u_grass_map_color",Ma,
1,1,!1,!1);Qb.Ka=ea.Ca;Qb.La=ea.Ca}else Qb=ub=F=null;if(N){ma.GC(Ia,N);for(var $a=0;$a<N.ki.length;$a++)for(var ad=N.csm_num,ua=0;ua<ad;ua++){var Wb=ca.zO(ua,$a,N,g);M.Fa(l,Wb);n.push(Wb);Ma=N.csm_resolution;var sb=Wb.qa;e.rI.push(sb);sb.width=Ma;sb.height=Ma;Wb.Ub=!0;var Ha=0<$a?$a:ua;if(S.Ks){u.push(A("COLOR","u_shadow_map"+Ha,Ma,1,1,!1,!1));var Ta=A("DEPTH","DEPTH",Ma,1,1,!1,!1);Ta.Kd=!0;Wb.Nb.push(Ta)}else{var Ca=A("DEPTH","u_shadow_map"+Ha,Ma,1,1,!1,!1);S.er&&(Ca.Ka=ea.Ca,Ca.La=ea.Ca,Ca.iy=!0);
u.push(Ca);(pa.TO()||S.sI)&&Wb.Nb.push(A("COLOR","COLOR",Ma,1,1,!1,!1))}F&&(M.ra(l,F,Wb,ub),M.ra(l,F,Wb,Qb))}}var zc={mC:F,cC:ub,bC:Qb};H(J,J,a,l,zc,{cF:z,bF:v},wa);B(J,J,a,l,zc,{JH:p,KH:r},e);if(N){var Bb=ma.sd(Ia,!0);e.Qa.push(Bb);var lb=ca.AO(Bb,g);M.Fa(l,lb);lb.self_shadow_normal_offset=N.self_shadow_normal_offset;for(ua=0;ua<n.length;ua++)Wb=n[ua],M.ra(l,Wb,lb,u[ua]);if(nb){if(Ca=A("DEPTH","DEPTH",1,1,1,!0,!0),kb){Ca.Zg=!0;Ca.Kd=!0;var va=ca.kr();M.Fa(l,va);var pb=A("COLOR","RESOLVE",1,1,1,!0,
!0);pb.Zg=!0;pb.Kd=!0;var Qa=A("DEPTH","RESOLVE",1,1,1,!0,!0);Qa.Zg=!0;Qa.Kd=!0;M.ra(l,lb,va,pb);M.ra(l,lb,va,Qa)}}else kb?Ca=A("DEPTH","DEPTH",1,1,1,!0,!0):S.Ks?(Ca=A("DEPTH","DEPTH",1,1,1,!0,!0),Ca.Kd=!0):Ca=Kb;if(G){var Z=A("COLOR","u_color",1,1,1,!0,!0),Jb=A("DEPTH","u_depth",1,1,1,!0,!0),Vc=ma.sd(Ia,!0);e.Qa.push(Vc);var Ra=a.lU,rb=ca.CO(Vc,Y,Ra);M.Fa(l,rb);var $c=A("COLOR","u_ssao_mask",1,1,1,!0,!0);M.ra(l,lb,rb,Z);M.ra(l,lb,rb,Jb);var Gb=ma.sd(Ia,!0);e.Qa.push(Gb);var zb=ca.DO(Gb,Ra);M.Fa(l,
zb);var md=A("COLOR","u_shadow_mask",1,1,1,!0,!0);M.ra(l,rb,zb,$c);M.ra(l,lb,zb,Jb)}F&&(M.ra(l,F,lb,ub),M.ra(l,F,lb,Qb))}else lb=null;var db=ca.Hm(ca.ic,Ia,!nb,E,g,Y,T,null,a.Wl);X=db;M.Fa(l,db);N&&(nb?M.ra(l,lb,db,Ca):lb.Nb.push(Ca));if(kb){var Lb=ca.kr();M.Fa(l,Lb);t.push(Lb);var gb=A("COLOR","RESOLVE",1,1,1,!0,!0);gb.Zg=!0;gb.Kd=!0;var hc=A("DEPTH","RESOLVE",1,1,1,!0,!0);hc.Zg=!0;hc.Kd=!0;M.ra(l,db,Lb,gb);M.ra(l,db,Lb,hc)}else t.push(db);lb&&($c?M.ra(l,zb,db,md):M.ra(l,nb&&kb?va:lb,db,A("COLOR",
"u_shadow_mask",1,1,1,!0,!0)));F&&(M.ra(l,F,db,ub),M.ra(l,F,db,Qb));if(r.length){var Hb=r.length;for($a=0;$a<Hb;$a++)M.ra(l,r[$a],db,p[$a])}if(v.length)for($a=0;$a<v.length;$a++)M.ra(l,v[$a],db,z[$a]);m=t;t=[];if(!wa&&a.xN){var qb=Da.enabled&&(Da.dt===ca.zf||Da.dt===ca.Uh);sb=ma.sd(Ia,!0);qb||(sb.width=sb.height=1);e.Qa.push(sb);var Ib=ca.XE(sb,!1,g);M.Fa(l,Ib);if(a.Ei){sb=ma.sd(Ia,!0);qb||(sb.width=sb.height=1);e.Qa.push(sb);var lc=ca.XE(sb,!0,g);M.Fa(l,lc);M.ra(l,Ib,lc,A("COLOR","COLOR",1,1,1,qb,
!0));M.ra(l,Ib,lc,A("DEPTH","DEPTH",1,1,1,qb,!0))}}else Ib=null;if(!w.refractions&&!oa||wa)ec=null;else{if(kb)ec=Lb;else{if(S.Rv)var ec=ca.kd("NONE"),Cb=A("COLOR","u_color",1,1,1,!0,!0);else ec=ca.zz(),Cb=A("COLOR","COPY",1,1,1,!0,!0);M.Fa(l,ec);M.ra(l,m[0],ec,Cb)}var oc=A("COLOR","u_refractmap",1,1,1,!0,!0);S.Ib&&(oc.Ee=!0,oc.Ka=ea.Gi,oc.La=ea.Ca)}if(bb&&(oa||C||I)){var Gc=ma.sd(Ia,!0);e.Qa.push(Gc);var Zb=ca.oO(Gc);M.Fa(l,Zb);M.ra(l,kb?Lb:db,Zb,A("DEPTH","u_depth",1,1,1,!0,!0));var kc=A("COLOR",
"u_scene_depth",1,1,1,!0,!0);kc.Ka=ea.We;kc.La=ea.We}else Zb=null;if(a.yv){var Ub=f(ca.Md);Ga=Ub;t.push(Ub);m=t;t=[]}if(a.glow_materials){var mb=ma.sd(Ia,!0);e.Qa.push(mb);var jb=ca.Hm(ca.He,mb,!1,E,g,Y,T);M.Fa(l,jb);Zb&&M.ra(l,Zb,jb,kc);ec&&M.ra(l,ec,jb,oc);F&&(M.ra(l,F,jb,ub),M.ra(l,F,jb,Qb));if(r.length)for(Hb=r.length,$a=0;$a<Hb;$a++)M.ra(l,r[$a],jb,p[$a]);if(v.length)for($a=0;$a<v.length;$a++)M.ra(l,v[$a],jb,z[$a]);a.yv&&M.ra(l,jb,Ub,A("SCREEN","NONE",0,0,0,!1,!1));M.ra(l,kb?Lb:db,jb,kb?wb:Kb);
var cb=ca.kd("X_GLOW_BLUR");cb.fc="GLOW_MASK_SMALL";cb.uf=a.$i.small_glow_mask_width;var ob=A("COLOR","u_color",1,1,1,!0,!0);ob.Ka=ea.Ca;ob.La=ea.Ca;M.Fa(l,cb);M.ra(l,jb,cb,ob);var yb=ca.kd("Y_GLOW_BLUR");yb.fc="GLOW_MASK_SMALL";yb.uf=a.$i.small_glow_mask_width;var tc=A("COLOR","u_color",1,.5,.5,!0,!0);tc.Ka=ea.Ca;tc.La=ea.Ca;M.Fa(l,yb);M.ra(l,cb,yb,tc);var cc=ca.kd("X_GLOW_BLUR");cc.fc="GLOW_MASK_LARGE";cc.uf=a.$i.large_glow_mask_width;var Ac=A("COLOR","u_color",1,.5,.5,!0,!0);Ac.Ka=ea.Ca;Ac.La=
ea.Ca;M.Fa(l,cc);M.ra(l,yb,cc,Ac);var Fb=ca.kd("Y_GLOW_BLUR");Fb.fc="GLOW_MASK_LARGE";Fb.uf=a.$i.large_glow_mask_width;var Tb=A("COLOR","u_color",1,.25,.25,!0,!0);Tb.Ka=ea.Ca;Tb.La=ea.Ca;M.Fa(l,Fb);M.ra(l,cc,Fb,Tb);var hd=ma.sd(Ia,!0);e.Qa.push(hd);var Mc=ca.pO(hd,a);M.Fa(l,Mc);var Nc=A("COLOR","u_src_color",1,1,1,!0,!0);Nc.Ka=ea.Ca;Nc.La=ea.Ca;if(a.yv)if(kb){var Oc=ca.kr();M.Fa(l,Oc);M.ra(l,Ub,Oc,gb);M.ra(l,Ub,Oc,hc);M.ra(l,Oc,Mc,Nc)}else M.ra(l,Ub,Mc,Nc);else M.ra(l,kb?Lb:db,Mc,Nc);var Fc=A("COLOR",
"u_glow_mask_small",1,.5,.5,!0,!0);Fc.Ka=ea.Ca;Fc.La=ea.Ca;M.ra(l,yb,Mc,Fc);var Qd=A("COLOR","u_glow_mask_large",1,.25,.25,!0,!0);Qd.Ka=ea.Ca;Qd.La=ea.Ca;M.ra(l,Fb,Mc,Qd);m=[Mc];t=[]}a.yv||(Ga=Ub=f(ca.Md),t.push(Ub),m=t,t=[]);if(S.debug_view){sb=ma.sd(Ia,!0);e.Qa.push(sb);var id=ca.nO(sb);t.push(id);M.Fa(l,id);M.ra(l,m[0],id,tb);M.ra(l,m[0],id,Kb);F&&(M.ra(l,F,id,ub),M.ra(l,F,id,Qb));ta.pT(id);m=t;t=[]}if(kb){var Fd=ca.kr();M.Fa(l,Fd);t.push(Fd);M.ra(l,m[0],Fd,gb);M.ra(l,m[0],Fd,hc);m=t;t=[]}var oe=
m.slice(0);if(!wa&&a.$L){sb=ma.sd(Ia,!0);e.Qa.push(sb);var Zd=ca.iO(sb);M.Fa(l,Zd);M.ra(l,m[0],Zd,kb?wb:Kb)}if(P&&bb&&!wa){var Gd=Oa.zl,xe=Oa.intensity,Hd=Oa.Tl,xb=m[0],ie=E?!0:!1,ye=A("DEPTH","u_input",1,1,1,!0,!0),$d=A("COLOR","u_input",1,.25,.25,!0,!0);$d.Ka=ea.Ca;$d.La=ea.Ca;var Rd=Gd/Hd,xd=ma.sd(Ia,!0);e.Qa.push(xd);var Cc=ca.Az(xd,ie,Gd,!0,Rd,g,Hd);M.Fa(l,Cc);M.ra(l,xb,Cc,ye);Rd=Gd/Hd*.5;var bd=ma.sd(Ia,!0);e.Qa.push(bd);var fc=ca.Az(bd,ie,Gd,!1,Rd,g,Hd);M.Fa(l,fc);M.ra(l,Cc,fc,$d);Rd=Gd/Hd*
.25;var nd=ma.sd(Ia,!0);e.Qa.push(nd);var yd=ca.Az(nd,ie,Gd,!1,Rd,g,Hd);M.Fa(l,yd);M.ra(l,fc,yd,$d);var cd=ca.qO(xe,g);t.push(cd);M.Fa(l,cd);var Pc=A("COLOR","u_main",1,1,1,!0,!0);Pc.Ka=ea.Ca;Pc.La=ea.Ca;M.ra(l,xb,cd,Pc);var ic=A("COLOR","u_god_rays",1,1,1,!0,!0);ic.Ka=ea.Ca;ic.La=ea.Ca;M.ra(l,yd,cd,ic);m=t;t=[]}if(O&&!wa){xb=m[0];var Rb=ca.sO();M.Fa(l,Rb);Pc=A("COLOR","u_input",1,1,1,!0,!0);Pc.Ka=ea.Ca;Pc.La=ea.Ca;M.ra(l,xb,Rb,Pc);var od=O.key,pd=O.edge_lum,xc=ma.sd(Ia,!0);e.Qa.push(xc);var pc=ca.tO(od,
pd,g,xc);M.Fa(l,pc);var Mb=A("COLOR","u_luminance",1,.25,.25,!0,!0);Mb.Ka=ea.Ca;Mb.La=ea.Ca;if(O.adaptive){var Qc=ca.jO();M.Fa(l,Qc);Qc.qa.width=1;Qc.qa.height=1;var Jc=A("COLOR","u_input",1,.25,.25,!0,!0);Jc.Ee=!0;Jc.Ka=ea.Gi;Jc.La=ea.Ca;if(S.Ib)Mb.Ee=!0,Mb.Ka=ea.Gi,M.ra(l,Rb,Qc,Jc);else{var mc=ca.$N(),qc=A("COLOR","u_color",1,.25,.25,!0,!0);M.Fa(l,mc);M.ra(l,Rb,mc,qc);M.ra(l,mc,Qc,Jc)}M.ra(l,Qc,pc,A("COLOR","u_average_lum",1,1,1,!1,!1));pc.rm=!0}else pc.rm=!1,pc.average_luminance=O.average_luminance;
M.ra(l,xb,pc,A("COLOR","u_main",1,1,1,!0,!0));M.ra(l,Rb,pc,Mb);var jc=pc,Dc=1,uc=[];for(ua=0;5>ua;ua++)cb=ca.kd("X_BLOOM_BLUR"),cb.uf=a.$i.small_glow_mask_width,ob=A("COLOR","u_color",1,Dc,Dc,!0,!0),ob.Ka=ea.Ca,ob.La=ea.Ca,M.Fa(l,cb),M.ra(l,jc,cb,ob),Dc/=2,yb=ca.kd("Y_BLOOM_BLUR"),yb.uf=a.$i.small_glow_mask_width,tc=A("COLOR","u_color",1,Dc,Dc,!0,!0),tc.Ka=ea.Ca,tc.La=ea.Ca,M.Fa(l,yb),M.ra(l,cb,yb,tc),jc=yb,yb.lo=Dc,cb.lo=Dc,uc.push(yb,Dc);var Sb=ca.kO(O.blur);M.Fa(l,Sb);for(ua=0;ua<uc.length;ua+=
2){yb=uc[ua];var jd=uc[ua+1];Fc=A("COLOR","u_bloom_level_"+(ua/2).toString(),1,jd,jd,!0,!0);Fc.Ka=ea.Ca;Fc.La=ea.Ca;M.ra(l,yb,Sb,Fc)}M.ra(l,xb,Sb,A("COLOR","u_main",1,1,1,!0,!0));t.push(Sb);m=t;t=[]}if(eb&&bb&&!wa){xb=m[0];var vb=ma.sd(Ia,!0);e.Qa.push(vb);var $b=S.QI&&S.pE,Nb=h.dof_bokeh&&$b;if(Nb){var vc=ea.We,Bc=A("COLOR","u_color",1,1,1,!0,!0);Bc.Ka=vc;Bc.La=vc;var nc=A("DEPTH","u_depth",1,1,1,!0,!0),ac=A("COLOR","u_color",1,.5,.5,!0,!0);ac.Dr=!0;ac.Ka=ea.We;ac.La=ea.We;var Eb=A("COLOR","u_color",
1,.5,.5,!0,!0);Eb.Dr=!0;Eb.Ka=ea.We;Eb.La=ea.We;var ab=A("COLOR","u_blurred1",1,.5,.5,!0,!0);ab.Dr=!0;ab.Ka=vc;ab.La=vc;var bc=A("COLOR","u_blurred2",1,.5,.5,!0,!0);bc.Dr=!0;bc.Ka=vc;bc.La=vc;var Ob=oe[0];if(h.te){var rc=ma.sd(Ia,!0);e.Qa.push(rc);var fb=ca.yz(rc,"COC_FOREGROUND");rc.dof_distance=h.dof_distance;rc.dof_object=h.dof_object;rc.dof_front_start=h.dof_front_start;rc.dof_front_end=h.dof_front_end;rc.dof_rear_start=h.dof_rear_start;rc.dof_rear_end=h.dof_rear_end;rc.dof_power=h.dof_power;
rc.dof_bokeh=h.dof_bokeh;rc.dof_bokeh_intensity=h.dof_bokeh_intensity;rc.te=h.te;rc.dof_on=!0;M.Fa(l,fb);M.ra(l,xb,fb,Bc);M.ra(l,Ob,fb,nc);var ae=ca.kd("X_ALPHA_BLUR");M.Fa(l,ae);M.ra(l,fb,ae,ac);var be=ca.kd("Y_ALPHA_BLUR");M.Fa(l,be);M.ra(l,ae,be,Eb);var Db=ma.sd(Ia,!0),Rc=ca.yz(Db,"COC_COMBINE");e.Qa.push(Db);Db.dof_distance=h.dof_distance;Db.dof_object=h.dof_object;Db.dof_front_start=h.dof_front_start;Db.dof_front_end=h.dof_front_end;Db.dof_rear_start=h.dof_rear_start;Db.dof_rear_end=h.dof_rear_end;
Db.dof_power=h.dof_power;Db.dof_bokeh=h.dof_bokeh;Db.dof_bokeh_intensity=h.dof_bokeh_intensity;Db.te=h.te;Db.dof_on=!0;M.Fa(l,Rc);M.ra(l,xb,Rc,Bc);M.ra(l,Ob,Rc,nc);M.ra(l,be,Rc,A("COLOR","u_coc_fg",1,.5,.5,!0,!0))}else Db=ma.sd(Ia,!0),e.Qa.push(Db),Rc=ca.yz(Db,"COC_ALL"),Db.dof_distance=h.dof_distance,Db.dof_object=h.dof_object,Db.dof_front_start=h.dof_front_start,Db.dof_front_end=h.dof_front_end,Db.dof_rear_start=h.dof_rear_start,Db.dof_rear_end=h.dof_rear_end,Db.dof_power=h.dof_power,Db.dof_bokeh=
h.dof_bokeh,Db.dof_bokeh_intensity=h.dof_bokeh_intensity,Db.te=h.te,Db.dof_on=!0,M.Fa(l,Rc),M.ra(l,xb,Rc,Bc),M.ra(l,Ob,Rc,nc);var gc=ca.kd("X_DOF_BLUR");gc.qa.dof_bokeh_intensity=h.dof_bokeh_intensity;M.Fa(l,gc);M.ra(l,Rc,gc,ac);var dd=ca.kd("Y_DOF_BLUR");dd.qa.dof_bokeh_intensity=h.dof_bokeh_intensity;M.Fa(l,dd);M.ra(l,gc,dd,Eb);var qd=ca.kd("Y_DOF_BLUR");qd.qa.dof_bokeh_intensity=h.dof_bokeh_intensity;M.Fa(l,qd);M.ra(l,gc,qd,Eb);var yc=ca.YE(vb,Nb);vb.dof_distance=h.dof_distance;vb.dof_object=h.dof_object;
vb.dof_front_start=h.dof_front_start;vb.dof_front_end=h.dof_front_end;vb.dof_rear_start=h.dof_rear_start;vb.dof_rear_end=h.dof_rear_end;vb.dof_power=h.dof_power;vb.dof_bokeh=h.dof_bokeh;vb.dof_bokeh_intensity=h.dof_bokeh_intensity;vb.te=h.te;vb.dof_on=!0;t.push(yc);M.Fa(l,yc);M.ra(l,xb,yc,A("COLOR","u_sharp",1,1,1,!0,!0));M.ra(l,dd,yc,ab);M.ra(l,qd,yc,bc)}else{var Id=A("COLOR","u_color",1,1,1,!0,!0);Id.Ka=ea.Ca;Id.La=ea.Ca;var Jd=A("COLOR","u_color",1,1,1,!0,!0);Jd.Ka=ea.Ca;Jd.La=ea.Ca;gc=ca.kd("X_BLUR");
M.Fa(l,gc);M.ra(l,xb,gc,Id);var Wc=ca.kd("Y_BLUR");M.Fa(l,Wc);M.ra(l,gc,Wc,Jd);var ce=oe[0];yc=ca.YE(vb,Nb);vb.dof_distance=h.dof_distance;vb.dof_object=h.dof_object;vb.dof_front_start=h.dof_front_start;vb.dof_front_end=h.dof_front_end;vb.dof_rear_start=h.dof_rear_start;vb.dof_rear_end=h.dof_rear_end;vb.dof_power=h.dof_power;vb.dof_bokeh=h.dof_bokeh;vb.dof_bokeh_intensity=h.dof_bokeh_intensity;vb.te=h.te;vb.dof_on=!0;t.push(yc);M.Fa(l,yc);M.ra(l,xb,yc,A("COLOR","u_sharp",1,1,1,!0,!0));M.ra(l,Wc,yc,
A("COLOR","u_blurred",1,1,1,!0,!0));M.ra(l,ce,yc,A("DEPTH","u_depth",1,1,1,!0,!0))}m=t;t=[]}if(a.Ei){var Ec=f(ca.lh);t.push(Ec);m=t;t=[]}if(ja&&!wa){var Kc=m[0],ed=ca.uO(ha.mb_decay_threshold,ha.mb_factor);t.push(ed);M.Fa(l,ed);M.ra(l,Kc,ed,A("COLOR","u_mb_tex_curr",1,1,1,!0,!0));ed.Nb.push(A("COLOR","u_mb_tex_accum",1,1,1,!0,!0));m=t;t=[]}if(!wa&&a.outline){xb=m[0];var kd=ma.sd(Ia,!0);e.Qa.push(kd);var Sd=ca.wO(kd,g);M.Fa(l,Sd);var Kd=ca.kd("X_EXTEND"),Sc=A("COLOR","u_color",1,1,1,!0,!0),zd=A("COLOR",
"u_outline_mask",1,1,1,!0,!0);zd.Ka=ea.Ca;zd.La=ea.Ca;Kd.en=!0;M.Fa(l,Kd);M.ra(l,Sd,Kd,Sc);var rd=A("COLOR","u_color",1,.5,.5,!0,!0);rd.Ka=ea.Ca;rd.La=ea.Ca;var Xc=ca.kd("Y_EXTEND");Xc.en=!0;M.Fa(l,Xc);M.ra(l,Kd,Xc,rd);gc=ca.kd("X_BLUR");gc.en=!0;M.Fa(l,gc);M.ra(l,Xc,gc,rd);var wc=A("COLOR","u_color",1,.25,.25,!0,!0);wc.Ka=ea.Ca;wc.La=ea.Ca;var Td=A("COLOR","u_outline_mask_blurred",1,.25,.25,!0,!0);Td.Ka=ea.Ca;Td.La=ea.Ca;Wc=ca.kd("Y_BLUR");Wc.en=!0;M.Fa(l,Wc);M.ra(l,gc,Wc,wc);var Ld=ca.vO(la);M.Fa(l,
Ld);var Ud=A("COLOR","u_outline_src",1,1,1,!0,!0);Ud.Ka=ea.Ca;Ud.La=ea.Ca;M.ra(l,xb,Ld,Ud);M.ra(l,Sd,Ld,zd);M.ra(l,Wc,Ld,Td);t.push(Ld);m=t;t=[]}k(l,bb);if((a.anaglyph_use||a.Nv||a.Us)&&!wa){var Vd=V(l,a,e,m[0]);t.push(Vd);m=t;t=[]}if(R&&!wa){xb=m[0];var Ad=ca.mO(U.brightness,U.contrast,U.exposure,U.saturation),Bd=A("COLOR","u_color",1,1,1,!0,!0);Bd.Ka=ea.Ca;Bd.La=ea.Ca;(a.anaglyph_use||a.Nv||a.Us)&&!wa&&(Bd.dm=!0);M.Fa(l,Ad);M.ra(l,xb,Ad,Bd);t.push(Ad);m=t;t=[]}if(!m[0].Gc||m[0].type==ca.Fi||m[0].type==
ca.Kt){var Md=ca.kd("NONE");M.Fa(l,Md);var td=A("COLOR","u_color",1,1,1,!0,!0);td.Ka=ea.Ca;td.La=ea.Ca;M.ra(l,m[0],Md,td);t.push(Md);m=t;t=[]}if(ka){xb=m[0];if(S.smaa){var fd=A("COLOR","u_color",1,1,1,!0,!1);fd.Ka=ea.Ca;fd.La=ea.Ca;var sc=ca.Bz(ca.Lt,a);M.Fa(l,sc);M.ra(l,xb,sc,fd);var sd=ca.Bz(ca.Aq,a);M.Fa(l,sd);M.ra(l,sc,sd,fd);var de=A("COLOR","u_search_tex",1,1,1,!1,!1),je=A("COLOR","u_area_tex",1,1,1,!1,!1);de.Ka=ea.Ca;de.La=ea.Ca;je.Ka=ea.Ca;je.La=ea.Ca;sd.Nb.push(de);sd.Nb.push(je);var ee=
ca.Bz(ca.Mt,a);M.Fa(l,ee);M.ra(l,xb,ee,fd);var pe=A("COLOR","u_blend",1,1,1,!0,!1);pe.Ka=ea.Ca;pe.La=ea.Ca;M.ra(l,sd,ee,pe);t.push(ee)}else{var qe=ca.hO(a);M.Fa(l,qe);var ke=A("COLOR","u_color",1,1,1,!0,!1);ke.Ka=ea.Ca;ke.La=ea.Ca;(a.anaglyph_use||a.Nv||a.Us)&&!wa&&(ke.dm=!0);M.ra(l,xb,qe,ke);t.push(qe)}m=t;t=[]}t.push(m[0]);Ib&&(lc?t.push(lc):t.push(Ib));Zd&&t.push(Zd);Ma=1;if(a.sx.GB){var ze=a.sx,Ae=a.Aj,re=Ae.Cn;Ma=re?re.RI:Ma;var Yc=ca.BO(Ae,g,ze,Ma);M.Fa(l,Yc);t.push(Yc);y.length&&(M.ra(l,Yc,
db,y[0]),Ub&&M.ra(l,Yc,Ub,y[0]),jb&&M.ra(l,Yc,jb,y[0]),Ec&&M.ra(l,Yc,Ec,y[0]));if(J.LQ)if(S.Ib&&!S.is_mobile_device){var ud=ca.rO(g,Ma);M.Fa(l,ud);var Tc=A("CUBEMAP","u_sky_reflection",Ma,1,1,!1);Tc.Ee=!0;Tc.Ka=ea.Gi;Tc.La=ea.Ca;M.ra(l,Yc,ud,Tc);var Cd=A("CUBEMAP","u_irradiance",32,1,1,!1);Cd.Ee=!1;Cd.Ka=ea.Ca;Cd.La=ea.Ca;M.ra(l,ud,db,Cd);Ub&&M.ra(l,ud,Ub,Cd);jb&&M.ra(l,ud,jb,Cd);Ec&&M.ra(l,ud,Ec,Cd);t.push(ud);var Wd=ca.yO(g);M.Fa(l,Wd);M.ra(l,Yc,Wd,Tc);var Dd=A("CUBEMAP","u_cube_r_convolution",
128,1,1,!1);Dd.Ee=!1;Dd.Ka=ea.Gi;Dd.La=ea.Ca;M.ra(l,Wd,db,Dd);Ub&&M.ra(l,Wd,Ub,Dd);jb&&M.ra(l,Wd,jb,Dd);Ec&&M.ra(l,Wd,Ec,Dd);var fe=ca.lO();M.Fa(l,fe);var Nd=A("COLOR","u_brdf",512,1,1,!1);Nd.Ka=ea.Ca;Nd.La=ea.Ca;M.ra(l,fe,db,Nd);Ub&&M.ra(l,fe,Ub,Nd);jb&&M.ra(l,fe,jb,Nd);Ec&&M.ra(l,fe,Ec,Nd)}else Tc=A("CUBEMAP","u_sky_reflection",Ma,1,1,!1),Tc.Ee=!0,Tc.Ka=ea.Gi,Tc.La=ea.Ca,M.ra(l,Yc,db,Tc),Ub&&M.ra(l,Yc,Ub,Tc),jb&&M.ra(l,Yc,jb,Tc),Ec&&M.ra(l,Yc,Ec,Tc)}var vd=ca.$E();M.Fa(l,vd);for(ua=0;ua<t.length;ua++){var Od=
t[ua];Od.Ob=!0;switch(Od.type){case ca.zf:case ca.Uh:M.ra(l,Od,vd,A("COLOR","NONE",1,1,1,qb,!1));M.ra(l,Od,vd,A("DEPTH","NONE",1,1,1,qb,!1));break;case ca.Ve:M.ra(l,Od,vd,A("CUBEMAP","u_sky",Ma,1,1,!1));break;case ca.Sk:var le=A("CUBEMAP","u_irradiance",Ma,1,1,!1);le.Ee=!0;le.Ka=ea.We;le.La=ea.We;M.ra(l,ud,vd,le);break;case ca.Wn:M.ra(l,Od,vd,A("COLOR","NONE",1,1,1,!0,!1));break;default:if(wa){var se=d[0],ge=A("COLOR","OFFSCREEN",1,1,1,!0,!0);ge.yb=se;M.ra(l,t[ua],vd,ge);for($a=1;$a<d.length;$a++){var te=
d[$a],ue=ca.kd("NONE");M.Fa(l,ue);M.ra(l,t[ua],ue,A("COLOR","SCALE",1,1,1,!0,!0));var ve=te.Bk/se.Bk;ge=A("COLOR","OFFSCREEN",1,ve,ve,!0,!0);ge.yb=te;M.ra(l,ue,vd,ge)}}else M.ra(l,t[ua],vd,A("SCREEN","NONE",1,1,1,!0,!1))}}Lb&&!da(l,Lb).length&&(M.rf(l,M.pk(l,Lb)),M.$q(l));k(l,bb);c(l,bb);if(Da.enabled){var Be=K(l);Be&&D(l,Be)}b(l);L(l);N&&M.Na(l,function(a,b){if(b.type==ca.Gg||b.type==ca.Md||b.type==ca.lh){a=0;for(var c=q(l,b),g=0,e=0;e<c.length;e++){var h=c[e];h.type==ca.ee&&(g++,b.rk=b.rk||[],b.rk[0<
h.gh?h.gh:a]=h.qa.gc,a++)}b.iq&&b.hq||(S.mw?b.vt=new Float32Array(9*g):(b.iq=new Float32Array(4*g),b.hq=new Float32Array(4*g)))}});if(!J.sA)for(ua=0;ua<z.length;ua++)z[ua].active=!1;return l};f.ZR=function(a,b,c){var e=[];M.Na(a,function(b,c){if(-1==wa.indexOf(c.type)&&c.Nb.length&&J(a,c,ca.mh))for(b=0;b<c.Nb.length;b++){var h=c.Nb[b];-1==e.indexOf(h)&&e.push(h)}});M.Th(a,function(b,c,h){b=M.Kb(a,b);c=M.Kb(a,c);-1==wa.indexOf(b.type)&&J(a,c,ca.mh)&&-1==e.indexOf(h)&&e.push(h)});for(var h=0;h<e.length;h++)e[h].zk*=
b,e[h].Ak*=c};f.Ae=function(a,b,c){var e=a.uf;a.ft[0]=b*a.nc[0]*e;a.ft[1]=c*a.nc[1]*e};f.Zd=function(a,b){a.uf=b};f.YN=function(){var a=M.create(),c=ca.xO(),e=ma.jd(ma.Wc);e.width=512;e.height=512;c.qa=e;M.Fa(a,c);c.Nb.push(A("COLOR","u_color",512,1,1,!1,!1));e=ca.$E();M.Fa(a,e);M.ra(a,c,e,A("COLOR","NONE",512,1,1,!1,!1));b(a);L(a);return a};f.tP=function(a){var b=null;M.Na(a,function(a,c){return c.qa&&null===c.qa.Hf?(b=c,!0):!1});return b};f.Bd=function(a,b,c){a=q(a,b);for(b=0;b<a.length;b++)if(a[b].type==
c)return a[b];return null};f.sv=function(a,b,c){a=q(a,b);b=[];for(var e=0;e<a.length;e++)a[e].type==c&&b.push(a[e]);return b};f.KX=J;f.MX=P;f.pQ=q;f.tQ=da;f.xc=function(a,b){var c=null;M.Na(a,function(a,e){return e.type==b?(c=e,!0):!1});return c};f.OO=function(a){var b="digraph scenegraph {\n";b+="    ";b+='size="11.7,16.5";\n';b+="    ";b+='ratio="fill";\n';b+="    ";b+='node [shape=box margin="0.25,0.055"];\n';var c=I(a);M.Na(a,function(a,e){var h=b+="    ",d=ca.Mx(e);if(e.qa){d+="\\n";for(var k=
0;k<c.length;k+=2){var f=e.qa.wc;c[k]==f&&(d=ea.Vo(f)?d+("CR"+c[k+1]+" "):d+("C"+c[k+1]+" "))}for(k=0;k<c.length;k+=2)f=e.qa.gg,c[k]==f&&(d=ea.Vo(f)?d+("DR"+c[k+1]):d+("D"+c[k+1]))}e.Nb.length&&(d+="\\n-----\\n");for(k=0;k<e.Nb.length;k++)d+=t(e.Nb[k],a,null,c);b=h+(String(a)+' [label="'+d+'" color="black" style="'+((e.type==ca.Tk?"dotted":e.enqueue?"solid":"dashed")+",bold")+'"];\n')});M.Th(a,function(a,e,h){b+="    ";b+=String(a)+" -> "+String(e)+' [label="'+t(h,a,e,c)+'" style="'+(h.active?"solid":
"dotted")+'"];\n'});return b+="}"};f.xz=function(a){a=M.AU(a);for(var b=[],c=0;c<a.length;c++){var e=a[c];e.enqueue&&b.push(e)}return b}});w.a=f},function(D,w,f){D=f(0);var N=f(5),U=f(19),n=f(56),y=f(14),d=f(6),m=f(2),C=f(8),v=f(3);f=Object(D.a)("__constraints",function(f,p){function r(a){return{type:a,xb:null,target:null,cq:!1,ae:null,ob:null,Yi:null,axes:null,TI:null,od:null,tJ:!1,influence:0,Yk:"",vI:0,AE:0,CE:0,DE:0,zE:0,Kz:0,dist_max:0,cw:!1,bs:0,Zx:!1,ht:0,distance:0,hor_units:"",vert_units:""}}
function a(a,b){a.Yc&&a.Yc.xb&&w(a.Yc.xb,a);if(b.xb){var c=b.xb;-1==c.bf.indexOf(a)?c.bf.push(a):E.va("Descendant object override is forbidden")}a.Yc=b}function w(a,b){b=a.bf.indexOf(b);-1!=b?a.bf.splice(b,1):E.va("No descendant object")}function k(b,c,h,d,k,f){var l=r(3);l.xb=c;l.TI=new Float32Array(h);l.od=new Float32Array(d);l.tJ=k;l.ae=new Float32Array(b.ka.na);l.influence=f;a(b,l);T(b,l,0)}function c(b,c,h,k,f,l){var m=r(8);m.xb=c;m.ob=d.b();d.v(h,m.ob);m.axes=new Float32Array(k);m.influence=
l;m.cq=f;m.ae=new Float32Array(b.ka.na);a(b,m);T(b,m,0)}function l(b,c,h){var k=r(11);k.xb=c;k.ob=d.b();d.a(b.ka.na,k.ob);k.ae=new Float32Array(b.ka.na);k.influence=h;a(b,k);T(b,k,0)}function b(b,c,h){var d=r(13);d.xb=c;d.ob=new Float32Array(h);a(b,d);T(b,d,0)}function h(b,c,h,d){var k=r(14);k.xb=c;k.Yk=h;k.ob=new Float32Array(d);a(b,k);T(b,k,0)}function G(b,c,h){var k=r(17);k.xb=c;k.ae=new Float32Array(b.ka.na);k.ob=d.b();m._17(h.right)?(k.cw=!1,k.bs=h.right):m._17(h.left)?(k.cw=!0,k.bs=h.left):
(k.cw=!0,k.bs=0);m._17(h.bottom)?(k.Zx=!1,k.ht=h.bottom):m._17(h.top)?(k.Zx=!0,k.ht=h.top):(k.Zx=!0,k.ht=0);m._17(h.distance)?k.distance=h.distance:k.distance=0;c=m._17(h.rotation)?new Float32Array(h.rotation):C.create();d.r(c,k.ob);m._17(h.hor_units)?k.hor_units=h.hor_units:k.hor_units="widths";m._17(h.vert_units)?k.vert_units=h.vert_units:k.vert_units="heights";a(b,k);T(b,k,0)}function ka(a,b){switch(b.type){case 18:var c=b.target.ka.na,h=Y;d.p(a.ka.na,h);d.q(h,c,h);n.c(a,b.Yk,h,!1)}a.hB=!0}function u(a,
b){for(var c=0;c<a.length;c++){var h=a[c];if(!u(h.bf,b)||h.name==b.name)return!1}return!0}var E=Object(N.a)(f),R=Object(U.a)(f),O=Object(y.a)(f);p.VV=1;p.UV=2;p.ZV=3;p.RV=5;p.WV=7;p.QV=8;p.TV=12;p.OV=13;p.PV=14;p.SV=15;p.XV=16;p.YV=17;p.NV=18;var L=new Float32Array(3),B=new Float32Array(4),Y=d.b(),K=new Float32Array(3);p.PD=function(b,c,h,k,f){var l=r(1);l.xb=c;l.ob=d.b();k=k?k:C.create();d.v(h,l.ob);d.s(f,l.ob);d.r(k,l.ob);l.ae=new Float32Array(b.ka.na);a(b,l);T(b,l,0)};p.nM=function(b,c,h,k,f,l){var m=
r(2);m.xb=c;m.Yk=h;m.ae=new Float32Array(b.ka.na);m.ob=d.b();d.v(new Float32Array(k),m.ob);d.r(new Float32Array(f),m.ob);d.s(l,m.ob);a(b,m);T(b,m,0)};p.lM=function(){var b=C.create(),c=C.create();return function(h,k,f,l,n,t,e,u){var q=r(12),p=d.g(k.ka.na,c);if(l){var v=C.copy(l,b);C.multiply(p,v,v);d.r(v,h.ka.na)}else l=C.create();q.xb=k;q.ob=d.b();d.v(f,q.ob);d.r(l,q.ob);q.tB=new Float32Array(p);q.AE=m.A(n);q.CE=m.A(t);q.DE=m.B(e,-Math.PI,Math.PI);q.zE=m.B(u,-Math.PI,Math.PI);q.ae=new Float32Array(h.ka.na);
a(h,q);T(h,q,0)}}();p.kM=function(b,c,h,k){var f=r(15);f.xb=c;f.vI=k;f.ae=new Float32Array(b.ka.na);f.ob=d.b();d.v(new Float32Array(h),f.ob);a(b,f);T(b,f,0)};p.pM=function(b,c,h,k){var f=r(16);f.xb=c;f.ae=new Float32Array(b.ka.na);f.ob=d.b();d.v(new Float32Array(h),f.ob);d.r(new Float32Array(k),f.ob);d.s(1,f.ob);a(b,f);T(b,f,0)};p.wY=w;p.qM=k;p.hM=function(b,c,h,d){var k=r(5);k.xb=c;k.Kz=h;k.dist_max=d;k.ae=new Float32Array(b.ka.na);a(b,k);T(b,k,0)};p.oM=function(b,c,h){var k=r(7);k.xb=c;k.ob=d.b();
k.ae=new Float32Array(b.ka.na);d.v(new Float32Array(h),k.ob);a(b,k);T(b,k,0)};p.cM=c;var D=function(){var b=C.create();return function(c,h,k,f,l){var q=r(9);q.xb=h;h=d.g(c.ka.na,b);q.Yi=m._36(h,new Float32Array(3));q.axes=new Float32Array(k);q.influence=l;q.cq=f;q.ae=new Float32Array(c.ka.na);a(c,q);T(c,q,0)}}();p.dM=D;p.eM=l;p.MW=b;p.NW=h;p.append_stiff_viewport=G;p.OU=function(a,b){a.Yc&&T(a,a.Yc,b)};var T=function(){var a=C.create(),b=C.create(),c=C.create(),h=d.b(),k=v.create(),f=v.create(),l=
v.create();return function(q,e,u){switch(e.type){case 1:d.q(e.xb.ka.na,e.ob,q.ka.na);break;case 12:var t=d.j(q.ka.na,k),r=d.g(q.ka.na,a),p=d.j(e.ob,f),B=e.xb.ka.na;u=d.g(e.xb.ka.na,b);C.multiply(C.invert(e.tB,e.tB),r,r);C.multiply(u,r,r);d.r(r,q.ka.na);d.D(p,B,t);d.v(t,q.ka.na);C.copy(u,e.tB);V(q,e);break;case 15:t=d.j(q.ka.na,k);r=d.g(q.ka.na,a);B=e.xb.ka.na;var z=d.j(B,f),A=e.vI,y=C.copy(r,b);p=d.j(e.ob,l);p=d.D(p,B,l);m._54(p,t,u,A,t);d.v(t,q.ka.na);m._31(t,y,z,m.c);d.v(z,B);m._52(y,r,u,.16*A,
r);d.r(r,q.ka.na);break;case 2:p=d.j(e.ob,f);z=d.i(e.ob);t=d.g(e.ob,b);B=n.b(e.xb,e.Yk,!0,!1,h);d.q(e.xb.ka.na,B,B);r=d.g(B,a);C.multiply(r,t,r);d.r(r,q.ka.na);d.s(z*d.i(B),q.ka.na);t=d.j(q.ka.na,k);d.D(p,B,t);d.v(t,q.ka.na);break;case 3:t=d.j(q.ka.na,k);r=d.g(q.ka.na,a);p=d.j(e.xb.ka.na,f);B=e.influence;e.tJ?(z=d.g(e.xb.ka.na,b),z=v.transformQuat(m.f,z,l)):z=m.f;m._31(t,r,p,e.TI);p=v.subtract(p,t,f);v.normalize(p,p);m._32(r,e.od,z,p);p=d.g(e.ae,b);C.slerp(p,r,B,r);d.r(r,q.ka.na);d.v(t,e.ae);break;
case 5:t=d.j(q.ka.na,k);r=d.g(q.ka.na,a);p=d.j(e.xb.ka.na,f);m._31(t,r,p,m.c);d.v(p,e.xb.ka.na);r=v.dist(t,p);if(r=r>e.dist_max?r-e.dist_max:r<e.Kz?r-e.Kz:0)v.sub(p,t,l),v.normalize(l,l),v.scale(k,r,l),v.add(t,l,t),d.v(t,q.ka.na);break;case 7:B=e.xb.ka.na;t=d.j(q.ka.na,k);p=d.j(e.ob,f);d.D(p,B,t);d.v(t,q.ka.na);d.r(d.g(q.ka.na,a),e.ae);break;case 8:z=d.j(e.xb.ka.na,k);r=e.axes;u=d.j(e.ob,f);p=v.set(0,0,0,l);e.cq&&v.add(p,u,p);B=e.influence;t=k;r[0]&&(t[0]=(1-B)*u[0]+B*(m._50(r[0])*z[0]+p[0]));r[1]&&
(t[1]=(1-B)*u[1]+B*(m._50(r[1])*z[1]+p[1]));r[2]&&(t[2]=(1-B)*u[2]+B*(m._50(r[2])*z[2]+p[2]));d.v(t,q.ka.na);d.r(d.g(q.ka.na,a),e.ae);break;case 9:r=e.axes;u=d.g(e.xb.ka.na,a);t=m._35(u,e.Yi,f);m.Q(t,e.Yi);r[0]?(e.cq&&(B=v.set(e.Yi[0],0,0,k),m._45(t,B,t)),t[0]*=m._50(r[0])):t[0]=e.Yi[0];r[1]?(e.cq&&(B=v.set(0,e.Yi[1],0,k),m._45(t,B,t)),t[1]*=m._50(r[1])):t[1]=e.Yi[1];r[2]?(e.cq&&(B=v.set(0,0,e.Yi[2],k),m._45(t,B,t)),t[2]*=m._50(r[2])):t[2]=e.Yi[2];m.Q(t,e.Yi);B=e.influence;t=m.Y(t,a);p=d.g(e.ae,b);
r=C.slerp(p,t,B,a);d.r(r,q.ka.na);d.v(d.j(q.ka.na,k),e.ae);break;case 11:B=e.influence;z=d.j(e.xb.ka.na,k);u=d.g(e.xb.ka.na,a);t=d.j(e.ob,f);p=d.g(e.ob,b);t=m.G(t,z,B,k);d.v(t,q.ka.na);r=C.slerp(p,u,B,a);d.r(r,q.ka.na);d.v(d.j(q.ka.na,k),e.ae);break;case 16:r=d.g(q.ka.na,a);B=e.xb.ka.na;u=d.g(e.xb.ka.na,b);p=d.j(e.ob,f);t=d.g(e.ob,c);C.multiply(u,t,r);d.r(r,q.ka.na);t=d.D(p,B,k);d.v(t,q.ka.na);break;case 13:d.q(e.xb.ka.na,e.ob,q.ka.na);break;case 14:t=e.ob;B=h;n.b(e.xb,e.Yk,!0,!1,B);d.q(e.xb.ka.na,
B,B);d.q(B,t,q.ka.na);break;case 17:r=e.xb,B=O.gQ(r),t=k,u=O.nv(B,"LEFT"),A=O.nv(B,"RIGHT"),p=O.nv(B,"TOP"),z=O.nv(B,"BOTTOM"),y="heights"==e.hor_units?p-z:A-u,t[0]=e.cw?u+y*e.bs:A-y*e.bs,u="heights"==e.vert_units?p-z:A-u,t[1]=e.Zx?p-u*e.ht:z+u*e.ht,O.gR(B)?t[2]=-e.distance:(t[2]=-1,v.normalize(t,t),v.scale(t,e.distance/Math.abs(t[2]),t)),d.y(t,r.ka.na,t),B=d.j(r.ka.na,f),v.add(B,t,t),d.v(t,q.ka.na),p=d.g(q.ka.na,a),r=d.g(r.ka.na,b),t=d.g(e.ob,c),C.multiply(r,t,p),d.r(p,q.ka.na)}"CAMERA"==q.ka.type&&
q.ka.cc!=O.MS_STATIC&&(t=q.ka.od,12==e.type&&(u=d.g(e.xb.ka.na,a),t=v.transformQuat(t,u,K)),O.correct_up(q,t))}}();p.KU=function(a,b){b=a.ka.Mg[b];b.Yc&&ka(a,b.Yc)};var V=function(){var a=C.create(),b=C.create(),c=C.create(),h=C.create(),k=new Float32Array(2),f=new Float32Array(2);return function(l,q){var e=d.g(l.ka.na,a),t=d.g(q.xb.ka.na,b),n=d.g(q.ob,c);t=C.multiply(t,n,h);n=O.aA(t,l.ka.od,k);var u=O.aA(e,l.ka.od,f);t=m.H(u[0],n[0]+q.CE,n[0]+q.AE);q=m.H(u[1],n[1]+q.zE,n[1]+q.DE);m._47(e,l.ka.od,
t,q,e);d.r(e,l.ka.na)}}();p.gN=function(a){return a.Yc?!0:!1};p.remove=function(a,b){a.Yc.xb&&w(a.Yc.xb,a);b&&d.a(a.Yc.ae,a.ka.na);a.Yc=null};p.EX=function(a){return a.Yc?a.Yc.type:null};p.Ch=function(a){a=a.Yc;return!a||13!=a.type&&14!=a.type?!1:!0};p.mv=function(a){if((a=a.Yc)&&13==a.type)return a.xb.ka.na;if(a&&14==a.type){var b=Y;n.b(a.xb,a.Yk,!0,!1,b);d.q(a.xb.ka.na,b,b);return b}return null};p.zh=function(a){a=a.Yc;return!a||13!=a.type&&14!=a.type?null:a.ob};p.ES=function(a,f){for(var n=f.ka,
u=0;u<a.constraints.length;u++){var q=a.constraints[u],p=q.type;if(q.target){var v=q.target.qb;if("COPY_LOCATION"==p){p=new Float32Array(d.j(f.ka.na,L));var t=new Float32Array(q.axes);c(f,v,p,t,q.use_offset,q.influence)}else if("COPY_ROTATION"==p)t=new Float32Array(q.axes),D(f,v,t,q.use_offset,q.influence);else if("COPY_TRANSFORMS"==p)l(f,v,q.influence);else if("TRACK_TO"==p){p=q.track_axis;if("TRACK_Y"==p)var e=m.e;else"TRACK_NEGATIVE_Y"==p?e=m.b:"TRACK_X"==p?e=m.d:"TRACK_NEGATIVE_X"==p?e=m.a:"TRACK_Z"==
p?e=m.f:"TRACK_NEGATIVE_Z"==p&&(e=m.c);p=q.up_axis;if("UP_X"==p)var z=m.d;else"UP_Y"==p?z=m.e:"UP_Z"==p&&(z=m.f);k(f,v,e,z,q.use_target_z,q.influence)}}}if(f.parent){!f.Jl&&f.Fd.aq&&f.parent.Fd.aq&&(f.Jn=!1);q=!1;for(u=0;u<f.Aa.length;u++)if(f.Aa[u].Bb.cd){q=!0;break}if(q&&R.KQ(f))u=f.Jl?d.a(n.na,d.b()):n.na,d.q(f.parent.ka.na,u,n.na);else if(f.Jl||!f.qs)if(u=d.a(n.na,d.b()),f.sy&&"CAMERA"==f.parent.type){u={distance:f.sy.distance,rotation:d.g(u,B)};switch(f.sy.YL){case "TOP_LEFT":u.top=0;u.left=
0;break;case "TOP":u.top=0;u.left=.5;break;case "TOP_RIGHT":u.top=0;u.right=0;break;case "LEFT":u.top=.5;u.left=0;break;case "CENTER":u.top=.5;u.left=.5;break;case "RIGHT":u.top=.5;u.right=0;break;case "BOTTOM_LEFT":u.bottom=0;u.left=0;break;case "BOTTOM":u.bottom=0;u.left=.5;break;case "BOTTOM_RIGHT":u.bottom=0,u.right=0}G(f,f.parent,u)}else b(f,f.parent,u);else u=d.a(n.na,d.b()),h(f,f.parent,f.qs,u)}if("ARMATURE"==f.type)for(a=a.pose.bones,u=0;u<a.length;u++)if(n=a[u],q=n.constraints)for(e=0;e<
q.length;e++)if(z=q[e],"COPY_TRANSFORMS"==z.type&&!z.subtarget&&!z.mute){v=z.target.qb;z=f;p=v;t=m.m;var A=m.k;v=r(18);v.Yk=n.name;v.target=p;v.ob=d.b();d.v(new Float32Array(t),v.ob);d.r(new Float32Array(A),v.ob);d.s(1,v.ob);p=z;t=v;A=t.target;for(var y=t.Yk,E=p.ka.Mg[y],C=A.uz,w=0;w<C;w++){var O=C[w];if(O[0]==p&&O[1]==y){C.splice(w,1);break}}A.uz.push([p,y]);E.Yc=t;ka(z,v)}};p.bi=function(a,b){return u(a.bf,b)};p.ci=function(a,b){return a.name!=b.name}});w.a=f},function(D,w,f){D=f(0);var N=f(38),
U=f(5),n=f(44),y=f(14),d=f(52),m=f(12),C=f(1),v=f(10),r=f(4),p=f(53),z=f(16),a=f(20),H=f(27),k=f(21),c=f(19),l=f(8),b=f(23),h=f(18),G=f(13),ka=f(6),u=f(2),E=f(3),R=f(9);f=Object(D.a)("__logic_nodes",function(f,w){function B(){return function(a,b,c,g){c=g[1];var e=g[2];g=L(g[0],e.oc);if(-1==g.state){for(var h=0;h<g.eT;h++)if(Na.get_sensor_value(a,b,h)){for(var d=0;d<g.bx.length;d++)if(g.bx[d]==h){c.jp==g.yU?(oa.is_play(c.ub)&&(g.state=-3),e.oc.Fh||(g.state=1,g.Ws=g.OA[d])):(g.state=1,g.Ws=g.OA[d]);
g.SB=h;return}g.SB=h}g.state=0}}}function O(a,b){return{name:a.name,type:a.type,label:a.label,tb:a.slot_idx_order,Ws:a.slot_idx_jump,rb:a.frame_range[0],$b:a.frame_range[1],AP:a.frame_range_mask?a.frame_range_mask[0]:!0,zP:a.frame_range_mask?a.frame_range_mask[1]:!0,nS:a.param_name,hS:a.operation,mute:a.mute,sF:a.object,oh:a.anim_name,pS:a.parse_json_vars,oS:a.parse_json_paths,Xd:a.objects_paths,kH:a.nodes_paths,ib:a.floats,za:a.bools,ya:a.variables,Fk:a.strings,yl:a.logic_functions,TG:a.logic_node_trees,
RA:a.materials_names,pI:a.shader_nd_type,hd:a.common_usage_names,eP:a.encode_json_vars,dP:a.encode_json_paths,yU:b,AB:xa[a.type]?xa[a.type]:A,Sw:!1,MG:a.links,To:[],Vz:-1,hw:null,SB:-1}}function L(a,b,c){var g=b.Zl+1-a.To.length;if(0<g)for(var e=0;e<g;e++)a.To.push(0);a.To[b.Zl]||(a.To[b.Zl]={Sb:{},Ws:-1,state:-1,bx:[],Yx:-1,ed:{},dd:pa.SLOT_ALL,Zc:null},c&&c(a,a.To[b.Zl],b));return a.To[b.Zl]}function D(a,b,c){return a[0]?b[a[1]]:c[a[1]]}function T(a,b,c,g){a[0]?b[a[1]]=g:c[a[1]]=g}function V(a,
b,c){switch(b.state){case 2:c.Xa=a.tb}}function A(a,b,c){switch(b.state){case 1:ea.error("Unknown node type: "+a.type);break;case 2:c.Xa=a.tb}}function aa(a,b){for(var c=a.Ha,g=0;g<c.length;g++){var e=c[g];"SWITCH_SELECT"==e.type&&e!=b&&(L(e,a.oc).state=-3)}}function J(a,b,c){var g=ca.get_selectable_objects(),e=L(a,c.oc);e.bx=[];e.OA=[];for(var h in a.Xd){var d=a.za[h]?D(a.ya[h],b.pa,c.oc.pa):ca.Cd(ca.qe,a.Xd[h],0);d=g.indexOf(d);if(-1==d)return ea.error("logic script error: non-selectable object:",
a.Xd[h][a.Xd[h].length-1]),-1;e.bx.push(d);e.OA.push(a.MG[h])}e.eT=g.length;e=[];for(h=0;h<g.length;h++)e.push(Na.create_selection_sensor(g[h],!1));g=B();Na.create_sensor_manifold(null,"LOGIC_NODES_SWITCH_SELECT_"+ma(a.label),Na.CT_SHOT,e,Na.default_OR_logic_fun,g,[a,b,c])}function P(a,b,c,g,e){return c?D(a.ya[b],g,e):ca.Cd(ca.qe,a.Xd[b],0)}function q(a){var b=a.oc.Zk;return 1>=b.length?a.Ha:b[b.length-1].kw.Ir.Ha}function da(a,b,c,g,e,h){a.oc.IC=!1;var d=a.oc.Zk,k=1>=d.length?a.Ha:d[d.length-1].kw.Ir.Ha;
if(k.length){if(!h)for(h=0;h<k.length;h++)k[h].Sw=!1;for(h=0;h<k.length;h++){if(0<=a.oc.Xa)var f=k[a.oc.Xa];else{if(1<a.oc.Zk.length){k=a.oc.Zk.pop().oE;d=d[d.length-1];a.oc.Xa=k.tb;k=a.oc.pa;a.oc.pa=d.pa;for(var l in a.oc.ny)d=a.oc.ny[l],void 0===a.oc.pa[l]?b.pa[l]=k[d]:a.oc.pa[l]=k[d];da(a,b,c,g,e,!0)}return}if(f.Sw)return;if(f.mute){if("ENTRYPOINT"==f.type)return;a.oc.Xa=f.tb;f.Sw=!0}else if(f.AB(f,b,a.oc,c,g,e),f.Sw=!0,a.oc.IC)return}d.splice(0,d.length)}}function I(a,b){var c=a.b4w_logic_nodes,
g=b.Jf,e=b.yl;b.state=1;for(var h=-1,d=0;d<c.length;d++){for(var k={Ha:[],oc:{Bb:a,Xa:0,Fh:!1,IC:!1,Zl:d,Zk:[],pa:{R1:0,R2:0,R3:0,R4:0,R5:0,R6:0,R7:0,R8:0}}},f=c[d],l=0;l<f.length;l++){var m=O(f[l],k);k.Ha.push(m)}switch(k.Ha[0].type){case "ENTRYPOINT":h++;k.oc.Zl=h;g.push(k);break;case "DEF_FUNC":m=k.Ha[0],k.oc=null,e.push({id:[m.TG.id0,m.yl.id0],Ir:k})}}for(d=0;d<g.length;d++)for(k=g[d],c=0;c<k.Ha.length;c++)m=k.Ha[c],m.mute||m.AB(m,b,k.oc,0,0);for(d=0;d<e.length;d++)for(g=e[d].Ir,c=0;c<g.Ha.length;c++)m=
g.Ha[c],m.mute||m.AB(m,b,0,0,0);a=a.timeline_markers;for(var q in a)b.Xs.push(a[q]);b.Xs.sort(function(a,b){return a-b});b.state=2;za.push(b)}function t(a,b){switch(b){case 0:return Number(a)?Number(a):0;case 1:return String(a);case 2:return a;default:return null}}function e(a){switch(typeof a){case "string":return t(a,1);case "number":return t(a,0);default:return t(a,1)}}function ma(a){g[a]||(g[a]=0);var b=a+"_"+g[a];b=b.replace(/ /g,"_").replace(/\//g,"_");g[a]++;return b}function ja(a,b){switch(b){case 0:return a.ib;
case 1:return a.Fk;case 2:return a.Xd}}var pa=Object(N.a)(f),ta=Object(U.a)(f),Oa=Object(n.a)(f),M=Object(y.a)(f),oa=Object(d.a)(f),ca=Object(m.a)(f),ea=Object(C.a)(f),Da=Object(v.a)(f),S=Object(r.a)(f),Na=Object(p.a)(f),wa=Object(z.a)(f),X=Object(a.a)(f),Ga=Object(c.a)(f),Ha=Object(b.a)(f),ua=Object(h.a)(f),Ca=Object(G.a)(f),la=Object(R.a)(f),sa=new Float32Array(4),ia=new Float32Array(3),ra=new Float32Array(3),Q=E.create(),Aa=E.create(),ya=new Float32Array(2),qa=new Float32Array(9),na=new Float32Array(16);
w.Oy=0;w.pD=1;w.oD=2;w.sK=0;w.BK=1;w.xK=2;w.nK=3;w.yK=4;w.AK=5;w.rK=6;w.CK=7;w.pK=8;w.oK=9;w.qK=10;w.tK=11;w.vK=12;w.uK=13;w.zK=14;w.wK=15;w.mK=16;w.IK=0;w.HK=1;w.JK=2;w.KK=3;w.GK=4;w.jD=0;w.lD=1;w.kD=2;w.mD=3;w.nD=4;w.iD=5;w.NK=0;w.MK=1;w.LK=2;w.iK=0;w.jK=1;w.gK=2;w.hK=3;w.kK=0;w.lK=1;var xa={ENTRYPOINT:function(a,b,c){switch(b.state){case 2:0==c.Zk.length&&c.Zk.push({oE:null,pa:c.pa,kw:null}),c.Xa=a.tb}},HIDE:function(a,b,c){function g(a,b){e||(b.obj=ca.Cd(ca.qe,a.Xd.id0,0),b.obj||(ea.error("Logic script error: object not found. Node: ",
a.name),a.mute=!0))}var e=a.za.id0;switch(b.state){case 2:var h=L(a,c,g);b=e?D(a.ya.id0,b.pa,c.pa):h.obj;a.za.ch?Da.Zq(b,!0):Da.Bm(b,!0);c.Xa=a.tb}},SHOW:function(a,b,c){function g(a,b){e||(b.obj=ca.Cd(ca.qe,a.Xd.id0,0),b.obj||(ea.error("Logic script error: object not found. Node: ",a.name),a.mute=!0))}var e=a.za.id0;switch(b.state){case 2:var h=L(a,c,g);b=e?D(a.ya.id0,b.pa,c.pa):h.obj;a.za.ch?Da.Zq(b,!1):Da.Bm(b,!1);c.Xa=a.tb}},PAGEPARAM:function(a,b,c){switch(b.state){case 2:var g=a.ya.id0;b=b.pa;
var e=c.pa;a:{var h=a.nS;var d=a.ib.ptp,k=a.za.hsh,f=S.get("url_params");if(f&&h in f)h=Number(f[h]);else{if(k=k?location.hash:location.search)for(k=k.slice(1).split("&"),f=0;f<k.length;f++){var l=k[f].split("=");if(1<l.length&&l[0]==h){h=t(l[1],d);break a}}h=0}}T(g,b,e,h);c.Xa=a.tb}},SWITCH_SELECT:function(a,b,c){function g(a,b){b.state=-3}switch(b.state){case 2:var e=L(a,c,g);if(-3==e.state)e.state=-2,aa(b.Jf[c.Zl],a),J(a,b,b.Jf[c.Zl]);else if(-2==e.state)e.state=-1;else if(0==e.state||1==e.state){if(a.ya.vd&&
a.ya.vd[1]){var h=ca.get_selectable_objects();T(a.ya.vd,b.pa,c.pa,h[e.SB])}c.Xa=e.state?e.Ws:a.tb;e.state=-3;Na.remove_sensor_manifold(null,"LOGIC_NODES_SWITCH_SELECT_"+ma(a.label))}}},SELECT:function(a,b){switch(b.state){case 1:ea.error("Logic script error: node is deprecated. Node: ",a.name),a.mute=!0}},PLAY:function(a,b,c,g){switch(b.state){case 1:oa.jC();a.za.not_wait||(a.za.not_wait=!1);break;case 2:var e=L(a,c);switch(e.state){case -1:if(oa.is_play(b.ub))if(b.Dz==b.jp&&c.Fh)break;else{var h=
b.jp;if(h){h.oc.Xa=q(h)[h.oc.Xa].tb;h=b.jp;var d=h.oc.Zk,k=d.length,f=[];1>=k&&f.push(h.Ha);for(var l=1;l<k;l++)f.push(d[l].kw.Ir.Ha);for(l=0;l<f.length;l++)for(d=0;d<f[l].length;d++)k=f[l][d],"PLAY"==k.type&&(L(k,h.oc).state=-1)}}c.Fh=!a.za.not_wait;b.jp=b.Dz;e.state=0;a.AP&&(oa.CT(a.rb),oa.fI(g));if(a.zP)oa.UB(a.$b);else{g=oa.get_frame(g);h=-1;for(var m in b.Xs)if(g<b.Xs[m]){h=m;break}0<=h?oa.UB(b.Xs[h]):oa.UB(oa.get_frame_end())}oa.zH(null);a.za.not_wait&&(c.Xa=a.tb,e.state=-1,c.Fh=!1);break;case 0:oa.is_play()||
(c.Xa=a.tb,e.state=-1,c.Fh=!1);break;case 1:c.Xa=a.tb;e.state=-1;b.jp=null;c.Fh=!1;break;default:ta.va("Unknown state of "+a.name),e.state=-1}}},REDIRECT:function(a,b,c){switch(b.state){case 2:window.location.href=a.za.url?t(D(a.ya.url,b.pa,c.pa),1):a.Fk.url,b.state=3}},MATH:function(a,b,c){switch(b.state){case 2:var g=-1==a.ya.id0[1]?a.ib.inp1:t(D(a.ya.id0,b.pa,c.pa),0),e=-1==a.ya.id1[1]?a.ib.inp2:t(D(a.ya.id1,b.pa,c.pa),0),h=0;switch(a.hS){case 3:h=g+e;break;case 2:h=g*e;break;case 1:h=g-e;break;
case 0:0==e&&ta.va("Division by zero in Logic script");h=g/e;break;case 4:h=Math.random()*(e-g)+g;break;case 5:h=Math.sin(g);break;case 6:h=Math.cos(g);break;case 7:h=Math.tan(g);break;case 8:h=Math.asin(g);break;case 9:h=Math.acos(g);break;case 10:h=Math.atan(g);break;case 11:h=Math.log(g);break;case 12:h=Math.min(g,e);break;case 13:h=Math.max(g,e);break;case 14:h=Math.round(g);break;case 15:h=g%e;break;case 16:h=Math.abs(g)}T(a.ya.vd,b.pa,c.pa,h);c.Xa=a.tb}},CONDJUMP:function(a,b,c){switch(b.state){case 2:var g=
a.hd.variable_type,e=ja(a,g),h=!1;if(2==g){var d=a.za.id0?D(a.ya.id0,b.pa,c.pa):ca.Cd(ca.qe,a.Xd.id0,0);b=a.za.id1?D(a.ya.id1,b.pa,c.pa):ca.Cd(ca.qe,a.Xd.id1,0);switch(a.hd.condition){case 5:d==b&&(h=!0);break;case 4:d!=b&&(h=!0)}}else switch(d=-1==a.ya.id0[1]?e.inp1:t(D(a.ya.id0,b.pa,c.pa),g),b=-1==a.ya.id1[1]?e.inp2:t(D(a.ya.id1,b.pa,c.pa),g),a.hd.condition){case 5:d==b&&(h=!0);break;case 4:d!=b&&(h=!0);break;case 3:d<b&&(h=!0);break;case 2:d>b&&(h=!0);break;case 1:d<=b&&(h=!0);break;case 0:d>=
b&&(h=!0)}c.Xa=h?a.Ws:a.tb}},REGSTORE:function(a,b,c){switch(b.state){case 2:if(a.za.vs)var g=D(a.ya.vs,b.pa,c.pa);else{g=a.hd.variable_type;var e=ja(a,g);g=2==g?ca.Cd(ca.qe,e.id0,0):e.inp1}T([a.za["new"]&&a.za.gl||a.ya.vd[0],a.ya.vd[1]],b.pa,c.pa,g);c.Xa=a.tb}},PLAY_ANIM:function(a,b,c){function g(a,b){for(var c=-1,g=0;8>g;g++){var e=a.Za[g];if(e&&e.Hj&&pa.GI(e.Hj)==pa.GI(b))if(-1!=c)c=g;else return-1}return c}function e(a,c,g){c.obj=d?ca.get_world_by_name(a.sF[0],0):P(a,"id0",h,b.pa,g.pa);c.obj||
h||(ea.error("Logic script error: object not found. Node: ",a.name),a.mute=!0)}var h=a.za.id0,d=a.za.env;switch(b.state){case 2:var k=L(a,c,e);d||(k.obj=h?D(a.ya.id0,b.pa,c.pa):k.obj);0!=k.state||pa.is_play(k.obj,k.dd)||(k.state=1);switch(k.state){case -1:for(var f in b.Jf){var l=b.Jf[f],m=q(l),t=l.oc.Xa;-1!=t&&(m=m[t],l=L(m,l.oc),"PLAY_ANIM"==m.type&&m!=a&&0==l.state&&l.obj==k.obj&&(l.state=1))}f=a.hd.param_anim_behavior;""==a.oh?(pa.apply_def(k.obj),pa.set_behavior(k.obj,f,pa.SLOT_ALL)):(l=g(k.obj,
a.oh),-1==l?(k.dd=pa.WT(k.obj,a.oh),pa.apply(k.obj,null,a.oh,k.dd)):k.dd=l,pa.set_behavior(k.obj,f,k.dd));a.za.not_wait||(c.Fh=!0);pa.play(k.obj,null,k.dd);k.state=0;a.za.not_wait&&(c.Xa=a.tb,k.state=-1);break;case 0:break;case 1:a.za.not_wait||(c.Fh=!1);c.Xa=a.tb;k.state=-1;break;default:ta.va("Unknown state of "+a.name),k.state=-1}}},SELECT_PLAY:V,SEND_REQ:function(a,b,c){function g(a,c,g,e,h){a=JSON.stringify(a);c=h[1];g=L(h[0],c);T(h[0].ya.dst,b.pa,c.pa,a);g.state=1}var e=L(a,c);switch(b.state){case 2:switch(e.state){case -1:e.state=
0;e=a.za.url?t(D(a.ya.url,b.pa,c.pa),1):a.Fk.url;var h={};a.za.ct&&(h["Content-Type"]=a.Fk.ct);"GET"==a.hd.request_type?Oa.enqueue([{id:e,type:Oa.AT_JSON,url:e,overwrite_header:h,param:[a,c]}],g,null,null,null):"POST"==a.hd.request_type&&Oa.enqueue([{id:e,type:Oa.AT_JSON,url:e,overwrite_header:h,request_method:"POST",post_data:t(D(a.ya.dst1,b.pa,c.pa),1),param:[a,c]}],g,null,null,null);break;case 1:e.state=-1,c.Xa=a.tb}}},INHERIT_MAT:function(a,b,c){function g(a,b){for(var c=0;2>c;c++)b.Sb["id"+c]=
ca.Cd(ca.qe,a.Xd["id"+c],0),b.Sb["id"+c]||(ea.error("Logic script error: object not found. Node: ",a.name),a.mute=!0)}switch(b.state){case 2:b=L(a,c,g),ca.inherit_material(b.Sb.id0,a.RA.id0,b.Sb.id1,a.RA.id1),c.Xa=a.tb}},SET_SHADER_NODE_PARAM:function(a,b,c){function g(a,b){a.Xd.id0&&(b.Sb.id0=ca.Cd(ca.qe,a.Xd.id0,0),a.Xd.id0||(ea.error("Logic script error: object not found. Node: ",a.name),a.mute=!0),a.kH.id0.unshift(a.RA.id0))}switch(b.state){case 2:var e=L(a,c,g).Sb.id0,h=a.kH.id0,d=h[0];h=wa.hs(h,
1);var k=wa.Zb(e,d,"MAIN");c.Xa=a.tb;null===k?ea.error('Material "'+d+'" was not found in the object "'+e.name+'".'):("ShaderNodeRGB"==a.pI&&ca.set_nodemat_rgb(e,d,h,a.za.id0?t(D(a.ya.id0,b.pa,c.pa),0):a.ib.id0,a.za.id1?t(D(a.ya.id1,b.pa,c.pa),0):a.ib.id1,a.za.id2?t(D(a.ya.id2,b.pa,c.pa),0):a.ib.id2),"ShaderNodeValue"==a.pI&&ca.set_nodemat_value(e,d,h,a.za.id0?t(D(a.ya.id0,b.pa,c.pa),0):a.ib.id0))}},DELAY:function(a,b,c,g,e){g=L(a,c);switch(b.state){case 2:-1==g.state?(g.state=0,g.Yx=0,c.Fh=!0):0==
g.state&&(g.Yx+=e,(a.za.dl?t(D(a.ya.dl,b.pa,c.pa),0):a.ib.dl)<g.Yx&&(g.state=-1,c.Xa=a.tb,c.Fh=!1))}},APPLY_SHAPE_KEY:function(a,b,c){function g(a,b){b=b.Sb.id0=ca.Cd(ca.qe,a.Xd.id0,0);b||(ea.error("Logic script error: object not found. Node: ",a.name),a.mute=!0);var c=a.hd.sk;X.check_shape_keys(b)?X.tA(b,c)||(ea.error("Wrong key name:",c),a.mute=!0):(ea.error("No shape keys in object:",b.name),a.mute=!0)}switch(b.state){case 2:var e=L(a,c,g);X.$y(e.Sb.id0,a.hd.sk,a.za.skv?t(D(a.ya.skv,b.pa,c.pa),
0):a.ib.skv);c.Xa=a.tb}},OUTLINE:function(a,b,c){function g(a,b){e||(b.obj=ca.Cd(ca.qe,a.Xd.id0,0),b.obj||(ea.error("Logic script error: object not found. Node: ",a.name),a.mute=!0),b.obj&&b.obj.ka&&b.obj.ka.Ed||(ea.error("Can't evaluate 'Outline' logic node: wrong object"),a.mute=!0))}var e=a.za.id0;switch(b.state){case 2:var h=L(a,c,g);h=e?D(a.ya.id0,b.pa,c.pa):h.obj;switch(a.hd.outline_operation){case "PLAY":b=h.ka.lj;ca.apply_outline_anim(h,b.Fl,b.Gl,b.Hl);break;case "STOP":ca.clear_outline_anim(h);
break;case "INTENSITY":ca.set_outline_intensity(h,a.za["in"]?t(D(a.ya["in"],b.pa,c.pa),0):a.ib["in"])}c.Xa=a.tb}},MOVE_CAMERA:function(a,b,c){function g(a,b,c,g){switch(M.get_move_style(a)){case M.MS_TARGET_CONTROLS:M.VB(a,b,c);break;case M.MS_EYE_CONTROLS:case M.MS_STATIC:Ca.set_tsr(a,g);break;case M.MS_HOVER_CONTROLS:E.sub(c,b,ia),E.normalize(ia,ia),M.dI(a,c),ra[0]=ia[0],ra[1]=0,ra[2]=ia[2],b=E.dot(ra,ia),c=Math.acos(b/(E.length(ra)*E.length(ia))),b=ia[2]?Math.atan(ia[0]/ia[2]):0<ia[0]?0:Math.PI,
0<ia[2]&&0<ia[0]?ya[1]=-(Math.PI+ya[1]):0<ia[2]&&0>ia[0]?ya[1]=-(Math.PI+ya[1]):0>ia[2]&&0>ia[0]?(ya[0]+=Math.PI,b=-(Math.PI-b)):0>ia[2]&&0<ia[0]&&(ya[0]+=Math.PI,b-=Math.PI),M.FT(a,b+Math.PI,-c)}Ca.Ea(a);Ga.sync_transform(a)}function e(a,b,c,g){k.lookAt(b,c,u.f,na);k.invert(na,na);H.fromMat4(na,qa);l.fromMat3(qa,sa);l.normalize(sa,sa);a=ka.i(a.ka.na);ka.t(b,a,sa,g)}function h(a,c,g){(c.Sb.ca=P(a,"id0",d,b.pa,g.pa))||d||(ea.error("Logic script error: object not found. Node: ",a.name),a.mute=!0);c.Sb.tr=
P(a,"id1",f,b.pa,g.pa);c.Sb.tr||f||(ea.error("Logic script error: object not found. Node: ",a.name),a.mute=!0);c.Sb.ta=P(a,"id2",m,b.pa,g.pa);c.Sb.ta||m||(ea.error("Logic script error: object not found. Node: ",a.name),a.mute=!0);c.state=-1;c.ed={VI:new Float32Array(3),UI:new Float32Array(3),DA:new Float32Array(3),rC:new Float32Array(3),OI:new Float32Array(3),CA:new Float32Array(3),bm:ka.b(),wj:ka.b(),Sr:ka.b()}}var d=a.za.id0,f=a.za.id1,m=a.za.id2;switch(b.state){case 2:var q=L(a,c,h),n=d?D(a.ya.id0,
b.pa,c.pa):q.Sb.ca,r=m?D(a.ya.id2,b.pa,c.pa):q.Sb.ta,p=ka.j((f?D(a.ya.id1,b.pa,c.pa):q.Sb.tr).ka.na,ia);r=ka.j(r.ka.na,Q);switch(q.state){case -1:var v=a.za.dur?t(D(a.ya.dur,b.pa,c.pa),0):a.ib.dur;if(0==v){e(n,p,r,q.ed.wj);g(n,p,r,q.ed.wj);c.Xa=a.tb;break}a=ka.j(n.ka.na,Aa);E.copy(a,q.ed.VI);var B=M.get_move_style(n);B==M.MS_HOVER_CONTROLS?E.copy(n.ka.$c,q.ed.rC):B==M.MS_STATIC||B==M.MS_EYE_CONTROLS?(ka.a(n.ka.na,q.ed.bm),e(n,p,r,q.ed.wj)):E.copy(n.ka.pivot,q.ed.rC);E.copy(p,q.ed.UI);E.copy(r,q.ed.OI);
q.state=0;v=ua.animate(0,1,1E3*v,function(a){Da.zb()&&(B==M.MS_STATIC||B==M.MS_EYE_CONTROLS?ka.o(q.ed.bm,q.ed.wj,u._53(a),q.ed.Sr):(q.ed.CA=E.lerp(q.ed.rC,q.ed.OI,u._53(a),q.ed.CA),q.ed.DA=E.lerp(q.ed.VI,q.ed.UI,u._53(a),q.ed.DA)),g(n,q.ed.DA,q.ed.CA,q.ed.Sr),1==a&&(q.state=1))});break;case 1:ua.clear_animation(v),q.state=-1,c.Xa=a.tb}}},SET_CAMERA_MOVE_STYLE:function(a,b,c){function g(a,b){e.id0||(b.Sb.id0=ca.Cd(ca.qe,a.Xd.id0,0))||(ea.error("Logic script error: object not found. Node: ",a.name),
a.mute=!0);e.pvo&&!e.id1&&(b.Sb.id1=ca.Cd(ca.qe,a.Xd.id1,0))}var e=a.za;switch(b.state){case 2:var h=L(a,c,g),d=e.id0?D(a.ya.id0,b.pa,c.pa):h.Sb.id0,k=d.ka;h.XM={Qx:k.Qx,use_panning:k.use_panning,zc:k.zc,Hb:k.Hb,rc:k.rc,le:k.le,me:k.me,Oe:k.Oe,Xi:k.Xi};if(la.is_camera(d)){k=d.ka;var f=h.XM;M.Dt(d);switch(a.hd.camera_move_style){case 0:k.cc=M.MS_STATIC;break;case 2:k.cc=M.MS_EYE_CONTROLS;var l=ka.j(k.na,ia);M.lI(d,l,null,f.zc,f.Hb);break;case 3:k.cc=M.MS_HOVER_CONTROLS;l=ka.j(k.na,ia);var m=Q;a.za.pvo?
(h=e.id1?D(a.ya.id1,b.pa,c.pa):h.Sb.id1,m=ka.j(h.ka.na,Q)):(m[0]=a.za.pvx?t(D(a.ya.pvx,b.pa,c.pa),0):a.ib.pvx,m[1]=a.za.pvy?t(D(a.ya.pvy,b.pa,c.pa),0):a.ib.pvy,m[2]=a.za.pvz?t(D(a.ya.pvz,b.pa,c.pa),0):a.ib.pvz);M.mI(d,l,m,f.rc,f.Hb,f.le,f.me,f.Xi);break;case 1:k.cc=M.MS_TARGET_CONTROLS,l=ka.j(k.na,ia),m=Q,a.za.pvo?(h=e.id1?D(a.ya.id1,b.pa,c.pa):h.Sb.id1,m=ka.j(h.ka.na,Q)):(m[0]=a.za.pvx?t(D(a.ya.pvx,b.pa,c.pa),0):a.ib.pvx,m[1]=a.za.pvy?t(D(a.ya.pvy,b.pa,c.pa),0):a.ib.pvy,m[2]=a.za.pvz?t(D(a.ya.pvz,
b.pa,c.pa),0):a.ib.pvz),M.nI(d,l,m,f.zc,f.Hb,f.rc,f.Oe,f.use_panning)}ra[0]=a.za.vtr?t(D(a.ya.vtr,b.pa,c.pa),0):a.ib.vtr;ra[1]=a.za.vro?t(D(a.ya.vro,b.pa,c.pa),0):a.ib.vro;ra[2]=a.za.vzo?t(D(a.ya.vzo,b.pa,c.pa),0):a.ib.vzo;ra[0]=u.M(ra[0],0,Infinity);ra[1]=u.M(ra[1],0,Infinity);ra[2]=u.M(ra[2],0,.99);k.kq=ra[0];k.jq=ra[1];k.lq=ra[2];Ca.Ea(d);Ga.sync_transform(d);M.So(d)}else ea.error("Logic script error: object is not a Camera. Node: ",a.name);c.Xa=a.tb}},SET_CAMERA_LIMITS:function(a,b,c){function g(a,
b){e.id0||(b=b.Sb.id0=ca.Cd(ca.qe,a.Xd.id0,0),b||(ea.error("Logic script error: object not found. Node: ",a.name),a.mute=!0))}var e=a.za;switch(b.state){case 2:var h=L(a,c,g);h=e.id0?D(a.ya.id0,b.pa,c.pa):h.Sb.id0;if(la.is_camera(h)){switch(h.ka.cc){case M.MS_TARGET_CONTROLS:if(a.za.dsl){var d=a.za.dslmin?t(D(a.ya.dslmin,b.pa,c.pa),0):a.ib.dslmin,k=a.za.dslmax?t(D(a.ya.dslmax,b.pa,c.pa),0):a.ib.dslmax,f={};f.min=Math.max(d,0);f.max=Math.max(k,0);M.VH(h,f)}a.za.vrl&&(d=a.za.vrldown?t(D(a.ya.vrldown,
b.pa,c.pa),0):a.ib.vrldown,k=a.za.vrlup?t(D(a.ya.vrlup,b.pa,c.pa),0):a.ib.vrlup,f={},f.down=d,f.up=k,f.camera_space="CAMERA"==a.hd.cam_lim_vert_rot_space_type,M.gx(h,f));a.za.hrl&&(d=a.za.hrlleft?t(D(a.ya.hrlleft,b.pa,c.pa),0):a.ib.hrlleft,k=a.za.hrlright?t(D(a.ya.hrlright,b.pa,c.pa),0):a.ib.hrlright,f={},f.left=d,f.right=k,f.camera_space="CAMERA"==a.hd.cam_lim_hor_rot_space_type,M.fx(h,f));a.za.pvl&&(d=a.za.pvlmin?t(D(a.ya.pvlmin,b.pa,c.pa),0):a.ib.pvlmin,b=a.za.pvlmax?t(D(a.ya.pvlmax,b.pa,c.pa),
0):a.ib.pvlmax,f={},f.min_z=d,f.max_z=b,M.gI(h,f));break;case M.MS_HOVER_CONTROLS:a.za.htl&&(d=a.za.htlmin?t(D(a.ya.htlmin,b.pa,c.pa),0):a.ib.htlmin,k=a.za.htlmax?t(D(a.ya.htlmax,b.pa,c.pa),0):a.ib.htlmax,f={},f.min=d,f.max=k,M.cI(h,f));a.za.vtl&&(d=a.za.vtlmin?t(D(a.ya.vtlmin,b.pa,c.pa),0):a.ib.vtlmin,k=a.za.vtlmax?t(D(a.ya.vtlmax,b.pa,c.pa),0):a.ib.vtlmax,f={},f.min=d,f.max=k,M.jI(h,f));a.za.vrl&&(d=a.za.vrldown?t(D(a.ya.vrldown,b.pa,c.pa),0):a.ib.vrldown,k=a.za.vrlup?t(D(a.ya.vrlup,b.pa,c.pa),
0):a.ib.vrlup,f={},f.down=d,f.up=k,f.camera_space="CAMERA"==a.hd.cam_lim_vert_rot_space_type,M.hover_set_vertical_limits(h,f));a.za.dsl&&(d=a.za.dslmin?t(D(a.ya.dslmin,b.pa,c.pa),0):a.ib.dslmin,k=a.za.dslmax?t(D(a.ya.dslmax,b.pa,c.pa),0):a.ib.dslmax,f={},f.min=Math.max(d,0),f.max=Math.max(k,0),M.hover_set_distance_limits(h,f));break;case M.MS_EYE_CONTROLS:a.za.vrl&&(d=a.za.vrldown?t(D(a.ya.vrldown,b.pa,c.pa),0):a.ib.vrldown,k=a.za.vrlup?t(D(a.ya.vrlup,b.pa,c.pa),0):a.ib.vrlup,f={},f.down=d,f.up=k,
f.camera_space="CAMERA"==a.hd.cam_lim_vert_rot_space_type,M.gx(h,f)),a.za.hrl&&(d=a.za.hrlleft?t(D(a.ya.hrlleft,b.pa,c.pa),0):a.ib.hrlleft,k=a.za.hrlright?t(D(a.ya.hrlright,b.pa,c.pa),0):a.ib.hrlright,f={},f.left=d,f.right=k,f.camera_space="CAMERA"==a.hd.cam_lim_hor_rot_space_type,M.fx(h,f))}Ca.Ea(h);Ga.sync_transform(h)}else ea.error("Logic script error: object is not a Camera. Node: ",a.name);c.Xa=a.tb}},MOVE_TO:function(a,b,c){function g(a,b){Ca.set_tsr(a,b);Ca.Ea(a);Ga.sync_transform(a)}function e(a,
c,g){c.Sb.id0=P(a,"id0",d,b.pa,g.pa);c.Sb.id0||d||(ea.error("Logic script error: object not found. Node: ",a.name),a.mute=!0);c.Sb.id1=P(a,"id1",k,b.pa,g.pa);c.Sb.id1||k||(ea.error("Logic script error: object not found. Node: ",a.name),a.mute=!0);c.state=-1;c.Zc={nF:ka.b(),Iz:ka.b(),nG:ka.b()}}var h=a.za,d=h.id0,k=h.id1;switch(b.state){case 2:var f=L(a,c,e),l=h.id0?D(a.ya.id0,b.pa,c.pa):f.Sb.id0;if(l.is_dynamic)switch(ka.a(l.ka.na,f.Zc.nF),ka.a((h.id1?D(a.ya.id1,b.pa,c.pa):f.Sb.id1).ka.na,f.Zc.Iz),
f.state){case -1:h=a.za.dur?t(D(a.ya.dur,b.pa,c.pa),0):a.ib.dur;if(0==h){g(l,f.Zc.Iz);c.Xa=a.tb;break}f.state=0;var m=ua.animate(0,1,1E3*h,function(a){Da.zb()&&(f.Zc.ZX=ka.o(f.Zc.nF,f.Zc.Iz,u._53(a),f.Zc.nG),g(l,f.Zc.nG),1==a&&(f.state=1))});break;case 1:ua.clear_animation(m),f.state=-1,c.Xa=a.tb}else ea.error("Logic script error: object '"+l.name+"' must be dynamic. Node: ",a.name),c.Xa=a.tb}},TRANSFORM_OBJECT:function(a,b,c){function g(a,b,c){0==c?Ca.set_tsr(a,b):Ca.set_tsr_rel(a,b);Ca.Ea(a);Ga.sync_transform(a)}
function e(a,c,g){c.obj=P(a,"id0",h,b.pa,g.pa);c.obj||h||(ea.error("Logic script error: object not found. Node: ",a.name),a.mute=!0);c.state=-1;c.Zc={zx:0,bm:ka.b(),wj:ka.b(),Sr:ka.b()}}var h=a.za.id0;switch(b.state){case 2:var d=L(a,c,e),k=h?D(a.ya.id0,b.pa,c.pa):d.obj;switch(d.state){case -1:ra[0]=a.za.trx?t(D(a.ya.trx,b.pa,c.pa),0):a.ib.trx;ra[1]=a.za["try"]?t(D(a.ya["try"],b.pa,c.pa),0):a.ib["try"];ra[2]=a.za.trz?t(D(a.ya.trz,b.pa,c.pa),0):a.ib.trz;ia[0]=a.za.rox?t(D(a.ya.rox,b.pa,c.pa),0)*Math.PI/
180:a.ib.rox;ia[1]=a.za.roy?t(D(a.ya.roy,b.pa,c.pa),0)*Math.PI/180:a.ib.roy;ia[2]=a.za.roz?t(D(a.ya.roz,b.pa,c.pa),0)*Math.PI/180:a.ib.roz;var f=a.za.sc?D(a.ya.sc,b.pa,c.pa):a.ib.sc;u.Y(ia,sa);ka.t(ra,f,sa,d.Zc.wj);d.Zc.zx=a.hd.space_type;switch(d.Zc.zx){case 0:Ca.get_tsr(k,d.Zc.bm);break;case 1:Ca.get_tsr_rel(k,d.Zc.bm);break;case 2:Ca.get_tsr_rel(k,d.Zc.bm),ka.q(d.Zc.bm,d.Zc.wj,d.Zc.wj)}f=a.za.dur?t(D(a.ya.dur,b.pa,c.pa),0):a.ib.dur;if(0==f){g(k,d.Zc.wj,d.Zc.zx);c.Xa=a.tb;break}d.state=0;f=ua.animate(0,
1,1E3*f,function(a){Da.zb()&&(ka.o(d.Zc.bm,d.Zc.wj,u._53(a),d.Zc.Sr),g(k,d.Zc.Sr,d.Zc.zx),1==a&&(d.state=1))});break;case 1:ua.clear_animation(f),d.state=-1,c.Xa=a.tb}}},SPEAKER_PLAY:function(a,b,c){function g(a,c,g){c.obj=P(a,"id0",e,b.pa,g.pa);c.obj||e||(ea.error("Logic script error: object not found. Node: ",a.name),a.mute=!0)}var e=a.za.id0;switch(b.state){case 1:void 0==a.za.not_wait&&(a.za.not_wait=!0);break;case 2:var h=L(a,c,g);h.obj=e?D(a.ya.id0,b.pa,c.pa):h.obj;Ha.is_playing(h.obj)||0!=
h.state||(h.state=1);switch(h.state){case -1:for(var d in b.Jf){var k=b.Jf[d].oc.Xa;-1!=k&&(k=b.Jf[d].Ha[k],"SPEAKER_PLAY"==k.type&&k!=a&&0==h.state&&k.obj==a.obj&&(k.state=1))}a.za.not_wait||(c.Fh=!0);Ha.play_def(h.obj);h.state=0;break;case 0:a.za.not_wait&&(c.Xa=a.tb,h.state=-1);break;case 1:a.za.not_wait||(c.Fh=!1);c.Xa=a.tb;h.state=-1;break;default:ta.va("Unknown state of "+a.name),h.state=-1}}},SPEAKER_STOP:function(a,b,c){function g(a,c,g){c.obj=P(a,"id0",e,b.pa,g.pa);c.obj||e||(ea.error("Logic script error: object not found. Node: ",
a.name),a.mute=!0)}var e=a.za.id0;switch(b.state){case 2:var h=L(a,c,g);Ha.stop(e?D(a.ya.id0,b.pa,c.pa):h.obj);c.Xa=a.tb}},STOP_ANIM:function(a,b,c){function g(a,c,g){c.obj=h?ca.get_world_by_name(a.sF[0],0):P(a,"id0",e,b.pa,g.pa);c.obj||e||(ea.error("Logic script error: object not found. Node: ",a.name),a.mute=!0)}var e=a.za.id0,h=a.za.env;switch(b.state){case 2:var d=L(a,c,g);d.obj=e?D(a.ya.id0,b.pa,c.pa):d.obj;pa.stop(d.obj,pa.SLOT_ALL);a.za.rst&&pa.set_first_frame(d.obj,pa.SLOT_ALL);c.Xa=a.tb}},
STOP_TIMELINE:function(a,b,c,g){switch(b.state){case 2:a.za.rst&&oa.fI(g),oa.jC(),c.Xa=a.tb}},CONSOLE_PRINT:function(a,b,c){switch(b.state){case 2:var g=0,e="{",h;for(h in a.ya){0<g&&(e+=", ");var d=D(a.ya[h],b.pa,c.pa);e+='"'+a.ya[h][1]+'": ';try{e+=JSON.stringify(d)}catch(La){e=d?e+('{"name": "'+d.name+'", "type": "'+d.type+'"}'):e+"Object"}++g}ea.log(a.hd.msg,e+"}");c.Xa=a.tb}},STRING:function(a,b,c){switch(b.state){case 2:var g=a.za.id0?t(D(a.ya.id0,b.pa,c.pa),1):a.Fk.id0,e=a.za.id1?t(D(a.ya.id1,
b.pa,c.pa),1):a.Fk.id1,h=0;switch(a.hd.string_operation){case 0:h=g+e;break;case 1:h=g.indexOf(e);break;case 2:h=g.replace(e,a.za.id2?t(D(a.ya.id2,b.pa,c.pa),1):a.Fk.id2);break;case 3:var d=a.ya;h=g.substring(0,g.indexOf(e));T(d.dst1,b.pa,c.pa,g.substring(g.indexOf(e)+1,g.length));""==D(d.dst,b.pa,c.pa)&&(h=D(d.dst1,b.pa,c.pa),T(d.dst1,b.pa,c.pa,""));break;case 4:switch(a.hd.condition){case 5:h=g==e?1:0;break;case 4:h=g!=e?1:0;break;case 3:h=g<e?1:0;break;case 2:h=g>e?1:0;break;case 1:h=g<=e?1:0;
break;case 0:h=g>=e?1:0}}T(a.ya.dst,b.pa,c.pa,h);c.Xa=a.tb}},GET_TIMELINE:function(a,b,c,g){switch(b.state){case 2:g=a.za.nla?t(oa.get_frame(g),0):t(ua.get_frame(g),0),T(a.ya.vd,b.pa,c.pa,g),c.Xa=a.tb}},JSON:function(a,b,c){function g(a,b,c,g){for(var h=0;h<b.length;h++){for(var d=b[h].split("."),k=a,f=c[h],l=0;l<d.length&&(k=k[d[l]],void 0!==k&&null!==k);l++);k=e(k);g[f]=k}}function h(a,b,c,g){g||(g={});for(var h=0;h<b.length;h++){var d=b[h].split("."),k=g,f=c[h];if(f in a){for(var l=0;l<d.length-
1;l++)void 0===k[d[l]]&&(k[d[l]]=isNaN(d[l+1])?{}:[]),k=k[d[l]];k[d[d.length-1]]=e(a[f])}}}switch(b.state){case 2:switch(a.hd.json_operation){case "PARSE":try{var d=JSON.parse(t(D(a.ya.jsn,b.pa,c.pa),1));g(d,a.oS,a.pS,c.pa)}catch(W){ea.error("logic script error: non valid JSON string")}break;case "ENCODE":d={},h(c.pa,a.dP,a.eP,d),d=t(JSON.stringify(d),1),T(a.ya.jsn,b.pa,c.pa,d)}c.Xa=a.tb}},JS_CALLBACK:function(a,b,c){switch(b.state){case 2:for(var g=a.za.cb?t(D(a.ya.cb,b.pa,c.pa),1):a.Fk.cb,h=[],
d=0,k="id"+d,f=a.hd.js_cb_params;k in f;)k=0==f[k]?ca.Cd(ca.qe,a.Xd[k],0):D(a.ya[k],b.pa,c.pa),h.push(k),d++,k="id"+d;f=[];d=0;for(k="out"+d;k in a.ya;)k=D(a.ya[k],b.pa,c.pa),f.push(k),d++,k="out"+d;d=1;if(g in Fa){if(d=!Fa[g](h,f))for(g=0;g<f.length;g++)k="out"+g,k in a.ya&&T(a.ya[k],b.pa,c.pa,e(f[g]))}else ea.error("logic script error: no custom callback with id "+g);d&&(c.Xa=a.tb)}},EMPTY:V,DATE_TIME:function(a,b,c){switch(b.state){case 2:var g=new Date;if("L"==a.hd.time_type){var e=g.getFullYear();
var h=g.getMonth();var d=g.getDate();var k=g.getHours();var f=g.getMinutes();g=g.getSeconds()}else e=g.getUTCFullYear(),h=g.getUTCMonth(),d=g.getUTCDate(),k=g.getUTCHours(),f=g.getUTCMinutes(),g=g.getUTCSeconds();a.za.y&&T(a.ya.y,b.pa,c.pa,e);a.za.M&&T(a.ya.M,b.pa,c.pa,h);a.za.d&&T(a.ya.d,b.pa,c.pa,d);a.za.h&&T(a.ya.h,b.pa,c.pa,k);a.za.m&&T(a.ya.m,b.pa,c.pa,f);a.za.s&&T(a.ya.s,b.pa,c.pa,g);c.Xa=a.tb}},ELAPSED:function(a,b,c,g,e){switch(b.state){case 2:T(a.ya.s,b.pa,c.pa,e),c.Xa=a.tb}},CALL_FUNC:function(a,
b,c){switch(b.state){case 1:c=a.TG.id0;for(var g=a.yl.id0,e=0;e<b.yl.length;e++){var h=b.yl[e];if(h.id[0][0]==c[0]&&h.id[0][1]==c[1]&&h.id[1]==g){a.Vz=e;break}}break;case 2:g={};c.ny={};for(e in a.ya){h=a.ya[e][1];var d=a.Fk[e];g[d]=a.ya[e][0]?b.pa[h]:c.pa[h];e.startsWith("out")&&(c.ny[h]=d)}c.Zk.push({oE:a,pa:g,kw:b.yl[a.Vz]});c.pa=g;c.IC=!0;c.Xa=b.yl[a.Vz].Ir.Ha[0].tb}},DEF_FUNC:V,SWITCH:function(a,b,c){switch(b.state){case 1:b=Object.keys(a.ya);for(var g in b)b[g].startsWith("id")||b.splice(g,
1);a.hw=b;break;case 2:var e=D(a.ya.v,b.pa,c.pa);for(g in a.hw)if(e==D(a.ya[a.hw[g]],b.pa,c.pa)){c.Xa=a.MG[a.hw[g]];return}c.Xa=a.tb}}},za=[],Fa={},g={};w.VQ=function(a,b){b={Rd:b,TH:a.name,state:0,jp:null,Bb:a,Dz:null,Jf:[],yl:[],Xs:[],pa:{},ny:{}};a.JW=b;I(a,b)};w.update=function(a,b){var c=oa.vQ();if(!(0>=c))for(var g=0;g<za.length;g++)for(var e=g,h=a,d=b,k=c,f=za[e],l=0;l<za[e].Jf.length;l++)f.Dz=za[e].Jf[l],da(za[e].Jf[l],f,h,d,k)};w.gM=function(a,b){Fa[a]=b};w.LS=function(a){delete Fa[a]};w.YS=
function(a,b){for(var c=0;c<za.length;c++)if(za[c].TH==a){a=za[c];for(c=0;c<a.Jf.length;c++){var g=a.Jf[c].Ha[0];if(g.name==b){g.za.js&&0<=[0,-1].indexOf(a.Jf[c].oc.Xa)&&(g.mute=!1,a.Jf[c].oc.Xa=0);break}}break}};w.cleanup=function(){za.length=0;Fa={};g={}}});w.a=f},function(D,w,f){D=f(0);var N=f(55),U=f(38),n=f(44),y=f(4),d=f(35),m=f(15),C=f(66),v=f(53),r=f(43),p=f(45),z=f(63),a=f(28),H=f(20),k=f(39),c=f(51),l=f(52),b=f(79),h=f(60),G=f(12),ka=f(19),u=f(1),E=f(22),R=f(10),O=f(23),L=f(34),B=f(17),
Y=f(18),K=f(13),ha=f(2),T=f(37),V=f(47);f=Object(D.a)("main",function(f,w){function A(){}function P(){}function q(){}function da(){window.performance||(ya.log("Apply performance workaround"),window.performance={});var a=Date.now();window.performance.now||(ya.log("Apply performance.now() workaround"),window.performance.now=function(){return Date.now()-a});g.iI(0)}function I(a,b){var c=null;b=b?Ya:Ab;for(var g=0;g<b.length;g++){var e=b[g];try{c=a.getContext(e,Xa)}catch(Ja){}if(c)break}c&&ea.UO(c);return c}
function t(a,b,c){a.addEventListener("webglcontextlost",function(a){a.preventDefault();ya.error("WebGL context lost");ma()},!1);Ha.fh(c);var g=Ha.get_renderer_info();g&&ya.log("%cRENDERER INFO:","color: #00a",c.getParameter(g.UNMASKED_VENDOR_WEBGL)+", "+c.getParameter(g.UNMASKED_RENDERER_WEBGL));qa.fh(c);ua.fh(c);Fa.fh(c);za.fh(c);Da.fh(c);S.NT(c);X.fh(c);wa.OT(a);Da.init(a,b);na.kI(a.width,a.height,1);xa.init();Ca.init();P=D();aa()}function e(){A=function(){}}function ma(){ja()||(Ua=performance.now()/
1E3,xa.pause(),Aa.pause(),Fa.pause(),Oa.pause())}function ja(){return W<Ua}function aa(){var a="HMD"===Ea.stereo&&Ca.DQ();a?a.requestAnimationFrame(aa):Ka(aa);var b=performance.now()/1E3;Za||(Za=b);var c=b-Za;if(!(c<1/Ea.max_fps)){for(var e=g.get_timeline(),h=0;h<La.length;h++)La[h](e,c);ja()||(W>Za&&(c-=W-Math.max(Ua,Za)),g.rT(c),e+=c,g.iI(e),Ga.update(),oa.update(),wa.update(),h=c,wa.is_primary_loaded()&&(la.reset(),Ba.update(h),ra.update(e,h),sa.update(e,h),xa.update(e,h),h&&M.update(h),wa.is_primary_loaded()&&
(Aa.update(e,h),wa.is_primary_loaded()&&(Ca.update(e),Na.update(e,h),wa.is_primary_loaded()&&(Oa.update(!1),Q.update(e,h),Va.update(),A(h,e),wa.is_primary_loaded()&&(na.update(e,h),Oa.mV(),ia.frame()))))),P(c));Za=b;a&&a.isPresenting&&a.submitFrame()}}function D(){var a=60,b=0,c=Ea.CF,g=Ea.yP;return function(e){e<1/Ea.max_fps||(a=ha._51(1/e,a,e,c),e=Aa.lQ(),b=(b+1)%g,0==b&&q(Math.round(a),e))}}var Oa=Object(N.a)(f),M=Object(U.a)(f),oa=Object(n.a)(f),ca=Object(y.a)(f),ea=Object(d.a)(f),Da=Object(m.a)(f),
S=Object(C.a)(f),Na=Object(v.a)(f),wa=Object(r.a)(f),X=Object(p.a)(f),Ga=Object(z.a)(f),Ha=Object(a.a)(f),ua=Object(H.a)(f),Ca=Object(k.a)(f),la=Object(c.a)(f),sa=Object(l.a)(f),ia=Object(b.a)(f),ra=Object(h.a)(f),Q=Object(G.a)(f),Aa=Object(ka.a)(f),ya=Object(u.a)(f),qa=Object(E.a)(f),na=Object(R.a)(f),xa=Object(O.a)(f),za=Object(L.a)(f),Fa=Object(B.a)(f),g=Object(Y.a)(f),Ba=Object(K.a)(f),Va=Object(V.a)(f),Xa=ca.context,Ea=ca.wa,Za=0,Ua=0,W=0,La=[],Ab=["webgl","experimental-webgl"],Ya=["webgl2",
"experimental-webgl2"],Sa=null,Ka=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return window.setTimeout(a,1E3/Ea.max_fps)}}();w.init=function(a,b){ya.KT(Ea.console_verbose);var c=Object(T.f)()+" "+Object(T.d)()+" ("+Object(T.b)()+")";ya.log("%cINIT ENGINE","color: #00a",c);ya.log("%cUSER AGENT:","color: #00a",navigator.userAgent);if(!window.WebGLRenderingContext)return null;
da();b?la.init(b):(ca.wa.show_hud_debug_info=!1,ca.Ra.tw=!1);ea.sM();ea.wE("Chrome")||ea.wE("Firefox")||(Ea.Ib=!1);c=I(a,Ea.Ib);!c&&Ea.Ib&&(Ea.Ib=!1,c=I(a,!1));if(!c)return null;ya.log("%cINIT WEBGL "+(Ea.Ib?"2":"1"),"color: #00a");Sa=c;t(a,b,c);ca.apply_quality();ea.bI(c,!0);ca.AT();za.DR();Ea.Ov&&(a.style["touch-action"]="none");ya.log("%cSET PRECISION:","color: #00a",Ea.precision);return c};w.set_fps_callback=function(a){q=a};w.clear_fps_callback=function(){q=function(){}};w.set_render_callback=
function(a){A=a};w.clear_render_callback=function(){e()};w.pause=ma;w.resume=function(){ja()&&(W=performance.now()/1E3,xa.resume(),Aa.resume(),Fa.play(!0),Oa.resume())};w.is_paused=ja;w.reset=function(){wa.unload(0);S.reset();wa.reset();Ha.reset();qa.reset();ua.reset();Fa.VS();za.reset();X.reset();Da.reset();wa.reset();Da.reset();g.reset();xa.reset();W=Ua=Za=0;q=function(){};P=function(){};A=function(){};La.length=0;Sa=null};w.canvas_data_url=function(a,b,c,g){ia.canvas_data_url(a,b,c,g)};w.detect_mobile=
function(){return ea.detect_mobile()};w.append_loop_cb=function(a){for(var b=0;b<La.length;b++)if(La[b]==a)return;La.push(a)};w.remove_loop_cb=function(a){for(var b=0;b<La.length;b++)if(La[b]==a){La.splice(b,1);break}};w.get_renderer_info=function(){var a=Ha.get_renderer_info();return a?{vendor:Sa.getParameter(a.UNMASKED_VENDOR_WEBGL),renderer:Sa.getParameter(a.UNMASKED_RENDERER_WEBGL)}:null}});w.a=f},function(D,w,f){D=f(0);var N=f(5),U=f(4),n=f(86),y=f(29),d=f(27),m=f(21),C=f(1),v=f(34),r=f(2),p=
f(3),z=f(17);f=Object(D.a)("__nodemat",function(a,f){function k(a,b,g,e,d,f){if(b in Ja)return Ja[b];var l={Ya:null,id:b,EE:!0};g||(bb={},Vb=0);if("SHADOW"!=e&&"COLOR_ID"!=e){for(var m=fa.create(),q=a.nodes,t=0;t<q.length;t++)if(null==S(m,q[t],0,e,d,f))return Ja[b]=null,l;if(g&&-1==ca(a,m,"GROUP_OUTPUT","group"))return l;t=Ba(m);d=g?a.links:a.links.slice();if(!Va(m,d,t))return l;if(g)return l.Ya=m,l;for(t=0;t<d.length;t++){g=d[t];q=J(g.from_node,m);for(var n=J(g.to_node,m),u=0;u<q.length;u++)for(var p=
0;p<n.length;p++){var v=q[u],z=n[p],y=fa.Kb(m,v),E=fa.Kb(m,z);if(!Fa(m,v,z,y,E,g))return Ja[b]=null,l}}aa(m);t=!1;d=-1;"GLOW"==e?d=ca(a,m,"B4W_GLOW_OUTPUT","material",!0):(d=ca(a,m,"OUTPUT","material",!1,!0),-1==d&&(d=ca(a,m,"OUTPUT_MATERIAL","material",!1,!0)),-1==d&&(d=ca(a,m,"OUTPUT_WORLD","material",!1,!0),t=!0));-1==d&&(m=D(),d=0);P(m);a=fa.Vl(m,d,fa.Rk);t?(O(a,e),L(a,e),B(a),H(a)):(c(a,e,f),h(a,e,f));T(a);da(a);Oa(a);A(a,e);La(a)}else e=k(a,b,g,"MAIN",d,f),e=fa.clone(e.Ya,function(a){var b=
r.N(a);b.inputs=r.O(a.inputs);b.outputs=r.O(a.outputs);return b}),d=ca(a,e,"OUTPUT","material",!1,!0),-1==d&&(d=ca(a,e,"OUTPUT_MATERIAL","material",!1,!0)),K(e,d),a=fa.Vl(e,d,fa.Rk),T(a);l.Ya=a;return Ja[b]=l}function c(a,b,c){var g=[];fa.Na(a,function(a,b){"MATERIAL"!=b.type&&"MATERIAL_EXT"!=b.type||g.push({pf:a,node:b})});for(b=0;b<g.length;++b){var e=g[b].pf,h=g[b].node,d=fa.ak(a);fa.Zh(a,d,h.data.OR);var k=fa.ak(a);fa.Zh(a,k,h.data.PR);fa.gd(a,d,k,[4,2]);for(var f={5:["LIGHTING_APPLY",10],6:["LIGHTING_APPLY",
6],7:["MATERIAL_END",3],8:["MATERIAL_END",4],9:["MATERIAL_END",5]},m=fa.bj(a,e),q=[],t=[],n=[],u={},r=0;r<m;r++){var p=fa.Tg(a,e,r);p in u||(u[p]=0);var v=fa.td(a,p,e,u[p]++);q.push([p,e,v]);var B=f[v[1]];if(B)switch(B[0]){case "MATERIAL_END":t.push([p,k,[v[0],B[1]]]);break;case "LIGHTING_APPLY":n.push([p,[v[0],B[1]]])}else t.push([p,d,v])}l(a,h.data.value,d,k,n,c);for(r=0;r<q.length;r++)fa.ui(a,q[r][0],q[r][1],q[r][2]);for(r=0;r<t.length;r++)fa.gd(a,t[r][0],t[r][1],t[r][2]);h=fa.ah(a,e);d=[];f=[];
m={};for(r=0;r<h;r++)q=fa.Bh(a,e,r),q in m||(m[q]=0),v=fa.td(a,e,q,m[q]++),d.push([e,q,v]),f.push([k,q,v]);for(r=0;r<d.length;r++)fa.ui(a,d[r][0],d[r][1],d[r][2]);for(r=0;r<f.length;r++)fa.gd(a,f[r][0],f[r][1],f[r][2]);fa.rf(a,e)}}function l(a,c,g,e,h,d){var k={name:"LIGHTING_AMBIENT",type:"LIGHTING_AMBIENT"},f=S(a,k,0,null,null,[]),l=f;b(a,g,f,"E");b(a,g,f,"A");b(a,g,f,"D");if(!c.bd)for(var m,q=0;q<d.length;q++){var t=d[q];k={name:"LIGHTING_LAMP",type:"LIGHTING_LAMP"};m=S(a,k,0,null,null,[]);k={name:"LIGHTING_APPLY",
type:"LIGHTING_APPLY"};f=S(a,k,0,null,null,[]);b(a,l,f,"color");b(a,l,f,"specular");b(a,m,f,"ldir");b(a,g,f,"normal");b(a,g,f,"D");b(a,g,f,"S");b(a,m,f,"lcolorint");b(a,g,m,"shadow_factor");k="SPECULAR_"+c.Pf;k={name:k,type:k,use_tangent_shading:c.Se};k=S(a,k,0,null,null,[]);b(a,m,k,"ldir");b(a,m,k,"lfac");b(a,g,k,"normal");b(a,k,f,"sfactor");b(a,m,k,"norm_fac");b(a,g,k,"sp_params");t="HEMI"==t.type?"DIFFUSE_LAMBERT":"DIFFUSE_"+c.Ff;k={name:t,type:t,use_tangent_shading:c.Se};k=S(a,k,0,null,null,[]);
b(a,m,k,"ldir");b(a,m,k,"lfac");b(a,g,k,"normal");b(a,m,k,"norm_fac");b(a,k,f,"lfactor");"DIFFUSE_LAMBERT"!=t&&b(a,g,k,"dif_params");for(m=0;m<h.length;m++)fa.gd(a,h[m][0],f,h[m][1]);l=f}b(a,l,e,"color");b(a,l,e,"specular")}function b(a,b,c,g){for(var e=fa.Kb(a,b),h=-1,d=fa.Kb(a,c).inputs,k=0;k<d.length;k++)if(g==d[k].identifier){h=k;break}if(-1!=h){var f=-1;e=e.outputs;for(k=0;k<e.length;k++)if(g==e[k].identifier){f=k;break}-1!=f&&(fa.gd(a,b,c,[f,h]),e[f].lb=!0,d[h].lb=!0)}}function h(a,b,c){var g=
[];fa.Na(a,function(a,b){"OUTPUT_MATERIAL"==b.type&&g.push({pf:a,node:b})});for(var e=0;e<g.length;++e){var h=g[e].pf,d=g[e].node,k=!1,f=!1,l=fa.ak(a);fa.Zh(a,l,d.data.kS);for(var m=fa.bj(a,h),q=[],t=[],n={},u=0;u<m;u++){var r=fa.Tg(a,h,u);r in n||(n[r]=0);var p=fa.td(a,r,h,n[r]++);q.push([r,h,p]);switch(p[1]){case 0:k=!0;t.push([r,l,p]);break;case 2:f=!0;var v=fa.ak(a);fa.Zh(a,v,d.data.VO);t.push([r,v,[p[0],0]])}}for(u=0;u<q.length;u++)fa.ui(a,q[u][0],q[u][1],q[u][2]);for(u=0;u<t.length;u++)fa.gd(a,
t[u][0],t[u][1],t[u][2]);fa.rf(a,h);k?(f&&G(a,l,v),E(a,b,c)):(h=fa.Kb(a,l),a.Ha=[0,h],a.nb=[])}}function G(a,c,g){c=fa.Vl(a,c,fa.Rk);var e=u(c);if(e.length){g=fa.Vl(a,g,fa.Rk);g=fa.clone(g,Da,za);fa.Na(g,function(a,b){b.name="displacement%join%"+b.name});fa.QD(g,c,[],[]);var h=-1;fa.Na(c,function(a,b){if("DISPLACEMENT_BUMP"==b.type)return h=a,1});for(g=0;g<e.length;g++){var d=e[g],k=fa.Kb(c,d);b(c,h,d,"Normal");w(k,"USE_NORMAL_IN",1)}}a.Ha=c.Ha;a.nb=c.nb}function w(a,b,c){a=a.Jb;for(var g=0;g<a.length;g++){var e=
a[g];e[0]==b&&(e[1]=c)}}function u(a){var b=[];fa.Na(a,function(a,c){var g=!1;c=c.inputs;for(var e=0;e<c.length;e++)if("Normal"==c[e].identifier){g=!c[e].lb;break}g&&b.push(a)});return b}function E(a,b,c){var g=[];fa.Na(a,function(a,b){"OUTPUT_SURFACE"==b.type&&g.push({pf:a,node:b})});var e=[];g.length&&fa.Na(a,function(a,b){"MIX_SHADER"==b.type&&e.push({pf:a,node:b})});for(b=0;b<g.length;++b){var h=g[b].pf,d=g[b].node,k=fa.ak(a);fa.Zh(a,k,d.data.OM);var f=fa.ak(a);fa.Zh(a,f,d.data.PM);fa.gd(a,k,
f,[4,2]);for(var l=fa.bj(a,h),m=[],q=[],t={},n=0;n<l;n++){var u=fa.Tg(a,h,n),r=fa.Kb(a,u);u in t||(t[u]=0);var p=fa.td(a,u,h,t[u]++);m.push([u,h,p]);q.push([u,k,p]);if("BSDF_GLOSSY"==r.type||"BSDF_DIFFUSE"==r.type||"MIX_SHADER"==r.type||"EMISSION"==r.type||"BSDF_TRANSPARENT"==r.type||"BSDF_PRINCIPLED"==r.type)for(q.push([u,k,[1,1]]),q.push([u,k,[2,2]]),q.push([u,k,[3,3]]),q.push([u,k,[4,4]]),q.push([u,k,[5,5]]),q.push([u,k,[6,6]]),q.push([u,k,[7,7]]),q.push([u,k,[8,8]]),q.push([u,k,[9,9]]),q.push([u,
k,[10,10]]),q.push([u,k,[11,11]]),q.push([u,k,[12,12]]),u=0;u<e.length;++u){r=e[u].pf;p=fa.bj(a,r);for(var v=0;v<p;v++){var B=fa.Tg(a,r,v),z=fa.Kb(a,B),A=fa.td(a,B,r,0);0==A[1]||"BSDF_GLOSSY"!=z.type&&"BSDF_DIFFUSE"!=z.type&&"MIX_SHADER"!=z.type&&"EMISSION"!=z.type&&"BSDF_TRANSPARENT"!=z.type&&"BSDF_PRINCIPLED"!=z.type||(z=1==A[1]?3:15,q.push([B,r,[1,z]]),q.push([B,r,[2,z+1]]),q.push([B,r,[3,z+2]]),q.push([B,r,[4,z+3]]),q.push([B,r,[5,z+4]]),q.push([B,r,[6,z+5]]),q.push([B,r,[7,z+6]]),q.push([B,r,
[8,z+7]]),q.push([B,r,[9,z+8]]),q.push([B,r,[10,z+9]]),q.push([B,r,[11,z+10]]),q.push([B,r,[12,z+11]]))}}}R(a,d.data.value,k,f,[],c);q.push([f,h,[0,0]]);q.push([f,h,[1,1]]);for(n=0;n<m.length;n++)fa.ui(a,m[n][0],m[n][1],m[n][2]);for(n=0;n<q.length;n++)fa.gd(a,q[n][0],q[n][1],q[n][2])}}function R(a,c,g,e,h,d){var k={name:"LIGHTING_AMBIENT",type:"LIGHTING_AMBIENT"},f=S(a,k,0,null,null,[]),l=f;b(a,g,f,"E");b(a,g,f,"A");b(a,g,f,"D");for(var m,q=0;q<d.length;q++){k={name:"LIGHTING_LAMP",type:"LIGHTING_LAMP"};
m=S(a,k,0,null,null,[]);k={name:"LIGHTING_APPLY",type:"LIGHTING_APPLY"};f=S(a,k,0,null,null,[]);b(a,l,f,"color");b(a,l,f,"specular");b(a,m,f,"ldir");b(a,g,f,"normal");b(a,g,f,"D");b(a,g,f,"S");b(a,m,f,"lcolorint");b(a,g,m,"shadow_factor");l=c.QM;k={name:l,type:l};l=S(a,k,0,null,null,[]);b(a,m,l,"ldir");b(a,m,l,"lfac");b(a,g,l,"normal");b(a,m,l,"norm_fac");b(a,g,l,"bsdf_params");b(a,l,f,"lfactor");b(a,l,f,"sfactor");for(m=0;m<h.length;m++)fa.gd(a,h[m][0],f,h[m][1]);l=f}b(a,g,e,"bsdf_params");b(a,g,
e,"refract_params");b(a,g,e,"d_color");b(a,g,e,"s_color");b(a,g,e,"e_color");b(a,g,e,"emission");b(a,g,e,"a_color");b(a,g,e,"alpha");b(a,l,e,"color");b(a,l,e,"specular")}function O(a){var b=[];fa.Na(a,function(a,c){"OUTPUT_WORLD"==c.type&&b.push({pf:a,node:c})});for(var c=0;c<b.length;++c){var g=b[c].pf,e=b[c].node,h=fa.ak(a);fa.Zh(a,h,e.data.lS);e=fa.bj(a,g);for(var d=[],k=[],f={},l=0;l<e;l++){var m=fa.Tg(a,g,l);m in f||(f[m]=0);var q=fa.td(a,m,g,f[m]++);d.push([m,g,q]);switch(q[1]){case 0:k.push([m,
h,q])}}for(l=0;l<d.length;l++)fa.ui(a,d[l][0],d[l][1],d[l][2]);for(l=0;l<k.length;l++)fa.gd(a,k[l][0],k[l][1],k[l][2]);fa.rf(a,g)}}function L(a,b){var c=[];fa.Na(a,function(a,b){"MIX_SHADER"!=b.type&&"ADD_SHADER"!=b.type||c.push({pf:a,node:b})});if(c.length)for(var g={name:"RGB_WORLD_NODE",type:"RGB_WORLD_NODE",factor:.5},e=0;e<c.length;e++){var h=c[e].pf,d=c[e].node;g.name=d.name;g.fac=d.inputs[0].mb;g.fac_is_linked=d.inputs[0].lb;g.color1_is_linked=d.inputs[1].lb;g.color2_is_linked=d.inputs[2].lb;
switch(d.type){case "ADD_SHADER":g.type="ADD_WORLD_RGB";break;case "MIX_SHADER":g.type="MIX_WORLD_RGB"}d=S(a,g,0,b,null,[]);for(var k=fa.bj(a,h),f=[],l=[],m={},q=0;q<k;q++){var t=fa.Tg(a,h,q);t in m||(m[t]=0);var n=fa.td(a,t,h,m[t]++);f.push([t,h,n]);l.push([t,d,n])}for(q=0;q<f.length;q++)fa.ui(a,f[q][0],f[q][1],f[q][2]);for(q=0;q<l.length;q++)fa.gd(a,l[q][0],l[q][1],l[q][2]);k=fa.ah(a,h);f=[];l=[];m={};for(q=0;q<k;q++)t=fa.Bh(a,h,q),t in m||(m[t]=0),n=fa.td(a,h,t,m[t]++),f.push([h,t,n]),l.push([d,
t,n]);for(q=0;q<f.length;q++)fa.ui(a,f[q][0],f[q][1],f[q][2]);for(q=0;q<l.length;q++)fa.gd(a,l[q][0],l[q][1],l[q][2]);fa.rf(a,h)}}function B(a){var b=-1,c=[],g=[],e="OUTPUT_WORLD_SURFACE BACKGROUND RGB VALUE ADD_WORLD_RGB MIX_WORLD_RGB TEXTURE_ENVIRONMENT_EQUIRECTANGULAR TEXTURE_ENVIRONMENT_MIRROR_BALL GEOMETRY_NO GEOMETRY_TRN GEOMETRY_GL GEOMETRY_IN TEXTURE_COLOR TEX_COORD_GE TEX_COORD_OB TEX_COORD_NO COMBRGB COMBHSV CURVE_RGB CURVE_VEC B4W_LINEAR_TO_SRGB B4W_NORMAL_VIEW B4W_VECTOR_VIEW B4W_SRGB_TO_LINEAR B4W_REFLECT B4W_CLAMP B4W_TIME B4W_SMOOTHSTEP NORMAL MAPPING MATH_ADD MATH_SUBTRACT MATH_MULTIPLY MATH_DIVIDE MATH_SINE MATH_COSINE MATH_TANGENT MATH_ARCSINE MATH_ARCCOSINE MATH_ARCTANGENT MATH_POWER MATH_LOGARITHM MATH_MINIMUM MATH_MAXIMUM MATH_ROUND MATH_LESS_THAN MATH_GREATER_THAN MATH_MODULO MATH_ABSOLUTE MIX_RGB_MIX MIX_RGB_ADD MIX_RGB_MULTIPLY MIX_RGB_SUBTRACT MIX_RGB_SCREEN MIX_RGB_DIVIDE MIX_RGB_DIFFERENCE MIX_RGB_DARKEN MIX_RGB_LIGHTEN MIX_RGB_OVERLAY MIX_RGB_DODGE MIX_RGB_BURN MIX_RGB_HUE MIX_RGB_SATURATION MIX_RGB_VALUE MIX_RGB_COLOR MIX_RGB_SOFT_LIGHT MIX_RGB_LINEAR_LIGHT SEPRGB SEPHSV VALTORGB VECT_TRANSFORM VECT_MATH_ADD VECT_MATH_SUBTRACT VECT_MATH_AVERAGE VECT_MATH_DOT_PRODUCT VECT_MATH_CROSS_PRODUCT VECT_MATH_NORMALIZE".split(" ");
fa.Na(a,function(a,g){switch(e.indexOf(g.type)){case -1:c.push({pf:a,node:g});break;case 0:b=a}});for(var h=0;h<c.length;h++)for(var d=c[h].pf,k=fa.ah(a,d),f={},l=0;l<k;l++){var m=fa.Bh(a,d,l);m in f||(f[m]=0);var q=fa.td(a,d,m,f[m]++);g.push([d,m,q])}for(h=0;h<g.length;h++)fa.ui(a,g[h][0],g[h][1],g[h][2]);g.length&&(g=fa.Vl(a,b,fa.Rk),a.Ha=g.Ha,a.nb=g.nb)}function H(a){var b=-1,c=[],g=[];fa.Na(a,function(a,g){switch(g.type){case "ADD_WORLD_RGB":case "MIX_WORLD_RGB":a={pf:a,node:g};c.push(a);break;
case "OUTPUT_WORLD_SURFACE":b=a,a={pf:a,node:g},c.push(a)}});for(var e=0;e<c.length;e++)for(var h=c[e].pf,d=c[e].node,k=fa.bj(a,h),f={},l=0;l<k;l++){var m=fa.Tg(a,h,l),q=fa.Kb(a,m);m in f||(f[m]=0);var t=fa.td(a,m,h,f[m]++);"OUTPUT_WORLD_SURFACE"!=d.type&&0==t[1]||"ADD_WORLD_RGB"==q.type||"MIX_WORLD_RGB"==q.type||"BACKGROUND"==q.type||g.push([m,h,t])}for(e=0;e<g.length;e++)fa.ui(a,g[e][0],g[e][1],g[e][2]);g.length&&(g=fa.Vl(a,b,fa.Rk),a.Ha=g.Ha,a.nb=g.nb)}function K(a,b){fa.Th(a,function(c,g,e){var h=
fa.Kb(a,g);g==b&&"Color"==h.inputs[e[1]].identifier&&fa.ui(a,c,g,e)})}function D(){var a=fa.create();fa.Zh(a,0,{data:null,Jb:[],Oa:[],inputs:[{mb:new Float32Array([0,0,0]),identifier:"Color",lb:!1,name:"Color"},{mb:1,identifier:"Alpha",lb:!1,name:"Alpha"}],outputs:[],type:"OUTPUT",xf:[]});return a}function T(a){fa.Na(a,function(b,c){var g=c.inputs;c=c.outputs;for(var e=0;e<g.length;e++)V(a,g[e],b,e,1);for(e=0;e<c.length;e++)V(a,c[e],b,e,0)})}function V(a,b,c,g,e){if(b.lb){var h=!0;fa.Th(a,function(a,
b,d){if(!e&&a==c&&d[0]==g||e&&b==c&&d[1]==g)h=!1});h&&(b.lb=!1)}}function A(a,b){var c=[];fa.Th(a,function(g,e,h){var d=fa.Kb(a,g),k=fa.Kb(a,e);d=r._16(d.outputs[h[0]].mb);k=r._16(k.inputs[h[1]].mb);if(d!=k){var f,l={default_value:[0,0,0],identifier:"Vector",is_linked:!0,name:"Vector"},m={default_value:0,identifier:"Value",is_linked:!0,name:"Value"};d&&!k?f=ea("vector_to_scalar","B4W_VECTOSCAL",[l],[m]):!d&&k&&(f=ea("scalar_to_vector","B4W_SCALTOVEC",[m],[l]));S(a,f,0,b,null,[]);c.push([g,e,a.Ha[a.Ha.length-
2],h])}});for(var g=0;g<c.length;++g)fa.ui(a,c[g][0],c[g][1],c[g][3]),fa.gd(a,c[g][0],c[g][2],[c[g][3][0],0]),fa.gd(a,c[g][2],c[g][1],[0,c[g][3][1]])}function aa(a){var b=[];fa.Na(a,function(c,g){switch(g.type){case "B4W_TRANSLUCENCY":fa.Th(a,function(e,h,d){var k=fa.Kb(a,h);e==c&&"MATERIAL_EXT"==k.type&&"Translucency"==g.outputs[d[0]].name&&b.push(e,h,[d[0]+1,d[1]+1])})}});for(var c=0;c<b.length;c+=3)fa.gd(a,b[c],b[c+1],b[c+2])}function J(a,b){var c=[];fa.Na(b,function(b,g){g.name==a.name&&c.push(b)});
if(c.length)return c;Ya.va("Node not found")}function P(a){var b=[];fa.Na(a,function(a,c){"B4W_PARALLAX"!=c.type&&"REROUTE"!=c.type||b.push(a,c)});for(var c=0;c<b.length;c+=2){var g=b[c],e=b[c+1];if("B4W_PARALLAX"==e.type)q(a,g,e);else if("REROUTE"==e.type){for(var h=fa.Tg(a,g,0),d=fa.ah(a,g),k=[],f=[],l=[],m=0;m<d;m++){var t=fa.Bh(a,g,m),n=f.indexOf(t),u=fa.td(a,g,t,0<=n?l[n]:0);if(u){u=u[1];var r=e.inputs[0].mb;u=fa.Kb(a,t).inputs[u];switch(typeof r){case "number":if("object"==typeof u.mb){var p=
u.mb;for(u=0;u<p.length;u++)p[u]=r}else"number"==typeof u.mb&&(u.mb=r);break;case "object":if("object"==typeof u.mb)for(p=u.mb,u=0;u<p.length;u++)p[u]=r[u];else"number"==typeof u.mb&&(u.mb=.35*r[0]+.45*r[1]+.2*r[2])}}r=e.outputs;for(u=0;u<r.length;u++)r[u].mb=e.inputs[0].mb;-1!=n?l[n]+=1:(f.push(t),l.push(1),k.push(g,t))}if(-1!=h)for(e=fa.td(a,h,g,0)[0],m=0;m<f.length;m++)for(u=0;u<l[m];u++)d=fa.td(a,g,f[m],u)[1],fa.gd(a,h,f[m],[e,d]);for(m=0;m<k.length;m+=2)fa.Nl(a,k[m],k[m+1],-1)}}}function q(a,
b,c){a:{var g=a.nb;for(var e=0;e<g.length;e+=3)if(g[e+1]==b&&1==g[e+2][1]){g=g[e];break a}g=-1}-1!=g&&(e=fa.Kb(a,g),c.data=e.data,fa.Nl(a,g,b,-1),0==fa.ah(a,g)&&(b=fa.Tg(a,g,0),-1!=b&&fa.Nl(a,b,g,-1),fa.rf(a,g)));c.inputs.splice(1,1)}function da(a){e(a);pa(a);I(a)}function I(a,b){var c={};fa.Na(a,function(a,b){if("GEOMETRY_UV"==b.type||"UVMAP"==b.type||"TEX_COORD_UV"==b.type){var g=b.data.value;g in c||(c[g]=[]);c[g].push(a,b)}});for(var g in c){var e=c[g];if(2<e.length){var h=t(g);h=S(a,h,0,b,null,
[]);for(var d=fa.Kb(a,h),k=0;k<e.length;k+=2){for(var f=e[k],l=e[k+1],m=[],q={},n=fa.ah(a,f),u=0;u<n;u++){var r=fa.Bh(a,f,u);r in q||(q[r]=0);var p=fa.td(a,f,r,q[r]);q[r]++;m.push(f,r,p);p=p.splice(0,p.length);switch(l.type){case "GEOMETRY_UV":p[0]=0;d.outputs[0].lb=!0;break;case "UVMAP":case "TEX_COORD_UV":p[0]=1,d.outputs[1].lb=!0}fa.gd(a,h,r,p)}for(u=0;u<m.length;u+=3)fa.Nl(a,m[u],m[u+1],0);fa.rf(a,f)}}}}function t(a){var b=ea("merged_uv","UV_MERGED",[],[{default_value:[0,0,0],identifier:"UV_geom",
is_linked:!1,name:"UV_geom"},{default_value:[0,0,0],identifier:"UV_cycles",is_linked:!1,name:"UV_cycles"}]);b.uv_layer=a;return b}function e(a){var b=[];fa.Na(a,function(a,c){"GEOMETRY_VC"!=c.type&&"GEOMETRY_NO"!=c.type&&"GEOMETRY_FB"!=c.type&&"GEOMETRY_VW"!=c.type&&"GEOMETRY_GL"!=c.type&&"GEOMETRY_LO"!=c.type&&"GEOMETRY_OR"!=c.type&&"GEOMETRY_BF"!=c.type&&"GEOMETRY_IN"!=c.type||b.push(a,c)});for(var c=[],g=0;g<b.length;g+=2){for(var e=b[g],h=b[g+1],d=!0,k=0;k<c.length;k++){var f=c[k];if(ta(h,f.Jg)){d=
[];k=fa.ah(a,e);for(var l=0;l<k;l++){var m=fa.Bh(a,e,l),q=fa.td(a,e,m,0);d.push(e,m,q);fa.gd(a,f.id,m,q)}for(l=0;l<d.length;l+=3)fa.Nl(a,d[l],d[l+1],0);fa.rf(a,e);d=!1;break}}d&&(f={id:e,Jg:h},c.push(f))}}function ma(a){for(var b={},c=0;c<a.Ha.length;c+=2){var g=a.Ha[c];b[g]={Hq:{},tG:!1}}for(c=0;c<a.nb.length;c+=3)b[a.nb[c+1]].Hq[a.nb[c]]=!0;for(g in b)ja(g,b);for(g in b)b[g]=Object.keys(b[g].Hq).map(function(a){return parseInt(a,10)});return b}function ja(a,b){var c=b[a];if(!c.tG){var g=r.O(c),
e;for(e in c.Hq){ja(e,b);c=b[e];for(var h in c.Hq)g.Hq[h]=!0}g.tG=!0;b[a]=g}}function pa(a){var b=[];fa.Na(a,function(a,c){"TEXTURE_COLOR"!=c.type&&"TEXTURE_NORMAL"!=c.type||b.push(a,c)});if(b.length){for(var c=ma(a),g=[],e=0;e<b.length;e+=2){for(var h=b[e],d=b[e+1],k=!0,f=0;f<g.length;f++){var l=g[f];if(!(3<=l.cp.length||!ta(d,l.Jg)||-1<c[h].indexOf(l.id)||-1<c[l.id].indexOf(h))){for(var m=!1,q=0;q<l.cp.length;q++){var t=l.cp[q].id;if(-1<c[h].indexOf(t)||-1<c[t].indexOf(h)){m=!0;break}}if(!m){f=
[];t=fa.bj(a,h);var n={};for(q=0;q<t;q++)m=fa.Tg(a,h,q),m in n||(n[m]=0),k=fa.td(a,m,h,n[m]++),f.push(m,h,k);t=[];n=fa.ah(a,h);var u={};for(q=0;q<n;q++)m=fa.Bh(a,h,q),m in u||(u[m]=0),k=fa.td(a,h,m,u[m]++),t.push(h,m,k);k=f.concat(t);for(q=0;q<k.length;q+=3)fa.Nl(a,k[q],k[q+1],0);fa.rf(a,h);q={id:h,Jg:d,bP:f,cP:t};l.cp.push(q);k=!1;break}}}k&&(l={id:h,Jg:d,cp:[]},g.push(l))}for(e=0;e<g.length;e++){l=g[e];c=l.cp.length;for(f=0;f<c;f++){d=l.cp[f];q=d.Jg;h=d.bP;d=d.cP;l.Jg.inputs[f+1].lb=q.inputs[0].lb;
l.Jg.inputs[f+1].mb=q.inputs[0].mb;l.Jg.outputs[2*(f+1)].lb=q.outputs[0].lb;l.Jg.outputs[2*(f+1)].mb=q.outputs[0].mb;l.Jg.outputs[2*(f+1)+1].lb=q.outputs[1].lb;l.Jg.outputs[2*(f+1)+1].mb=q.outputs[1].mb;for(q=0;q<h.length;q+=3)m=h[q],k=h[q+2],k[1]+=f+1,fa.gd(a,m,l.id,k);for(q=0;q<d.length;q+=3)m=d[q+1],k=d[q+2],k[0]+=2*(f+1),fa.gd(a,l.id,m,k);l.Jg.Jb.push(["USE_uv"+(f+2),1])}fa.rf(a,l.id);fa.Zh(a,l.id,l.Jg)}}}function ta(a,b){if(a.type!==b.type)return!1;switch(a.type){case "GEOMETRY_VC":return a.data.value==
b.data.value;case "GEOMETRY_NO":var c=a.Jb;a=-1;for(var g=0;g<c.length;g++){var e=c[g];if("USE_NORMAL_IN"==e[0]){a=e[1];break}}b=b.Jb;c=-1;for(g=0;g<b.length;g++)if(e=b[g],"USE_NORMAL_IN"==e[0]){c=e[1];break}return a===c;case "GEOMETRY_FB":case "GEOMETRY_VW":case "GEOMETRY_GL":case "GEOMETRY_LO":case "GEOMETRY_OR":case "GEOMETRY_BF":case "GEOMETRY_IN":return!0;case "TEXTURE_COLOR":case "TEXTURE_NORMAL":return a.data.ku==b.data.ku&&a.data.value.Ym==b.data.value.Ym;case "VALUE":case "RGB":return a.oe==
b.oe;default:return!1}}function Oa(a){var b=[],c=[];fa.Na(a,function(a,g){"GEOMETRY_VC"==g.type&&b.push(a,g);"GEOMETRY_VW"==g.type&&c.push(a,g)});M(a,b);oa(a,c)}function M(a,b){for(var c=0;c<b.length;c+=2){for(var g=b[c],e=b[c+1],h=!1,d=[],k=[],f=[[],[],[]],l=fa.ah(a,g),m=0;m<l;m++){var q=fa.Bh(a,g,m);if("SEPRGB"!=fa.Kb(a,q).type){h=!1;break}d.push(g,q);var t={},n=fa.ah(a,q);for(h=0;h<n;h++){var u=fa.Bh(a,q,h);u in t||(t[u]=0);var p=fa.td(a,q,u,t[u]++);d.push(q,u);f[p[0]].push(g,u,p)}k.push(q);h=
!0}if(h){for(m=g=l=0;m<f.length;m++)f[m].length&&(l++,g|=1<<2-m);if(l){e.type+=l;e.outputs=[];for(m=0;m<f.length;m++)if(f[m].length)for(e.outputs.push({mb:0,identifier:"RGB"[m],lb:!0,name:"RGB"[m]}),h=0;h<f[m].length;h+=3)f[m][h+2][0]=r._42(g,m);for(m=0;m<d.length;m+=2)fa.Nl(a,d[m],d[m+1],0);for(m=0;m<k.length;m++)fa.rf(a,k[m]);for(m=0;m<f.length;m++)for(h=0;h<f[m].length;h+=3)fa.gd(a,f[m][h],f[m][h+1],f[m][h+2])}}}}function oa(a,b){for(var c=0;c<b.length;c+=2){for(var g=b[c],e=!0,h=[],d=fa.ah(a,
g),k=0;k<d;k++){var f=fa.Bh(a,g,k);if("B4W_REFLECT"==fa.Kb(a,f).type){var l=fa.td(a,g,f,0),m=fa.td(a,g,f,1);l&&1==l[1]||m&&1==m[1]?e=!1:h.push(g,f)}else e=!1}for(k=0;k<h.length;k+=2)d=a,l=h[k],f=h[k+1],m=fa.Kb(d,f),m.type+="_WORLD",fa.Nl(d,l,f,0),m.inputs.splice(0,1),l=fa.Tg(d,f,0),l!=fa.Py&&(fa.td(d,l,f,0)[1]=0);e&&fa.rf(a,g)}}function ca(a,b,c,g,e,h){a=a.nodes;for(var d=null,k=0;k<a.length;k++){var f=a[k];e?"GROUP"==f.type&&f.node_tree_name==c&&(d=f):f.type==c&&(d=f)}return d?J(d,b)[0]:(h||Pa.error('No "'+
c+'" node in node '+g),-1)}function ea(a,b,c,g){return{name:a,type:b,inputs:c,outputs:g}}function Da(a){var b={name:"",oe:"",type:"",xf:[],inputs:[],outputs:[],Oa:[],data:null,Jb:[]};b.name=a.name;b.oe=a.oe;b.type=a.type;for(var c=b.xf,g=a.xf,e=0;e<g.length;e++)c.push(xa(g[e]));c=b.Oa;g=a.Oa;for(e=0;e<g.length;e++)c.push(xa(g[e]));c=b.inputs;g=a.inputs;for(e=0;e<g.length;e++)c.push(Aa(g[e]));c=b.outputs;g=a.outputs;for(e=0;e<g.length;e++)c.push(Aa(g[e]));c=b.Jb;g=a.Jb;for(e=0;e<g.length;e++)c.push(g[e].slice());
b.data=a.data;return b}function S(a,b,c,g,e,h){var k=b.name,f=b.name,l=b.type,q=[],t=[],n=[],u=[],v=null,B="uv_layer"in b?b.uv_layer||e&&e.MC||"":"",z="color_layer"in b?b.color_layer||e&&e.NC||"":"",A=[];switch(l){case "BSDF_ANISOTROPIC":case "BSDF_GLASS":case "BSDF_HAIR":case "BSDF_TRANSLUCENT":case "BSDF_REFRACTION":case "BSDF_TOON":case "BSDF_VELVET":case "SUBSURFACE_SCATTERING":case "AMBIENT_OCCLUSION":case "VOLUME_ABSORPTION":case "VOLUME_SCATTER":case "BLACKBODY":case "WAVELENGTH":case "SEPXYZ":case "COMBXYZ":case "LIGHT_FALLOFF":case "TEX_SKY":case "TEX_NOISE":case "TEX_WAVE":case "TEX_MUSGRAVE":case "TEX_GRADIENT":case "TEX_MAGIC":case "TEX_CHECKER":case "TEX_BRICK":case "WIREFRAME":case "TANGENT":case "LIGHT_PATH":case "HOLDOUT":case "HAIR_INFO":case "SCRIPT":t=
ya(b);n=qa(b);Pa.warn(l+" node is not fully supported.");break;case "BRIGHTCONTRAST":case "ADD_SHADER":t=ya(b);n=qa(b);break;case "MIX_SHADER":t.push(sa(b,"Fac"));var y=sa(b,"Shader"),E=y.lb;t.push(y);var C=sa(b,"Shader_001");C||(C=sa(b,"Shader.001"));var G=C.lb;t.push(C);t.push(Q("d_color1","d_color1",[0,0,0],E));t.push(Q("d_roughness1","d_roughness1",0,E));t.push(Q("s_color1","s_color1",[0,0,0],E));t.push(Q("s_roughness1","s_roughness1",0,E));t.push(Q("metalness1","metalness1",0,E));t.push(Q("normal1",
"normal1",[0,0,0],E));t.push(Q("ior1","ior1",0,E));t.push(Q("transmission1","transmission1",0,E));t.push(Q("e_color1","e_color1",[0,0,0],E));t.push(Q("emission1","emission1",0,E));t.push(Q("a_color1","a_color1",[0,0,0],E));t.push(Q("alpha1","alpha1",1,E));t.push(Q("d_color2","d_color2",[0,0,0],G));t.push(Q("d_roughness2","d_roughness2",0,G));t.push(Q("s_color2","s_color2",[0,0,0],G));t.push(Q("s_roughness2","s_roughness2",0,G));t.push(Q("metalness2","metalness2",0,G));t.push(Q("normal2","normal2",
[0,0,0],G));t.push(Q("ior2","ior2",0,G));t.push(Q("transmission2","transmission2",0,G));t.push(Q("e_color2","e_color2",[0,0,0],G));t.push(Q("emission2","emission2",0,G));t.push(Q("a_color2","a_color2",[0,0,0],G));t.push(Q("alpha2","alpha2",1,G));var I=ia(b,"Shader"),w=I.lb;n=[I,Q("d_color","d_color",[0,0,0],w),Q("d_roughness","d_roughness",0,w),Q("s_color","s_color",[0,0,0],w),Q("s_roughness","s_roughness",0,w),Q("metalness","metalness",0,w),Q("normal","normal",[0,0,0],w),Q("ior","ior",0,w),Q("transmission",
"transmission",0,w),Q("e_color","e_color",[0,0,0],w),Q("emission","emission",0,w),Q("a_color","a_color",[0,0,0],w),Q("alpha","alpha",1,w)];break;case "OBJECT_INFO":t=ya(b);n=[];var O=ia(b,"Location"),J=ia(b,"Object Index"),R=ia(b,"Material Index"),P=ia(b,"Random");n.push(O);n.push(J);n.push(R);n.push(P);A.push(["USE_LOCATION_OUT",O.lb|0]);A.push(["USE_OBJ_IND_OUT",J.lb|0]);A.push(["USE_MAT_IND_OUT",R.lb|0]);A.push(["USE_RANDOM_OUT",P.lb|0]);break;case "UVMAP":B||(l="EMPTY_UV");if("EMPTY_UV"!=l){var L=
Ga("param_"+l+"_a"),ja=Ga("param_"+l+"_v");q.push(na(L));q.push(na(ja));u.push(na(ja));v={name:L,value:B}}n=qa(b);break;case "UV_MERGED":L=Ga("param_UV_MERGED_a");ja=Ga("param_UV_MERGED_v");q.push(na(L));q.push(na(ja));n.push(ia(b,"UV_geom"));n.push(ia(b,"UV_cycles"));u.push(na(ja));v={name:L,value:B};break;case "CAMERA":t=[];n=qa(b);break;case "COMBRGB":case "COMBHSV":t=ya(b);n=qa(b);break;case "CURVE_RGB":case "CURVE_VEC":"CURVE_RGB"==l?(Ab(b,0,0,1)&&A.push(["READ_R",1]),Ab(b,1,0,1)&&A.push(["READ_G",
1]),Ab(b,2,0,1)&&A.push(["READ_B",1]),Ab(b,3,0,1)&&A.push(["READ_A",1])):(Ab(b,0,-1,1)&&A.push(["READ_R",1]),Ab(b,1,-1,1)&&A.push(["READ_G",1]),Ab(b,2,-1,1)&&A.push(["READ_B",1]));t=ya(b);n=qa(b);v={value:b};break;case "PARTICLE_INFO":t=ya(b);n=qa(b);for(var H=0;H<b.outputs.length;H++){var ka=b.outputs[H],ma=ka.identifier,T=na("v_param_PART_INFO_"+ma.replace(" ",""));if(ka.is_linked)switch(ma){case "Size":A.push(["PART_INFO_SIZE",Wa.Ga(1)]);break;case "Age":A.push(["PART_INFO_AGE",Wa.Ga(1)]);break;
case "Lifetime":A.push(["PART_INFO_LT",Wa.Ga(1)]);break;case "Location":A.push(["PART_INFO_LOC",Wa.Ga(1)]);break;case "Index":var da=na("a_param_PART_INFO_"+ka.identifier.replace(" ",""));v=da;A.push(["PART_INFO_IND",Wa.Ga(1)]);break;case "Velocity":A.push(["PART_INFO_VEL",Wa.Ga(1)]);break;case "Angular Velocity":A.push(["PART_INFO_A_VEL",Wa.Ga(1)])}"Age"!=ma&&"Lifetime"!=ma&&"Size"!=ma&&(q.push(T),u.push(T))}da&&q.push(da);break;case "NEW_GEOMETRY":case "GEOMETRY":if(!Ha(b))return!0;l=ua(b,c);if(!l)return Pa.error("Geometry output is not supported"),
null;switch(l){case "GEOMETRY_UV":B||(l="EMPTY_UV");"EMPTY_UV"!=l&&(L=Ga("param_GEOMETRY_UV_a"),ja=Ga("param_GEOMETRY_UV_v"),q.push(na(L)),q.push(na(ja)),u.push(na(ja)),v={name:L,value:B});n.push(ia(b,"UV"));break;case "GEOMETRY_VC":z||(l="EMPTY_VC");if("EMPTY_VC"!=l){var K=Ga("param_GEOMETRY_VC_a"),M=Ga("param_GEOMETRY_VC_v");q.push(na(K));q.push(na(M));u.push(na(M));v={name:K,value:z}}n.push(ia(b,"Vertex Color"));break;case "GEOMETRY_NO":t.push(Q("Normal","Normal",[0,0,0],!1));A.push(["USE_NORMAL_IN",
0]);n.push(ia(b,"Normal"));break;case "GEOMETRY_TRN":l="GEOMETRY_NO";t.push(Q("Normal","Normal",[0,0,0],!1));n.push(ia(b,"True Normal"));A.push(["USE_NORMAL_IN",0]);Pa.warn("Geometry True Normal output is not fully supported.");break;case "GEOMETRY_FB":n.push(ia(b,"Front/Back"));break;case "GEOMETRY_VW":n.push(ia(b,"View"));break;case "GEOMETRY_GL":n.push(ia(b,"Global")||ia(b,"Position"));break;case "GEOMETRY_LO":n.push(ia(b,"Local"));break;case "GEOMETRY_OR":var aa=Ga("param_GEOMETRY_OR_v");q.push(na(aa));
n.push(ia(b,"Orco"));u.push(na(aa));break;case "GEOMETRY_IN":n.push(ia(b,"Incoming"));break;case "GEOMETRY_BF":n.push(ia(b,"Backfacing"))}break;case "ATTRIBUTE":if(!Ha(b))return!0;l=z?"GEOMETRY_VC":"EMPTY_VC";"EMPTY_VC"!=l&&(K=Ga("param_GEOMETRY_VC_a"),M=Ga("param_GEOMETRY_VC_v"),q.push(na(K)),q.push(na(M)),u.push(na(M)),v={name:K,value:z});n.push(ia(b,"Color"));break;case "TEX_COORD":if(!Ha(b))return!0;l=Ca(b,c);switch(l){case "TEX_COORD_UV":B||(l="EMPTY_UV");"EMPTY_UV"!=l&&(L=Ga("param_TEX_COORD_UV_a"),
ja=Ga("param_TEX_COORD_UV_v"),q.push(na(L)),q.push(na(ja)),u.push(na(ja)),v={name:L,value:B});n.push(ia(b,"UV"));break;case "TEX_COORD_NO":n.push(ia(b,"Normal"));break;case "TEX_COORD_GE":var Y=Ga("param_TEX_COORD_GE_v");q.push(na(Y));n.push(ia(b,"Generated"));u.push(na(Y));break;case "TEX_COORD_OB":n.push(ia(b,"Object"));break;case "TEX_COORD_CA":n.push(ia(b,"Camera"));break;case "TEX_COORD_WI":n.push(ia(b,"Window"));break;case "TEX_COORD_RE":n.push(ia(b,"Reflection"))}break;case "GROUP":var D=b.node_tree_name;
switch(D){case "B4W_LINEAR_TO_SRGB":if(!Na(b,[1],[1])){v=wa(b,g,e,[]);break}l="B4W_LINEAR_TO_SRGB";break;case "B4W_NORMAL_VIEW":case "B4W_VECTOR_VIEW":if(!Na(b,[1],[1])){v=wa(b,g,e,[]);break}l="B4W_VECTOR_VIEW";break;case "B4W_SRGB_TO_LINEAR":if(!Na(b,[1],[1])){v=wa(b,g,e,[]);break}l="B4W_SRGB_TO_LINEAR";break;case "B4W_REFLECT":if(!Na(b,[1,1],[1])){v=wa(b,g,e,[]);break}l="B4W_REFLECT";break;case "B4W_REFRACTION":if(!Na(b,[1,0],[1])){v=wa(b,g,e,[]);break}l="B4W_REFRACTION";break;case "B4W_PARALLAX":if(!Na(b,
[1,1,0,0,0],[1])){v=wa(b,g,e,[]);break}var V=Ga("param_B4W_PARALLAX_texture");u.push(na(V));l="B4W_PARALLAX";break;case "B4W_CLAMP":if(!Na(b,[1],[1])){v=wa(b,g,e,[]);break}l="B4W_CLAMP";break;case "B4W_TRANSLUCENCY":if(!Na(b,[0,0,0,0,0],[0])){v=wa(b,g,e,[]);break}l="B4W_TRANSLUCENCY";break;case "B4W_TIME":if(!Na(b,[],[0])){v=wa(b,g,e,[]);break}l="B4W_TIME";break;case "B4W_SMOOTHSTEP":if(!Na(b,[0,0,0],[0])){v=wa(b,g,e,[]);break}l="B4W_SMOOTHSTEP";break;case "B4W_GLOW_OUTPUT":l="B4W_GLOW_OUTPUT";break;
default:v=wa(b,g,e,h)}t=ya(b);n=qa(b);if("B4W_TRANSLUCENCY"==D){var N=Q("TranslucencyParams","TranslucencyParams",[0,0,0,0]);N.lb=n[0].lb;n.push(N)}break;case "LAMP":var ta=b.lamp;ta?(ta.uuid in bb?A.push(["LAMP_INDEX",String(bb[ta.uuid])]):(bb[ta.uuid]=Vb,A.push(["LAMP_INDEX",String(Vb++)])),v=bb):(Pa.error("There is no lamp in node: "+b.name),A.push(["LAMP_INDEX",-1]));n.push(ia(b,"Color"));n.push(ia(b,"Light Vector"));n.push(ia(b,"Distance"));n.push(ia(b,"Visibility Factor"));break;case "LIGHTING_AMBIENT":t=
[Q("E","E",[0,0,0],!0),Q("A","A",[0,0,0],!0),Q("D","D",[0,0,0],!0)];n=[Q("color","color",[0,0,0],!0),Q("specular","specular",[0,0,0],!0)];break;case "LIGHTING_BEGIN":n=[Q("E","E",[0,0,0],!0),Q("A","A",[0,0,0],!0),Q("D","D",[0,0,0],!0),Q("S","S",[0,0,0],!0),Q("normal","normal",[0,0,0],!0),Q("dif_params","dif_params",[0,0],!0),Q("sp_params","sp_params",[0,0],!0),Q("shadow_factor","shadow_factor",0,!0),Q("translucency_color","translucency_color",0,!0),Q("translucency_params","translucency_params",[0,
0,0,0],!0)];break;case "LIGHTING_END":t=[Q("color","color",[0,0,0],!0),Q("specular","specular",[0,0,0],!0)];break;case "LIGHTING_LAMP":t=[Q("shadow_factor","shadow_factor",0,!0)];n=[Q("ldir","ldir",[0,0,0],!0),Q("lfac","lfac",[0,0],!0),Q("lcolorint","lcolorint",[0,0,0],!0),Q("norm_fac","norm_fac",0,!0)];break;case "DIFFUSE_LAMBERT":t=[Q("ldir","ldir",[0,0,0],!0),Q("lfac","lfac",[0,0],!0),Q("normal","normal",[0,0,0],!0),Q("norm_fac","norm_fac",0,!0)];n=[Q("lfactor","lfactor",0,!0)];A.push(["MAT_USE_TBN_SHADING",
b.use_tangent_shading|0]);break;case "DIFFUSE_FRESNEL":case "DIFFUSE_MINNAERT":case "DIFFUSE_OREN_NAYAR":case "DIFFUSE_TOON":t=[Q("ldir","ldir",[0,0,0],!0),Q("lfac","lfac",[0,0],!0),Q("normal","normal",[0,0,0],!0),Q("norm_fac","norm_fac",0,!0),Q("dif_params","dif_params",[0,0],!0)];n=[Q("lfactor","lfactor",0,!0)];A.push(["MAT_USE_TBN_SHADING",b.use_tangent_shading|0]);break;case "SPECULAR_BLINN":case "SPECULAR_PHONG":case "SPECULAR_COOKTORR":t=[Q("ldir","ldir",[0,0,0],!0),Q("lfac","lfac",[0,0],!0),
Q("normal","normal",[0,0,0],!0),Q("norm_fac","norm_fac",0,!0),Q("sp_params","sp_params",[0,0],!0)];n=[Q("sfactor","sfactor",0,!0)];A.push(["MAT_USE_TBN_SHADING",b.use_tangent_shading|0]);break;case "SPECULAR_TOON":case "SPECULAR_WARDISO":t=[Q("ldir","ldir",[0,0,0],!0),Q("lfac","lfac",[0,0],!0),Q("normal","normal",[0,0,0],!0),Q("norm_fac","norm_fac",0,!0),Q("sp_params","sp_params",[0,0],!0)];n=[Q("sfactor","sfactor",0,!0)];A.push(["MAT_USE_TBN_SHADING",b.use_tangent_shading|0]);break;case "BSDF_COMPUTE":t=
[Q("ldir","ldir",[0,0,0],!0),Q("lfac","lfac",[0,0],!0),Q("normal","normal",[0,0,0],!0),Q("norm_fac","norm_fac",0,!0),Q("bsdf_params","bsdf_params",[0,0,0,0],!0)];n=[Q("lfactor","lfactor",0,!0),Q("sfactor","sfactor",0,!0)];break;case "LIGHTING_APPLY":t=[Q("color","color",[0,0,0,0],!0),Q("specular","specular",[0,0,0],!0),Q("lfactor","lfactor",0,!0),Q("sfactor","sfactor",0,!0),Q("ldir","ldir",[0,0,0],!0),Q("normal","normal",[0,0,0],!0),Q("translucency_params","translucency_params",[0,0,0,0],!0),Q("D",
"D",[0,0,0],!0),Q("S","S",[0,0,0],!0),Q("lcolorint","lcolorint",[0,0,0],!0),Q("translucency_color","translucency_color",0,!0)];n=[Q("color","color",[0,0,0,0],!0),Q("specular","specular",[0,0,0],!0)];break;case "NORMAL":t=ya(b);n=qa(b);var ca=ia(b,"Normal");u.push(na(Ga("param_NORMAL_Normal"),ca.mb,3));break;case "MAPPING":var U=b.vector_type;l="MAPPING";t.push(sa(b,"Vector"));n.push(ia(b,"Vector"));var W=r._1(b.rotation),X=r._1(b.scale),ea=r._1(b.translation),pa=d.create(),ha=r.Z(W,d.create());if("TEXTURE"==
U||"NORMAL"==U)X[0]=X[0]||1,X[1]=X[1]||1,X[2]=X[2]||1;d.multiply(ha,new Float32Array([X[0],0,0,0,X[1],0,0,0,X[2]]),pa);pa=r._23(pa,m.create());switch(U){case "POINT":pa[12]=ea[0];pa[13]=ea[1];pa[14]=ea[2];break;case "TEXTURE":pa[12]=ea[0];pa[13]=ea[1];pa[14]=ea[2];pa=m.invert(pa,pa);break;case "NORMAL":m.invert(pa,pa),m.transpose(pa,pa)}switch(U){case "NORMAL":A.push(["MAPPING_IS_NORMAL",1]);case "TEXTURE":A.push(["MAPPING_TRS_MATRIX_DEF",1]);A.push(["MAPPING_TRS_MATRIX",Wa.Ga(pa,16)]);break;case "POINT":0!==
p.length(W)?(A.push(["MAPPING_TRS_MATRIX_DEF",1]),A.push(["MAPPING_TRS_MATRIX",Wa.Ga(pa,16)])):(0!==p.sqrDist(X,r.n)&&(A.push(["MAPPING_SCALE_DEF",1]),A.push(["MAPPING_SCALE",Wa.Ga(X,3)])),0!==p.length(ea)&&(A.push(["MAPPING_TRANS_DEF",1]),A.push(["MAPPING_TRANS",Wa.Ga(ea,3)])));break;case "VECTOR":0!==p.length(W)?(A.push(["MAPPING_TRS_MATRIX_DEF",1]),A.push(["MAPPING_TRS_MATRIX",Wa.Ga(pa,16)])):0!==p.sqrDist(X,r.n)&&(A.push(["MAPPING_SCALE_DEF",1]),A.push(["MAPPING_SCALE",Wa.Ga(X,3)]))}b.use_min&&
(A.push(["MAPPING_MIN_CLIP_DEF",1]),A.push(["MAPPING_MIN_CLIP",Wa.Ga(b.min,3)]));b.use_max&&(A.push(["MAPPING_MAX_CLIP_DEF",1]),A.push(["MAPPING_MAX_CLIP",Wa.Ga(b.max,3)]));break;case "MATERIAL":case "MATERIAL_EXT":var kb=[],xa=[],za=[],Oa=[Q("E","E",[0,0,0],!0),Q("A","A",[0,0,0],!0),Q("D","D",[0,0,0],!0),Q("S","S",[0,0,0],!0),Q("normal","normal",[0,0,0],!0),Q("dif_params","dif_params",[0,0],!0),Q("sp_params","sp_params",[0,0],!0),Q("shadow_factor","shadow_factor",0,!0)],nb=[Q("color","color",[0,
0,0],!0),Q("specular","specular",[0,0,0],!0),Q("normal","normal",[0,0,0],!0)],Ia=[ia(b,"Color"),ia(b,"Alpha"),ia(b,"Normal")],eb=[],oa=sa(b,"Color");oa.mb.splice(3);za.push(oa);t.push(oa);oa=sa(b,"Spec");oa.mb.splice(3);za.push(oa);t.push(oa);(oa=sa(b,"DiffuseIntensity"))||(oa=sa(b,"Refl"));oa.mb=b.diffuse_intensity;za.push(oa);t.push(oa);var Fa=sa(b,"Normal");Fa.mb.splice(3);za.push(Fa);t.push(Fa);if("MATERIAL_EXT"==l){(oa=sa(b,"Emit"))||(oa=Q("Emit","Emit",0));za.push(oa);t.push(oa);(oa=sa(b,"Translucency"))?
(oa.mb=0,oa.name="Translucency",oa.identifier="Translucency"):oa=Q("Translucency","Translucency",0);t.push(oa);(oa=sa(b,"Translucency"))?(oa.mb=[0,0,0,0],oa.name="TranslucencyParams",oa.identifier="TranslucencyParams"):oa=Q("TranslucencyParams","TranslucencyParams",[0,0,0,0]);t.push(oa);var Kb=sa(b,"Reflectivity"),Da=sa(b,"Ray Mirror");if(Kb){oa=Kb;var tb="Reflectivity"}else Da?(oa=Da,tb="Ray Mirror"):(oa=Kb,tb="Reflectivity");oa||(oa=Q(tb,tb,0));t.push(oa);nb.push(oa);(oa=sa(b,"SpecTra"))||(oa=Q("SpecTra",
"SpecTra",0));t.push(oa);nb.push(oa);(oa=sa(b,"Alpha"))||(oa=Q("Alpha","Alpha",b.alpha));t.push(oa);nb.push(oa);Ia.push(ia(b,"Diffuse"));Ia.push(ia(b,"Spec"));kb.push(["MATERIAL_EXT",1]);xa.push(["MATERIAL_EXT",1])}else za.push(Q("emit_intensity","emit_intensity",0)),nb.push(Q("reflect_factor","reflect_factor",0)),nb.push(Q("specular_alpha","specular_alpha",0)),nb.push(Q("alpha_in","alpha_in",0)),Ia.push(Q("diffuse_out","diffuse_out",0)),Ia.push(Q("spec_out","spec_out",0)),kb.push(["MATERIAL_EXT",
0]),xa.push(["MATERIAL_EXT",0]);eb.push(na(Ga("param_MATERIAL_alpha"),b.alpha));eb.push(na(Ga("param_MATERIAL_spec_alpha"),b.specular_alpha));n=Ia;kb.push(["USE_MATERIAL_NORMAL",Fa.lb|0]);b.use_diffuse&&(kb.push(["USE_MATERIAL_DIFFUSE",1]),xa.push(["USE_MATERIAL_DIFFUSE",1]));b.use_specular&&xa.push(["USE_MATERIAL_SPECULAR",1]);var Ba=[],wb=0;switch(b.specular_shader){case "COOKTORR":case "PHONG":var Ea=b.specular_hardness;break;case "WARDISO":Ea=b.specular_slope;break;case "TOON":Ea=b.specular_toon_size;
wb=b.specular_toon_smooth;break;case "BLINN":Ea=b.specular_ior;wb=b.specular_hardness;break;default:Pa.error("unsupported specular shader: "+b.specular_shader+' (material "'+b.material_name+'")'),Ea=b.specular_hardness}var La;switch(b.diffuse_shader){case "LAMBERT":var ra=La=0;break;case "OREN_NAYAR":La=b.roughness;ra=0;break;case "FRESNEL":La=b.diffuse_fresnel;ra=b.diffuse_fresnel_factor;break;case "MINNAERT":La=b.darkness;ra=0;break;case "TOON":La=b.diffuse_toon_size;ra=b.diffuse_toon_smooth;break;
default:Pa.error("unsupported diffuse shader: "+b.diffuse_shader+' (material "'+b.material_name+'")'),ra=La=0}Ba.push(na(Ga("param_MATERIAL_diffuse"),[La,ra],2));Ba.push(na(Ga("param_MATERIAL_spec"),[b.specular_intensity,Ea,wb],3));kb.push(["SHADELESS_MAT",b.use_shadeless?1:0]);var Aa={name:b.name,value:{Pf:b.specular_shader,Ff:b.diffuse_shader,bd:b.use_shadeless,Se:b.use_tangent_shading}};v={name:b.name,value:{Pf:b.specular_shader,Ff:b.diffuse_shader,bd:b.use_shadeless,Se:b.use_tangent_shading},
OR:{name:"material_begin",type:"MATERIAL_BEGIN",inputs:za,outputs:Oa,Oa:Ba,data:Aa,Jb:kb,xf:[]},PR:{name:"material_end",type:"MATERIAL_END",inputs:nb,outputs:Ia,Oa:eb,data:Aa,Jb:xa,xf:[]}};break;case "BSDF_PRINCIPLED":t=ya(b);var Za=sa(b,"Base Color"),Ua=sa(b,"Metallic"),Ka=sa(b,"Roughness"),Va=sa(b,"IOR"),Xa=sa(b,"Transmission"),Sa=sa(b,"Normal");t=[Za,Ua,Ka,Va,Xa,Sa];A.push(["USE_NORMAL_IN",Sa.lb|0]);var Ya=ia(b,"BSDF"),Ja=Ya.lb;n=[Ya,Q("d_color","d_color",[0,0,0],Ja),Q("d_roughness","d_roughness",
0,Ja),Q("s_color","s_color",[0,0,0],Ja),Q("s_roughness","s_roughness",0,Ja),Q("metalness","metalness",1,Ja),Q("normal","normal",[0,0,0],Ja),Q("ior","ior",0,Ja),Q("transmission","transmission",0,Ja),Q("e_color","e_color",[0,0,0],Ja),Q("emisson","emisson",0,Ja),Q("a_color","a_color",[0,0,0],Ja),Q("alpha","alpha",1,Ja)];v={value:{xV:Xa.lb||Xa.mb}};break;case "BSDF_DIFFUSE":t=ya(b);A.push(["USE_NORMAL_IN",t[2].lb|0]);Ya=ia(b,"BSDF");Ja=Ya.lb;n=[Ya,Q("d_color","d_color",[0,0,0],Ja),Q("d_roughness","d_roughness",
0,Ja),Q("s_color","s_color",[0,0,0],Ja),Q("s_roughness","s_roughness",0,Ja),Q("metalness","metalness",0,Ja),Q("normal","normal",[0,0,0],Ja),Q("ior","ior",0,Ja),Q("transmission","transmission",0,Ja),Q("e_color","e_color",[0,0,0],Ja),Q("emisson","emisson",0,Ja),Q("a_color","a_color",[0,0,0],Ja),Q("alpha","alpha",1,Ja)];break;case "BSDF_GLOSSY":t=ya(b);A.push(["USE_NORMAL_IN",t[2].lb|0]);Ya=ia(b,"BSDF");Ja=Ya.lb;n=[Ya,Q("d_color","d_color",[0,0,0],Ja),Q("d_roughness","d_roughness",0,Ja),Q("s_color",
"s_color",[0,0,0],Ja),Q("s_roughness","s_roughness",0,Ja),Q("metalness","metalness",1,Ja),Q("normal","normal",[0,0,0],Ja),Q("ior","ior",0,Ja),Q("transmission","transmission",0,Ja),Q("e_color","e_color",[0,0,0],Ja),Q("emisson","emisson",0,Ja),Q("a_color","a_color",[0,0,0],Ja),Q("alpha","alpha",1,Ja)];break;case "BSDF_TRANSPARENT":var ib=b.b4w_use_alpha;t=ya(b);Ya=ia(b,"BSDF");Ja=Ya.lb;n=[Ya,Q("d_color","d_color",[0,0,0],Ja),Q("d_roughness","d_roughness",0,Ja),Q("s_color","s_color",[0,0,0],Ja),Q("s_roughness",
"s_roughness",0,Ja),Q("metalness","metalness",0,Ja),Q("normal","normal",[0,0,0],Ja),Q("ior","ior",0,Ja),Q("transmission","transmission",0,Ja),Q("e_color","e_color",[0,0,0],Ja),Q("emisson","emisson",0,Ja),Q("a_color","a_color",[0,0,0],Ja),Q("alpha","alpha",ib?0:1,Ja)];v={value:{pV:ib}};A.push(["USE_ALPHA",ib|0]);break;case "EMISSION":t=ya(b);var xd=ia(b,"Emission"),Cc=xd.lb;n=[xd,Q("d_color","d_color",[0,0,0],Cc),Q("d_roughness","d_roughness",0,Cc),Q("s_color","s_color",[0,0,0],Cc),Q("s_roughness",
"s_roughness",0,Cc),Q("metalness","metalness",1,Cc),Q("normal","normal",[0,0,0],Cc),Q("ior","ior",0,Ja),Q("transmission","transmission",0,Ja),Q("e_color","e_color",[0,0,0],Cc),Q("emisson","emisson",1,Cc),Q("a_color","a_color",[0,0,0],Ja),Q("alpha","alpha",1,Ja)];break;case "MATH":switch(b.operation){case "ADD":l="MATH_ADD";break;case "SUBTRACT":l="MATH_SUBTRACT";break;case "MULTIPLY":l="MATH_MULTIPLY";break;case "DIVIDE":l="MATH_DIVIDE";break;case "SINE":l="MATH_SINE";break;case "COSINE":l="MATH_COSINE";
break;case "TANGENT":l="MATH_TANGENT";break;case "ARCSINE":l="MATH_ARCSINE";break;case "ARCCOSINE":l="MATH_ARCCOSINE";break;case "ARCTANGENT":l="MATH_ARCTANGENT";break;case "POWER":l="MATH_POWER";break;case "LOGARITHM":l="MATH_LOGARITHM";break;case "MINIMUM":l="MATH_MINIMUM";break;case "MAXIMUM":l="MATH_MAXIMUM";break;case "ROUND":l="MATH_ROUND";break;case "LESS_THAN":l="MATH_LESS_THAN";break;case "GREATER_THAN":l="MATH_GREATER_THAN";break;case "MODULO":l="MATH_MODULO";break;case "ABSOLUTE":l="MATH_ABSOLUTE";
break;default:return Pa.error("Unsupported MATH operation: "+b.operation),null}A.push(["MATH_USE_CLAMP",Number(b.use_clamp)]);t=ya(b);n=qa(b);break;case "MIX_RGB":switch(b.blend_type){case "MIX":l="MIX_RGB_MIX";break;case "ADD":l="MIX_RGB_ADD";break;case "MULTIPLY":l="MIX_RGB_MULTIPLY";break;case "SUBTRACT":l="MIX_RGB_SUBTRACT";break;case "SCREEN":l="MIX_RGB_SCREEN";break;case "DIVIDE":l="MIX_RGB_DIVIDE";break;case "DIFFERENCE":l="MIX_RGB_DIFFERENCE";break;case "DARKEN":l="MIX_RGB_DARKEN";break;case "LIGHTEN":l=
"MIX_RGB_LIGHTEN";break;case "OVERLAY":l="MIX_RGB_OVERLAY";break;case "DODGE":l="MIX_RGB_DODGE";break;case "BURN":l="MIX_RGB_BURN";break;case "HUE":l="MIX_RGB_HUE";break;case "SATURATION":l="MIX_RGB_SATURATION";break;case "VALUE":l="MIX_RGB_VALUE";break;case "COLOR":l="MIX_RGB_COLOR";break;case "SOFT_LIGHT":l="MIX_RGB_SOFT_LIGHT";break;case "LINEAR_LIGHT":l="MIX_RGB_LINEAR_LIGHT";break;default:return Pa.error("Unsupported MIX_RGB blend type: "+b.blend_type),null}A.push(["MIX_RGB_USE_CLAMP",Number(b.use_clamp)]);
t=ya(b);n=qa(b);break;case "MIX_WORLD_RGB":case "ADD_WORLD_RGB":t=[Q("Factor","Factor",b.fac,b.fac_is_linked),Q("Color1","Color1",[0,0,0],b.color1_is_linked),Q("Color2","Color1",[0,0,0],b.color2_is_linked)];n=[Q("Color","Color",[0,0,0],!0)];break;case "OUTPUT":t=ya(b);n=[];break;case "OUTPUT_MATERIAL":t=ya(b);n=[];var bd=sa(b,"Surface"),fc=bd.lb,nd={name:"output_surface",type:"OUTPUT_SURFACE",inputs:[bd,Q("alpha","alpha",1,fc)],outputs:[],Oa:[],data:{value:{QM:"BSDF_COMPUTE"},OM:{name:"bsdf_begin",
type:"BSDF_BEGIN",inputs:[bd,Q("d_color","d_color",[0,0,0],fc),Q("d_roughness","d_roughness",0,fc),Q("s_color","s_color",[0,0,0],fc),Q("s_roughness","s_roughness",0,fc),Q("metalness","metalness",0,fc),Q("normal","normal",[0,0,0],fc),Q("ior","ior",0,fc),Q("transmission","transmission",0,fc),Q("e_color","e_color",[0,0,0],fc),Q("emission","emission",0,fc),Q("a_color","a_color",[0,0,0],fc),Q("alpha","alpha",0,fc)],outputs:[Q("E","E",[0,0,0],!0),Q("A","A",[0,0,0],!0),Q("D","D",[0,0,0],!0),Q("S","S",[0,
0,0],!0),Q("normal","normal",[0,0,0],!0),Q("bsdf_params","bsdf_params",[0,0,0,0],!0),Q("refract_params","refract_params",[0,0,0,0],!0),Q("shadow_factor","shadow_factor",0,!0),Q("d_color","d_color",[0,0,0],!0),Q("s_color","s_color",[0,0,0],!0),Q("e_color","e_color",[0,0,0],!0),Q("emission","emission",0,!0),Q("a_color","a_color",[0,0,0],!0),Q("alpha","alpha",0,!0)],Oa:[],data:null,Jb:[],xf:[]},PM:{name:"bsdf_end",type:"BSDF_END",inputs:[Q("color","color",[0,0,0],!0),Q("specular","specular",[0,0,0],
!0),Q("normal","normal",[0,0,0],!0),Q("bsdf_params","bsdf_params",[0,0,0,0],!0),Q("refract_params","refract_params",[0,0,0,0],!0),Q("d_color","d_color",[0,0,0],!0),Q("s_color","s_color",[0,0,0],!0),Q("e_color","e_color",[0,0,0],!0),Q("emission","emission",0,!0),Q("a_color","a_color",[0,0,0],!0),Q("alpha","alpha",0,!0)],outputs:[Q("color","color",[0,0,0],fc),Q("alpha","alpha",1,fc)],Oa:[],data:null,Jb:[],xf:[]}},Jb:[],xf:[]};v={name:b.name,kS:nd,VO:{name:"displacement_bump",type:"DISPLACEMENT_BUMP",
inputs:[Q("Height","Height",0,!0)],outputs:[Q("Normal","Normal",[0,0,0],!1)],Oa:[],data:null,Jb:[],xf:[]}};break;case "OUTPUT_WORLD":t=ya(b);n=qa(b);bd=sa(b,"Surface");nd={name:"output_world_surface",type:"OUTPUT_WORLD_SURFACE",inputs:[bd],outputs:[],Oa:[],data:null,Jb:[],xf:[]};v={name:b.name,lS:nd};break;case "RGB":var yd=b.name,cd={name:"-1",value:yd};u.push(cd);n.push(ia(b,"Color"));break;case "SEPRGB":case "SEPHSV":t=ya(b);n=qa(b);break;case "TEX_ENVIRONMENT":var Pc=b.image;if(Pc){l="TEXTURE_ENVIRONMENT_"+
b.projection;"NONE"==b.color_space?A.push(["NON_COLOR",1]):A.push(["NON_COLOR",0]);t.push(sa(b,"Vector"));A.push(["USE_VECTOR_IN",t[0].lb|0]);n.push(ia(b,"Color"));V=Ga("param_TEXTURE_texture");u.push(na(V));var ic=hb.Sj(hb.Xh,!1);ic.repeat=!0;ic.source="IMAGE";Pb.Zy&&(ic.anisotropic_filtering=16);hb.OD(ic,Pc);v={Rq:b.name,ku:"",name:V,value:ic}}else l="TEXTURE_EMPTY";break;case "TEX_IMAGE":if(Pc=b.image){l="TEXTURE_COLOR";"NONE"==b.color_space?A.push(["NON_COLOR",1]):A.push(["NON_COLOR",0]);A.push(["CONVERT_UV",
0]);for(var Rb=0;4>Rb;++Rb){if(Rb){oa=Q("Vector"+Rb,"Vector"+Rb,[0,0,0],!1);var od=Q("Color"+Rb,"Color"+Rb,[0,0,0],!1);var pd=Q("Alpha"+Rb,"Alpha"+Rb,0,!1)}else oa=sa(b,"Vector"),od=ia(b,"Color"),pd=ia(b,"Alpha");t.push(oa);n.push(od);n.push(pd)}V=Ga("param_TEXTURE_texture");u.push(na(V));ic=hb.Sj(hb.Xh,!1);ic.repeat="REPEAT"==b.extension;ic.source="IMAGE";hb.OD(ic,Pc);v={Rq:b.name,ku:"",name:V,value:ic}}else l="TEXTURE_EMPTY";break;case "TEXTURE":l=la(b);if("TEXTURE_EMPTY"==l)n.push(ia(b,"Color")),
n.push(ia(b,"Normal")),n.push(ia(b,"Value"));else if("TEXTURE_ENVIRONMENT_CUBE"==l)t.push(sa(b,"Vector")),n.push(ia(b,"Color")),n.push(ia(b,"Value"));else{if("TEXTURE_NORMAL"==l&&"ENVIRONMENT_MAP"==b.texture.type)return Pa.error("Wrong output for ENVIRONMENT_MAP texture: "+b.name),null;if("TEXTURE_COLOR"==l){var xc=!1,pc=b.texture.image;!pc||"Non-Color"!=pc.colorspace_settings_name&&"Non-Colour Data"!=pc.colorspace_settings_name||(xc=!0);A.push(["NON_COLOR",Number(xc)]);A.push(["CONVERT_UV",1])}for(Rb=
0;4>Rb;++Rb){var Mb="TEXTURE_COLOR"==l?"Color":"Normal";Rb?(oa=Q("Vector"+Rb,"Vector"+Rb,[0,0,0],!1),od=Q(Mb+Rb,Mb+Rb,[0,0,0],!1),pd=Q("Value"+Rb,"Value"+Rb,0,!1)):(oa=sa(b,"Vector"),od=ia(b,Mb),pd=ia(b,"Value"));t.push(oa);n.push(od);n.push(pd)}}"TEXTURE_EMPTY"!=l&&(V=Ga("param_TEXTURE_texture"),u.push(na(V)),ic=b.texture.sa,v={Rq:b.texture.name,ku:b.texture.uuid,name:V,value:ic});break;case "VALTORGB":t=ya(b);n=qa(b);v={value:b};var Qc=b.color_ramp.interpolation;"CONSTANT"!=Qc&&"LINEAR"!=Qc&&Pa.warn("Color Ramp node is not fully supported.");
break;case "VALUE":l="VALUE";yd=b.name;cd={name:"-1",value:yd};u.push(cd);n.push(ia(b,"Value"));break;case "VECT_MATH":switch(b.operation){case "ADD":l="VECT_MATH_ADD";break;case "SUBTRACT":l="VECT_MATH_SUBTRACT";break;case "AVERAGE":l="VECT_MATH_AVERAGE";break;case "DOT_PRODUCT":l="VECT_MATH_DOT_PRODUCT";break;case "CROSS_PRODUCT":l="VECT_MATH_CROSS_PRODUCT";break;case "NORMALIZE":l="VECT_MATH_NORMALIZE";break;default:return Pa.error("Unsupported VECT_MATH operation: "+b.operation),null}t=ya(b);
n=qa(b);break;case "VECT_TRANSFORM":switch(b.vector_type){case "POINT":A.push(["VECTOR_TYPE",Wa.Ga(0)]);break;case "VECTOR":A.push(["VECTOR_TYPE",Wa.Ga(1)]);break;case "NORMAL":A.push(["VECTOR_TYPE",Wa.Ga(2)]);break;default:return Pa.error("Unsupported VECT_TRANSFORM vector_type: "+b.vector_type),null}var Jc=b.convert_from,mc=b.convert_to,qc=0;if("WORLD"==Jc)if("WORLD"==mc)qc=0;else if("OBJECT"==mc)qc=1;else if("CAMERA"==mc)qc=2;else return Pa.error("Unsupported VECT_TRANSFORM convert_to: "+b.convert_to),
null;else if("OBJECT"==Jc)if("WORLD"==mc)qc=3;else if("OBJECT"==mc)qc=4;else if("CAMERA"==mc)qc=5;else return Pa.error("Unsupported VECT_TRANSFORM convert_to: "+b.convert_to),null;else if("CAMERA"==Jc)if("WORLD"==mc)qc=6;else if("OBJECT"==mc)qc=7;else if("CAMERA"==mc)qc=8;else return Pa.error("Unsupported VECT_TRANSFORM convert_to: "+b.convert_to),null;else return Pa.error("Unsupported VECT_TRANSFORM convert_from: "+b.convert_from),null;A.push(["CONVERT_TYPE",Wa.Ga(qc)]);t=ya(b);n=qa(b);break;case "NORMAL_MAP":var jc=
0;switch(b.space){case "TANGENT":jc=0;break;case "OBJECT":jc=1;break;case "WORLD":jc=2;break;case "BLENDER_OBJECT":jc=3;break;case "BLENDER_WORLD":jc=4;break;default:return Pa.error("Unsupported NORMAL_MAP space: "+b.space),null}A.push(["SPACE",Wa.Ga(jc)]);t.push(sa(b,"Strength"));t.push(sa(b,"Color"));t.push(Q("Normal","Normal",[0,0,0],!1));A.push(["USE_NORMAL_IN",0]);n.push(ia(b,"Normal"));break;case "FRESNEL":Fa=sa(b,"Normal");t.push(sa(b,"IOR"));t.push(Fa);n.push(ia(b,"Fac"));A.push(["USE_FRESNEL_NORMAL",
Fa.lb|0]);break;case "LAYER_WEIGHT":Fa=sa(b,"Normal");t.push(sa(b,"Blend"));t.push(Fa);n=qa(b);A.push(["USE_NORMAL_IN",Fa.lb|0]);break;case "BUMP":Fa=sa(b,"Normal");A.push(["INVERT",b.invert?1:0]);A.push(["USE_NORMAL_IN",Fa.lb|0]);t=ya(b);n=qa(b);break;case "BACKGROUND":t=ya(b);n=qa(b);break;default:t=ya(b),n=qa(b)}var Dc={name:k,oe:f,type:l,xf:q,inputs:t,outputs:n,Oa:u,data:v,Jb:A},uc=fa.ak(a);fa.Zh(a,uc,Dc);var Sb;if(!(Sb="GEOMETRY"!=b.type&&"TEX_COORD"!=b.type&&"NEW_GEOMETRY"!=b.type)){a:{for(var jd=
b.outputs,vb=0,$b=0;$b<jd.length;$b++)if(jd[$b].is_linked&&vb++>c){var Nb=!0;break a}Nb=!1}Sb=!Nb}return Sb||null!=S(a,b,++c,g,e,h)?uc:null}function Na(a,b,c){for(var g=a.inputs,e=a.outputs,h=a.node_tree_name,d=0;d<b.length;d++){var k=g[d],f=b[d];if(!k||k.default_value instanceof Array!=f)return Pa.warn('Wrong inputs for custom node group "'+a.name+'" of type: "',h,'".Processing as general node group.'),!1}for(d=0;d<c.length;d++)if(b=e[d],g=c[d],!b||b.default_value instanceof Array!=g)return Pa.warn('Wrong outputs for custom node group "'+
a.name+'" of type: "',h,'".Processing as general node group.'),!1;return!0}function wa(a,b,c,e){var h=a.node_group.node_tree,d={};for(q in h)if("links"==q||"nodes"==q){d[q]=[];for(var f=0;f<h[q].length;f++){d[q][f]={};for(var l in h[q][f])if("links"==q){d[q][f][l]={};for(var m in h[q][f][l])d[q][f][l][m]=X(h[q][f][l][m])}else d[q][f][l]=X(h[q][f][l])}}else d[q]=X(h[q]);f=a.node_tree_name;if("B4W_REPLACE"==f||"B4W_LEVELS_OF_QUALITY"==f){h=ea("Group input","GROUP_INPUT",[],a.inputs);var q=ea("Group output",
"GROUP_OUTPUT",a.outputs,[]);f="B4W_REPLACE"==f||"B4W_LEVELS_OF_QUALITY"==f&&(Pb.quality==Sa.P_LOW||Pb.BF)?{from_node:h,from_socket:h.outputs[1],to_node:q,to_socket:q.inputs[0]}:{from_node:h,from_socket:h.outputs[0],to_node:q,to_socket:q.inputs[0]};d.nodes=[h,q];d.links=[f]}h=a.name;q=d.nodes;f=d.links;for(l=0;l<q.length;l++)q[l].name=g(q[l].type,h,q[l].name);for(l=0;l<f.length;l++)f[l].from_node.name=g(f[l].from_node.type,h,f[l].from_node.name),f[l].to_node.name=g(f[l].to_node.type,h,f[l].to_node.name);
return{dS:k(d,a.node_group.uuid,!0,b,c,e).Ya,eS:d.links}}function X(a){var b=typeof a;return"string"!=b&&"number"!=b&&"boolean"!=b&&a?r.N(a):a}function Ga(a){ib[a]||(ib[a]=0);var b=a+"_"+ib[a];b=b.replace(/ /g,"_").replace(/\//g,"_");ib[a]++;return b}function Ha(a){a=a.outputs;for(var b=0;b<a.length;b++)if(a[b].is_linked)return!0;return!1}function ua(a,b){a=a.outputs;for(var c=0,g=0;g<a.length;g++){var e=a[g];if(e.is_linked&&!(c++<b))switch(e.identifier){case "UV":return"GEOMETRY_UV";case "Vertex Color":return"GEOMETRY_VC";
case "Normal":return"GEOMETRY_NO";case "True Normal":return"GEOMETRY_TRN";case "Front/Back":return"GEOMETRY_FB";case "View":return"GEOMETRY_VW";case "Global":case "Position":return"GEOMETRY_GL";case "Local":return"GEOMETRY_LO";case "Orco":return"GEOMETRY_OR";case "Incoming":return"GEOMETRY_IN";case "Backfacing":return"GEOMETRY_BF";default:return null}}}function Ca(a,b){a=a.outputs;for(var c=0,g=0;g<a.length;g++){var e=a[g];if(e.is_linked&&!(c++<b))switch(e.identifier){case "Camera":return"TEX_COORD_CA";
case "Generated":return"TEX_COORD_GE";case "Normal":return"TEX_COORD_NO";case "Object":return"TEX_COORD_OB";case "Reflection":return"TEX_COORD_RE";case "UV":return"TEX_COORD_UV";case "Window":return"TEX_COORD_WI";default:return null}}}function la(a){if(!a.texture||!a.texture.sa)return"TEXTURE_EMPTY";for(var b=a.outputs,c=!1,g=!1,e=!1,h=0;h<b.length;h++){var d=b[h];if(d.is_linked)switch(d.identifier){case "Color":c=!0;break;case "Normal":g=!0;break;case "Value":e=!0;break;default:Ya.va("Unknown texture output")}}if(c)return g&&
Pa.warn('Node "'+a.name+'" has both Color and Normal outputs. Normal will be omitted.'),"ENVIRONMENT_MAP"==a.texture.type?"TEXTURE_ENVIRONMENT_CUBE":"TEXTURE_COLOR";if(g)return"TEXTURE_NORMAL";if(e)return"ENVIRONMENT_MAP"==a.texture.type?"TEXTURE_ENVIRONMENT_CUBE":"TEXTURE_COLOR"}function sa(a,b){a=a.inputs;for(var c=0;c<a.length;c++){var g=a[c];if(g.identifier==b)return ra(g)}return null}function ia(a,b){a=a.outputs;for(var c=0;c<a.length;c++){var g=a[c];if(g.identifier==b)return ra(g)}return null}
function ra(a){var b=a.name,c=a.identifier,g=a.is_linked;a=a.default_value;a=r._16(a)?a.slice(0):a;return{name:b,identifier:c,lb:g,mb:a}}function Q(a,b,c,g){return{name:a,identifier:b,lb:g,mb:c}}function Aa(a){return Q(a.name,a.identifier,a.mb,a.lb)}function ya(a){for(var b=[],c=0;c<a.inputs.length;c++){var g=ra(a.inputs[c]);g.mb.length&&g.mb.splice(3);b.push(g)}return b}function qa(a){for(var b=[],c=0;c<a.outputs.length;c++){var g=ra(a.outputs[c]);b.push(g)}return b}function na(a,b,c){b=null===b||
void 0===b?null:Wa.Ga(b,c);return{name:a,value:b}}function xa(a){return{name:a.name,value:a.value}}function za(a){return a.slice()}function Fa(a,b,c,g,e,h){var d=[],k=h.from_socket.identifier;h=h.to_socket.identifier;var f=g.outputs;for(g=0;g<f.length;g++)if(f[g].identifier==k){d.push(g);break}e=e.inputs;for(g=0;g<e.length;g++)if(e[g].identifier==h){d.push(g);break}2==d.length&&fa.gd(a,b,c,d);return!0}function g(a,b,c){return"GROUP_INPUT"==a?b+"*GI*"+c:"GROUP_OUTPUT"==a?b+"*GO*"+c:b+"%join%"+c}function Ba(a){var b=
[];fa.Na(a,function(a,c){"GROUP"==c.type&&b.push(c)});return b}function Va(a,b,c){for(var g=0;g<c.length;g++){var e=c[g].data.dS,h=c[g].data.eS;if(!e)return!1;fa.Na(e,function(b,c){fa.Zh(a,fa.ak(a),c)});for(e=0;e<h.length;e++)b.push(h[e]);W(c[g],b,a)}return!0}function Xa(a,b,c,g,e,h){switch(a.type){case "GROUP":a.name==b&&g.push(c);break;case "GROUP_INPUT":a.name.indexOf(b+"*GI*")||e.push(c);break;case "GROUP_OUTPUT":a.name.indexOf(b+"*GO*")||h.push(c)}}function Ea(a,b,c){for(var g=[],e=0;e<c.length;e++){for(var h=
c[e],d=null,k=0;k<b.length;k++)if(h.from_socket.identifier==b[k].to_socket.identifier){d=b[k];break}d?(h.from_node=d.from_node,h.from_socket=d.from_socket):g.push(h)}for(e=0;e<b.length;e++)a.splice(a.indexOf(b[e]),1);return g}function Za(a,b){if(b.length)for(var c=b[0].from_node.name,g=0;g<a.length;g++)a[g].from_node.name==c&&b.push(a[g])}function Ua(a,b,c,g){for(var e=0;e<g.length;e++){for(var h=g[e],d,k=0;k<c.inputs.length;k++)if(h.from_socket.identifier==c.inputs[k].identifier){d=c.inputs[k].mb;
break}k=h;for(var f=b,l=d,m=J(k.to_node,f),q=0;q<m.length;q++)for(var t=fa.Kb(f,m[q]),n=0;n<t.inputs.length;n++){var u=t.inputs[n];if(u.identifier==k.to_socket.identifier){t=u.mb instanceof Object?0:1;if((l instanceof Object?0:1)==t)u.mb=l;else switch(t){case 0:u=u.mb;u[0]=u[1]=u[2]=l;break;case 1:u.mb=(l[0]+l[1]+l[2])/3}break}}h=a.indexOf(h);-1!=h&&a.splice(h,1)}}function W(a,b,c){for(var g=a.name,e=[],h=[],d=[],k=[],f=0;f<b.length;f++){var l=b[f];Xa(l.from_node,g,l,e,d,k);Xa(l.to_node,g,l,h,d,k)}h=
Ea(b,h,d);e=Ea(b,k,e);Za(b,h);Ua(b,c,a,h);if(e.length){var m;fa.Na(c,function(a,b){"GROUP_OUTPUT"!=b.type||b.name.indexOf(g+"*GO*")||(m=b)});Ua(b,c,m,e)}}function La(a){var b=[],c=[];fa.Na(a,function(a,g){switch(g.type){case "VALTORGB":b.push(g);break;case "CURVE_VEC":case "CURVE_RGB":c.push(g)}});var g=0,e=a=null,h=b.length+c.length;if(b.length){a=hb.iP(b,hb.NJ);for(var d=0;d<b.length;d++)b[d].Jb.push(["NODE_TEX_ROW",Wa.Ga((g+.5)/h)]),g++}if(c.length)for(e=hb.mP(c,hb.YC),d=0;d<c.length;d++)c[d].Jb.push(["NODE_TEX_ROW",
Wa.Ga((g+.5)/h)]),g++;d=null;a&&e?(d=new Uint8Array(a.length+e.length),d.set(a),d.set(e,a.length)):d=a?a:e;a=d?hb.UE(d,hb.YC):null;for(d=0;d<b.length;d++)b[d].data.yb=a;for(d=0;d<c.length;d++)c[d].data.yb=a}function Ab(a,b,c,g){a=a.curve_mapping.curves_data[b];return 2==a.length&&a[0][0]<c+.01&&a[0][1]<c+.01&&a[1][0]>g-.01&&a[1][1]>g-.01?!1:!0}var Ya=Object(N.a)(a),Sa=Object(U.a)(a),Ka=Object(n.a)(a),fa=Object(y.a)(a),Pa=Object(C.a)(a),Wa=Object(v.a)(a),hb=Object(z.a)(a),ib={},Ja={},eb={},bb={},Vb=
0,Pb=Sa.wa;f.mW=0;f.CD=1;f.BD=2;f.AD=3;f.lW=4;f.zD=5;f.yD=6;f.xD=7;f.kW=8;f.FK=0;f.EK=1;f.eW=2;f.DK=3;f.dW=4;f.tv=function(a){return Ja[a]};f.nN=function(a){delete Ja[a]};f.NE=function(a,b,c,g,e){return k(a,b,!1,c,g,e)};f.wz=function(a,b,c){if(a in eb)return eb[a];var g=fa.create(),e={name:"LIGHTING_BEGIN",type:"LIGHTING_BEGIN"},h=S(g,e,0,null,null,c);e={name:"LIGHTING_END",type:"LIGHTING_END"};e=S(g,e,0,null,null,c);l(g,b,h,e,[[h,[8,10]],[h,[9,6]]],c);T(g);return eb[a]=g};f.IP=function(a,b,c,g){a+=
c;switch(b){case "GLOW":a+="11";case "COLOR_ID":case "SHADOW":a+="00";default:a+="10"}g&&g.NC&&(a+=g.NC);g&&g.MC&&(a+=g.MC);return a};f.fr=function(a){var b=[],c={};ib={};var g=fa.tC(a);fa.Na(g,function(a,g){for(var e=[],h=[],d=[],k=[],f=[],l=[],m=0;m<g.inputs.length;m++){var q=g.inputs[m];if(q.lb)e.push(null),h.push(null);else{e.push(Ga("in_"+g.type+"_"+q.identifier.replace(/\./g,"")));var t=Wa.Ga(q.mb,0);Pb.XB&&(0<=g.type.indexOf("MIX_RGB_")&&("Color1"==q.identifier||"Color2"==q.identifier||"Fac"==
q.identifier)||0<=g.type.indexOf("MATH_")&&("Value"==q.identifier||"Value_001"==q.identifier||"Value.001"==q.identifier)||0<=g.type.indexOf("VECT_MATH_")&&("Vector_001"==q.identifier||"Vector.001"==q.identifier)||0<=g.type.indexOf("LIGHTING_APPLY")||0<=g.type.indexOf("MATERIAL_END")||0<=g.type.indexOf("MATERIAL_BEGIN"))&&(q=t,q=q.replace(/(,)/g,"$1 "),q=q.replace(/(^|[^0-9]|\s)(0\.0)($|[^0-9]|\s)/g,"$1_0_0$3"),q=q.replace(/(^|[^0-9]|\s)(1\.0)($|[^0-9]|\s)/g,"$1_1_0$3"),t=q=q.replace(/\s+/g,""));h.push(t)}}for(m=
0;m<g.outputs.length;m++)q=g.outputs[m],q.lb?d.push(null):d.push(Ga("out_"+g.type+"_"+q.identifier.replace(/\./g,"")));for(m=0;m<g.Oa.length;m++)q=g.Oa[m],k.push(q.name),f.push(q.value);for(m=0;m<g.xf.length;m++)l.push(g.xf[m].name);g={id:g.type,inputs:e,BA:h,outputs:d,Oa:k,qp:f,xf:l,Jb:JSON.parse(JSON.stringify(g.Jb))};b.push(g);c[a]=g});fa.Th(g,function(a,b,e){var h=fa.Kb(g,a),d=h.outputs[e[0]];a=c[a].outputs;b=c[b].inputs;h=a[e[0]]||Ga("out_"+h.type+"_"+d.identifier.replace(/\./g,""));a[e[0]]=
h;b[e[1]]=h});return b};f.sE=function(a){if(a.ne)for(var b=0;b<a.ne.nodes.length;b++){var c=a.ne.nodes[b];if("GROUP"==c.type&&"B4W_GLOW_OUTPUT"==c.node_tree_name)return!0}return!1};f.vY=function(a,b,c){Pa.log("\n====== USER: "+b+", MATERIAL: "+c+" ======\n"+Ka.fS(a)+"\n=============================================================")};f.cleanup=function(){for(var a in Ja)delete Ja[a];for(a in eb)delete eb[a];for(var b in bb)delete bb[b];Vb=0};f.sQ=function(a){var b=-1;fa.Na(a,function(a,c){if("TEXTURE_ENVIRONMENT_EQUIRECTANGULAR"==
c.type||"TEXTURE_ENVIRONMENT_MIRROR_BALL"==c.type)b=Math.max(b,c.data.value.height)});return b}});w.a=f},function(D,w,f){D=f(0);var N=f(1),U=f(2);f=Object(D.a)("__debug_telemetry",function(f,y){var d=Object(N.a)(f),m=[],n={},v=["color: #3366FF","color: #CC33FF","color: #FF3366","color: #33FF66","color: #FFCC33"];y.fbmsg=function(){for(var d=[performance.now()],f=0;f<arguments.length;f++){var n=arguments[f];if(U._16(n))for(var a=0;a<n.length;a++)d.push(n[a]);else d.push(arguments[f])}m.push(d)};y.msg=
function(){for(var d=1,f=0;f<m.length;f++){var n=m[f];n[1]==arguments[0]&&d++}n=[d];for(f=0;f<arguments.length;f++)if(d=arguments[f],U._16(d))for(var a=0;a<d.length;a++)n.push(d[a]);else n.push(arguments[f]);m.push(n)};y.print_telemetry=function(f){f||(f=1);for(var n=0,r={},a=Math.max(0,performance.now()-1E3*f),y=0;y<m.length;y++){var k=m[y];f=k[0];if(!(f<a)){var c=String(k[1]);r[c]||(r[c]=v[n++%v.length]);f=["%c"+(f/1E3).toFixed(6),r[c],c];for(c=2;c<k.length;c++)f.push(k[c]);d.log.apply(this,f)}}m.splice(0)};
y.plot_telemetry=function(f){f||(f=1);for(var n={},r=Math.max(0,performance.now()-1E3*f),a=0;a<m.length;a++){var v=m[a];f=v[0];if(!(f<r))for(var k=2;k<v.length;k++){var c=String(v[1]);3<v.length&&(c+="_"+String(k-2));n[c]||(n[c]=c+"\n");n[c]+=String(f)+" "+v[k]+"\n"}}f="";for(c in n)f+=n[c]+"\n\n";d.log(f);m.splice(0)};y.oX=function(d){n[d]=d in n?n[d]+1:1};y.update=function(){for(var f in n)d.log(f,n[f]),n[f]=0}});w.a=f},function(D,w,f){D=f(0);var N=f(5),U=f(4),n=f(20),y=f(36),d=f(2);f=Object(D.a)("__primitives",
function(f,C){function m(a,b,c,d){for(var h=[],f=[],l=[],m=a*b,n=2*c/(a-1),r=2*d/(b-1),p=0;p<a;p++)for(var v=-c+p*n,z=0;z<b;z++)if(f.push(v,-d+z*r,0),l.push(p/(a-1),z/(b-1)),p&&z){var C=p*b+z,G=C-1,w=(p-1)*b+z,A=w-1;h.push(C,G,w);h.push(G,A,w)}a=k.Si();a.a_position=new Float32Array(f);a.a_tbn=y.c(m);m=k.Gh("GRID_PLANE");m.Va[0]=a;m.hb.a_texcoord=new Float32Array(l);m.ab=new Uint32Array(h);m.Gb=f.length/3;return m}function r(c){var b=c.length;b%4&&a.va("Wrong array");for(var h=[],d=[],f=0;f<b;f+=4){var l=
c[f+1],m=c[f+2],n=c[f+3];z(c[f],d);z(l,d);z(m,d);z(n,d);h.push(f,f+1,f+2);h.push(f,f+2,f+3)}c=k.Si();c.a_position=new Float32Array(d);c.a_tbn=y.c(b/4);b=k.Gh("FROM_QUADS");b.Va[0]=c;b.ab=new Uint32Array(h);b.Gb=d.length/3;return b}function p(a,b){b*=3;return[a[b],a[b+1],a[b+2]]}function z(a,b){b.push(a[0],a[1],a[2])}var a=Object(N.a)(f),w=Object(U.a)(f),k=Object(n.a)(f),c=w.wa;C.JP=function(){var a=k.Gh("LINE"),b=k.Si();b.a_position=new Float32Array(3);b.a_direction=new Float32Array(3);a.Va[0]=b;
a.ab=new Uint32Array(1);a.Gb=1;return a};C.lv=function(){var a=m(2,2,1,1);a.name="PLANE";return a};C.tX=m;C.EP=function(a,b,h){function d(a,b){return 1==a%2&&(0==b||b==n-1)||1==b%2&&(0==a||a==m-1)?!0:!1}var f=h/=Math.pow(2,a-1),l=h,m=b+1,n=b+1;b=[];h=[];for(var r=0,p=0,v=0,z=-1,C=[],w=0;w<a;w++){for(var H=2*f/(m-1),D=2*l/(n-1),A=[],aa=[],J=0,P=0;P<m;P++){for(var q=-f+P*H,da=[],I=0;I<n;I++){var t=-l+I*D;if(q>-p&&q<p&&t>-v&&t<v)da.push(-1),J++;else{for(var e=null,ma=0;ma<C.length;ma+=3)if(q==C[ma]&&
t==C[ma+1]){e=C[ma+2];break}ma=null!==e?e:z+1;d(P,I)?(da.push(-2),J++):(null==e&&(0==I||I==n-1||0==P||P==m-1?(e=w==a-1?H:2*H,A.push(q,t,ma)):e=H,h.push(q,t,e),r++,z++),da.push(ma));if(P&&I)if(1==P)if(d(P-1,I)){if(1<I){t=ma-1;e=aa[P-1][I+1];var ja=e-1;b.push(ja,t,ma)}else e=aa[P-1][I+1],ja=e-1;b.push(e,ja,ma)}else d(P,I)||(t=ma-1,e=aa[P-1][I],b.push(e,t,ma));else if(P==m-1){if(!d(P,I))if(I==n-1)t=ma-1,e=aa[P-1][I-1],ja=aa[P-2][I],b.push(e,t,ma),b.push(ja,e,ma);else{t=ma-1;e=aa[P-1][I];ja=e-1;var N=
e+1;b.push(ja,t,ma);b.push(e,ja,ma);b.push(N,e,ma);2==I&&(N=aa[P-2][I-2],b.push(ja,N,t))}}else 1==I?d(P,I-1)?(t=aa[P-1][I],e=aa[P-1][I-1],b.push(t,e,ma)):(t=da[I-1],e=aa[P-1][I],ja=aa[P-2][I-1],b.push(e,t,ma),b.push(e,ja,t)):I==n-1?d(P,I)||(t=da[I-1],e=aa[P-1][I-1],ja=aa[P-2][I],b.push(e,t,ma),b.push(ja,e,ma)):-1!=aa[P-1][I]&&-1!=aa[P-1][I-1]&&-1!=da[I-1]?(t=da[I-1],e=aa[P-1][I],ja=aa[P-1][I-1],b.push(e,t,ma),b.push(e,ja,t),I==n-2&&d(P,I+1)&&(N=aa[P-1][I+1],b.push(N,e,ma))):I==n-2&&d(P,I+1)&&(e=aa[P-
1][I],N=aa[P-1][I+1],b.push(N,e,ma))}}aa.push(da)}C=A;p=f;v=l;f*=2;l*=2}2E4>p&&(a=-(2*p)/(m-1),h.push(-2E4,-2E4,a),h.push(-2E4,2E4,a),h.push(-p,-v,a),h.push(-p,v,a),h.push(2E4,-2E4,a),h.push(2E4,2E4,a),h.push(p,-v,a),h.push(p,v,a),ma=z+1,b.push(ma+1,ma+2,ma+3,ma+1,ma,ma+2,ma+2,ma+4,ma+6,ma+2,ma,ma+4,ma+1,ma+7,ma+5,ma+1,ma+3,ma+7,ma+7,ma+4,ma+5,ma+6,ma+4,ma+7),r+=8);a=k.Si();a.a_position=new Float32Array(h);a.a_tbn=y.c(r);y.j(a.a_tbn,[.707,0,0,.707],a.a_tbn);f=k.Gh("MULTIGRID_PLANE");f.Va[0]=a;f.ab=
new Uint32Array(b);f.Gb=h.length/3;c.FJ&&(k.Kx(f,1,!0),a.a_polyindex=k.$u(f));return f};C.sX=function(c){var b=c.length;b%3&&a.va("Wrong array");for(var h=[],d=[],f=0;f<b;f+=3){var l=c[f+1],m=c[f+2];z(c[f],d);z(l,d);z(m,d);h.push(f,f+1,f+2)}c=k.Si();c.a_position=new Float32Array(d);b=k.Gh("FROM_TRIANGLES");b.Va[0]=c;b.ab=new Uint32Array(h);b.Gb=d.length/3;return b};C.rX=r;C.GP=function(a){a=d._69(a,[]);var b=[];b.push(a[0],a[1],a[2],a[3]);b.push(a[0],a[3],a[5],a[4]);b.push(a[3],a[2],a[6],a[5]);b.push(a[1],
a[7],a[6],a[2]);b.push(a[0],a[4],a[7],a[1]);b.push(a[4],a[5],a[6],a[7]);a=r(b);a.name="FRUSTUM";return a};C.Sd=function(){var a=k.Gh("FULLSCREEN_TRI"),b=k.Si();b.a_position=new Float32Array([0,0,1,0,0,1]);a.Va[0]=b;a.ab=new Uint32Array([0,1,2]);a.Gb=3;return a};C.HP=function(){var a=k.Gh("FULLSCREEN_QUAD"),b=k.Si();b.a_position=new Float32Array([-1,1,1,1,-1,-1,1,-1]);a.Va[0]=b;a.ab=new Uint32Array([0,2,1,1,2,3]);a.Gb=4;return a};C.DP=function(){var a=k.Gh("BILLBOARD"),b=k.Si();b.a_bb_vertex=k.FF(1);
a.Va[0]=b;a.ab=new Uint32Array([0,2,1,0,3,2]);a.Gb=4;return a};C.Xz=function(a,b){var c=k.Gh("UV_SPHERE"),d,f,l=[],m=[],n=[];for(f=0;8>=f;f++)for(d=0;16>=d;d++){var r=d/16,v=f/8;m.push(-a*Math.cos(2*r*Math.PI)*Math.sin(v*Math.PI)+b[0],a*Math.cos(v*Math.PI)+b[1],a*Math.sin(2*r*Math.PI)*Math.sin(v*Math.PI)+b[2])}for(f=r=0;8>f;f++)for(d=0;16>d;d++){v=p(m,17*f+d+1);var B=p(m,17*f+d),C=p(m,17*(f+1)+d),w=p(m,17*(f+1)+d+1);Math.abs(v[1])==a+b[1]?(z(v,l),z(C,l),z(w,l),n.push(r,r+1,r+2),r+=3):Math.abs(C[1])==
a+b[1]?(z(v,l),z(B,l),z(C,l),n.push(r,r+1,r+2),r+=3):(z(v,l),z(B,l),z(C,l),z(w,l),n.push(r,r+1,r+2),n.push(r,r+2,r+3),r+=4)}a={};a.a_position=l;m=k.jE(n,m,l);m=k.iE(n,l,m);a.a_tbn=y.d(m);c.Va[0]=a;c.ab=n;c.Gb=l.length/3;return c};C.IF=function(a){var b=k.Gh("INDEX"),c=k.Si();c.a_index=new Float32Array(3*a);for(var d=new Uint16Array(3*a),f=0;f<3*a;f++)c.a_index[f]=f,d[f]=f;b.Va[0]=c;b.ab=d;b.Gb=3*a;return b}});w.a=f},function(D,w,f){D=f(0);var N=f(29),U=f(1),n=f(2),y=f(4);f=Object(D.a)("__loader",
function(d,f){function m(a,b,c,h){var d=R,k=ka.create();for(m in b){var l=v(b[m]);if(h&&l.Ac||!a&&l.Nc)l.Vs=!0;ka.Fa(k,l)}for(m in b)for(l=b[m],l.name=m,a=0;a<l.inputs.length;a++)ka.ra(k,b[l.inputs[a]],l,null);b=v({name:"out",qc:f.PJ,Dc:function(a,b,c,h,f){b.pc&&(d.gC=!0);G(b)||(b.status=2);b.PG(b.id,!0);f(b,c);u.log("%cTHREAD "+b.id+": LOADED CALLBACK","color: #f0f;")},Bc:5});if(c)c=ka.Or(k);else{var m=ka.clone(k);do{c=ka.Or(m);l=[];for(a=0;a<c.length;a++){h=c[a];var n=ka.Kb(m,h);n.vc&&l.push(h)}for(a=
0;a<l.length;a++)ka.rf(m,l[a]);l.length&&ka.$q(m)}while(l.length)}ka.Fa(k,b);for(a=0;a<c.length;a++)h=c[a],n=ka.Kb(k,h),b.inputs.push(n.name),ka.ra(k,n,b,null);return k}function v(a){a.vc=a.vc||!1;a.qc||0===a.qc||(a.qc=a.Ie);a.inputs=a.inputs||[];a.cn=a.cn||!1;a.Vs=a.Vs||!1;a.Bc=a.Bc||0;a.Ac=a.Ac||!1;a.Nc=a.Nc||!1;a.status=0;a.iY=0;a.OG=0;a.Yq=a.Yq||null;return a}function r(a,b,c){b.LE(c,b);b.status=3;a.Uy--;E.debug_loading&&u.log("%cTHREAD "+b.id+": 100% LOADING END "+Math.round(performance.now()-
b.gt)+"ms","color: #f0f;");b.eC=null;b.LE=null;E.debug_loading||(b.Qh=null);b.Ek=null}function p(a,b){for(var c=[],h=[],d=0;d<b.length;d++){var f=b[d];ka.Kb(a.Qh,f).cn&&(ka.am(a.Qh,f,function(h){var d=!0;ka.Lk(a.Qh,h,function(a,b){if(!b.cn)return d=!1,1});d&&-1==c.indexOf(h)&&-1==b.indexOf(h)&&c.push(h)}),h.push(d))}for(d=h.length-1;0<=d;d--)b.splice(h[d],1);return c}function z(a){function b(b,c){b=ka.Kb(a.Qh,b);c=ka.Kb(a.Qh,c);var h=c.qc-b.qc;0==h&&(h=b.vc-c.vc);return h}var c=[],h=a.Ek,d=!1;do{var f=
p(a,h);c.push.apply(c,h);0<f.length&&(d=!0);h=f}while(0<f.length);d&&c.sort(b);a.Ek=c;return a.Ek.length}function a(a,b,h){if(b.Vs)return b.cn=!0,E.debug_loading&&u.log("%cTHREAD "+a.id+": SKIP STAGE "+b.name,"color: #f0f;"),k(a,b),!1;if(E.debug_loading&&0==b.status){var d=w(a);u.log("%cTHREAD "+a.id+": "+d+"% "+("LOADING START "+b.name)+" "+Math.round(performance.now()-a.gt)+"ms ","color: #f0f;")}if(!b.Dc&&!b.$k&&!b.Xq)return k(a,b),!1;if(0==b.status&&(b.status++,b.Dc))return b.Dc(h,a,b,b.Yq,k,c),
!0;if(1==b.status){if(b.$k)return b.$k(h,a,b,b.Yq,k,c),!0;b.status++}return 2==b.status&&(b.status++,b.Xq)?(b.Xq(h,a,b,b.Yq,k,c),!0):!1}function w(a){if(0==a.Fx)return 100;var b=0;ka.Na(a.Qh,function(c,h){a.do_not_load_resources&&h.Ac||(b+=h.OG*h.Bc)});return n._64(100*b/a.Fx)}function k(a,b){b.cn=!0;b.status=3;l(a,b,1);if(E.debug_loading){var c=w(a);u.log("%cTHREAD "+a.id+": "+c+"% "+("LOADING END "+b.name)+" "+Math.round(performance.now()-a.gt)+"ms ","color: #f0f;")}}function c(a,b,c){1>c?l(a,b,
c):b.status++}function l(a,b,c){var h=R;if(b.Dc||b.$k||b.Xq)if(b.OG=c,b=w(a),a.fF!=b||1==c)a.eC(b,performance.now()-a.gt,a.id),a.fF=b,h.QA=!0}function b(a,b){var c=null;ka.Na(a.Qh,function(a,h){if(h.name==b)return c=h,1});return c}function h(){return 0==R.Uy}function G(a){return a&&(3==a.status||4==a.status)}var ka=Object(N.a)(d),u=Object(U.a)(d),E=Object(y.a)(d).wa;f.Ie=0;f.kh=1;f.PJ=2;var R=null;f.fA=function(){return R};f.WE=function(){var a={wg:[],Fz:0,Uy:0,gC:!1,QA:!1};return R=a};f.aF=function(a,
b,c,h,d,f,k,l,n){var u=R,r=u.wg.length,p={id:r,pc:0==r,status:0,Zi:b,aE:"",PG:c||function(){},NG:l||!1,XY:f,gt:0,fF:0,Fx:0,JB:!1,eC:h||function(){},LE:d||function(){},Qh:null,Ek:null,uA:!1,rA:!1,zA:!1,Ug:n};a=m(p.pc,a,f,k);p.Qh=a;b=[];c=ka.uQ(a);for(h=0;h<c.length;h++)b.push(c[h]);p.Ek=b;ka.Na(a,function(a,b){!(b.Dc||b.$k||b.Xq)||p.do_not_load_resources&&b.Ac||(p.Fx+=b.Bc)});u.wg.push(p);u.Uy++;return p.id};f.gV=function(b){var c=R;if(c&&!h())if(c.QA)c.QA=!1;else{var d=performance.now();do{var k=
c.wg[c.Fz],l=b[k.id];if(!G(k))if(0==k.status&&(k.status=1,k.gt=performance.now(),k.eC(0,0,k.id),E.debug_loading&&u.log("%cTHREAD "+k.id+": 0% LOADING START 0ms","color: #f0f;")),z(k)){var m=k,n=m.Ek.length;do{var p=ka.Kb(m.Qh,m.Ek[0]),v=a(m,p,l);p.qc==f.kh&&(m.JB=!0);p=m.Ek.shift();m.Ek.push(p);n--}while(!v&&0!=n)}else r(c,k,l);c.gC&&(c.Fz=(c.Fz+1)%c.wg.length);if(k.JB){k.JB=!1;break}}while(16>performance.now()-d)}};f.ID=function(a){var b=R;r(b,a,null);a.status=4;a.pc&&(b.gC=!0);a.PG(a.id,!1)};f.OY=
c;f.ox=function(a,c){a=b(a,c);null!==a&&(a.Vs=!0)};f.cn=h;f.zU=G;f.is_primary_loaded=function(a){var b=R;if(!b)return!1;a|=0;return b.wg[a]&&(3==b.wg[a].status||2==b.wg[a].status)};f.FQ=function(a){if(E.debug_loading){var b=R;return b&&b.wg[a]&&b.wg[a].Qh?ka.hF(b.wg[a].Qh,function(a,b){if(b.Vs)return"SKIPPED\n("+b.name+")";a=b.name+"\n";var c=[];c.push(b.qc==f.kh?"ASYNC":"SYNC");b.vc&&c.push("BKG");b.Ac&&c.push("RES");return a+c.join(" | ")},null):null}u.error("Debug mode isn't enabled. Can not retrieve the graph.")};
f.cleanup=function(){R=null}});w.a=f},function(D,w,f){D=f(0);D=Object(D.a)("__context",function(f,w){var n=null;w.NT=function(f){n=f};w.qv=function(){return n};w.reset=function(){n=null}});w.a=D},function(D,w,f){D=f(0);var N=f(14),U=f(59),n=f(9),y=f(19),d=f(1),m=f(13),C=f(2),v=f(3);f=Object(D.a)("constraints",function(f,p){var r=Object(N.a)(f),a=Object(U.a)(f),w=Object(n.a)(f),k=Object(y.a)(f),c=Object(d.a)(f),l=Object(m.a)(f);p.append_stiff=function(b,h,d,f,m){w.is_dynamic(b)?a.ci(b,h)?a.bi(b,h)?
(d=d||new Float32Array(3),m=m||1,f=f?f:[0,0,0,1],h instanceof Array&&2==h.length?a.nM(b,h[0],h[1],d,f,m):a.PD(b,h,d,f,m),l.Ea(b),k.sync_transform(b)):c.error("Constraint recursion is forbidden."):c.error("Can not apply constraint. Object and target must be different."):c.error('Wrong object: "'+b.name+'" is not dynamic.')};p.append_semi_stiff=function(b,h,d,f,m,n,r,p){w.is_dynamic(b)?a.ci(b,h)?a.bi(b,h)?(m=C._17(m)?m:Math.PI/2,n=C._17(n)?n:-Math.PI/2,r=C._17(r)?r:Math.PI/2,p=C._17(p)?p:-Math.PI/2,
d=d||new Float32Array(3),f=f?new Float32Array(f):null,a.lM(b,h,d,f,m,n,r,p),l.Ea(b),k.sync_transform(b)):c.error("Constraint recursion is forbidden."):c.error("Can not apply constraint. Object and target must be different."):c.error('Wrong object: "'+b.name+'" is not dynamic.')};p.append_semi_stiff_cam=function(a,h,d,f,k,l,m,n){c.ef("append_semi_stiff_cam","append_semi_stiff");r.is_eye_camera(a)?p.append_semi_stiff(a,h,d,f,k,l,m,n):c.error("append_semi_stiff_cam(): wrong object type, only EYE camera objects can be parented.")};
p.append_semi_soft_cam=function(a,h,d,f){c.ef("append_semi_soft_cam","append_semi_soft");r.is_eye_camera(a)?p.append_semi_soft(a,h,d,f):c.error("append_semi_soft_cam(): wrong object type, only EYE camera objects can be parented.")};p.append_semi_soft=function(b,h,d,f){if(w.is_dynamic(b))if(a.ci(b,h))if(a.bi(b,h)){if(!C._17(f)||0>f)f=.25;d=d||new Float32Array(3);a.kM(b,h,d,f);l.Ea(b);k.sync_transform(b)}else c.error("Constraint recursion is forbidden.");else c.error("Can not apply constraint. Object and target must be different.");
else c.error('Wrong object: "'+b.name+'" is not dynamic.')};p.append_stiff_trans=function(b,h,d){w.is_dynamic(b)?a.ci(b,h)?a.bi(b,h)?(d=d||new Float32Array(3),a.oM(b,h,d),l.Ea(b),k.sync_transform(b)):c.error("Constraint recursion is forbidden."):c.error("Can not apply constraint. Object and target must be different."):c.error('Wrong object: "'+b.name+'" is not dynamic.')};p.append_copy_loc=function(b,h,d,f,m){if(w.is_dynamic(b))if(a.ci(b,h))if(a.bi(b,h)){f=f||!1;d=d||"XYZ";m=m||1;var n=l.get_translation(b,
new Float32Array(3)),u=new Float32Array(3);u[0]=-1!=d.indexOf("-X")?-1:-1!=d.indexOf("X")?1:0;u[1]=-1!=d.indexOf("-Y")?-1:-1!=d.indexOf("Y")?1:0;u[2]=-1!=d.indexOf("-Z")?-1:-1!=d.indexOf("Z")?1:0;a.cM(b,h,n,u,f,m);l.Ea(b);k.sync_transform(b)}else c.error("Constraint recursion is forbidden.");else c.error("Can not apply constraint. Object and target must be different.");else c.error('Wrong object: "'+b.name+'" is not dynamic.')};p.append_copy_trans=function(b,h,d){w.is_dynamic(b)?a.ci(b,h)?a.bi(b,
h)?(a.eM(b,h,d||1),l.Ea(b),k.sync_transform(b)):c.error("Constraint recursion is forbidden."):c.error("Can not apply constraint. Object and target must be different."):c.error('Wrong object: "'+b.name+'" is not dynamic.')};p.append_copy_rot=function(b,h,d,f,m){if(w.is_dynamic(b))if(a.ci(b,h))if(a.bi(b,h)){d=d||"XYZ";var n=new Float32Array(3);n[0]=-1!=d.indexOf("-X")?-1:-1!=d.indexOf("X")?1:0;n[1]=-1!=d.indexOf("-Y")?-1:-1!=d.indexOf("Y")?1:0;n[2]=-1!=d.indexOf("-Z")?-1:-1!=d.indexOf("Z")?1:0;a.dM(b,
h,n,f||!1,m||1);l.Ea(b);k.sync_transform(b)}else c.error("Constraint recursion is forbidden.");else c.error("Can not apply constraint. Object and target must be different.");else c.error('Wrong object: "'+b.name+'" is not dynamic.')};p.append_stiff_trans_rot=function(b,h,d,f){w.is_dynamic(b)?a.ci(b,h)?a.bi(b,h)?(d=d||new Float32Array(3),f=f?new Float32Array(f):[0,0,0,1],a.pM(b,h,d,f),l.Ea(b),k.sync_transform(b)):c.error("Constraint recursion is forbidden."):c.error("Can not apply constraint. Object and target must be different."):
c.error('Wrong object: "'+b.name+'" is not dynamic.')};p.append_track=function(b,h,d,f,m,n){if(w.is_dynamic(b))if(a.ci(b,h))if(a.bi(b,h)){var u=C.e;"-Y"==d?u=C.b:"Y"==d?u=C.e:"-X"==d?u=C.a:"X"==d?u=C.d:"-Z"==d?u=C.c:"Z"==d&&(u=C.f);d=C.f;"X"==f?d=C.d:"Y"==f&&(d=C.e);1==Math.abs(v.dot(u,d))?c.error("Can not use parallel vectors for track and up axes."):(a.qM(b,h,u,d,m||!1,n||1),l.Ea(b),k.sync_transform(b))}else c.error("Constraint recursion is forbidden.");else c.error("Can not apply constraint. Object and target must be different.");
else c.error('Wrong object: "'+b.name+'" is not dynamic.')};p.append_follow=function(b,h,d,f){w.is_dynamic(b)?a.ci(b,h)?a.bi(b,h)?(a.hM(b,h,d,f),l.Ea(b),k.sync_transform(b)):c.error("Constraint recursion is forbidden."):c.error("Can not apply constraint. Object and target must be different."):c.error('Wrong object: "'+b.name+'" is not dynamic.')};p.append_stiff_viewport=function(b,h,d){w.is_dynamic(b)?a.ci(b,h)?a.bi(b,h)?(d=d||{},a.append_stiff_viewport(b,h,d),l.Ea(b),k.sync_transform(b)):c.error("Constraint recursion is forbidden."):
c.error("Can not apply constraint. Object and target must be different."):c.error('Wrong object: "'+b.name+'" is not dynamic.')};p.remove=function(b,c){c=c||!1;b.Yc&&a.remove(b,c);c&&l.Ea(b)}});w.a=f},function(D,w,f){D=f(0);var N=f(18);f=Object(D.a)("time",function(f,n){f=Object(N.a)(f);n.set_timeout=f.set_timeout;n.clear_timeout=f.clear_timeout;n.get_timeline=f.get_timeline;n.animate=f.animate;n.clear_animation=f.clear_animation});w.a=f},function(D,w,f){D=f(0);var N=f(1);f=Object(D.a)("storage",
function(f,n){function y(d){return C[d?d:m]?JSON.parse(C[d?d:m]):{}}var d=Object(N.a)(f),m="b4w",C=null;n.init=function(f){f?"b4w"!==f?m=f:d.error("b4w prefix denied"):d.warn("Prefix should be a string. Last declared storage prefix will be used.")};n.set=function(d,f,n){var r=y(n);r[d]=String(f);C[n?n:m]=JSON.stringify(r)};n.cleanup=function(d){delete C[d?d:m]};n.get=function(d,f){f=y(f);return f[d]?f[d]:""};n.debug=function(f){d.log(y(f?f:m))};try{C=window.localStorage;try{C.tmp=null,delete C.tmp}catch(v){d.warn("localStorage quota is limited. Disabling localStorage"),
C=null}}catch(v){d.warn("Applying chrome localStorage bug workaround"),C=null}C||(d.warn("localStorage is not available, initializing temporary storage"),C={})});w.a=f},function(D,w,f){D=f(0);var N=f(5),U=f(1);f(2);f=Object(D.a)("__texcomp",function(f,y){function d(d,c,f,b){var h=new Int32Array(f,0,31);if(542327876!=h[0])return p.error("Invalid magic number in DDS header"),0;if(!h[20]&4)return p.error("Unsupported format, must contain a FourCC code"),0;var k=h[21];switch(k){case z:var l=8;var m=c?
c.COMPRESSED_RGB_S3TC_DXT1_EXT:null;break;case a:l=16;m=c?c.COMPRESSED_RGBA_S3TC_DXT3_EXT:null;break;case w:l=16;m=c?c.COMPRESSED_RGBA_S3TC_DXT5_EXT:null;break;default:return p.error("Unsupported FourCC code:",v(k)),null}var n=1;h[2]&131072&&!1!==b&&(n=Math.max(1,h[7]));var r=h[4];var y=h[3];h=h[1]+4;if(c)for(k=0;k<n;++k)b=Math.max(4,r)/4*Math.max(4,y)/4*l,c=new Uint8Array(f,h,b),d.compressedTexImage2D(d.TEXTURE_2D,k,m,r,y,0,c),h+=b,r=Math.max(.5*r,1),y=Math.max(.5*y,1);else if(k==z){f=c=new Uint16Array(f);
l=h/2;m=r;h=new Uint16Array(4);c=new Uint16Array(m*y);for(var C,B,H,K,D,T,V=m/4,A=y/4,aa=0;aa<A;aa++)for(var J=0;J<V;J++)k=l+4*(aa*V+J),h[0]=f[k],h[1]=f[k+1],C=h[0]&31,B=h[0]&2016,H=h[0]&63488,K=h[1]&31,D=h[1]&2016,T=h[1]&63488,h[2]=5*C+3*K>>3|5*B+3*D>>3&2016|5*H+3*T>>3&63488,h[3]=5*K+3*C>>3|5*D+3*B>>3&2016|5*T+3*H>>3&63488,C=f[k+2],B=4*aa*m+4*J,c[B]=h[C&3],c[B+1]=h[C>>2&3],c[B+2]=h[C>>4&3],c[B+3]=h[C>>6&3],B+=m,c[B]=h[C>>8&3],c[B+1]=h[C>>10&3],c[B+2]=h[C>>12&3],c[B+3]=h[C>>14],C=f[k+3],B+=m,c[B]=
h[C&3],c[B+1]=h[C>>2&3],c[B+2]=h[C>>4&3],c[B+3]=h[C>>6&3],B+=m,c[B]=h[C>>8&3],c[B+1]=h[C>>10&3],c[B+2]=h[C>>12&3],c[B+3]=h[C>>14];d.texImage2D(d.TEXTURE_2D,0,d.RGB,r,y,0,d.RGB,d.UNSIGNED_SHORT_5_6_5,c);b&&d.generateMipmap(d.TEXTURE_2D)}else return p.error("No manual decoder for",v(k),"and no native support"),0;return n}function m(a,c,f,b,h,m){var k=new XMLHttpRequest;k.open("GET",f,!0);k.responseType="arraybuffer";k.onload=function(){if(200==k.status){a.bindTexture(a.TEXTURE_2D,b);var f=d(a,c,k.response,
h);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,1<f?a.LINEAR_MIPMAP_LINEAR:a.LINEAR)}m&&m(b)};k.send(null);return b}function n(a){return a.charCodeAt(0)+(a.charCodeAt(1)<<8)+(a.charCodeAt(2)<<16)+(a.charCodeAt(3)<<24)}function v(a){return String.fromCharCode(a&255,a>>8&255,a>>16&255,a>>24&255)}var r=Object(N.a)(f),p=Object(U.a)(f),z=n("DXT1"),a=n("DXT3"),w=n("DXT5");y.nV=d;y.oV=function(a,c,d){var b=new Uint32Array(d,0,13);if(55727696==
b[0]){var h=b[7],f=b[6],k=b[11],l=52+b[12];switch(b[2]){case 0:var m=2,n=1;break;case 1:m=2;n=3;break;case 2:m=4;n=0;break;case 3:m=4;n=2;break;default:r.va("Unsupported PVR V3 format.")}}else if(559044176==b[11]){h=b[2];f=b[1];k=b[3];l=b[0];k++;var p=b[4]&255;b=0<b[10];25==p?(m=4,n=b?2:0):24==p?(m=2,n=b?3:1):r.va("Unsupported PVR V2 format.")}else r.va("Unsupported PVR version.");2==m?(p=8,b=4):b=p=4;switch(n){case 0:var v=c.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;break;case 1:v=c.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;
break;case 2:v=c.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;break;case 3:v=c.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}c=p*b*m/8;for(m=0;m<k;m++){n=Math.max(h>>m,1);var B=Math.max(f>>m,1),z=n/p,y=B/b;2>z&&(z=2);2>y&&(y=2);z=z*y*c;y=new Uint8Array(d,l,z);a.compressedTexImage2D(a.TEXTURE_2D,m,v,n,B,0,y);l+=z}};y.bG=function(a,c){switch(c){case "dds":return c=new Int32Array(a,0,31),{width:c[4],height:c[3]};case "pvr":return c=new Uint32Array(a,0,13),55727696==c[0]?(a=c[7],c=c[6]):(a=c[2],c=c[1]),{width:a,height:c}}};y.YP=
function(d,c){var f=1;if("dds"==c)switch(c=new Int32Array(d,0,31),d=c[21],d){case z:f=6;break;case a:case w:f=4;break;default:p.error("Unsupported FourCC code:",v(d))}else if("pvr"==c)if(c=new Uint32Array(d,0,13),55727696==c[0])switch(c[2]){case 0:f=12;break;case 1:f=16;break;case 2:f=6;break;case 3:f=8}else d=c[4]&255,c=0<c[10],25==d?f=c?8:6:24==d&&(f=c?16:12);return f};y.gY=function(a,c,d,b){var h=a.createTexture();m(a,c,d,h,!0,b);return h}});w.a=f},function(D,w,f){D=f(0);var N=f(1);f=Object(D.a)("__debug",
function(f,n){var y=Object(N.a)(f),d={};n.qP=function(f,n,v,r,p){d[f]||(d[f]={RT:n,$f:{}});v in d[f].$f||(d[f].$f[v]=r);p&&(d[f].$f[v]=0)};n.calc_vbo_garbage_byte_size=function(){var f=0,n;for(n in d)for(var v in d[n].$f)f+=d[n].$f[v];return f};n.show_vbo_garbage_info=function(){var f={},n;for(n in d)for(var v in d[n].$f){var r=d[n].$f[v];if(r){var p=d[n].RT;p in f||(f[p]={vC:0,$f:{}});v in f[p].$f||(f[p].$f[v]=0);f[p].$f[v]+=r;f[p].vC+=r}}for(p in f){y.groupCollapsed(p,f[p].vC);for(v in f[p].$f)y.Wd(v,
f[p].$f[v]);y.groupEnd()}};n.cleanup=function(){d={}}});w.a=f},function(D,w,f){D=f(0);var N=f(4),U=f(46),n=f(28),y=f(11),d=f(2);f=Object(D.a)("__debug_rendertime",function(f,C){function m(){var a=w.dA();if(a){var b=a.createQuery();a.beginQuery(b)}else b=performance.now();return b}function r(){var c=a.bQ();return c&&c.debug_view_mode==a.DV_RENDER_TIME}function p(a,b,c){var h=w.dA(),f=0;if(h)for(c&&h.endQuery(),c=0;c<a.length;c++){var k=a[c],l=h.NF(k),m=h.MF();l&&!m&&(f=h.OF(k)/1E6,b&&(f=d._51(f,b,
1,10)),a.splice(c,1),c--)}else f=performance.now()-a.pop(),b&&(f=d._51(f,b,1,10));return f}var z=Object(N.a)(f),a=Object(U.a)(f),w=Object(n.a)(f),k=Object(y.a)(f),c=z.wa;C.hC=function(a){if(c.show_hud_debug_info||a.type==k.zq)a.vr||a.el.push(m())};C.mU=function(a){"MAIN"==a.type&&r()&&a.el.push(m())};C.kC=function(a){if((c.show_hud_debug_info||a.type==k.zq)&&!a.vr){var b=p(a.el,a.fg,!0);b&&(a.fg=b)}};C.oU=function(a){if("MAIN"==a.type&&r()){var b=p(a.el,a.fg,!0);b&&(a.fg=b)}};C.vG=r;C.FS=function(a){var b=
p(a.el,a.fg,!1);b&&(a.fg=b)}});w.a=f},function(D,w,f){D=f(0);var N=f(20),U=f(42),n=f(21),y=f(2),d=f(3),m=f(7);f=Object(D.a)("__navmesh",function(f,v){function r(a,b){function c(a){var b=a[0];a[0]=a[1];a[1]=a[2];a[2]=b}a=a.im;b=b.im;for(var h=[],e=0;e<a.length;e++)0<=z(b,a[e])&&h.push(a[e]);if(2>h.length)return[];0<=z(h,a[0])&&0<=z(h,a[a.length-1])&&c(a);0<=z(h,b[0])&&0<=z(h,b[b.length-1])&&c(b);h=[];for(e=0;e<a.length;e++)0<=z(b,a[e])&&h.push(a[e]);return h}function p(a){function b(a){for(var c=a.Kh,
e=0;e<c.length;e++){var h=c[e];void 0==h.island&&(h.island=a.island,b(h))}}a=a.AS;for(var c=[],h=0,e=0;e<a.length;e++){var d=a[e];void 0==d.island&&(d.island=h++,b(d));c[d.island]||(c[d.island]=[]);c[d.island].push(a[e])}return c}function z(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(a[c]==b)return c;return-1}function a(a){function b(a,b){for(var c=0;c<a.length;c++)if(b===a[c])return c}for(var c={},h=a.nq,e=0;e<h.length;e++)h[e][0]=parseFloat(h[e][0].toFixed(2)),h[e][1]=parseFloat(h[e][1].toFixed(2)),
h[e][2]=parseFloat(h[e][2].toFixed(2));c.nq=a.nq;a=p(a);c.HA=[];for(e=0;e<a.length;e++){h=[];for(var d=a[e],f=0;f<d.length;f++){for(var k=[],l=d[f],m=0;m<l.Kh.length;m++)k.push(b(d,l.Kh[m]));var q=[];for(m=0;m<l.Kh.length;m++)q.push(r(l,l.Kh[m]));l.Pd[0]=parseFloat(l.Pd[0].toFixed(2));l.Pd[1]=parseFloat(l.Pd[1].toFixed(2));l.Pd[2]=parseFloat(l.Pd[2].toFixed(2));h.push({id:b(d,l),Kh:k,im:l.im,Pd:l.Pd,Dd:l.Dd,BS:q,Sz:0,Jr:0,Fc:0,AN:1,QC:!1,closed:!1,parent:null})}c.HA.push(h)}return c}function C(a,
b,c,h,e){function f(a,b){d.subtract(a,b,R);return d.dot(R,R)}function k(a,b){for(var c=[],e=0;e<b.Kh.length;e++)c.push(a[b.Kh[e]]);return c}(function(a){for(var b=0;b<a.length;b++){var c=a[b];c.Sz=0;c.Jr=0;c.Fc=0;c.AN=1;c.QC=!1;c.closed=!1;c.parent=null}})(a);var l=U.a(function(a){return a.Sz});for(U.c(l,b);0<l.content.length;){var m=U.b(l);if(m===c){a=m;for(c=[];a.parent;)c.push(a),a=a.parent;c.push(b);return c.reverse()}m.closed=!0;for(var q=k(a,m),t=0,n=q.length;t<n;t++){var u=q[t];if(!u.closed){var r=
m.Jr+d.dist(u.Pd,m.Pd),p=u.QC;if(!p||r<u.Jr)u.QC=!0,u.parent=m,u.Fc=u.Fc||f(u.Pd,e)+f(u.Pd,h),u.Jr=r,u.Sz=u.Jr+u.Fc,p?U.d(l,u):U.c(l,u)}}}return[]}function k(a,b){a.push(b[0]);a.push(b[1]);a.push(b[2])}function c(a,b,c,h){b=d.subtract(b,a,R);a=d.subtract(c,a,O);a=d.cross(b,a,R);return y._50(d.dot(h,a))}function l(a,b){d.subtract(a,b,R);return 1E-5>d.dot(R,R)}function b(a,b,c){var h=d.subtract(b.right,b.left,R),e=c.Dd,f=b.Dd;c=Math.acos(d.dot(e,f));e=y._50(d.dot(h,d.cross(e,f,O)));c*=-e;e=n.identity(T);
n.translate(e,b.left,e);n.rotate(e,c,h,e);n.translate(e,d.scale(b.left,-1,O),e);n.multiply(a,e,a);return a}function h(a,c,h,f,e,l,u,r,p){for(var q=n.identity(K),t=e;t<h;t++)if(a[t].uG&&(t>e||!t)){var v=c,z=f;var A=a[t].left;var y=a[t].right,C=l,E=q,w=d.create(),I=d.transformMat4(A,E,L);I[3]=1;E=d.transformMat4(y,E,R);E=d.subtract(E,I,B);v=d.subtract(z,v,R);C=d.cross(C,v,Y);.01>Math.abs(d.dot(C,E))?z=.5:(d.normalize(C,C),C[3]=-d.dot(C,z),z=-m.dot(C,I)/m.dot(C,E));y=d.subtract(y,A,R);A=d.scaleAndAdd(A,
y,z,w);k(u,A);r&&k(p,a[t].Dd);t&&b(q,a[t],a[t-1])}}function w(a,f){function m(b,c){p=r=u=c;z=B=v=b;d.copy(b,y);d.copy(b,C);d.copy(a[u].Dd,E)}var q=[],e=[],u=0,r=0,p=0;var v=a[0].right;var B=a[0].left;var z=a[0].right;var y=d.copy(B,V);var C=d.copy(z,A);var E=d.copy(a[0].Dd,P);k(q,v);f&&k(e,a[0].Dd);for(var w=n.identity(ha),G=1;G<a.length;G++){var R=a[G].left,H=a[G].right,O=d.transformMat4(R,w,aa),T=d.transformMat4(H,w,J);a[G].uG&&b(w,a[G],a[G-1]);if(0>=c(v,C,T,E)){var K=l(v,z);if(K||0<c(v,y,T,E))z=
H,d.copy(T,C),p=G;else{(R=l(y,v))||h(a,y,r,v,u,E,q,f,e);w=n.identity(w);m(B,r);G=u;R||(k(q,v),f&&k(e,a[G].Dd));continue}}0<=c(v,y,O,E)&&((K=l(v,B))||0>c(v,C,O,E)?(B=R,d.copy(O,y),r=G):((R=l(C,v))||h(a,C,p,v,u,E,q,f,e),w=n.identity(w),m(z,p),G=u,R||(k(q,v),f&&k(e,a[G].Dd))))}w=a.length-1;G=a[w].left;(R=l(v,G))||h(a,y,w,v,u,E,q,f,e);R&&u||k(q,G);return f?(k(e,a[w].Dd),{positions:new Float32Array(q),normals:new Float32Array(e)}):{positions:new Float32Array(q),normals:null}}function D(a,b,c,h,e){for(var d=
null,f=Number.MAX_VALUE,k=0;k<a.length;k++){var l=a[k],m=e(c,l.Pd,l.im,b,f);m<f&&(d=l,f=m)}return 0<h&&f>h?null:d}function u(a,b,c,h,e){a.push({left:b,right:c,uG:h,Dd:e})}var E=Object(N.a)(f),R=d.create(),O=d.create(),L=m.create(),B=m.create(),Y=m.create(),K=n.create(),ha=n.create(),T=n.create(),V=d.create(),A=d.create(),aa=d.create(),J=d.create(),P=d.create();v.bS=function(b){var c=E.jA(b.Pc,E.ao),h=b.Ke;b=[];for(var f=0;f<h.length;f+=3)b.push({ab:new Uint32Array([h[f],h[f+1],h[f+2]]),Pd:new Float32Array(3),
Dd:new Float32Array(3)});h=[];for(f=0;f<c.length;f+=3){var e=new Float32Array(3);e[0]=c[f];e[1]=c[f+1];e[2]=c[f+2];h.push(e)}for(c=0;c<b.length;c++)f=b[c],d.add(h[f.ab[0]],h[f.ab[1]],R),d.add(R,h[f.ab[2]],R),d.scale(R,1/3,f.Pd);for(c=0;c<b.length;c++){f=b[c];e=d.subtract(h[f.ab[1]],h[f.ab[0]],R);var k=d.subtract(h[f.ab[2]],h[f.ab[0]],O);e=d.cross(e,k,R);d.normalize(e,e);d.copy(e,f.Dd)}var l={};c=[];f=[];var m=Math.pow(10,4);e=0;for(k=h.length;e<k;e++){var q=h[e];var n=Math.round(q[0]*m)+"_"+Math.round(q[1]*
m)+"_"+Math.round(q[2]*m);void 0===l[n]?(l[n]=e,c.push(q),f[e]=c.length-1):f[e]=f[l[n]]}l=[];e=0;for(k=b.length;e<k;e++)for(q=b[e],q.ab[0]=f[q.ab[0]],q.ab[1]=f[q.ab[1]],q.ab[2]=f[q.ab[2]],q=[q.ab[0],q.ab[1],q.ab[2]],n=0;3>n;n++)if(q[n]==q[(n+1)%3]){l.push(e);break}for(e=l.length-1;0<=e;e--)b.splice(l[e],1);for(e=h.length=0;e<c.length;e++)h.push(c[e]);f=[];for(c=e=0;c<b.length;c++)k=b[c],f.push({id:e++,im:k.ab,Pd:k.Pd,Dd:k.Dd,Kh:[]});b={AS:f,nq:h};h={};for(c=0;c<f.length;c++)for(e=0;3>e;e++)k=f[c].im[e],
l=f[c].im[(e+1)%3],k=k>l?l+"-"+k:k+"-"+l,k in h||(h[k]=[]),h[k].push(f[c]);f=Object.keys(h);c=0;for(l=f.length;c<l;c++)for(k=f[c],e=0;e<h[k].length;e++)for(q=e+1;q<h[k].length;q++)h[k][e].Kh.push(h[k][q]),h[k][q].Kh.push(h[k][e]);return a(b)};v.navmesh_get_island=function(a,b,c){for(var h=null,e=Number.MAX_VALUE,f=a.HA,k=0;k<f.length;k++)for(var l=0;l<f[k].length;l++){var m=f[k][l];d.subtract(m.Pd,b,R);m=c(b,m.Pd,m.im,a.nq,e);m<e&&(h=k,e=m)}return h};v.hR=function(a,b,c){for(var h=[],e=0;e<b.length;e++)h.push(c[b[e]]);
b=!1;c=-1;e=h.length;for(var d=e-1;++c<e;d=c)(h[c][1]<=a[1]&&a[1]<h[d][1]||h[d][1]<=a[1]&&a[1]<h[c][1])&&a[0]<(h[d][0]-h[c][0])*(a[1]-h[c][1])/(h[d][1]-h[c][1])+h[c][0]&&(b=!b);return b?!0:!1};v.navmesh_find_path=function(a,b,c,h){var e=a.HA[h.island];var f=a.nq,k=D(e,f,b,h.allowed_distance,h.distance_to_closest);if(k){var l=D(e,f,c,h.allowed_distance,h.distance_to_farthest);e=l?C(e,k,l,b,c,f):null}else e=null;if(e&&e.length)if(h.do_not_pull_string)if(c=e,h.return_normals){b=new Float32Array(3*c.length);
for(e=0;e<c.length;e++)b.set(c[e].Pd,3*e);c={positions:b,normals:null}}else{b=new Float32Array(3*c.length);a=new Float32Array(3*c.length);for(e=0;e<c.length;e++)b.set(c[e].Pd,3*e),a.set(c[e].Dd,3*e);c={positions:b,normals:a}}else{a=a.nq;h=h.return_normals;f=[];u(f,b,b,!1,e[0]&&e[0].Dd||y.f);for(b=0;b<e.length;b++){var m=e[b];if(k=e[b+1]){l=.999>Math.abs(d.dot(m.Dd,k.Dd));a:{for(var q=0;q<m.Kh.length;q++)if(m.Kh[q]===k.id){m=m.BS[q];break a}m=void 0}u(f,a[m[0]],a[m[1]],l,k.Dd)}}u(f,c,c,!1,f[f.length-
1].Dd);c=w(f,h)}else c=null;return c}});w.a=f},function(D,w,f){function N(){return{name:"",type:"",nd:"",jh:!1,ne:null,hh:[],Pb:"",bd:!1,ky:!1,pb:!1,Se:!1,jy:!1,tt:!1,bq:!1,cf:!1,vk:!1,dj:!1,Wr:!1,fn:!1,Nh:0,nj:0,Yd:0,Ff:"",Qc:new Float32Array(3),Je:0,Ou:0,Pu:0,ax:0,Mu:0,Nu:0,Fu:0,alpha:0,Pf:"",Re:new Float32Array(3),Zs:0,Cx:0,Dx:0,Dn:0,Ax:0,Bx:0,rg:0,ie:0,fe:0,Sa:{fj:!1,shore_smoothing:!1,absorb_factor:0,foam_factor:0,hx:new Float32Array(3),kx:new Float32Array(3),ix:0,lx:0,Qm:new Float32Array(3),
fv:0,sss_strength:0,sss_width:0,norm_uv_velocity:0,is_dynamic:!1,waves_height:0,waves_length:0,dst_noise_scale0:0,dst_noise_scale1:0,dst_noise_freq0:0,dst_noise_freq1:0,dir_min_shore_fac:0,dir_freq:0,dir_noise_scale:0,dir_noise_freq:0,dir_min_noise_fac:0,dst_min_fac:0,waves_hor_fac:0,Uv:!1,Cw:0,Dw:0,Lu:0,Wu:!1,Nj:0,Mj:0},uj:{Wo:!1,zr:"",yr:""},yn:{reflect_factor:0,fresnel:0,fresnel_factor:0},No:{size:0,Qr:0,$w:new Float32Array(3),gw:new Float32Array(3),Zw:0,ew:0,Gx:0,Wv:!1,Hx:0,Ix:0},Fd:{$p:!1,Ai:!1,
ve:0,th:0,Rb:"",$e:0,Ze:0,af:0}}}w.c=N;w.b=function(){var f=N();f.name="DEFAULT";f.type="SURFACE";f.nd=U._4();f.jh=!1;f.ne=null;f.hh=[];f.Pb="OPAQUE";f.bd=!1;f.ky=!1;f.pb=!0;f.tt=!1;f.bq=!1;f.vk=!1;f.fn=!1;f.Nh=0;f.nj=0;f.Yd=0;f.Ff="LAMBERT";f.Qc.set([.8,.8,.8]);f.Je=.8;f.alpha=1;f.Pf="COOKTORR";f.Re.set([1,1,1]);f.Zs=.5;f.Dn=50;f.rg=1;f.ie=0;f.fe=1;f.Sa.fj=!1;f.uj.Wo=!1;f.yn.reflect_factor=0;f.yn.fresnel=0;f.yn.fresnel_factor=1.25;f.Fd.$p=!1;return f};w.d=function(f,y){y.name=f.name;y.type=f.type;
y.nd=f.uuid;y.jh=f.use_nodes;y.ne=f.node_tree;y.hh=f.texture_slots;y.Pb=f.game_settings.alpha_blend;y.bd=f.use_shadeless;y.ky=f.use_transparency;y.pb=f.game_settings.use_backface_culling;y.Se=f.use_tangent_shading;y.jy=f.use_orco_tex_coord;y.tt=f.use_vertex_color_paint;y.bq=f.b4w_double_sided_lighting;y.cf=f.b4w_do_not_render;y.vk=f.b4w_render_above_all;y.dj=f.b4w_lens_flares;y.Wr=f.b4w_wettable;y.fn=f.b4w_refractive;y.Nh=f.b4w_refr_bump;y.nj=f.pass_index;y.Yd=f.offset_z;y.Ff=f.diffuse_shader;y.Qc.set(f.diffuse_color);
y.Je=f.diffuse_intensity;y.Ou=f.diffuse_toon_size;y.Pu=f.diffuse_toon_smooth;y.ax=f.roughness;y.Mu=f.diffuse_fresnel;y.Nu=f.diffuse_fresnel_factor;y.Fu=f.darkness;y.alpha=f.alpha;y.Pf=f.specular_shader;y.Re.set(f.specular_color);y.Zs=f.specular_intensity;y.Cx=f.specular_toon_size;y.Dx=f.specular_toon_smooth;y.Dn=f.specular_hardness;y.Ax=f.specular_ior;y.Bx=f.specular_slope;y.rg=f.specular_alpha;y.ie=f.emit;y.fe=f.ambient;var d=y.Sa;d.fj=f.b4w_water;d.shore_smoothing=f.b4w_water_shore_smoothing;d.absorb_factor=
f.b4w_water_absorb_factor;d.foam_factor=f.b4w_foam_factor;d.hx.set(f.b4w_shallow_water_col);d.kx.set(f.b4w_shore_water_col);d.ix=f.b4w_shallow_water_col_fac;d.lx=f.b4w_shore_water_col_fac;d.Qm.set(f.b4w_water_fog_color);d.fv=f.b4w_water_fog_density;d.sss_strength=f.b4w_water_sss_strength;d.sss_width=f.b4w_water_sss_width;d.norm_uv_velocity=f.b4w_water_norm_uv_velocity;d.is_dynamic=f.b4w_water_dynamic;d.waves_height=f.b4w_waves_height;d.waves_length=f.b4w_waves_length;d.dst_noise_scale0=f.b4w_water_dst_noise_scale0;
d.dst_noise_scale1=f.b4w_water_dst_noise_scale1;d.dst_noise_freq0=f.b4w_water_dst_noise_freq0;d.dst_noise_freq1=f.b4w_water_dst_noise_freq1;d.dir_min_shore_fac=f.b4w_water_dir_min_shore_fac;d.dir_freq=f.b4w_water_dir_freq;d.dir_noise_scale=f.b4w_water_dir_noise_scale;d.dir_noise_freq=f.b4w_water_dir_noise_freq;d.dir_min_noise_fac=f.b4w_water_dir_min_noise_fac;d.dst_min_fac=f.b4w_water_dst_min_fac;d.waves_hor_fac=f.b4w_water_waves_hor_fac;d.Uv=f.b4w_generated_mesh;d.Cw=f.b4w_water_num_cascads;d.Dw=
f.b4w_water_subdivs;d.Lu=f.b4w_water_detailed_dist;d.Wu=f.b4w_water_enable_caust;d.Nj=f.b4w_water_caust_scale;d.Mj=f.b4w_water_caust_brightness;d=y.uj;d.Wo=f.b4w_terrain;d.zr=f.b4w_dynamic_grass_size;d.yr=f.b4w_dynamic_grass_color;d=y.yn;d.reflect_factor=f.raytrace_mirror.reflect_factor;d.fresnel=f.raytrace_mirror.fresnel;d.fresnel_factor=f.raytrace_mirror.fresnel_factor;d=y.No;d.size=f.halo.size;d.Qr=f.halo.hardness;d.$w.set(f.halo.b4w_halo_rings_color);d.gw.set(f.halo.b4w_halo_lines_color);d.Zw=
f.halo.ring_count;d.ew=f.halo.line_count;d.Gx=f.halo.star_tip_count;d.Wv=f.b4w_halo_sky_stars;d.Hx=f.b4w_halo_stars_blend_height;d.Ix=f.b4w_halo_stars_min_height;y=y.Fd;y.$p=f.b4w_collision;y.Ai=f.b4w_use_ghost;y.ve=f.physics.friction;y.th=f.physics.elasticity;y.Rb=f.b4w_collision_id;y.$e=f.b4w_collision_margin;y.Ze=f.b4w_collision_group;y.af=f.b4w_collision_mask};w.a=function(f){f.name=f.name;f.type=f.type;f.nd=f.nd;f.jh=f.jh;f.ne=f.ne;f.hh=f.hh.slice();f.Pb=f.Pb;f.bd=f.bd;f.ky=f.ky;f.pb=f.pb;f.Se=
f.Se;f.jy=f.jy;f.tt=f.tt;f.bq=f.bq;f.cf=f.cf;f.vk=f.vk;f.dj=f.dj;f.Wr=f.Wr;f.fn=f.fn;f.Nh=f.Nh;f.nj=f.nj;f.Yd=f.Yd;f.Ff=f.Ff;f.Qc.set(f.Qc);f.Je=f.Je;f.Ou=f.Ou;f.Pu=f.Pu;f.ax=f.ax;f.Mu=f.Mu;f.Nu=f.Nu;f.Fu=f.Fu;f.alpha=f.alpha;f.Pf=f.Pf;f.Re.set(f.Re);f.Zs=f.Zs;f.Cx=f.Cx;f.Dx=f.Dx;f.Dn=f.Dn;f.Ax=f.Ax;f.Bx=f.Bx;f.rg=f.rg;f.ie=f.ie;f.fe=f.fe;var n=f.Sa,d=f.Sa;d.fj=n.fj;d.shore_smoothing=n.shore_smoothing;d.absorb_factor=n.absorb_factor;d.foam_factor=n.foam_factor;d.hx.set(n.hx);d.kx.set(n.kx);d.ix=n.ix;
d.lx=n.lx;d.Qm=n.Qm;d.fv=n.fv;d.sss_strength=n.sss_strength;d.sss_width=n.sss_width;d.norm_uv_velocity=n.norm_uv_velocity;d.is_dynamic=n.is_dynamic;d.waves_height=n.waves_height;d.waves_length=n.waves_length;d.dst_noise_scale0=n.dst_noise_scale0;d.dst_noise_scale1=n.dst_noise_scale1;d.dst_noise_freq0=n.dst_noise_freq0;d.dst_noise_freq1=n.dst_noise_freq1;d.dir_min_shore_fac=n.dir_min_shore_fac;d.dir_freq=n.dir_freq;d.dir_noise_scale=n.dir_noise_scale;d.dir_noise_freq=n.dir_noise_freq;d.dir_min_noise_fac=
n.dir_min_noise_fac;d.dst_min_fac=n.dst_min_fac;d.waves_hor_fac=n.waves_hor_fac;d.Uv=n.Uv;d.Cw=n.Cw;d.Dw=n.Dw;d.Lu=n.Lu;d.Wu=n.Wu;d.Nj=n.Nj;d.Mj=n.Mj;d=n=f.uj;d.Wo=n.Wo;d.zr=n.zr;d.yr=n.yr;d=n=f.yn;d.reflect_factor=n.reflect_factor;d.fresnel=n.fresnel;d.fresnel_factor=n.fresnel_factor;d=n=f.No;d.size=n.size;d.Qr=n.Qr;d.$w.set(n.$w);d.gw.set(n.gw);d.Zw=n.Zw;d.ew=n.ew;d.Gx=n.Gx;d.Wv=n.Wv;d.Hx=n.Hx;d.Ix=n.Ix;d=n=f.Fd;d.$p=n.$p;d.Ai=n.Ai;d.ve=n.ve;d.th=n.th;d.Rb=n.Rb;d.$e=n.$e;d.Ze=n.Ze;d.af=n.af;return f};
var U=f(2)},function(D,w,f){D=f(0);var N=f(5),U=f(2),n=f(3);f=Object(D.a)("__curve",function(f,d){function m(a,d,f,c,l){var b=c.length;l||(l=new Float32Array(b));for(var h=b+a,k=new Float32Array(h),m=1;m<=h-1;m++)k[m-1]=d>=f[m-1]&&d<f[m+1-1]?1:0;for(var n=2;n<=a;n++)for(m=1;m<=h-n;m++)k[m-1]=(0!=k[m-1]?(d-f[m-1])*k[m-1]/(f[m+n-1-1]-f[m-1]):0)+(0!=k[m+1-1]?(f[m+n-1]-d)*k[m+1-1]/(f[m+n-1]-f[m+1-1]):0);d==f[h-1]&&(k[b-1]=1);a=0;for(m=1;m<=b;m++)a+=k[m-1]*c[m-1];for(m=1;m<=b;m++)l[m-1]=0!=a?k[m-1]*c[m-
1]/a:0;return l}function y(a){a=a.Zv;return a[a.length-1]}function v(a){a=a.eF;return a[a.length-1]}function r(a,d,f,c,l,b,h,m){var k=a+(d-a)/2,n=p(k,c,l,b,h)-f;m=m?m:.01;return Math.abs(n)<m?k:0<n?r(a,k,f,c,l,b,h,m):r(k,d,f,c,l,b,h,m)}function p(a,d,f,c,l){var b=1-a;return d*b*b*b+3*f*b*b*a+3*c*b*a*a+l*a*a*a}var z=Object(N.a)(f);d.dO=function(a){var d={},f=a.data;a=f.splines[0];if(!a||"NURBS"!=a.type||!a.use_endpoint_u)return null;var c=a.order_u;d.order=c;a=a.points;var l=a.length/5,b=[],h=l+c;
l+=2;b[0]=0;for(var n=2;n<=h;n++)b[n-1]=n>c&&n<l?b[n-2]+1:b[n-2];d.Zv=b;"2D"==f.dimensions?d.rl=!1:"3D"==f.dimensions?d.rl=!0:z.va("Wrong curve dimensions");c=[];b=[];for(f=0;f<a.length;f+=5)c.push(a[f]),c.push(a[f+1]),c.push(a[f+2]),d.rl&&c.push(a[f+3]),b.push(a[f+4]);d.vz=c;d.SC=b;a=[];f=d.vz;c=d.rl?4:3;b=d.SC;h=d.Zv;l=d.order;n=f.length/c;for(var r=n+l,u=0,p=h[r-1]/999,v=0;1E3>v;v++){5E-6>h[r-1]-u&&(u=h[r-1]);for(var y=m(l,u,h,b),C=0;C<c;C++)for(var B=a[c*v+C]=0;B<n;B++)a[c*v+C]+=y[B]*f[c*B+C];
u+=p}c=d.rl?4:3;b=new Float32Array(1E3);b[0]=0;for(f=1;1E3>f;f+=1)h=a[(f-1)*c],l=a[(f-1)*c+1],n=a[(f-1)*c+2],r=a[f*c],u=a[f*c+1],p=a[f*c+2],b[f]=b[f-1]+Math.sqrt((r-h)*(r-h)+(u-l)*(u-l)+(p-n)*(p-n));d.eF=b;return d};d.jU=function(a,d,f){f||(f=[]);d=Math.min(d,y(a));var c=a.vz,k=a.rl?4:3,b=a.SC,h=a.Zv,n=a.order;a=c.length/k;var r=a+n;5E-6>h[r-1]-d&&(d=h[r-1]);r=new Float32Array(a);m(n,d,h,b,r);for(d=0;d<k;d++)for(b=f[d]=0;b<a;b++)f[d]+=r[b]*c[k*b+d]};d.gU=function(a,d,f){f||(f=[]);var c=a.vz,k=a.rl?
4:3,b=a.SC,h=a.Zv,m=a.order;a=c.length/k;var n=a+m;5E-6>h[n-1]-d&&(d=h[n-1]);n=new Float32Array(a);var u=d;d=n;var r=b.length;d||(d=new Float32Array(r));var p=new Float32Array(r),v=new Float32Array(r),z=p,B=v;z||(z=new Float32Array(r));B||(B=new Float32Array(r));for(var y=r+m,C=new Float32Array(y),w=new Float32Array(y),H=1;H<=y-1;H++)C[H-1]=u>=h[H-1]&&u<h[H+1-1]?1:0;u==h[y-1]&&(C[r-1]=1);for(var D=2;D<=m;D++)for(H=1;H<=y-D;H++){var A=0!=C[H-1]?C[H-1]/(h[H+D-1-1]-h[H-1]):0,aa=0!=C[H+1-1]?-C[H+1-1]/
(h[H+D-1]-h[H+1-1]):0,J=0!=w[H-1]?(u-h[H-1])*w[H-1]/(h[H+D-1-1]-h[H-1]):0,P=0!=w[H+1-1]?(h[H+D-1]-u)*w[H+1-1]/(h[H+D-1]-h[H+1-1]):0;C[H-1]=(0!=C[H-1]?(u-h[H-1])*C[H-1]/(h[H+D-1-1]-h[H-1]):0)+(0!=C[H+1-1]?(h[H+D-1]-u)*C[H+1-1]/(h[H+D-1]-h[H+1-1]):0);w[H-1]=A+aa+J+P}for(H=1;H<=r;H++)z[H-1]=C[H-1],B[H-1]=w[H-1];h=0;for(m=1;m<=r;m++)h+=p[m-1]*b[m-1];u=0;for(m=1;m<=r;m++)u+=v[m-1]*b[m-1];for(m=1;m<=r;m++)d[m-1]=0!=h?v[m-1]*b[m-1]/h+p[m-1]*b[m-1]*u/(h*h):0;for(b=0;b<k;b++)for(h=f[b]=0;h<a;h++)f[b]+=n[h]*
c[k*h+b]};d.NY=y;d.iU=v;d.hU=function(a,d){if(0>=d)return 0;var f=y(a);if(d>=v(a))return f;a=a.eF;var c=U.F(a,d,0,a.length-1);return f*(c+(d-a[c])/(a[c+1]-a[c]))/1E3};d.fw=function(a,d,f,c,l){return f+(l-c)*(a-f)/(d-c)};d.LG=function(a,d,f){var c=d[0];d=d[1];f=(f[1]-d)/(f[0]-c);return f*a+(d-f*c)};d.GM=function(a,d,f,c,l){return p(r(0,1,a,d[0],f[0],c[0],l[0],.001),d[1],f[1],c[1],l[1])};d.kz=function(a,d,f,c,l){var b=new Float32Array(3),h=new Float32Array(3),k=new Float32Array(3),m=new Float32Array(3),
u=new Float32Array(3),r=new Float32Array(3);n.copy(a[1],h);null==d?(n.copy(f[1],k),b[0]=2*h[0]-k[0],b[1]=2*h[1]-k[1]):n.copy(d[1],b);null==f?(n.copy(d[1],b),k[0]=2*h[0]-b[0],k[1]=2*h[1]-b[1]):n.copy(f[1],k);n.subtract(h,b,m);n.subtract(k,h,u);d=n.length(m);f=n.length(u);0==d&&(d=1);0==f&&(f=1);if("AUTO"==c||"AUTO"==l)r[0]=u[0]/f+m[0]/d,r[1]=u[1]/f+m[1]/d,b=2.5614*n.length(r),0!=b&&("AUTO"==c&&n.scaleAndAdd(h,r,-(d/b),a[0]),"AUTO"==l&&n.scaleAndAdd(h,r,f/b,a[2]));"VECTOR"==c&&n.scaleAndAdd(h,m,-1/
3,a[0]);"VECTOR"==l&&n.scaleAndAdd(h,u,1/3,a[2])};d.zN=function(a,d,f,c){var k=[],b=[];k[0]=a[0]-d[0];k[1]=a[1]-d[1];b[0]=c[0]-f[0];b[1]=c[1]-f[1];var h=c[0]-a[0];var m=Math.abs(k[0]);var n=Math.abs(b[0]);0!=m+n&&m+n>h&&(m=h/(m+n),d[0]=a[0]-m*k[0],d[1]=a[1]-m*k[1],f[0]=c[0]-m*b[0],f[1]=c[1]-m*b[1])}});w.a=f},function(D,w,f){D=f(0);var N=f(4),U=f(66),n=f(35),y=f(43),d=f(1);f=Object(D.a)("config",function(f,C){var m=Object(N.a)(f),r=Object(n.a)(f),p=Object(U.a)(f),z=Object(y.a)(f),a=Object(d.a)(f);
C.P_LOW=m.P_LOW;C.P_HIGH=m.P_HIGH;C.P_ULTRA=m.P_ULTRA;C.P_CUSTOM=m.P_CUSTOM;C.P_AUTO=m.P_AUTO;C.set=m.set;C.get=m.get;C.reset=m.reset;C.reset_limits=m.reset_limits;C.get_std_assets_path=m.get_assets_path;C.get_assets_path=m.get_assets_path;C.apply_quality=function(d){z.is_primary_loaded()?a.error("Cannot change quality profile after a scene is loaded."):(m.set("quality",d),p.qv()&&(m.apply_quality(),r.bI(p.qv(),!1)))}});w.a=f},function(D,w,f){D=f(0);var N=f(43),U=f(65);f=Object(D.a)("data",function(f,
y){var d=Object(N.a)(f);f=Object(U.a)(f);y.load=d.load;y.unload=function(f){d.unload(f|0)};y.set_debug_resources_root=d.set_debug_resources_root;y.is_primary_loaded=d.is_primary_loaded;y.is_idle=f.cn;y.load_and_add_new=d.load;y.cleanup=y.unload;y.activate_media=d.activate_media;y.prefetch=d.prefetch;y.unfetch=d.unfetch});w.a=f},function(D,w,f){var N=f(32);D=f(0);var U=f(5),n=f(16),y=f(4),d=f(66),m=f(35),C=f(53),v=f(15),r=f(43),p=f(71),z=f(94),a=f(45),H=f(46),k=f(63),c=f(72),l=f(28),b=f(20),h=f(65),
G=f(12),ka=f(9),u=f(19),E=f(1),R=f(22),O=f(10),L=f(58),B=f(23),Y=f(34),K=f(11),ha=f(17),T=f(18),V=f(13),A=f(6),aa=f(2),J=f(3);f=Object(D.a)("debug",function(f,q){function w(a,b,c,g){qa.group(Ba.Mx(a),g);for(a=0;a<c.length;a++){var e=c[a],h=e.ka;if(h.type==g)for(var d=!1,f=0;f<b.length;f++){for(var k=b[f].jb,l=0;l<k.length;l++){var m=k[l];if(m.Ec&&m.$g==h){"STATIC"==g?qa.Wd(e.oe,e):qa.Wd(e.name,e);d=!0;break}}if(d)break}}qa.groupEnd()}function I(a){var b={};if(!a)return b;a=a.split("\n");for(var c=
0;c<a.length;c++){var g=a[c];if(-1!=g.search(new RegExp(/^[A-Z.]+ ?/))){var e=g.split(" ")[0];e in b||(b[e]=0);b[e]++}}g=c=a=0;for(e in b)switch(e){case "KIL":case "TEX":case "TXB":case "TXP":case "KIL.F":case "TEX.F":case "TXB.F":case "TXD.F":case "TXL.F":case "TXQ.F":case "TXP.F":c+=b[e];a+=b[e];break;case "ATTRIB":g+=b[e];break;case "ADDRESS":case "PARAM":case "TEMP":case "ALIAS":case "OUTPUT":break;case "END":break;default:a+=b[e]}b.ALL_OPS=a;b.TEX_OPS=c;b.ATTRIBS=g;return b}function t(a,b){var c=
new XMLHttpRequest;c.open("POST",a,!1);c.send(b);if(200==c.status)return c.responseText;qa.error(c.responseText);throw"Error POST XHR: "+c.status;}function e(a){a.sort(function(a,b){return b.Uz.ALL_OPS-a.Uz.ALL_OPS});for(var b=0;b<a.length;b++){var c=a[b],g=c.Uz,e=c.FV,h=P(c.IO);h=h.length?"\t\t("+h.join(", ")+")":"\t\t(NA)";qa.groupCollapsed("VERT ->","OPS",e.ALL_OPS,"ATT",e.ATTRIBS,"TEX",e.TEX_OPS,"\t\tFRAG ->","OPS",g.ALL_OPS,"TEX",g.TEX_OPS,h);qa.groupCollapsed("directives");var d=c.Mb.ei.slice().sort();
for(h=0;h<d.length;h++){var f=d[h];qa.Wd(f[0],f[1])}qa.groupEnd();qa.groupCollapsed("node elements");d=c.Mb.Mf;for(h=0;h<d.length;h++)qa.Wd(d[h]);qa.groupEnd();qa.groupCollapsed("vert source");qa.Wd(c.DV);qa.groupEnd();qa.groupCollapsed("vert translated source");qa.Wd(c.EV);qa.groupEnd();h=["ALL_OPS","TEX_OPS","ATTRIBS"];qa.groupCollapsed("vert ops stats");for(var k in e)-1==h.indexOf(k)&&qa.Wd(k,e[k]);qa.groupEnd();qa.groupCollapsed("vert assembly");qa.Wd(c.CV);qa.groupEnd();qa.groupCollapsed("frag source");
qa.Wd(c.BP);qa.groupEnd();qa.groupCollapsed("frag translated source");qa.Wd(c.CP);qa.groupEnd();qa.groupCollapsed("frag ops stats");for(k in g)-1==h.indexOf(k)&&qa.Wd(k,g[k]);qa.groupEnd();qa.groupCollapsed("frag assembly");qa.Wd(c.xP);qa.groupEnd();qa.groupEnd()}}function P(a){for(var b=[],c=xa.Mr(),g=0;g<c.length;g++)for(var e=c[g],h=Q.tc(e,"MESH",Q.DATA_ID_ALL),d=0;d<h.length;d++){var f=Aa.kb(h[d],e);if(f&&f.Ia.length){f=f.Ia;for(var k=0;k<f.length;k++){var l=f[k];if(l.ec==a)for(var m=0;m<l.Hc.length;m++){var q=
l.Hc[m];-1==b.indexOf(q)&&b.push(q)}}}}return b}function ja(a){function b(){Ka.push(b);return a.apply(a,arguments)}return b}function D(a,b,c,g,e){if(typeof b!=typeof a)throw"debug.eqv: wrong expected data type";if(a.length!=b.length)throw"debug.eqv: wrong expected vector length";c=c?c:1E-6;for(var h=0;h<a.length;h++){if("number"!=typeof b[h]||isNaN(b[h]))throw"debug.eqv: wrong expected data type";if("number"!=typeof a[h]||isNaN(a[h]))throw"debug.eqv: wrong result data type";if(b[h]>a[h]+c||b[h]<a[h]-
c)throw"debug.eqv: wrong result";}ta(g,e,"eqv")}function ta(a,b,c){a=a||"";b=b||"";if(hb){if(""==a)throw"debug."+c+': no error is expected, but got "'+Pa+'"';if(Pa!=a)throw"debug."+c+': error "'+a+'" is expected, but got "'+Pa+'"';}else if(""!=a)throw"debug."+c+': error "'+a+'" is expected, but got nothing';if(Wa){if(""==b)throw"debug."+c+': no warning is expected, but got "'+fa+'"';if(fa!=b)throw"debug."+c+': warning "'+b+'" is expected, but got "'+fa+'"';}else if(""!=b)throw"debug."+c+': warning "'+
b+'" is expected, but got nothing';hb=Wa=!1}function Oa(){Ya&&(Q.pp(Ya,!1,!1,!1),wa.AH(Ya),Q.pp(Ya,!0,!0,!0),Q.remove_object(Ya),Ya=null)}var M=Object(U.a)(f),oa=Object(n.a)(f),ca=Object(y.a)(f),ea=Object(m.a)(f),Da=Object(C.a)(f),S=Object(v.a)(f),Na=Object(d.a)(f),wa=Object(r.a)(f),X=Object(p.a)(f),Ga=Object(z.a)(f),Ha=Object(a.a)(f),ua=Object(H.a)(f),Ca=Object(k.a)(f),la=Object(c.a)(f),sa=Object(l.a)(f),ia=Object(b.a)(f),ra=Object(h.a)(f),Q=Object(G.a)(f),Aa=Object(ka.a)(f),ya=Object(u.a)(f),qa=
Object(E.a)(f),na=Object(R.a)(f),xa=Object(O.a)(f),za=Object(L.a)(f),Fa=Object(B.a)(f),g=Object(Y.a)(f),Ba=Object(K.a)(f),Va=Object(T.a)(f),Xa=Object(ha.a)(f),Ea=Object(V.a)(f),Za=A.b(),Ua=new Float32Array(2),W=J.create(),La=J.create(),Ab=J.create(),Ya=null,Sa=ca.wa,Ka=[],fa="",Pa="",Wa=!1,hb=!1,ib=!0,Ja=new Uint8Array(4);q.DV_NONE=ua.DV_NONE;q.DV_OPAQUE_WIREFRAME=ua.DV_OPAQUE_WIREFRAME;q.DV_TRANSPARENT_WIREFRAME=ua.DV_TRANSPARENT_WIREFRAME;q.DV_FRONT_BACK_VIEW=ua.DV_FRONT_BACK_VIEW;q.DV_BOUNDINGS=
ua.DV_BOUNDINGS;q.DV_CLUSTERS_VIEW=ua.DV_CLUSTERS_VIEW;q.DV_BATCHES_VIEW=ua.DV_BATCHES_VIEW;q.DV_RENDER_TIME=ua.DV_RENDER_TIME;q.physics_stats=function(){ya.QO()};q.physics_id=function(a){qa.log("O",ya.sP(a));var b=ya.MP();if(b){b=b.cd.jb;for(var c=0;c<b.length;c++){var g=b[c];g.xa.Ja==a&&qa.log("B",g)}}else qa.error("No active physics scene.")};q.visible_objects=function(){var a=xa.get_active(),b=Q.tc(a,"MESH",Q.DATA_ID_ALL);a=xa.ug(a,[Ba.ic,Ba.Md,Ba.He]);for(var c=0;c<a.length;c++){var g=a[c],e=
g.vb;e.length&&(w(g,e,b,"DYNAMIC"),w(g,e,b,"STATIC"))}};q.object_info=function(a){for(var b=xa.get_active(),c=Q.tc(b,"MESH",Q.DATA_ID_ALL),g=0;g<c.length;g++){var e=c[g];if(e.name==a){qa.log("Object",e);for(var h=xa.Zz(b),d=0;d<h.length;d++){for(var f=h[d],k=[],l=f.vb,m=0;m<l.length;m++)for(var q=l[m].jb,t=0;t<q.length;t++)q[t].$g==e.ka&&k.push(q[t]);qa.log("Subscene "+f.type,k)}}}};q.objects_stat=function(){var a=xa.get_active();qa.log("Armatures: "+Q.tc(a,"ARMATURE",Q.DATA_ID_ALL).length);qa.log("Cameras: "+
Q.tc(a,"CAMERA",Q.DATA_ID_ALL).length);qa.log("Curves: "+Q.tc(a,"CURVE",Q.DATA_ID_ALL).length);qa.log("Empties: "+Q.tc(a,"EMPTY",Q.DATA_ID_ALL).length);qa.log("Lamps: "+Q.tc(a,"LAMP",Q.DATA_ID_ALL).length);qa.log("Meshes: "+Q.tc(a,"MESH",Q.DATA_ID_ALL).length);qa.log("Speakers: "+Q.tc(a,"SPEAKER",Q.DATA_ID_ALL).length)};q.num_vertices=function(){var a=0,b=xa.get_active();b=xa.ug(b,[Ba.ic,Ba.Md,Ba.He]);for(var c=0;c<b.length;c++)for(var g=b[c].vb,e=0;e<g.length;e++)for(var h=g[e].jb,d=0;d<h.length;d++){var f=
h[d].fb;f&&(a+=f.num_vertices)}return a};q.num_triangles=function(){var a=0,b=xa.get_active();b=xa.ug(b,[Ba.ic,Ba.Md,Ba.He]);for(var c=0;c<b.length;c++)for(var g=b[c].vb,e=0;e<g.length;e++)for(var h=g[e].jb,d=0;d<h.length;d++){var f=h[d].fb;f&&(a+=f.num_triangles)}return a};q.num_draw_calls=function(){for(var a=xa.get_active(),b=xa.ug(a,[Ba.ic,Ba.Md,Ba.He,Ba.de,Ba.Ue]),c=0,g=0;g<b.length;g++){var e=b[g];e=e.vb;for(var h=0;h<e.length;h++)c+=e[h].jb.length}a=xa.ug(a,[Ba.xd,Ba.Ge]);for(g=0;g<a.length;g++)for(e=
a[g],e=e.vb,h=0;h<e.length;h++)c+=6*e[h].jb.length;return c};q.num_shaders=function(){return aa._8(g.RF())};q.geometry_stats=function(){var a=xa.get_active(),b=xa.Zz(a);a={};for(var c=0;c<b.length;c++){var g=b[c];if(g.type!=Ba.Tk&&g.type!=Ba.Vh)for(var e=g.vb,h=0;h<e.length;h++)for(var d=e[h].jb,f=0;f<d.length;f++){var k=d[f].fb,l=d[f].$g;k&&(g.type!=Ba.zf&&g.type!=Ba.Wh||l.Hw||l.Gw)&&(a[k.id]=k)}}c=b=0;for(var m in a)g=a[m].$a,g.so&&(c+=g.so/1048576),b+=g.vo/1048576;return{vbo_memory:b,ibo_memory:c}};
q.num_textures=function(){var a=[],b=0,c=xa.get_active();c=xa.ug(c,[Ba.ic,Ba.Md,Ba.He]);for(var g=0;g<c.length;g++)for(var e=c[g].vb,h=0;h<e.length;h++)for(var d=e[h].jb,f=0;f<d.length;f++){var k=d[f].fb;if(k){k=k.Ua;for(var l=0;l<k.length;l++){var m=k[l];if("IMAGE"===m.source||"ENVIRONMENT_MAP"===m.source){var q=m.hc;-1===a.indexOf(q)&&(a.push(q),m=m.width*m.height*4/1048576/m.gr,m*=1.3333,b+=m)}}}}return{number:a.length,memory:b}};q.num_render_targets=function(){var a=[],b=0,c=xa.get_active();c=
xa.Zz(c);for(var g=0;g<c.length;g++){var e=c[g];if(e.type!=Ba.Tk){var h=e.qa,d=[h.wc,h.gg];d.push.apply(d,e.Sh);for(e=0;e<d.length;e++){var f=d[e];Xa.Xo(f)&&-1==a.indexOf(f)&&(a.push(f),b+=h.width*h.height*Xa.AQ(f))}}}return{number:a.length,memory:b/1024/1024}};q.make_camera_frustum_shot=function(){var a=xa.get_active();(a=xa.yc(a,Ba.ic))&&xa.VG(a.qa,a,[1,1,0])};q.make_light_frustum_shot=function(){var a=xa.get_active(),b=xa.yc(a,Ba.ic);a=xa.ug(a,[Ba.ee]);if(b)for(var c=0;c<a.length;c++){var g=a[c];
switch(c){case 0:var e=[1,0,0];break;case 1:e=[0,1,0];break;case 2:e=[0,0,1];break;default:e=[1,0,1]}xa.VG(g.qa,b,e)}};q.scenegraph_to_dot=function(){for(var a=xa.Mr(),b=0;b<a.length;b++)qa.log("\n"+za.OO(xa.rv(a[b])))};q.loading_graph_to_dot=function(a){qa.log("\n"+ra.FQ(a|0))};q.controls_info=Da.debug;q.object_distance=function(a,b){a=A.j(a.ka.na,W);b=A.j(b.ka.na,La);return J.dist(a,b)};q.msg=function(){Ca.msg.apply(Ca,arguments)};q.fbmsg=function(){Ca.fbmsg.apply(Ca,arguments)};q.print_telemetry=
function(){Ca.print_telemetry.apply(Ca,arguments)};q.plot_telemetry=function(){Ca.plot_telemetry.apply(Ca,arguments)};q.fbres=function(a,b){function c(){Ca.fbmsg("FBRES",a());setTimeout(c,b)}b||(b=16);c()};q.assert_constants=function(){var a=new Float32Array([0,0,0,1]),b=new Float32Array([1,0,0]),c=new Float32Array([0,1,0]),g=new Float32Array([0,0,1]),e=new Float32Array([-1,0,0]),h=new Float32Array([0,-1,0]),d=new Float32Array([0,0,-1]);if(!aa.P(new Float32Array(3),aa.m))throw"Wrong VEC3_IDENT";if(!aa.P(a,
aa.k))throw"Wrong QUAT4_IDENT";if(!aa.P(b,aa.d))throw"Wrong AXIS_X";if(!aa.P(c,aa.e))throw"Wrong AXIS_Y";if(!aa.P(g,aa.f))throw"Wrong AXIS_Z";if(!aa.P(e,aa.a))throw"Wrong AXIS_MX";if(!aa.P(h,aa.b))throw"Wrong AXIS_MY";if(!aa.P(d,aa.c))throw"Wrong AXIS_MZ";};q.mute_music=function(){for(var a=Fa.get_speaker_objects(),b=0;b<a.length;b++){var c=a[b];"BACKGROUND_MUSIC"==Fa.gA(c)&&Fa.mute(c,!0)}};q.check_finite=function(a){return Ha.uP(a)};q.set_debug_params=function(a){var b=xa.get_active();b=xa.ug(b,
[Ba.Vh]);if(b.length)for(var c=0;c<b.length;c++){var g=b[c];if("number"==typeof a.debug_view_mode)switch(a.debug_view_mode){case ua.DV_NONE:case ua.DV_OPAQUE_WIREFRAME:case ua.DV_TRANSPARENT_WIREFRAME:case ua.DV_FRONT_BACK_VIEW:case ua.DV_BOUNDINGS:case ua.DV_CLUSTERS_VIEW:case ua.DV_BATCHES_VIEW:case ua.DV_RENDER_TIME:xa.oT(g,a.debug_view_mode);break;default:qa.error("set_debug_params(): Wrong debug view mode")}"number"==typeof a.debug_colors_seed&&xa.nT(g,a.debug_colors_seed);"number"==typeof a.RS&&
xa.DT(g,a.RS);"object"==typeof a.wireframe_edge_color&&xa.MT(g,aa._1(a.wireframe_edge_color))}else qa.error("Debugging is not available on the scene.")};q.get_error_quantity=function(){return qa.fQ()};q.get_warning_quantity=function(){return qa.CQ()};q.clear_errors_warnings=function(){return qa.clear_errors_warnings()};q.analyze_shaders=function(a){var b=g.RF(),c=0,h;for(h in b)a&&-1===h.indexOf(a)||c++;c="of "+c+" analyzing...";var d={};for(h in b)if(!a||-1!==h.indexOf(a)){var f=b[h];var k=f.ty;
var l=f.iv,m=sa.aQ();if(m){var q=m.getTranslatedShaderSource(k);m=m.getTranslatedShaderSource(l);if(ea.detect_mobile()){q=q.replace("#version","#version 300 //");m=m.replace("#version","#version 300 //");var n=t("/analyze_shader/vert_gles",q),u=t("/analyze_shader/frag_gles",m)}else q=q.replace("#version","#version 400 //"),m=m.replace("#version","#version 400 //"),n=t("/analyze_shader/vert",q),u=t("/analyze_shader/frag",m);var r=I(n),p=I(u);k={DV:Na.qv().getShaderSource(k),EV:q,CV:n,FV:r,BP:Na.qv().getShaderSource(l),
CP:m,xP:u,Uz:p}}else qa.warn("WEBGL_debug_shaders extension not found"),k=void 0;if(k){l=f.Mb;var v=l.yg+" + "+l.ff;k.IO=f;k.Mb=l;f=d[v]=d[v]||[];f.push(k);qa.Wd(c)}}for(v in d)qa.group("%c"+v,"color: #800"),f=d[v],e(f),qa.groupEnd()};q.fake_load=function(a,b,c,g,e){(a=a||null)||M.va("Stage load callback is undefined");b=b||5E3;c=c||0;g=g||100;100<g&&M.va("Max percentage must be less than 100");0>c&&M.va("Min percentage must be greater than 0");c>g&&M.va("Max percentage must be greater than min percentage");
var h=Va.animate(c,g,b,function(b){b=b.toFixed();a(b);100==b&&(Va.clear_animation(h),e&&e())})};q.test_performance=function(a){if(g.uE())if(sa.dA()){var b=Sa.gl_debug;Sa.gl_debug=!0;var c=za.YN();xa.Wz(null,c);var e=za.xc(c,Ba.zq),h=e.qa;for(c=0;5>c;c++)na.Xj(e);Sa.gl_debug=b;window.setTimeout(function(){la.FS(e);var b=e.fg;a(b,h.width*h.height*40/(b/1E3)/Math.pow(10,9))},100)}else a(0,0);else window.setTimeout(function(){q.test_performance(a)},100)};q.calc_vbo_garbage_byte_size=X.calc_vbo_garbage_byte_size;
q.show_vbo_garbage_info=X.show_vbo_garbage_info;q.print_batches_stat=function(){Ga.print_batches_stat()};q.start_debug=function(a){Ka=[];ib=!0;"string"===typeof a&&(a=N.a.require(a));for(var b in a)"function"===typeof a[b]&&(a[b]=ja(a[b],b))};q.check_debug_result=function(){return ib};q.test=function(a,b){var c=qa.error,g=qa.Ma,e=qa.warn;qa.error=qa.Ma=function(){Pa=qa.ME(arguments,"B4W ERROR").join(" ");hb=!0};qa.warn=function(){fa=qa.ME(arguments,"B4W WARN").join(" ");Wa=!0};hb=Wa=!1;try{b(),a=
!0}catch(nb){ib=!1,console.error('Test "'+a+'" failed with exception: "'+nb+'"'),hb=Wa=a=!1}qa.error=c;qa.Ma=g;qa.warn=e;return a};q.pix=function(a){var b=S.aG(),c=S.$F(),g=b/2,e=c/2;S.resize(b,c,!1);b=xa.get_active().sa.Ya;(c=za.tP(b))||M.va("Couldn't find onscreen subscene");b=c.qa;g=S.Wq(g,e,Ua,c.qa);g[1]=b.height-g[1];g=na.Vw(b.Hf,g[0],g[1],1,1,Ja);D(a,g,1)};q.eqs=function(a,b,c,g){if(JSON.stringify(a)!=JSON.stringify(b))throw"debug.eqs: wrong result";ta(c,g,"eqs")};q.eqv=D;q.eqf=function(a,b,
c,g,e){if("number"!=typeof b||isNaN(b))throw"debug.eqf: wrong expected data type";if("number"!=typeof a||isNaN(a))throw"debug.eqf: wrong result data type";c=c?c:1E-6;if(b>a+c||b<a-c)throw"debug.eqf: wrong result";ta(g,e,"eqf")};q.eq=function(a,b,c,g){if(a!==b)throw"debug.eq: wrong result";ta(c,g,"eq")};q.ok=function(a,b,c){if(!a)throw"debug.ok: wrong result";ta(b,c,"ok")};q.stat=function(a){var b=[];"string"===typeof a&&(a=N.a.require(a));for(var c in a)-1==Ka.indexOf(a[c])&&"function"===typeof a[c]&&
b.push(c);if(b.length){qa.groupCollapsed(b.length+" function(s) not tested.");for(a=0;a<b.length;a++)qa.Wd(b[a]);qa.groupEnd()}else qa.group("All functions were tested.")};q.show_normals=function(a,b,c,g){Oa();b=oa.Zb(a,b,"MAIN");if(!ia.ck(a)||!b)return qa.error("Normals are not avaliable for the dynamic object:",a.name),!1;var e=b.$a;if(!(e&&e.mc&&e.mc.a_position&&e.mc.a_tbn))return qa.error("Normals are not avaliable for the object:",a.name),!1;b=ia.Rz(e,"a_position");e=ia.Rz(e,"a_normal");a=Ea.get_tsr(a,
Za);var h=A.i(a,Ab);h=J.inverse(h,Ab);var d=J.multiply(h,h,Ab);Ya=Q.create_line("normal_line");h=new Float32Array(2*b.length);for(var f=0;f<b.length;f+=3){var k=W;k[0]=b[f];k[1]=b[f+1];k[2]=b[f+2];var l=A.D(k,a,La);h[2*f]=l[0];h[2*f+1]=l[1];h[2*f+2]=l[2];l=e.subarray(f,f+3);l=J.multiply(l,d,La);l=J.normalize(l,l);l=J.scale(l,c,La);k=J.add(k,l,La);k=A.D(k,a,La);h[2*f+3]=k[0];h[2*f+4]=k[1];h[2*f+5]=k[2]}c=oa.ov(Ya);ia.draw_line(c,h,!0);na.bu(c);c.Qc.set([1,1,1,1]);c.kn=g};q.hide_normals=Oa});w.a=f},
function(D,w,f){D=f(0);var N=f(15);f=Object(D.a)("__main",function(f,n){function y(a,f,k){var c=d.get_canvas();if(c.toBlob)c.toBlob(a,f,k);else{k=atob(c.toDataURL(f,k).split(",")[1]);c=new Uint8Array(k.length);for(var l=0;l<k.length;l++)c[l]=k.charCodeAt(l);a(new Blob([c],{type:f||"image/png"}))}}var d=Object(N.a)(f),m=null,C="image/png",v=1,r="",p=!1,z=!1;n.canvas_data_url=function(a,d,f,c){p=z="undefined"===typeof c?c:!0;m=a;C=d||C;v=f||v};n.frame=function(){var a=m;a&&(p&&r&&URL.revokeObjectURL(r),
y(function(d){navigator.msSaveOrOpenBlob?a(d):(r=URL.createObjectURL(d),a(r))},C,v),m=null,C="image/png",v=1)}});w.a=f},function(D,w,f){D=f(0);var N=f(21),U=f(6),n=f(1);f=Object(D.a)("tsr",function(f,d){var m=Object(n.a)(f);d.create=U.b;d.from_values=U.e;d.copy=U.a;d.identity=U.m;d.set_sep=U.t;d.set_trans=U.v;d.set_scale=U.s;d.set_transcale=function(d,f){m.Ma("set_transcale is deprecated, use the tsr.set_trans and tsr.set_scale functions instead.");return U.w(d,f)};d.set_quat=U.r;d.get_trans_view=
function(d){m.Ma("get_trans_view is deprecated, use the tsr.get_trans functions.");return U.k(d)};d.get_trans=U.j;d.get_scale=U.i;d.get_quat_view=function(d){m.Ma("get_quat_view is deprecated, use the tsr.get_quat functions.");return U.h(d)};d.get_quat=U.g;d.invert=U.p;d.to_mat4=function(d,f){f||(f=N.create());U.x(d,f);return f};d.from_mat4=U.d;d.multiply=U.q;d.transform_vec3=U.D;d.transform_vec3_inv=U.E;d.transform_vectors=U.F;d.transform_dir_vectors=U.z;d.transform_dir_vec3=U.y;d.transform_tangents=
U.C;d.translate=U.G;d.interpolate=function(d,f,m,n){n||(n=U.b());U.o(d,f,m,n);return n}});w.a=f},function(D,w,f){D=f(0);var N=f(33),U=f(24),n=f(49),y=f(8),d=f(30),m=f(50),C=f(41),v=f(26),r=f(3);f=Object(D.a)("hmd",function(f,z){function a(){c.remove_sensor_manifold(null,"VR_CONTROLLERS")}function p(a,d){function f(e,h,d){if(0<d&&(d=b.get_active_camera())&&k.is_eye_camera(d)){var f=c.get_sensor_payload(e,h,1);e=c.get_sensor_payload(e,h,2);e=r.add(e,J,B);w.set_translation_v(d,e);if(f)if(1==a){f=y.multiply(aa,
f,A);var l=r.transformQuat(D.AXIS_MY,f,B);k.set_vertical_axis(d,l);w.set_rotation_v(d,f)}else if(2==a||3==a){e=w.get_rotation(d,T);e=y.invert(e,T);h=y.multiply(u,e,T);e=k.get_vertical_axis(d,B);Math.abs(e[2])<Math.PI/4?l=r.cross(e,D.AXIS_MY,Y):Math.abs(e[1])<Math.PI/4&&(l=r.cross(e,D.AXIS_Z,Y));r.normalize(l,l);h=r.transformQuat(l,h,K);var m=r.dot(e,h);h=r.scaleAndAdd(h,e,-m,K);r.normalize(h,h);e=r.cross(e,l,B);l=Math.acos(D.clamp(r.dot(l,h),0,1));e=D.sign(r.dot(h,e));E+=l*e;l=y.setAxisAngle(D.AXIS_Z,
-E,T);3==a?f=y.multiply(l,f,ha):(e=D.quat_project(f,D.AXIS_MZ,D.AXIS_Z,D.AXIS_Y,V),e=y.invert(e,V),f=y.multiply(e,f,V),f=y.multiply(l,f,ha));l=r.transformQuat(D.AXIS_MY,f,B);k.set_vertical_axis(d,l);w.set_rotation_v(d,f);y.copy(f,u)}}}if(d){var l=b.get_active_camera();l&&h.request_split_screen(function(){k.is_eye_camera(l)||(R=k.is_target_camera(l),O=k.is_hover_camera(l),L=k.is_static_camera(l),k.eye_setup(l));var a=c.create_elapsed_sensor(),b=c.create_hmd_position_sensor();u=w.get_rotation(l,u);
c.create_sensor_manifold(null,"HMD_ROTATE_CAMERA",c.CT_CONTINUOUS,[a,d,b],null,f)})}}var k=Object(N.a)(f),c=Object(U.a)(f),l=Object(n.a)(f),b=Object(d.a)(f),h=Object(m.a)(f),w=Object(C.a)(f),D=Object(v.a)(f),u=y.create(),E=0,R=!1,O=!1,L=!1,B=r.create(),Y=r.create(),K=r.create(),ha=y.create(),T=y.create(),V=y.create(),A=y.create(),aa=y.create(),J=r.create(),P={pivot:r.create()};z.HMD_NONE_MOUSE_ALL_AXES=0;z.HMD_ALL_AXES_MOUSE_NONE=1;z.HMD_ROLL_PITCH_MOUSE_YAW=2;z.HMD_ALL_AXES_MOUSE_YAW=3;z.enable_hmd=
function(a){var b;if(b=l.get_device_by_type_element(l.DEVICE_HMD))b=l.get_value_param(b,l.HMD_WEBVR_TYPE)&(l.HMD_WEBVR_MOBILE|l.HMD_WEBVR_DESKTOP|l.HMD_WEBVR1)?c.create_hmd_quat_sensor():c.create_gyro_quat_sensor(),p(a,b)};z.check_browser_support=function(){return!!l.can_use_device(l.DEVICE_HMD)};z.enable_controllers=function(b,h){a();if(b||h){var d=l.get_vr_controller_id(0),f=c.create_gamepad_position_sensor(d);d=c.create_gamepad_orientation_sensor(d);var e=l.get_vr_controller_id(1),k=c.create_gamepad_position_sensor(e);
e=c.create_gamepad_orientation_sensor(e);c.create_sensor_manifold(null,"VR_CONTROLLERS",c.CT_CONTINUOUS,[f,k,d,e],null,function(a,e){if(b){var d=c.get_sensor_payload(a,e,0),f=c.get_sensor_payload(a,e,2);r.add(J,d,d);w.set_translation_v(b,d);w.set_rotation_v(b,f)}h&&(d=c.get_sensor_payload(a,e,1),a=c.get_sensor_payload(a,e,3),r.add(J,d,d),w.set_translation_v(h,d),w.set_rotation_v(h,a))})}};z.disable_controllers=a;z.disable_hmd=function(){if(c.check_sensor_manifold(null,"HMD_ROTATE_CAMERA")){c.remove_sensor_manifold(null,
"HMD_ROTATE_CAMERA");h.exit_split_screen();var a=b.get_active_camera();R?k.target_setup(a,P):O?k.hover_setup(a,P):L&&k.static_setup(a,P);k.set_vertical_axis(a,D.AXIS_Z);var d=w.get_rotation(a,ha);w.set_rotation_v(a,d)}};z.set_rotate_quat=function(a){y.copy(a,aa)};z.get_rotate_quat=function(a){y.copy(aa,a);return a};z.set_position=function(a){y.copy(a,J)};z.get_position=function(a){y.copy(J,a);return a}});w.a=f},function(D,w,f){D=f(0);var N=f(9),U=f(10),n=f(23),y=f(1);f=Object(D.a)("sfx",function(d,
f){var m=Object(N.a)(d),v=Object(U.a)(d),r=Object(n.a)(d),p=Object(y.a)(d);f.play=function(d,a,f){r.play(d,a||0,f||0)};f.play_def=function(d){r.play_def(d)};f.is_playing=function(d){return r.is_playing(d)};f.stop=function(d){r.stop(d)};f.pause=function(d){r.bU(d)};f.resume=function(d){r.dU(d)};f.loop_stop=function(d,a,f){r.loop_stop(d,a||0,f||!1)};f.playrate=function(d,a){r.playrate(d,a)};f.get_playrate=function(d){return r.get_playrate(d)};f.cyclic=function(d,a){r.cyclic(d,a)};f.is_cyclic=function(d){return r.is_cyclic(d)};
f.listener_reset_speed=function(){r.listener_stride()};f.listener_stride=function(){r.listener_stride()};f.speaker_reset_speed=function(d){r.speaker_stride(d)};f.speaker_stride=function(d){r.speaker_stride(d)};f.get_volume=function(d){return d&&"object"===typeof d?r.get_volume(d):r.rQ()};f.set_volume=function(d,a){d&&"object"===typeof d?r.set_volume(d,a):r.zT(a)};f.mute=function(d,a){d&&"object"===typeof d?r.mute(d,a):r.aS(a)};f.is_muted=function(d){return d&&"object"===typeof d?r.is_muted(d):r.fR()};
f.get_speaker_objects=function(){return r.get_speaker_objects().slice(0)};f.check_active_speakers=r.check_active_speakers;f.set_compressor_params=function(d){r.set_compressor_params(v.get_active(),d)};f.get_compressor_params=function(){return r.get_compressor_params(v.get_active())};f.duck=function(d,a,f){d&&"object"===typeof d?r.duck(d,a,f):r.$O(a,f)};f.unduck=function(d){d&&"object"===typeof d?r.unduck(d):r.BU()};f.apply_playlist=r.apply_playlist;f.clear_playlist=r.clear_playlist;f.detect_audio_container=
r.detect_audio_container;f.detect_video_container=r.detect_video_container;f.set_positional_params=r.set_positional_params;f.get_positional_params=r.get_positional_params;f.set_filter_params=r.set_filter_params;f.get_filter_params=r.get_filter_params;f.get_filter_freq_response=r.get_filter_freq_response;f.get_duration=function(d){return d&&m.is_speaker(d)?r.get_duration(d):(p.error('Object "'+(d?d.name:void 0)+'" is not a valid speaker'),0)}});w.a=f},function(D,w,f){D=f(0);var N=f(38),U=f(9),n=f(1);
f=Object(D.a)("animation",function(f,d){var m=Object(N.a)(f),y=Object(U.a)(f),v=Object(n.a)(f);d.SLOT_0=m.SLOT_0;d.SLOT_1=m.SLOT_1;d.SLOT_2=m.SLOT_2;d.SLOT_3=m.SLOT_3;d.SLOT_4=m.SLOT_4;d.SLOT_5=m.SLOT_5;d.SLOT_6=m.SLOT_6;d.SLOT_7=m.SLOT_7;d.SLOT_ALL=m.SLOT_ALL;d.OBJ_ANIM_TYPE_NONE=m.OBJ_ANIM_TYPE_NONE;d.OBJ_ANIM_TYPE_ARMATURE=m.OBJ_ANIM_TYPE_ARMATURE;d.OBJ_ANIM_TYPE_OBJECT=m.OBJ_ANIM_TYPE_OBJECT;d.OBJ_ANIM_TYPE_VERTEX=m.OBJ_ANIM_TYPE_VERTEX;d.OBJ_ANIM_TYPE_SOUND=m.OBJ_ANIM_TYPE_SOUND;d.OBJ_ANIM_TYPE_PARTICLES=
m.OBJ_ANIM_TYPE_PARTICLES;d.OBJ_ANIM_TYPE_MATERIAL=m.OBJ_ANIM_TYPE_MATERIAL;d.OBJ_ANIM_TYPE_STATIC=m.OBJ_ANIM_TYPE_STATIC;d.AB_CYCLIC=m.AB_CYCLIC;d.AB_FINISH_RESET=m.AB_FINISH_RESET;d.AB_FINISH_STOP=m.AB_FINISH_STOP;d.is_animated=function(d){return m.is_animated(d)};d.get_anim_names=function(d){return m.pH(d)?m.get_anim_names(d):[]};d.get_current_anim_name=function(d,f){if(!m.is_animated(d))return null;f=f||m.SLOT_0;return m.PP(d,f)};d.apply=function(d,f,n){if(n>m.SLOT_7)v.error("Can't apply animation to slot "+
n+' for object "'+d.name+'". Object can have maximum of 8 animation slots');else{n=n||m.SLOT_0;if(m.is_animated(d)){var a=m.get_slot_num_by_anim(d,f);if(-1!=a&&a!=n){v.error('Animation "'+f+'" is already applied to object "'+d.name+'" (slot "'+a+'").');return}}m.vJ(d,f)?m.apply(d,null,f,n):v.error('No fcurves in action "'+f+'"')}};d.apply_ext=function(d,f,n){if(n>m.SLOT_7)v.error("Can't apply animation to slot "+n+' for object "'+d.name+'". Object can have maximum of 8 animation slots');else{n=n||
m.SLOT_0;var a=f[0];m.vJ(d,a)?m.apply(d,f.slice(1),a,n):v.error('No fcurves in action "'+a+'"')}};d.remove=function(d){m.remove(d)};d.remove_slot_animation=function(d,f){m.is_animated(d)&&(f=f||m.SLOT_0,m.remove_slot_animation(d,f))};d.apply_def=function(d){m.apply_def(d)};d.play=function(d,f,n){m.is_animated(d)?(n=n||m.SLOT_0,m.play(d,f,n),m.WU(d,0,n,!0)):v.error('Object "'+d.name+'" has no applied animation')};d.stop=function(d,f){m.is_animated(d)&&(f=f||m.SLOT_0,m.stop(d,f))};d.is_play=function(d,
f){if(!m.is_animated(d))return!1;f=f||m.SLOT_0;return m.is_play(d,f)};d.set_frame=function(d,f,n){m.is_animated(d)&&(n=n||m.SLOT_0,m.set_frame(d,f,n))};d.set_first_frame=function(d,f){m.is_animated(d)&&m.set_first_frame(d,f)};d.set_last_frame=function(d,f){if(m.is_animated(d)){f=f||m.SLOT_0;var n=m.get_anim_start_frame(d,f),a=m.get_anim_length(d,f);m.set_frame(d,n+a-m.fK,f)}};d.get_frame=function(d,f){if(!m.is_animated(d))return 0;f=f||m.SLOT_0;return m.bA(d,f)};d.set_speed=function(d,f,n){m.is_animated(d)&&
(n=n||m.SLOT_0,m.set_speed(d,f||1,n))};d.get_speed=function(d,f){if(!m.is_animated(d))return 0;f=f||m.SLOT_0;return d.Za[f]?m.get_speed(d,f):0};d.get_anim_start_frame=function(d,f){return m.is_animated(d)&&(f=f||m.SLOT_0,d.Za[f])?m.get_anim_start_frame(d,f):-1};d.get_anim_length=function(d,f){return m.is_animated(d)&&(f=f||m.SLOT_0,d.Za[f])?m.get_anim_length(d,f):-1};d.set_behavior=function(d,f,n){m.is_animated(d)&&(n=n||m.SLOT_0,m.set_behavior(d,f,n))};d.get_behavior=function(d,f){if(!m.is_animated(d))return null;
f=f||m.SLOT_0;return m.get_behavior(d,f)};d.apply_smoothing=function(d,f,n,a){a=a||m.SLOT_0;m.is_animated(d)&&m.apply_smoothing(d,f,n,a)};d.frame_to_sec=function(d){return m.frame_to_sec(d)};d.get_slot_num_by_anim=function(d,f){return m.is_animated(d)&&f?m.get_slot_num_by_anim(d,f):-1};d.get_anim_type=function(d,f){return m.is_animated(d)?m.get_anim_type(d,f):null};d.apply_to_first_empty_slot=function(d,f){return m.apply_to_first_empty_slot(d,f)};d.get_skel_mix_factor=function(d){return d.ka.Zf};
d.set_skel_mix_factor=function(d,f,n,a){y.is_armature(d)?(f=Math.min(Math.max(f,0),1),d.ka.Zf!=f&&m.set_skel_mix_factor(d,f,n||0,a||null)):v.error("Can't blend animation. Object \""+d.name+'" is not armature')};d.set_skeletal_slots=function(d,f,m,a){f=void 0==f?-1:f;m=void 0==f?-1:m;var n=d.ka.Mi;0<=f&&(n[0]=f);0<=m&&(n[1]=m);d.ka.Zf=a||0};d.get_first_skeletal_slot=function(d){return d.ka.Mi[0]};d.get_second_skeletal_slot=function(d){return d.ka.Mi[1]};d.mix_from_cur_pos=function(d,f,n,a){m.mix_from_cur_pos(d,
f,n||0,a||null)}});w.a=f},function(D,w,f){Object.defineProperty(w,"__esModule",{value:!0});D=f(32);var N=f(85),U=f(95),n=f(96),y=f(97),d=f(98),m=f(81),C=f(99),v=f(100),r=f(101),p=f(102),z=f(103),a=f(104),H=f(69),k=f(105),c=f(83),l=f(106),b=f(107),h=f(33),G=f(76),ka=f(67),u=f(40),E=f(24),R=f(77),O=f(78),L=f(108),B=f(109),Y=f(49),K=f(110),ha=f(111),T=f(61),V=f(112),A=f(113),aa=f(114),J=f(115),P=f(116),q=f(54),da=f(117),I=f(30),t=f(50),e=f(82),ma=f(118),ja=f(68),pa=f(41),ta=f(80),Oa=f(26),M=f(119),oa=
f(1),ca=f(3),ea=f(7),Da=f(27),S=f(21),Na=f(8);D.a.LW=N.a;D.a.WW=U.a;D.a.yh=n.a;D.a.IX=y.a;D.a.JX=d.a;D.a.NX=m.a;D.a.OX=C.a;D.a.nY=v.a;D.a.oY=r.a;D.a.rY=p.a;D.a.uY=z.a;D.a.EY=a.a;D.a.Jx=H.a;D.a.anchors=k.a;D.a.Wk=c.a;D.a.OW=l.a;D.a.se=b.a;D.a.qa=h.a;D.a.$W=G.a;D.a.aX=ka.a;D.a.bX=u.a;D.a.controls=E.a;D.a.data=R.a;D.a.debug=O.a;D.a.gf=L.a;D.a.PX=B.a;D.a.input=Y.a;D.a.hj=K.a;D.a.hY=ha.a;D.a.jY=T.a;D.a.lY=V.a;D.a.mY=A.a;D.a.qY=aa.a;D.a.Sb=J.a;D.a.tY=P.a;D.a.xa=q.a;D.a.yY=da.a;D.a.An=I.a;D.a.screen=t.a;
D.a.Ra=e.a;D.a.Ua=ma.a;D.a.time=ja.a;D.a.transform=pa.a;D.a.QY=ta.a;D.a.UY=Oa.a;D.a.version=M.a;D.a.print=oa.a;D.a.vec3=ca;D.a.vec4=ea;D.a.mat3=Da;D.a.mat4=S;D.a.quat=Na;D.a.register("vec3",function(a){for(var b in ca)a[b]=ca[b]});D.a.register("vec4",function(a){for(var b in ea)a[b]=ea[b]});D.a.register("mat3",function(a){for(var b in Da)a[b]=Da[b]});D.a.register("mat4",function(a){for(var b in S)a[b]=S[b]});D.a.register("quat",function(a){for(var b in Na)a[b]=Na[b]});w["default"]=D.a},function(D,
w,f){D=f(0);var N=f(33),U=f(76),n=f(67),y=f(40),d=f(24),m=f(77),C=f(78),v=f(49),r=f(61),p=f(54),z=f(1),a=f(50),H=f(30),k=f(41),c=f(26),l=f(3);f=Object(D.a)("app",function(b,h){function f(){var a=ta.is_paused();document.addEventListener("visibilitychange",function(){document.hidden?(a=ta.is_paused(),ta.pause()):a||ta.resume()},!1)}function w(){var a=0,b=t.get_container(),c=ta.is_paused(),e=!0;ta.append_loop_cb(function(){if(0==a%10){var h=b.getBoundingClientRect();h.top>window.innerHeight||0>h.bottom?
(e&&(c=ta.is_paused()),ta.pause(),e=!1):c||e||(ta.resume(),e=!0)}a++})}function u(a,b,c,e){var h=document.createElement("canvas"),g=document.getElementById(a);g||(M.error('Warning: canvas container "'+a+'" not found, appending to body'),g=document.body);h.style.position="absolute";h.style.left=0;h.style.top=0;h.style.width=g.offsetWidth+"px";h.style.height=g.offsetHeight+"px";h.width=g.offsetWidth*window.devicePixelRatio;h.height=g.offsetHeight*window.devicePixelRatio;b?(a=document.createElement("canvas"),
a.style.position="absolute",h.style.left=0,h.style.top=0,a.style.pointerEvents="none"):a=null;g.appendChild(h);if(!ta.init(h,a))return c&&J("Browser could not initialize WebGL","For more info visit","https://www.blend4web.com/doc/en/problems_and_solutions.html#problems-upon-startup",e),!1;a&&t.insert_to_container(a,"LAST");return!0}function E(a,b){a?(b&&(document.getElementById(b).style.display="block"),Na=document.getElementById(a)):(Na=document.createElement("div"),Na.innerHTML=0,Na.style.cssText=
"position:absolute;font-family: Arial, sans-serif;top: 20px;right: 20px;text-shadow: 0px 0px 6px #000;font-size: 40px;line-height: 50px;font-weight: bold;color: #fff;",t.insert_to_container(Na,"JUST_AFTER_CANVAS"))}function R(a,b){a=String(a);b&&(a+="/"+String(b));Na.innerHTML=a}function O(a){a=document.getElementById(a);var b=a.cloneNode(!0);a.parentNode.replaceChild(b,a);return b}function D(a,b,c){var e=Math.max(q.hover_get_distance(a),1),h=ea.get_rotation(a,Q);b=Da.quat_to_dir(h,b,ia);b[2]=0;l.normalize(b,
b);l.scale(b,e*c,b);c=ea.get_translation(a,ra);l.add(c,b,c);q.set_translation(a,c)}function B(a,b){var c=q.hover_get_vertical_limits(a,ya);if(c.up!=c.down){var e=q.get_camera_angles(a,sa)[1];c=(c.down-e)/(c.down-c.up);e=q.hover_get_distance_limits(a,ya);c=Math.max(c,2/e.max);q.rotate_camera(a,0,c*b)}}function Y(a,b,c,e){ea.move_local(a,5*b,5*c,5*e)}function K(a,b,c){var e=q.target_get_distance(a),h=Math.abs(b);c=Math.pow(h*c,1-Math.pow(h*c,.15));ea.move_local(a,0,0,0>b?.001<e?-e*c:0:c/(1-c)*e)}function ha(a,
b,c,e,h){for(a=e*c;0<b;--b)e+=a,h+=a,a=e*c;return h}function T(a,b,c,e,h,g){g?(h=q.target_get_pivot(a,ia),g=q.get_translation(a),h=l.dist(h,g)+e,e=0<b?ha(a,b,-c,h,e):ha(a,-b,c/(1-c),h,e)):e-=b*h*c;return e}function V(a,b,c,h,d,g){function f(a,b,c,g){if(1==c){q.get_velocities(a,w);var h=C?.003*w.trans:.003*w.rot;c=e.get_sensor_value(a,b,0);e.get_sensor_payload(a,b,0).gesture===e.PL_SINGLE_TOUCH_MOVE?(za+="X"==g?-c*h:0,Fa+="Y"==g?-c*h:0):e.get_sensor_payload(a,b,0).gesture===e.PL_MULTITOUCH_MOVE_PAN&&
(a=C?.003*w.rot:7.5E-4*w.trans,Na+="X"==g?-c*a:0,lb+="Y"==g?-c*a:0)}}function k(a,b,c,g){if(1==c){c=e.get_sensor_value(a,b,1);q.get_velocities(a,w);if(C)h=.003*w.trans,d=7.5E-4*w.rot;else var h=.003*w.rot,d=7.5E-4*w.trans;if(1===e.get_sensor_payload(a,b,0).which)qa+="X"==g?-c*h:0,ta+="Y"==g?-c*h:0;else if(2===e.get_sensor_payload(a,b,0).which||3===e.get_sensor_payload(a,b,0).which)na+="X"==g?-c*d:0,ha+="Y"==g?-c*d:0}}function m(a){return a[0]&&(a[1]||a[2]||-.1>a[3])}function t(a){return a[0]&&(a[1]||
a[2]||.1<a[3])}function n(a){return a[0]&&(a[1]||-.1>a[2])}function u(a){return a[0]&&(a[1]||.1<a[2])}function r(a){return a[0]&&(a[1]||a[2]||a[3])}function p(a,b,c){if(1==c)switch(c=e.get_sensor_value(a,b,0),q.get_velocities(a,w),b){case "FORWARD":y?J[0]=1:C?(b=q.get_camera_angles(a,sa)[1],b=Math.abs(b)>=Math.PI/4?Da.AXIS_Y:Da.AXIS_MZ,D(a,b,.5*w.trans*c)):z?K(a,-w.zoom,c):Y(a,0,0,-w.trans*c);break;case "BACKWARD":y?J[0]=-1:C?(b=q.get_camera_angles(a,sa)[1],b=Math.abs(b)>=Math.PI/4?Da.AXIS_MY:Da.AXIS_Z,
D(a,b,.5*w.trans*c)):z?K(a,w.zoom,c):Y(a,0,0,w.trans*c);break;case "UP":C?B(a,30*-w.zoom*c):y||Y(a,0,w.trans*c,0);break;case "DOWN":C?B(a,30*w.zoom*c):y||Y(a,0,-w.trans*c,0);break;case "LEFT":y?J[1]=1:C?D(a,Da.AXIS_MX,.5*w.trans*c):Y(a,-w.trans*c,0,0);break;case "RIGHT":y?J[1]=-1:C?D(a,Da.AXIS_X,.5*w.trans*c):Y(a,w.trans*c,0,0);break;case "ROT_LEFT":z?q.rotate_camera(a,.75*-w.rot*c,0):q.rotate_camera(a,.75*w.rot*c,0);break;case "ROT_RIGHT":z?q.rotate_camera(a,.75*w.rot*c,0):q.rotate_camera(a,.75*
-w.rot*c,0);break;case "ROT_UP":z?q.rotate_camera(a,0,.75*-w.rot*c):q.rotate_camera(a,0,.75*w.rot*c);break;case "ROT_DOWN":z?q.rotate_camera(a,0,.75*w.rot*c):q.rotate_camera(a,0,.75*-w.rot*c)}else switch(b){case "FORWARD":case "BACKWARD":y&&(J[0]=0);break;case "LEFT":case "RIGHT":y&&(J[1]=0)}y&&(Oa.set_character_move_dir(y,J[0],J[1]),a=q.get_camera_angles_char(a,la),Oa.set_character_rotation_h(y,a[0]),Oa.set_character_vert_move_dir_angle(y,a[1]))}wa=a;X=b;Ga=c;Ha=h;ua=d;Ca=g;var v=ca.get_active_camera();
A(v);var z=!1,y=null,C=!1;switch(q.get_move_style(v)){case q.MS_TARGET_CONTROLS:z=!a;break;case q.MS_EYE_CONTROLS:y=ca.get_first_character();break;case q.MS_STATIC:return;case q.MS_HOVER_CONTROLS:C=!0}var w=q.get_velocities(v,Aa);a=e.create_elapsed_sensor();if(Oa.has_simulated_physics(v)){var E=e.create_collision_sensor(v,null,!0);e.create_sensor_manifold(v,"CAMERA_COLLISION",e.CT_POSITIVE,[E],null,function(a,b){var c=e.get_sensor_payload(a,b,0).coll_dist;if(0>c){var g=e.get_sensor_payload(a,b,0).coll_norm;
b=ia;l.scale(g,-.25*c,b);c=ea.get_translation(a,ra);l.add(c,b,c);ea.set_translation_v(a,c)}})}if(y){E=ea.get_translation(v);var G=ea.get_rotation(v);G=Da.cam_quat_to_mesh_quat(G);E[2]-=.5;Oa.set_transform(y,E,G);I.append_stiff_trans(v,y,[0,0,.5]);var J=new Float32Array(2),P=!0;Oa.set_character_move_type(y,Oa.CM_FLY);e.create_kb_sensor_manifold(v,"TOGGLE_CHAR_MOVE_TYPE",e.CT_SHOT,e.KEY_C,function(){P=!P;Oa.set_character_move_type(y,P?Oa.CM_FLY:Oa.CM_WALK)})}var R,O,ja,H,M,aa,L,ma,da;g?E=G=aa=L=ma=
da=e.create_custom_sensor(0):(da=pa.check_enable_gamepad_indices(),G=da.length?da[da.length-1]:0,E=e.create_gamepad_btn_sensor(pa.GMPD_BUTTON_6,G),G=e.create_gamepad_btn_sensor(pa.GMPD_BUTTON_7,G),aa=e.create_gamepad_axis_sensor(pa.GMPD_AXIS_0,da),L=e.create_gamepad_axis_sensor(pa.GMPD_AXIS_1,da),ma=e.create_gamepad_axis_sensor(pa.GMPD_AXIS_2,da),da=e.create_gamepad_axis_sensor(pa.GMPD_AXIS_3,da));b?b=R=O=ja=H=M=e.create_custom_sensor(0):(b=e.create_keyboard_sensor(e.KEY_W),R=e.create_keyboard_sensor(e.KEY_S),
O=e.create_keyboard_sensor(e.KEY_A),ja=e.create_keyboard_sensor(e.KEY_D),H=e.create_keyboard_sensor(e.KEY_R),M=e.create_keyboard_sensor(e.KEY_F));var V=e.create_keyboard_sensor(e.KEY_UP),N=e.create_keyboard_sensor(e.KEY_DOWN),F=e.create_keyboard_sensor(e.KEY_LEFT),ka=e.create_keyboard_sensor(e.KEY_RIGHT);C||(e.create_sensor_manifold(v,"FORWARD",e.CT_CONTINUOUS,[a,b,L],n,p),e.create_sensor_manifold(v,"BACKWARD",e.CT_CONTINUOUS,[a,R,L],u,p));z?(e.create_sensor_manifold(v,"ROT_UP",e.CT_CONTINUOUS,[a,
V,H,da],m,p),e.create_sensor_manifold(v,"ROT_DOWN",e.CT_CONTINUOUS,[a,N,M,da],t,p),e.create_sensor_manifold(v,"ROT_LEFT",e.CT_CONTINUOUS,[a,F,O,ma],m,p),e.create_sensor_manifold(v,"ROT_RIGHT",e.CT_CONTINUOUS,[a,ka,ja,ma],t,p)):C?(e.create_sensor_manifold(v,"LEFT",e.CT_CONTINUOUS,[a,F,O,aa],m,p),e.create_sensor_manifold(v,"RIGHT",e.CT_CONTINUOUS,[a,ka,ja,aa],t,p),e.create_sensor_manifold(v,"FORWARD",e.CT_CONTINUOUS,[a,V,b,L],m,p),e.create_sensor_manifold(v,"BACKWARD",e.CT_CONTINUOUS,[a,N,R,L],t,p),
e.create_sensor_manifold(v,"UP",e.CT_CONTINUOUS,[a,M,da],u,p),e.create_sensor_manifold(v,"DOWN",e.CT_CONTINUOUS,[a,H,da],n,p)):(e.create_sensor_manifold(v,"UP",e.CT_CONTINUOUS,[a,H,E],r,p),e.create_sensor_manifold(v,"DOWN",e.CT_CONTINUOUS,[a,M,G],r,p),e.create_sensor_manifold(v,"LEFT",e.CT_CONTINUOUS,[a,O,aa],n,p),e.create_sensor_manifold(v,"RIGHT",e.CT_CONTINUOUS,[a,ja,aa],u,p),e.create_sensor_manifold(v,"ROT_UP",e.CT_CONTINUOUS,[a,V,da],n,p),e.create_sensor_manifold(v,"ROT_DOWN",e.CT_CONTINUOUS,
[a,N,da],u,p),e.create_sensor_manifold(v,"ROT_LEFT",e.CT_CONTINUOUS,[a,F,ma],n,p),e.create_sensor_manifold(v,"ROT_RIGHT",e.CT_CONTINUOUS,[a,ka,ma],u,p));if(!c){var Q=0;c=e.create_mouse_wheel_sensor(h);var U=0;L=e.create_touch_zoom_sensor(h);e.create_sensor_manifold(v,"MOUSE_WHEEL",e.CT_LEVEL,[c],null,function(a,b,c){1==c&&(b=e.get_sensor_value(a,b,0),q.get_velocities(a,w),z||C?Q=T(a,b,w.zoom,Q,2,z):(w.trans*=1+b*w.zoom,q.set_velocities(a,w)))});e.create_sensor_manifold(v,"TOUCH_ZOOM",e.CT_LEVEL,[L],
null,function(a,b,c){1==c&&(c=e.get_sensor_value(a,b,0),q.get_velocities(a,w),e.get_sensor_payload(a,b,0)===e.PL_MULTITOUCH_MOVE_ZOOM&&(U=T(a,c,.03*w.zoom,U,2,z)))});e.create_sensor_manifold(v,"ZOOM_INTERPOL",e.CT_POSITIVE,[a],null,function(a,b){if(z||C)if(1E-5<Math.abs(Q)||1E-5<Math.abs(U)){var c=e.get_sensor_value(a,b,0);b=Da.smooth(Q,0,c,.1*S);Q-=b;c=Da.smooth(U,0,c,.15*S);U-=c;C?B(a,-(b+c)):(b=q.target_get_distance(a)+b+c,b=Math.max(b,.001),q.target_set_distance(a,b))}else U=Q=0})}var qa=0,ta=
0,na=0,ha=0,ya=0,oa=0;g||(g=function(a){q.get_velocities(a,w);ya+=.002*w.trans},c=function(a){q.get_velocities(a,w);oa+=.05*w.zoom},L=function(a){q.get_velocities(a,w);ya-=.002*w.trans},da=function(a){q.get_velocities(a,w);oa-=.05*w.zoom},z?(e.create_sensor_manifold(v,"GMPD_PAN_Y_POS",e.CT_CONTINUOUS,[E],null,c),e.create_sensor_manifold(v,"GMPD_PAN_Y_NEG",e.CT_CONTINUOUS,[G],null,da),e.create_sensor_manifold(v,"GMPD_PAN_X_POS",e.CT_CONTINUOUS,[aa],function(a){return-.1>a[0]},L),e.create_sensor_manifold(v,
"GMPD_PAN_X_NEG",e.CT_CONTINUOUS,[aa],function(a){return.1<a[0]},g)):C&&(e.create_sensor_manifold(v,"GMPD_PAN_X_POS",e.CT_CONTINUOUS,[ma],function(a){return-.1>a[0]},L),e.create_sensor_manifold(v,"GMPD_PAN_X_NEG",e.CT_CONTINUOUS,[ma],function(a){return.1<a[0]},g)));if(d){d=e.create_mouse_move_sensor("X",window);g=e.create_mouse_move_sensor("Y",window);E=e.create_mouse_click_sensor(h);c=e.create_mouse_click_sensor(window);var xa=!1;G=function(a){a[2]?xa=!0:a[0]||(xa=!1);return xa&&a[0]};e.create_sensor_manifold(v,
"MOUSE_X",e.CT_POSITIVE,[c,d,E],G,k,"X");e.create_sensor_manifold(v,"MOUSE_Y",e.CT_POSITIVE,[c,g,E],G,k,"Y");d=pa.get_device_by_type_element(pa.DEVICE_MOUSE,window);pa.switch_prevent_default(d,!1)}else d=e.create_mouse_move_sensor("X",h),g=e.create_mouse_move_sensor("Y",h),E=e.create_mouse_click_sensor(h),e.create_sensor_manifold(v,"MOUSE_X",e.CT_POSITIVE,[E,d],null,k,"X"),e.create_sensor_manifold(v,"MOUSE_Y",e.CT_POSITIVE,[E,g],null,k,"Y");var za=0,Fa=0,Na=0,lb=0;d=e.create_touch_move_sensor("X",
h);h=e.create_touch_move_sensor("Y",h);e.create_sensor_manifold(v,"TOUCH_X",e.CT_POSITIVE,[d],null,f,"X");e.create_sensor_manifold(v,"TOUCH_Y",e.CT_POSITIVE,[h],null,f,"Y");e.create_sensor_manifold(v,"ROT_TRANS_INTERPOL",e.CT_POSITIVE,[a],null,function(a,b){if(1E-5<Math.abs(qa)||1E-5<Math.abs(ta)||1E-5<Math.abs(za)||1E-5<Math.abs(Fa)||1E-5<Math.abs(na)||1E-5<Math.abs(ha)||1E-5<Math.abs(Na)||1E-5<Math.abs(lb)||1E-5<Math.abs(ya)||1E-5<Math.abs(oa)){var c=e.get_sensor_value(a,b,0),g=Da.smooth(qa,0,c,
.08*S),h=Da.smooth(ta,0,c,.08*S);qa-=g;ta-=h;var d=Da.smooth(za,0,c,.12*S),f=Da.smooth(Fa,0,c,.12*S);za-=d;Fa-=f;b=Da.smooth(na,0,c,.08*S);var k=Da.smooth(ha,0,c,.08*S);na-=b;ha-=k;var l=Da.smooth(Na,0,c,.12*S),m=Da.smooth(lb,0,c,.12*S);Na-=l;lb-=m;var t=Da.smooth(ya,0,c,.08*S);c=Da.smooth(oa,0,c,.08*S);ya-=t;oa-=c;z?(q.rotate_camera(a,g+d,h+f),h=q.target_get_distance(a),q.target_pan_pivot(a,h*(b+l+t),h*(k+m+c))):C?(g+d&&D(a,Da.AXIS_X,.2*(g+d)),h+f&&(k=q.get_camera_angles(a,sa)[1],D(a,Math.abs(k)>
Math.PI/4?Da.AXIS_MY:Da.AXIS_Z,.2*(h+f))),q.rotate_camera(a,b+l+t,0)):(q.rotate_camera(a,.5*(g+d),.5*(h+f)),y&&(a=q.get_camera_angles_char(a,la),Oa.set_character_rotation_h(y,a[0]),Oa.set_character_vert_move_dir_angle(y,a[1])))}});e.create_kb_sensor_manifold(v,"DEC_STEREO_DIST",e.CT_SHOT,e.KEY_LEFT_SQ_BRACKET,function(a){var b=q.get_stereo_distance(a);q.set_stereo_distance(a,.9*b)});e.create_kb_sensor_manifold(v,"INC_STEREO_DIST",e.CT_SHOT,e.KEY_RIGHT_SQ_BRACKET,function(a){var b=q.get_stereo_distance(a);
q.set_stereo_distance(a,1.1*b)})}function A(a){var b=q.get_move_style(a),c=e.create_callback_sensor(function(){var c=q.get_move_style(a),e=c!=b;b=c;return e});e.create_sensor_manifold(a,"CHANGE_MOVE_STYLE",e.CT_POSITIVE,[c],null,function(){aa();V(wa,X,Ga,Ha,ua,Ca)})}function aa(){var a=ca.get_active_camera();e.check_sensor_manifold(a,"TOGGLE_CHAR_MOVE_TYPE")&&ca.get_first_character()&&I.remove(a);for(var b="FORWARD BACKWARD ROT_UP ROT_DOWN ROT_LEFT ROT_RIGHT UP DOWN LEFT RIGHT MOUSE_WHEEL TOUCH_ZOOM ZOOM_INTERPOL MOUSE_X MOUSE_Y TOUCH_X TOUCH_Y ROT_TRANS_INTERPOL CHANGE_MOVE_STYLE TOGGLE_CHAR_MOVE_TYPE".split(" "),
c=0;c<b.length;c++)e.remove_sensor_manifold(a,b[c])}function J(a,b,c,e){var h=document.createElement("div"),g=document.createElement("div"),d=document.createElement("div");if(e)for(var f=0;f<e.length;f++){var k=document.getElementById(e[f]);k&&k.parentNode.removeChild(k)}h.style.cssText="z-index:10;width:100%;height:auto;position:absolute;top:50%;margin-top:150px;text-align:center;";g.style.cssText="color:#fff;font-size:24px;";d.style.cssText="color:#fff;font-size:20px;";g.innerHTML=a;d.innerHTML=
b+'   <a style="color:#fff;font-size:20px;width:100%;" href="'+c+'">'+c.replace("https://www.","")+"</a>";h.appendChild(g);h.appendChild(d);document.body.appendChild(h)}function P(a,b,c,e,h){function g(){var f=performance.now()-d;h(b+f*(c-b)/e);(f>=e||!a.parentNode)&&ta.remove_loop_cb(g)}var d=performance.now();ta.append_loop_cb(g)}var q=Object(N.a)(b),da=Object(U.a)(b),I=Object(n.a)(b),t=Object(y.a)(b),e=Object(d.a)(b),ma=Object(m.a)(b),ja=Object(C.a)(b),pa=Object(v.a)(b),ta=Object(r.a)(b),Oa=Object(p.a)(b),
M=Object(z.a)(b),oa=Object(a.a)(b),ca=Object(H.a)(b),ea=Object(k.a)(b),Da=Object(c.a)(b),S=1,Na=null,wa=!1,X=!1,Ga=!1,Ha=null,ua=!1,Ca=!1,la=new Float32Array(2),sa=new Float32Array(2),ia=new Float32Array(3),ra=new Float32Array(3),Q=new Float32Array(4),Aa={},ya={};h.init=function(a){function b(){var a=u(g,G,v,k),b=t.get_canvas();if(a){var c=t.get_container();t.resize_to_container();z&&(E(l,q),ta.set_fps_callback(R));p&&(f(),w());m&&ta.append_loop_cb(function(){c.style.height=c.clientWidth/m+"px"});
d&&ta.append_loop_cb(function(){t.resize_to_container()});y&&ta.append_loop_cb(function(){t.force_offsets_updating()});r&&da.reset_limits();C==da.P_AUTO?ja.test_performance(function(a,c){0==a?(M.log("QUALITY TEST RESULT: UNSUPPORTED, using HIGH"),da.apply_quality(da.P_HIGH)):1.5>c?(M.log("QUALITY TEST RESULT: LOW ("+c.toFixed(1)+" GB/s)"),da.apply_quality(da.P_LOW)):(M.log("QUALITY TEST RESULT: HIGH ("+c.toFixed(1)+" GB/s)"),da.apply_quality(da.P_HIGH));h(b,!0)}):h(b,!0)}else h(b,!1)}function c(a){a.keyCode==
e.KEY_P&&(ta.is_paused()?ta.resume():ta.pause())}function h(){}a=a||{};var d=!1,g=null,k=null,l=null,m=0,q=null,n=!0,r=!1,p=!0,v=!0,B=!1,z=!1,A=!1,y=!1,C=da.get("quality"),I;for(I in a)switch(I){case "canvas_container_id":g=a.canvas_container_id;break;case "callback":h=a.callback;break;case "autoresize":d=a.autoresize;break;case "show_hud_debug_info":A=a.show_hud_debug_info;break;case "sfx_mix_mode":B=a.sfx_mix_mode;break;case "show_fps":z=a.show_fps;break;case "track_container_position":y=a.track_container_position;
M.Ma("track_container_position deprecated. Not needed anymore. Use the container.get_coords_target_space method.");break;case "fps_wrapper_id":q=a.fps_wrapper_id;break;case "fps_elem_id":l=a.fps_elem_id;break;case "error_purge_elements":k=a.error_purge_elements;break;case "report_init_failure":v=a.report_init_failure;break;case "pause_invisible":p=a.pause_invisible;break;case "key_pause_enabled":n=a.key_pause_enabled;break;case "force_container_ratio":m=a.force_container_ratio;break;case "min_capabilities":r=
a.min_capabilities;break;case "quality":C=a.quality;break;default:da.set(I,a[I])}C!=da.P_AUTO&&da.set("quality",C);n&&document.addEventListener("keydown",c,!1);da.set("show_hud_debug_info",A);da.set("sfx_mix_mode",B);var G=A||B||null;"complete"==document.readyState?window.setTimeout(b,0):window.addEventListener("load",b,!1);window.addEventListener("unload",function(){ma.cleanup()},!1)};h.set_onclick=function(a,b){var c=O(a);c.addEventListener("mouseup",function(){b(c.value)},!1)};h.set_onchange=function(a,
b){var c=O(a);c.addEventListener("change",function(){var a=c.checked;b(void 0!=a?a:c.value)},!1)};h.set_onkeypress=function(a,b){var c=O(a);c.addEventListener("keypress",function(a){b(a.keyCode,c.value)},!1)};h.enable_camera_controls=V;h.disable_camera_controls=aa;h.enable_object_controls=function(a){function b(a){return a[0]&&(a[1]||a[2])}function c(a,b,c){if(1==c)switch(c=e.get_sensor_value(a,b,0),b){case "FORWARD":h?Oa.vehicle_throttle(a,1):ea.move_local(a,0,-1*c,0);break;case "BACKWARD":h?Oa.vehicle_throttle(a,
-1):ea.move_local(a,0,c,0);break;case "LEFT":h?Oa.vehicle_steer(a,-1):ea.move_local(a,c,0,0);break;case "RIGHT":h?Oa.vehicle_steer(a,1):ea.move_local(a,-1*c,0,0)}else switch(b){case "FORWARD":case "BACKWARD":h&&Oa.vehicle_throttle(a,0);break;case "LEFT":case "RIGHT":h&&Oa.vehicle_steer(a,0)}}var h=Oa.is_vehicle_chassis(a)||Oa.is_vehicle_hull(a),d=e.create_elapsed_sensor(),g=e.create_keyboard_sensor(e.KEY_W),f=e.create_keyboard_sensor(e.KEY_S),k=e.create_keyboard_sensor(e.KEY_A),l=e.create_keyboard_sensor(e.KEY_D),
m=e.create_keyboard_sensor(e.KEY_UP),q=e.create_keyboard_sensor(e.KEY_DOWN),t=e.create_keyboard_sensor(e.KEY_LEFT),n=e.create_keyboard_sensor(e.KEY_RIGHT);e.create_sensor_manifold(a,"FORWARD",e.CT_CONTINUOUS,[d,g,m],b,c);e.create_sensor_manifold(a,"BACKWARD",e.CT_CONTINUOUS,[d,f,q],b,c);e.create_sensor_manifold(a,"LEFT",e.CT_CONTINUOUS,[d,k,t],b,c);e.create_sensor_manifold(a,"RIGHT",e.CT_CONTINUOUS,[d,l,n],b,c)};h.disable_object_controls=function(a){for(var b=["FORWARD","BACKWARD","LEFT","RIGHT"],
c=0;c<b.length;c++)e.remove_sensor_manifold(a,b[c])};h.enable_debug_controls=function(){e.create_kb_sensor_manifold(null,"CAMERA_SHOT",e.CT_SHOT,e.KEY_K,function(){ja.make_camera_frustum_shot()});e.create_kb_sensor_manifold(null,"LIGHT_SHOT",e.CT_SHOT,e.KEY_L,function(){ja.make_light_frustum_shot()});e.create_kb_sensor_manifold(null,"TELEMETRY",e.CT_SHOT,e.KEY_T,function(){ja.plot_telemetry()})};h.request_fullscreen=function(a,b,c){M.ef("request_fullscreen","screen.request_fullscreen");oa.request_fullscreen(a,
b,c)};h.exit_fullscreen=function(){M.ef("exit_fullscreen","screen.exit_fullscreen");oa.exit_fullscreen()};h.check_fullscreen=function(){M.ef("check_fullscreen","screen.check_fullscreen");return oa.check_fullscreen()};h.report_app_error=J;h.get_url_params=function(a){a=!!a;var b=decodeURIComponent(location.href.toString());if(-1==b.indexOf("?"))return null;b=b.split("?")[1].split("&");for(var c={},e=0;e<b.length;e++){var h=b[e].split("="),g=h[0];1<h.length?(h=h[1],a?g in c?c[g].push(h):c[g]=[h]:c[g]=
h):a?g in c||(c[g]=[]):c[g]=""}return c};h.css_animate=function(a,b,c,e,h,g,d,f){if(a&&b&&isFinite(c)&&isFinite(e)&&isFinite(h)){g=g||"";d=d||"";f=f||function(){};var k=a.style,l=b.charAt(0).toUpperCase()+b.slice(1);if(void 0==k[b])if(void 0!=k["webkit"+l])b="webkit"+l;else if(void 0!=k["ms"+l])b="ms"+l;else if(void 0!=k["moz"+l])b="moz"+l;else return;P(a,c,e,h,function(h){a&&(k[b]=g+h+d,c>e&&h<=e||c<e&&h>=e)&&(k[b]=g+e+d,f())})}};h.attr_animate=function(a,b,c,e,h,g){a&&b&&isFinite(c)&&isFinite(e)&&
isFinite(h)&&(g=g||function(){},P(a,c,e,h,function(h){a&&(0<=h&&a.setAttribute(b,h),c>e&&h<=e||c<e&&h>=e)&&(a.setAttribute(b,e),g())}))};h.queue_animate=function(a){if(a.length){var b=a.shift(),c=b.elem,e=b.prop,d=b.from,g=b.to,f=b.duration,k=b.opt_prefix,l=b.opt_suffix,m=function(){b.cb&&b.cb();h.queue_animate(a)};"css"==b.type?h.css_animate(c,e,d,g,f,k,l,m):"attr"==b.type&&h.attr_animate(c,e,d,g,f,m)}};h.set_camera_smooth_factor=function(a){S=a};h.get_camera_smooth_factor=function(){return S}});
w.a=f},function(D,w,f){D=f(0);var N=f(29);f=Object(D.a)("__debug_nodegraph",function(f,n){var y=Object(N.a)(f);n.fS=function(d){return y.hF(d,function(d,f){d=f.type+"("+f.name+")";var m=f.inputs;d+="\n\nINPUTS:";if(m.length)for(var n=0;n<m.length;n++)d+="\n"+m[n].identifier+": ",d=m[n].lb?d+"linked":d+m[n].mb;else d+="\n---";m=f.outputs;d+="\n\nOUTPUTS:";if(m.length)for(n=0;n<m.length;n++)d+="\n"+m[n].identifier+": ",d=m[n].lb?d+("linked(default "+m[n].mb+")"):d+"not used";else d+="\n---";n="";switch(f.type){case "GEOMETRY_UV":n=
"\nuv_layer: "+f.data.value;break;case "TEXTURE_COLOR":case "TEXTURE_NORMAL":n="\ntexture: "+f.data.value.name+"\n("+f.data.value.Ro+")"}""==n&&(n="\n---");return d+"\n\nDATA:"+n},function(f,n,v){f=y.Kb(d,f);n=y.Kb(d,n);return f.outputs[v[0]].identifier+"\n==>\n"+n.inputs[v[1]].identifier})}});w.a=f},function(D,w,f){D=f(0);var N=f(32),U=f(5),n=f(31),y=f(48);f=Object(D.a)("__ipc",function(d,f){function m(a){var b=document.getElementsByTagName("script");a=Object(y.b)(a);for(var c=0;c<b.length;c++)if(b[c].src==
a)return b[c];return null}function v(a,b,c){for(var h=0;h<u.length;h+=2)u[h+1]==a&&(D[h+Number(!b)]=c)}function r(a){for(var b=0;b<a.length;b++){var c=a[b],h=0,d;for(d in c){var f=c[d];switch(f.constructor){case Float32Array:h+=f.length;break;case Number:h+=1}}--h;c.len=h}}var p=Object(U.a)(d),z=Object(n.a)(d),a=!0;f.aK=0;f.bD=1;f.cD=2;f.VJ=3;f.XJ=4;f.YJ=5;f.ZJ=6;f.bK=7;f.dD=8;f.My=9;f.eD=10;f.dK=11;f.fD=12;f.eK=13;f.cK=14;f.$J=15;f.WJ=16;var w=f.bD,k=f.cD,c=f.dD,l=f.My,b=f.eD,h=f.fD;f.oL=100;f.QK=
101;f.RK=102;f.SK=103;f.TK=104;f.VK=105;f.UK=106;f.WK=107;f.XK=108;f.YK=109;f.ZK=110;f.$K=111;f.aL=112;f.cL=113;f.dL=114;f.rL=115;f.eL=116;f.fL=117;f.gL=118;f.iL=119;f.jL=120;f.kL=121;f.mL=122;f.nL=123;f.pL=124;f.bL=125;f.tL=126;f.hL=127;f.sD=128;f.sL=129;f.uL=130;f.wL=131;f.xL=132;f.yL=133;f.zL=134;f.AL=135;f.BL=136;f.DL=137;f.EL=138;f.FL=139;f.tD=140;f.yq=141;f.GL=142;f.rD=143;f.HL=144;f.JL=145;f.qL=146;f.lL=147;f.LL=148;f.vL=149;f.CL=150;f.IL=151;f.KL=152;var G=f.yq,D=N.a.worker_listeners,u=N.a.worker_namespaces,
E={Yg:h,Ja:0,time:0,trans:new Float32Array(3),quat:new Float32Array(4),ij:new Float32Array(3),Ji:new Float32Array(3),len:0},R={Yg:c,mz:0,BB:0,trans:new Float32Array(3),quat:new Float32Array(4),len:0},O={Yg:l,id:0,oo:0,hit_fract:0,hit_time:0,len:0},L={Yg:b,id:0,oo:0,hit_fract:0,hit_time:0,hit_pos:new Float32Array(3),hit_norm:new Float32Array(3),len:0},B={Yg:w,zm:0,Am:0,result:0,len:0},Y={Yg:k,zm:0,Am:0,result:0,Dm:new Float32Array(3),coll_norm:new Float32Array(3),coll_dist:0,len:0},K={Yg:G,Ja:0,trans:new Float32Array(3),
quat:new Float32Array(4),len:0},ha=[E,R,O,L,B,Y,K];f.HO=function(b,c){var h={Vv:b?!0:!1,km:null,Pi:[],uh:""};c?(h.km={addEventListener:function(a,b){"message"!=a&&p.va("Wrong web worker event");v(h.uh,h.Vv,b)},removeEventListener:function(a){"message"!=a&&p.va("Wrong web worker event");v(h.uh,h.Vv,null)},postMessage:function(a){var b;a:{for(b=0;b<u.length;b+=2)if(u[b+1]==h.uh){b=D[b+Number(!!h.Vv)];break a}b=null}b({data:a})},terminate:function(){for(var a=0;a<u.length;a+=2)if(u[a+1]==h.uh){D.splice(a,
2);u.splice(a,2);break}}},h.Vv?(c=z.mt(d+"_worker"),u.push(d),u.push(c),D.push(null),D.push(null),h.uh=c,(c=m(b))?a?c.addEventListener("load",function(){N.a.require("__bindings",h.uh)},!1):(N.a.cleanup("__bindings",h.uh),N.a.cleanup("__ipc",h.uh),N.a.require("__bindings",h.uh)):(c=document.createElement("script"),c.src=b,c.defer="defer",c.async="async",c.addEventListener("load",function(){a=!1;N.a.require("__bindings",h.uh)},!1),document.head.appendChild(c))):h.uh=d):h.km=b?new Worker(b):self;return h};
f.zM=function(a,d){function f(m){if(m.constructor==ArrayBuffer)m=new Float32Array(m);else if(m[0].constructor==ArrayBuffer){for(var n=0;n<m.length;n++)f(m[n]);return}n=m[0]|0;switch(n){case h:var u=E;u.Ja=m[1]|0;u.time=m[2];u.trans[0]=m[3];u.trans[1]=m[4];u.trans[2]=m[5];u.quat[0]=m[6];u.quat[1]=m[7];u.quat[2]=m[8];u.quat[3]=m[9];u.ij[0]=m[10];u.ij[1]=m[11];u.ij[2]=m[12];u.Ji[0]=m[13];u.Ji[1]=m[14];u.Ji[2]=m[15];break;case c:u=R;u.mz=m[1]|0;u.BB=m[2]|0;u.trans[0]=m[3];u.trans[1]=m[4];u.trans[2]=m[5];
u.quat[0]=m[6];u.quat[1]=m[7];u.quat[2]=m[8];u.quat[3]=m[9];break;case l:u=O;u.id=m[1]|0;u.oo=m[2]|0;u.hit_fract=m[3];u.hit_time=m[4];break;case b:u=L;u.id=m[1]|0;u.oo=m[2]|0;u.hit_fract=m[3];u.hit_time=m[4];u.hit_pos[0]=m[5];u.hit_pos[1]=m[6];u.hit_pos[2]=m[7];u.hit_norm[0]=m[8];u.hit_norm[1]=m[9];u.hit_norm[2]=m[10];break;case w:u=B;u.zm=m[1]|0;u.Am=m[2]|0;u.result=!!m[3];break;case k:u=Y;u.zm=m[1]|0;u.Am=m[2]|0;u.result=!!m[3];u.Dm[0]=m[4];u.Dm[1]=m[5];u.Dm[2]=m[6];u.coll_norm[0]=m[7];u.coll_norm[1]=
m[8];u.coll_norm[2]=m[9];u.coll_dist=m[10];break;case G:u=K;u.Ja=m[1]|0;u.trans[0]=m[2];u.trans[1]=m[3];u.trans[2]=m[4];u.quat[0]=m[5];u.quat[1]=m[6];u.quat[2]=m[7];u.quat[3]=m[8];break;default:u=m}d(a,n,u)}r(ha);a.km.addEventListener("message",function(a){f(a.data)},!1)};f.cleanup=function(){};f.Ta=function(a,d){if(a)switch(d){case h:var f=E,m=new Float32Array(f.len);m[0]=f.Yg;m[1]=f.Ja;m[2]=f.time;m[3]=f.trans[0];m[4]=f.trans[1];m[5]=f.trans[2];m[6]=f.quat[0];m[7]=f.quat[1];m[8]=f.quat[2];m[9]=
f.quat[3];m[10]=f.ij[0];m[11]=f.ij[1];m[12]=f.ij[2];m[13]=f.Ji[0];m[14]=f.Ji[1];m[15]=f.Ji[2];a.Pi.push(m.buffer);break;case c:f=R;m=new Float32Array(f.len);m[0]=f.Yg;m[1]=f.mz;m[2]=f.BB;m[3]=f.trans[0];m[4]=f.trans[1];m[5]=f.trans[2];m[6]=f.quat[0];m[7]=f.quat[1];m[8]=f.quat[2];m[9]=f.quat[3];a.Pi.push(m.buffer);break;case l:f=O;m=new Float32Array(f.len);m[0]=f.Yg;m[1]=f.id;m[2]=f.oo;m[3]=f.hit_fract;m[4]=f.hit_time;a.Pi.push(m.buffer);break;case b:f=L;m=new Float32Array(f.len);m[0]=f.Yg;m[1]=f.id;
m[2]=f.oo;m[3]=f.hit_fract;m[4]=f.hit_time;m[5]=f.hit_pos[0];m[6]=f.hit_pos[1];m[7]=f.hit_pos[2];m[8]=f.hit_norm[0];m[9]=f.hit_norm[1];m[10]=f.hit_norm[2];a.Pi.push(m.buffer);break;case w:f=B;m=new Float32Array(f.len);m[0]=f.Yg;m[1]=f.zm;m[2]=f.Am;m[3]=f.result;a.Pi.push(m.buffer);break;case k:f=Y;m=new Float32Array(f.len);m[0]=f.Yg;m[1]=f.zm;m[2]=f.Am;m[3]=f.result;m[4]=f.Dm[0];m[5]=f.Dm[1];m[6]=f.Dm[2];m[7]=f.coll_norm[0];m[8]=f.coll_norm[1];m[9]=f.coll_norm[2];m[10]=f.coll_dist;a.Pi.push(m.buffer);
break;case G:f=K;m=new Float32Array(f.len);m[0]=f.Yg;m[1]=f.Ja;m[2]=f.trans[0];m[3]=f.trans[1];m[4]=f.trans[2];m[5]=f.quat[0];m[6]=f.quat[1];m[7]=f.quat[2];m[8]=f.quat[3];a.Pi.push(m.buffer);break;default:m=[];for(f=1;f<arguments.length;f++)m.push(arguments[f]);a.km.postMessage(m)}};f.CS=function(a){a&&a.Pi.length&&(a.km.postMessage(a.Pi),a.Pi.length=0)};f.VF=function(a){switch(a){case h:return E;case c:return R;case l:return O;case b:return L;case w:return B;case k:return Y;case G:return K;default:return null}};
f.terminate=function(a){a.km.terminate();a.km=null};f.Sv=function(a){return!!a.km};f.wG=function(a){return!!a.uh}});w.a=f},function(D,w,f){D=f(0);var N=f(46),U=f(20),n=f(12),y=f(22),d=f(11),m=f(6),C=f(2),v=f(3);f=Object(D.a)("__prerender",function(f,p){function r(a,b){return a.Qk-b.Qk}function a(a,b){var c=a.$g;c.is_visible=!1;if(c.hide)return!1;var d=b.qa,f=b.type==h.ee?d.iw:m.j(d.na,D),n=a.fb;if(!l.UU(n,c,f))return!1;c.is_visible=!0;b.type==h.Vh?n=b.debug_view_mode==k.DV_BOUNDINGS?n.Uj:!n.Uj:(!(b=
b.type==h.Wh&&0==c.mj)&&(b=!n.Wj&&a.Ft)&&(d=d.Um,b=a.Ft.Cf,a=a.Ft.ag,c=n.fm,n=b.Da,C._56(n,d,b.Lb)?b=!0:c?(b=a.Cb,c=a.Db,f=a.Eb,n=a.Da,b=C.X(n,d,b,c,f)):b=!1),n=b?!1:!0);return n}function w(a){var b=a.sb;if(b&&b.zw){a=a.$a;c.MR(a);var h=a.mc;c.wt(a.Pc,"a_position",b.zs,h.a_position.offset);c.wt(a.Pc,"a_tbn",b.et,h.a_tbn.offset);c.HC(a)}}var k=Object(N.a)(f),c=Object(U.a)(f),l=Object(n.a)(f),b=Object(y.a)(f),h=Object(d.a)(f),G=[h.ic,h.Md,h.de,h.xd,h.Ue,h.Ge,h.He,h.lh,h.ee,h.Gg,h.Wh,h.Vh,h.zf,h.Uh],
D=new Float32Array(3);p.wn=function(c){if(-1<G.indexOf(c.type)){for(var d=!1,f=c.type==h.xd||c.type==h.Ge,k=c.vb,l=0;l<k.length;l++){for(var n=k[l],u=n.jb,p=!1,z=0;z<u.length;z++){var y=u[z],C=y.fb;if(f)for(var A=0;6>A;A++)c.qa.Um=c.Im[A],y.Lz[A]=a(y,c),y.Lz[A]&&(p=d=!0,w(C));else y.Ec=a(y,c),y.Ec&&(p=d=!0,w(C));c.wb&&(C.ec.hp=!0);y.Ec?(C=m.j(c.qa.na,D),y.Ft?(A=y.Ft.Cf,C=v.squaredDistance(A.Da,C)+A.Lb*A.Lb):C=Infinity,y.Qk=C):y.Qk=Infinity}0<u.length&&!u[0].fb.Ob&&(u.sort(r),k.Qk=u[0].Qk);n.Ec=p}c.wb=
!1;switch(c.type){case h.Vh:break;default:c.type==h.ic||c.type==h.Gg||c.type==h.He||c.type==h.de||c.type==h.xd||d?c.Ec=!0:(c.Ec&&b.clear(c),c.Ec=!1)}}else if(c.wb){k=c.vb;for(l=0;l<k.length;l++)for(u=k[l].jb,z=0;z<u.length;z++)y=u[z],C=y.fb,C.ec.hp=!0;c.wb=!1}c.ms&&h.$T(c)}});w.a=f},function(D,w,f){f.d(w,"a",function(){return N});(function(f){"object"===typeof exports&&"undefined"!==typeof D?D.exports=f():("undefined"!==typeof window?window:"undefined"!==typeof self?self:this).mS=f()})(function(){return function m(f,
y,d){function n(r){if(!y[r]){if(!f[r]){if(v)return v(r,!0);var p=Error("Cannot find module '"+r+"'");throw p.code="MODULE_NOT_FOUND",p;}p=y[r]={exports:{}};f[r][0].call(p.exports,function(a){var d=f[r][1][a];return n(d?d:a)},p,p.exports,m,f,y,d)}return y[r].exports}for(var v=!1,r=0;r<d.length;r++)n(d[r]);return n}({1:[function(f,y,d){f="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Int32Array;d.assign=function(d){for(var f=Array.prototype.slice.call(arguments,
1);f.length;){var m=f.shift();if(m){if("object"!==typeof m)throw new TypeError(m+"must be non-object");for(var n in m)m.hasOwnProperty(n)&&(d[n]=m[n])}}return d};d.tI=function(d,f){if(d.length===f)return d;if(d.subarray)return d.subarray(0,f);d.length=f;return d};var m={wm:function(d,f,m,n,a){if(f.subarray&&d.subarray)d.set(f.subarray(m,m+n),a);else for(var r=0;r<n;r++)d[a+r]=f[m+r]},AF:function(d){var f,m;var n=m=0;for(f=d.length;n<f;n++)m+=d[n].length;var a=new Uint8Array(m);n=m=0;for(f=d.length;n<
f;n++){var v=d[n];a.set(v,m);m+=v.length}return a}},n={wm:function(d,f,m,n,a){for(var r=0;r<n;r++)d[a+r]=f[m+r]},AF:function(d){return[].concat.apply([],d)}};d.hT=function(f){f?(d.mm=Uint8Array,d.tq=Uint16Array,d.uq=Int32Array,d.assign(d,m)):(d.mm=Array,d.tq=Array,d.uq=Array,d.assign(d,n))};d.hT(f)},{}],2:[function(f,y,d){function m(d,a){if(65537>a&&(d.subarray&&r||!d.subarray&&v))return String.fromCharCode.apply(null,n.tI(d,a));for(var f="",k=0;k<a;k++)f+=String.fromCharCode(d[k]);return f}var n=
f("./common"),v=!0,r=!0,p=new n.mm(256);for(f=0;256>f;f++)p[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;p[254]=p[254]=1;d.pU=function(d){var a,f,k=d.length,c=0;for(a=0;a<k;a++){var l=d.charCodeAt(a);if(55296===(l&64512)&&a+1<k){var b=d.charCodeAt(a+1);56320===(b&64512)&&(l=65536+(l-55296<<10)+(b-56320),a++)}c+=128>l?1:2048>l?2:65536>l?3:4}var h=new n.mm(c);for(a=f=0;f<c;a++)l=d.charCodeAt(a),55296===(l&64512)&&a+1<k&&(b=d.charCodeAt(a+1),56320===(b&64512)&&(l=65536+(l-55296<<10)+(b-56320),a++)),
128>l?h[f++]=l:(2048>l?h[f++]=192|l>>>6:(65536>l?h[f++]=224|l>>>12:(h[f++]=240|l>>>18,h[f++]=128|l>>>12&63),h[f++]=128|l>>>6&63),h[f++]=128|l&63);return h};d.VW=function(d){return m(d,d.length)};d.HM=function(d){for(var a=new n.mm(d.length),f=0,k=a.length;f<k;f++)a[f]=d.charCodeAt(f);return a};d.RM=function(d,a){var f,k=a||d.length,c=Array(2*k);for(a=f=0;a<k;){var l=d[a++];if(128>l)c[f++]=l;else{var b=p[l];if(4<b)c[f++]=65533,a+=b-1;else{for(l&=2===b?31:3===b?15:7;1<b&&a<k;)l=l<<6|d[a++]&63,b--;1<
b?c[f++]=65533:65536>l?c[f++]=l:(l-=65536,c[f++]=55296|l>>10&1023,c[f++]=56320|l&1023)}}}return m(c,f)};d.yV=function(d,a){var f;a=a||d.length;a>d.length&&(a=d.length);for(f=a-1;0<=f&&128===(d[f]&192);)f--;return 0>f||0===f?a:f+p[d[f]]>a?f:a}},{"./common":1}],3:[function(f,y){y.exports=function(d,f,n,v){var m=d&65535|0;d=d>>>16&65535|0;for(var p;0!==n;){p=2E3<n?2E3:n;n-=p;do m=m+f[v++]|0,d=d+m|0;while(--p);m%=65521;d%=65521}return m|d<<16|0}},{}],4:[function(f,y){y.exports={DD:0,BW:1,ED:2,yW:3,Tt:4,
qW:5,GW:6,bo:0,Ut:1,RL:2,vW:-1,EW:-2,rW:-3,QL:-5,AW:0,oW:1,nW:9,sW:-1,wW:1,zW:2,DW:3,xW:4,tW:0,pW:0,FW:1,HW:2,uW:8}},{}],5:[function(f,y){var d=function(){for(var d,f=[],n=0;256>n;n++){d=n;for(var r=0;8>r;r++)d=d&1?3988292384^d>>>1:d>>>1;f[n]=d}return f}();y.exports=function(f,n,v,r){v=r+v;for(f^=-1;r<v;r++)f=f>>>8^d[(f^n[r])&255];return f^-1}},{}],6:[function(f,y){y.exports=function(){this.iS=this.MV=this.time=this.text=0;this.je=null;this.Qz=0;this.sz=this.name="";this.MQ=0;this.done=!1}},{}],7:[function(f,
y){y.exports=function(d,f){var m=d.state;var n=d.Cl;var r=d.input;var p=n+(d.Kg-5);var z=d.nf;var a=d.ti;f=z-(f-d.ge);var y=z+(d.ge-257);var k=m.Qu;var c=m.Fg;var l=m.Pk;var b=m.Eg;var h=m.window;var w=m.ml;var D=m.Od;var u=m.hk;var E=m.Mm;var R=(1<<m.gj)-1;var O=(1<<m.zo)-1;a:do{15>D&&(w+=r[n++]<<D,D+=8,w+=r[n++]<<D,D+=8);var L=u[w&R];b:for(;;){var B=L>>>24;w>>>=B;D-=B;B=L>>>16&255;if(0===B)a[z++]=L&65535;else if(B&16){var N=L&65535;if(B&=15)D<B&&(w+=r[n++]<<D,D+=8),N+=w&(1<<B)-1,w>>>=B,D-=B;15>
D&&(w+=r[n++]<<D,D+=8,w+=r[n++]<<D,D+=8);L=E[w&O];c:for(;;){B=L>>>24;w>>>=B;D-=B;B=L>>>16&255;if(B&16){L&=65535;B&=15;D<B&&(w+=r[n++]<<D,D+=8,D<B&&(w+=r[n++]<<D,D+=8));L+=w&(1<<B)-1;if(L>k){d.msg="invalid distance too far back";m.mode=30;break a}w>>>=B;D-=B;B=z-f;if(L>B){B=L-B;if(B>l&&m.OB){d.msg="invalid distance too far back";m.mode=30;break a}var K=0;var ha=h;if(0===b){if(K+=c-B,B<N){N-=B;do a[z++]=h[K++];while(--B);K=z-L;ha=a}}else if(b<B){if(K+=c+b-B,B-=b,B<N){N-=B;do a[z++]=h[K++];while(--B);
K=0;if(b<N){B=b;N-=B;do a[z++]=h[K++];while(--B);K=z-L;ha=a}}}else if(K+=b-B,B<N){N-=B;do a[z++]=h[K++];while(--B);K=z-L;ha=a}for(;2<N;)a[z++]=ha[K++],a[z++]=ha[K++],a[z++]=ha[K++],N-=3;N&&(a[z++]=ha[K++],1<N&&(a[z++]=ha[K++]))}else{K=z-L;do a[z++]=a[K++],a[z++]=a[K++],a[z++]=a[K++],N-=3;while(2<N);N&&(a[z++]=a[K++],1<N&&(a[z++]=a[K++]))}}else if(0===(B&64)){L=E[(L&65535)+(w&(1<<B)-1)];continue c}else{d.msg="invalid distance code";m.mode=30;break a}break}}else if(0===(B&64)){L=u[(L&65535)+(w&(1<<
B)-1)];continue b}else{B&32?m.mode=12:(d.msg="invalid literal/length code",m.mode=30);break a}break}}while(n<p&&z<y);N=D>>3;n-=N;D-=N<<3;d.Cl=n;d.nf=z;d.Kg=n<p?5+(p-n):5-(n-p);d.ge=z<y?257+(y-z):257-(z-y);m.ml=w&(1<<D)-1;m.Od=D}},{}],8:[function(f,y,d){function m(a){return(a>>>24&255)+(a>>>8&65280)+((a&65280)<<8)+((a&255)<<24)}function n(){this.mode=0;this.$v=!1;this.Di=0;this.vA=!1;this.total=this.check=this.Qu=this.flags=0;this.head=null;this.Eg=this.Pk=this.Fg=this.rq=0;this.window=null;this.je=
this.offset=this.length=this.Od=this.ml=0;this.Mm=this.hk=null;this.Dh=this.ls=this.kp=this.eH=this.zo=this.gj=0;this.next=null;this.kf=new w.tq(320);this.Et=new w.tq(288);this.qF=this.JG=null;this.HV=this.back=this.OB=0}function v(a){if(!a||!a.state)return-2;var b=a.state;a.uC=a.it=b.total=0;a.msg="";b.Di&&(a.sm=b.Di&1);b.mode=1;b.$v=0;b.vA=0;b.Qu=32768;b.head=null;b.ml=0;b.Od=0;b.hk=b.JG=new w.uq(852);b.Mm=b.qF=new w.uq(592);b.OB=1;b.back=-1;return 0}function r(a){if(!a||!a.state)return-2;var b=
a.state;b.Fg=0;b.Pk=0;b.Eg=0;return v(a)}function p(a,b){if(!a||!a.state)return-2;var c=a.state;if(0>b){var h=0;b=-b}else h=(b>>4)+1,48>b&&(b&=15);if(b&&(8>b||15<b))return-2;null!==c.window&&c.rq!==b&&(c.window=null);c.Di=h;c.rq=b;return r(a)}function z(a,b){if(!a)return-2;var c=new n;a.state=c;c.window=null;b=p(a,b);0!==b&&(a.state=null);return b}function a(a,b,c,h){var d=a.state;null===d.window&&(d.Fg=1<<d.rq,d.Eg=0,d.Pk=0,d.window=new w.mm(d.Fg));h>=d.Fg?(w.wm(d.window,b,c-d.Fg,d.Fg,0),d.Eg=0,
d.Pk=d.Fg):(a=d.Fg-d.Eg,a>h&&(a=h),w.wm(d.window,b,c-h,a,d.Eg),(h-=a)?(w.wm(d.window,b,c-h,h,0),d.Eg=h,d.Pk=d.Fg):(d.Eg+=a,d.Eg===d.Fg&&(d.Eg=0),d.Pk<d.Fg&&(d.Pk+=a)));return 0}var w=f("../utils/common"),k=f("./adler32"),c=f("./crc32"),l=f("./inffast"),b=f("./inftrees"),h=!0,G,D;d.VX=r;d.WX=p;d.XX=v;d.TX=function(a){return z(a,15)};d.RQ=z;d.yA=function(d,f){var n,u=new w.mm(4),r=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!d||!d.state||!d.ti||!d.input&&0!==d.Kg)return-2;var p=d.state;12===
p.mode&&(p.mode=13);var v=d.nf;var z=d.ti;var y=d.ge;var C=d.Cl;var E=d.input;var A=d.Kg;var H=p.ml;var J=p.Od;var P=A;var q=y;var da=0;a:for(;;)switch(p.mode){case 1:if(0===p.Di){p.mode=13;break}for(;16>J;){if(0===A)break a;A--;H+=E[C++]<<J;J+=8}if(p.Di&2&&35615===H){p.check=0;u[0]=H&255;u[1]=H>>>8&255;p.check=c(p.check,u,2,0);J=H=0;p.mode=2;break}p.flags=0;p.head&&(p.head.done=!1);if(!(p.Di&1)||(((H&255)<<8)+(H>>8))%31){d.msg="incorrect header check";p.mode=30;break}if(8!==(H&15)){d.msg="unknown compression method";
p.mode=30;break}H>>>=4;J-=4;var I=(H&15)+8;if(0===p.rq)p.rq=I;else if(I>p.rq){d.msg="invalid window size";p.mode=30;break}p.Qu=1<<I;d.sm=p.check=1;p.mode=H&512?10:12;J=H=0;break;case 2:for(;16>J;){if(0===A)break a;A--;H+=E[C++]<<J;J+=8}p.flags=H;if(8!==(p.flags&255)){d.msg="unknown compression method";p.mode=30;break}if(p.flags&57344){d.msg="unknown header flags set";p.mode=30;break}p.head&&(p.head.text=H>>8&1);p.flags&512&&(u[0]=H&255,u[1]=H>>>8&255,p.check=c(p.check,u,2,0));J=H=0;p.mode=3;case 3:for(;32>
J;){if(0===A)break a;A--;H+=E[C++]<<J;J+=8}p.head&&(p.head.time=H);p.flags&512&&(u[0]=H&255,u[1]=H>>>8&255,u[2]=H>>>16&255,u[3]=H>>>24&255,p.check=c(p.check,u,4,0));J=H=0;p.mode=4;case 4:for(;16>J;){if(0===A)break a;A--;H+=E[C++]<<J;J+=8}p.head&&(p.head.MV=H&255,p.head.iS=H>>8);p.flags&512&&(u[0]=H&255,u[1]=H>>>8&255,p.check=c(p.check,u,2,0));J=H=0;p.mode=5;case 5:if(p.flags&1024){for(;16>J;){if(0===A)break a;A--;H+=E[C++]<<J;J+=8}p.length=H;p.head&&(p.head.Qz=H);p.flags&512&&(u[0]=H&255,u[1]=H>>>
8&255,p.check=c(p.check,u,2,0));J=H=0}else p.head&&(p.head.je=null);p.mode=6;case 6:if(p.flags&1024){var t=p.length;t>A&&(t=A);t&&(p.head&&(I=p.head.Qz-p.length,p.head.je||(p.head.je=Array(p.head.Qz)),w.wm(p.head.je,E,C,t,I)),p.flags&512&&(p.check=c(p.check,E,t,C)),A-=t,C+=t,p.length-=t);if(p.length)break a}p.length=0;p.mode=7;case 7:if(p.flags&2048){if(0===A)break a;t=0;do I=E[C+t++],p.head&&I&&65536>p.length&&(p.head.name+=String.fromCharCode(I));while(I&&t<A);p.flags&512&&(p.check=c(p.check,E,
t,C));A-=t;C+=t;if(I)break a}else p.head&&(p.head.name=null);p.length=0;p.mode=8;case 8:if(p.flags&4096){if(0===A)break a;t=0;do I=E[C+t++],p.head&&I&&65536>p.length&&(p.head.sz+=String.fromCharCode(I));while(I&&t<A);p.flags&512&&(p.check=c(p.check,E,t,C));A-=t;C+=t;if(I)break a}else p.head&&(p.head.sz=null);p.mode=9;case 9:if(p.flags&512){for(;16>J;){if(0===A)break a;A--;H+=E[C++]<<J;J+=8}if(H!==(p.check&65535)){d.msg="header crc mismatch";p.mode=30;break}J=H=0}p.head&&(p.head.MQ=p.flags>>9&1,p.head.done=
!0);d.sm=p.check=0;p.mode=12;break;case 10:for(;32>J;){if(0===A)break a;A--;H+=E[C++]<<J;J+=8}d.sm=p.check=m(H);J=H=0;p.mode=11;case 11:if(0===p.vA)return d.nf=v,d.ge=y,d.Cl=C,d.Kg=A,p.ml=H,p.Od=J,2;d.sm=p.check=1;p.mode=12;case 12:if(5===f||6===f)break a;case 13:if(p.$v){H>>>=J&7;J-=J&7;p.mode=27;break}for(;3>J;){if(0===A)break a;A--;H+=E[C++]<<J;J+=8}p.$v=H&1;H>>>=1;--J;switch(H&3){case 0:p.mode=14;break;case 1:I=p;if(h){G=new w.uq(512);D=new w.uq(32);for(t=0;144>t;)I.kf[t++]=8;for(;256>t;)I.kf[t++]=
9;for(;280>t;)I.kf[t++]=7;for(;288>t;)I.kf[t++]=8;b(1,I.kf,0,288,G,0,I.Et,{Od:9});for(t=0;32>t;)I.kf[t++]=5;b(2,I.kf,0,32,D,0,I.Et,{Od:5});h=!1}I.hk=G;I.gj=9;I.Mm=D;I.zo=5;p.mode=20;if(6===f){H>>>=2;J-=2;break a}break;case 2:p.mode=17;break;case 3:d.msg="invalid block type",p.mode=30}H>>>=2;J-=2;break;case 14:H>>>=J&7;for(J-=J&7;32>J;){if(0===A)break a;A--;H+=E[C++]<<J;J+=8}if((H&65535)!==(H>>>16^65535)){d.msg="invalid stored block lengths";p.mode=30;break}p.length=H&65535;J=H=0;p.mode=15;if(6===
f)break a;case 15:p.mode=16;case 16:if(t=p.length){t>A&&(t=A);t>y&&(t=y);if(0===t)break a;w.wm(z,E,C,t,v);A-=t;C+=t;y-=t;v+=t;p.length-=t;break}p.mode=12;break;case 17:for(;14>J;){if(0===A)break a;A--;H+=E[C++]<<J;J+=8}p.kp=(H&31)+257;H>>>=5;J-=5;p.ls=(H&31)+1;H>>>=5;J-=5;p.eH=(H&15)+4;H>>>=4;J-=4;if(286<p.kp||30<p.ls){d.msg="too many length or distance symbols";p.mode=30;break}p.Dh=0;p.mode=18;case 18:for(;p.Dh<p.eH;){for(;3>J;){if(0===A)break a;A--;H+=E[C++]<<J;J+=8}p.kf[r[p.Dh++]]=H&7;H>>>=3;J-=
3}for(;19>p.Dh;)p.kf[r[p.Dh++]]=0;p.hk=p.JG;p.gj=7;t={Od:p.gj};da=b(0,p.kf,0,19,p.hk,0,p.Et,t);p.gj=t.Od;if(da){d.msg="invalid code lengths set";p.mode=30;break}p.Dh=0;p.mode=19;case 19:for(;p.Dh<p.kp+p.ls;){for(;;){var e=p.hk[H&(1<<p.gj)-1];t=e>>>24;e&=65535;if(t<=J)break;if(0===A)break a;A--;H+=E[C++]<<J;J+=8}if(16>e)H>>>=t,J-=t,p.kf[p.Dh++]=e;else{if(16===e){for(I=t+2;J<I;){if(0===A)break a;A--;H+=E[C++]<<J;J+=8}H>>>=t;J-=t;if(0===p.Dh){d.msg="invalid bit length repeat";p.mode=30;break}I=p.kf[p.Dh-
1];t=3+(H&3);H>>>=2;J-=2}else if(17===e){for(I=t+3;J<I;){if(0===A)break a;A--;H+=E[C++]<<J;J+=8}H>>>=t;J-=t;I=0;t=3+(H&7);H>>>=3;J-=3}else{for(I=t+7;J<I;){if(0===A)break a;A--;H+=E[C++]<<J;J+=8}H>>>=t;J-=t;I=0;t=11+(H&127);H>>>=7;J-=7}if(p.Dh+t>p.kp+p.ls){d.msg="invalid bit length repeat";p.mode=30;break}for(;t--;)p.kf[p.Dh++]=I}}if(30===p.mode)break;if(0===p.kf[256]){d.msg="invalid code -- missing end-of-block";p.mode=30;break}p.gj=9;t={Od:p.gj};da=b(1,p.kf,0,p.kp,p.hk,0,p.Et,t);p.gj=t.Od;if(da){d.msg=
"invalid literal/lengths set";p.mode=30;break}p.zo=6;p.Mm=p.qF;t={Od:p.zo};da=b(2,p.kf,p.kp,p.ls,p.Mm,0,p.Et,t);p.zo=t.Od;if(da){d.msg="invalid distances set";p.mode=30;break}p.mode=20;if(6===f)break a;case 20:p.mode=21;case 21:if(6<=A&&258<=y){d.nf=v;d.ge=y;d.Cl=C;d.Kg=A;p.ml=H;p.Od=J;l(d,q);v=d.nf;z=d.ti;y=d.ge;C=d.Cl;E=d.input;A=d.Kg;H=p.ml;J=p.Od;12===p.mode&&(p.back=-1);break}for(p.back=0;;){e=p.hk[H&(1<<p.gj)-1];t=e>>>24;I=e>>>16&255;e&=65535;if(t<=J)break;if(0===A)break a;A--;H+=E[C++]<<J;
J+=8}if(I&&0===(I&240)){var ma=t;var ja=I;for(n=e;;){e=p.hk[n+((H&(1<<ma+ja)-1)>>ma)];t=e>>>24;I=e>>>16&255;e&=65535;if(ma+t<=J)break;if(0===A)break a;A--;H+=E[C++]<<J;J+=8}H>>>=ma;J-=ma;p.back+=ma}H>>>=t;J-=t;p.back+=t;p.length=e;if(0===I){p.mode=26;break}if(I&32){p.back=-1;p.mode=12;break}if(I&64){d.msg="invalid literal/length code";p.mode=30;break}p.je=I&15;p.mode=22;case 22:if(p.je){for(I=p.je;J<I;){if(0===A)break a;A--;H+=E[C++]<<J;J+=8}p.length+=H&(1<<p.je)-1;H>>>=p.je;J-=p.je;p.back+=p.je}p.HV=
p.length;p.mode=23;case 23:for(;;){e=p.Mm[H&(1<<p.zo)-1];t=e>>>24;I=e>>>16&255;e&=65535;if(t<=J)break;if(0===A)break a;A--;H+=E[C++]<<J;J+=8}if(0===(I&240)){ma=t;ja=I;for(n=e;;){e=p.Mm[n+((H&(1<<ma+ja)-1)>>ma)];t=e>>>24;I=e>>>16&255;e&=65535;if(ma+t<=J)break;if(0===A)break a;A--;H+=E[C++]<<J;J+=8}H>>>=ma;J-=ma;p.back+=ma}H>>>=t;J-=t;p.back+=t;if(I&64){d.msg="invalid distance code";p.mode=30;break}p.offset=e;p.je=I&15;p.mode=24;case 24:if(p.je){for(I=p.je;J<I;){if(0===A)break a;A--;H+=E[C++]<<J;J+=
8}p.offset+=H&(1<<p.je)-1;H>>>=p.je;J-=p.je;p.back+=p.je}if(p.offset>p.Qu){d.msg="invalid distance too far back";p.mode=30;break}p.mode=25;case 25:if(0===y)break a;t=q-y;if(p.offset>t){t=p.offset-t;if(t>p.Pk&&p.OB){d.msg="invalid distance too far back";p.mode=30;break}t>p.Eg?(t-=p.Eg,I=p.Fg-t):I=p.Eg-t;t>p.length&&(t=p.length);ma=p.window}else ma=z,I=v-p.offset,t=p.length;t>y&&(t=y);y-=t;p.length-=t;do z[v++]=ma[I++];while(--t);0===p.length&&(p.mode=21);break;case 26:if(0===y)break a;z[v++]=p.length;
y--;p.mode=21;break;case 27:if(p.Di){for(;32>J;){if(0===A)break a;A--;H|=E[C++]<<J;J+=8}q-=y;d.it+=q;p.total+=q;q&&(d.sm=p.check=p.flags?c(p.check,z,q,v-q):k(p.check,z,q,v-q));q=y;if((p.flags?H:m(H))!==p.check){d.msg="incorrect data check";p.mode=30;break}J=H=0}p.mode=28;case 28:if(p.Di&&p.flags){for(;32>J;){if(0===A)break a;A--;H+=E[C++]<<J;J+=8}if(H!==(p.total&4294967295)){d.msg="incorrect length check";p.mode=30;break}J=H=0}p.mode=29;case 29:da=1;break a;case 30:da=-3;break a;case 31:return-4;
default:return-2}d.nf=v;d.ge=y;d.Cl=C;d.Kg=A;p.ml=H;p.Od=J;if((p.Fg||q!==d.ge&&30>p.mode&&(27>p.mode||4!==f))&&a(d,d.ti,d.nf,q-d.ge))return p.mode=31,-4;P-=d.Kg;q-=d.ge;d.uC+=P;d.it+=q;p.total+=q;p.Di&&q&&(d.sm=p.check=p.flags?c(p.check,z,q,d.nf-q):k(p.check,z,q,d.nf-q));d.NO=p.Od+(p.$v?64:0)+(12===p.mode?128:0)+(20===p.mode||15===p.mode?256:0);(0===P&&0===q||4===f)&&0===da&&(da=-5);return da};d.PQ=function(a){if(!a||!a.state)return-2;var b=a.state;b.window&&(b.window=null);a.state=null;return 0};
d.QQ=function(a,b){a&&a.state&&(a=a.state,0!==(a.Di&2)&&(a.head=b,b.done=!1))};d.SQ=function(b,c){var h=c.length;if(!b||!b.state)return-2;var d=b.state;if(0!==d.Di&&11!==d.mode)return-2;if(11===d.mode){var f=k(1,c,h,0);if(f!==d.check)return-3}if(a(b,c,h,h))return d.mode=31,-4;d.vA=1;return 0};d.SX="pako inflate (from Nodeca project)"},{"../utils/common":1,"./adler32":3,"./crc32":5,"./inffast":7,"./inftrees":9}],9:[function(f,y){var d=f("../utils/common"),m=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,
35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],n=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],v=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],r=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];y.exports=function(f,z,a,y,k,c,l,b){var h=b.Od,p,w,u,C,R,D,H=0,B=new d.tq(16);var N=new d.tq(16);var K,ha=0;for(p=0;15>=p;p++)B[p]=0;for(w=
0;w<y;w++)B[z[a+w]]++;var T=h;for(u=15;1<=u&&0===B[u];u--);T>u&&(T=u);if(0===u)return k[c++]=20971520,k[c++]=20971520,b.Od=1,0;for(h=1;h<u&&0===B[h];h++);T<h&&(T=h);for(p=C=1;15>=p;p++)if(C<<=1,C-=B[p],0>C)return-1;if(0<C&&(0===f||1!==u))return-1;N[1]=0;for(p=1;15>p;p++)N[p+1]=N[p]+B[p];for(w=0;w<y;w++)0!==z[a+w]&&(l[N[z[a+w]]++]=w);if(0===f){var V=K=l;var A=19}else 1===f?(V=m,H-=257,K=n,ha-=257,A=256):(V=v,K=r,A=-1);w=R=0;p=h;var aa=c;y=T;N=0;var J=-1;var P=1<<T;var q=P-1;if(1===f&&852<P||2===f&&
592<P)return 1;for(;;){var da=p-N;if(l[w]<A){var I=0;var t=l[w]}else l[w]>A?(I=K[ha+l[w]],t=V[H+l[w]]):(I=96,t=0);C=1<<p-N;h=D=1<<y;do D-=C,k[aa+(R>>N)+D]=da<<24|I<<16|t|0;while(0!==D);for(C=1<<p-1;R&C;)C>>=1;0!==C?(R&=C-1,R+=C):R=0;w++;if(0===--B[p]){if(p===u)break;p=z[a+l[w]]}if(p>T&&(R&q)!==J){0===N&&(N=T);aa+=h;y=p-N;for(C=1<<y;y+N<u;){C-=B[y+N];if(0>=C)break;y++;C<<=1}P+=1<<y;if(1===f&&852<P||2===f&&592<P)return 1;J=R&q;k[J]=T<<24|y<<16|aa-c|0}}0!==R&&(k[aa+R]=p-N<<24|4194304);b.Od=T;return 0}},
{"../utils/common":1}],10:[function(f,y){y.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],11:[function(f,y){y.exports=function(){this.input=null;this.uC=this.Kg=this.Cl=0;this.ti=null;this.it=this.ge=this.nf=0;this.msg="";this.state=null;this.NO=2;this.sm=0}},{}],"/lib/inflate.js":[function(f,y,d){function m(c){if(!(this instanceof m))return new m(c);var b=this.options=
r.assign({lN:16384,Te:0,to:""},c||{});b.raw&&0<=b.Te&&16>b.Te&&(b.Te=-b.Te,0===b.Te&&(b.Te=-15));!(0<=b.Te&&16>b.Te)||c&&c.Te||(b.Te+=32);15<b.Te&&48>b.Te&&0===(b.Te&15)&&(b.Te|=15);this.Oz=0;this.msg="";this.ended=!1;this.ru=[];this.Gn=new w;this.Gn.ge=0;c=v.RQ(this.Gn,b.Te);if(c!==z.bo)throw Error(a[c]);this.NQ=new k;v.QQ(this.Gn,this.NQ)}function n(c,b){b=new m(b);b.push(c,!0);if(b.Oz)throw b.msg||a[b.Oz];return b.result}var v=f("./zlib/inflate"),r=f("./utils/common"),p=f("./utils/strings"),z=
f("./zlib/constants"),a=f("./zlib/messages"),w=f("./zlib/zstream"),k=f("./zlib/gzheader"),c=Object.prototype.toString;m.prototype.push=function(a,b){var h=this.Gn,d=this.options.lN,f=this.options.jX,k=!1;if(this.ended)return!1;b=b===~~b?b:!0===b?z.Tt:z.DD;"string"===typeof a?h.input=p.HM(a):"[object ArrayBuffer]"===c.call(a)?h.input=new Uint8Array(a):h.input=a;h.Cl=0;h.Kg=h.input.length;do{0===h.ge&&(h.ti=new r.mm(d),h.nf=0,h.ge=d);a=v.yA(h,z.DD);a===z.RL&&f&&(a="string"===typeof f?p.pU(f):"[object ArrayBuffer]"===
c.call(f)?new Uint8Array(f):f,a=v.SQ(this.Gn,a));a===z.QL&&!0===k&&(a=z.bo,k=!1);if(a!==z.Ut&&a!==z.bo)return this.nB(a),this.ended=!0,!1;if(h.nf&&(0===h.ge||a===z.Ut||0===h.Kg&&(b===z.Tt||b===z.ED)))if("string"===this.options.to){var l=p.yV(h.ti,h.nf);var m=h.nf-l;var n=p.RM(h.ti,l);h.nf=m;h.ge=d-m;m&&r.wm(h.ti,h.ti,l,m,0);this.rH(n)}else this.rH(r.tI(h.ti,h.nf));0===h.Kg&&0===h.ge&&(k=!0)}while((0<h.Kg||0===h.ge)&&a!==z.Ut);a===z.Ut&&(b=z.Tt);if(b===z.Tt)return a=v.PQ(this.Gn),this.nB(a),this.ended=
!0,a===z.bo;b===z.ED&&(this.nB(z.bo),h.ge=0);return!0};m.prototype.rH=function(a){this.ru.push(a)};m.prototype.nB=function(a){a===z.bo&&(this.result="string"===this.options.to?this.ru.join(""):r.AF(this.ru));this.ru=[];this.Oz=a;this.msg=this.Gn.msg};d.cW=m;d.yA=n;d.UX=function(a,b){b=b||{};b.raw=!0;return n(a,b)};d.RY=n},{"./utils/common":1,"./utils/strings":2,"./zlib/constants":4,"./zlib/gzheader":6,"./zlib/inflate":8,"./zlib/messages":10,"./zlib/zstream":11}]},{},[])("/lib/inflate.js")});var N=
window.mS.yA},function(D,w,f){f(32).a.module.shader_texts=function(f){f["anchors.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"txt",aa:"GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 ) ; }".split(" ")}]};f["anchors.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"ANCHOR_NUM",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"txt",aa:"uniform vec3 u_position [ ANCHOR_NUM ] ; uniform mat4 u_view_proj_matrix ; uniform vec2 u_texel_size ; GLSL_IN float a_index ; void main ( ) { int c = int ( mod ( a_index , 3.0 ) ) ; int d = int ( a_index / 3.0 ) ; vec2 e ; if ( c == 0 ) { e = vec2 ( - 4.0 * u_texel_size [ 0 ] , - u_texel_size [ 1 ] ) ; } else if ( c == 1 ) { e = vec2 ( 4.0 * u_texel_size [ 0 ] , - u_texel_size [ 1 ] ) ; } else { e = vec2 ( 0.0 , 5.0 * u_texel_size [ 1 ] ) ; } vec4 f = u_view_proj_matrix * vec4 ( u_position [ d ] , 1.0 ) ; f . xy += e * f . w ; gl_Position = f ; }".split(" ")}]};
f["color_id.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"NODES",aa:["0"]},{$:"var",ba:"USE_TBN_SHADING",aa:["0"]},{$:"var",ba:"ALPHA",aa:["0"]},{$:"var",ba:"ALPHA_CLIP",aa:["0"]},{$:"var",ba:"TEXTURE_COLOR",aa:["0"]},{$:"var",ba:"SHADOW_USAGE",aa:["NO_SHADOWS"]},{$:"var",ba:"USE_OUTLINE",aa:["0"]},{$:"var",ba:"USE_VIEW_TSR",aa:["0"]},{$:"var",ba:"USE_VIEW_TSR_INVERSE",aa:["0"]},{$:"var",ba:"USE_MODEL_TSR",aa:["0"]},{$:"var",ba:"USE_MODEL_TSR_INVERSE",
aa:["0"]},{$:"var",ba:"CALC_TBN_SPACE",aa:["0"]},{$:"var",ba:"CAMERA_TYPE",aa:["CAM_TYPE_PERSP"]},{$:"var",ba:"USE_POSITION_CLIP",aa:["0"]},{$:"var",ba:"USE_REFRACTION",aa:["0"]},{$:"var",ba:"USE_REFRACTION_CORRECTION",aa:["0"]},{$:"var",ba:"USE_ENVIRONMENT_LIGHT",aa:["0"]},{$:"var",ba:"TEXTURE_BLEND_TYPE",aa:["TEXTURE_BLEND_TYPE_MIX"]},{$:"var",ba:"NUM_LIGHTS",aa:["0"]},{$:"var",ba:"NUM_LAMP_LIGHTS",aa:["0"]},{$:"var",ba:"SKY_TEXTURE",aa:["0"]},{$:"var",ba:"SKY_COLOR",aa:["0"]},{$:"var",ba:"NUM_VALUES",
aa:["0"]},{$:"var",ba:"NUM_RGBS",aa:["0"]},{$:"var",ba:"REFLECTION_TYPE",aa:["REFL_NONE"]},{$:"var",ba:"POISSON_DISK_NUM",aa:["NO_SOFT_SHADOWS"]},{$:"var",ba:"USE_DERIVATIVES_EXT",aa:["0"]},{$:"var",ba:"USE_LOD_SMOOTHING",aa:["0"]},{$:"cond",da:[{$:"if",ga:["GLSL1","USE_DERIVATIVES_EXT",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"extension",aa:["GL_OES_standard_derivatives",":","enable"]}]}}]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"cond",da:[{$:"if",ga:["NODES",
"ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"include",oa:"math.glslv"}]}}]},{$:"cond",da:[{$:"if",ga:["USE_LOD_SMOOTHING"],ha:{$:"grp",da:[{$:"include",oa:"coverage.glslf"}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_time ; uniform float u_environment_energy ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NUM_LIGHTS",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},
{$:"txt",aa:["uniform","vec3","u_camera_eye_frag",";"]},{$:"cond",da:[{$:"if",ga:["USE_NODE_FRESNEL","USE_NODE_LAYER_WEIGHT",{$:"logical_or_expr",ia:2},"CAMERA_TYPE","CAM_TYPE_ORTHO",{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_camera_direction",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"USE_VIEW_TSR",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},
{$:"cond",da:[{$:"if",ga:["USE_VIEW_TSR_INVERSE"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_view_tsr_inverse",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_MODEL_TSR"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_model_tsr",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_MODEL_TSR_INVERSE"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_model_tsr_inverse",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform",
"samplerCube","u_sky_texture",";"]}]}},{$:"elif",ga:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_diffuse_color",";"]},{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:"uniform sampler2D u_sampler ; uniform float u_alpha_factor ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_OUTLINE",
{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_color_id",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform",
"sampler2D","u_plane_reflection",";"]}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_CUBE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_cube_reflection",";"]}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_MIRRORMAP",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_B4W_REFRACTION"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_refractmap",";"]},{$:"cond",da:[{$:"if",ga:["USE_REFRACTION",
"USE_REFRACTION_CORRECTION",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]}]}}]},{$:"txt",aa:"uniform float u_emit ; uniform float u_ambient ; uniform vec2 u_fresnel_params ;".split(" ")},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_MIRRORMAP",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_mirror_factor",";"]}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",
aa:["uniform","vec4","u_refl_plane",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_LAMP"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_lamp_light_positions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_directions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_color_intensities [ NUM_LAMP_LIGHTS ] ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_VALUE"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_node_values [ NUM_VALUES ] ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_RGB"],ha:{$:"grp",
da:[{$:"txt",aa:"uniform vec3 u_node_rgbs [ NUM_RGBS ] ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_pcf_blur_radii",";"]}]}}]},{$:"txt",aa:"uniform vec4 u_csm_center_dists ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map0 ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map1 ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map2 ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map3 ; uniform sampler2D u_shadow_mask ;".split(" ")}]}}]}]}}]},
{$:"cond",da:[{$:"if",ga:["USE_OUTLINE"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_outline_intensity",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_OBJECT_INFO"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_obj_info",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_LOD_SMOOTHING"],ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_lod_coverage ; uniform float u_lod_cmp_logic ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_IN vec3 h ; GLSL_IN vec4 i ; GLSL_IN vec3 j ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","k",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"USE_POSITION_CLIP",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","l",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","float","m",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",
{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_IN vec4 n ; GLSL_IN vec4 o ; GLSL_IN vec4 u ; GLSL_IN vec4 v ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec2","A",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","B",";"]}]}}]},{$:"txt",aa:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",
ia:2}],ha:{$:"grp",da:[{$:"include",oa:"nodes.glslf"}]}}]},{$:"txt",aa:["void","main","(",")","{"]},{$:"cond",da:[{$:"if",ga:["USE_LOD_SMOOTHING"],ha:{$:"grp",da:[{$:"txt",aa:"if ( ! C ( u_lod_coverage , u_lod_cmp_logic ) ) discard ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["ALPHA"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["NODES"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 D = normalize ( u_camera_eye_frag - h ) ; vec3 E ; vec3 F ; vec3 G ; vec4 H ; float I ; J ( D , E , F , G , H , I ) ; float L = I ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:"float L = ( GLSL_TEXTURE ( u_sampler , A ) ) . a ;".split(" ")},{$:"cond",da:[{$:"if",ga:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float M = u_alpha_factor * L ; M += ( 1.0 - step ( 0.0 , M ) ) ; L = mix ( M , 1.0 , u_diffuse_color . a ) ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"float L = u_diffuse_color . a ;".split(" ")}]}}]}]}}]},
{$:"cond",da:[{$:"if",ga:["ALPHA_CLIP"],ha:{$:"grp",da:[{$:"txt",aa:"if ( L < 0.5 ) discard ; L = 1.0 ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_OUTLINE"],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 , 1.0 , 1.0 , u_outline_intensity ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( u_color_id , 1.0 ) ;".split(" ")}]}}]},{$:"txt",aa:["}"]}]};f["color_id.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",
aa:["highp"]},{$:"var",ba:"NODES",aa:["0"]},{$:"var",ba:"CAUSTICS",aa:["0"]},{$:"var",ba:"CALC_TBN_SPACE",aa:["0"]},{$:"var",ba:"MAIN_BEND_COL",aa:["0"]},{$:"var",ba:"DETAIL_BEND",aa:["0"]},{$:"var",ba:"CALC_TBN",aa:["0"]},{$:"var",ba:"USE_TBN_SHADING",aa:["0"]},{$:"var",ba:"USE_POSITION_CLIP",aa:["0"]},{$:"var",ba:"ALPHA",aa:["0"]},{$:"var",ba:"TEXTURE_COLOR",aa:["0"]},{$:"var",ba:"AU_QUALIFIER",aa:["GLSL_IN"]},{$:"var",ba:"STATIC_BATCH",aa:["0"]},{$:"var",ba:"WIND_BEND",aa:["0"]},{$:"var",ba:"BEND_CENTER_ONLY",
aa:["0"]},{$:"var",ba:"BILLBOARD",aa:["0"]},{$:"var",ba:"BILLBOARD_JITTERED",aa:["0"]},{$:"var",ba:"DYNAMIC_GRASS",aa:["0"]},{$:"var",ba:"SKINNED",aa:["0"]},{$:"var",ba:"FRAMES_BLENDING",aa:["0"]},{$:"var",ba:"VERTEX_ANIM",aa:["0"]},{$:"var",ba:"SMAA_JITTER",aa:["0"]},{$:"var",ba:"VERTEX_ANIM_MIX_NORMALS_FACTOR",aa:["u_va_frame_factor"]},{$:"var",ba:"MAX_BONES",aa:["0"]},{$:"var",ba:"REFLECTION_TYPE",aa:["REFL_NONE"]},{$:"var",ba:"REFRACTIVE",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"include",oa:"math.glslv"},
{$:"include",oa:"to_world.glslv"},{$:"include",oa:"scale_texcoord.glslv"},{$:"cond",da:[{$:"if",ga:["STATIC_BATCH"],ha:{$:"grp",da:[{$:"txt",aa:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 1.0 , 1.0 , 0.0 , 0.0 , 0.0 ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","mat3","u_model_tsr",";"]}]}}]},{$:"txt",aa:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ;".split(" ")},{$:"cond",da:[{$:"if",ga:["BILLBOARD","DYNAMIC_GRASS",{$:"logical_or_expr",ia:2}],
ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_camera_eye",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["SMAA_JITTER"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_B4W_REFRACTION"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["SKINNED"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_quatsb [ MAX_BONES ] ; uniform vec4 u_transb [ MAX_BONES ] ; uniform vec4 u_arm_rel_trans ; uniform vec4 u_arm_rel_quat ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FRAMES_BLENDING"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_quatsa [ MAX_BONES ] ; uniform vec4 u_transa [ MAX_BONES ] ; uniform float u_frame_factor ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["BILLBOARD_JITTERED"],ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_jitter_amp ; uniform float u_jitter_freq ;".split(" ")}]}}]},{$:"txt",aa:"uniform vec3 u_wind ; uniform PRECISION float u_time ;".split(" ")}]}}]},{$:"cond",
da:[{$:"if",ga:["VERTEX_ANIM"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_va_frame_factor",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_texture_scale",";"]}]}}]},{$:"txt",aa:"GLSL_IN vec3 a_position ; GLSL_IN vec4 a_tbn ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","a_shade_tangs",";"]}]}}]}]}}]},
{$:"cond",da:[{$:"if",ga:["SKINNED"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","a_influence",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["MAIN_BEND_COL"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","float","a_bending_col_main",";"]},{$:"cond",da:[{$:"if",ga:["DETAIL_BEND"],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_IN vec3 a_bending_col_detail ; AU_QUALIFIER float au_detail_bending_amp ; AU_QUALIFIER float au_branch_bending_amp ; AU_QUALIFIER float au_detail_bending_freq ;".split(" ")}]}}]}]}}]},
{$:"txt",aa:"AU_QUALIFIER float au_wind_bending_amp ; AU_QUALIFIER float au_wind_bending_freq ;".split(" ")},{$:"cond",da:[{$:"if",ga:["BEND_CENTER_ONLY"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","a_emitter_center",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND","BILLBOARD",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["VERTEX_ANIM"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","a_position_next",";"]},
{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE",{$:"logical_or_expr",ia:5}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","a_tbn_next",";"]}]}}]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec2","a_texcoord",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",
aa:["GLSL_OUT","vec3","B",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT vec3 h ; GLSL_OUT vec4 i ; GLSL_OUT vec3 j ;".split(" ")},{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","k",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"USE_POSITION_CLIP",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","l",";"]}]}}]},{$:"cond",
da:[{$:"if",ga:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","float","m",";"]}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec2","A",";"]}]}}]}]}}]},{$:"include",oa:"skin.glslv"},{$:"include",oa:"wind_bending.glslv"},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"include",oa:"nodes.glslv"}]}}]},{$:"txt",aa:"void main ( ) { mat3 N = u_view_tsr ; vec3 O = a_position ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["NODES","ALPHA","CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_NORMAL_MAP","USE_NODE_GEOMETRY_NO","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{$:"logical_and_expr",ia:3},{$:"logical_or_expr",ia:6},{$:"logical_and_expr",ia:3},"USE_TBN_SHADING","CALC_TBN",{$:"logical_and_expr",ia:2},"USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_NO","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{$:"logical_or_expr",ia:7}],ha:{$:"grp",da:[{$:"txt",aa:"float P , Q ; vec4 S = R ( a_tbn , P , Q ) ; vec3 U = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 V = T ( S , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 W = Q * cross ( U , V ) ; vec4 Y = X ( W , Q * P ) ; V = T ( Y , U ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 U = vec3 ( 0.0 ) ; vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ;".split(" ")}]}}]},{$:"txt",aa:["mat3","Z","=","u_model_tsr",";"]},{$:"cond",
da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["CALC_TBN"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 ac = normalize ( _ ( u_model_tsr , U ) ) ; vec3 ad = cross ( vec3 ( 0.0 , 0.0 , 1.0 ) , ac ) ; vec3 ae = cross ( ac , ad ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["vec3","ae","=","a_shade_tangs",";"]}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 ae = vec3 ( 0.0 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["VERTEX_ANIM"],ha:{$:"grp",da:[{$:"txt",aa:"O = mix ( O , a_position_next , u_va_frame_factor ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE",{$:"logical_or_expr",ia:5}],ha:{$:"grp",da:[{$:"txt",aa:"float af , ah ; vec4 ai = R ( a_tbn_next , af , ah ) ; vec3 aj = T ( ai , vec3 ( 0.0 , 1.0 , 0.0 ) ) ; U = mix ( U , aj , VERTEX_ANIM_MIX_NORMALS_FACTOR ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE"],ha:{$:"grp",da:[{$:"txt",
aa:"vec3 ak = T ( ai , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 al = ah * cross ( aj , ak ) ; vec4 am = X ( al , ah * af ) ; ak = T ( am , aj ) ; V = mix ( V , ak , u_va_frame_factor ) ; W = mix ( W , al , u_va_frame_factor ) ;".split(" ")}]}}]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["SKINNED"],ha:{$:"grp",da:[{$:"txt",aa:"an ( O , V , W , U ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND","BILLBOARD",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["vec3","ao","=","au_center_pos",";"]}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 ao = vec3 ( 0.0 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["BILLBOARD"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 aq = ap ( Z , ao ) ; Z = as ( u_camera_eye , aq , N , Z ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["WIND_BEND","BILLBOARD_JITTERED",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"Z = at ( u_wind , u_time , u_jitter_amp , u_jitter_freq , aq , Z ) ;".split(" ")}]}}]},{$:"txt",aa:"au aw = av ( O - ao , ao , V , ae , W , U , Z ) ; aw . ao = aq ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"au aw = av ( O , ao , V , ae , W , U , Z ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"ax ( aw . O , aw . ao , U , mat4 ( 0.0 ) ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["MAIN_BEND_COL","DETAIL_BEND",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 ay = T ( a_tbn , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 ay = vec3 ( 0.0 ) ;".split(" ")}]}}]},{$:"txt",aa:"ax ( aw . O , aw . ao , ay , mat4 ( 0.0 ) ) ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2},{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:"A = az ( a_texcoord , u_texture_scale ) ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",
da:[{$:"txt",aa:"h = aw . O ;".split(" ")},{$:"cond",da:[{$:"if",ga:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{$:"logical_and_expr",ia:3},"USE_NODE_TEX_COORD_NO","USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{$:"logical_or_expr",ia:12}],ha:{$:"grp",da:[{$:"txt",aa:"j = aw . U ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE"],ha:{$:"grp",
da:[{$:"txt",aa:"float aA = ( dot ( cross ( aw . U , aw . V ) , aw . W ) < 0.0 ) ? - 1.0 : 1.0 ; k = vec4 ( aw . V , aA ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",aa:"B = aw . aB ;".split(" ")}]}}]},{$:"txt",aa:"i = vec4 ( ap ( N , aw . O ) , 1.0 ) ; vec4 f = u_proj_matrix * i ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SMAA_JITTER"],ha:{$:"grp",da:[{$:"txt",aa:"f . xy += u_subpixel_jitter * f . w ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE",
"REFL_PLANE",{$:"equal_expr",ia:2},"USE_POSITION_CLIP",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"l = aC ( f ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"m = - i . z / u_view_max_depth ;".split(" ")}]}}]},{$:"txt",aa:["J","(",")",";"]}]}}]},{$:"txt",aa:"gl_Position = u_proj_matrix * vec4 ( ap ( N , aw . O ) , 1.0 ) ; }".split(" ")}]};f["debug_view.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},
{$:"var",ba:"DEBUG_SPHERE",aa:["0"]},{$:"var",ba:"WIREFRAME_QUALITY",aa:["0"]},{$:"var",ba:"ALPHA",aa:["0"]},{$:"var",ba:"DEBUG_SPHERE_DYNAMIC",aa:["0"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"cond",da:[{$:"if",ga:["DEBUG_SPHERE",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"uniform int u_debug_view_mode ; uniform float u_cluster_id ; uniform float u_batch_debug_id_color ; uniform float u_batch_debug_main_render_time ; uniform float u_debug_colors_seed ; uniform float u_debug_render_time_threshold ; uniform vec3 u_wireframe_edge_color ;".split(" ")}]}}]},
{$:"txt",aa:"GLSL_IN vec3 aD ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; const float aE = 1.0 ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DEBUG_SPHERE"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["DEBUG_SPHERE_DYNAMIC"],ha:{$:"grp",da:[{$:"txt",aa:"const vec3 aF = vec3 ( 1.0 , 0.05 , 0.05 ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"const vec3 aF = vec3 ( 0.05 , 0.05 , 1.0 ) ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"const vec3 aG = vec3 ( 0.4 , 0.4 , 1.0 ) ; const vec3 aH = vec3 ( 1.0 , 0.4 , 0.4 ) ; const vec3 aI = vec3 ( 1.0 , 1.0 , 1.0 ) ; const vec3 aJ = vec3 ( 0.0 , 133.0 / 255.0 , 66.0 / 255.0 ) ; const vec3 aK = vec3 ( 160.0 / 255.0 , 38.0 / 255.0 , 33.0 / 255.0 ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["DEBUG_SPHERE",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"float aP ( ) { float aL = 1.0 ;".split(" ")},{$:"cond",da:[{$:"if",ga:["WIREFRAME_QUALITY",0,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 aM = sign ( aD - vec3 ( 0.02 * aE ) ) ; if ( aM . x < 0.0 || aM . y < 0.0 || aM . z < 0.0 ) aL = 0.0 ;".split(" ")}]}},{$:"elif",ga:["WIREFRAME_QUALITY",1,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["GLSL1"],ha:{$:"grp",da:[{$:"extension",
aa:["GL_OES_standard_derivatives",":","enable"]}]}}]},{$:"txt",aa:"vec3 aN = fwidth ( aD ) ; vec3 aO = smoothstep ( vec3 ( 0.0 ) , aN * aE , aD ) ; aL = min ( min ( aO . x , aO . y ) , aO . z ) ; aL = clamp ( aL , 0.0 , 1.0 ) ;".split(" ")}]}}]},{$:"txt",aa:["return","aL",";","}"]}]}}]},{$:"txt",aa:"void main ( ) { vec3 aQ = vec3 ( 0.0 ) ; float L = 0.0 ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DEBUG_SPHERE"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 aM = sign ( aD - vec3 ( 0.02 * aE ) ) ; if ( aM . x < 0.0 || aM . y < 0.0 || aM . z < 0.0 ) { aQ = aF ; L = 1.0 ; } else discard ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"if ( u_debug_view_mode == DV_OPAQUE_WIREFRAME ) { float aL = aP ( ) ; aQ = vec3 ( mix ( u_wireframe_edge_color , aI , aL ) ) ; L = 1.0 ; } else if ( u_debug_view_mode == DV_TRANSPARENT_WIREFRAME ) { float aL = aP ( ) ; aQ = u_wireframe_edge_color ; L = mix ( 1.0 , 0.0 , aL ) ; } else if ( u_debug_view_mode == DV_FRONT_BACK_VIEW ) { float aL = aP ( ) ; if ( gl_FrontFacing ) aQ = mix ( u_wireframe_edge_color , aG , aL ) ; else aQ = mix ( u_wireframe_edge_color , aH , aL ) ; L = 1.0 ; } else if ( u_debug_view_mode == DV_CLUSTERS_VIEW ) { float aR = u_cluster_id + u_debug_colors_seed + 2.0 ; aQ = vec3 ( fract ( aR * 19.73 ) , fract ( aR * 6.34 ) , fract ( aR * 1.56 ) ) ; L = 1.0 ; } else if ( u_debug_view_mode == DV_BATCHES_VIEW ) { float aR = u_batch_debug_id_color + u_debug_colors_seed ; aQ = vec3 ( fract ( aR * 19.73 ) , fract ( aR * 6.34 ) , fract ( aR * 1.56 ) ) ; L = 1.0 ; } else if ( u_debug_view_mode == DV_RENDER_TIME ) { float aS ; if ( u_debug_render_time_threshold > 0.0 ) aS = clamp ( u_batch_debug_main_render_time , 0.0 , u_debug_render_time_threshold ) / u_debug_render_time_threshold ; else aS = 1.0 ; float aT = clamp ( 2.0 * aS , 0.0 , 1.0 ) ; float aU = clamp ( 2.0 * aS - 1.0 , 0.0 , 1.0 ) ; float aV = aS ; aQ = mix ( aJ , aK , vec3 ( aT , aU , aV ) ) ; L = 1.0 ; }".split(" ")}]}}]},
{$:"txt",aa:["aW","(","aQ",")",";"]},{$:"cond",da:[{$:"if",ga:["ALPHA"],ha:{$:"grp",da:[{$:"txt",aa:"aX ( aQ , L ) ;".split(" ")}]}}]},{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};f["debug_view.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"USE_INSTANCED_PARTCLS",aa:["0"]},{$:"var",ba:"DEBUG_VIEW_SPECIAL_SKYDOME",aa:["0"]},{$:"var",ba:"DEBUG_SPHERE",aa:["0"]},{$:"var",ba:"WIND_BEND",aa:["0"]},{$:"var",ba:"DYNAMIC_GRASS",
aa:["0"]},{$:"var",ba:"BILLBOARD",aa:["0"]},{$:"var",ba:"VERTEX_ANIM",aa:["0"]},{$:"var",ba:"SKINNED",aa:["0"]},{$:"var",ba:"STATIC_BATCH",aa:["0"]},{$:"var",ba:"AU_QUALIFIER",aa:["GLSL_IN"]},{$:"var",ba:"BEND_CENTER_ONLY",aa:["0"]},{$:"var",ba:"FRAMES_BLENDING",aa:["0"]},{$:"var",ba:"MAIN_BEND_COL",aa:["0"]},{$:"var",ba:"MAX_BONES",aa:["0"]},{$:"var",ba:"DETAIL_BEND",aa:["0"]},{$:"var",ba:"BILLBOARD_JITTERED",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"include",oa:"math.glslv"},{$:"include",oa:"to_world.glslv"},
{$:"txt",aa:"GLSL_IN vec3 a_position ; GLSL_IN vec4 a_tbn ; GLSL_IN float a_polyindex ;".split(" ")},{$:"cond",da:[{$:"if",ga:["USE_INSTANCED_PARTCLS"],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_IN vec4 a_part_ts ; GLSL_IN vec4 a_part_r ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["DEBUG_SPHERE",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["WIND_BEND"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["MAIN_BEND_COL"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","float","a_bending_col_main",
";"]},{$:"cond",da:[{$:"if",ga:["DETAIL_BEND"],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_IN vec3 a_bending_col_detail ; AU_QUALIFIER float au_detail_bending_amp ; AU_QUALIFIER float au_branch_bending_amp ; AU_QUALIFIER float au_detail_bending_freq ;".split(" ")}]}}]}]}}]},{$:"txt",aa:"AU_QUALIFIER float au_wind_bending_amp ; AU_QUALIFIER float au_wind_bending_freq ;".split(" ")},{$:"cond",da:[{$:"if",ga:["BEND_CENTER_ONLY"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","a_emitter_center",";"]}]}}]}]}}]},
{$:"cond",da:[{$:"if",ga:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{$:"logical_or_expr",ia:3},"USE_INSTANCED_PARTCLS",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["VERTEX_ANIM"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","a_position_next",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SKINNED"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","a_influence",";"]}]}}]}]}}]},{$:"txt",aa:["GLSL_OUT",
"vec3","aD",";"]},{$:"cond",da:[{$:"if",ga:["STATIC_BATCH"],ha:{$:"grp",da:[{$:"txt",aa:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 1.0 , 1.0 , 0.0 , 0.0 , 0.0 ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_model_tsr",";"]}]}}]},{$:"txt",aa:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DEBUG_SPHERE",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["WIND_BEND"],ha:{$:"grp",da:[{$:"txt",
aa:"uniform vec3 u_wind ; uniform float u_time ;".split(" ")},{$:"cond",da:[{$:"if",ga:["BILLBOARD","BILLBOARD_JITTERED",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_jitter_amp ; uniform float u_jitter_freq ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS","BILLBOARD",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_camera_eye",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["VERTEX_ANIM"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float",
"u_va_frame_factor",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SKINNED"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_quatsb [ MAX_BONES ] ; uniform vec4 u_transb [ MAX_BONES ] ; uniform vec4 u_arm_rel_trans ; uniform vec4 u_arm_rel_quat ;".split(" ")},{$:"cond",da:[{$:"if",ga:["FRAMES_BLENDING"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_quatsa [ MAX_BONES ] ; uniform vec4 u_transa [ MAX_BONES ] ; uniform float u_frame_factor ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS"],ha:{$:"grp",
da:[{$:"txt",aa:"uniform PRECISION sampler2D u_grass_map_depth ; uniform sampler2D u_grass_map_color ; uniform vec4 u_camera_quat ; uniform vec3 u_grass_map_dim ; uniform float u_grass_size ; uniform float u_scale_threshold ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["DEBUG_SPHERE",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"include",oa:"skin.glslv"},{$:"include",oa:"wind_bending.glslv"},{$:"include",oa:"dynamic_grass.glslv"}]}}]},{$:"txt",aa:"void main ( ) { if ( a_polyindex == 0.0 ) aD = vec3 ( 1.0 , 0.0 , 0.0 ) ; else if ( a_polyindex == 1.0 ) aD = vec3 ( 0.0 , 0.0 , 1.0 ) ; else aD = vec3 ( 0.0 , 1.0 , 0.0 ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["DEBUG_VIEW_SPECIAL_SKYDOME"],ha:{$:"grp",da:[{$:"txt",aa:"gl_Position = vec4 ( a_position . xy , 0.9999999 , 1.0 ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["USE_INSTANCED_PARTCLS"],ha:{$:"grp",da:[{$:"txt",aa:"mat3 Z = aZ ( a_part_ts . xyz , aY ( ) ) ; Z = a_ ( vec3 ( a_part_ts . w ) , Z ) ; Z = bc ( a_part_r , Z ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["STATIC_BATCH",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"Z = bd ( u_model_tsr , Z ) ;".split(" ")}]}}]}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["mat3","Z","=","u_model_tsr",";"]}]}}]},{$:"txt",aa:"mat3 N = u_view_tsr ; vec3 O = a_position ; vec4 S = R ( a_tbn ) ; vec3 U = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DEBUG_SPHERE"],ha:{$:"grp",da:[{$:"txt",aa:"au aw = av ( O , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , Z ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["VERTEX_ANIM"],ha:{$:"grp",da:[{$:"txt",aa:"O = mix ( O , a_position_next , u_va_frame_factor ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["SKINNED"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ; an ( O , V , W , U ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{$:"logical_or_expr",ia:3},"USE_INSTANCED_PARTCLS",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["vec3","ao","=","au_center_pos",";"]}]}},{$:"elif",ga:["DYNAMIC_GRASS","USE_INSTANCED_PARTCLS",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",
aa:"vec3 ao = a_part_ts . xyz ; O = ap ( Z , O ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 ao = vec3 ( 0.0 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS"],ha:{$:"grp",da:[{$:"txt",aa:"au aw = be ( O , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , ao , u_grass_map_depth , u_grass_map_color , u_grass_map_dim , u_grass_size , u_camera_eye , u_camera_quat , N , Z ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["BILLBOARD"],ha:{$:"grp",
da:[{$:"txt",aa:"vec3 aq = ap ( Z , ao ) ; Z = as ( u_camera_eye , aq , N , Z ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["WIND_BEND","BILLBOARD_JITTERED",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 bf = aq ; Z = at ( u_wind , u_time , u_jitter_amp , u_jitter_freq , bf , Z ) ;".split(" ")}]}}]},{$:"txt",aa:"au aw = av ( O - ao , ao , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , Z ) ; aw . ao = aq ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"au aw = av ( O , ao , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , Z ) ;".split(" ")}]}}]}]}}]},
{$:"cond",da:[{$:"if",ga:["WIND_BEND"],ha:{$:"grp",da:[{$:"txt",aa:"ax ( aw . O , aw . ao , U , mat4 ( 0.0 ) ) ;".split(" ")}]}}]}]}}]},{$:"txt",aa:"gl_Position = u_proj_matrix * vec4 ( ap ( N , aw . O ) , 1.0 ) ;".split(" ")}]}}]},{$:"txt",aa:["}"]}]};f["error.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"txt",aa:"GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 , 0.0 , 1.0 , 1.0 ) ; }".split(" ")}]};
f["error.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"std.glsl"},{$:"include",oa:"math.glslv"},{$:"txt",aa:"GLSL_IN vec3 a_position ; uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; void main ( ) { gl_Position = u_proj_matrix * bh ( u_view_tsr ) * vec4 ( a_position , 1.0 ) ; }".split(" ")}]};f["grass_map.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"DYNAMIC_GRASS_SIZE",aa:["0"]},{$:"var",ba:"DYNAMIC_GRASS_COLOR",aa:["0"]},{$:"include",oa:"precision_statement.glslf"},
{$:"include",oa:"std.glsl"},{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS_SIZE"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","bi",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","float","bi",";"]}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","bi",";"]}]}}]}]}}]},{$:"txt",aa:"GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) {".split(" ")},{$:"cond",
da:[{$:"if",ga:["DYNAMIC_GRASS_SIZE"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT_FRAG_COLOR","=","bi",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( bi , vec3 ( 1.0 ) ) ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 , bi ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 ) ;".split(" ")}]}}]}]}}]},
{$:"txt",aa:["}"]}]};f["grass_map.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"DYNAMIC_GRASS_SIZE",aa:["0"]},{$:"var",ba:"DYNAMIC_GRASS_COLOR",aa:["0"]},{$:"var",ba:"WIND_BEND",aa:["0"]},{$:"var",ba:"STATIC_BATCH",aa:["0"]},{$:"var",ba:"BILLBOARD",aa:["0"]},{$:"var",ba:"BILLBOARD_JITTERED",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"include",oa:"math.glslv"},{$:"include",oa:"to_world.glslv"},{$:"txt",aa:["GLSL_IN","vec3","a_position",";"]},{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS_SIZE"],
ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","float","a_grass_size",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","a_grass_color",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS_SIZE"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","bi",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","float","bi",";"]}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS_COLOR"],
ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","bi",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["STATIC_BATCH"],ha:{$:"grp",da:[{$:"txt",aa:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 1.0 , 1.0 , 0.0 , 0.0 , 0.0 ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_model_tsr",";"]}]}}]},{$:"txt",aa:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ;".split(" ")},{$:"cond",da:[{$:"if",ga:["BILLBOARD"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_camera_eye",
";"]}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND","BILLBOARD_JITTERED",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_wind ; uniform float u_time ; uniform float u_jitter_amp ; uniform float u_jitter_freq ;".split(" ")}]}}]},{$:"txt",aa:"void main ( ) { mat3 N = u_view_tsr ; mat3 Z = u_model_tsr ;".split(" ")},{$:"cond",da:[{$:"if",ga:["BILLBOARD"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 aq = ap ( Z , vec3 ( 0.0 ) ) ; Z = as ( u_camera_eye , aq , N , u_model_tsr ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["WIND_BEND","BILLBOARD_JITTERED",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"Z = at ( u_wind , u_time , u_jitter_amp , u_jitter_freq , vec3 ( 0.0 ) , Z ) ;".split(" ")}]}}]},{$:"txt",aa:"au aw = av ( a_position , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , Z ) ; aw . ao = aq ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"au aw = av ( a_position , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , Z ) ;".split(" ")}]}}]},
{$:"txt",aa:"vec4 f = u_proj_matrix * vec4 ( ap ( N , aw . O ) , 1.0 ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS_SIZE"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:"bi = vec4 ( a_grass_size , a_grass_color ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["bi","=","a_grass_size",";"]}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["bi","=","a_grass_color",";"]}]}}]}]}}]},
{$:"txt",aa:["gl_Position","=","f",";","}"]}]};f["halo.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"SKY_STARS",aa:["0"]},{$:"var",ba:"WATER_EFFECTS",aa:["0"]},{$:"var",ba:"DISABLE_FOG",aa:["0"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"txt",aa:"uniform vec4 u_diffuse_color ; uniform vec3 u_halo_rings_color ; uniform vec3 u_halo_lines_color ; uniform float u_halo_hardness ; uniform float u_halo_size ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SKY_STARS"],
ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_sun_intensity",";"]},{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS","DISABLE_FOG",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_halo_stars_blend ; uniform float u_halo_stars_height ; uniform float u_cam_water_depth ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["SKY_STARS","WATER_EFFECTS","DISABLE_FOG",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN",
"vec4","bj",";"]}]}}]},{$:"txt",aa:"GLSL_IN vec2 A ; GLSL_IN float bk ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},{$:"include",oa:"color_util.glslf"},{$:"include",oa:"halo_color.glslf"},{$:"txt",aa:"void main ( ) { vec4 bm = bl ( ) ; vec3 aQ = bm . rgb ; float aM = bm . a ; aW ( aQ ) ; aX ( aQ , aM ) ; GLSL_OUT_FRAG_COLOR = vec4 ( aQ , aM ) ; }".split(" ")}]};f["halo.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"WATER_EFFECTS",aa:["0"]},
{$:"var",ba:"DISABLE_FOG",aa:["0"]},{$:"var",ba:"SKY_STARS",aa:["0"]},{$:"var",ba:"STATIC_BATCH",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"include",oa:"math.glslv"},{$:"include",oa:"to_world.glslv"},{$:"txt",aa:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; uniform PRECISION float u_halo_size ; uniform vec3 u_camera_eye ;".split(" ")},{$:"cond",da:[{$:"if",ga:["STATIC_BATCH"],ha:{$:"grp",da:[{$:"txt",aa:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 1.0 , 1.0 , 0.0 , 0.0 , 0.0 ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_model_tsr",";"]}]}}]},{$:"txt",aa:"GLSL_IN vec3 a_position ; GLSL_IN vec2 a_halo_bb_vertex ; GLSL_IN float a_random_vals ; GLSL_OUT vec2 A ; GLSL_OUT float bk ;".split(" ")},{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS","DISABLE_FOG",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","bj",";"]}]}}]},{$:"txt",aa:"void main ( ) { mat3 N = u_view_tsr ; mat3 Z = u_model_tsr ; vec3 O = ap ( Z , a_position ) ; A = a_halo_bb_vertex * 2.0 - 1.0 ; bk = a_random_vals ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["SKY_STARS"],ha:{$:"grp",da:[{$:"txt",aa:"mat3 bo = bn ( O , N ) ; mat3 bp = N ; bp [ 0 ] [ 0 ] = 0.0 ; bp [ 0 ] [ 1 ] = 0.0 ; bp [ 0 ] [ 2 ] = 0.0 ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"mat3 bo = bn ( O , N ) ;".split(" ")}]}}]},{$:"txt",aa:"vec2 bq = ( a_halo_bb_vertex * 2.0 - 1.0 ) * u_halo_size ; vec3 bs = vec3 ( bq [ 0 ] , 0.0 , bq [ 1 ] ) ; vec3 bt = ap ( bo , bs ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SKY_STARS"],ha:{$:"grp",da:[{$:"txt",aa:"vec4 f = u_proj_matrix * vec4 ( ap ( bp , bt ) , 1.0 ) ; f . z = 0.99999 * f . w ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS","DISABLE_FOG",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"bj = vec4 ( bt , 1.0 ) ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec4 f = u_proj_matrix * vec4 ( ap ( N , bt ) , 1.0 ) ;".split(" ")}]}}]},{$:"txt",aa:["gl_Position","=","f",";","}"]}]};f["irradiance_skybox.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",
oa:"color_util.glslf"},{$:"txt",aa:"uniform samplerCube u_sky_reflection ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; GLSL_IN vec3 bu ; void main ( ) { vec3 bv = normalize ( bu ) ; vec3 bw ; vec3 bx = vec3 ( 0.0 ) ; vec3 by = vec3 ( 0.0 , 0.0 , 1.0 ) ; vec3 bz = vec3 ( 1.0 , 0.0 , 0.0 ) ; const float bA = 0.025 ; float bB = 0.0 ; for ( float bC = 0.0 ; bC < 2.0 * M_PI ; bC += bA ) { for ( float bD = 0.0 ; bD < 0.5 * M_PI ; bD += bA ) { vec3 bE = vec3 ( sin ( bD ) * cos ( bC ) , sin ( bD ) * sin ( bC ) , cos ( bD ) ) ; vec3 bF = bE . x * bz + bE . y * by + bE . z * bv ; vec3 bw = GLSL_TEXTURE_CUBE ( u_sky_reflection , bF ) . rgb ; bG ( bw ) ; bx += bw * cos ( bD ) * sin ( bD ) ; bB ++ ; } } bx = M_PI * bx * ( 1.0 / float ( bB ) ) ; GLSL_OUT_FRAG_COLOR = vec4 ( bx , 1.0 ) ; }".split(" ")}]};
f["lens_flares.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"txt",aa:"uniform sampler2D u_sampler ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 aQ = GLSL_TEXTURE ( u_sampler , A ) ; aW ( aQ . rgb ) ; aX ( aQ . rgb , aQ . a ) ; GLSL_OUT_FRAG_COLOR = aQ ; }".split(" ")}]};f["lens_flares.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",
ba:"NUM_LIGHTS",aa:["0"]},{$:"define",ba:"LIGHT_INDEX",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"include",oa:"math.glslv"},{$:"txt",aa:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; GLSL_IN float a_lf_dist ; GLSL_IN vec2 a_lf_bb_vertex ; GLSL_IN vec2 a_texcoord ; GLSL_OUT vec2 A ; void main ( ) { A = a_texcoord ; vec3 bH = normalize ( u_light_directions [ LIGHT_INDEX ] ) ; vec4 f = u_proj_matrix * vec4 ( bI ( u_view_tsr , bH ) , 0.0 ) ; f . x /= f . w ; f . y /= f . w ; f += 99999.0 * step ( f . z , 0.0 ) ; f += 100.0 * ( step ( 1.0 , abs ( f . x ) ) + step ( 1.0 , abs ( f . y ) ) ) ; f . x = a_lf_dist * f . x ; f . y = a_lf_dist * f . y ; float bJ = u_proj_matrix [ 1 ] [ 1 ] / u_proj_matrix [ 0 ] [ 0 ] ; vec2 bK = vec2 ( a_lf_bb_vertex . x / bJ , a_lf_bb_vertex . y ) ; if ( a_lf_dist < 0.999 ) { const float bL = 1.9 ; bK *= ( 1.0 + bL * length ( f . xy ) ) ; } gl_Position = vec4 ( f . xy + bK , 0.999999 , 1.0 ) ; }".split(" ")}]};
f["line.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"ALPHA",aa:["0"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"txt",aa:"uniform vec4 u_diffuse_color ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec3 aQ = u_diffuse_color . xyz ; float L = u_diffuse_color . a ; aW ( aQ ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["ALPHA"],ha:{$:"grp",da:[{$:"txt",aa:"aX ( aQ , L ) ;".split(" ")}]}}]},{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};
f["line.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"std.glsl"},{$:"include",oa:"math.glslv"},{$:"include",oa:"to_world.glslv"},{$:"txt",aa:"GLSL_IN vec3 a_position ; GLSL_IN vec3 a_direction ; uniform mat3 u_model_tsr ; uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; uniform float u_height ; uniform float u_line_width ; void main ( ) { mat3 N = u_view_tsr ; mat3 Z = u_model_tsr ; au aw = av ( a_position , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , normalize ( a_direction ) , Z ) ; vec4 bM = u_proj_matrix * vec4 ( ap ( N , aw . O ) , 1.0 ) ; bM . xyz /= bM . w ; vec4 bN = u_proj_matrix * vec4 ( ap ( N , aw . O + aw . U ) , 1.0 ) ; bN . xyz /= bN . w ; float bJ = u_proj_matrix [ 1 ] [ 1 ] / u_proj_matrix [ 0 ] [ 0 ] ; vec2 bO = ( bN - bM ) . xy ; bO . x *= bJ ; float bP = M_PI / 2.0 ; mat2 bQ = mat2 ( cos ( bP ) , sin ( bP ) , - sin ( bP ) , cos ( bP ) ) ; bO = bQ * bO ; bO = normalize ( bO ) ; vec2 bR = ( u_line_width / u_height ) * vec2 ( 1.0 / bJ , 1.0 ) ; gl_Position = vec4 ( bM . xy + bO . xy * bR / 2.0 , bM . z , 1.0 ) ; gl_Position *= bM . w ; }".split(" ")}]};
f["main.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"SHADELESS",aa:["0"]},{$:"var",ba:"CAUSTICS",aa:["0"]},{$:"var",ba:"USE_ENVIRONMENT_LIGHT",aa:["0"]},{$:"var",ba:"SKY_TEXTURE",aa:["0"]},{$:"var",ba:"SKY_COLOR",aa:["0"]},{$:"var",ba:"NORMAL_TEXCOORD",aa:["0"]},{$:"var",ba:"USE_VIEW_TSR",aa:["0"]},{$:"var",ba:"USE_VIEW_TSR_INVERSE",aa:["0"]},{$:"var",ba:"USE_MODEL_TSR",aa:["0"]},{$:"var",ba:"USE_MODEL_TSR_INVERSE",aa:["0"]},{$:"var",ba:"USE_PROJ_MATRIX_FRAG",
aa:["0"]},{$:"var",ba:"WATER_EFFECTS",aa:["0"]},{$:"var",ba:"USE_FOG",aa:["0"]},{$:"var",ba:"CALC_TBN_SPACE",aa:["0"]},{$:"var",ba:"TEXTURE_NORM_CO",aa:["TEXTURE_COORDS_NONE"]},{$:"var",ba:"PARALLAX",aa:["0"]},{$:"var",ba:"USE_TBN_SHADING",aa:["0"]},{$:"var",ba:"CAMERA_TYPE",aa:["CAM_TYPE_PERSP"]},{$:"var",ba:"USE_POSITION_CLIP",aa:["0"]},{$:"var",ba:"RGBA_SHADOWS",aa:["0"]},{$:"var",ba:"USE_BSDF_SKY_DIM",aa:["0"]},{$:"var",ba:"NODES",aa:["0"]},{$:"var",ba:"ALPHA",aa:["0"]},{$:"var",ba:"ALPHA_CLIP",
aa:["0"]},{$:"var",ba:"WETTABLE",aa:["0"]},{$:"var",ba:"NUM_VALUES",aa:["0"]},{$:"var",ba:"NUM_RGBS",aa:["0"]},{$:"var",ba:"DISABLE_FOG",aa:["0"]},{$:"var",ba:"SHADOW_USAGE",aa:["NO_SHADOWS"]},{$:"var",ba:"NUM_LIGHTS",aa:["0"]},{$:"var",ba:"NUM_LAMP_LIGHTS",aa:["0"]},{$:"var",ba:"SSAO_ONLY",aa:["0"]},{$:"var",ba:"REFLECTION_TYPE",aa:["REFL_NONE"]},{$:"var",ba:"PROCEDURAL_FOG",aa:["0"]},{$:"var",ba:"REFRACTIVE",aa:["0"]},{$:"var",ba:"USE_REFRACTION",aa:["0"]},{$:"var",ba:"USE_REFRACTION_CORRECTION",
aa:["0"]},{$:"var",ba:"CSM_SECTION1",aa:["0"]},{$:"var",ba:"CSM_SECTION2",aa:["0"]},{$:"var",ba:"CSM_SECTION3",aa:["0"]},{$:"var",ba:"NUM_CAST_LAMPS",aa:["0"]},{$:"var",ba:"WATER_LEVEL",aa:["0.0"]},{$:"var",ba:"POISSON_DISK_NUM",aa:["NO_SOFT_SHADOWS"]},{$:"var",ba:"USE_DERIVATIVES_EXT",aa:["0"]},{$:"var",ba:"USE_TEXTURE_LOD_EXT",aa:["0"]},{$:"var",ba:"USE_LOD_SMOOTHING",aa:["0"]},{$:"cond",da:[{$:"if",ga:["GLSL1","USE_DERIVATIVES_EXT",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"extension",aa:["GL_OES_standard_derivatives",
":","enable"]}]}}]},{$:"cond",da:[{$:"if",ga:["GLSL1","USE_TEXTURE_LOD_EXT",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"extension",aa:["GL_EXT_shader_texture_lod",":","enable"]}]}}]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"include",oa:"math.glslv"},{$:"cond",da:[{$:"if",ga:["USE_LOD_SMOOTHING"],ha:{$:"grp",da:[{$:"include",oa:"coverage.glslf"}]}}]},{$:"cond",da:[{$:"if",ga:["SHADELESS",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",
da:[{$:"cond",da:[{$:"if",ga:["CAUSTICS"],ha:{$:"grp",da:[{$:"include",oa:"caustics.glslf"}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["RGBA_SHADOWS","USE_REFRACTION_CORRECTION",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"include",oa:"pack.glslf"}]}}]},{$:"txt",aa:"uniform float u_time ; uniform vec2 u_texel_size ;".split(" ")},{$:"cond",da:[{$:"if",ga:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_sky_texture",";"]}]}},{$:"elif",
ga:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["GLSL1","USE_BSDF_SKY_DIM",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_bsdf_cube_sky_dim",";"]}]}}]},{$:"txt",aa:["uniform","float","u_environment_energy",";"]},{$:"cond",da:[{$:"if",ga:["SHADELESS",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",
ga:["NUM_LIGHTS",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["CAUSTICS"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_sun_quaternion ; uniform vec3 u_sun_intensity ; uniform vec3 u_sun_direction ;".split(" ")}]}}]}]}}]},{$:"txt",aa:["uniform","vec3","u_camera_eye_frag",";"]},{$:"cond",da:[{$:"if",ga:["USE_NODE_FRESNEL",
"USE_NODE_LAYER_WEIGHT",{$:"logical_or_expr",ia:2},"CAMERA_TYPE","CAM_TYPE_ORTHO",{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_camera_direction",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"USE_VIEW_TSR",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_VIEW_TSR_INVERSE"],ha:{$:"grp",da:[{$:"txt",
aa:["uniform","mat3","u_view_tsr_inverse",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_MODEL_TSR"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_model_tsr",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_MODEL_TSR_INVERSE"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_model_tsr_inverse",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_PROJ_MATRIX_FRAG"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat4","u_proj_matrix_frag",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",
da:[{$:"txt",aa:["uniform","vec4","u_fog_color_density",";"]},{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_underwater_fog_color_density ; uniform float u_cam_water_depth ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["PROCEDURAL_FOG"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat4","u_cube_fog",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_FOG"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_LOD_SMOOTHING"],
ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_lod_coverage ; uniform float u_lod_cmp_logic ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_plane_reflection",";"]}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_CUBE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_cube_reflection",";"]}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_MIRRORMAP",{$:"equal_expr",ia:2}],ha:{$:"grp",
da:[{$:"txt",aa:["uniform","samplerCube","u_mirrormap",";"]}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_PBR_SIMPLE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_sky_reflection",";"]}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_PBR_STANDARD",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform samplerCube u_cube_irradiance ; uniform samplerCube u_cube_r_convolution ; uniform sampler2D u_brdf ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",
{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_shadow_mask",";"]}]}},{$:"elif",ga:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_pcf_blur_radii",";"]}]}}]},{$:"txt",aa:"uniform vec4 u_csm_center_dists ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map0 ;".split(" ")},{$:"cond",da:[{$:"if",ga:["CSM_SECTION1",
"NUM_CAST_LAMPS",1,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map1",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION2","NUM_CAST_LAMPS",2,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map2",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION3","NUM_CAST_LAMPS",3,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform",
"PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map3",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_refractmap",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_B4W_REFRACTION","USE_NODE_BSDF_PRINCIPLED",{$:"logical_or_expr",ia:2},"USE_REFRACTION","REFRACTIVE","USE_REFRACTION_CORRECTION",{$:"logical_and_expr",ia:4}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","sampler2D","u_scene_depth",
";"]}]}}]},{$:"txt",aa:"uniform float u_emit ; uniform float u_ambient ; uniform vec2 u_fresnel_params ;".split(" ")},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"REFLECTION_TYPE","REFL_CUBE",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_MIRRORMAP",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_mirror_factor",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",
{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_refl_plane",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_LAMP","NUM_LAMP_LIGHTS",0,{$:"non_equal_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_lamp_light_positions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_directions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_color_intensities [ NUM_LAMP_LIGHTS ] ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_VALUE"],ha:{$:"grp",da:[{$:"txt",
aa:"uniform vec4 u_node_values [ NUM_VALUES ] ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_RGB"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_node_rgbs [ NUM_RGBS ] ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_OBJECT_INFO"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_obj_info",";"]}]}}]},
{$:"txt",aa:"GLSL_IN vec3 h ; GLSL_IN vec3 j ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NODES","DISABLE_FOG",{$:"logic_negative_expr",ia:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2},"PARALLAX",{$:"logical_and_expr",ia:2},"SHADELESS",{$:"logic_negative_expr",ia:1},"CAUSTICS","WATER_EFFECTS",{$:"logical_and_expr",ia:3},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:6}],ha:{$:"grp",
da:[{$:"txt",aa:["GLSL_IN","vec4","i",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2},"CALC_TBN_SPACE",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","k",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","B",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","n",";"]},{$:"cond",
da:[{$:"if",ga:["CSM_SECTION1","NUM_CAST_LAMPS",1,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","o",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION2","NUM_CAST_LAMPS",2,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","u",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION3","NUM_CAST_LAMPS",3,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","v",";"]}]}}]}]}}]},{$:"cond",
da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{$:"equal_expr",ia:2},"REFRACTIVE","USE_POSITION_CLIP",{$:"logical_or_expr",ia:4}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","l",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","float","m",";"]}]}}]},{$:"txt",aa:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{$:"include",oa:"nodes.glslf"},{$:"cond",
da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"include",oa:"fog.glslf"}]}}]},{$:"txt",aa:["void","main","(",")","{"]},{$:"cond",da:[{$:"if",ga:["USE_LOD_SMOOTHING"],ha:{$:"grp",da:[{$:"txt",aa:"if ( ! C ( u_lod_coverage , u_lod_cmp_logic ) ) discard ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","DISABLE_FOG",{$:"logic_negative_expr",ia:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2},"PARALLAX",{$:"logical_and_expr",ia:2},"SHADELESS",
{$:"logic_negative_expr",ia:1},"CAUSTICS","WATER_EFFECTS",{$:"logical_and_expr",ia:3},{$:"logical_or_expr",ia:4}],ha:{$:"grp",da:[{$:"txt",aa:"float bS = length ( i ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS"],ha:{$:"grp",da:[{$:"txt",aa:"float bT = h . z - WATER_LEVEL ;".split(" ")}]}}]},{$:"txt",aa:"vec3 D = normalize ( u_camera_eye_frag - h ) ; vec3 E ; vec3 F ; vec3 G ; vec4 H ; float I ; J ( D , E , F , G , H , I ) ; vec3 aQ = E ; float L = I ; vec3 U = G ; vec4 bU = H ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["SHADELESS",{$:"logic_negative_expr",ia:1},"WATER_EFFECTS",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["WETTABLE"],ha:{$:"grp",da:[{$:"txt",aa:"aQ = max ( aQ - sqrt ( 0.01 * - min ( bT , 0.0 ) ) , 0.5 * aQ ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["CAUSTICS"],ha:{$:"grp",da:[{$:"txt",aa:"bV ( aQ , bT , u_time , bU , U , u_sun_direction , u_sun_intensity , u_sun_quaternion , h , bS ) ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["ALPHA"],
ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["ALPHA_CLIP"],ha:{$:"grp",da:[{$:"txt",aa:"if ( L < 0.5 ) discard ; L = 1.0 ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"L = min ( 1.0 , L ) ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["L","=","1.0",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS"],ha:{$:"grp",da:[{$:"txt",aa:"bW ( aQ , bS , D , bT ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",
da:[{$:"txt",aa:"bW ( aQ , bS , D , 1.0 ) ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["SSAO_ONLY","SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float bX = GLSL_TEXTURE_PROJ ( u_shadow_mask , l ) . a ; aQ = vec3 ( bX ) ;".split(" ")}]}}]},{$:"txt",aa:"aQ = max ( vec3 ( 0.0 ) , aQ ) ; aW ( aQ ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["ALPHA","ALPHA_CLIP",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",
da:[{$:"txt",aa:"aX ( aQ , L ) ;".split(" ")}]}}]},{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};f["main.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"SHADELESS",aa:["0"]},{$:"var",ba:"CAUSTICS",aa:["0"]},{$:"var",ba:"CALC_TBN_SPACE",aa:["0"]},{$:"var",ba:"MAIN_BEND_COL",aa:["0"]},{$:"var",ba:"DETAIL_BEND",aa:["0"]},{$:"var",ba:"CALC_TBN",aa:["0"]},{$:"var",ba:"USE_INSTANCED_PARTCLS",aa:["0"]},{$:"var",ba:"TEXTURE_NORM_CO",
aa:["TEXTURE_COORDS_NONE"]},{$:"var",ba:"USE_TBN_SHADING",aa:["0"]},{$:"var",ba:"PARALLAX",aa:["0"]},{$:"var",ba:"WATER_EFFECTS",aa:["0"]},{$:"var",ba:"SMAA_JITTER",aa:["0"]},{$:"var",ba:"USE_POSITION_CLIP",aa:["0"]},{$:"var",ba:"NODES",aa:["0"]},{$:"var",ba:"AU_QUALIFIER",aa:["GLSL_IN"]},{$:"var",ba:"STATIC_BATCH",aa:["0"]},{$:"var",ba:"WIND_BEND",aa:["0"]},{$:"var",ba:"BEND_CENTER_ONLY",aa:["0"]},{$:"var",ba:"BILLBOARD",aa:["0"]},{$:"var",ba:"BILLBOARD_JITTERED",aa:["0"]},{$:"var",ba:"DYNAMIC_GRASS",
aa:["0"]},{$:"var",ba:"SKINNED",aa:["0"]},{$:"var",ba:"FRAMES_BLENDING",aa:["0"]},{$:"var",ba:"VERTEX_ANIM",aa:["0"]},{$:"var",ba:"DISABLE_FOG",aa:["0"]},{$:"var",ba:"SHADOW_USAGE",aa:["NO_SHADOWS"]},{$:"var",ba:"REFLECTION_PASS",aa:["REFL_PASS_NONE"]},{$:"var",ba:"REFLECTION_TYPE",aa:["REFL_NONE"]},{$:"var",ba:"REFRACTIVE",aa:["0"]},{$:"var",ba:"MAC_OS_SHADOW_HACK",aa:["0"]},{$:"var",ba:"CSM_SECTION1",aa:["0"]},{$:"var",ba:"CSM_SECTION2",aa:["0"]},{$:"var",ba:"CSM_SECTION3",aa:["0"]},{$:"var",ba:"NUM_CAST_LAMPS",
aa:["0"]},{$:"var",ba:"TEXCOORD",aa:["0"]},{$:"var",ba:"VERTEX_COLOR",aa:["0"]},{$:"var",ba:"VERTEX_ANIM_MIX_NORMALS_FACTOR",aa:["u_va_frame_factor"]},{$:"var",ba:"MAX_BONES",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"include",oa:"math.glslv"},{$:"include",oa:"to_world.glslv"},{$:"include",oa:"scale_texcoord.glslv"},{$:"txt",aa:"GLSL_IN vec3 a_position ; GLSL_IN vec4 a_tbn ;".split(" ")},{$:"cond",da:[{$:"if",ga:["USE_INSTANCED_PARTCLS"],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_IN vec4 a_part_ts ; GLSL_IN vec4 a_part_r ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","a_shade_tangs",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SKINNED"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","a_influence",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{$:"logical_or_expr",ia:3},"USE_INSTANCED_PARTCLS",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{$:"cond",da:[{$:"if",
ga:["WIND_BEND"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["MAIN_BEND_COL"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","float","a_bending_col_main",";"]},{$:"cond",da:[{$:"if",ga:["DETAIL_BEND"],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_IN vec3 a_bending_col_detail ; AU_QUALIFIER float au_detail_bending_amp ; AU_QUALIFIER float au_branch_bending_amp ; AU_QUALIFIER float au_detail_bending_freq ;".split(" ")}]}}]}]}}]},{$:"txt",aa:"AU_QUALIFIER float au_wind_bending_amp ; AU_QUALIFIER float au_wind_bending_freq ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["BEND_CENTER_ONLY"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","a_emitter_center",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["VERTEX_ANIM"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","a_position_next",";"]},{$:"cond",da:[{$:"if",ga:["NODES",{$:"logic_negative_expr",ia:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO","USE_NODE_BSDF_BEGIN","USE_NODE_TEX_COORD_RE",{$:"logical_or_expr",ia:9}],ha:{$:"grp",
da:[{$:"txt",aa:["GLSL_IN","vec4","a_tbn_next",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["NODES",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["TEXCOORD"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec2","a_texcoord",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["VERTEX_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","a_color",";"]}]}}]}]}}]},{$:"txt",aa:"GLSL_OUT vec3 h ; GLSL_OUT vec3 j ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NODES","DISABLE_FOG",{$:"logic_negative_expr",
ia:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2},"PARALLAX",{$:"logical_and_expr",ia:2},"SHADELESS",{$:"logic_negative_expr",ia:1},"CAUSTICS","WATER_EFFECTS",{$:"logical_and_expr",ia:3},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:6}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","i",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",
ia:2},"CALC_TBN_SPACE",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","k",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NODES",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","bY",";"]},{$:"cond",da:[{$:"if",ga:["TEXCOORD"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec2","A",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["VERTEX_COLOR","DYNAMIC_GRASS",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","bZ",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",
ga:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","n",";"]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION1","NUM_CAST_LAMPS",1,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","o",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION2","NUM_CAST_LAMPS",2,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","u",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION3","NUM_CAST_LAMPS",
3,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","v",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{$:"equal_expr",ia:2},"REFRACTIVE","USE_POSITION_CLIP",{$:"logical_or_expr",ia:4}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","l",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE","NODES",{$:"logic_negative_expr",ia:1},"USE_NODE_B4W_REFRACTION",{$:"logical_or_expr",
ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","float","m",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","B",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["STATIC_BATCH"],ha:{$:"grp",da:[{$:"txt",aa:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 1.0 , 1.0 , 0.0 , 0.0 , 0.0 ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","mat3","u_model_tsr",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS",
"REFL_PASS_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat4","u_view_refl_matrix",";"]}]}}]},{$:"txt",aa:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NODES",{$:"logic_negative_expr",ia:1},"BILLBOARD","DYNAMIC_GRASS",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_camera_eye",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SMAA_JITTER"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},
{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS"],ha:{$:"grp",da:[{$:"txt",aa:"uniform PRECISION sampler2D u_grass_map_depth ; uniform sampler2D u_grass_map_color ; uniform vec4 u_camera_quat ; uniform vec3 u_grass_map_dim ; uniform float u_grass_size ; uniform float u_scale_threshold ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SKINNED"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_quatsb [ MAX_BONES ] ; uniform vec4 u_transb [ MAX_BONES ] ; uniform vec4 u_arm_rel_trans ; uniform vec4 u_arm_rel_quat ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FRAMES_BLENDING"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_quatsa [ MAX_BONES ] ; uniform vec4 u_transa [ MAX_BONES ] ; uniform float u_frame_factor ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["BILLBOARD_JITTERED"],ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_jitter_amp ; uniform float u_jitter_freq ;".split(" ")}]}}]},{$:"txt",aa:"uniform vec3 u_wind ; uniform PRECISION float u_time ;".split(" ")}]}}]},{$:"cond",
da:[{$:"if",ga:["VERTEX_ANIM"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_va_frame_factor",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NODES",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_texture_scale",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_normal_offset",";"]},{$:"cond",da:[{$:"if",ga:["MAC_OS_SHADOW_HACK"],ha:{$:"grp",da:[{$:"txt",aa:"uniform mat3 u_v_light_tsr [ NUM_CAST_LAMPS ] ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_v_light_ts [ NUM_CAST_LAMPS ] ; uniform vec4 u_v_light_r [ NUM_CAST_LAMPS ] ;".split(" ")}]}}]},{$:"txt",aa:["uniform","mat4","u_p_light_matrix0",";"]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION1","NUM_CAST_LAMPS",1,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION2","NUM_CAST_LAMPS",2,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",
da:[{$:"txt",aa:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION3","NUM_CAST_LAMPS",3,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{$:"include",oa:"dynamic_grass.glslv"},{$:"include",oa:"shadow.glslv"},
{$:"include",oa:"skin.glslv"},{$:"include",oa:"wind_bending.glslv"},{$:"cond",da:[{$:"if",ga:["NODES"],ha:{$:"grp",da:[{$:"include",oa:"nodes.glslv"}]}}]},{$:"txt",aa:["void","main","(",")","{"]},{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["mat4","b_","=","u_view_refl_matrix",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"mat4 b_ = mat4 ( 0.0 ) ;".split(" ")}]}}]},{$:"txt",aa:["mat3","N","=","u_view_tsr",";"]},{$:"cond",da:[{$:"if",
ga:["USE_INSTANCED_PARTCLS"],ha:{$:"grp",da:[{$:"txt",aa:"mat3 Z = aZ ( a_part_ts . xyz , aY ( ) ) ; Z = a_ ( vec3 ( a_part_ts . w ) , Z ) ; Z = bc ( a_part_r , Z ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["STATIC_BATCH",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"Z = bd ( u_model_tsr , Z ) ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["mat3","Z","=","u_model_tsr",";"]}]}}]},{$:"txt",aa:["vec3","O","=","a_position",";"]},{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE",
"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{$:"logical_and_expr",ia:3},"NODES",{$:"logic_negative_expr",ia:1},"USE_TBN_SHADING","CALC_TBN",{$:"logical_and_expr",ia:2},"USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_NO","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{$:"logical_or_expr",ia:14}],ha:{$:"grp",da:[{$:"txt",aa:"float P , Q ; vec4 S = R ( a_tbn , P , Q ) ; vec3 ca = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{$:"logical_and_expr",ia:3},"NODES",{$:"logic_negative_expr",ia:1},"USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_NO","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{$:"logical_or_expr",ia:13}],ha:{$:"grp",da:[{$:"txt",aa:["vec3","U","=","ca",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 U = vec3 ( 0.0 ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE","NODES",{$:"logic_negative_expr",ia:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_UV_ORCO",{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 V = T ( S , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 W = Q * cross ( U , V ) ; vec4 Y = X ( W , Q * P ) ; V = T ( Y , U ) ;".split(" ")}]}},{$:"elif",ga:["NODES",{$:"logic_negative_expr",ia:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{$:"equal_expr",ia:2},{$:"logical_and_expr",
ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 cb = ap ( Z , O ) ; vec3 ac = normalize ( bI ( Z , ca ) ) ; vec3 D = cb - u_camera_eye ; vec3 W = cross ( D , ac ) ; vec3 V = cross ( ac , W ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["CALC_TBN"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 ac = normalize ( bI ( Z , ca ) ) ; vec3 ad = cross ( vec3 ( 0.0 , 0.0 , 1.0 ) , ac ) ; vec3 ae = cross ( ac , ad ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["vec3","ae","=","a_shade_tangs",";"]}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 ae = vec3 ( 0.0 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["VERTEX_ANIM"],ha:{$:"grp",da:[{$:"txt",aa:"O = mix ( O , a_position_next , u_va_frame_factor ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NODES",{$:"logic_negative_expr",ia:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_NORMAL_MAP","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",
{$:"non_equal_expr",ia:2},"USE_NODE_BSDF_BEGIN","USE_NODE_TEX_COORD_RE","USE_NODE_BUMP",{$:"logical_or_expr",ia:10}],ha:{$:"grp",da:[{$:"txt",aa:"float af , ah ; vec4 ai = R ( a_tbn_next , af , ah ) ; vec3 aj = T ( ai , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NODES",{$:"logic_negative_expr",ia:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_NORMAL_MAP","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_BSDF_BEGIN","USE_NODE_BUMP",{$:"logical_or_expr",ia:8}],ha:{$:"grp",
da:[{$:"txt",aa:"U = mix ( U , aj , VERTEX_ANIM_MIX_NORMALS_FACTOR ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 ak = T ( ai , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 al = ah * cross ( aj , ak ) ; vec4 am = X ( al , ah * af ) ; ak = T ( am , aj ) ; V = mix ( V , ak , u_va_frame_factor ) ; W = mix ( W , al , u_va_frame_factor ) ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["SKINNED"],ha:{$:"grp",da:[{$:"txt",
aa:"an ( O , V , W , U ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{$:"logical_or_expr",ia:3},"USE_INSTANCED_PARTCLS",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["vec3","ao","=","au_center_pos",";"]}]}},{$:"elif",ga:["DYNAMIC_GRASS","USE_INSTANCED_PARTCLS",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 ao = a_part_ts . xyz ; O = ap ( Z , O ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",
aa:"vec3 ao = vec3 ( 0.0 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS"],ha:{$:"grp",da:[{$:"txt",aa:"au aw = be ( O , V , ae , W , U , ao , u_grass_map_depth , u_grass_map_color , u_grass_map_dim , u_grass_size , u_camera_eye , u_camera_quat , N , Z ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["BILLBOARD"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 aq = ap ( Z , ao ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2}],
ha:{$:"grp",da:[{$:"txt",aa:"O = ( b_ * vec4 ( O , 1.0 ) ) . xyz ; ao = ( b_ * vec4 ( ao , 1.0 ) ) . xyz ; aq = ( b_ * vec4 ( aq , 1.0 ) ) . xyz ;".split(" ")}]}}]},{$:"txt",aa:"Z = as ( u_camera_eye , aq , N , Z ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["WIND_BEND","BILLBOARD_JITTERED",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 bf = aq ; Z = at ( u_wind , u_time , u_jitter_amp , u_jitter_freq , bf , Z ) ;".split(" ")}]}}]},{$:"txt",aa:"au aw = av ( O - ao , ao , V , ae , W , U , Z ) ; aw . ao = aq ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"au aw = av ( O , ao , V , ae , W , U , Z ) ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2},"CALC_TBN_SPACE",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float aA = ( dot ( cross ( aw . U , aw . V ) , aw . W ) < 0.0 ) ? - 1.0 : 1.0 ; k = vec4 ( aw . V , aA ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",aa:"B = aw . aB ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["WIND_BEND"],ha:{$:"grp",da:[{$:"txt",aa:"ax ( aw . O , aw . ao , U , b_ ) ;".split(" ")}]}}]},{$:"txt",aa:"h = aw . O ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NODES",{$:"logic_negative_expr",ia:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{$:"logical_and_expr",ia:3},"USE_NODE_TEX_COORD_NO","USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT",
"USE_NODE_BUMP",{$:"logical_or_expr",ia:13}],ha:{$:"grp",da:[{$:"txt",aa:"j = aw . U ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NODES",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"bY = u_camera_eye - aw . O ;".split(" ")},{$:"cond",da:[{$:"if",ga:["TEXCOORD"],ha:{$:"grp",da:[{$:"txt",aa:"A = az ( a_texcoord , u_texture_scale ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS"],ha:{$:"grp",da:[{$:"txt",aa:"bZ = aw . aQ ;".split(" ")}]}},{$:"elif",ga:["VERTEX_COLOR"],
ha:{$:"grp",da:[{$:"txt",aa:["bZ","=","a_color",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2},"BILLBOARD",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 cc = b_ * vec4 ( aw . O , 1.0 ) ; cc . xyz = ap ( N , cc . xyz ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec4 cc = vec4 ( ap ( N , aw . O ) , 1.0 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","DISABLE_FOG",{$:"logic_negative_expr",
ia:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2},"PARALLAX",{$:"logical_and_expr",ia:2},"SHADELESS",{$:"logic_negative_expr",ia:1},"CAUSTICS","WATER_EFFECTS",{$:"logical_and_expr",ia:3},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:6}],ha:{$:"grp",da:[{$:"txt",aa:["i","=","cc",";"]}]}}]},{$:"txt",aa:"vec4 f = u_proj_matrix * cc ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SMAA_JITTER"],
ha:{$:"grp",da:[{$:"txt",aa:"f . xy += u_subpixel_jitter * f . w ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{$:"equal_expr",ia:2},"REFRACTIVE","USE_POSITION_CLIP",{$:"logical_or_expr",ia:4}],ha:{$:"grp",da:[{$:"txt",aa:"l = aC ( f ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"cd ( aw . O , aw . U ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["REFRACTIVE","NODES",{$:"logic_negative_expr",ia:1},"USE_NODE_B4W_REFRACTION",{$:"logical_or_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"m = - cc . z / u_view_max_depth ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NODES"],ha:{$:"grp",da:[{$:"txt",aa:["J","(",")",";"]}]}}]},{$:"txt",aa:["gl_Position","=","f",";","}"]}]};f["main_stack.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"TEXTURE_NORM_CO",
aa:["TEXTURE_COORDS_NONE"]},{$:"var",ba:"TEXTURE_SPEC_CO",aa:["TEXTURE_COORDS_NONE"]},{$:"var",ba:"CAUSTICS",aa:["0"]},{$:"var",ba:"USE_FOG",aa:["0"]},{$:"var",ba:"TEXTURE_COLOR0_CO",aa:["TEXTURE_COORDS_NONE"]},{$:"var",ba:"TEXTURE_COLOR1_CO",aa:["TEXTURE_COORDS_NONE"]},{$:"var",ba:"PARALLAX",aa:["0"]},{$:"var",ba:"CALC_TBN_SPACE",aa:["0"]},{$:"var",ba:"USE_TBN_SHADING",aa:["0"]},{$:"var",ba:"REFLECTION_PASS",aa:["REFL_PASS_PLANE"]},{$:"var",ba:"RGBA_SHADOWS",aa:["0"]},{$:"var",ba:"TEXTURE_SPEC",
aa:["0"]},{$:"var",ba:"ALPHA_AS_SPEC",aa:["0"]},{$:"var",ba:"TEXTURE_STENCIL_ALPHA_MASK",aa:["0"]},{$:"var",ba:"TEXTURE_STENCIL_ALPHA_MASK_CO",aa:["TEXTURE_COORDS_NONE"]},{$:"var",ba:"NORMAL_TEXCOORD",aa:["0"]},{$:"var",ba:"USE_REFRACTION_CORRECTION",aa:["0"]},{$:"var",ba:"DOUBLE_SIDED_LIGHTING",aa:["0"]},{$:"var",ba:"SHADELESS",aa:["0"]},{$:"var",ba:"TEXCOORD",aa:["0"]},{$:"var",ba:"VERTEX_COLOR",aa:["0"]},{$:"var",ba:"WETTABLE",aa:["0"]},{$:"var",ba:"CSM_SECTION1",aa:["0"]},{$:"var",ba:"CSM_SECTION2",
aa:["0"]},{$:"var",ba:"CSM_SECTION3",aa:["0"]},{$:"var",ba:"NUM_CAST_LAMPS",aa:["0"]},{$:"var",ba:"NUM_LIGHTS",aa:["0"]},{$:"var",ba:"WATER_LEVEL",aa:["0.0"]},{$:"var",ba:"PROCEDURAL_FOG",aa:["0"]},{$:"var",ba:"TEXTURE_BLEND_TYPE",aa:["TEXTURE_BLEND_TYPE_MIX"]},{$:"var",ba:"SKY_TEXTURE",aa:["0"]},{$:"var",ba:"SKY_COLOR",aa:["0"]},{$:"var",ba:"ALPHA",aa:["0"]},{$:"var",ba:"ALPHA_CLIP",aa:["0"]},{$:"var",ba:"PARALLAX_LOD_DIST",aa:["5.0"]},{$:"var",ba:"PARALLAX_STEPS",aa:["5.0"]},{$:"var",ba:"USE_ENVIRONMENT_LIGHT",
aa:["0"]},{$:"var",ba:"REFLECTION_TYPE",aa:["REFL_NONE"]},{$:"var",ba:"REFRACTIVE",aa:["0"]},{$:"var",ba:"DISABLE_FOG",aa:["0"]},{$:"var",ba:"WATER_EFFECTS",aa:["0"]},{$:"var",ba:"SHADOW_USAGE",aa:["NO_SHADOWS"]},{$:"var",ba:"DYNAMIC_GRASS",aa:["0"]},{$:"var",ba:"POISSON_DISK_NUM",aa:["NO_SOFT_SHADOWS"]},{$:"var",ba:"SSAO_ONLY",aa:["0"]},{$:"var",ba:"USE_LOD_SMOOTHING",aa:["0"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"include",
oa:"math.glslv"},{$:"cond",da:[{$:"if",ga:["USE_LOD_SMOOTHING"],ha:{$:"grp",da:[{$:"include",oa:"coverage.glslf"}]}}]},{$:"cond",da:[{$:"if",ga:["SHADELESS",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["CAUSTICS"],ha:{$:"grp",da:[{$:"include",oa:"caustics.glslf"}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["RGBA_SHADOWS"],ha:{$:"grp",da:[{$:"include",oa:"pack.glslf"}]}}]},{$:"txt",aa:["uniform","float","u_time",";"]},{$:"cond",da:[{$:"if",ga:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",
{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_sky_texture",";"]}]}},{$:"elif",ga:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{$:"txt",aa:["uniform","float","u_environment_energy",";"]},{$:"cond",da:[{$:"if",ga:["SHADELESS",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["NUM_LIGHTS",0,{$:"g_expr",ia:2}],ha:{$:"grp",
da:[{$:"txt",aa:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["CAUSTICS"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_sun_quaternion ; uniform vec3 u_sun_intensity ; uniform vec3 u_sun_direction ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"REFRACTIVE",{$:"logical_or_expr",
ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_fog_color_density",";"]},{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_underwater_fog_color_density ; uniform float u_cam_water_depth ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["PROCEDURAL_FOG"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat4","u_cube_fog",
";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_FOG"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_LOD_SMOOTHING"],ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_lod_coverage ; uniform float u_lod_cmp_logic ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_colormap0",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_SPEC","ALPHA_AS_SPEC",
{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_specmap0",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_STENCIL_ALPHA_MASK"],ha:{$:"grp",da:[{$:"txt",aa:"uniform sampler2D u_colormap1 ; uniform sampler2D u_stencil0 ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE",
"REFL_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_plane_reflection",";"]}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_CUBE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_cube_reflection",";"]}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_MIRRORMAP",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{$:"equal_expr",ia:2}],
ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_shadow_mask",";"]}]}},{$:"elif",ga:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_pcf_blur_radii",";"]}]}}]},{$:"txt",aa:"uniform vec4 u_csm_center_dists ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map0 ;".split(" ")},{$:"cond",da:[{$:"if",ga:["CSM_SECTION1","NUM_CAST_LAMPS",
1,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map1",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION2","NUM_CAST_LAMPS",2,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map2",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION3","NUM_CAST_LAMPS",3,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION",
"GLSL_SMPLR2D_SHDW","u_shadow_map3",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_refractmap",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE","USE_REFRACTION_CORRECTION",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},{$:"txt",aa:"uniform float u_emit ; uniform float u_ambient ; uniform vec2 u_fresnel_params ; uniform float u_specular_alpha ;".split(" ")},{$:"cond",
da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"REFLECTION_TYPE","REFL_CUBE",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_reflect_factor",";"]}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_MIRRORMAP",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_mirror_factor",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_refl_plane",
";"]}]}}]},{$:"txt",aa:"uniform vec4 u_diffuse_color ; uniform vec2 u_diffuse_params ; uniform float u_diffuse_intensity ;".split(" ")},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_normal_factor",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_diffuse_color_factor ; uniform float u_alpha_factor ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["TEXTURE_SPEC"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_specular_color_factor",";"]}]}}]},{$:"txt",aa:"uniform vec3 u_specular_color ; uniform vec3 u_specular_params ;".split(" ")},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2},"PARALLAX",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_parallax_scale",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE"],ha:{$:"grp",da:[{$:"txt",aa:["uniform",
"float","u_refr_bump",";"]}]}}]},{$:"txt",aa:"GLSL_IN vec3 h ; GLSL_IN vec3 j ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2},"PARALLAX",{$:"logical_and_expr",ia:2},"SHADELESS",{$:"logic_negative_expr",ia:1},"CAUSTICS",{$:"logical_and_expr",ia:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:5}],
ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","i",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2},"CALC_TBN_SPACE",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","k",";"]}]}}]},{$:"txt",aa:["GLSL_IN","vec3","bY",";"]},{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","B",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXCOORD"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec2","A",";"]}]}}]},
{$:"cond",da:[{$:"if",ga:["VERTEX_COLOR","DYNAMIC_GRASS",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","bZ",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","n",";"]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION1","NUM_CAST_LAMPS",1,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","o",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION2","NUM_CAST_LAMPS",
2,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","u",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION3","NUM_CAST_LAMPS",3,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","v",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{$:"equal_expr",ia:2},"REFRACTIVE",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN",
"vec3","l",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","float","m",";"]}]}}]},{$:"txt",aa:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{$:"cond",da:[{$:"if",ga:["SHADELESS",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"include",oa:"shadow.glslf"}]}}]},{$:"include",oa:"mirror.glslf"},{$:"cond",da:[{$:"if",ga:["REFRACTIVE"],ha:{$:"grp",da:[{$:"include",oa:"refraction.glslf"}]}}]},{$:"include",oa:"environment.glslf"},{$:"cond",da:[{$:"if",ga:["SHADELESS",
{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"include",oa:"lighting_nodes.glslf"}]}}]},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"include",oa:"fog.glslf"}]}}]},{$:"txt",aa:["void","main","(",")","{"]},{$:"cond",da:[{$:"if",ga:["USE_LOD_SMOOTHING"],ha:{$:"grp",da:[{$:"txt",aa:"if ( ! C ( u_lod_coverage , u_lod_cmp_logic ) ) discard ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",
{$:"non_equal_expr",ia:2},"PARALLAX",{$:"logical_and_expr",ia:2},"SHADELESS",{$:"logic_negative_expr",ia:1},"CAUSTICS","WATER_EFFECTS",{$:"logical_and_expr",ia:3},{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:"float bS = length ( i ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS"],ha:{$:"grp",da:[{$:"txt",aa:"float bT = h . z - WATER_LEVEL ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["TEXCOORD"],ha:{$:"grp",da:[{$:"txt",aa:["vec2","ce","=","A",";"]}]}}]},{$:"txt",aa:"vec3 cf = normalize ( j ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["DOUBLE_SIDED_LIGHTING"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( gl_FrontFacing == false )".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["if","(","gl_FrontFacing",")"]}]}}]},{$:"txt",aa:"cf = cf ; else cf = - cf ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 W = cross ( cf , k . xyz ) * k . w ; mat3 cg = mat3 ( k . xyz , W , cf ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"REFRACTIVE",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["mat3","N","=","u_view_tsr_frag",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NORMAL_TEXCOORD"],ha:{$:"grp",da:[{$:"txt",aa:"vec2 ch = normalize ( bI ( N , j ) ) . st ; ch = ch * vec2 ( 0.495 ) + vec2 ( 0.5 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2},"PARALLAX",{$:"logical_and_expr",
ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( bS < PARALLAX_LOD_DIST ) { float ci = clamp ( 0.5 * ( PARALLAX_LOD_DIST - bS ) , 0.0 , 1.0 ) ; float cj = u_parallax_scale * ci ; vec3 ck = normalize ( bY * cg ) ; float cl = 1.0 / PARALLAX_STEPS ; vec2 cm = ck . xy * cj / ( PARALLAX_STEPS * ck . z ) ; float cn = 1.0 ; float co ;".split(" ")},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["vec2","cp","=","ch",";"]}]}},{$:"else",ha:{$:"grp",
da:[{$:"txt",aa:["vec2","cp","=","ce",";"]}]}}]},{$:"txt",aa:"co = GLSL_TEXTURE ( u_normalmap0 , cp ) . a ; for ( float cq = 1.0 ; cq <= PARALLAX_STEPS ; cq ++ ) { if ( co < cn ) { cn -= cl ; cp -= cm ; co = GLSL_TEXTURE ( u_normalmap0 , cp ) . a ; } } vec2 cr = cp + cm ; float cs = GLSL_TEXTURE ( u_normalmap0 , cr ) . a - ( cn + cl ) ; float ct = co - cn ; float cu = ct / ( ct - cs ) ; cp = cu * cr + ( 1.0 - cu ) * cp ;".split(" ")},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",
{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["TEXCOORD"],ha:{$:"grp",da:[{$:"txt",aa:"ce += cp - ch ;".split(" ")}]}}]},{$:"txt",aa:["ch","=","cp",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["NORMAL_TEXCOORD"],ha:{$:"grp",da:[{$:"txt",aa:"ch += cp - ce ;".split(" ")}]}}]},{$:"txt",aa:["ce","=","cp",";"]}]}}]},{$:"txt",aa:["}"]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["vec4",
"cv",";"]},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"cv = GLSL_TEXTURE ( u_normalmap0 , ch ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"cv = GLSL_TEXTURE ( u_normalmap0 , ce ) ;".split(" ")}]}}]},{$:"txt",aa:"vec3 cw = cv . rgb - 0.5 ; cw = mix ( vec3 ( 0.0 , 0.0 , 1.0 ) , cw , u_normal_factor ) ; vec3 U = cg * cw ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["vec3","U","=","cf",";"]}]}}]},{$:"txt",
aa:"U = normalize ( U ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NORMAL_TEXCOORD"],ha:{$:"grp",da:[{$:"txt",aa:"ch = normalize ( bI ( N , U ) ) . st ; ch = ch * vec2 ( 0.495 ) + vec2 ( 0.5 ) ;".split(" ")}]}}]},{$:"txt",aa:"vec3 D = normalize ( bY ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["VERTEX_COLOR","DYNAMIC_GRASS",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 cx = bZ ; bG ( cx ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["VERTEX_COLOR","DYNAMIC_GRASS",{$:"logical_or_expr",
ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 cy = vec4 ( cx , 1.0 ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["vec4","cy","=","u_diffuse_color",";"]}]}}]},{$:"txt",aa:["float","cz","=","1.0",";"]},{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_NORMAL",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 cA = GLSL_TEXTURE ( u_colormap0 , ch ) ;".split(" ")}]}},{$:"elif",ga:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_UV_ORCO",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 cA = GLSL_TEXTURE ( u_colormap0 , ce ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"bG ( cA . rgb ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["TEXTURE_STENCIL_ALPHA_MASK"],ha:{$:"grp",da:[{$:"txt",aa:["vec4","cB",";"]},{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR1_CO","TEXTURE_COORDS_NORMAL",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"cB = GLSL_TEXTURE ( u_colormap1 , ch ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"cB = GLSL_TEXTURE ( u_colormap1 , ce ) ;".split(" ")}]}}]},
{$:"txt",aa:"bG ( cB . rgb ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["TEXTURE_STENCIL_ALPHA_MASK_CO","TEXTURE_COORDS_NORMAL",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 cC = GLSL_TEXTURE ( u_stencil0 , ch ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec4 cC = GLSL_TEXTURE ( u_stencil0 , ce ) ;".split(" ")}]}}]},{$:"txt",aa:"cA = mix ( cA , cB , cC . r ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{$:"equal_expr",ia:2}],ha:{$:"grp",
da:[{$:"txt",aa:"cy . rgb = mix ( cy . rgb , cA . rgb , u_diffuse_color_factor ) ; float M = u_alpha_factor * cA . a ; M += ( 1.0 - step ( 0.0 , M ) ) ; cy . a = mix ( M , 1.0 , u_diffuse_color . a ) ; cz = cA . a ;".split(" ")}]}},{$:"elif",ga:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"cy . rgb *= mix ( vec3 ( 1.0 ) , cA . rgb , u_diffuse_color_factor ) ; cy . a = cA . a ; cz = cA . a ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADELESS"],
ha:{$:"grp",da:[{$:"txt",aa:"vec3 aQ = cy . rgb ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 cD = u_diffuse_intensity * cy . rgb ; vec3 cF = u_environment_energy * cE ( U ) ; vec3 cG = u_ambient * cF ; vec4 bU = cH ( cD ) ; vec3 cI = u_emit * cy . rgb ; vec3 cJ = u_specular_color ;".split(" ")},{$:"cond",da:[{$:"if",ga:["TEXTURE_SPEC"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["ALPHA_AS_SPEC"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 cK = vec3 ( cz ) ;".split(" ")}]}},{$:"elif",ga:["TEXTURE_SPEC_CO",
"TEXTURE_COORDS_NORMAL",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 cK = GLSL_TEXTURE ( u_specmap0 , ch ) . rgb ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 cK = GLSL_TEXTURE ( u_specmap0 , ce ) . rgb ;".split(" ")}]}}]},{$:"txt",aa:"bG ( cK . rgb ) ; cJ = mix ( cJ , cK , u_specular_color_factor ) ;".split(" ")}]}}]},{$:"txt",aa:"float cL = u_specular_params [ 0 ] ; vec2 cM = vec2 ( u_specular_params [ 1 ] , u_specular_params [ 2 ] ) ; vec3 cN = cL * cJ ; vec3 aQ ; vec3 cO ; cP ( cI , cG , cD , cN , h , U , D , cM , u_diffuse_params , bU , 0.0 , vec4 ( 0.0 ) , aQ , cO ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"cQ ( aQ , D , U , u_reflect_factor , N ) ;".split(" ")}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_CUBE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"cQ ( aQ , D , U , u_reflect_factor , mat3 ( 0.0 ) ) ;".split(" ")}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_MIRRORMAP",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"cQ ( aQ , D , U , u_mirror_factor , mat3 ( 0.0 ) ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["SHADELESS",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:["aQ","+=","cO",";"]}]}}]},{$:"txt",aa:"float L = cy . a ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SHADELESS",{$:"logic_negative_expr",ia:1},"WATER_EFFECTS",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["WETTABLE"],ha:{$:"grp",da:[{$:"txt",aa:"aQ = max ( aQ - sqrt ( 0.01 * - min ( bT , 0.0 ) ) , 0.5 * aQ ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["CAUSTICS"],ha:{$:"grp",
da:[{$:"txt",aa:"bV ( aQ , bT , u_time , bU , U , u_sun_direction , u_sun_intensity , u_sun_quaternion , h , bS ) ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["ALPHA"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["ALPHA_CLIP"],ha:{$:"grp",da:[{$:"txt",aa:"if ( L < 0.5 ) discard ; L = 1.0 ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["SHADELESS",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"float t = max ( max ( cO . r , cO . g ) , cO . b ) * u_specular_alpha ; L = cy . a * ( 1.0 - t ) + t ;".split(" ")}]}}]}]}}]}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["L","=","1.0",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE"],ha:{$:"grp",da:[{$:"txt",aa:"vec2 cR = - ( bI ( N , U ) ) . xy ; aQ = mix ( cS ( l , cR * u_refr_bump ) , aQ , L ) ; L = 1.0 ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS"],ha:{$:"grp",da:[{$:"txt",aa:"bW ( aQ , bS , D , bT ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"bW ( aQ , bS , D , 1.0 ) ;".split(" ")}]}}]}]}}]},
{$:"cond",da:[{$:"if",ga:["SSAO_ONLY","SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float bX = GLSL_TEXTURE_PROJ ( u_shadow_mask , l ) . a ; aQ = vec3 ( bX ) ;".split(" ")}]}}]},{$:"txt",aa:["aW","(","aQ",")",";"]},{$:"cond",da:[{$:"if",ga:["ALPHA","ALPHA_CLIP",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"aX ( aQ , L ) ;".split(" ")}]}}]},{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};
f["node_skybox.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"USE_VIEW_TSR",aa:["0"]},{$:"var",ba:"USE_VIEW_TSR_INVERSE",aa:["0"]},{$:"var",ba:"USE_MODEL_TSR",aa:["0"]},{$:"var",ba:"USE_MODEL_TSR_INVERSE",aa:["0"]},{$:"var",ba:"NUM_VALUES",aa:["0"]},{$:"var",ba:"NUM_RGBS",aa:["0"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"cond",da:[{$:"if",ga:["USE_NODE_VALUE"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_node_values [ NUM_VALUES ] ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["USE_NODE_RGB"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_node_rgbs [ NUM_RGBS ] ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_VIEW_TSR"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_VIEW_TSR_INVERSE"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_view_tsr_inverse",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_MODEL_TSR"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_model_tsr",";"]}]}}]},{$:"cond",da:[{$:"if",
ga:["USE_MODEL_TSR_INVERSE"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_model_tsr_inverse",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{$:"txt",aa:"GLSL_IN vec3 bu ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},{$:"include",oa:"nodes.glslf"},{$:"txt",aa:["void","main","(",")","{"]},{$:"cond",da:[{$:"if",ga:["USE_NODE_TEXTURE_ENVIRONMENT_EQUIRECTANGULAR",
"USE_NODE_TEXTURE_ENVIRONMENT_MIRROR_BALL","USE_NODE_GEOMETRY_NO","USE_NODE_GEOMETRY_GL","USE_NODE_GEOMETRY_IN","USE_NODE_TEX_COORD_GE","USE_NODE_TEX_COORD_OB","USE_NODE_TEX_COORD_NO","USE_NODE_B4W_REFLECT_WORLD",{$:"logical_or_expr",ia:9}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 D = - normalize ( bu ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["vec3","D",";"]}]}}]},{$:"txt",aa:"vec3 E ; vec3 F ; vec3 G ; vec4 H ; float I ; J ( D , E , F , G , H , I ) ; E = max ( vec3 ( 0.0 ) , E ) ; aW ( E ) ; GLSL_OUT_FRAG_COLOR = vec4 ( E , _1_0 ) ; }".split(" ")}]};
f["particle_system.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"NUM_VALUES",aa:["0"]},{$:"var",ba:"NUM_RGBS",aa:["0"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"NUM_LAMP_LIGHTS",aa:["0"]},{$:"var",ba:"NUM_LIGHTS",aa:["0"]},{$:"var",ba:"PROCEDURAL_FOG",aa:["0"]},{$:"var",ba:"SKY_TEXTURE",aa:["0"]},{$:"var",ba:"NORMAL_TEXCOORD",aa:["0"]},{$:"var",ba:"USE_VIEW_TSR",aa:["0"]},{$:"var",ba:"USE_VIEW_TSR_INVERSE",aa:["0"]},{$:"var",ba:"USE_MODEL_TSR",aa:["0"]},{$:"var",ba:"USE_MODEL_TSR_INVERSE",
aa:["0"]},{$:"var",ba:"ALPHA",aa:["0"]},{$:"var",ba:"ALPHA_CLIP",aa:["0"]},{$:"var",ba:"SOFT_STRENGTH",aa:["0.25"]},{$:"var",ba:"SOFT_PARTICLES",aa:["0"]},{$:"var",ba:"NODES",aa:["0"]},{$:"var",ba:"DISABLE_FOG",aa:["0"]},{$:"var",ba:"WATER_EFFECTS",aa:["0"]},{$:"var",ba:"USE_FOG",aa:["0"]},{$:"var",ba:"USE_ENVIRONMENT_LIGHT",aa:["0"]},{$:"var",ba:"SKY_COLOR",aa:["0"]},{$:"var",ba:"REFLECTION_TYPE",aa:["REFL_NONE"]},{$:"var",ba:"TEXTURE_NORM_CO",aa:["TEXTURE_COORDS_NONE"]},{$:"var",ba:"CALC_TBN_SPACE",
aa:["0"]},{$:"var",ba:"USE_TBN_SHADING",aa:["0"]},{$:"var",ba:"TEXTURE_COLOR",aa:["0"]},{$:"var",ba:"CAMERA_TYPE",aa:["CAM_TYPE_PERSP"]},{$:"var",ba:"USE_POSITION_CLIP",aa:["0"]},{$:"var",ba:"USE_DERIVATIVES_EXT",aa:["0"]},{$:"var",ba:"USE_TEXTURE_LOD_EXT",aa:["0"]},{$:"cond",da:[{$:"if",ga:["GLSL1","USE_DERIVATIVES_EXT",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"extension",aa:["GL_OES_standard_derivatives",":","enable"]}]}}]},{$:"cond",da:[{$:"if",ga:["GLSL1","USE_TEXTURE_LOD_EXT",{$:"logical_and_expr",
ia:2}],ha:{$:"grp",da:[{$:"extension",aa:["GL_EXT_shader_texture_lod",":","enable"]}]}}]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES","NODES",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"include",oa:"pack.glslf"}]}}]},{$:"txt",aa:["uniform","float","u_environment_energy",";"]},{$:"cond",da:[{$:"if",ga:["NUM_LIGHTS",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_fog_color_density",";"]},{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_underwater_fog_color_density ; uniform float u_cam_water_depth ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["PROCEDURAL_FOG"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat4","u_cube_fog",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_FOG"],ha:{$:"grp",da:[{$:"txt",aa:["uniform",
"vec4","u_fog_params",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_sky_texture",";"]}]}},{$:"elif",ga:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{$:"txt",aa:"uniform float u_emit ; uniform float u_ambient ; uniform float u_time ; uniform vec3 u_camera_eye_frag ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["USE_NODE_FRESNEL","USE_NODE_LAYER_WEIGHT",{$:"logical_or_expr",ia:2},"CAMERA_TYPE","CAM_TYPE_ORTHO",{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_camera_direction",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_LAMP"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_lamp_light_positions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_directions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_color_intensities [ NUM_LAMP_LIGHTS ] ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["USE_NODE_VALUE"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_node_values [ NUM_VALUES ] ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_RGB"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_node_rgbs [ NUM_RGBS ] ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"USE_VIEW_TSR",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{$:"cond",da:[{$:"if",
ga:["USE_VIEW_TSR_INVERSE"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_view_tsr_inverse",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_MODEL_TSR"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_model_tsr",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_MODEL_TSR_INVERSE"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_model_tsr_inverse",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES"],ha:{$:"grp",da:[{$:"txt",aa:"uniform PRECISION sampler2D u_scene_depth ; uniform float u_view_max_depth ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_OBJECT_INFO"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_obj_info",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2},"CALC_TBN_SPACE","USE_TBN_SHADING",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN",
"vec4","k",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES","USE_POSITION_CLIP",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","l",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR","USE_NODE_TEX_COORD_UV","USE_NODE_UV_MERGED","USE_NODE_UVMAP","USE_NODE_GEOMETRY_UV","USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{$:"logical_or_expr",ia:7}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec2","A",";"]}]}}]},{$:"txt",aa:["GLSL_IN","vec3","h",";"]},{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES",
"DISABLE_FOG",{$:"logic_negative_expr",ia:1},"NODES",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","i",";"]}]}}]},{$:"txt",aa:"GLSL_IN vec3 j ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"include",oa:"fog.glslf"}]}}]},{$:"include",oa:"math.glslv"},{$:"include",oa:"particles_nodes.glslf"},{$:"txt",aa:"void main ( ) { vec3 D = normalize ( u_camera_eye_frag - h ) ; vec3 E ; vec3 F ; vec3 G ; vec4 H ; float I ; J ( D , E , F , G , H , I ) ; vec3 aQ = E ; float L = I ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["ALPHA"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["ALPHA_CLIP"],ha:{$:"grp",da:[{$:"txt",aa:"if ( L < 0.5 ) discard ; L = 1.0 ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"L = min ( 1.0 , L ) ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["L","=","1.0",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"bW ( aQ , length ( i ) , D , 1.0 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES"],
ha:{$:"grp",da:[{$:"txt",aa:"float cT = - i . z / u_view_max_depth ; vec4 cU = GLSL_TEXTURE_PROJ ( u_scene_depth , l ) ; float cW = cV ( cU ) ; float cX = cW - cT ; float cY = u_view_max_depth / SOFT_STRENGTH * cX ; L = L * min ( cY , 1.0 ) ;".split(" ")}]}}]},{$:"txt",aa:["aW","(","aQ",")",";"]},{$:"cond",da:[{$:"if",ga:["ALPHA","ALPHA_CLIP",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"aX ( aQ , L ) ;".split(" ")}]}}]},{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};
f["particle_system.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"BILLBOARD_ALIGN",aa:["BILLBOARD_ALIGN_VIEW"]},{$:"var",ba:"TEXTURE_NORM_CO",aa:["TEXTURE_COORDS_NONE"]},{$:"var",ba:"CALC_TBN_SPACE",aa:["0"]},{$:"var",ba:"USE_TBN_SHADING",aa:["0"]},{$:"var",ba:"NODES",aa:["0"]},{$:"var",ba:"HALO_PARTICLES",aa:["0"]},{$:"var",ba:"TEXTURE_COLOR",aa:["0"]},{$:"var",ba:"PARTICLES_SHADELESS",aa:["0"]},{$:"var",ba:"DISABLE_FOG",aa:["0"]},{$:"var",
ba:"SOFT_PARTICLES",aa:["0"]},{$:"var",ba:"COLOR_RAMP_LENGTH",aa:["0"]},{$:"var",ba:"REFLECTION_PASS",aa:["REFL_PASS_NONE"]},{$:"var",ba:"WORLD_SPACE",aa:["0"]},{$:"var",ba:"USE_COLOR_RAMP",aa:["0"]},{$:"var",ba:"USE_POSITION_CLIP",aa:["0"]},{$:"var",ba:"CAUSTICS",aa:["0"]},{$:"var",ba:"WIND_BEND",aa:["0"]},{$:"var",ba:"MAIN_BEND_COL",aa:["0"]},{$:"var",ba:"DETAIL_BEND",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"txt",aa:"GLSL_IN vec3 a_position ; GLSL_IN vec4 a_tbn ; GLSL_IN vec3 a_p_data ; GLSL_IN vec4 a_p_vels ; GLSL_IN vec2 a_p_bb_vertex ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["NODES",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["HALO_PARTICLES",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","float","cZ",";"]}]}}]},{$:"txt",aa:["GLSL_OUT","vec3","bZ",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2},"CALC_TBN_SPACE","USE_TBN_SHADING",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","k",";"]}]}}]},{$:"cond",da:[{$:"if",
ga:["TEXTURE_COLOR","HALO_PARTICLES","USE_NODE_TEX_COORD_UV","USE_NODE_UV_MERGED","USE_NODE_UVMAP","USE_NODE_GEOMETRY_UV","USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{$:"logical_or_expr",ia:8}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec2","A",";"]}]}}]},{$:"txt",aa:["GLSL_OUT","vec3","h",";"]},{$:"cond",da:[{$:"if",ga:["PARTICLES_SHADELESS",{$:"logic_negative_expr",ia:1},"DISABLE_FOG",{$:"logic_negative_expr",ia:1},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","bY",
";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES","DISABLE_FOG",{$:"logic_negative_expr",ia:1},"NODES",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","i",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES","USE_POSITION_CLIP",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","l",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["HALO_PARTICLES"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","float","bk",";"]}]}}]},{$:"txt",aa:["GLSL_OUT","vec3","j",";"]},{$:"cond",
da:[{$:"if",ga:["COLOR_RAMP_LENGTH",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_p_color_ramp [ COLOR_RAMP_LENGTH ] ;".split(" ")}]}}]},{$:"txt",aa:"uniform float u_p_time ; uniform float u_p_length ; uniform int u_p_cyclic ; uniform float u_p_fade_in ; uniform float u_p_fade_out ; uniform float u_p_nfactor ; uniform float u_p_gravity ; uniform float u_p_mass ; uniform float u_p_wind_fac ; uniform float u_p_max_lifetime ; uniform float u_p_tilt ; uniform float u_p_tilt_rand ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat4","u_view_refl_matrix",";"]}]}}]},{$:"txt",aa:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; uniform vec3 u_wind ; uniform float u_p_size ; uniform vec3 u_camera_eye ;".split(" ")},{$:"cond",da:[{$:"if",ga:["WORLD_SPACE",{$:"logic_negative_expr",ia:1},"NODES","HALO_PARTICLES",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","mat3",
"u_model_tsr",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_COLOR_RAMP"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_color_ramp_tex",";"]}]}}]},{$:"include",oa:"math.glslv"},{$:"include",oa:"to_world.glslv"},{$:"include",oa:"particles.glslv"},{$:"cond",da:[{$:"if",ga:["NODES"],ha:{$:"grp",da:[{$:"include",oa:"particles_nodes.glslv"}]}}]},{$:"txt",aa:"float db ( vec2 c_ , vec2 da ) { return ( atan ( da . y , da . x ) - atan ( c_ . y , c_ . x ) ) ; } void main ( ) {".split(" ")},{$:"cond",da:[{$:"if",
ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["mat4","b_","=","u_view_refl_matrix",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"mat4 b_ = mat4 ( 0.0 ) ;".split(" ")}]}}]},{$:"txt",aa:"mat3 N = u_view_tsr ; dc pp ; pp = dd ( ) ; float de ; mat3 bo = aY ( ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 df = ( b_ * vec4 ( pp . O , 1.0 ) ) . xyz ;".split(" ")}]}},{$:"else",
ha:{$:"grp",da:[{$:"txt",aa:"vec3 df = pp . O ;".split(" ")}]}}]},{$:"txt",aa:"vec3 U = vec3 ( 0.0 , - 1.0 , 0.0 ) ; if ( BILLBOARD_ALIGN == BILLBOARD_ALIGN_VIEW ) { de = pp . bP ; bo = bn ( df , N ) ; } else if ( BILLBOARD_ALIGN == BILLBOARD_ALIGN_XY ) { de = db ( vec2 ( EPSILON , 1.0 ) , vec2 ( U . x , - U . y ) ) + pp . bP ; bo = aZ ( df , bo ) ; vec4 dg = X ( RIGHT_VECTOR , - M_PI / 2.0 ) ; bo = bc ( dg , bo ) ; } else if ( BILLBOARD_ALIGN == BILLBOARD_ALIGN_YZ ) { de = pp . bP ; bo = aZ ( df , bo ) ; vec4 dh = X ( UP_VECTOR , M_PI / 2.0 ) ; bo = bc ( dh , bo ) ; } else if ( BILLBOARD_ALIGN == BILLBOARD_ALIGN_ZX ) { de = pp . bP ; bo = aZ ( df , bo ) ; } vec3 bs = vec3 ( ( a_p_bb_vertex [ 0 ] * 2.0 - 1.0 ) * pp . di * u_p_size , 0.0 , ( a_p_bb_vertex [ 1 ] * 2.0 - 1.0 ) * pp . di * u_p_size ) ; float dj = a_p_data [ 2 ] ; float dk = u_p_tilt * u_p_tilt_rand * ( 2.0 * dj - 1.0 ) ; float dl = ( dk + u_p_tilt ) * M_PI ; vec4 dm = X ( TOWARD_VECTOR , dl + de ) ; vec3 bt = ap ( bo , T ( dm , bs ) ) ; vec4 cc = vec4 ( ap ( N , bt ) , 1.0 ) ; vec4 f = u_proj_matrix * cc ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["HALO_PARTICLES"],ha:{$:"grp",da:[{$:"txt",aa:["bk","=","dj",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","PARTICLES_SHADELESS",{$:"logic_negative_expr",ia:1},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"mat3 dn = aY ( ) ; dm = X ( TOWARD_VECTOR , de ) ; dn = bc ( dm , dn ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NODES"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE","NODES",{$:"logic_negative_expr",ia:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_UV_ORCO",
{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:2},"USE_TBN_SHADING",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 V = vec3 ( 1.0 , 0.0 , 0.0 ) ; vec3 W = vec3 ( 0.0 , 0.0 , 1.0 ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ;".split(" ")}]}}]},{$:"txt",aa:"au aw = av ( vec3 ( 0.0 ) , vec3 ( 0.0 ) , V , vec3 ( 0.0 ) , W , U , bd ( bo , dn ) ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",
ia:2},"CALC_TBN_SPACE","USE_TBN_SHADING",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:"float aA = ( dot ( cross ( aw . U , aw . V ) , aw . W ) < 0.0 ) ? - 1.0 : 1.0 ; k = vec4 ( aw . V , aA ) ;".split(" ")}]}}]},{$:"txt",aa:"J ( pp . O , pp . dp , pp . dq , pp . dr , pp . di , a_p_bb_vertex , a_p_data [ 0 ] ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["PARTICLES_SHADELESS",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"au aw = av ( vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , U , bd ( bo , dn ) ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["A","=","a_p_bb_vertex",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["HALO_PARTICLES"],ha:{$:"grp",da:[{$:"txt",aa:"A = a_p_bb_vertex * 2.0 - 1.0 ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"cZ = pp . L ;".split(" ")}]}}]},{$:"txt",aa:"bZ = pp . aQ ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NODES",{$:"logic_negative_expr",ia:1},"PARTICLES_SHADELESS",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2},"USE_NODE_MATERIAL_BEGIN",
"USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{$:"logical_and_expr",ia:3},"USE_NODE_TEX_COORD_NO","USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT",{$:"logical_or_expr",ia:11}],ha:{$:"grp",da:[{$:"txt",aa:"j = aw . U ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES","USE_POSITION_CLIP",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"l = aC ( f ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES",
"DISABLE_FOG",{$:"logic_negative_expr",ia:1},"NODES",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["i","=","cc",";"]}]}}]},{$:"txt",aa:"gl_Position = f ; h = bt ;".split(" ")},{$:"cond",da:[{$:"if",ga:["PARTICLES_SHADELESS",{$:"logic_negative_expr",ia:1},"DISABLE_FOG",{$:"logic_negative_expr",ia:1},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"bY = u_camera_eye - bt ;".split(" ")}]}}]},{$:"txt",aa:["}"]}]};f["particle_system_stack.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},
{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"NUM_LIGHTS",aa:["0"]},{$:"var",ba:"SKY_TEXTURE",aa:["0"]},{$:"var",ba:"SKY_COLOR",aa:["0"]},{$:"var",ba:"PROCEDURAL_FOG",aa:["0"]},{$:"var",ba:"TEXTURE_BLEND_TYPE",aa:["TEXTURE_BLEND_TYPE_MIX"]},{$:"var",ba:"ALPHA",aa:["0"]},{$:"var",ba:"ALPHA_CLIP",aa:["0"]},{$:"var",ba:"SOFT_STRENGTH",aa:["0.25"]},{$:"var",ba:"SOFT_PARTICLES",aa:["0"]},{$:"var",ba:"NODES",aa:["0"]},{$:"var",ba:"HALO_PARTICLES",aa:["0"]},{$:"var",ba:"TEXTURE_COLOR",aa:["0"]},{$:"var",
ba:"USE_ENVIRONMENT_LIGHT",aa:["0"]},{$:"var",ba:"SKY_STARS",aa:["0"]},{$:"var",ba:"DISABLE_FOG",aa:["0"]},{$:"var",ba:"WATER_EFFECTS",aa:["0"]},{$:"var",ba:"USE_FOG",aa:["0"]},{$:"var",ba:"PARTICLES_SHADELESS",aa:["0"]},{$:"var",ba:"USE_TBN_SHADING",aa:["0"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES","NODES",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"include",oa:"pack.glslf"}]}}]},{$:"cond",
da:[{$:"if",ga:["HALO_PARTICLES",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_sampler",";"]}]}}]},{$:"txt",aa:["uniform","float","u_environment_energy",";"]},{$:"cond",da:[{$:"if",ga:["NUM_LIGHTS",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_diffuse_color_factor",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_sky_texture",";"]}]}},{$:"elif",ga:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{$:"txt",aa:"uniform vec2 u_diffuse_params ; uniform float u_diffuse_intensity ; uniform float u_emit ; uniform float u_ambient ; uniform vec3 u_specular_color ; uniform vec3 u_specular_params ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_halo_size ; uniform vec3 u_halo_rings_color ; uniform float u_halo_hardness ; uniform vec3 u_halo_lines_color ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SKY_STARS"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_sun_intensity ; uniform float u_halo_stars_blend ; uniform float u_halo_stars_height ;".split(" ")}]}}]},{$:"txt",aa:"uniform float u_p_alpha_start ; uniform float u_p_alpha_end ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",
{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_fog_color_density",";"]},{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_underwater_fog_color_density ; uniform float u_cam_water_depth ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["PROCEDURAL_FOG"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat4","u_cube_fog",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_FOG"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},
{$:"txt",aa:["uniform","vec4","u_diffuse_color",";"]},{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES"],ha:{$:"grp",da:[{$:"txt",aa:"uniform PRECISION sampler2D u_scene_depth ; uniform float u_view_max_depth ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","l",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR","HALO_PARTICLES","USE_NODE_TEX_COORD_UV","USE_NODE_UV_MERGED","USE_NODE_UVMAP","USE_NODE_GEOMETRY_UV","USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",
{$:"logical_or_expr",ia:8}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec2","A",";"]}]}}]},{$:"txt",aa:["GLSL_IN","vec3","h",";"]},{$:"cond",da:[{$:"if",ga:["NODES",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["HALO_PARTICLES",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","float","cZ",";"]}]}}]},{$:"txt",aa:["GLSL_IN","vec3","bZ",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["PARTICLES_SHADELESS",{$:"logic_negative_expr",ia:1},"DISABLE_FOG",{$:"logic_negative_expr",
ia:1},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","bY",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES","DISABLE_FOG",{$:"logic_negative_expr",ia:1},"NODES",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","i",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["HALO_PARTICLES"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","float","bk",";"]},{$:"cond",da:[{$:"if",ga:["SKY_STARS"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","bj",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",
ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","B",";"]}]}}]},{$:"txt",aa:"GLSL_IN vec3 j ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},{$:"include",oa:"lighting_nodes.glslf"},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"include",oa:"fog.glslf"}]}}]},{$:"cond",da:[{$:"if",ga:["HALO_PARTICLES",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"include",oa:"environment.glslf"}]}}]},{$:"cond",da:[{$:"if",ga:["HALO_PARTICLES"],
ha:{$:"grp",da:[{$:"include",oa:"halo_color.glslf"}]}}]},{$:"txt",aa:["void","main","(",")","{"]},{$:"cond",da:[{$:"if",ga:["PARTICLES_SHADELESS",{$:"logic_negative_expr",ia:1},"DISABLE_FOG",{$:"logic_negative_expr",ia:1},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 D = normalize ( bY ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["HALO_PARTICLES"],ha:{$:"grp",da:[{$:"txt",aa:"vec4 bm = bl ( ) ; vec3 aQ = bm . rgb * bZ ; float ds = 0.9 * length ( A ) ; float dt = smoothstep ( u_p_alpha_start , u_p_alpha_end , ds ) ; float L = bm . a * ( 1.0 - dt ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["vec4","cy","=","u_diffuse_color",";"]},{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:"vec4 cA = GLSL_TEXTURE ( u_sampler , A ) ; bG ( cA . rgb ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"cy . rgb = mix ( cy . rgb , cA . rgb , u_diffuse_color_factor ) ;".split(" ")}]}},{$:"elif",ga:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY",{$:"equal_expr",
ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"cy . rgb *= mix ( vec3 ( 1.0 ) , cA . rgb , u_diffuse_color_factor ) ;".split(" ")}]}}]},{$:"txt",aa:"cy . a = cA . a ;".split(" ")}]}}]},{$:"txt",aa:"cy . rgb *= bZ ;".split(" ")},{$:"cond",da:[{$:"if",ga:["PARTICLES_SHADELESS",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 cD = u_diffuse_intensity * cy . rgb ; vec3 cI = u_emit * cy . rgb ; vec3 U = normalize ( j ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",
{$:"logic_negative_expr",ia:1},"SKY_COLOR",{$:"logical_and_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 cF = u_environment_energy * cE ( vec3 ( 0.0 ) ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 cF = u_environment_energy * cE ( U ) ;".split(" ")}]}}]},{$:"txt",aa:"vec3 cG = u_ambient * cF ; float cL = u_specular_params [ 0 ] ; vec2 cM = vec2 ( u_specular_params [ 1 ] , u_specular_params [ 2 ] ) ; vec3 cN = cL * u_specular_color ; vec3 aQ ; vec3 cO ; cP ( cI , cG , cD , cN , h , U , D , cM , u_diffuse_params , vec4 ( 1.0 ) , 0.0 , vec4 ( 0.0 ) , aQ , cO ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 aQ = cy . rgb ;".split(" ")}]}}]},{$:"txt",aa:"float L = cy . a * cZ ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["ALPHA"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["ALPHA_CLIP"],ha:{$:"grp",da:[{$:"txt",aa:"if ( L < 0.5 ) discard ; L = 1.0 ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["L","=","1.0",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"bW ( aQ , length ( i ) , D , 1.0 ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES"],ha:{$:"grp",da:[{$:"txt",aa:"float cT = - i . z / u_view_max_depth ; vec4 cU = GLSL_TEXTURE_PROJ ( u_scene_depth , l ) ; float cW = cV ( cU ) ; float cX = cW - cT ; float cY = u_view_max_depth / SOFT_STRENGTH * cX ; L = L * min ( cY , 1.0 ) ;".split(" ")}]}}]},{$:"txt",aa:["aW","(","aQ",")",";"]},{$:"cond",da:[{$:"if",ga:["ALPHA","ALPHA_CLIP",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"aX ( aQ , L ) ;".split(" ")}]}}]},
{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};f["proc_skybox.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"txt",aa:"uniform vec3 u_sky_color ; uniform vec3 u_sun_direction ; uniform float u_rayleigh_brightness ; uniform float u_mie_brightness ; uniform float u_spot_brightness ; uniform float u_scatter_strength ; uniform float u_rayleigh_strength ; uniform float u_mie_strength ; uniform float u_rayleigh_collection_power ; uniform float u_mie_collection_power ; uniform float u_mie_distribution ; GLSL_IN vec3 bu ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; const float du = 0.99 ; const float dv = 1.8 ; const int dw = 8 ; float dB ( vec3 O , vec3 bH ) { float a = dot ( bH , bH ) ; float b = 2.0 * dot ( bH , O ) ; float dx = dot ( O , O ) - 1.0 ; float dy = b * b - 4.0 * a * dx ; float dz = sqrt ( dy ) ; float q = ( - b - dz ) / 2.0 ; float dA = dx / q ; return dA ; } float dD ( float L , float g ) { float a = 3.0 * ( 1.0 - g * g ) ; float b = 2.0 * ( 2.0 + g * g ) ; float dx = 1.0 + L * L ; float dC = pow ( 1.0 + g * g - 2.0 * g * L , 1.5 ) ; dC = max ( dC , 0.00001 ) ; return ( a / b ) * ( dx / dC ) ; } float dI ( vec3 O , vec3 bH , float dE ) { float dF = dot ( bH , - O ) ; if ( dF < 0.0 ) { return 1.0 ; } vec3 dG = O + dF * bH ; if ( length ( dG ) < dE ) { return 0.0 ; } else if ( length ( dG ) >= dE ) { vec3 da = normalize ( dG ) * dE - O ; float dH = acos ( dot ( normalize ( da ) , bH ) ) ; return smoothstep ( 0.0 , 1.0 , pow ( dH * 2.0 , 3.0 ) ) ; } else return 1.0 ; } vec3 dJ ( float aM , vec3 aQ , float aL ) { return aQ - aQ * pow ( u_sky_color , vec3 ( aL / aM ) ) ; } void main ( ) { vec3 bv = normalize ( bu ) ; vec3 dK = u_sun_direction ; float L = dot ( bv , dK ) ; float dL = dD ( L , - 0.01 ) * u_rayleigh_brightness * dK . z ; float dM = dD ( L - 0.5 , u_mie_distribution ) * u_mie_brightness * ( 1.0 - dK . z ) ; float dN = smoothstep ( 0.0 , 100.0 , dD ( L , 0.9995 ) ) * u_spot_brightness ; vec3 dO = vec3 ( 0.0 , 0.0 , du ) ; float dP = dB ( dO , bv ) ; float dQ = dP / float ( dw ) ; float dR = dI ( dO , bv , du - 0.3 ) ; vec3 dS = vec3 ( 0.0 , 0.0 , 0.0 ) ; vec3 dT = vec3 ( 0.0 , 0.0 , 0.0 ) ; for ( int cq = 0 ; cq < dw ; cq ++ ) { float dU = dQ * float ( cq ) ; vec3 O = dO + bv * dU ; float dV = dI ( O , dK , du - 0.2 ) ; float dW = dB ( O , dK ) ; vec3 dX = dJ ( dW , vec3 ( dv ) , u_scatter_strength ) * dV ; dS += dJ ( sqrt ( dU ) , u_sky_color * dX , u_rayleigh_strength ) ; dT += dJ ( dU , dX , u_mie_strength ) ; } dS = dS * dR * pow ( dP , u_rayleigh_collection_power ) / float ( dw ) ; dT = ( dT * dR * pow ( dP , u_mie_collection_power ) ) / float ( dw ) ; vec3 aQ = vec3 ( dN * dT + dM * dT + dL * dS ) ; aW ( aQ ) ; GLSL_OUT_FRAG_COLOR = vec4 ( aQ , 1.0 ) ; }".split(" ")}]};
f["r_convolution_skybox.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"txt",aa:"uniform samplerCube u_sky_reflection ; uniform float u_roughness ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; GLSL_IN vec3 bu ; float eb ( int cw , int dY ) { float dZ = 1.0 / float ( dY ) ; float d_ = 1.0 ; float ea = 0.0 ; for ( int cq = 0 ; cq < 32 ; ++ cq ) { if ( cw > 0 ) { d_ = mod ( float ( cw ) , 2.0 ) ; ea += d_ * dZ ; dZ = dZ / 2.0 ; cw = int ( float ( cw ) / 2.0 ) ; } } return ea ; } vec2 ed ( int cq , int ec ) { return vec2 ( float ( cq ) / float ( ec ) , eb ( cq , 2 ) ) ; } vec3 ek ( vec2 ee , vec3 ec , float ef ) { float a = ef * ef ; float bC = 2.0 * M_PI * ee . x ; float eg = sqrt ( ( 1.0 - ee . y ) / ( 1.0 + ( a * a - 1.0 ) * ee . y ) ) ; float eh = sqrt ( 1.0 - eg * eg ) ; vec3 ei ; ei . x = cos ( bC ) * eh ; ei . y = sin ( bC ) * eh ; ei . z = eg ; vec3 by = abs ( ec . z ) < 0.999 ? vec3 ( 0.0 , 0.0 , 1.0 ) : vec3 ( 1.0 , 0.0 , 0.0 ) ; vec3 V = normalize ( cross ( by , ec ) ) ; vec3 ej = cross ( ec , V ) ; vec3 bF = V * ei . x + ej * ei . y + ec * ei . z ; return normalize ( bF ) ; } void main ( ) { vec3 el = vec3 ( 0.0 ) ; if ( u_roughness != 0.0 ) { vec3 ec = normalize ( bu ) ; vec3 em = ec ; vec3 en = em ; const int eo = 1024 ; float ep = 0.0 ; for ( int cq = 0 ; cq < eo ; ++ cq ) { vec2 ee = ed ( cq , eo ) ; vec3 ei = ek ( ee , ec , u_roughness ) ; vec3 eq = normalize ( 2.0 * dot ( en , ei ) * ei - en ) ; float er = max ( dot ( ec , eq ) , 0.0 ) ; if ( er > 0.0 ) { vec3 bw = GLSL_TEXTURE_CUBE ( u_sky_reflection , eq ) . rgb ; bG ( bw ) ; el += bw * er ; ep += er ; } } el = el / ep ; } else { vec3 bw = GLSL_TEXTURE_CUBE ( u_sky_reflection , normalize ( bu ) ) . rgb ; bG ( bw ) ; el = bw ; } GLSL_OUT_FRAG_COLOR = vec4 ( el , 1.0 ) ; }".split(" ")}]};
f["shadow.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"NODES",aa:["0"]},{$:"var",ba:"REFLECTION_TYPE",aa:["REFL_NONE"]},{$:"var",ba:"USE_TBN_SHADING",aa:["0"]},{$:"var",ba:"SHADELESS",aa:["0"]},{$:"var",ba:"RGBA_SHADOWS",aa:["0"]},{$:"var",ba:"USE_VIEW_TSR_INVERSE",aa:["0"]},{$:"var",ba:"USE_MODEL_TSR_INVERSE",aa:["0"]},{$:"var",ba:"USE_VIEW_TSR",aa:["0"]},{$:"var",ba:"USE_MODEL_TSR",aa:["0"]},{$:"var",ba:"USE_ENVIRONMENT_LIGHT",aa:["0"]},
{$:"var",ba:"SKY_TEXTURE",aa:["0"]},{$:"var",ba:"SKY_COLOR",aa:["0"]},{$:"var",ba:"USE_REFRACTION",aa:["0"]},{$:"var",ba:"CALC_TBN_SPACE",aa:["0"]},{$:"var",ba:"CAMERA_TYPE",aa:["CAM_TYPE_PERSP"]},{$:"var",ba:"USE_POSITION_CLIP",aa:["0"]},{$:"var",ba:"USE_REFRACTION_CORRECTION",aa:["0"]},{$:"var",ba:"CSM_SECTION1",aa:["0"]},{$:"var",ba:"CSM_SECTION2",aa:["0"]},{$:"var",ba:"CSM_SECTION3",aa:["0"]},{$:"var",ba:"NUM_LIGHTS",aa:["0"]},{$:"var",ba:"NUM_LAMP_LIGHTS",aa:["0"]},{$:"var",ba:"TEXTURE_BLEND_TYPE",
aa:["TEXTURE_BLEND_TYPE_MIX"]},{$:"var",ba:"NUM_VALUES",aa:["0"]},{$:"var",ba:"NUM_RGBS",aa:["0"]},{$:"var",ba:"NUM_CAST_LAMPS",aa:["0"]},{$:"var",ba:"TEXTURE_COLOR",aa:["0"]},{$:"var",ba:"ALPHA",aa:["0"]},{$:"var",ba:"SHADOW_USAGE",aa:["NO_SHADOWS"]},{$:"var",ba:"POISSON_DISK_NUM",aa:["NO_SOFT_SHADOWS"]},{$:"var",ba:"USE_DERIVATIVES_EXT",aa:["0"]},{$:"var",ba:"CAMERA_TYPE",aa:["CAM_TYPE_PERSP"]},{$:"var",ba:"USE_LOD_SMOOTHING",aa:["0"]},{$:"cond",da:[{$:"if",ga:["GLSL1","USE_DERIVATIVES_EXT",{$:"logical_and_expr",
ia:2}],ha:{$:"grp",da:[{$:"extension",aa:["GL_OES_standard_derivatives",":","enable"]}]}}]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"include",oa:"math.glslv"}]}}]},{$:"cond",da:[{$:"if",ga:["RGBA_SHADOWS"],ha:{$:"grp",da:[{$:"include",oa:"depth_fetch.glslf"},{$:"include",oa:"pack.glslf"}]}}]},{$:"cond",da:[{$:"if",ga:["USE_LOD_SMOOTHING"],ha:{$:"grp",da:[{$:"include",oa:"coverage.glslf"}]}}]},
{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_time ; uniform float u_environment_energy ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NUM_LIGHTS",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},{$:"txt",aa:["uniform","vec3","u_camera_eye_frag",";"]},{$:"cond",da:[{$:"if",
ga:["USE_NODE_FRESNEL","USE_NODE_LAYER_WEIGHT",{$:"logical_or_expr",ia:2},"CAMERA_TYPE","CAM_TYPE_ORTHO",{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_camera_direction",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"USE_VIEW_TSR",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_VIEW_TSR_INVERSE"],ha:{$:"grp",da:[{$:"txt",
aa:["uniform","mat3","u_view_tsr_inverse",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_MODEL_TSR"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_model_tsr",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_MODEL_TSR_INVERSE"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_model_tsr_inverse",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_sky_texture",";"]}]}},{$:"elif",ga:["USE_ENVIRONMENT_LIGHT",
"SKY_COLOR",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_plane_reflection",";"]}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_CUBE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_cube_reflection",";"]}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_MIRRORMAP",
{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{$:"txt",aa:"uniform float u_emit ; uniform float u_ambient ; uniform vec2 u_fresnel_params ;".split(" ")},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_MIRRORMAP",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_mirror_factor",";"]}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_refl_plane",";"]}]}}]},
{$:"cond",da:[{$:"if",ga:["USE_NODE_LAMP"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_lamp_light_positions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_directions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_color_intensities [ NUM_LAMP_LIGHTS ] ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_VALUE"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_node_values [ NUM_VALUES ] ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_RGB"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_node_rgbs [ NUM_RGBS ] ;".split(" ")}]}}]}]}},
{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:"uniform sampler2D u_colormap0 ; uniform float u_alpha_factor ;".split(" ")}]}}]},{$:"txt",aa:["uniform","vec4","u_diffuse_color",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_pcf_blur_radii",";"]}]}}]},
{$:"txt",aa:"uniform vec4 u_csm_center_dists ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map0 ;".split(" ")},{$:"cond",da:[{$:"if",ga:["CSM_SECTION1","NUM_CAST_LAMPS",1,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map1",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION2","NUM_CAST_LAMPS",2,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map2",
";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION3","NUM_CAST_LAMPS",3,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map3",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_shadow_mask",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_B4W_REFRACTION"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_refractmap",
";"]},{$:"cond",da:[{$:"if",ga:["USE_REFRACTION","USE_REFRACTION_CORRECTION",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_OBJECT_INFO"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_obj_info",
";"]}]}}]},{$:"cond",da:[{$:"if",ga:["RGBA_SHADOWS","SHADOW_USAGE","SHADOW_CASTING",{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec2","u_camera_range",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_LOD_SMOOTHING"],ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_lod_coverage ; uniform float u_lod_cmp_logic ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_IN vec3 h ; GLSL_IN vec3 j ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","k",";"]}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec2","A",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2},"NODES","ALPHA",{$:"logical_and_expr",ia:2},"SHADOW_USAGE","SHADOW_CASTING",{$:"equal_expr",ia:2},"RGBA_SHADOWS",{$:"logical_and_expr",ia:2},{$:"logical_or_expr",ia:3}],ha:{$:"grp",
da:[{$:"txt",aa:["GLSL_IN","vec4","i",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","n",";"]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION1","NUM_CAST_LAMPS",1,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","o",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION2","NUM_CAST_LAMPS",2,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN",
"vec4","u",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION3","NUM_CAST_LAMPS",3,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","v",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"USE_POSITION_CLIP",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","l",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["USE_NODE_B4W_REFRACTION",
"USE_REFRACTION",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","float","m",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","B",";"]}]}}]},{$:"txt",aa:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{$:"cond",da:[{$:"if",ga:["SHADELESS",{$:"logic_negative_expr",ia:1},"NODES","ALPHA",{$:"logical_and_expr",ia:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"include",
oa:"shadow.glslf"}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"include",oa:"nodes.glslf"}]}}]},{$:"txt",aa:["void","main","(",")","{"]},{$:"cond",da:[{$:"if",ga:["USE_LOD_SMOOTHING"],ha:{$:"grp",da:[{$:"txt",aa:"if ( ! C ( u_lod_coverage , u_lod_cmp_logic ) ) discard ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["ALPHA"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["NODES"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 D = normalize ( u_camera_eye_frag - h ) ; vec3 E ; vec3 F ; vec3 G ; vec4 H ; float I ; J ( D , E , F , G , H , I ) ; float L = I ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:"float L = ( GLSL_TEXTURE ( u_colormap0 , A ) ) . a ;".split(" ")},{$:"cond",da:[{$:"if",ga:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float M = u_alpha_factor * L ; M += ( 1.0 - step ( 0.0 , M ) ) ; L = mix ( M , 1.0 , u_diffuse_color . a ) ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"float L = u_diffuse_color . a ;".split(" ")}]}}]}]}}]},
{$:"txt",aa:"if ( L < 0.5 ) discard ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","NO_SHADOWS",{$:"equal_expr",ia:2},"SHADOW_USAGE","SHADOW_CASTING",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["RGBA_SHADOWS"],ha:{$:"grp",da:[{$:"txt",aa:"float et = es ( - i . z , u_camera_range ) ; GLSL_OUT_FRAG_COLOR = eu ( et ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 ) ;".split(" ")}]}}]}]}},{$:"elif",
ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = ev ( i . z ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE"],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR . a *= clamp ( k . r , 0.999999999 , 1.0 ) ;".split(" ")}]}}]}]}}]},{$:"txt",aa:["}"]}]};f["shadow.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",
aa:["highp"]},{$:"var",ba:"CAUSTICS",aa:["0"]},{$:"var",ba:"CALC_TBN_SPACE",aa:["0"]},{$:"var",ba:"MAIN_BEND_COL",aa:["0"]},{$:"var",ba:"DETAIL_BEND",aa:["0"]},{$:"var",ba:"CALC_TBN",aa:["0"]},{$:"var",ba:"USE_INSTANCED_PARTCLS",aa:["0"]},{$:"var",ba:"NODES",aa:["0"]},{$:"var",ba:"USE_TBN_SHADING",aa:["0"]},{$:"var",ba:"REFLECTION_TYPE",aa:["REFL_NONE"]},{$:"var",ba:"SMAA_JITTER",aa:["0"]},{$:"var",ba:"MAC_OS_SHADOW_HACK",aa:["0"]},{$:"var",ba:"USE_POSITION_CLIP",aa:["0"]},{$:"var",ba:"RGBA_SHADOWS",
aa:["0"]},{$:"var",ba:"REFRACTIVE",aa:["0"]},{$:"var",ba:"AU_QUALIFIER",aa:["GLSL_IN"]},{$:"var",ba:"BEND_CENTER_ONLY",aa:["0"]},{$:"var",ba:"CSM_SECTION1",aa:["0"]},{$:"var",ba:"CSM_SECTION2",aa:["0"]},{$:"var",ba:"CSM_SECTION3",aa:["0"]},{$:"var",ba:"HAIR_BILLBOARD",aa:["0"]},{$:"var",ba:"FRAMES_BLENDING",aa:["0"]},{$:"var",ba:"SHADOW_TEX_RES",aa:["2048.0"]},{$:"var",ba:"VERTEX_ANIM",aa:["0"]},{$:"var",ba:"NUM_CAST_LAMPS",aa:["0"]},{$:"var",ba:"TEXTURE_COLOR",aa:["0"]},{$:"var",ba:"ALPHA",aa:["0"]},
{$:"var",ba:"VERTEX_ANIM_MIX_NORMALS_FACTOR",aa:["u_va_frame_factor"]},{$:"var",ba:"MAX_BONES",aa:["0"]},{$:"var",ba:"WIND_BEND",aa:["0"]},{$:"var",ba:"SHADOW_USAGE",aa:["NO_SHADOWS"]},{$:"var",ba:"SKINNED",aa:["0"]},{$:"var",ba:"DYNAMIC_GRASS",aa:["0"]},{$:"var",ba:"BILLBOARD",aa:["0"]},{$:"var",ba:"STATIC_BATCH",aa:["0"]},{$:"var",ba:"BILLBOARD_JITTERED",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"include",oa:"math.glslv"},{$:"include",oa:"to_world.glslv"},{$:"include",oa:"scale_texcoord.glslv"},
{$:"txt",aa:"GLSL_IN vec3 a_position ; GLSL_IN vec4 a_tbn ;".split(" ")},{$:"cond",da:[{$:"if",ga:["USE_INSTANCED_PARTCLS"],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_IN vec4 a_part_ts ; GLSL_IN vec4 a_part_r ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","a_shade_tangs",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SKINNED"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","a_influence",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",
{$:"logical_or_expr",ia:3},"USE_INSTANCED_PARTCLS",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["MAIN_BEND_COL"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","float","a_bending_col_main",";"]},{$:"cond",da:[{$:"if",ga:["DETAIL_BEND"],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_IN vec3 a_bending_col_detail ; AU_QUALIFIER float au_detail_bending_amp ; AU_QUALIFIER float au_branch_bending_amp ; AU_QUALIFIER float au_detail_bending_freq ;".split(" ")}]}}]}]}}]},
{$:"txt",aa:"AU_QUALIFIER float au_wind_bending_amp ; AU_QUALIFIER float au_wind_bending_freq ;".split(" ")},{$:"cond",da:[{$:"if",ga:["BEND_CENTER_ONLY"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","a_emitter_center",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["VERTEX_ANIM"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","a_position_next",";"]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO",
"USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE",{$:"logical_or_expr",ia:5}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","a_tbn_next",";"]}]}}]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2},{$:"logic_negative_expr",ia:1},"TEXTURE_COLOR",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec2","a_texcoord",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT vec3 h ; GLSL_OUT vec3 j ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","k",";"]}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec2","A",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2},"NODES","ALPHA",{$:"logical_and_expr",ia:2},"SHADOW_USAGE","SHADOW_CASTING",{$:"equal_expr",ia:2},"RGBA_SHADOWS",{$:"logical_and_expr",ia:2},{$:"logical_or_expr",ia:3}],
ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","i",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","n",";"]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION1","NUM_CAST_LAMPS",1,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","o",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION2","NUM_CAST_LAMPS",2,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",
aa:["GLSL_OUT","vec4","u",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION3","NUM_CAST_LAMPS",3,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","v",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"USE_POSITION_CLIP",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","l",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",
ga:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","float","m",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","B",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["STATIC_BATCH"],ha:{$:"grp",da:[{$:"txt",aa:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 1.0 , 1.0 , 0.0 , 0.0 , 0.0 ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","mat3","u_model_tsr",
";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SMAA_JITTER"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{$:"txt",aa:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS","BILLBOARD",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_camera_eye",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["BILLBOARD","SHADOW_USAGE","SHADOW_CASTING",{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",
aa:["uniform","mat3","u_shadow_cast_billboard_view_tsr",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS"],ha:{$:"grp",da:[{$:"txt",aa:"uniform PRECISION sampler2D u_grass_map_depth ; uniform sampler2D u_grass_map_color ; uniform vec4 u_camera_quat ; uniform vec3 u_grass_map_dim ; uniform float u_grass_size ; uniform float u_scale_threshold ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SKINNED"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_quatsb [ MAX_BONES ] ; uniform vec4 u_transb [ MAX_BONES ] ; uniform vec4 u_arm_rel_trans ; uniform vec4 u_arm_rel_quat ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FRAMES_BLENDING"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_quatsa [ MAX_BONES ] ; uniform vec4 u_transa [ MAX_BONES ] ; uniform float u_frame_factor ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["BILLBOARD_JITTERED"],ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_jitter_amp ; uniform float u_jitter_freq ;".split(" ")}]}}]},{$:"txt",aa:"uniform vec3 u_wind ; uniform PRECISION float u_time ;".split(" ")}]}}]},{$:"cond",
da:[{$:"if",ga:["VERTEX_ANIM"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_va_frame_factor",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2},{$:"logic_negative_expr",ia:1},"TEXTURE_COLOR",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_texture_scale",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_normal_offset",";"]},{$:"cond",da:[{$:"if",
ga:["MAC_OS_SHADOW_HACK"],ha:{$:"grp",da:[{$:"txt",aa:"uniform mat3 u_v_light_tsr [ NUM_CAST_LAMPS ] ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_v_light_ts [ NUM_CAST_LAMPS ] ; uniform vec4 u_v_light_r [ NUM_CAST_LAMPS ] ;".split(" ")}]}}]},{$:"txt",aa:["uniform","mat4","u_p_light_matrix0",";"]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION1","NUM_CAST_LAMPS",1,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},
{$:"cond",da:[{$:"if",ga:["CSM_SECTION2","NUM_CAST_LAMPS",2,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION3","NUM_CAST_LAMPS",3,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_B4W_REFRACTION"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","float","u_view_max_depth",
";"]}]}}]},{$:"include",oa:"dynamic_grass.glslv"},{$:"include",oa:"shadow.glslv"},{$:"include",oa:"skin.glslv"},{$:"include",oa:"wind_bending.glslv"},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"include",oa:"nodes.glslv"}]}}]},{$:"txt",aa:"void main ( ) { mat3 N = u_view_tsr ; vec3 O = a_position ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2},"CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO",
"USE_NODE_NORMAL_MAP","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{$:"logical_and_expr",ia:3},"USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_NO","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{$:"logical_or_expr",ia:13}],ha:{$:"grp",da:[{$:"txt",aa:"float P , Q ; vec4 S = R ( a_tbn , P , Q ) ; vec3 ca = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ; vec3 U = ca ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 U = vec3 ( 0.0 ) ;".split(" ")}]}}]},{$:"cond",
da:[{$:"if",ga:["NODES","ALPHA","CALC_TBN_SPACE",{$:"logical_and_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 V = T ( S , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 W = Q * cross ( U , V ) ; vec4 Y = X ( W , Q * P ) ; V = T ( Y , U ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["VERTEX_ANIM"],ha:{$:"grp",da:[{$:"txt",aa:"O = mix ( O , a_position_next , u_va_frame_factor ) ;".split(" ")},{$:"cond",da:[{$:"if",
ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE",{$:"logical_or_expr",ia:5}],ha:{$:"grp",da:[{$:"txt",aa:"float af , ah ; vec4 ai = R ( a_tbn_next , af , ah ) ; vec3 aj = T ( ai , vec3 ( 0.0 , 1.0 , 0.0 ) ) ; U = mix ( U , aj , VERTEX_ANIM_MIX_NORMALS_FACTOR ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 ak = T ( ai , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 al = ah * cross ( aj , ak ) ; vec4 am = X ( al , ah * af ) ; ak = T ( am , aj ) ; V = mix ( V , ak , u_va_frame_factor ) ; W = mix ( W , al , u_va_frame_factor ) ;".split(" ")}]}}]}]}}]}]}}]},
{$:"cond",da:[{$:"if",ga:["SKINNED"],ha:{$:"grp",da:[{$:"txt",aa:"an ( O , V , W , U ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_INSTANCED_PARTCLS"],ha:{$:"grp",da:[{$:"txt",aa:"mat3 Z = aZ ( a_part_ts . xyz , aY ( ) ) ; Z = a_ ( vec3 ( a_part_ts . w ) , Z ) ; Z = bc ( a_part_r , Z ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["STATIC_BATCH",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"Z = bd ( u_model_tsr , Z ) ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["mat3",
"Z","=","u_model_tsr",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{$:"logical_or_expr",ia:3},"USE_INSTANCED_PARTCLS",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["vec3","ao","=","au_center_pos",";"]}]}},{$:"elif",ga:["DYNAMIC_GRASS","USE_INSTANCED_PARTCLS",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 ao = a_part_ts . xyz ; O = ap ( Z , O ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 ao = vec3 ( 0.0 ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["CALC_TBN"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 ac = normalize ( _ ( Z , ca ) ) ; vec3 ad = cross ( vec3 ( 0.0 , 0.0 , 1.0 ) , ac ) ; vec3 ae = cross ( ac , ad ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["vec3","ae","=","a_shade_tangs",";"]}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 ae = vec3 ( 0.0 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS"],ha:{$:"grp",da:[{$:"txt",aa:"au aw = be ( O , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , U , ao , u_grass_map_depth , u_grass_map_color , u_grass_map_dim , u_grass_size , u_camera_eye , u_camera_quat , N , Z ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["BILLBOARD"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 aq = ap ( Z , ao ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["HAIR_BILLBOARD",{$:"logic_negative_expr",ia:1},"SHADOW_USAGE","SHADOW_CASTING",{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["mat3","ew","=","u_shadow_cast_billboard_view_tsr",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["mat3","ew","=","N",";"]}]}}]},{$:"txt",aa:"Z = as ( u_camera_eye , aq , ew , Z ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["WIND_BEND","BILLBOARD_JITTERED",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"Z = at ( u_wind , u_time , u_jitter_amp , u_jitter_freq , aq , Z ) ;".split(" ")}]}}]},{$:"txt",aa:"au aw = av ( O - ao , ao , V , ae , W , U , Z ) ; aw . ao = aq ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"au aw = av ( O , ao , V , ae , W , U , Z ) ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["MAIN_BEND_COL",
"DETAIL_BEND",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["vec3","ay","=","ca",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 ay = vec3 ( 0.0 ) ;".split(" ")}]}}]},{$:"txt",aa:"ax ( aw . O , aw . ao , ay , mat4 ( 0.0 ) ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"h = aw . O ;".split(" ")},{$:"cond",da:[{$:"if",ga:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE",
"WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{$:"logical_and_expr",ia:3},"USE_NODE_TEX_COORD_NO","USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{$:"logical_or_expr",ia:12}],ha:{$:"grp",da:[{$:"txt",aa:"j = aw . U ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE"],ha:{$:"grp",da:[{$:"txt",aa:"float aA = ( dot ( cross ( aw . U , aw . V ) , aw . W ) < 0.0 ) ? - 1.0 : 1.0 ; k = vec4 ( aw . V , aA ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",
ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",aa:"B = aw . aB ;".split(" ")}]}}]}]}}]},{$:"txt",aa:"vec4 cc = vec4 ( ap ( N , aw . O ) , 1.0 ) ; vec4 f = u_proj_matrix * cc ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SMAA_JITTER"],ha:{$:"grp",da:[{$:"txt",aa:"f . xy += u_subpixel_jitter * f . w ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"USE_POSITION_CLIP",
{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"l = aC ( f ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"m = - cc . z / u_view_max_depth ;".split(" ")}]}}]},{$:"txt",aa:["J","(",")",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:"A = az ( a_texcoord , u_texture_scale ) ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE",
"SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"cd ( aw . O , aw . U ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2},"NODES","ALPHA",{$:"logical_and_expr",ia:2},"SHADOW_USAGE","SHADOW_CASTING",{$:"equal_expr",ia:2},"RGBA_SHADOWS",{$:"logical_and_expr",ia:2},{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["i","=","cc",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_CASTING",{$:"equal_expr",
ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 ey = ( u_proj_matrix * vec4 ( ex ( N ) , 1.0 ) ) . xy ; float ez = SHADOW_TEX_RES / 2.0 ; ey = floor ( ey * ez + 0.5 ) / ez - ey ; f . xy += ey ;".split(" ")}]}}]},{$:"txt",aa:["gl_Position","=","f",";","}"]}]};f["sky.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"WO_SKYTEX",aa:["0"]},{$:"var",ba:"WO_SKYREAL",aa:["0"]},{$:"var",ba:"WO_SKYBLEND",aa:["0"]},{$:"var",ba:"PROCEDURAL_SKYDOME",aa:["0"]},{$:"var",ba:"WATER_EFFECTS",aa:["0"]},{$:"var",
ba:"DISABLE_FOG",aa:["0"]},{$:"var",ba:"WO_SKYPAPER",aa:["0"]},{$:"var",ba:"REFLECTION_PASS",aa:["REFL_PASS_NONE"]},{$:"var",ba:"WATER_LEVEL",aa:["0.0"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"txt",aa:["uniform","samplerCube","u_sky",";"]},{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS","DISABLE_FOG",{$:"logic_negative_expr",ia:1},"REFLECTION_PASS","REFL_PASS_NONE",{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",
aa:"uniform vec3 u_camera_eye_frag ; uniform vec4 u_underwater_fog_color_density ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["WO_SKYBLEND","WO_SKYPAPER",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_sky_tex_fac ; uniform vec3 u_sky_tex_color ; uniform float u_sky_tex_dvar ; uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["WO_SKYBLEND","WO_SKYPAPER","WO_SKYTEX",{$:"logical_and_expr",ia:3}],ha:{$:"grp",da:[{$:"include",
oa:"sky_blending.glslf"}]}}]},{$:"txt",aa:["GLSL_IN","vec3","bu",";"]},{$:"cond",da:[{$:"if",ga:["PROCEDURAL_SKYDOME",{$:"logic_negative_expr",ia:1},"WO_SKYTEX","WO_SKYBLEND",{$:"logical_or_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec2","A",";"]}]}}]},{$:"txt",aa:"GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec3 bw ; vec3 bv = normalize ( bu ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["WO_SKYBLEND","WO_SKYPAPER",{$:"logical_and_expr",ia:2}],ha:{$:"grp",
da:[{$:"txt",aa:["float","eA","=","0.0",";"]},{$:"cond",da:[{$:"if",ga:["WO_SKYREAL"],ha:{$:"grp",da:[{$:"txt",aa:"eA = abs ( A . y ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"eA = ( A . y + 1.0 ) * 0.5 ;".split(" ")}]}}]},{$:"txt",aa:"vec3 eB = u_horizon_color ; vec3 eC = u_zenith_color ;".split(" ")},{$:"cond",da:[{$:"if",ga:["WO_SKYTEX"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 eD = vec3 ( A , 0.0 ) ; vec4 eE = GLSL_TEXTURE_CUBE ( u_sky , bv ) ; bG ( eE . rgb ) ; bw = eF ( eB , eC , eE , eA , eD ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"bw = mix ( eB , eC , eA ) ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"bw = GLSL_TEXTURE_CUBE ( u_sky , bv ) . rgb ; bG ( bw ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS","DISABLE_FOG",{$:"logic_negative_expr",ia:1},"REFLECTION_PASS","REFL_PASS_NONE",{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:"float eG = WATER_LEVEL - u_camera_eye_frag . z ; vec3 eH = vec3 ( 0.0 ) ; vec3 eI = mix ( u_underwater_fog_color_density . rgb , eH , min ( - bv . z , 1.0 ) ) ; eI *= min ( 1.0 - min ( 0.03 * eG , 0.8 ) , 1.0 ) ; float aL = clamp ( sign ( 0.01 * eG - bv . z ) , 0.0 , 1.0 ) ; bw = mix ( bw , eI , aL ) ;".split(" ")}]}}]},
{$:"txt",aa:"aW ( bw ) ; GLSL_OUT_FRAG_COLOR = vec4 ( bw , 1.0 ) ; }".split(" ")}]};f["sky.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PROCEDURAL_SKYDOME",aa:["0"]},{$:"var",ba:"WO_SKYTEX",aa:["0"]},{$:"var",ba:"WO_SKYBLEND",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"txt",aa:"uniform mat4 u_sky_vp_inverse ; GLSL_IN vec3 a_position ; GLSL_OUT vec3 bu ;".split(" ")},{$:"cond",da:[{$:"if",ga:["PROCEDURAL_SKYDOME",{$:"logic_negative_expr",ia:1},"WO_SKYTEX","WO_SKYBLEND",{$:"logical_or_expr",
ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec2","A",";"]}]}}]},{$:"txt",aa:"void main ( ) { vec4 O = vec4 ( a_position . xy , 0.9999999 , 1.0 ) ; vec4 bv = u_sky_vp_inverse * O ; bu = bv . xyz ;".split(" ")},{$:"cond",da:[{$:"if",ga:["PROCEDURAL_SKYDOME",{$:"logic_negative_expr",ia:1},"WO_SKYTEX","WO_SKYBLEND",{$:"logical_or_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"A = a_position . xy ;".split(" ")}]}}]},{$:"txt",aa:["gl_Position","=",
"O",";","}"]}]};f["skybox.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PROCEDURAL_SKYDOME",aa:["0"]},{$:"var",ba:"WO_SKYTEX",aa:["0"]},{$:"var",ba:"WO_SKYBLEND",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"txt",aa:"uniform mat4 u_cube_view_matrix ; GLSL_IN vec3 a_position ; GLSL_OUT vec3 bu ;".split(" ")},{$:"cond",da:[{$:"if",ga:["PROCEDURAL_SKYDOME",{$:"logic_negative_expr",ia:1},"WO_SKYTEX","WO_SKYBLEND",{$:"logical_or_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",
aa:["GLSL_OUT","vec2","A",";"]}]}}]},{$:"txt",aa:"void main ( ) { vec4 O = vec4 ( a_position . xy , 0.999999 , 1.0 ) ; vec4 bv = u_cube_view_matrix * O ; bu = bv . xyz ;".split(" ")},{$:"cond",da:[{$:"if",ga:["PROCEDURAL_SKYDOME",{$:"logic_negative_expr",ia:1},"WO_SKYTEX","WO_SKYBLEND",{$:"logical_or_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"A = a_position . xy ;".split(" ")}]}}]},{$:"txt",aa:["gl_Position","=","O",";","}"]}]};f["tex_skybox.glslf"]={$:"grp",da:[{$:"version",
aa:["GLSL_VERSION"]},{$:"var",ba:"WO_SKYTEX",aa:["0"]},{$:"var",ba:"WO_SKYREAL",aa:["0"]},{$:"var",ba:"WO_SKYBLEND",aa:["0"]},{$:"var",ba:"WO_SKYPAPER",aa:["0"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"txt",aa:"GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; GLSL_IN vec3 bu ; GLSL_IN vec2 A ;".split(" ")},{$:"cond",da:[{$:"if",ga:["WO_SKYTEX"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_sky_texture",";"]}]}}]},{$:"txt",aa:"uniform vec4 u_sky_tex_fac ; uniform vec3 u_sky_tex_color ; uniform float u_sky_tex_dvar ; uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["WO_SKYTEX"],ha:{$:"grp",da:[{$:"include",oa:"sky_blending.glslf"}]}}]},{$:"txt",aa:"void main ( ) { vec3 bv = normalize ( bu ) ; vec3 bw ; float eA = 0.0 ;".split(" ")},{$:"cond",da:[{$:"if",ga:["WO_SKYPAPER"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["WO_SKYTEX"],ha:{$:"grp",da:[{$:"txt",aa:"bw = GLSL_TEXTURE_CUBE ( u_sky_texture , bv ) . xyz ; bG ( bw ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"bw = vec3 ( 1.0 ) ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",
da:[{$:"cond",da:[{$:"if",ga:["WO_SKYBLEND"],ha:{$:"grp",da:[{$:"txt",aa:"float L = acos ( bv . z ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["WO_SKYREAL"],ha:{$:"grp",da:[{$:"txt",aa:"eA = abs ( L * INV_PI - 0.5 ) * 2.0 ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"eA = 1.0 - L * INV_PI ;".split(" ")}]}}]}]}}]},{$:"txt",aa:"vec3 eB = u_horizon_color ; vec3 eC = u_zenith_color ;".split(" ")},{$:"cond",da:[{$:"if",ga:["WO_SKYTEX"],ha:{$:"grp",da:[{$:"txt",aa:"vec4 eE = GLSL_TEXTURE_CUBE ( u_sky_texture , bv ) ; bG ( eE . rgb ) ; vec3 eD = vec3 ( bu . xy , 0.0 ) ; bw = eF ( eB , eC , eE , eA , eD ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["WO_SKYBLEND"],ha:{$:"grp",da:[{$:"txt",aa:"bw = mix ( eB , eC , eA ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["bw","=","eB",";"]}]}}]}]}}]}]}}]},{$:"txt",aa:"aW ( bw ) ; GLSL_OUT_FRAG_COLOR = vec4 ( bw , 1.0 ) ; }".split(" ")}]};f["water.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"USE_FOG",aa:["0"]},{$:"var",ba:"USE_TBN_SHADING",aa:["0"]},{$:"var",ba:"DEBUG_WIREFRAME",
aa:["0"]},{$:"var",ba:"NUM_NORMALMAPS",aa:["0"]},{$:"var",ba:"FOAM",aa:["0"]},{$:"var",ba:"SHORE_PARAMS",aa:["0"]},{$:"var",ba:"GENERATED_MESH",aa:["0"]},{$:"var",ba:"ABSORB",aa:["6.0"]},{$:"var",ba:"SSS_STRENGTH",aa:["1.0"]},{$:"var",ba:"SSS_WIDTH",aa:["0.45"]},{$:"var",ba:"ALPHA",aa:["0"]},{$:"var",ba:"DISABLE_FOG",aa:["0"]},{$:"var",ba:"NUM_LIGHTS",aa:["0"]},{$:"var",ba:"WAVES_HEIGHT",aa:["1.0"]},{$:"var",ba:"WATER_LEVEL",aa:["0.0"]},{$:"var",ba:"PROCEDURAL_FOG",aa:["0"]},{$:"var",ba:"SKY_TEXTURE",
aa:["0"]},{$:"var",ba:"USE_REFRACTION_CORRECTION",aa:["0"]},{$:"var",ba:"SHORE_SMOOTHING",aa:["0"]},{$:"var",ba:"DYNAMIC",aa:["0"]},{$:"var",ba:"USE_ENVIRONMENT_LIGHT",aa:["0"]},{$:"var",ba:"SKY_COLOR",aa:["0"]},{$:"var",ba:"REFLECTION_TYPE",aa:["REFL_NONE"]},{$:"var",ba:"WATER_EFFECTS",aa:["0"]},{$:"var",ba:"REFRACTIVE",aa:["0"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"pack.glslf"},{$:"include",oa:"color_util.glslf"},{$:"include",oa:"math.glslv"},
{$:"define",ba:"REFL_BUMP",aa:["0.002"]},{$:"txt",aa:["uniform","float","u_time",";"]},{$:"cond",da:[{$:"if",ga:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_sky_texture",";"]}]}},{$:"elif",ga:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{$:"txt",aa:["uniform","float","u_environment_energy",";"]},
{$:"cond",da:[{$:"if",ga:["NUM_LIGHTS",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},{$:"txt",aa:"uniform vec3 u_sun_intensity ; uniform vec3 u_sun_direction ;".split(" ")},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"SHORE_SMOOTHING","WATER_EFFECTS","DISABLE_FOG",{$:"logic_negative_expr",ia:1},
{$:"logical_and_expr",ia:2},{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_cam_water_depth",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_fog_color_density",";"]},{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_underwater_fog_color_density",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["PROCEDURAL_FOG"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat4",
"u_cube_fog",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_FOG"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_refractmap",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",
aa:["uniform","sampler2D","u_plane_reflection",";"]}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_MIRRORMAP",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_SMOOTHING"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["FOAM"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_foam",";"]}]}}]},{$:"txt",aa:"uniform vec4 u_diffuse_color ; uniform vec2 u_diffuse_params ; uniform float u_diffuse_intensity ; uniform float u_ambient ; uniform vec2 u_fresnel_params ; uniform vec3 u_specular_color ; uniform vec3 u_specular_params ; uniform vec3 u_shallow_water_col ; uniform vec3 u_shore_water_col ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_water_norm_uv_velocity ; uniform vec2 u_normalmap0_scale ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",1,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec2","u_normalmap1_scale",";"]},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",2,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec2","u_normalmap2_scale",";"]},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",3,{$:"g_expr",
ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec2","u_normalmap3_scale",";"]}]}}]}]}}]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_MIRRORMAP",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_mirror_factor",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_reflect_factor",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_SMOOTHING","DISABLE_FOG",{$:"logic_negative_expr",ia:1},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform",
"float","u_view_max_depth",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_PARAMS"],ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_water_shallow_col_fac ; uniform float u_water_shore_col_fac ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["FOAM"],ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_foam_factor ; uniform vec2 u_foam_uv_freq ; uniform vec2 u_foam_mag ; uniform vec2 u_foam_scale ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_refr_bump",
";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DEBUG_WIREFRAME"],ha:{$:"grp",da:[{$:"txt",aa:"const float aE = 1.0 ; uniform vec3 u_wireframe_edge_color ;".split(" ")}]}}]},{$:"txt",aa:"GLSL_IN vec3 bY ; GLSL_IN vec3 h ; GLSL_IN vec3 j ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",0,{$:"g_expr",ia:2},"FOAM",{$:"logical_or_expr",ia:2},"GENERATED_MESH",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec2","A",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",
0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_IN vec3 k ; GLSL_IN vec3 eJ ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",0,{$:"g_expr",ia:2},"FOAM",{$:"logical_or_expr",ia:2},"GENERATED_MESH","DYNAMIC",{$:"logical_and_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","eK",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_PARAMS"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","eL",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",
ia:2},"REFRACTIVE",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","l",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"REFRACTIVE","DISABLE_FOG",{$:"logic_negative_expr",ia:1},{$:"logical_or_expr",ia:4}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","float","m",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DEBUG_WIREFRAME"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","aD",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],
ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","B",";"]}]}}]},{$:"txt",aa:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{$:"include",oa:"environment.glslf"},{$:"cond",da:[{$:"if",ga:["REFRACTIVE","SHORE_SMOOTHING","USE_REFRACTION_CORRECTION",{$:"logical_and_expr",ia:3}],ha:{$:"grp",da:[{$:"include",oa:"refraction.glslf"}]}}]},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"include",oa:"fog.glslf"}]}}]},{$:"txt",aa:"vec3 eT ( in vec2 eM , in vec3 U , in vec3 eN , in vec3 eO , out float eP , in float eQ ) { eP = 0.0 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 eR = eM . xy + U . xy * REFL_BUMP / m ; eP = u_reflect_factor ; vec3 eS ; if ( u_cam_water_depth < 0.0 ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1},"WATER_EFFECTS",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"eS = u_underwater_fog_color_density . rgb ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"eS = u_diffuse_color . rgb ;".split(" ")}]}}]},
{$:"txt",aa:"} else { eS = GLSL_TEXTURE ( u_plane_reflection , eR ) . rgb ; bG ( eS ) ; }".split(" ")}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_MIRRORMAP",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"eP = u_mirror_factor ; vec3 eS = eO * GLSL_TEXTURE_CUBE ( u_mirrormap , eN ) . rgb ; bG ( eS ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"eP = u_reflect_factor ; vec3 eS = eO * vec3 ( 0.3 , 0.5 , 1.0 ) ; bG ( eS ) ;".split(" ")}]}}]},{$:"txt",aa:"eP = min ( eP * eQ , 1.0 ) ; return eS ; }".split(" ")},
{$:"include",oa:"lighting_nodes.glslf"},{$:"txt",aa:["void","main","(",")","{"]},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"mat3 cg = mat3 ( k , eJ , j ) ;".split(" ")}]}}]},{$:"txt",aa:"vec3 U = normalize ( j ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DYNAMIC","FOAM",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS"],ha:{$:"grp",da:[{$:"txt",aa:"float bT = h . z - WATER_LEVEL ;".split(" ")}]}},{$:"else",ha:{$:"grp",
da:[{$:"txt",aa:"float bT = h . z ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",0,{$:"g_expr",ia:2},"FOAM",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["GENERATED_MESH"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["DYNAMIC"],ha:{$:"grp",da:[{$:"txt",aa:"vec2 ce = vec2 ( eK . x , - eK . y ) + 0.5 ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec2 ce = vec2 ( h . x , - h . y ) + 0.5 ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["vec2",
"ce","=","A",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 eU = vec3 ( 0.0 ) ; eU += GLSL_TEXTURE ( u_normalmap0 , ce * u_normalmap0_scale + vec2 ( 0.3 , 0.5 ) * u_water_norm_uv_velocity * u_time ) . xyz - 0.5 ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",1,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"eU += GLSL_TEXTURE ( u_normalmap0 , ce * u_normalmap1_scale + vec2 ( - 0.3 , 0.7 ) * u_water_norm_uv_velocity * u_time ) . xyz - 0.5 ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",2,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"eU += GLSL_TEXTURE ( u_normalmap0 , ce * u_normalmap2_scale + vec2 ( 0.0 , 1.1 ) * u_water_norm_uv_velocity * u_time ) . xyz - 0.5 ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",3,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"eU += GLSL_TEXTURE ( u_normalmap0 , ce * u_normalmap3_scale + vec2 ( - 0.66 , - 0.3 ) * u_water_norm_uv_velocity * u_time ) . xyz - 0.5 ;".split(" ")}]}}]},{$:"cond",
da:[{$:"if",ga:["NUM_NORMALMAPS",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["DYNAMIC"],ha:{$:"grp",da:[{$:"txt",aa:"U = mix ( U , normalize ( cg * eU ) , 0.3 ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"U = mix ( U , normalize ( cg * eU ) , 0.5 ) ;".split(" ")}]}}]},{$:"txt",aa:"U = normalize ( U ) ;".split(" ")}]}}]},{$:"txt",aa:"vec3 D = normalize ( bY ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"REFRACTIVE",{$:"logical_or_expr",
ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 eM = l . xy / l . z ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec2 eM = vec2 ( 0.0 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE"],ha:{$:"grp",da:[{$:"txt",aa:"vec2 eV = eM + U . xy * u_refr_bump / m ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_SMOOTHING"],ha:{$:"grp",da:[{$:"txt",aa:"float L = u_diffuse_color . a ; vec4 cU = GLSL_TEXTURE_PROJ ( u_scene_depth , l ) ; float cW = cV ( cU ) ; float cX = max ( cW - m , 0.0 ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["REFRACTIVE"],ha:{$:"grp",da:[{$:"txt",aa:"float eX = eW ( cW , eV , eM ) ; float eY = max ( eX - m , 0.0 ) ; float eZ = u_view_max_depth / ABSORB * eY ; float e_ = min ( L * eZ , 1.0 ) ; L = min ( 15.0 * L * u_view_max_depth * cX , 1.0 ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"float cY = u_view_max_depth / ABSORB * cX ; if ( u_cam_water_depth > 0.0 ) L = min ( L * cY , 1.0 ) ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"float L = u_diffuse_color . a ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["REFRACTIVE"],ha:{$:"grp",da:[{$:"txt",aa:["float","e_","=","L",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE"],ha:{$:"grp",da:[{$:"txt",aa:"if ( u_cam_water_depth < 0.0 ) e_ = 0.0 ; vec3 fa = GLSL_TEXTURE ( u_refractmap , eV ) . rgb ; bG ( fa ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_PARAMS"],ha:{$:"grp",da:[{$:"txt",aa:"float fb = pow ( min ( eL . b / u_water_shallow_col_fac , 1.0 ) , 0.3 ) ; vec3 cy = mix ( u_shallow_water_col , u_diffuse_color . rgb , fb ) ; fb = pow ( min ( eL . b / u_water_shore_col_fac , 1.0 ) , 0.3 ) ; cy = mix ( u_shore_water_col , cy , fb ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 cy = u_diffuse_color . rgb ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["FOAM"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["SHORE_SMOOTHING"],ha:{$:"grp",da:[{$:"txt",aa:"float fc = max ( 1.0 - u_view_max_depth * cX , 0.0 ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"float fc = 1.0 - L ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["DYNAMIC"],ha:{$:"grp",da:[{$:"txt",aa:"float fd = max ( bT / WAVES_HEIGHT + 0.1 , 0.0 ) ;".split(" ")},{$:"cond",
da:[{$:"if",ga:["SHORE_PARAMS"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 fe = normalize ( vec3 ( eL . rg , 0.0 ) ) ; vec3 ff = normalize ( mix ( UP_VECTOR , fe , 0.8 ) ) ; float fg = 1.25 * max ( dot ( U , ff ) - 0.2 , 0.0 ) ; fg += max ( dot ( U , - UP_VECTOR ) , 0.0 ) ; fc += fg * ( 1.0 - eL . b ) ; fd *= ( 1.0 - 0.95 * pow ( eL . b , 0.1 ) ) ;".split(" ")}]}}]},{$:"txt",aa:"fc += fd ; fc = min ( u_foam_factor * fc , 1.0 ) ;".split(" ")}]}}]},{$:"txt",aa:"vec4 fh = GLSL_TEXTURE ( u_foam , u_foam_mag * sin ( u_foam_uv_freq * u_time ) + ce * u_foam_scale ) ;".split(" ")}]}}]},
{$:"txt",aa:"float cL = u_specular_params [ 0 ] ; vec2 cM = vec2 ( u_specular_params [ 1 ] , u_specular_params [ 2 ] ) ; vec3 cN = cL * u_specular_color ; vec3 cF = u_environment_energy * cE ( U ) ; vec3 cG = u_ambient * cF ; vec3 eO = cG + u_sun_intensity ; float eP ; vec3 eN = reflect ( - D , U ) ; vec3 fi = normalize ( eN + D ) ; float fj = 1.0 - dot ( D , fi ) ; float ec = u_fresnel_params [ 0 ] ; float fk = u_fresnel_params [ 1 ] ; float fl = fk + ( 1.0 - fk ) * pow ( fj , ec ) ; vec3 eS = eT ( eM , U , eN , eO , eP , fl ) ; vec3 cD = u_diffuse_intensity * cy ; vec3 aQ ; vec3 cO ; cP ( vec3 ( 0.0 ) , vec3 ( 0.0 ) , cD , cN , h , U , D , cM , u_diffuse_params , vec4 ( 1.0 ) , 0.0 , vec4 ( 0.0 ) , aQ , cO ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["DYNAMIC"],ha:{$:"grp",da:[{$:"txt",aa:"float fm = max ( dot ( u_sun_direction , - j ) + SSS_WIDTH , 0.0 ) * max ( dot ( - D , u_sun_direction ) - 0.5 , 0.0 ) * max ( 0.0 , length ( u_sun_intensity ) - 0.1 ) ; fm = clamp ( SSS_STRENGTH * fm , 0.0 , 1.0 ) ; aQ = mix ( aQ , u_shallow_water_col , fm ) ; aQ = mix ( aQ , u_shore_water_col , fm ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE"],ha:{$:"grp",da:[{$:"txt",aa:"aQ = mix ( fa , aQ , e_ ) ;".split(" ")}]}}]},
{$:"txt",aa:"aQ = mix ( aQ , eS , eP ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["FOAM"],ha:{$:"grp",da:[{$:"txt",aa:"float fn = mix ( fh . g , fh . r , max ( 4.0 * ( fc - 0.75 ) , 0.0 ) ) ; fn = mix ( fh . b , fn , max ( 2.0 * fc - 1.0 , 0.0 ) ) ; fn = mix ( 0.0 , fn , fc ) ; aQ = mix ( aQ , eO , fn ) ;".split(" ")}]}}]},{$:"txt",aa:["aQ","+=","cO",";"]},{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS","DISABLE_FOG",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float fo = m * u_view_max_depth ; float fp = 1.0 ; if ( u_cam_water_depth > 1.0 ) fp = 2.0 ; bW ( aQ , fo , D , fp ) ;".split(" ")}]}}]},
{$:"txt",aa:["aW","(","aQ",")",";"]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"L = max ( L , cO . r ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["FOAM"],ha:{$:"grp",da:[{$:"txt",aa:["L","+=","fn",";"]}]}}]}]}},{$:"elif",ga:["SHORE_SMOOTHING",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:["L","=","1.0",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["ALPHA"],ha:{$:"grp",da:[{$:"txt",aa:"aX ( aQ , L ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",
ga:["DEBUG_WIREFRAME",1,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["GLSL1"],ha:{$:"grp",da:[{$:"extension",aa:["GL_OES_standard_derivatives",":","enable"]}]}}]},{$:"txt",aa:"vec3 aN = fwidth ( aD ) ; vec3 aO = smoothstep ( vec3 ( 0.0 ) , aN * aE , aD ) ; float fq = min ( min ( aO . x , aO . y ) , aO . z ) ; fq = clamp ( fq , 0.0 , 1.0 ) ; aQ = mix ( u_wireframe_edge_color , aQ , fq ) ; L = mix ( 1.0 , L , fq ) ;".split(" ")}]}},{$:"elif",ga:["DEBUG_WIREFRAME",2,{$:"equal_expr",
ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 aM = sign ( aD - vec3 ( 0.02 * aE ) ) ; float fq = 1.0 ; if ( aM . x < 0.0 || aM . y < 0.0 || aM . z < 0.0 ) fq = 0.0 ; aQ = mix ( u_wireframe_edge_color , aQ , fq ) ; L = mix ( 1.0 , L , fq ) ;".split(" ")}]}}]},{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};f["water.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"USE_TBN_SHADING",aa:["0"]},{$:"var",ba:"DEBUG_WIREFRAME",aa:["0"]},
{$:"var",ba:"NUM_NORMALMAPS",aa:["0"]},{$:"var",ba:"FOAM",aa:["0"]},{$:"var",ba:"SHORE_PARAMS",aa:["0"]},{$:"var",ba:"MAX_SHORE_DIST",aa:["100.0"]},{$:"var",ba:"SHORE_MAP_SIZE_X",aa:["1.0"]},{$:"var",ba:"SHORE_MAP_SIZE_Y",aa:["1.0"]},{$:"var",ba:"SHORE_MAP_CENTER_X",aa:["0.0"]},{$:"var",ba:"SHORE_MAP_CENTER_Y",aa:["0.0"]},{$:"var",ba:"GENERATED_MESH",aa:["0"]},{$:"var",ba:"DST_NOISE_SCALE_0",aa:["0.05"]},{$:"var",ba:"DST_NOISE_SCALE_1",aa:["0.03"]},{$:"var",ba:"DST_NOISE_FREQ_0",aa:["1.3"]},{$:"var",
ba:"DST_NOISE_FREQ_1",aa:["1.0"]},{$:"var",ba:"DIR_MIN_SHR_FAC",aa:["0.4"]},{$:"var",ba:"DIR_FREQ",aa:["0.5"]},{$:"var",ba:"DIR_NOISE_SCALE",aa:["0.05"]},{$:"var",ba:"DIR_NOISE_FREQ",aa:["0.07"]},{$:"var",ba:"DIR_MIN_NOISE_FAC",aa:["0.5"]},{$:"var",ba:"DST_MIN_FAC",aa:["0.2"]},{$:"var",ba:"WAVES_HOR_FAC",aa:["5.0"]},{$:"var",ba:"DISABLE_FOG",aa:["0"]},{$:"var",ba:"WAVES_HEIGHT",aa:["1.0"]},{$:"var",ba:"WAVES_LENGTH",aa:["10.0"]},{$:"var",ba:"WATER_LEVEL",aa:["0.0"]},{$:"var",ba:"SHORE_SMOOTHING",
aa:["0"]},{$:"var",ba:"DYNAMIC",aa:["0"]},{$:"var",ba:"REFLECTION_TYPE",aa:["REFL_NONE"]},{$:"var",ba:"REFRACTIVE",aa:["0"]},{$:"var",ba:"STATIC_BATCH",aa:["0"]},{$:"var",ba:"WATER_EFFECTS",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"include",oa:"math.glslv"},{$:"include",oa:"to_world.glslv"},{$:"include",oa:"procedural.glslf"},{$:"txt",aa:["GLSL_IN","vec3","a_position",";"]},{$:"cond",da:[{$:"if",ga:["GENERATED_MESH",{$:"logic_negative_expr",ia:1},"DYNAMIC",{$:"logic_negative_expr",ia:1},"NUM_NORMALMAPS",
0,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","a_tbn",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["GENERATED_MESH",{$:"logic_negative_expr",ia:1},"NUM_NORMALMAPS",0,{$:"g_expr",ia:2},"FOAM",{$:"logical_or_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec2","a_texcoord",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DEBUG_WIREFRAME"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","float","a_polyindex",";"]}]}}]},
{$:"txt",aa:"GLSL_OUT vec3 bY ; GLSL_OUT vec3 h ; GLSL_OUT vec3 j ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",0,{$:"g_expr",ia:2},"FOAM",{$:"logical_or_expr",ia:2},"GENERATED_MESH",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec2","A",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT vec3 k ; GLSL_OUT vec3 eJ ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",
0,{$:"g_expr",ia:2},"FOAM",{$:"logical_or_expr",ia:2},"GENERATED_MESH","DYNAMIC",{$:"logical_and_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","eK",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_PARAMS"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","eL",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"REFRACTIVE",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","l",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_SMOOTHING",
"REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"REFRACTIVE","DISABLE_FOG",{$:"logic_negative_expr",ia:1},{$:"logical_or_expr",ia:4}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","float","m",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DEBUG_WIREFRAME"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","aD",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","B",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["STATIC_BATCH"],ha:{$:"grp",da:[{$:"txt",aa:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 1.0 , 1.0 , 0.0 , 0.0 , 0.0 ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_model_tsr",";"]}]}}]},{$:"txt",aa:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; uniform vec3 u_camera_eye ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DYNAMIC"],ha:{$:"grp",da:[{$:"txt",aa:"uniform PRECISION float u_time ; uniform vec3 u_wind ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"REFRACTIVE","DISABLE_FOG",{$:"logic_negative_expr",ia:1},{$:"logical_or_expr",
ia:4}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_PARAMS"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_shore_dist_map",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_PARAMS"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 fx ( in vec2 fr ) { vec2 fs = 0.5 + vec2 ( ( fr . x - SHORE_MAP_CENTER_X ) / SHORE_MAP_SIZE_X , ( fr . y - SHORE_MAP_CENTER_Y ) / SHORE_MAP_SIZE_Y ) ; vec4 ft = GLSL_TEXTURE ( u_shore_dist_map , fs ) ; const vec2 fu = vec2 ( 1.0 / 255.0 , 1.0 ) ; float fv = dot ( ft . ba , fu ) ; vec2 fw = normalize ( ft . rg * 2.0 - 1.0 ) ; return vec3 ( fw , fv ) ; }".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["DYNAMIC"],ha:{$:"grp",da:[{$:"define",ba:"SMALL_WAVES_FAC",aa:["0.2"]},{$:"txt",aa:"void fM ( inout vec3 fr , in float fy , in vec3 ft ) { float fA = fz ( DST_NOISE_SCALE_0 * ( fr . xy + DST_NOISE_FREQ_0 * fy ) ) * fz ( DST_NOISE_SCALE_1 * ( fr . yx - DST_NOISE_FREQ_1 * fy ) ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SHORE_PARAMS"],ha:{$:"grp",da:[{$:"txt",aa:"float fB = WAVES_LENGTH / MAX_SHORE_DIST / M_PI ; float fv = ft . b ; float fC = sqrt ( fv ) ; float fD = max ( fv , DIR_MIN_SHR_FAC ) * sin ( fC / fB + DIR_FREQ * fy ) ; float fE = max ( fz ( DIR_NOISE_SCALE * ( fr . xy + DIR_NOISE_FREQ * fy ) ) , DIR_MIN_NOISE_FAC ) ; fD *= fE ; float fF = WAVES_HEIGHT * mix ( fD , fA , max ( fC , DST_MIN_FAC ) ) ; vec2 fw = ft . rg ; float fG = WAVES_HOR_FAC * fD * max ( MAX_SHORE_DIST / 35.0 * ( 0.05 - fv ) , 0.0 ) ; vec2 fH = fG * fw ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"float fF = WAVES_HEIGHT * fA ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["GENERATED_MESH"],ha:{$:"grp",da:[{$:"txt",aa:"vec2 fI = 1.0 * ( fr . xy - 0.3 * fy ) ; vec2 fJ = 0.7 * ( fr . yx + 0.07 * fy ) ; float fL = fK ( fI ) . x + fK ( fJ ) . x - 1.0 ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SHORE_PARAMS"],ha:{$:"grp",da:[{$:"txt",aa:"fr . xy += fH ; fL *= fv ;".split(" ")}]}}]},{$:"txt",aa:"fF += SMALL_WAVES_FAC * fL ;".split(" ")}]}}]},{$:"txt",aa:"fr . z += fF ; }".split(" ")}]}}]},
{$:"txt",aa:["void","main","(",")","{"]},{$:"cond",da:[{$:"if",ga:["DEBUG_WIREFRAME"],ha:{$:"grp",da:[{$:"txt",aa:"if ( a_polyindex == 0.0 ) aD = vec3 ( 1.0 , 0.0 , 0.0 ) ; else if ( a_polyindex == 1.0 ) aD = vec3 ( 0.0 , 0.0 , 1.0 ) ; else aD = vec3 ( 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["GENERATED_MESH"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 O = a_position ; float fN = abs ( O . z ) ; vec2 fO = u_camera_eye . xy - mod ( u_camera_eye . xy , fN ) ;".split(" ")},{$:"cond",da:[{$:"if",
ga:["WATER_EFFECTS"],ha:{$:"grp",da:[{$:"txt",aa:"O . z = WATER_LEVEL ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"O . z = 0.0 ;".split(" ")}]}}]},{$:"txt",aa:"O . xy += fO ; vec3 cb = O ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",0,{$:"g_expr",ia:2},"FOAM",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["A","=","a_texcoord",";"]}]}}]},{$:"txt",aa:"au aw = av ( a_position , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , u_model_tsr ) ; vec3 cb = aw . O ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["SHORE_PARAMS"],ha:{$:"grp",da:[{$:"txt",aa:"eL = fx ( cb . xy ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["DYNAMIC"],ha:{$:"grp",da:[{$:"txt",aa:"float fP = length ( u_wind ) ; if ( fP == 0.0 ) fP = 1.0 ; float fQ = u_time ; fQ *= fP ;".split(" ")},{$:"cond",da:[{$:"if",ga:["GENERATED_MESH"],ha:{$:"grp",da:[{$:"txt",aa:"float fR = fN ; vec3 fS = cb + vec3 ( fR , 0.0 , 0.0 ) ; vec3 fT = cb + vec3 ( 0.0 , fR , 0.0 ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",
0,{$:"g_expr",ia:2},"FOAM",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["eK","=","cb",";"]}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 fS = cb + vec3 ( 0.05 , 0.0 , 0.0 ) ; vec3 fT = cb + vec3 ( 0.0 , 0.05 , 0.0 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_PARAMS"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 fU = fx ( fS . xy ) ; vec3 fV = fx ( fT . xy ) ; fM ( fS , fQ , fU ) ; fM ( fT , fQ , fV ) ; fM ( cb , fQ , eL ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"fM ( fS , fQ , vec3 ( 0.0 ) ) ; fM ( fT , fQ , vec3 ( 0.0 ) ) ; fM ( cb , fQ , vec3 ( 0.0 ) ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["GENERATED_MESH","WATER_EFFECTS",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( a_position . z < 0.0 ) { cb . z = WATER_LEVEL - 1.0 ; fS . z = cb . z ; fT . z = cb . z ; }".split(" ")}]}}]},{$:"txt",aa:"vec3 ej = normalize ( fS - cb ) ; vec3 V = normalize ( fT - cb ) ; j = normalize ( cross ( ej , V ) ) ; float fW = dot ( j , UP_VECTOR ) ; float aL = clamp ( 0.8 - fW , 0.0 , 1.0 ) ; j = mix ( j , UP_VECTOR , aL ) ;".split(" ")}]}},{$:"elif",ga:["GENERATED_MESH",
{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 S = R ( a_tbn ) ; j = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"j = vec3 ( 0.0 , 0.0 , 1.0 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["DYNAMIC",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["GENERATED_MESH",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 V = T ( S , vec3 ( 1.0 , 0.0 , 0.0 ) ) ;".split(" ")}]}},
{$:"elif",ga:["DYNAMIC",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 V = vec3 ( 1.0 , 0.0 , 0.0 ) ;".split(" ")}]}}]}]}}]},{$:"txt",aa:"k = V ; eJ = cross ( j , k ) ;".split(" ")}]}}]},{$:"txt",aa:"h = cb ; bY = u_camera_eye - cb ; vec4 cc = vec4 ( ap ( u_view_tsr , cb ) , 1.0 ) ; vec4 f = u_proj_matrix * cc ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"REFRACTIVE",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",
aa:"float fX = f . x ; float fY = f . y ; float fZ = f . w ; l . x = ( fX + fZ ) / 2.0 ; l . y = ( fY + fZ ) / 2.0 ; l . z = fZ ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"REFRACTIVE","DISABLE_FOG",{$:"logic_negative_expr",ia:1},{$:"logical_or_expr",ia:4}],ha:{$:"grp",da:[{$:"txt",aa:"m = - cc . z / u_view_max_depth ;".split(" ")}]}}]},{$:"txt",aa:["gl_Position","=","f",";","}"]}]};f["postprocessing/antialiasing.glslf"]={$:"grp",
da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"AA_METHOD",aa:["AA_METHOD_FXAA_LIGHT"]},{$:"var",ba:"AA_QUALITY",aa:["AA_QUALITY_LOW"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"txt",aa:"uniform sampler2D u_color ; uniform vec2 u_texel_size ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},{$:"cond",da:[{$:"if",ga:["AA_METHOD","AA_METHOD_FXAA_LIGHT",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_REDUCE_MIN",
aa:["(","1.0","/","128.0",")"]},{$:"define",ba:"FXAA_REDUCE_MUL",aa:["(","1.0","/","8.0",")"]},{$:"define",ba:"FXAA_SPAN_MAX",aa:["8.0"]},{$:"txt",aa:"vec4 gc ( float x , float y ) { vec2 f_ = A + vec2 ( x , y ) * u_texel_size ; return GLSL_TEXTURE ( u_color , f_ ) ; } vec4 gx ( ) { vec4 gd = gc ( - 1.0 , - 1.0 ) ; vec4 ge = gc ( 1.0 , - 1.0 ) ; vec4 gf = gc ( - 1.0 , 1.0 ) ; vec4 gh = gc ( 1.0 , 1.0 ) ; vec4 gi = gc ( 0.0 , 0.0 ) ; float gk = gj ( gi ) ; float gl = gj ( gd ) ; float gm = gj ( ge ) ; float gn = gj ( gf ) ; float go = gj ( gh ) ; float gp = min ( gk , min ( min ( gl , gm ) , min ( gn , go ) ) ) ; float gq = max ( gk , max ( max ( gl , gm ) , max ( gn , go ) ) ) ; vec2 bH ; bH . x = - ( ( gl + gm ) - ( gn + go ) ) ; bH . y = ( ( gl + gn ) - ( gm + go ) ) ; float gs = max ( ( gl + gm + gn + go ) * ( 0.25 * FXAA_REDUCE_MUL ) , FXAA_REDUCE_MIN ) ; float gt = 1.0 / ( min ( abs ( bH . x ) , abs ( bH . y ) ) + gs ) ; bH = min ( vec2 ( FXAA_SPAN_MAX , FXAA_SPAN_MAX ) , max ( vec2 ( - FXAA_SPAN_MAX , - FXAA_SPAN_MAX ) , bH * gt ) ) * u_texel_size ; vec4 gu = 0.5 * ( GLSL_TEXTURE ( u_color , A + bH * ( 1.0 / 3.0 - 0.5 ) ) + GLSL_TEXTURE ( u_color , A + bH * ( 2.0 / 3.0 - 0.5 ) ) ) ; vec4 gv = gu * 0.5 + 0.25 * ( GLSL_TEXTURE ( u_color , A + bH * - 0.5 ) + GLSL_TEXTURE ( u_color , A + bH * 0.5 ) ) ; float gw = gj ( gv ) ; if ( ( gw < gp ) || ( gw > gq ) ) return gu ; else return gv ; }".split(" ")}]}},
{$:"elif",ga:["AA_METHOD","AA_METHOD_FXAA_QUALITY",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_GREEN_AS_LUMA",aa:["1"]},{$:"include",oa:"fxaa.glslf"},{$:"cond",da:[{$:"if",ga:["AA_QUALITY","AA_QUALITY_HIGH",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PRESET",aa:["39"]},{$:"define",ba:"FXAA_QUALITY_SUBPIX",aa:["1.00"]},{$:"define",ba:"FXAA_QUALITY_EDGE_THRESHOLD",aa:["0.063"]},{$:"define",ba:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",aa:["0.0312"]}]}},{$:"elif",ga:["AA_QUALITY",
"AA_QUALITY_MEDIUM",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PRESET",aa:["20"]},{$:"define",ba:"FXAA_QUALITY_SUBPIX",aa:["0.65"]},{$:"define",ba:"FXAA_QUALITY_EDGE_THRESHOLD",aa:["0.166"]},{$:"define",ba:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",aa:["0.0625"]}]}},{$:"elif",ga:["AA_QUALITY","AA_QUALITY_LOW",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PRESET",aa:["12"]},{$:"define",ba:"FXAA_QUALITY_SUBPIX",aa:["0.50"]},{$:"define",ba:"FXAA_QUALITY_EDGE_THRESHOLD",
aa:["0.166"]},{$:"define",ba:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",aa:["0.0833"]}]}}]}]}}]},{$:"txt",aa:["void","main","(",")","{"]},{$:"cond",da:[{$:"if",ga:["AA_METHOD","AA_METHOD_FXAA_LIGHT",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = gx ( ) ;".split(" ")}]}},{$:"elif",ga:["AA_METHOD","AA_METHOD_FXAA_QUALITY",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 gy = u_texel_size ; GLSL_OUT_FRAG_COLOR = gz ( A , u_color , gy , FXAA_QUALITY_SUBPIX , FXAA_QUALITY_EDGE_THRESHOLD , FXAA_QUALITY_EDGE_THRESHOLD_MIN ) ;".split(" ")}]}}]},
{$:"txt",aa:["}"]}]};f["postprocessing/bloom_combine.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"var",ba:"BLUR_PASS_NUM",aa:["BLUR_PASS_5"]},{$:"txt",aa:["uniform","sampler2D","u_main",";"]},{$:"cond",da:[{$:"if",ga:["BLUR_PASS_NUM","BLUR_PASS_1",{$:"ge_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_bloom_level_0",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["BLUR_PASS_NUM","BLUR_PASS_2",{$:"ge_expr",
ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_bloom_level_1",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["BLUR_PASS_NUM","BLUR_PASS_3",{$:"ge_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_bloom_level_2",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["BLUR_PASS_NUM","BLUR_PASS_4",{$:"ge_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_bloom_level_3",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["BLUR_PASS_NUM","BLUR_PASS_5",{$:"ge_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform",
"sampler2D","u_bloom_level_4",";"]}]}}]},{$:"txt",aa:"GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 gA = GLSL_TEXTURE ( u_main , A ) ; vec4 gB = vec4 ( 0.0 ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["BLUR_PASS_NUM","BLUR_PASS_1",{$:"ge_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"gB += GLSL_TEXTURE ( u_bloom_level_0 , A ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["BLUR_PASS_NUM","BLUR_PASS_2",{$:"ge_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"gB += GLSL_TEXTURE ( u_bloom_level_1 , A ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["BLUR_PASS_NUM","BLUR_PASS_3",{$:"ge_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"gB += GLSL_TEXTURE ( u_bloom_level_2 , A ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["BLUR_PASS_NUM","BLUR_PASS_4",{$:"ge_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"gB += GLSL_TEXTURE ( u_bloom_level_3 , A ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["BLUR_PASS_NUM","BLUR_PASS_5",{$:"ge_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"gB += GLSL_TEXTURE ( u_bloom_level_4 , A ) ;".split(" ")}]}}]},
{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = gA + gB ; }".split(" ")}]};f["postprocessing/coc.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"COC_TYPE",aa:["COC_ALL"]},{$:"txt",aa:["precision","PRECISION","sampler2D",";"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"depth_fetch.glslf"},{$:"txt",aa:"uniform sampler2D u_color ; uniform sampler2D u_depth ;".split(" ")},{$:"cond",da:[{$:"if",ga:["COC_TYPE","COC_COMBINE",
{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_coc_fg",";"]}]}}]},{$:"txt",aa:"uniform float u_view_max_depth ; uniform float u_dof_dist ; uniform float u_dof_front_start ; uniform float u_dof_front_end ; uniform float u_dof_rear_start ; uniform float u_dof_rear_end ; uniform vec2 u_camera_range ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 aQ = GLSL_TEXTURE ( u_color , A ) ; if ( u_dof_dist > 0.0 ) { float et = gC ( u_depth , A , u_camera_range ) ; et *= u_view_max_depth ; float gD = 0.0 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["COC_TYPE","COC_COMBINE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 gE = GLSL_TEXTURE ( u_coc_fg , A ) ; float gF = gE . a ;".split(" ")}]}}]},{$:"txt",aa:"if ( et < u_dof_dist ) gD = ( u_dof_dist - et - u_dof_front_start ) / ( u_dof_front_end - u_dof_front_start ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["COC_TYPE","COC_FOREGROUND",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"else gD = ( et - u_dof_dist - u_dof_rear_start ) / ( u_dof_rear_end - u_dof_rear_start ) ;".split(" ")}]}}]},
{$:"txt",aa:"gD = clamp ( gD , 0.0 , 1.0 ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["COC_TYPE","COC_COMBINE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"gD = max ( gD , gF ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["COC_TYPE","COC_FOREGROUND",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( gD ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ . xyz * gD , gD ) ;".split(" ")}]}}]},{$:"txt",aa:"} else GLSL_OUT_FRAG_COLOR = vec4 ( aQ . xyz , 0.0 ) ; }".split(" ")}]};
f["postprocessing/compositing.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"txt",aa:"uniform sampler2D u_color ; uniform float u_brightness ; uniform float u_contrast ; uniform float u_exposure ; uniform float u_saturation ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 gG = GLSL_TEXTURE ( u_color , A ) ; vec3 aQ = gG . rgb ; if ( u_brightness < 0.0 ) aQ = aQ * ( 1.0 + u_brightness ) ; else aQ = aQ + ( ( 1.0 - aQ ) * u_brightness ) ; aQ = ( aQ - 0.5 ) * ( tan ( ( u_contrast + 1.0 ) * M_PI_4 ) ) + 0.5 ; aQ *= u_exposure ; float dv = gj ( vec4 ( aQ , 0.0 ) ) ; aQ = mix ( vec3 ( dv ) , aQ , u_saturation ) ; GLSL_OUT_FRAG_COLOR = vec4 ( aQ , gG . a ) ; }".split(" ")}]};
f["postprocessing/depth_pack.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"txt",aa:["precision","PRECISION","sampler2D",";"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"pack.glslf"},{$:"include",oa:"depth_fetch.glslf"},{$:"txt",aa:"uniform sampler2D u_depth ; uniform vec2 u_camera_range ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { GLSL_OUT_FRAG_COLOR = eu ( clamp ( gC ( u_depth , A , u_camera_range ) , 0.0 , 0.999999 ) ) ; }".split(" ")}]};
f["postprocessing/dof.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"DOF_TYPE",aa:["DOF_SIMPLE"]},{$:"txt",aa:["precision","PRECISION","sampler2D",";"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"cond",da:[{$:"if",ga:["DOF_TYPE","DOF_BOKEH",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform highp sampler2D u_sharp ; uniform highp sampler2D u_blurred1 ; uniform highp sampler2D u_blurred2 ; uniform float u_dof_dist ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"include",oa:"depth_fetch.glslf"},{$:"txt",aa:"uniform sampler2D u_sharp ; uniform sampler2D u_blurred ; uniform sampler2D u_depth ; uniform float u_view_max_depth ; uniform float u_dof_dist ; uniform float u_dof_front_end ; uniform float u_dof_rear_end ; uniform vec2 u_camera_range ;".split(" ")}]}}]},{$:"txt",aa:"GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 gH = GLSL_TEXTURE ( u_sharp , A ) ; if ( u_dof_dist > 0.0 ) {".split(" ")},{$:"cond",
da:[{$:"if",ga:["DOF_TYPE","DOF_BOKEH",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float gD ; vec4 gI = GLSL_TEXTURE ( u_blurred1 , A ) ; vec4 gJ = GLSL_TEXTURE ( u_blurred2 , A ) ; vec4 gK = min ( gI . rgba , gJ . rgba ) ; gD = gK . a ; if ( gD > 0.0 ) { gK = vec4 ( gK . rgb / gD , gH . a ) ; GLSL_OUT_FRAG_COLOR = mix ( gH , gK , min ( gD * 5.0 , 1.0 ) ) ; } else GLSL_OUT_FRAG_COLOR = gH ;".split(" ")}]}},{$:"elif",ga:["DOF_TYPE","DOF_SIMPLE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",
aa:"float et = gC ( u_depth , A , u_camera_range ) ; et *= u_view_max_depth ; float gL ; if ( et < u_dof_dist ) gL = ( u_dof_dist - et ) / u_dof_front_end ; else gL = ( et - u_dof_dist ) / u_dof_rear_end ; gL = clamp ( gL , 0.0 , 1.0 ) ; vec4 gM = GLSL_TEXTURE ( u_blurred , A ) ; GLSL_OUT_FRAG_COLOR = mix ( gH , gM , gL ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT_FRAG_COLOR","=","gH",";"]}]}}]},{$:"txt",aa:"} else GLSL_OUT_FRAG_COLOR = gH ; }".split(" ")}]};f["postprocessing/glow.glslf"]=
{$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"txt",aa:"uniform sampler2D u_src_color ; uniform sampler2D u_glow_mask_small ; uniform sampler2D u_glow_mask_large ; uniform float u_glow_mask_small_coeff ; uniform float u_glow_mask_large_coeff ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 gN = GLSL_TEXTURE ( u_src_color , A ) ; vec4 gO = GLSL_TEXTURE ( u_glow_mask_small , A ) ; vec4 gP = GLSL_TEXTURE ( u_glow_mask_large , A ) ; GLSL_OUT_FRAG_COLOR = gN ; if ( gP . a != 0.0 ) { float gQ = u_glow_mask_large_coeff * gP . a ; gQ = clamp ( gQ , 0.0 , 1.0 ) ; GLSL_OUT_FRAG_COLOR . rgb = mix ( GLSL_OUT_FRAG_COLOR . rgb , gP . rgb / gP . a , gQ ) ; GLSL_OUT_FRAG_COLOR . a = mix ( GLSL_OUT_FRAG_COLOR . a , 1.0 , gQ ) ; } if ( gO . a != 0.0 ) { float gR = u_glow_mask_small_coeff * gO . a ; gR = clamp ( gR , 0.0 , 1.0 ) ; GLSL_OUT_FRAG_COLOR . rgb = mix ( GLSL_OUT_FRAG_COLOR . rgb , gO . rgb / gO . a , gR ) ; GLSL_OUT_FRAG_COLOR . a = mix ( GLSL_OUT_FRAG_COLOR . a , 1.0 , gR ) ; } }".split(" ")}]};
f["postprocessing/god_rays.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"DEPTH_RGBA",aa:["0"]},{$:"var",ba:"WATER_EFFECTS",aa:["0"]},{$:"var",ba:"STEPS_PER_PASS",aa:["10.0"]},{$:"txt",aa:["precision","PRECISION","sampler2D",";"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"depth_fetch.glslf"},{$:"include",oa:"procedural.glslf"},{$:"include",oa:"pack.glslf"},{$:"txt",aa:"uniform float u_time ; uniform float u_radial_blur_step ; uniform sampler2D u_input ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["DEPTH_RGBA"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec2","u_camera_range",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DEPTH_RGBA","WATER_EFFECTS",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_IN float gS ; GLSL_IN vec2 gT ;".split(" ")}]}}]},{$:"txt",aa:"GLSL_IN vec2 A ; GLSL_IN vec4 gU ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec2 cX = ( gU . xy - A ) ; float aM = length ( cX ) ; vec2 gV = u_radial_blur_step * cX / aM ; float gW = aM / u_radial_blur_step ; gV *= min ( gW , STEPS_PER_PASS ) / STEPS_PER_PASS ; gW = max ( gW , STEPS_PER_PASS ) ; vec2 gX = A ; float gY = 0.0 ; const int gZ = int ( STEPS_PER_PASS ) ; int g_ = int ( gW + 0.5 ) ; for ( int cq = 0 ; cq < gZ ; cq += 1 ) { if ( cq <= g_ ) {".split(" ")},
{$:"cond",da:[{$:"if",ga:["DEPTH_RGBA"],ha:{$:"grp",da:[{$:"txt",aa:"float et = gC ( u_input , gX , u_camera_range ) ; gY += max ( ( 1.0 - pow ( aM , 0.3 ) ) * step ( 0.9 , et ) , 0.0 ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec4 ha = GLSL_TEXTURE ( u_input , gX ) ; gY += cV ( ha ) ;".split(" ")}]}}]},{$:"txt",aa:"} gX += gV ; }".split(" ")},{$:"cond",da:[{$:"if",ga:["DEPTH_RGBA","WATER_EFFECTS",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 ce = A + gT ; float hb = fK ( vec2 ( 2.5 * ( ce . x ) , 2.5 * ( ce . y ) + 1.0 * u_time ) ) . x + 0.75 * fK ( vec2 ( 5.0 * ( ce . x ) - 0.66 * u_time , 5.0 * ( ce . y ) + 0.66 * u_time ) ) . x + 0.5 * fz ( vec2 ( 7.5 * ( ce . x ) + 0.33 * u_time , 7.5 * ( ce . y ) - 0.33 * u_time ) ) ; hb *= clamp ( 1.2 - sqrt ( 0.2 * aM ) , 0.0 , 1.0 ) * gS ; gY = max ( hb , gY ) ;".split(" ")}]}}]},
{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = eu ( gY / STEPS_PER_PASS ) ; }".split(" ")}]};f["postprocessing/god_rays.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"DEPTH_RGBA",aa:["0"]},{$:"var",ba:"WATER_EFFECTS",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"include",oa:"math.glslv"},{$:"txt",aa:"uniform mat4 u_view_proj_matrix ; uniform vec3 u_sun_direction ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DEPTH_RGBA","WATER_EFFECTS",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_camera_quat ; uniform float u_cam_water_depth ;".split(" ")}]}}]},
{$:"txt",aa:["GLSL_IN","vec2","a_bb_vertex",";"]},{$:"cond",da:[{$:"if",ga:["DEPTH_RGBA","WATER_EFFECTS",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT float gS ; GLSL_OUT vec2 gT ;".split(" ")}]}}]},{$:"txt",aa:"GLSL_OUT vec2 A ; GLSL_OUT vec4 gU ; void main ( ) { A = a_bb_vertex ; vec3 bH = normalize ( u_sun_direction ) ; gU = u_view_proj_matrix * vec4 ( bH , 0.0 ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DEPTH_RGBA","WATER_EFFECTS",{$:"logical_and_expr",ia:2}],ha:{$:"grp",
da:[{$:"txt",aa:"if ( u_cam_water_depth < 0.0 ) { gS = 1.0 ; vec3 hc = vec3 ( 0.0 , 1.0 , 0.0 ) ; vec3 hd = T ( u_camera_quat , hc ) ; hd = normalize ( hd ) ; float he = dot ( hd , vec3 ( 0.0 , 1.0 , 0.0 ) ) ; float hf = atan ( hd . x , hd . z ) ; gT = vec2 ( - hf , acos ( he ) ) ; } else { gS = 0.0 ; }".split(" ")}]}}]},{$:"txt",aa:"gU . xy = 0.5 * ( gU . xy / gU . w + 1.0 ) ; gU += 99999.0 * step ( gU . z , 0.0 ) ; gl_Position = vec4 ( 2.0 * a_bb_vertex . xy - 1.0 , 0.0 , 1.0 ) ; }".split(" ")}]};
f["postprocessing/god_rays_combine.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"SAFARI_CANVAS_ALPHA_HACK",aa:["0"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"include",oa:"pack.glslf"},{$:"txt",aa:"uniform sampler2D u_main ; uniform sampler2D u_god_rays ; uniform float u_god_rays_intensity ; uniform vec3 u_sun_intensity ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 hg = GLSL_TEXTURE ( u_main , A ) ; vec3 hh = clamp ( u_sun_intensity , 0.4 , 0.8 ) ; bG ( hg . rgb ) ; float hi = cV ( GLSL_TEXTURE ( u_god_rays , A ) ) ; vec3 hj = hg . rgb + u_god_rays_intensity * vec3 ( hi ) * hh ; aW ( hj ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["SAFARI_CANVAS_ALPHA_HACK"],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( hj , max ( 0.01 , hg . a ) ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( hj , hg . a ) ;".split(" ")}]}}]},{$:"txt",aa:["}"]}]};f["postprocessing/luminance.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"txt",aa:"uniform sampler2D u_input ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 gA = GLSL_TEXTURE ( u_input , A ) ; float hk = dot ( gA . rgb , vec3 ( 0.2126 , 0.7152 , 0.0722 ) ) ; GLSL_OUT_FRAG_COLOR = vec4 ( vec3 ( hk ) , 1.0 ) ; }".split(" ")}]};
f["postprocessing/luminance_av.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"txt",aa:"uniform sampler2D u_input ; uniform float u_mipmap_1x1 ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { float hl = max ( GLSL_TEXTURE ( u_input , A , u_mipmap_1x1 ) . r , 0.01 ) ; GLSL_OUT_FRAG_COLOR = vec4 ( vec3 ( hl ) , 1.0 ) ; }".split(" ")}]};f["postprocessing/luminance_truncated.glslf"]={$:"grp",da:[{$:"version",
aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"var",ba:"ADAPTIVE_BLOOM",aa:["0"]},{$:"txt",aa:"uniform sampler2D u_main ; uniform sampler2D u_luminance ; uniform sampler2D u_average_lum ; uniform float u_bloom_edge_lum ; uniform float u_bloom_key ;".split(" ")},{$:"cond",da:[{$:"if",ga:["ADAPTIVE_BLOOM",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_average_lum_val",";"]}]}}]},{$:"txt",aa:"GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) {".split(" ")},
{$:"cond",da:[{$:"if",ga:["ADAPTIVE_BLOOM"],ha:{$:"grp",da:[{$:"txt",aa:"float hl = GLSL_TEXTURE ( u_average_lum , vec2 ( 0.5 ) ) . r ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["float","hl","=","u_average_lum_val",";"]}]}}]},{$:"txt",aa:"float hm = GLSL_TEXTURE ( u_luminance , A ) . r ; vec4 aQ = GLSL_TEXTURE ( u_main , A ) ; float hn = hm / hl ; float ho = u_bloom_edge_lum ; GLSL_OUT_FRAG_COLOR = aQ * u_bloom_key * smoothstep ( ho , ho + 1.2 , hn ) ; }".split(" ")}]};f["postprocessing/motion_blur.glslf"]=
{$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"txt",aa:"uniform sampler2D u_mb_tex_curr ; uniform sampler2D u_mb_tex_accum ; uniform float u_motion_blur_exp ; uniform float u_motion_blur_decay_threshold ; float hp = 0.0042 ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 hq = GLSL_TEXTURE ( u_mb_tex_curr , A ) ; vec4 hr = GLSL_TEXTURE ( u_mb_tex_accum , A ) ; if ( length ( hq - hr ) > u_motion_blur_decay_threshold ) { vec4 hs = ( 1.0 - u_motion_blur_exp ) * hq + u_motion_blur_exp * hr ; vec4 ht = hs - hr ; vec4 hu = hq - hr ; vec4 cX = min ( max ( abs ( ht ) , vec4 ( hp ) ) , abs ( hu ) ) * sign ( ht ) ; GLSL_OUT_FRAG_COLOR = hr + cX ; } else { GLSL_OUT_FRAG_COLOR = hq ; } }".split(" ")}]};
f["postprocessing/outline.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"txt",aa:"uniform sampler2D u_outline_src ; uniform sampler2D u_outline_mask ; uniform sampler2D u_outline_mask_blurred ; uniform vec3 u_outline_color ; uniform float u_draw_outline ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 hv = GLSL_TEXTURE ( u_outline_src , A ) ; GLSL_OUT_FRAG_COLOR = hv ; if ( u_draw_outline != 0.0 ) { vec4 hw = GLSL_TEXTURE ( u_outline_mask , A ) ; vec4 hx = GLSL_TEXTURE ( u_outline_mask_blurred , A ) ; float hy = hx . a - hw . a ; if ( hy != 0.0 ) { float hz = smoothstep ( 0.0 , 1.0 , hx . a ) ; if ( hw . a == 0.0 ) { vec3 hA = u_outline_color ; aW ( hA ) ; vec4 hB = vec4 ( clamp ( hA , 0.0 , 1.0 ) , 1.0 ) ; GLSL_OUT_FRAG_COLOR = mix ( hv , hB , hz ) ; } } } }".split(" ")}]};
f["postprocessing/performance.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"txt",aa:"uniform sampler2D u_color ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 aQ = vec4 ( 0.0 ) ; for ( int cq = 0 ; cq < 10 ; cq ++ ) { vec2 hC = vec2 ( fract ( A * vec2 ( cq ) * vec2 ( 1.431 , 3.921 ) ) ) ; aQ += 0.01 * GLSL_TEXTURE ( u_color , hC ) ; } GLSL_OUT_FRAG_COLOR = aQ ; }".split(" ")}]};f["postprocessing/postprocessing.glslf"]=
{$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"POST_EFFECT",aa:["POST_EFFECT_NONE"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"txt",aa:"uniform vec2 u_texel_size ; uniform sampler2D u_color ;".split(" ")},{$:"cond",da:[{$:"if",ga:["POST_EFFECT","FLIP_CUBEMAP_COORDS",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform int u_tex_number ; uniform vec2 u_delta ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["POST_EFFECT","POST_EFFECT_DOF_BLUR",{$:"equal_expr",
ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_dof_bokeh_intensity",";"]}]}}]},{$:"txt",aa:"GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["POST_EFFECT","POST_EFFECT_NONE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , A ) ;".split(" ")}]}},{$:"elif",ga:["POST_EFFECT","POST_EFFECT_GRAYSCALE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 dx = GLSL_TEXTURE ( u_color , A ) ; GLSL_OUT_FRAG_COLOR . rgb = vec3 ( ( dx . r + dx . g + dx . b ) / 3.0 ) ; GLSL_OUT_FRAG_COLOR . a = 1.0 ;".split(" ")}]}},
{$:"elif",ga:["POST_EFFECT","POST_EFFECT_BLUR",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 fM = vec2 ( 0.0 , 0.0 ) ; vec2 cX = u_texel_size ; vec4 aQ ; aQ = GLSL_TEXTURE ( u_color , A ) ; GLSL_OUT_FRAG_COLOR = aQ * 0.2270270270 ; fM += cX ; aQ = GLSL_TEXTURE ( u_color , A + fM ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.1945945946 ; aQ = GLSL_TEXTURE ( u_color , A - fM ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.1945945946 ; fM += cX ; aQ = GLSL_TEXTURE ( u_color , A + fM ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.1216216216 ; aQ = GLSL_TEXTURE ( u_color , A - fM ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.1216216216 ; fM += cX ; aQ = GLSL_TEXTURE ( u_color , A + fM ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.0540540541 ; aQ = GLSL_TEXTURE ( u_color , A - fM ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.0540540541 ; fM += cX ; aQ = GLSL_TEXTURE ( u_color , A + fM ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.0162162162 ; aQ = GLSL_TEXTURE ( u_color , A - fM ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.0162162162 ;".split(" ")}]}},
{$:"elif",ga:["POST_EFFECT","POST_EFFECT_GLOW_BLUR",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 fM = vec2 ( 0.0 , 0.0 ) ; vec2 cX = u_texel_size ; vec4 aQ ; aQ = GLSL_TEXTURE ( u_color , A ) ; GLSL_OUT_FRAG_COLOR = aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.152507 ; fM += cX ; aQ = GLSL_TEXTURE ( u_color , A + fM ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.141763 ; aQ = GLSL_TEXTURE ( u_color , A - fM ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.141763 ; fM += cX ; aQ = GLSL_TEXTURE ( u_color , A + fM ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.113861 ; aQ = GLSL_TEXTURE ( u_color , A - fM ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.113861 ; fM += cX ; aQ = GLSL_TEXTURE ( u_color , A + fM ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.079019 ; aQ = GLSL_TEXTURE ( u_color , A - fM ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.079019 ; fM += cX ; aQ = GLSL_TEXTURE ( u_color , A + fM ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.047383 ; aQ = GLSL_TEXTURE ( u_color , A - fM ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.047383 ; fM += cX ; aQ = GLSL_TEXTURE ( u_color , A + fM ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.024549 ; aQ = GLSL_TEXTURE ( u_color , A - fM ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.024549 ; fM += cX ; aQ = GLSL_TEXTURE ( u_color , A + fM ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.01099 ; aQ = GLSL_TEXTURE ( u_color , A - fM ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.01099 ; fM += cX ; aQ = GLSL_TEXTURE ( u_color , A + fM ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.00425 ; aQ = GLSL_TEXTURE ( u_color , A - fM ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.00425 ; fM += cX ; aQ = GLSL_TEXTURE ( u_color , A + fM ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.00142 ; aQ = GLSL_TEXTURE ( u_color , A - fM ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.00142 ; GLSL_OUT_FRAG_COLOR = clamp ( GLSL_OUT_FRAG_COLOR , 0.0 , 1.0 ) ;".split(" ")}]}},
{$:"elif",ga:["POST_EFFECT","POST_EFFECT_DOF_BLUR",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 fM = vec2 ( 0.0 , 0.0 ) ; vec2 cX = u_texel_size ; vec4 aQ ; vec4 hD ; vec4 hE ; float gD ; float hF = u_dof_bokeh_intensity ; aQ = GLSL_TEXTURE ( u_color , A ) ; hD = aQ ; hE = aQ ; gD = aQ . a ; cX = gD * cX ; for ( int cq = 0 ; cq < 12 ; cq += 2 ) { fM += cX ; aQ = GLSL_TEXTURE ( u_color , A + fM ) ; hD += aQ ; hE = max ( hE , aQ ) ; aQ = GLSL_TEXTURE ( u_color , A - fM ) ; hD += aQ ; hE = max ( hE , aQ ) ; } hD /= 13.0 ; GLSL_OUT_FRAG_COLOR = mix ( hD , hE , hF ) ;".split(" ")}]}},
{$:"elif",ga:["POST_EFFECT","POST_EFFECT_ALPHA_BLUR",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 fM = vec2 ( 0.0 , 0.0 ) ; vec2 cX = u_texel_size ; vec4 aQ ; vec4 hD ; vec4 hE ; aQ = GLSL_TEXTURE ( u_color , A ) ; hE = max ( hE , aQ ) ; hD = aQ ; hD . a = aQ . a * 0.2270270270 ; fM += cX ; aQ = GLSL_TEXTURE ( u_color , A + fM ) ; hE . a = max ( hE . a , aQ . a ) ; hD . a += aQ . a * 0.1945945946 ; aQ = GLSL_TEXTURE ( u_color , A - fM ) ; hE . a = max ( hE . a , aQ . a ) ; hD . a += aQ . a * 0.1945945946 ; fM += cX ; aQ = GLSL_TEXTURE ( u_color , A + fM ) ; hE . a = max ( hE . a , aQ . a ) ; hD . a += aQ . a * 0.1216216216 ; aQ = GLSL_TEXTURE ( u_color , A - fM ) ; hE . a = max ( hE . a , aQ . a ) ; hD . a += aQ . a * 0.1216216216 ; fM += cX ; aQ = GLSL_TEXTURE ( u_color , A + fM ) ; hE . a = max ( hE . a , aQ . a ) ; hD . a += aQ . a * 0.0540540541 ; aQ = GLSL_TEXTURE ( u_color , A - fM ) ; hE . a = max ( hE . a , aQ . a ) ; hD . a += aQ . a * 0.0540540541 ; fM += cX ; aQ = GLSL_TEXTURE ( u_color , A + fM ) ; hE . a = max ( hE . a , aQ . a ) ; hD . a += aQ . a * 0.0162162162 ; aQ = GLSL_TEXTURE ( u_color , A - fM ) ; hE . a = max ( hE . a , aQ . a ) ; hD . a += aQ . a * 0.0162162162 ; GLSL_OUT_FRAG_COLOR = mix ( hD , hE , 0.5 ) ;".split(" ")}]}},
{$:"elif",ga:["POST_EFFECT","POST_EFFECT_EXTEND",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 cX = u_texel_size ; vec4 aQ = GLSL_TEXTURE ( u_color , A ) ; GLSL_OUT_FRAG_COLOR = aQ ; if ( aQ . a == 0.0 ) { aQ = GLSL_TEXTURE ( u_color , A + cX ) ; if ( aQ . a > 0.0 ) GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 , 1.0 , 1.0 , aQ . a ) ; else { aQ = GLSL_TEXTURE ( u_color , A - cX ) ; if ( aQ . a > 0.0 ) GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 , 1.0 , 1.0 , aQ . a ) ; } }".split(" ")}]}},{$:"elif",ga:["POST_EFFECT",
"FLIP_CUBEMAP_COORDS",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float hG = u_delta [ 0 ] ; float hH = u_delta [ 1 ] ; float hI = 1.0 / 3.0 ; float hJ = 0.5 ; vec2 hK = vec2 ( hI , hJ ) ; if ( u_tex_number == 0 ) { vec2 ce = mat2 ( 0.0 , - 1.0 , 1.0 , 0.0 ) * A * hK + vec2 ( 2.0 * hI , hJ ) ; ce [ 0 ] = max ( ce [ 0 ] , 2.0 * hI + hG ) ; ce [ 1 ] = max ( ce [ 1 ] , hH ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( ce [ 0 ] , hJ - ce [ 1 ] ) ) ; } else if ( u_tex_number == 1 ) { vec2 ce = mat2 ( 0.0 , - 1.0 , 1.0 , 0.0 ) * A * hK + vec2 ( 0.0 , hJ ) ; ce [ 0 ] = max ( ce [ 0 ] , hG ) ; ce [ 1 ] = min ( ce [ 1 ] , hJ - hH ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( hI - ce [ 0 ] , ce [ 1 ] ) ) ; } else if ( u_tex_number == 2 ) { vec2 ce = A * hK + vec2 ( 2.0 * hI , hJ ) ; ce [ 0 ] = max ( ce [ 0 ] , 2.0 * hI + hG ) ; ce [ 1 ] = min ( ce [ 1 ] , 1.0 - hH ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( ce [ 0 ] , 1.5 - ce [ 1 ] ) ) ; } else if ( u_tex_number == 3 ) { vec2 ce = A * hK + vec2 ( hI , 0.0 ) ; ce [ 0 ] = max ( ce [ 0 ] , hI + hG ) ; ce [ 0 ] = min ( ce [ 0 ] , 2.0 * hI - hG ) ; ce [ 1 ] = min ( ce [ 1 ] , hJ - hH ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( 1.0 - ce [ 0 ] , ce [ 1 ] ) ) ; } else if ( u_tex_number == 4 ) { vec2 ce = A * hK + vec2 ( hI , hJ ) ; ce [ 0 ] = max ( ce [ 0 ] , hI + hG ) ; ce [ 0 ] = min ( ce [ 0 ] , 2.0 * hI - hG ) ; ce [ 1 ] = min ( ce [ 1 ] , 1.0 - hH ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( ce [ 0 ] , 3.0 * hJ - ce [ 1 ] ) ) ; } else { vec2 ce = A * hK + vec2 ( 0.0 , hJ ) ; ce [ 0 ] = max ( ce [ 0 ] , hG ) ; ce [ 1 ] = min ( ce [ 1 ] , 1.0 - hH ) ; ce [ 1 ] = max ( ce [ 1 ] , hJ + hH ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( hI - ce [ 0 ] , ce [ 1 ] ) ) ; }".split(" ")}]}}]},
{$:"txt",aa:["}"]}]};f["postprocessing/postprocessing.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"std.glsl"},{$:"txt",aa:"GLSL_IN vec2 a_position ; GLSL_OUT vec2 A ; void main ( ) { A = 2.0 * a_position ; gl_Position = vec4 ( 4.0 * ( a_position . xy - 0.25 ) , 0.0 , 1.0 ) ; }".split(" ")}]};f["postprocessing/precompute_brdf.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"var",ba:"PRECISION",
aa:["highp"]},{$:"txt",aa:"precision PRECISION sampler2D ; precision PRECISION float ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; float eb ( int cw , int dY ) { float dZ = 1.0 / float ( dY ) ; float d_ = 1.0 ; float ea = 0.0 ; for ( int cq = 0 ; cq < 32 ; ++ cq ) { if ( cw > 0 ) { d_ = mod ( float ( cw ) , 2.0 ) ; ea += d_ * dZ ; dZ = dZ / 2.0 ; cw = int ( float ( cw ) / 2.0 ) ; } } return ea ; } vec2 ed ( int cq , int ec ) { return vec2 ( float ( cq ) / float ( ec ) , eb ( cq , 2 ) ) ; } vec3 ek ( vec2 ee , vec3 ec , float ef ) { float a = ef * ef ; float bC = 2.0 * M_PI * ee . x ; float eg = sqrt ( ( 1.0 - ee . y ) / ( 1.0 + ( a * a - 1.0 ) * ee . y ) ) ; float eh = sqrt ( 1.0 - eg * eg ) ; vec3 ei ; ei . x = cos ( bC ) * eh ; ei . y = sin ( bC ) * eh ; ei . z = eg ; vec3 by = abs ( ec . z ) < 0.999 ? vec3 ( 0.0 , 0.0 , 1.0 ) : vec3 ( 1.0 , 0.0 , 0.0 ) ; vec3 V = normalize ( cross ( by , ec ) ) ; vec3 ej = cross ( ec , V ) ; vec3 bF = V * ei . x + ej * ei . y + ec * ei . z ; return normalize ( bF ) ; } float hO ( float hL , float ef ) { float a = ef ; float hM = ( a * a ) / 2.0 ; float hN = hL ; float d_ = hL * ( 1.0 - hM ) + hM ; return hN / d_ ; } float hR ( vec3 ec , vec3 en , vec3 eq , float ef ) { float hL = max ( dot ( ec , en ) , 0.0 ) ; float er = max ( dot ( ec , eq ) , 0.0 ) ; float hP = hO ( hL , ef ) ; float hQ = hO ( er , ef ) ; return hQ * hP ; } vec2 hY ( float hL , float ef ) { vec3 en ; en . x = sqrt ( 1.0 - hL * hL ) ; en . y = 0.0 ; en . z = hL ; float cG = 0.0 ; float hS = 0.0 ; vec3 ec = vec3 ( 0.0 , 0.0 , 1.0 ) ; const int eo = 1024 ; for ( int cq = 0 ; cq < eo ; ++ cq ) { vec2 ee = ed ( cq , eo ) ; vec3 ei = ek ( ee , ec , ef ) ; vec3 eq = normalize ( 2.0 * dot ( en , ei ) * ei - en ) ; float er = max ( eq . z , 0.0 ) ; float hT = max ( ei . z , 0.0 ) ; float hU = max ( dot ( en , ei ) , 0.0 ) ; if ( er > 0.0 ) { float hV = hR ( ec , en , eq , ef ) ; float hW = ( hV * hU ) / ( hT * hL ) ; float hX = pow ( 1.0 - hU , 5.0 ) ; cG += ( 1.0 - hX ) * hW ; hS += hX * hW ; } } cG /= float ( eo ) ; hS /= float ( eo ) ; return vec2 ( cG , hS ) ; } void main ( ) { vec2 hZ = hY ( A . x , A . y ) ; GLSL_OUT_FRAG_COLOR = vec4 ( hZ , 0.0 , 1.0 ) ; }".split(" ")}]};
f["postprocessing/smaa.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"SMAA_PASS",aa:["SMAA_RESOLVE"]},{$:"var",ba:"SMAA_REPROJECTION",aa:["0"]},{$:"var",ba:"SMAA_PREDICATION",aa:["0"]},{$:"var",ba:"SMAA_DISABLE_CORNER_DETECTION",aa:["0"]},{$:"var",ba:"AA_METHOD",aa:["AA_METHOD_SMAA_ULTRA"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"pack.glslf"},{$:"txt",aa:["uniform","sampler2D","u_color",";"]},{$:"cond",da:[{$:"if",ga:["SMAA_PASS",
"SMAA_RESOLVE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_color_prev",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_blend",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SMAA_REPROJECTION"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_velocity_tex",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_EDGE_DETECTION",{$:"equal_expr",ia:2},"SMAA_PREDICATION",
{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_predication_tex",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform sampler2D u_search_tex ; uniform sampler2D u_area_tex ; uniform vec4 u_subsample_indices ;".split(" ")}]}}]},{$:"txt",aa:"uniform vec2 u_texel_size ; GLSL_IN vec2 A ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{$:"equal_expr",
ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","h_",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"GLSL_IN vec4 ia ; GLSL_IN vec4 ib ; GLSL_IN vec4 ic ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec2","id",";"]}]}}]},{$:"txt",aa:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{$:"cond",da:[{$:"if",ga:["AA_METHOD","AA_METHOD_SMAA_LOW",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",
ba:"SMAA_THRESHOLD",aa:["0.15"]},{$:"define",ba:"SMAA_DISABLE_DIAG_DETECTION",aa:["1"]},{$:"define",ba:"SMAA_DISABLE_CORNER_DETECTION",aa:["1"]}]}},{$:"elif",ga:["AA_METHOD","AA_METHOD_SMAA_MEDIUM",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"SMAA_THRESHOLD",aa:["0.1"]},{$:"define",ba:"SMAA_DISABLE_DIAG_DETECTION",aa:["1"]},{$:"define",ba:"SMAA_DISABLE_CORNER_DETECTION",aa:["1"]}]}},{$:"elif",ga:["AA_METHOD","AA_METHOD_SMAA_HIGH",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"SMAA_THRESHOLD",
aa:["0.1"]},{$:"define",ba:"SMAA_DISABLE_DIAG_DETECTION",aa:["0"]},{$:"define",ba:"SMAA_MAX_SEARCH_STEPS_DIAG",aa:["8"]},{$:"define",ba:"SMAA_CORNER_ROUNDING",aa:["25"]}]}},{$:"elif",ga:["AA_METHOD","AA_METHOD_SMAA_ULTRA",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"SMAA_THRESHOLD",aa:["0.05"]},{$:"define",ba:"SMAA_DISABLE_DIAG_DETECTION",aa:["0"]},{$:"define",ba:"SMAA_MAX_SEARCH_STEPS_DIAG",aa:["16"]},{$:"define",ba:"SMAA_CORNER_ROUNDING",aa:["25"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"SMAA_THRESHOLD",
ha:{$:"grp",da:[{$:"define",ba:"SMAA_THRESHOLD",aa:["0.1"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"SMAA_DEPTH_THRESHOLD",ha:{$:"grp",da:[{$:"define",ba:"SMAA_DEPTH_THRESHOLD",aa:["(","0.1","*","SMAA_THRESHOLD",")"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"SMAA_MAX_SEARCH_STEPS_DIAG",ha:{$:"grp",da:[{$:"define",ba:"SMAA_MAX_SEARCH_STEPS_DIAG",aa:["8"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"SMAA_CORNER_ROUNDING",ha:{$:"grp",da:[{$:"define",ba:"SMAA_CORNER_ROUNDING",aa:["25"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",
ha:{$:"grp",da:[{$:"define",ba:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",aa:["2.0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"SMAA_PREDICATION",ha:{$:"grp",da:[{$:"define",ba:"SMAA_PREDICATION",aa:["0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"SMAA_PREDICATION_THRESHOLD",ha:{$:"grp",da:[{$:"define",ba:"SMAA_PREDICATION_THRESHOLD",aa:["0.01"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"SMAA_PREDICATION_SCALE",ha:{$:"grp",da:[{$:"define",ba:"SMAA_PREDICATION_SCALE",aa:["2.0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"SMAA_PREDICATION_STRENGTH",
ha:{$:"grp",da:[{$:"define",ba:"SMAA_PREDICATION_STRENGTH",aa:["0.4"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"SMAA_REPROJECTION",ha:{$:"grp",da:[{$:"define",ba:"SMAA_REPROJECTION",aa:["0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"SMAA_REPROJECTION_WEIGHT_SCALE",ha:{$:"grp",da:[{$:"define",ba:"SMAA_REPROJECTION_WEIGHT_SCALE",aa:["30.0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"SMAA_MAX_SEARCH_STEPS",ha:{$:"grp",da:[{$:"define",ba:"SMAA_MAX_SEARCH_STEPS",aa:["16"]}]}}]},{$:"define",ba:"SMAA_AREATEX_MAX_DISTANCE",
aa:["16"]},{$:"define",ba:"SMAA_AREATEX_MAX_DISTANCE_DIAG",aa:["20"]},{$:"define",ba:"SMAA_AREATEX_PIXEL_SIZE",aa:"( 1.0 / vec2 ( 160.0 , 560.0 ) )".split(" ")},{$:"define",ba:"SMAA_AREATEX_SUBTEX_SIZE",aa:["(","1.0","/","7.0",")"]},{$:"define",ba:"SMAA_SEARCHTEX_SIZE",aa:"vec2 ( 66.0 , 33.0 )".split(" ")},{$:"define",ba:"SMAA_SEARCHTEX_PACKED_SIZE",aa:"vec2 ( 64.0 , 16.0 )".split(" ")},{$:"define",ba:"SMAA_CORNER_ROUNDING_NORM",aa:"( float ( SMAA_CORNER_ROUNDING ) / 100.0 )".split(" ")},{$:"cond",
da:[{$:"if",ga:["SMAA_PASS","SMAA_EDGE_DETECTION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 ii ( vec2 ce , sampler2D ie ) { float p = GLSL_TEXTURE ( ie , ce ) . r ; float ig = GLSL_TEXTURE ( ie , ia . xy ) . r ; float ih = GLSL_TEXTURE ( ie , ia . zw ) . r ; return vec3 ( p , ig , ih ) ; }".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_EDGE_DETECTION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 im ( vec2 ce , sampler2D ij ) { vec3 ik = ii ( ce , ij ) ; vec2 cX = abs ( ik . xx - ik . yz ) ; vec2 il = step ( SMAA_PREDICATION_THRESHOLD , cX ) ; return SMAA_PREDICATION_SCALE * SMAA_THRESHOLD * ( 1.0 - SMAA_PREDICATION_STRENGTH * il ) ; }".split(" ")}]}}]},
{$:"txt",aa:"void ir ( bvec2 io , inout vec2 ip , vec2 iq ) { if ( io . x ) ip . x = iq . x ; if ( io . y ) ip . y = iq . y ; } void ir ( bvec4 io , inout vec4 ip , vec4 iq ) { ir ( io . xy , ip . xy , iq . xy ) ; ir ( io . zw , ip . zw , iq . zw ) ; } vec2 is ( vec2 x ) { return sign ( x ) * floor ( abs ( x ) + .5 ) ; } vec4 is ( vec4 x ) { return sign ( x ) * floor ( abs ( x ) + .5 ) ; }".split(" ")},{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_EDGE_DETECTION",{$:"equal_expr",ia:2}],ha:{$:"grp",
da:[{$:"txt",aa:"vec2 iE ( vec2 ce , sampler2D it".split(" ")},{$:"cond",da:[{$:"if",ga:["SMAA_PREDICATION"],ha:{$:"grp",da:[{$:"txt",aa:[",","sampler2D","ij"]}]}}]},{$:"txt",aa:[")","{"]},{$:"cond",da:[{$:"if",ga:["SMAA_PREDICATION"],ha:{$:"grp",da:[{$:"txt",aa:"vec2 iu = im ( ce , ij ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec2 iu = vec2 ( SMAA_THRESHOLD , SMAA_THRESHOLD ) ;".split(" ")}]}}]},{$:"txt",aa:"vec3 iv = vec3 ( 0.2126 , 0.7152 , 0.0722 ) ; float eq = dot ( GLSL_TEXTURE ( it , ce ) . rgb , iv ) ; float iw = dot ( GLSL_TEXTURE ( it , ia . xy ) . rgb , iv ) ; float ix = dot ( GLSL_TEXTURE ( it , ia . zw ) . rgb , iv ) ; vec4 cX ; cX . xy = abs ( eq - vec2 ( iw , ix ) ) ; vec2 il = step ( iu , cX . xy ) ; if ( dot ( il , vec2 ( 1.0 , 1.0 ) ) == 0.0 ) discard ; float iy = dot ( GLSL_TEXTURE ( it , ib . xy ) . rgb , iv ) ; float iz = dot ( GLSL_TEXTURE ( it , ib . zw ) . rgb , iv ) ; cX . zw = abs ( eq - vec2 ( iy , iz ) ) ; vec2 iA = max ( cX . xy , cX . zw ) ; float iB = dot ( GLSL_TEXTURE ( it , ic . xy ) . rgb , iv ) ; float iC = dot ( GLSL_TEXTURE ( it , ic . zw ) . rgb , iv ) ; cX . zw = abs ( vec2 ( iw , ix ) - vec2 ( iB , iC ) ) ; iA = max ( iA . xy , cX . zw ) ; float iD = max ( iA . x , iA . y ) ; il . xy *= step ( iD , SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR * cX . xy ) ; return il ; }".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["SMAA_DISABLE_DIAG_DETECTION",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 iG ( vec2 iF ) { iF . r = iF . r * abs ( 5.0 * iF . r - 5.0 * 0.75 ) ; return is ( iF ) ; } vec4 iG ( vec4 iF ) { iF . rb = iF . rb * abs ( 5.0 * iF . rb - 5.0 * 0.75 ) ; return is ( iF ) ; } vec2 iI ( sampler2D iH , vec2 ce , vec2 bH , out vec2 iF ) { vec4 f_ = vec4 ( ce , - 1.0 , 1.0 ) ; vec3 t = vec3 ( u_texel_size , 1.0 ) ; for ( int cq = 0 ; cq < SMAA_MAX_SEARCH_STEPS_DIAG ; cq ++ ) { if ( f_ . z < float ( SMAA_MAX_SEARCH_STEPS_DIAG - 1 ) && f_ . w > 0.9 ) { f_ . xyz += t * vec3 ( bH , 1.0 ) ; iF = GLSL_TEXTURE ( iH , f_ . xy , 0.0 ) . rg ; f_ . w = dot ( iF , vec2 ( 0.5 , 0.5 ) ) ; } } return f_ . zw ; } vec2 iJ ( sampler2D iH , vec2 ce , vec2 bH , out vec2 iF ) { vec4 f_ = vec4 ( ce , - 1.0 , 1.0 ) ; f_ . x += 0.25 * u_texel_size . x ; vec3 t = vec3 ( u_texel_size , 1.0 ) ; for ( int cq = 0 ; cq < SMAA_MAX_SEARCH_STEPS_DIAG ; cq ++ ) { if ( f_ . z < float ( SMAA_MAX_SEARCH_STEPS_DIAG - 1 ) && f_ . w > 0.9 ) { f_ . xyz = t * vec3 ( bH , 1.0 ) + f_ . xyz ; iF = GLSL_TEXTURE ( iH , f_ . xy , 0.0 ) . rg ; iF = iG ( iF ) ; f_ . w = dot ( iF , vec2 ( 0.5 , 0.5 ) ) ; } } return f_ . zw ; } vec2 iL ( sampler2D iK , vec2 aM , vec2 iF , float fM ) { vec2 ce = vec2 ( SMAA_AREATEX_MAX_DISTANCE_DIAG , SMAA_AREATEX_MAX_DISTANCE_DIAG ) * iF + aM ; ce = SMAA_AREATEX_PIXEL_SIZE * ce + 0.5 * SMAA_AREATEX_PIXEL_SIZE ; ce . x += 0.5 ; ce . y += SMAA_AREATEX_SUBTEX_SIZE * fM ; return GLSL_TEXTURE ( iK , ce , 0.0 ) . rg ; } vec2 iQ ( sampler2D iH , sampler2D iK , vec2 ce , vec2 iF , vec4 iM ) { vec2 iv = vec2 ( 0.0 , 0.0 ) ; vec4 dC ; vec2 iN ; if ( iF . r > 0.0 ) { dC . xz = iI ( iH , ce , vec2 ( - 1.0 , 1.0 ) , iN ) ; dC . x += float ( iN . y > 0.9 ) ; } else dC . xz = vec2 ( 0.0 , 0.0 ) ; dC . yw = iI ( iH , ce , vec2 ( 1.0 , - 1.0 ) , iN ) ; if ( dC . x + dC . y > 2.0 ) { vec4 iO = vec4 ( - dC . x + 0.25 , dC . x , dC . y , - dC . y - 0.25 ) * u_texel_size . xyxy + ce . xyxy ; vec4 dx ; dx . xy = GLSL_TEXTURE ( iH , iO . xy + u_texel_size * vec2 ( - 1 , 0 ) , 0.0 ) . rg ; dx . zw = GLSL_TEXTURE ( iH , iO . zw + u_texel_size * vec2 ( 1 , 0 ) , 0.0 ) . rg ; dx . yxwz = iG ( dx . xyzw ) ; vec2 iP = vec2 ( 2.0 , 2.0 ) * dx . xz + dx . yw ; ir ( bvec2 ( step ( 0.9 , dC . zw ) ) , iP , vec2 ( 0.0 , 0.0 ) ) ; iv += iL ( iK , dC . xy , iP , iM . z ) ; } dC . xz = iJ ( iH , ce , vec2 ( - 1 , - 1 ) , iN ) ; if ( GLSL_TEXTURE ( iH , ce + u_texel_size * vec2 ( 1 , 0 ) , 0.0 ) . r > 0.0 ) { dC . yw = iJ ( iH , ce , vec2 ( 1 , 1 ) , iN ) ; dC . y += float ( iN . y > 0.9 ) ; } else dC . yw = vec2 ( 0.0 , 0.0 ) ; if ( dC . x + dC . y > 2.0 ) { vec4 iO = vec4 ( - dC . x , - dC . x , dC . y , dC . y ) * u_texel_size . xyxy + ce . xyxy ; vec4 dx ; dx . x = GLSL_TEXTURE ( iH , iO . xy + u_texel_size * vec2 ( - 1 , 0 ) , 0.0 ) . g ; dx . y = GLSL_TEXTURE ( iH , iO . xy + u_texel_size * vec2 ( 0 , - 1 ) , 0.0 ) . r ; dx . zw = GLSL_TEXTURE ( iH , iO . zw + u_texel_size * vec2 ( 1 , 0 ) , 0.0 ) . gr ; vec2 iP = vec2 ( 2.0 , 2.0 ) * dx . xz + dx . yw ; ir ( bvec2 ( step ( 0.9 , dC . zw ) ) , iP , vec2 ( 0 , 0 ) ) ; iv += iL ( iK , dC . xy , iP , iM . w ) . gr ; } return iv ; }".split(" ")}]}}]},
{$:"txt",aa:"float iT ( sampler2D iR , vec2 iF , float fM ) { vec2 hK = SMAA_SEARCHTEX_SIZE * vec2 ( 0.5 , - 1.0 ) ; vec2 iS = SMAA_SEARCHTEX_SIZE * vec2 ( fM , 1.0 ) ; hK += vec2 ( - 1.0 , 1.0 ) ; iS += vec2 ( 0.5 , - 0.5 ) ; hK *= 1.0 / SMAA_SEARCHTEX_PACKED_SIZE ; iS *= 1.0 / SMAA_SEARCHTEX_PACKED_SIZE ; return GLSL_TEXTURE ( iR , hK * iF + iS , 0.0 ) . r ; } float iU ( sampler2D iH , sampler2D iR , vec2 ce , float iN ) { vec2 iF = vec2 ( 0.0 , 1.0 ) ; for ( int cq = 0 ; cq < SMAA_MAX_SEARCH_STEPS ; cq ++ ) { if ( ce . x > iN && iF . g > 0.8281 && iF . r == 0.0 ) { iF = GLSL_TEXTURE ( iH , ce , 0.0 ) . rg ; ce = - vec2 ( 2.0 , 0.0 ) * u_texel_size + ce ; } } float fM = - ( 255.0 / 127.0 ) * iT ( iR , iF , 0.0 ) + 3.25 ; return u_texel_size . x * fM + ce . x ; } float iV ( sampler2D iH , sampler2D iR , vec2 ce , float iN ) { vec2 iF = vec2 ( 0.0 , 1.0 ) ; for ( int cq = 0 ; cq < SMAA_MAX_SEARCH_STEPS ; cq ++ ) { if ( ce . x < iN && iF . g > 0.8281 && iF . r == 0.0 ) { iF = GLSL_TEXTURE ( iH , ce , 0.0 ) . rg ; ce = vec2 ( 2.0 , 0.0 ) * u_texel_size + ce ; } } float fM = - ( 255.0 / 127.0 ) * iT ( iR , iF , 0.5 ) + 3.25 ; return - u_texel_size . x * fM + ce . x ; } float iW ( sampler2D iH , sampler2D iR , vec2 ce , float iN ) { vec2 iF = vec2 ( 1.0 , 0.0 ) ; for ( int cq = 0 ; cq < SMAA_MAX_SEARCH_STEPS ; cq ++ ) { if ( ce . y > iN && iF . r > 0.8281 && iF . g == 0.0 ) { iF = GLSL_TEXTURE ( iH , ce , 0.0 ) . rg ; ce = - vec2 ( 0.0 , 2.0 ) * u_texel_size + ce ; } } float fM = - ( 255.0 / 127.0 ) * iT ( iR , iF . gr , 0.0 ) + 3.25 ; return u_texel_size . y * fM + ce . y ; } float iX ( sampler2D iH , sampler2D iR , vec2 ce , float iN ) { vec2 iF = vec2 ( 1.0 , 0.0 ) ; for ( int cq = 0 ; cq < SMAA_MAX_SEARCH_STEPS ; cq ++ ) { if ( ce . y < iN && iF . r > 0.8281 && iF . g == 0.0 ) { iF = GLSL_TEXTURE ( iH , ce , 0.0 ) . rg ; ce = vec2 ( 0.0 , 2.0 ) * u_texel_size + ce ; } } float fM = - ( 255.0 / 127.0 ) * iT ( iR , iF . gr , 0.5 ) + 3.25 ; return - u_texel_size . y * fM + ce . y ; } vec2 i_ ( sampler2D iK , vec2 aM , float iY , float iZ , float fM ) { vec2 ce = vec2 ( SMAA_AREATEX_MAX_DISTANCE , SMAA_AREATEX_MAX_DISTANCE ) * is ( 4.0 * vec2 ( iY , iZ ) ) + aM ; ce = SMAA_AREATEX_PIXEL_SIZE * ce + 0.5 * SMAA_AREATEX_PIXEL_SIZE ; ce . y = SMAA_AREATEX_SUBTEX_SIZE * fM + ce . y ; return GLSL_TEXTURE ( iK , ce , 0.0 ) . rg ; } void jc ( sampler2D iH , inout vec2 iv , vec4 ce , vec2 dC ) {".split(" ")},
{$:"cond",da:[{$:"if",ga:["SMAA_DISABLE_CORNER_DETECTION",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 ja = step ( dC . xy , dC . yx ) ; vec2 jb = ( 1.0 - SMAA_CORNER_ROUNDING_NORM ) * ja ; jb /= ja . x + ja . y ; vec2 aL = vec2 ( 1.0 , 1.0 ) ; aL . x -= jb . x * GLSL_TEXTURE ( iH , ce . xy + u_texel_size * vec2 ( 0 , 1 ) , 0.0 ) . r ; aL . x -= jb . y * GLSL_TEXTURE ( iH , ce . zw + u_texel_size * vec2 ( 1 , 1 ) , 0.0 ) . r ; aL . y -= jb . x * GLSL_TEXTURE ( iH , ce . xy + u_texel_size * vec2 ( 0 , - 2 ) , 0.0 ) . r ; aL . y -= jb . y * GLSL_TEXTURE ( iH , ce . zw + u_texel_size * vec2 ( 1 , - 2 ) , 0.0 ) . r ; iv *= clamp ( aL , 0.0 , 1.0 ) ;".split(" ")}]}}]},
{$:"txt",aa:"} void jd ( sampler2D iH , inout vec2 iv , vec4 ce , vec2 dC ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["SMAA_DISABLE_CORNER_DETECTION",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 ja = step ( dC . xy , dC . yx ) ; vec2 jb = ( 1.0 - SMAA_CORNER_ROUNDING_NORM ) * ja ; jb /= ja . x + ja . y ; vec2 aL = vec2 ( 1.0 , 1.0 ) ; aL . x -= jb . x * GLSL_TEXTURE ( iH , ce . xy + u_texel_size * vec2 ( 1 , 0 ) , 0.0 ) . g ; aL . x -= jb . y * GLSL_TEXTURE ( iH , ce . zw + u_texel_size * vec2 ( 1 , 1 ) , 0.0 ) . g ; aL . y -= jb . x * GLSL_TEXTURE ( iH , ce . xy + u_texel_size * vec2 ( - 2 , 0 ) , 0.0 ) . g ; aL . y -= jb . y * GLSL_TEXTURE ( iH , ce . zw + u_texel_size * vec2 ( - 2 , 1 ) , 0.0 ) . g ; iv *= clamp ( aL , 0.0 , 1.0 ) ;".split(" ")}]}}]},
{$:"txt",aa:["}"]},{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 jg ( vec2 ce , vec2 je , sampler2D iH , sampler2D iK , sampler2D iR , vec4 iM ) { vec4 iv = vec4 ( 0.0 , 0.0 , 0.0 , 0.0 ) ; vec2 iF = GLSL_TEXTURE ( iH , ce ) . rg ; if ( iF . g > 0.0 ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["SMAA_DISABLE_DIAG_DETECTION",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"iv . rg = iQ ( iH , iK , ce , iF , iM ) ; if ( iv . r == - iv . g ) {".split(" ")}]}}]},
{$:"txt",aa:"vec2 dC ; vec3 iO ; iO . x = iU ( iH , iR , ia . xy , ic . x ) ; iO . y = ib . y ; dC . x = iO . x ; float iY = GLSL_TEXTURE ( iH , iO . xy , 0.0 ) . r ; iO . z = iV ( iH , iR , ia . zw , ic . y ) ; dC . y = iO . z ; dC = abs ( is ( dC / u_texel_size . xx - je . xx ) ) ; vec2 jf = sqrt ( dC ) ; float iZ = GLSL_TEXTURE ( iH , iO . zy + u_texel_size * vec2 ( 1 , 0 ) , 0.0 ) . r ; iv . rg = i_ ( iK , jf , iY , iZ , iM . y ) ; iO . y = ce . y ; jc ( iH , iv . rg , iO . xyzy , dC ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["SMAA_DISABLE_DIAG_DETECTION",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"} else iF . r = 0.0 ;".split(" ")}]}}]},{$:"txt",aa:"} if ( iF . r > 0.0 ) { vec2 dC ; vec3 iO ; iO . y = iW ( iH , iR , ib . xy , ic . z ) ; iO . x = ia . x ; dC . x = iO . y ; float iY = GLSL_TEXTURE ( iH , iO . xy , 0.0 ) . g ; iO . z = iX ( iH , iR , ib . zw , ic . w ) ; dC . y = iO . z ; dC = abs ( is ( dC / u_texel_size . yy - je . yy ) ) ; vec2 jf = sqrt ( dC ) ; float iZ = GLSL_TEXTURE ( iH , iO . xz + u_texel_size * vec2 ( 0 , 1 ) , 0.0 ) . g ; iv . ba = i_ ( iK , jf , iY , iZ , iM . x ) ; iO . x = ce . x ; jd ( iH , iv . ba , iO . xyxz , dC ) ; } return iv ; }".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 jp ( vec2 ce , sampler2D it , sampler2D jh".split(" ")},{$:"cond",da:[{$:"if",ga:["SMAA_REPROJECTION"],ha:{$:"grp",da:[{$:"txt",aa:[",","sampler2D","ji"]}]}}]},{$:"txt",aa:") { vec4 a ; a . x = GLSL_TEXTURE ( jh , h_ . xy ) . a ; a . y = GLSL_TEXTURE ( jh , h_ . zw ) . g ; a . wz = GLSL_TEXTURE ( jh , ce ) . xz ; if ( dot ( a , vec4 ( 1.0 , 1.0 , 1.0 , 1.0 ) ) < 1e-5 ) { vec4 aQ = GLSL_TEXTURE ( it , ce , 0.0 ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["SMAA_REPROJECTION"],ha:{$:"grp",da:[{$:"txt",aa:"vec4 jj = GLSL_TEXTURE ( ji , A ) ; vec2 dp = 2.0 * jk ( jj ) - 1.0 ; aQ . a = sqrt ( 2.0 * length ( dp ) ) ;".split(" ")}]}}]},{$:"txt",aa:"return aQ ; } else { bool co = max ( a . x , a . z ) > max ( a . y , a . w ) ; vec4 jl = vec4 ( 0.0 , a . y , 0.0 , a . w ) ; vec2 jm = a . yw ; ir ( bvec4 ( co , co , co , co ) , jl , vec4 ( a . x , 0.0 , a . z , 0.0 ) ) ; ir ( bvec2 ( co , co ) , jm , a . xz ) ; jm /= dot ( jm , vec2 ( 1.0 , 1.0 ) ) ; vec4 jn = jl * vec4 ( u_texel_size , - u_texel_size ) + ce . xyxy ; vec4 aQ = jm . x * GLSL_TEXTURE ( it , jn . xy , 0.0 ) ; aQ += jm . y * GLSL_TEXTURE ( it , jn . zw , 0.0 ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["SMAA_REPROJECTION"],ha:{$:"grp",da:[{$:"txt",aa:"vec4 jj = GLSL_TEXTURE ( ji , jn . xy ) ; vec2 jo = 2.0 * jk ( jj ) - 1.0 ; vec2 dp = jm . x * jo ; jj = GLSL_TEXTURE ( ji , jn . zw ) ; jo = 2.0 * jk ( jj ) - 1.0 ; dp += jm . y * jo ; aQ . a = sqrt ( 2.0 * length ( dp ) ) ;".split(" ")}]}}]},{$:"txt",aa:["return","aQ",";","}","}"]}]}}]},{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_RESOLVE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 ju ( vec2 ce , sampler2D jq , sampler2D jr".split(" ")},
{$:"cond",da:[{$:"if",ga:["SMAA_REPROJECTION"],ha:{$:"grp",da:[{$:"txt",aa:[",","sampler2D","ji"]}]}}]},{$:"txt",aa:[")","{"]},{$:"cond",da:[{$:"if",ga:["SMAA_REPROJECTION"],ha:{$:"grp",da:[{$:"txt",aa:"vec4 jj = GLSL_TEXTURE ( ji , A ) ; vec2 dp ; dp = 2.0 * jk ( jj ) - 1.0 ; vec4 js = GLSL_TEXTURE ( jq , ce ) ; vec4 jt = GLSL_TEXTURE ( jr , ce - dp ) ; float cX = abs ( js . a * js . a - jt . a * jt . a ) / 2.0 ; float cu = 0.5 * clamp ( 1.0 - sqrt ( cX ) * SMAA_REPROJECTION_WEIGHT_SCALE , 0.0 , 1.0 ) ; vec4 aQ = mix ( js , jt , cu ) ; aQ . a = 1.0 ; return aQ ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec4 js = GLSL_TEXTURE ( jq , ce ) ; vec4 jt = GLSL_TEXTURE ( jr , ce ) ; return mix ( js , jt , 0.5 ) ;".split(" ")}]}}]},{$:"txt",aa:["}"]}]}}]},{$:"txt",aa:["void","main","(",")","{"]},{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_EDGE_DETECTION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 aQ = vec4 ( iE ( A , u_color".split(" ")},{$:"cond",da:[{$:"if",ga:["SMAA_PREDICATION"],ha:{$:"grp",da:[{$:"txt",aa:[",","u_predication_tex"]}]}}]},{$:"txt",
aa:") , 0.0 , 0.0 ) ;".split(" ")}]}},{$:"elif",ga:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 aQ = jg ( A , id , u_color , u_area_tex , u_search_tex , u_subsample_indices ) ;".split(" ")}]}},{$:"elif",ga:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 aQ = jp ( A , u_color , u_blend".split(" ")},{$:"cond",da:[{$:"if",ga:["SMAA_REPROJECTION"],ha:{$:"grp",da:[{$:"txt",aa:[",","u_velocity_tex"]}]}}]},
{$:"txt",aa:[")",";"]}]}},{$:"elif",ga:["SMAA_PASS","SMAA_RESOLVE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 aQ = vec4 ( ju ( A , u_color , u_color_prev".split(" ")},{$:"cond",da:[{$:"if",ga:["SMAA_REPROJECTION"],ha:{$:"grp",da:[{$:"txt",aa:[",","u_velocity_tex"]}]}}]},{$:"txt",aa:[")",")",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec4 aQ = GLSL_TEXTURE ( u_color , A ) ;".split(" ")}]}}]},{$:"txt",aa:["GLSL_OUT_FRAG_COLOR","=","aQ",";","}"]}]};f["postprocessing/smaa.glslv"]={$:"grp",
da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"SMAA_PASS",aa:["SMAA_RESOLVE"]},{$:"var",ba:"AA_METHOD",aa:["AA_METHOD_SMAA_LOW"]},{$:"include",oa:"std.glsl"},{$:"txt",aa:"uniform PRECISION vec2 u_texel_size ; GLSL_IN vec2 a_position ; GLSL_OUT vec2 A ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","h_",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT vec4 ia ; GLSL_OUT vec4 ib ; GLSL_OUT vec4 ic ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec2","id",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["AA_METHOD","AA_METHOD_SMAA_LOW",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"SMAA_MAX_SEARCH_STEPS",aa:["4"]}]}},{$:"elif",ga:["AA_METHOD","AA_METHOD_SMAA_MEDIUM",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"SMAA_MAX_SEARCH_STEPS",aa:["8"]}]}},{$:"elif",ga:["AA_METHOD","AA_METHOD_SMAA_HIGH",{$:"equal_expr",
ia:2}],ha:{$:"grp",da:[{$:"define",ba:"SMAA_MAX_SEARCH_STEPS",aa:["16"]}]}},{$:"elif",ga:["AA_METHOD","AA_METHOD_SMAA_ULTRA",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"SMAA_MAX_SEARCH_STEPS",aa:["32"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"SMAA_MAX_SEARCH_STEPS",ha:{$:"grp",da:[{$:"define",ba:"SMAA_MAX_SEARCH_STEPS",aa:["16"]}]}}]},{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_EDGE_DETECTION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"void jv ( vec2 ce ) { ia = u_texel_size . xyxy * vec4 ( - 1.0 , 0.0 , 0.0 , - 1.0 ) + ce . xyxy ; ib = u_texel_size . xyxy * vec4 ( 1.0 , 0.0 , 0.0 , 1.0 ) + ce . xyxy ; ic = u_texel_size . xyxy * vec4 ( - 2.0 , 0.0 , 0.0 , - 2.0 ) + ce . xyxy ; }".split(" ")}]}},
{$:"elif",ga:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"void jw ( vec2 ce , out vec2 je ) { je = ce / u_texel_size ; ia = u_texel_size . xyxy * vec4 ( - 0.25 , - 0.125 , 1.25 , - 0.125 ) + ce . xyxy ; ib = u_texel_size . xyxy * vec4 ( - 0.125 , - 0.25 , - 0.125 , 1.25 ) + ce . xyxy ; ic = u_texel_size . xxyy * vec4 ( - 2.0 , 2.0 , - 2.0 , 2.0 ) * float ( SMAA_MAX_SEARCH_STEPS ) + vec4 ( ia . xz , ib . yw ) ; }".split(" ")}]}},{$:"elif",ga:["SMAA_PASS",
"SMAA_NEIGHBORHOOD_BLENDING",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"void jx ( vec2 ce ) { h_ = u_texel_size . xyxy * vec4 ( 1.0 , 0.0 , 0.0 , 1.0 ) + ce . xyxy ; }".split(" ")}]}}]},{$:"txt",aa:"void main ( ) { A = 2.0 * a_position ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_EDGE_DETECTION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["jv","(","A",")",";"]}]}},{$:"elif",ga:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",
aa:"jw ( A , id ) ;".split(" ")}]}},{$:"elif",ga:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["jx","(","A",")",";"]}]}}]},{$:"txt",aa:"gl_Position = vec4 ( 4.0 * ( a_position . xy - 0.25 ) , 0.0 , 1.0 ) ; }".split(" ")}]};f["postprocessing/ssao.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"SSAO_WHITE",aa:["0"]},{$:"var",ba:"SSAO_QUALITY",aa:["SSAO_QUALITY_8"]},{$:"var",ba:"SSAO_HEMISPHERE",
aa:["0"]},{$:"txt",aa:["precision","PRECISION","sampler2D",";"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"depth_fetch.glslf"},{$:"txt",aa:"uniform sampler2D u_color ; uniform sampler2D u_depth ; uniform sampler2D u_ssao_special_tex ; uniform vec2 u_camera_range ; uniform vec2 u_texel_size ; uniform float u_ssao_radius_increase ; uniform float u_ssao_influence ; uniform float u_ssao_dist_factor ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; float jy ( in vec2 f_ ) { return gC ( u_depth , f_ , u_camera_range ) ; } void main ( ) { vec3 gG = GLSL_TEXTURE ( u_color , A ) . rgb ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["SSAO_WHITE"],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( gG , 1.0 ) ; return ;".split(" ")}]}}]},{$:"txt",aa:"vec3 jz = normalize ( 2.0 * GLSL_TEXTURE ( u_ssao_special_tex , A * 0.25 / u_texel_size ) . rgb - 1.0 ) ; float et = jy ( A ) ; float jA = et * ( u_camera_range . y - u_camera_range . x ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SSAO_QUALITY","SSAO_QUALITY_8",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"const float jB = 8.0 ; const int jC = 1 ;".split(" ")}]}},
{$:"elif",ga:["SSAO_QUALITY","SSAO_QUALITY_16",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"const float jB = 16.0 ; const int jC = 2 ;".split(" ")}]}},{$:"elif",ga:["SSAO_QUALITY","SSAO_QUALITY_24",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"const float jB = 24.0 ; const int jC = 3 ;".split(" ")}]}},{$:"elif",ga:["SSAO_QUALITY","SSAO_QUALITY_32",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"const float jB = 32.0 ; const int jC = 4 ;".split(" ")}]}}]},{$:"txt",aa:"float jD = u_ssao_radius_increase * 0.001 ; const float jE = 1.0 + 2.4 / jB ; float jF = 0.0 ; for ( int cq = 0 ; cq < jC ; cq ++ ) for ( int x = - 1 ; x <= 1 ; x += 2 ) for ( int y = - 1 ; y <= 1 ; y += 2 ) for ( int z = - 1 ; z <= 1 ; z += 2 ) { vec3 jG = reflect ( normalize ( vec3 ( x , y , z ) ) , jz ) * ( jD *= jE ) ; vec3 jH = vec3 ( A , jA ) ; jH += vec3 ( jG . xy , jG . z * jA * 2.0 ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["SSAO_HEMISPHERE"],ha:{$:"grp",da:[{$:"txt",aa:"jH . z -= 1.4 * ( jH . z - jA ) * step ( jA , jH . z ) ;".split(" ")}]}}]},{$:"txt",aa:"float jI = jy ( jH . xy ) * ( u_camera_range . y - u_camera_range . x ) ; float jJ = clamp ( ( jA - jI ) / jI , 0.0 , 1.0 ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SSAO_HEMISPHERE"],ha:{$:"grp",da:[{$:"txt",aa:"jF += mix ( 1.0 , jJ , step ( jI , jH . z ) ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"jF += mix ( step ( jH . z , jI ) , 0.5 , jJ ) ;".split(" ")}]}}]},
{$:"txt",aa:"} jF = jF / jB ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SSAO_HEMISPHERE"],ha:{$:"grp",da:[{$:"txt",aa:"jF = clamp ( jF * jF + 0.6 * jF , 0.0 , 1.0 ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"jF = clamp ( jF * jF + jF , 0.0 , 1.0 ) ;".split(" ")}]}}]},{$:"txt",aa:"float jK = u_ssao_influence * ( 1.0 - u_ssao_dist_factor * et ) ; jF = mix ( 1.0 , jF , jK ) ; GLSL_OUT_FRAG_COLOR = vec4 ( gG , jF ) ; }".split(" ")}]};f["postprocessing/ssao_blur.glslf"]={$:"grp",da:[{$:"version",
aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"SSAO_BLUR_DEPTH",aa:["0"]},{$:"txt",aa:["precision","PRECISION","sampler2D",";"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"cond",da:[{$:"if",ga:["SSAO_BLUR_DEPTH"],ha:{$:"grp",da:[{$:"include",oa:"depth_fetch.glslf"}]}}]},{$:"txt",aa:"uniform sampler2D u_ssao_mask ; uniform vec2 u_texel_size ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SSAO_BLUR_DEPTH"],
ha:{$:"grp",da:[{$:"txt",aa:"uniform sampler2D u_depth ; uniform vec2 u_camera_range ; uniform float u_ssao_blur_discard_value ; float jy ( in vec2 f_ ) { return gC ( u_depth , f_ , u_camera_range ) ; }".split(" ")}]}}]},{$:"txt",aa:"void main ( ) { float jL = 0.0 ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SSAO_BLUR_DEPTH"],ha:{$:"grp",da:[{$:"txt",aa:"float jM = jy ( A ) ; float cu = 0.0 ; float jN = u_ssao_blur_discard_value * 100.0 ;".split(" ")}]}}]},{$:"txt",aa:"vec2 jO = vec2 ( - 2.0 ) ; for ( int cq = 0 ; cq < 4 ; ++ cq ) { for ( int jP = 0 ; jP < 4 ; ++ jP ) { vec2 fM = ( jO + vec2 ( float ( cq ) , float ( jP ) ) ) * u_texel_size ; float jQ = GLSL_TEXTURE ( u_ssao_mask , A + fM ) . a ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["SSAO_BLUR_DEPTH"],ha:{$:"grp",da:[{$:"txt",aa:"float jR = jy ( A + fM ) ; float jS = 1.0 - clamp ( abs ( jR - jM ) * jN , 0.0 , 1.0 ) ; jL += jQ * jS ; cu += jS ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["jL","+=","jQ",";"]}]}}]},{$:"txt",aa:["}","}"]},{$:"cond",da:[{$:"if",ga:["SSAO_BLUR_DEPTH"],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( GLSL_TEXTURE ( u_ssao_mask , A ) . rgb , jL / cu ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",
aa:"GLSL_OUT_FRAG_COLOR = vec4 ( GLSL_TEXTURE ( u_ssao_mask , A ) . rgb , jL / 16.0 ) ;".split(" ")}]}}]},{$:"txt",aa:["}"]}]};f["postprocessing/stereo.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"ANAGLYPH",aa:["0"]},{$:"var",ba:"SIDEBYSIDE",aa:["0"]},{$:"var",ba:"EPSILON",aa:["0.000001"]},{$:"var",ba:"DISTOR_SCALE",aa:["0.8"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"txt",aa:"uniform sampler2D u_sampler_left ; uniform sampler2D u_sampler_right ; uniform vec2 u_texel_size ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["ANAGLYPH",{$:"logic_negative_expr",ia:1},"SIDEBYSIDE",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform int u_enable_hmd_stereo ; uniform vec4 u_distortion_params ; uniform vec4 u_chromatic_aberration_coefs ; void ka ( vec2 ce , vec2 ao , float di , sampler2D jT ) { vec2 bD = ( ce - ao ) * 4.0 * u_texel_size [ 0 ] / u_texel_size [ 1 ] / di ; float jU = bD . x * bD . x + bD . y * bD . y ; vec2 jV = bD * ( 1.0 + u_distortion_params [ 0 ] * jU + u_distortion_params [ 1 ] * jU * jU ) ; vec2 jW = jV * 0.5 / ( 1.0 + u_distortion_params [ 0 ] + u_distortion_params [ 1 ] ) ; if ( length ( u_chromatic_aberration_coefs ) > 0.0 ) { vec2 jX = jW * ( 1.0 + u_chromatic_aberration_coefs [ 0 ] + jU * u_chromatic_aberration_coefs [ 1 ] ) + 0.5 ; vec2 jY = jW + 0.5 ; vec2 jZ = jW * ( 1.0 + u_chromatic_aberration_coefs [ 2 ] + jU * u_chromatic_aberration_coefs [ 3 ] ) + 0.5 ; if ( clamp ( jZ , 0.0 , 1.0 ) != jZ ) { GLSL_OUT_FRAG_COLOR = vec4 ( 0.0 ) ; } else { vec4 j_ = GLSL_TEXTURE ( jT , jY ) ; GLSL_OUT_FRAG_COLOR [ 0 ] = GLSL_TEXTURE ( jT , jX ) . x ; GLSL_OUT_FRAG_COLOR [ 1 ] = j_ . y ; GLSL_OUT_FRAG_COLOR [ 2 ] = GLSL_TEXTURE ( jT , jZ ) . z ; GLSL_OUT_FRAG_COLOR [ 3 ] = j_ . w ; } } else { jW += 0.5 ; if ( clamp ( jW , 0.0 , 1.0 ) != jW ) { GLSL_OUT_FRAG_COLOR = vec4 ( 0.0 ) ; } else { GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( jT , jW ) ; } } }".split(" ")}]}}]},
{$:"txt",aa:["void","main","(",")","{"]},{$:"cond",da:[{$:"if",ga:["ANAGLYPH"],ha:{$:"grp",da:[{$:"txt",aa:"vec4 kb = GLSL_TEXTURE ( u_sampler_left , A ) ; vec4 kc = GLSL_TEXTURE ( u_sampler_right , A ) ; vec3 kd = vec3 ( kb [ 0 ] , kb [ 1 ] , kb [ 2 ] ) ; bG ( kd ) ; vec3 ke = vec3 ( kc [ 0 ] , kc [ 1 ] , kc [ 2 ] ) ; bG ( ke ) ; mat3 kf = mat3 ( 0.437 , - 0.062 , - 0.048 , 0.449 , - 0.062 , - 0.050 , 0.164 , - 0.024 , - 0.017 ) ; mat3 bz = mat3 ( - 0.011 , 0.377 , - 0.026 , - 0.032 , 0.761 , - 0.093 , - 0.007 , 0.009 , 1.234 ) ; vec3 aQ = clamp ( kf * kd , 0.0 , 1.0 ) + clamp ( bz * ke , 0.0 , 1.0 ) ; aW ( aQ ) ; GLSL_OUT_FRAG_COLOR = vec4 ( aQ , kb [ 3 ] + kc [ 3 ] ) ;".split(" ")}]}},
{$:"elif",ga:["SIDEBYSIDE"],ha:{$:"grp",da:[{$:"txt",aa:"if ( A [ 0 ] < 0.5 ) { vec2 ce = vec2 ( 2.0 * A [ 0 ] , A [ 1 ] ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_sampler_left , ce ) ; } else { vec2 ce = vec2 ( 2.0 * ( A [ 0 ] - 0.5 ) , A [ 1 ] ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_sampler_right , ce ) ; }".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"if ( u_enable_hmd_stereo != 0 ) { if ( abs ( u_distortion_params [ 0 ] ) > EPSILON || abs ( u_distortion_params [ 1 ] ) > EPSILON ) if ( A [ 0 ] < 0.5 ) { vec2 ce = vec2 ( 2.0 * A [ 0 ] , A [ 1 ] ) ; vec2 ao = vec2 ( 0.5 - ( u_distortion_params [ 3 ] - 0.5 ) / 2.0 , u_distortion_params [ 2 ] ) ; float di = 2.0 * u_distortion_params [ 3 ] * DISTOR_SCALE ; ka ( ce , ao , di , u_sampler_left ) ; } else { vec2 ce = vec2 ( 2.0 * ( A [ 0 ] - 0.5 ) , A [ 1 ] ) ; vec2 ao = vec2 ( 0.5 + ( u_distortion_params [ 3 ] - 0.5 ) / 2.0 , u_distortion_params [ 2 ] ) ; float di = 2.0 * u_distortion_params [ 3 ] * DISTOR_SCALE ; ka ( ce , ao , di , u_sampler_right ) ; } else if ( A [ 0 ] < 0.5 ) { vec2 ce = vec2 ( 2.0 * A [ 0 ] , A [ 1 ] ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_sampler_left , ce ) ; } else { vec2 ce = vec2 ( 2.0 * ( A [ 0 ] - 0.5 ) , A [ 1 ] ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_sampler_right , ce ) ; } } else { GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_sampler_left , A ) ; }".split(" ")}]}}]},
{$:"txt",aa:["}"]}]};f["postprocessing/velocity.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"pack.glslf"},{$:"txt",aa:"uniform sampler2D u_depth ; uniform mat4 u_view_proj_inverse ; uniform mat4 u_view_proj_prev ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { float et = GLSL_TEXTURE ( u_depth , A ) . x ; vec4 kg = vec4 ( A * 2.0 - 1.0 , 2.0 * et - 1.0 , 1.0 ) ; vec4 cD = u_view_proj_inverse * kg ; vec4 kh = cD / cD . w ; vec4 ki = u_view_proj_prev * kh ; ki /= ki . w ; vec2 dp = ( kg . xy - ki . xy ) / 4.0 + 0.5 ; dp = clamp ( dp , 0.0 , 1.0 ) ; GLSL_OUT_FRAG_COLOR = eu ( dp ) ; }".split(" ")}]};
f["include/blending.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"BLENDING_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"BLENDING_GLSLF",aa:[""]},{$:"txt",aa:"vec3 kj ( vec3 rgb ) { vec4 hM = vec4 ( _0_0 , - _1_0 / 3.0 , 2.0 / 3.0 , - _1_0 ) ; vec4 p = mix ( vec4 ( rgb . bg , hM . wz ) , vec4 ( rgb . gb , hM . xy ) , step ( rgb . b , rgb . g ) ) ; vec4 q = mix ( vec4 ( p . xyw , rgb . r ) , vec4 ( rgb . r , p . yzx ) , step ( p . x , rgb . r ) ) ; float dC = q . x - min ( q . w , q . y ) ; float iF = 1.0e-10 ; return vec3 ( abs ( q . z + ( q . w - q . y ) / ( 6.0 * dC + iF ) ) , dC / ( q . x + iF ) , q . x ) ; } vec3 kl ( vec3 kk ) { vec4 hM = vec4 ( _1_0 , 2.0 / 3.0 , _1_0 / 3.0 , 3.0 ) ; vec3 p = abs ( fract ( vec3 ( kk . r , kk . r , kk . r ) + hM . xyz ) * 6.0 - hM . www ) ; return kk . b * mix ( hM . xxx , clamp ( p - hM . xxx , _0_0 , _1_0 ) , kk . g ) ; } vec3 kp ( vec3 km , vec3 kn , float ko ) { return mix ( km , kn , ko ) ; } vec3 kq ( vec3 km , vec3 kn , float ko ) { return ko * km + kn ; } vec3 kr ( vec3 km , vec3 kn , float ko ) { return kn - ko * km ; } vec3 kt ( vec3 km , vec3 kn , float ko ) { float ks = _1_0 - ko ; return ( vec3 ( ks ) + ko * km ) * kn ; } vec3 ku ( vec3 km , vec3 kn , float ko ) { vec3 ks = vec3 ( _1_0 - ko ) ; return vec3 ( _1_0 ) - ( ks + ko * ( vec3 ( _1_0 ) - km ) ) * ( vec3 ( _1_0 ) - kn ) ; } vec3 kv ( vec3 km , vec3 kn , float ko ) { vec3 ks = vec3 ( _1_0 - ko ) ; return mix ( kn * ( ks + 2.0 * ko * km ) , vec3 ( _1_0 ) - ( ks + 2.0 * ko * ( vec3 ( _1_0 ) - km ) ) * ( vec3 ( _1_0 ) - kn ) , step ( 0.5 , kn ) ) ; } vec3 kw ( vec3 km , vec3 kn , float ko ) { return mix ( kn , abs ( km - kn ) , ko ) ; } vec3 kx ( vec3 km , vec3 kn , float ko ) { return mix ( kn , kn / ( km + step ( km , vec3 ( _0_0 ) ) ) , ko ) ; } vec3 ky ( vec3 km , vec3 kn , float ko ) { return mix ( kn , min ( km , kn ) , ko ) ; } vec3 kz ( vec3 km , vec3 kn , float ko ) { return max ( ko * km , kn ) ; } vec3 kD ( vec3 km , vec3 kn , float ko ) { vec3 kA = kj ( kn ) ; if ( kA . y != _0_0 ) { vec3 kB = kj ( km ) ; vec3 kC = kl ( vec3 ( kA . x , kB . yz ) ) ; return mix ( km , kC , ko ) ; } return km ; } vec3 kE ( vec3 km , vec3 kn , float ko ) { vec3 kA = kj ( km ) ; if ( kA . y != _0_0 ) { vec3 kB = kj ( kn ) ; return kl ( vec3 ( kA . x , mix ( kA . y , kB . y , ko ) , kA . z ) ) ; } return km ; } vec3 kF ( vec3 km , vec3 kn , float ko ) { vec3 kA = kj ( km ) ; vec3 kB = kj ( kn ) ; return kl ( vec3 ( kA . xy , mix ( kA . z , kB . z , ko ) ) ) ; } vec3 kG ( vec3 km , vec3 kn , float ko ) { vec3 kA = kj ( kn ) ; if ( kA . y != _0_0 ) { vec3 kB = kj ( km ) ; vec3 kC = kl ( vec3 ( kA . xy , kB . z ) ) ; return mix ( km , kC , ko ) ; } return km ; } vec3 kI ( vec3 km , vec3 kn , float ko ) { vec3 kH = vec3 ( _1_0 ) - ( vec3 ( _1_0 ) - kn ) * ( vec3 ( _1_0 ) - km ) ; return mix ( km , ( ( vec3 ( _1_0 ) - km ) * kn * km ) + km * kH , ko ) ; } vec3 kJ ( vec3 km , vec3 kn , float ko ) { return km + ko * ( 2.0 * kn - _1_0 ) ; } float kN ( float kK , float kL , float ko , float kM ) { float ks = _1_0 - kM ; return ( ks + ko * kK ) * kL ; } float kO ( float kK , float kL , float ko , float kM ) { float ks = _1_0 - kM ; return _1_0 - ( ks + ko * ( _1_0 - kK ) ) * ( _1_0 - kL ) ; } float kP ( float kK , float kL , float ko , float kM ) { float ks = _1_0 - kM ; return mix ( kL * ( ks + 2.0 * ko * kK ) , _1_0 - ( ks + 2.0 * ko * ( _1_0 - kK ) ) * ( _1_0 - kL ) , step ( 0.5 , kL ) ) ; }".split(" ")}]}}]}]};
f["include/caustics.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"CAUSTICS_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"CAUSTICS_GLSLF",aa:[""]},{$:"var",ba:"SUN_NUM",aa:["0"]},{$:"var",ba:"CAUST_SCALE",aa:["0.25"]},{$:"var",ba:"CAUST_SPEED",aa:["vec2","(","0.0",")"]},{$:"var",ba:"CAUST_BRIGHT",aa:["0.5"]},{$:"include",oa:"procedural.glslf"},{$:"include",oa:"math.glslv"},{$:"define",ba:"CAUSTICS_VIEW_DISTANCE",aa:["100.0"]},{$:"txt",aa:"void bV ( inout vec3 aQ , float kQ , float fy , vec4 bU , vec3 U , vec3 kR , vec3 kS , vec4 kT , vec3 bt , float bS ) { if ( bS > CAUSTICS_VIEW_DISTANCE ) return ; vec3 kU = bt + U ; kU . xz = 10.0 * sin ( 0.1 * kU . xz ) ; vec3 kW = T ( kV ( kT ) , kU ) ; vec2 ce = kW . xz ; vec3 kX = kR ; float kY = max ( dot ( U , kX ) , 0.0 ) ; float kZ = 0.025 ; vec2 k_ = CAUST_SPEED * fy ; ce . s += 0.25 * sin ( dot ( bt + fy , vec3 ( 1.0 ) ) ) ; ce . t += 0.35 * ( - sin ( dot ( bt - fy , vec3 ( - 0.7 ) ) ) ) ; ce . st += 0.15 * cos ( 4.0 * kQ - k_ . x ) + 1.5 * sin ( kQ - 0.3 * k_ . y ) ; float hK = CAUST_SCALE * ( 1.0 + max ( 0.1 * kQ , 0.0 ) ) ; vec3 lb = la ( ( ce / hK ) , kZ ) ; lb *= CAUST_BRIGHT ; lb *= lb ; float lc = min ( 0.25 * kQ , - kQ ) + 1.0 ; lc = max ( lc , 0.0 ) ; float ld = bU [ SUN_NUM ] * kY ; float le = max ( sign ( kQ ) , 0.0 ) ; ld = ld + max ( 0.5 * sign ( - U . y ) * le , 0.0 ) ; ld = min ( ld , 1.0 ) ; aQ += kS * lb * lc * ld ; }".split(" ")}]}}]}]};
f["include/color_util.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"COLOR_UTIL_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"COLOR_UTIL_GLSLF",aa:[""]},{$:"define",ba:"PREMULTIPLY_ALPHA",aa:["1"]},{$:"var",ba:"SRGB",aa:["SRGB_NONE"]},{$:"include",oa:"std.glsl"},{$:"txt",aa:"void bG ( inout float aQ ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["SRGB","SRGB_SIMPLE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"aQ = pow ( aQ , 2.2 ) ;".split(" ")}]}},{$:"elif",ga:["SRGB","SRGB_PROPER",{$:"equal_expr",
ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( aQ < 0.04045 ) aQ = aQ / 12.92 ; else aQ = pow ( aQ * ( 1.0 / 1.055 ) + 0.0521327 , 2.4 ) ;".split(" ")}]}}]},{$:"txt",aa:"} void aW ( inout float aQ ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["SRGB","SRGB_SIMPLE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"aQ = pow ( aQ , 1.0 / 2.2 ) ;".split(" ")}]}},{$:"elif",ga:["SRGB","SRGB_PROPER",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( aQ < 0.0031308 ) aQ = aQ * 12.92 ; else aQ = 1.055 * pow ( aQ , 1.0 / 2.4 ) - 0.055 ;".split(" ")}]}}]},
{$:"txt",aa:"} void bG ( inout vec3 aQ ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["SRGB","SRGB_SIMPLE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"aQ = pow ( aQ , vec3 ( 2.2 ) ) ;".split(" ")}]}},{$:"elif",ga:["SRGB","SRGB_PROPER",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"bG ( aQ . r ) ; bG ( aQ . g ) ; bG ( aQ . b ) ;".split(" ")}]}}]},{$:"txt",aa:"} void aW ( inout vec3 aQ ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["SRGB","SRGB_SIMPLE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",
aa:"aQ = pow ( aQ , vec3 ( 1.0 / 2.2 ) ) ;".split(" ")}]}},{$:"elif",ga:["SRGB","SRGB_PROPER",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"aW ( aQ . r ) ; aW ( aQ . g ) ; aW ( aQ . b ) ;".split(" ")}]}}]},{$:"txt",aa:"} void aX ( inout vec3 aQ , in float L ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["PREMULTIPLY_ALPHA"],ha:{$:"grp",da:[{$:"txt",aa:"aQ = aQ * L ;".split(" ")}]}}]},{$:"txt",aa:"} float gj ( vec4 aQ ) { vec3 lf = vec3 ( 0.299 , 0.587 , 0.114 ) ; float lg = dot ( aQ . rgb , lf ) ; return lg ; }".split(" ")}]}}]}]};
f["include/coverage.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"COVERAGE_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"COVERAGE_GLSLF",aa:[""]},{$:"include",oa:"procedural.glslf"},{$:"txt",aa:"const float lh = 1000.0 ; bool C ( float L , float li ) { if ( li < 0.0 ) L = 1.0 - L ; float lj = floor ( L * lh ) ; float ll = floor ( lk ( gl_FragCoord . xy ) * lh ) ; if ( li > 0.0 ) return ll < lj ; else return ll >= lj ; }".split(" ")}]}}]}]};f["include/depth_fetch.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",
ba:"DEPTH_FETCH_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"DEPTH_FETCH_GLSLF",aa:[""]},{$:"include",oa:"std.glsl"},{$:"var",ba:"SHADOW_USAGE",aa:["NO_SHADOWS"]},{$:"var",ba:"CAMERA_TYPE",aa:["CAM_TYPE_PERSP"]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_CASTING",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float es ( in float lm , in vec2 ln ) { float dG = ln . x ; float lo = ln . y ;".split(" ")},{$:"cond",da:[{$:"if",ga:["CAMERA_TYPE","CAM_TYPE_PERSP",{$:"equal_expr",ia:2}],ha:{$:"grp",
da:[{$:"txt",aa:"return lo * ( 1.0 - dG / lm ) / ( lo - dG ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"return ( lm - dG ) / ( lo - dG ) ;".split(" ")}]}}]},{$:"txt",aa:["}"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"float gC ( in sampler2D lp , in vec2 f_ , in vec2 ln ) { float et = GLSL_TEXTURE ( lp , f_ ) . r ; float dG = ln . x ; float lo = ln . y ; float lm = 2.0 * dG / ( dG + lo - ( 2.0 * et - 1.0 ) * ( lo - dG ) ) ; return lm ; }".split(" ")}]}}]}]}}]}]};f["include/dynamic_grass.glslv"]=
{$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"DYNAMIC_GRASS_GLSLV",ha:{$:"grp",da:[{$:"define",ba:"DYNAMIC_GRASS_GLSLV",aa:[""]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"DYNAMIC_GRASS",aa:["0"]},{$:"var",ba:"BILLBOARD",aa:["0"]},{$:"var",ba:"GRASS_TEXTURE_SIZE",aa:["1024.0"]},{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS"],ha:{$:"grp",da:[{$:"include",oa:"math.glslv"},{$:"include",oa:"to_world.glslv"},{$:"txt",aa:"vec2 lt ( vec3 O , float lq , vec2 lr ) { vec2 ls = vec2 ( ( O . x - lr . x ) / lq , ( O . y - lr . y ) / lq ) ; return fract ( ls ) ; } vec2 lu ( vec2 gX , float lq , vec2 lr ) { return vec2 ( gX . x * lq , gX . y * lq ) + lr ; } au lv ( ) { return au ( vec3 ( - 10000.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) ) ; }".split(" ")},
{$:"cond",da:[{$:"if",ga:["GLSL3"],ha:{$:"grp",da:[{$:"txt",aa:"vec4 lF ( sampler2D lw , vec2 lx ) { float ly = 1.0 / GRASS_TEXTURE_SIZE ; vec4 lz = GLSL_TEXTURE ( lw , lx ) ; vec4 lA = GLSL_TEXTURE ( lw , lx + vec2 ( ly , 0.0 ) ) ; vec4 lB = GLSL_TEXTURE ( lw , lx + vec2 ( 0.0 , ly ) ) ; vec4 lC = GLSL_TEXTURE ( lw , lx + vec2 ( ly , ly ) ) ; float a = fract ( lx . x * GRASS_TEXTURE_SIZE ) ; vec4 lD = mix ( lz , lA , a ) ; vec4 lE = mix ( lB , lC , a ) ; float b = fract ( lx . y * GRASS_TEXTURE_SIZE ) ; return mix ( lD , lE , b ) ; }".split(" ")}]}}]},
{$:"txt",aa:"au be ( vec3 O , vec3 V , vec3 lG , vec3 W , vec3 U , vec3 ao , PRECISION sampler2D lH , sampler2D lI , vec3 lJ , float lK , vec3 lL , vec4 lM , mat3 N , mat3 Z ) { vec3 lN = T ( lM , vec3 ( 0.0 , 0.0 , - 1.0 ) ) ; float lO = - lN . x ; float lP = lN . y ; vec2 lr = vec2 ( lL . x - lK * ( 1.0 + lO ) / 2.0 , lL . y - lK * ( 1.0 - lP ) / 2.0 ) ; vec2 lQ = lt ( ao , lK , lr ) ; float lR = lK / 2.0 ; vec2 lS = abs ( lu ( lQ - vec2 ( 0.5 ) , lK , vec2 ( 0.0 ) ) ) ; float lT = lR * ( 1.0 + sqrt ( 2.0 ) ) / 2.0 ; if ( length ( lS ) > lT ) return lv ( ) ; float lU = lK / lJ . z ; vec2 lV = ( lQ - vec2 ( 0.5 ) ) * lU + vec2 ( 0.5 ) ; vec3 lW = lN * ( lK / lJ . z - 1.0 ) / 2.0 ; lV . x += lW . x ; lV . y += lW . y ; vec4 lX = GLSL_TEXTURE ( lI , lV ) ; float hK = lX . r ; if ( hK < u_scale_threshold ) return lv ( ) ; float lY = lJ . y - lJ . x ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["GLSL3"],ha:{$:"grp",da:[{$:"txt",aa:"float cn = lJ . y - ( lF ( lH , lV ) ) . r * lY ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"float cn = lJ . y - ( GLSL_TEXTURE ( lH , lV ) ) . r * lY ;".split(" ")}]}}]},{$:"txt",aa:"vec2 lZ = O . xy - ao . xy ; ao . xy = lu ( lQ , lK , lr ) ; ao . z = cn ; O . xy = ao . xy + lZ ; O . z *= hK ; O . z += cn ; vec3 aQ = lX . gba ;".split(" ")},{$:"cond",da:[{$:"if",ga:["BILLBOARD"],ha:{$:"grp",da:[{$:"txt",aa:"O -= ao ; mat3 l_ = as ( lL , ao , N , Z ) ; au aw = av ( O , ao , V , lG , W , U , l_ ) ; aw . ao = ao ; aw . aQ = aQ ; return ma ( aw ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"return ma ( au ( O , ao , V , lG , W , U , aQ ) ) ;".split(" ")}]}}]},{$:"txt",aa:["}"]}]}}]}]}}]}]};f["include/environment.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"ENVIRONMENT_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"ENVIRONMENT_GLSLF",aa:[""]},{$:"var",ba:"USE_ENVIRONMENT_LIGHT",aa:["0"]},{$:"var",ba:"SKY_COLOR",aa:["0"]},{$:"var",ba:"SKY_TEXTURE",aa:["0"]},{$:"txt",aa:"vec3 cE ( vec3 U ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["USE_ENVIRONMENT_LIGHT"],
ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["SKY_TEXTURE"],ha:{$:"grp",da:[{$:"txt",aa:"return GLSL_TEXTURE_CUBE ( u_sky_texture , U ) . rgb ;".split(" ")}]}},{$:"elif",ga:["SKY_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:"float mb = 0.5 * U . z + 0.5 ; return mix ( u_horizon_color , u_zenith_color , mb ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"return vec3 ( 1.0 ) ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"return vec3 ( 0.0 ) ;".split(" ")}]}}]},{$:"txt",aa:["}"]}]}}]}]};
f["include/fog.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"FOG_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"FOG_GLSLF",aa:[""]},{$:"var",ba:"USE_FOG",aa:["0"]},{$:"var",ba:"WATER_EFFECTS",aa:["0"]},{$:"var",ba:"FOG_TYPE",aa:["QUADRATIC"]},{$:"var",ba:"PROCEDURAL_FOG",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"cond",da:[{$:"if",ga:["USE_FOG"],ha:{$:"grp",da:[{$:"txt",aa:"void mg ( inout vec3 aQ , in float mc , in float cn , in vec4 md ) { float me = clamp ( ( mc - u_fog_params . z ) / u_fog_params . y , 0.0 , 1.0 ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FOG_TYPE","QUADRATIC",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["me","*=","me",";"]}]}},{$:"elif",ga:["FOG_TYPE","LINEAR",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[]}},{$:"elif",ga:["FOG_TYPE","INVERSE_QUADRATIC",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"me = sqrt ( me ) ;".split(" ")}]}}]},{$:"txt",aa:"if ( u_fog_params . w > 0.0 ) { if ( cn > u_fog_params . w ) me = 0.0 ; else { float mf = ( u_fog_params . w - max ( cn , 0.0 ) ) / u_fog_params . w ; me *= mf * mf ; } } md . a = 1.0 - ( 1.0 - me ) * ( 1.0 - u_fog_params . x ) ; aQ = mix ( aQ , md . rgb , md . a ) ; }".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["PROCEDURAL_FOG"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 ml ( in mat4 mh , in vec3 D ) { vec3 mi = mix ( mh [ 0 ] . rgb , mh [ 1 ] . rgb , ( D . x + 1.0 ) / 2.0 ) ; vec3 mj = mix ( mh [ 2 ] . rgb , mh [ 3 ] . rgb , ( D . y + 1.0 ) / 2.0 ) ; vec3 mk = vec3 ( mh [ 0 ] . a , mh [ 1 ] . a , mh [ 2 ] . a ) ; vec3 aQ = mix ( mi , mj , abs ( D . y ) ) ; aQ = mix ( aQ , mk , abs ( D . z ) ) ; bG ( aQ ) ; return aQ ; }".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS"],ha:{$:"grp",
da:[{$:"txt",aa:"void mn ( inout float mm ) { mm -= 0.5 ; mm = 4.0 * ( mm * mm * mm ) + 0.5 ; } void mt ( inout vec3 aQ , in float mc , in vec3 D , in float eG , in vec4 mo , in float fp ) { float mp = max ( D . z , 0.0 ) ; float mq = max ( mc - max ( eG / mp , 0.0 ) , 0.0 ) ; float mr = mo . w * mq ; vec3 eH = vec3 ( 0.0 , 0.02 , 0.05 ) ; vec3 ms = mo . rgb ; mr = min ( mr , 1.0 ) ; mn ( mr ) ; mr *= clamp ( 2.0 - fp , 0.0 , 1.0 ) ; vec3 eI = mix ( ms , eH , min ( mp , 1.0 ) ) ; eG = clamp ( - eG * 0.03 , 0.0 , 0.8 ) ; eI *= 1.0 - eG ; aQ = mix ( aQ , eI , mr ) ; }".split(" ")}]}}]},
{$:"txt",aa:"void bW ( inout vec3 aQ , float mc , vec3 D , float bT ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["USE_FOG"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["PROCEDURAL_FOG"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 mh = ml ( u_cube_fog , D ) ; vec4 eI = vec4 ( mh , u_fog_color_density . a ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["vec4","eI","=","u_fog_color_density",";"]}]}}]},{$:"txt",aa:"mg ( aQ , mc , h . z , eI ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS"],
ha:{$:"grp",da:[{$:"txt",aa:"mt ( aQ , mc , D , u_cam_water_depth , u_underwater_fog_color_density , bT ) ;".split(" ")}]}}]},{$:"txt",aa:["}"]}]}}]}]};f["include/fxaa.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"FXAA_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"FXAA_GLSLF",aa:[""]},{$:"var",ba:"FXAA_BLEND4WEB",aa:["1"]},{$:"var",ba:"FXAA_QUALITY_P12",aa:["0.0"]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_PS3",ha:{$:"grp",da:[{$:"define",ba:"FXAA_PS3",aa:["0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_360",
ha:{$:"grp",da:[{$:"define",ba:"FXAA_360",aa:["0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_360_OPT",ha:{$:"grp",da:[{$:"define",ba:"FXAA_360_OPT",aa:["0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_PC",ha:{$:"grp",da:[{$:"define",ba:"FXAA_PC",aa:["0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_PC_CONSOLE",ha:{$:"grp",da:[{$:"define",ba:"FXAA_PC_CONSOLE",aa:["0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_GLSL_120",ha:{$:"grp",da:[{$:"define",ba:"FXAA_GLSL_120",aa:["0"]}]}}]},{$:"cond",da:[{$:"ifndef",
ba:"FXAA_GLSL_130",ha:{$:"grp",da:[{$:"define",ba:"FXAA_GLSL_130",aa:["0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_HLSL_3",ha:{$:"grp",da:[{$:"define",ba:"FXAA_HLSL_3",aa:["0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_HLSL_4",ha:{$:"grp",da:[{$:"define",ba:"FXAA_HLSL_4",aa:["0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_HLSL_5",ha:{$:"grp",da:[{$:"define",ba:"FXAA_HLSL_5",aa:["0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_GREEN_AS_LUMA",ha:{$:"grp",da:[{$:"define",ba:"FXAA_GREEN_AS_LUMA",aa:["0"]}]}}]},
{$:"cond",da:[{$:"ifndef",ba:"FXAA_EARLY_EXIT",ha:{$:"grp",da:[{$:"define",ba:"FXAA_EARLY_EXIT",aa:["1"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_DISCARD",ha:{$:"grp",da:[{$:"define",ba:"FXAA_DISCARD",aa:["0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_FAST_PIXEL_OFFSET",ha:{$:"grp",da:[{$:"cond",da:[{$:"ifdef",ba:"GL_EXT_gpu_shader4",ha:{$:"grp",da:[{$:"define",ba:"FXAA_FAST_PIXEL_OFFSET",aa:["1"]}]}}]},{$:"cond",da:[{$:"ifdef",ba:"GL_NV_gpu_shader5",ha:{$:"grp",da:[{$:"define",ba:"FXAA_FAST_PIXEL_OFFSET",
aa:["1"]}]}}]},{$:"cond",da:[{$:"ifdef",ba:"GL_ARB_gpu_shader5",ha:{$:"grp",da:[{$:"define",ba:"FXAA_FAST_PIXEL_OFFSET",aa:["1"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_FAST_PIXEL_OFFSET",ha:{$:"grp",da:[{$:"define",ba:"FXAA_FAST_PIXEL_OFFSET",aa:["0"]}]}}]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_GATHER4_ALPHA",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["FXAA_HLSL_5",1,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_GATHER4_ALPHA",aa:["1"]}]}}]},{$:"cond",da:[{$:"ifdef",ba:"GL_ARB_gpu_shader5",
ha:{$:"grp",da:[{$:"define",ba:"FXAA_GATHER4_ALPHA",aa:["1"]}]}}]},{$:"cond",da:[{$:"ifdef",ba:"GL_NV_gpu_shader5",ha:{$:"grp",da:[{$:"define",ba:"FXAA_GATHER4_ALPHA",aa:["1"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_GATHER4_ALPHA",ha:{$:"grp",da:[{$:"define",ba:"FXAA_GATHER4_ALPHA",aa:["0"]}]}}]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:[1],ha:{$:"grp",da:[{$:"define",ba:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",aa:["8.0"]}]}}]},{$:"cond",
da:[{$:"if",ga:[0],ha:{$:"grp",da:[{$:"define",ba:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",aa:["4.0"]}]}}]},{$:"cond",da:[{$:"if",ga:[0],ha:{$:"grp",da:[{$:"define",ba:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",aa:["2.0"]}]}}]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:[1],ha:{$:"grp",da:[{$:"define",ba:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",aa:["0.125"]}]}},{$:"else",ha:{$:"grp",da:[{$:"define",ba:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",aa:["0.25"]}]}}]}]}}]},
{$:"cond",da:[{$:"ifndef",ba:"FXAA_QUALITY_PRESET",ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PRESET",aa:["12"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",10,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",aa:["3"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["3.0"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["12.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",11,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",
aa:["4"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["3.0"]},{$:"define",ba:"FXAA_QUALITY_P3",aa:["12.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",12,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",aa:["5"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P3",aa:["4.0"]},
{$:"define",ba:"FXAA_QUALITY_P4",aa:["12.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",13,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",aa:["6"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P3",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P4",aa:["4.0"]},{$:"define",ba:"FXAA_QUALITY_P5",aa:["12.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",
14,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",aa:["7"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P3",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P4",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P5",aa:["4.0"]},{$:"define",ba:"FXAA_QUALITY_P6",aa:["12.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",15,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",
ba:"FXAA_QUALITY_PS",aa:["8"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P3",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P4",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P5",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P6",aa:["4.0"]},{$:"define",ba:"FXAA_QUALITY_P7",aa:["12.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",20,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",
aa:["3"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["8.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",21,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",aa:["4"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P3",aa:["8.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",
22,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",aa:["5"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P3",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P4",aa:["8.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",23,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",aa:["6"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",
ba:"FXAA_QUALITY_P1",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P3",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P4",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P5",aa:["8.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",24,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",aa:["7"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P3",
aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P4",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P5",aa:["3.0"]},{$:"define",ba:"FXAA_QUALITY_P6",aa:["8.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",25,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",aa:["8"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P3",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P4",aa:["2.0"]},
{$:"define",ba:"FXAA_QUALITY_P5",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P6",aa:["4.0"]},{$:"define",ba:"FXAA_QUALITY_P7",aa:["8.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",26,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",aa:["9"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P3",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P4",aa:["2.0"]},{$:"define",
ba:"FXAA_QUALITY_P5",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P6",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P7",aa:["4.0"]},{$:"define",ba:"FXAA_QUALITY_P8",aa:["8.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",27,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",aa:["10"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P3",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P4",
aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P5",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P6",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P7",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P8",aa:["4.0"]},{$:"define",ba:"FXAA_QUALITY_P9",aa:["8.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",28,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",aa:["11"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["2.0"]},
{$:"define",ba:"FXAA_QUALITY_P3",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P4",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P5",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P6",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P7",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P8",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P9",aa:["4.0"]},{$:"define",ba:"FXAA_QUALITY_P10",aa:["8.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",29,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",aa:["12"]},{$:"define",
ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P3",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P4",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P5",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P6",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P7",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P8",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P9",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P10",aa:["4.0"]},{$:"define",ba:"FXAA_QUALITY_P11",
aa:["8.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",39,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",aa:["12"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P3",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P4",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P5",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P6",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P7",aa:["2.0"]},
{$:"define",ba:"FXAA_QUALITY_P8",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P9",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P10",aa:["4.0"]},{$:"define",ba:"FXAA_QUALITY_P11",aa:["8.0"]}]}}]},{$:"include",oa:"color_util.glslf"},{$:"txt",aa:"float mu ( float x ) { return clamp ( x , 0.0 , 1.0 ) ; }".split(" ")},{$:"cond",da:[{$:"if",ga:["FXAA_BLEND4WEB",1,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 mv ( sampler2D t , vec2 p ) { return GLSL_TEXTURE ( t , p ) ; } vec4 mx ( sampler2D t , vec2 p , vec2 mw , vec2 r ) { return GLSL_TEXTURE ( t , p + ( mw * r ) ) ; }".split(" ")}]}}]},
{$:"txt",aa:"vec4 gz ( vec2 fr , sampler2D ie , vec2 my , float mz , float mA , float mB ) { vec2 mC ; mC . x = fr . x ; mC . y = fr . y ;".split(" ")},{$:"cond",da:[{$:"if",ga:["FXAA_GATHER4_ALPHA",1,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec4 mD = mv ( ie , mC ) ; float gk = gj ( mD ) ; float mE = gj ( mx ( ie , mC , vec2 ( 0 , 1 ) , my . xy ) ) ; float mF = gj ( mx ( ie , mC , vec2 ( 1 , 0 ) , my . xy ) ) ; float mG = gj ( mx ( ie , mC , vec2 ( 0 , - 1 ) , my . xy ) ) ; float mH = gj ( mx ( ie , mC , vec2 ( - 1 , 0 ) , my . xy ) ) ;".split(" ")}]}}]},
{$:"txt",aa:"float mI = max ( mE , gk ) ; float mJ = min ( mE , gk ) ; float mK = max ( mF , mI ) ; float mL = min ( mF , mJ ) ; float mM = max ( mG , mH ) ; float mN = min ( mG , mH ) ; float mO = max ( mM , mK ) ; float mP = min ( mN , mL ) ; float mQ = mO * mA ; float mR = mO - mP ; float mS = max ( mB , mQ ) ; bool mT = mR < mS ; if ( mT ) return mD ;".split(" ")},{$:"cond",da:[{$:"if",ga:["FXAA_GATHER4_ALPHA",0,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float gl = gj ( mx ( ie , mC , vec2 ( - 1 , - 1 ) , my . xy ) ) ; float go = gj ( mx ( ie , mC , vec2 ( 1 , 1 ) , my . xy ) ) ; float gm = gj ( mx ( ie , mC , vec2 ( 1 , - 1 ) , my . xy ) ) ; float gn = gj ( mx ( ie , mC , vec2 ( - 1 , 1 ) , my . xy ) ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[]}}]},{$:"txt",aa:"float mU = mG + mE ; float mV = mH + mF ; float mW = 1.0 / mR ; float mX = mU + mV ; float mY = ( - 2.0 * gk ) + mU ; float mZ = ( - 2.0 * gk ) + mV ; float m_ = gm + go ; float na = gl + gm ; float nb = ( - 2.0 * mF ) + m_ ; float nc = ( - 2.0 * mG ) + na ; float nd = gl + gn ; float ne = gn + go ; float nf = ( abs ( mY ) * 2.0 ) + abs ( nb ) ; float ng = ( abs ( mZ ) * 2.0 ) + abs ( nc ) ; float nh = ( - 2.0 * mH ) + nd ; float ni = ( - 2.0 * mE ) + ne ; float nj = abs ( nh ) + nf ; float nk = abs ( ni ) + ng ; float nl = nd + m_ ; float nm = my . x ; bool nn = nj >= nk ; float no = mX * 2.0 + nl ; if ( ! nn ) mG = mH ; if ( ! nn ) mE = mF ; if ( nn ) nm = my . y ; float np = ( no * ( 1.0 / 12.0 ) ) - gk ; float nq = mG - gk ; float nr = mE - gk ; float ns = mG + gk ; float nt = mE + gk ; bool nu = abs ( nq ) >= abs ( nr ) ; float nv = max ( abs ( nq ) , abs ( nr ) ) ; if ( nu ) nm = - nm ; float nw = mu ( abs ( np ) * mW ) ; vec2 nx ; nx . x = mC . x ; nx . y = mC . y ; vec2 ny ; ny . x = ( ! nn ) ? 0.0 : my . x ; ny . y = ( nn ) ? 0.0 : my . y ; if ( ! nn ) nx . x += nm * 0.5 ; if ( nn ) nx . y += nm * 0.5 ; vec2 nz ; nz . x = nx . x - ny . x * FXAA_QUALITY_P0 ; nz . y = nx . y - ny . y * FXAA_QUALITY_P0 ; vec2 nA ; nA . x = nx . x + ny . x * FXAA_QUALITY_P0 ; nA . y = nx . y + ny . y * FXAA_QUALITY_P0 ; float nB = ( ( - 2.0 ) * nw ) + 3.0 ; float nC = gj ( mv ( ie , nz ) ) ; float nD = nw * nw ; float nE = gj ( mv ( ie , nA ) ) ; if ( ! nu ) ns = nt ; float nF = nv * 1.0 / 4.0 ; float nG = gk - ns * 0.5 ; float nH = nB * nD ; bool nI = nG < 0.0 ; nC -= ns * 0.5 ; nE -= ns * 0.5 ; bool nJ = abs ( nC ) >= nF ; bool nK = abs ( nE ) >= nF ; if ( ! nJ ) nz . x -= ny . x * FXAA_QUALITY_P1 ; if ( ! nJ ) nz . y -= ny . y * FXAA_QUALITY_P1 ; bool nL = ( ! nJ ) || ( ! nK ) ; if ( ! nK ) nA . x += ny . x * FXAA_QUALITY_P1 ; if ( ! nK ) nA . y += ny . y * FXAA_QUALITY_P1 ; if ( nL ) { if ( ! nJ ) nC = gj ( mv ( ie , nz . xy ) ) ; if ( ! nK ) nE = gj ( mv ( ie , nA . xy ) ) ; if ( ! nJ ) nC = nC - ns * 0.5 ; if ( ! nK ) nE = nE - ns * 0.5 ; nJ = abs ( nC ) >= nF ; nK = abs ( nE ) >= nF ; if ( ! nJ ) nz . x -= ny . x * FXAA_QUALITY_P2 ; if ( ! nJ ) nz . y -= ny . y * FXAA_QUALITY_P2 ; nL = ( ! nJ ) || ( ! nK ) ; if ( ! nK ) nA . x += ny . x * FXAA_QUALITY_P2 ; if ( ! nK ) nA . y += ny . y * FXAA_QUALITY_P2 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PS",3,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( nL ) { if ( ! nJ ) nC = gj ( mv ( ie , nz . xy ) ) ; if ( ! nK ) nE = gj ( mv ( ie , nA . xy ) ) ; if ( ! nJ ) nC = nC - ns * 0.5 ; if ( ! nK ) nE = nE - ns * 0.5 ; nJ = abs ( nC ) >= nF ; nK = abs ( nE ) >= nF ; if ( ! nJ ) nz . x -= ny . x * FXAA_QUALITY_P3 ; if ( ! nJ ) nz . y -= ny . y * FXAA_QUALITY_P3 ; nL = ( ! nJ ) || ( ! nK ) ; if ( ! nK ) nA . x += ny . x * FXAA_QUALITY_P3 ; if ( ! nK ) nA . y += ny . y * FXAA_QUALITY_P3 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PS",4,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( nL ) { if ( ! nJ ) nC = gj ( mv ( ie , nz . xy ) ) ; if ( ! nK ) nE = gj ( mv ( ie , nA . xy ) ) ; if ( ! nJ ) nC = nC - ns * 0.5 ; if ( ! nK ) nE = nE - ns * 0.5 ; nJ = abs ( nC ) >= nF ; nK = abs ( nE ) >= nF ; if ( ! nJ ) nz . x -= ny . x * FXAA_QUALITY_P4 ; if ( ! nJ ) nz . y -= ny . y * FXAA_QUALITY_P4 ; nL = ( ! nJ ) || ( ! nK ) ; if ( ! nK ) nA . x += ny . x * FXAA_QUALITY_P4 ; if ( ! nK ) nA . y += ny . y * FXAA_QUALITY_P4 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PS",5,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( nL ) { if ( ! nJ ) nC = gj ( mv ( ie , nz . xy ) ) ; if ( ! nK ) nE = gj ( mv ( ie , nA . xy ) ) ; if ( ! nJ ) nC = nC - ns * 0.5 ; if ( ! nK ) nE = nE - ns * 0.5 ; nJ = abs ( nC ) >= nF ; nK = abs ( nE ) >= nF ; if ( ! nJ ) nz . x -= ny . x * FXAA_QUALITY_P5 ; if ( ! nJ ) nz . y -= ny . y * FXAA_QUALITY_P5 ; nL = ( ! nJ ) || ( ! nK ) ; if ( ! nK ) nA . x += ny . x * FXAA_QUALITY_P5 ; if ( ! nK ) nA . y += ny . y * FXAA_QUALITY_P5 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PS",6,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( nL ) { if ( ! nJ ) nC = gj ( mv ( ie , nz . xy ) ) ; if ( ! nK ) nE = gj ( mv ( ie , nA . xy ) ) ; if ( ! nJ ) nC = nC - ns * 0.5 ; if ( ! nK ) nE = nE - ns * 0.5 ; nJ = abs ( nC ) >= nF ; nK = abs ( nE ) >= nF ; if ( ! nJ ) nz . x -= ny . x * FXAA_QUALITY_P6 ; if ( ! nJ ) nz . y -= ny . y * FXAA_QUALITY_P6 ; nL = ( ! nJ ) || ( ! nK ) ; if ( ! nK ) nA . x += ny . x * FXAA_QUALITY_P6 ; if ( ! nK ) nA . y += ny . y * FXAA_QUALITY_P6 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PS",7,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( nL ) { if ( ! nJ ) nC = gj ( mv ( ie , nz . xy ) ) ; if ( ! nK ) nE = gj ( mv ( ie , nA . xy ) ) ; if ( ! nJ ) nC = nC - ns * 0.5 ; if ( ! nK ) nE = nE - ns * 0.5 ; nJ = abs ( nC ) >= nF ; nK = abs ( nE ) >= nF ; if ( ! nJ ) nz . x -= ny . x * FXAA_QUALITY_P7 ; if ( ! nJ ) nz . y -= ny . y * FXAA_QUALITY_P7 ; nL = ( ! nJ ) || ( ! nK ) ; if ( ! nK ) nA . x += ny . x * FXAA_QUALITY_P7 ; if ( ! nK ) nA . y += ny . y * FXAA_QUALITY_P7 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PS",8,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( nL ) { if ( ! nJ ) nC = gj ( mv ( ie , nz . xy ) ) ; if ( ! nK ) nE = gj ( mv ( ie , nA . xy ) ) ; if ( ! nJ ) nC = nC - ns * 0.5 ; if ( ! nK ) nE = nE - ns * 0.5 ; nJ = abs ( nC ) >= nF ; nK = abs ( nE ) >= nF ; if ( ! nJ ) nz . x -= ny . x * FXAA_QUALITY_P8 ; if ( ! nJ ) nz . y -= ny . y * FXAA_QUALITY_P8 ; nL = ( ! nJ ) || ( ! nK ) ; if ( ! nK ) nA . x += ny . x * FXAA_QUALITY_P8 ; if ( ! nK ) nA . y += ny . y * FXAA_QUALITY_P8 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PS",9,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( nL ) { if ( ! nJ ) nC = gj ( mv ( ie , nz . xy ) ) ; if ( ! nK ) nE = gj ( mv ( ie , nA . xy ) ) ; if ( ! nJ ) nC = nC - ns * 0.5 ; if ( ! nK ) nE = nE - ns * 0.5 ; nJ = abs ( nC ) >= nF ; nK = abs ( nE ) >= nF ; if ( ! nJ ) nz . x -= ny . x * FXAA_QUALITY_P9 ; if ( ! nJ ) nz . y -= ny . y * FXAA_QUALITY_P9 ; nL = ( ! nJ ) || ( ! nK ) ; if ( ! nK ) nA . x += ny . x * FXAA_QUALITY_P9 ; if ( ! nK ) nA . y += ny . y * FXAA_QUALITY_P9 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PS",10,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( nL ) { if ( ! nJ ) nC = gj ( mv ( ie , nz . xy ) ) ; if ( ! nK ) nE = gj ( mv ( ie , nA . xy ) ) ; if ( ! nJ ) nC = nC - ns * 0.5 ; if ( ! nK ) nE = nE - ns * 0.5 ; nJ = abs ( nC ) >= nF ; nK = abs ( nE ) >= nF ; if ( ! nJ ) nz . x -= ny . x * FXAA_QUALITY_P10 ; if ( ! nJ ) nz . y -= ny . y * FXAA_QUALITY_P10 ; nL = ( ! nJ ) || ( ! nK ) ; if ( ! nK ) nA . x += ny . x * FXAA_QUALITY_P10 ; if ( ! nK ) nA . y += ny . y * FXAA_QUALITY_P10 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PS",11,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( nL ) { if ( ! nJ ) nC = gj ( mv ( ie , nz . xy ) ) ; if ( ! nK ) nE = gj ( mv ( ie , nA . xy ) ) ; if ( ! nJ ) nC = nC - ns * 0.5 ; if ( ! nK ) nE = nE - ns * 0.5 ; nJ = abs ( nC ) >= nF ; nK = abs ( nE ) >= nF ; if ( ! nJ ) nz . x -= ny . x * FXAA_QUALITY_P11 ; if ( ! nJ ) nz . y -= ny . y * FXAA_QUALITY_P11 ; nL = ( ! nJ ) || ( ! nK ) ; if ( ! nK ) nA . x += ny . x * FXAA_QUALITY_P11 ; if ( ! nK ) nA . y += ny . y * FXAA_QUALITY_P11 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PS",12,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( nL ) { if ( ! nJ ) nC = gj ( mv ( ie , nz . xy ) ) ; if ( ! nK ) nE = gj ( mv ( ie , nA . xy ) ) ; if ( ! nJ ) nC = nC - ns * 0.5 ; if ( ! nK ) nE = nE - ns * 0.5 ; nJ = abs ( nC ) >= nF ; nK = abs ( nE ) >= nF ; if ( ! nJ ) nz . x -= ny . x * FXAA_QUALITY_P12 ; if ( ! nJ ) nz . y -= ny . y * FXAA_QUALITY_P12 ; nL = ( ! nJ ) || ( ! nK ) ; if ( ! nK ) nA . x += ny . x * FXAA_QUALITY_P12 ; if ( ! nK ) nA . y += ny . y * FXAA_QUALITY_P12 ; }".split(" ")}]}}]},
{$:"txt",aa:["}"]}]}}]},{$:"txt",aa:["}"]}]}}]},{$:"txt",aa:["}"]}]}}]},{$:"txt",aa:["}"]}]}}]},{$:"txt",aa:["}"]}]}}]},{$:"txt",aa:["}"]}]}}]},{$:"txt",aa:["}"]}]}}]},{$:"txt",aa:["}"]}]}}]},{$:"txt",aa:["}"]}]}}]},{$:"txt",aa:"} float nM = mC . x - nz . x ; float nN = nA . x - mC . x ; if ( ! nn ) nM = mC . y - nz . y ; if ( ! nn ) nN = nA . y - mC . y ; bool nO = ( nC < 0.0 ) != nI ; float nP = ( nN + nM ) ; bool nQ = ( nE < 0.0 ) != nI ; float nR = 1.0 / nP ; bool nS = nM < nN ; float nT = min ( nM , nN ) ; bool nU = nS ? nO : nQ ; float nV = nH * nH ; float nW = ( nT * ( - nR ) ) + 0.5 ; float nX = nV * mz ; float nY = nU ? nW : 0.0 ; float nZ = max ( nY , nX ) ; if ( ! nn ) mC . x += nZ * nm ; if ( nn ) mC . y += nZ * nm ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FXAA_DISCARD",1,{$:"equal_expr",ia:2},"FXAA_BLEND4WEB",1,{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return mv ( ie , mC ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"return vec4 ( mv ( ie , mC ) . xyz , gk ) ;".split(" ")}]}}]},{$:"txt",aa:["}"]}]}}]}]};f["include/halo_color.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"HALO_COLOR_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"HALO_COLOR_GLSLF",aa:[""]},{$:"var",ba:"NUM_RINGS",
aa:["0"]},{$:"var",ba:"NUM_LINES",aa:["0"]},{$:"var",ba:"NUM_STARS",aa:["0"]},{$:"var",ba:"SKY_STARS",aa:["0"]},{$:"var",ba:"WAVES_HEIGHT",aa:["1.0"]},{$:"var",ba:"WATER_EFFECTS",aa:["0"]},{$:"var",ba:"DISABLE_FOG",aa:["0"]},{$:"cond",da:[{$:"if",ga:["NUM_RINGS","NUM_LINES",{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"const int n_ = NUM_RINGS ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"const int n_ = NUM_LINES ;".split(" ")}]}}]},{$:"txt",aa:"float oa ( float x ) { return x - floor ( x * ( 1.0 / 0.01 ) ) * 0.01 ; }".split(" ")},
{$:"cond",da:[{$:"if",ga:["NUM_RINGS"],ha:{$:"grp",da:[{$:"txt",aa:"void oh ( inout float ob , in float oc [ n_ ] , in float od ) { for ( int a = 0 ; a < NUM_RINGS ; a ++ ) { float oe = 40.0 * oc [ a ] ; float of = 300.0 * ( oa ( oe ) - 0.005 ) ; float og = oe ; float me = abs ( og * ( u_halo_size * of - od ) ) ; ob += 1.0 - min ( me , 1.0 ) ; } }".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_LINES"],ha:{$:"grp",da:[{$:"txt",aa:"void om ( inout float oi , in float oc [ n_ ] , in float aM ) { for ( int a = 0 ; a < NUM_LINES ; a ++ ) { float oj = oc [ a ] ; float ok = oj ; float ol = 1000.0 * ( oa ( oj ) - 0.005 ) ; float me = 20.0 * abs ( ok * A . x + ol * A . y ) ; oi += 1.0 - min ( me , 1.0 ) ; } oi *= aM ; }".split(" ")}]}}]},
{$:"txt",aa:"void oq ( inout float aM , in vec2 ce ) { float on , bP ; bP = atan ( ce . y , ce . x ) ; bP *= ( 1.0 + 0.25 * float ( NUM_STARS ) ) ; float oo = cos ( bP ) ; float op = sin ( bP ) ; bP = ( oo * ce . x + op * ce . y ) * ( oo * ce . y - op * ce . x ) ; on = abs ( bP ) ; if ( on < 1.0 ) { on = ( 0.01 * u_halo_size ) / ( on ) ; aM *= sqrt ( min ( on , 1.0 ) ) ; } } vec4 bl ( ) { float aM = ( A . x * A . x + A . y * A . y ) ; float od = sqrt ( aM ) ; aM = max ( 1.0 - aM , 0.0 ) ; aM = pow ( aM , u_halo_hardness ) ; float L = u_diffuse_color . a ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["NUM_RINGS","NUM_LINES",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float oc [ n_ ] ; for ( int cq = 0 ; cq < n_ ; cq ++ ) { oc [ cq ] = fract ( bk / float ( cq + 1 ) ) - 1.0 ; }".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_RINGS"],ha:{$:"grp",da:[{$:"txt",aa:"float ob = 0.0 ; oh ( ob , oc , od ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_LINES"],ha:{$:"grp",da:[{$:"txt",aa:"float oi = 0.0 ; om ( oi , oc , aM ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",
ga:["NUM_STARS"],ha:{$:"grp",da:[{$:"txt",aa:"oq ( aM , A ) ;".split(" ")}]}}]},{$:"txt",aa:"aM *= L ; vec3 aQ = u_diffuse_color . rgb ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NUM_RINGS"],ha:{$:"grp",da:[{$:"txt",aa:"ob *= aM ; aQ += u_halo_rings_color * ob ; aM += ob ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_LINES"],ha:{$:"grp",da:[{$:"txt",aa:"oi *= L ; aQ += u_halo_lines_color * oi ; aM += oi ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SKY_STARS"],ha:{$:"grp",da:[{$:"txt",aa:"aM *= max ( 1.0 - 2.0 * u_sun_intensity . x , 0.0 ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS","DISABLE_FOG",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float lc = u_halo_stars_blend * ( bj . y - u_halo_stars_height ) ; aM *= clamp ( lc , 0.0 , 1.0 ) ; aM *= min ( u_cam_water_depth + 2.0 * WAVES_HEIGHT , 1.0 ) ;".split(" ")}]}}]}]}}]},{$:"txt",aa:"vec4 or = vec4 ( aQ , aM ) ; return or ; }".split(" ")}]}}]}]};f["include/lighting_nodes.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"LIGHTING_NODES_GLSLF",
ha:{$:"grp",da:[{$:"define",ba:"LIGHTING_NODES_GLSLF",aa:[""]},{$:"include",oa:"std.glsl"},{$:"node",ba:"LIGHTING_BEGIN",ma:[],la:[{$:"node_out",ba:"oF",fa:["vec3"],ea:!1},{$:"node_out",ba:"oG",fa:["vec3"],ea:!1},{$:"node_out",ba:"oH",fa:["vec3"],ea:!1},{$:"node_out",ba:"oI",fa:["vec3"],ea:!0},{$:"node_out",ba:"oJ",fa:["vec3"],ea:!0},{$:"node_out",ba:"oK",fa:["vec2"],ea:!0},{$:"node_out",ba:"oL",fa:["vec2"],ea:!0},{$:"node_out",ba:"oM",fa:["vec4"],ea:!0},{$:"node_out",ba:"oN",fa:["float"],ea:!0},
{$:"node_out",ba:"oO",fa:["vec4"],ea:!0}],ja:[{$:"txt",aa:"oF = os ; oG = ot ; oH = ou ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_oI"],ja:[{$:"txt",aa:["oI","=","ov",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_oJ"],ja:[{$:"txt",aa:["oJ","=","ox",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_oL"],ja:[{$:"txt",aa:["oL","=","oz",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_oK"],ja:[{$:"txt",aa:["oK","=","oA",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_oM"],
ja:[{$:"txt",aa:["oM","=","oB",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_oN"],ja:[{$:"txt",aa:["oN","=","oC",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_oO"],ja:[{$:"txt",aa:["oO","=","oD",";"]}]}]}]},{$:"node",ba:"LIGHTING_AMBIENT",ma:[],la:[{$:"node_in",ba:"oP",fa:["vec3"],ea:!1},{$:"node_in",ba:"oQ",fa:["vec3"],ea:!1},{$:"node_in",ba:"oR",fa:["vec3"],ea:!1},{$:"node_out",ba:"oS",fa:["vec4"],ea:!1},{$:"node_out",ba:"oT",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"oS = vec4 ( oP + oR * oQ , _0_0 ) ; oT = vec3 ( _0_0 ) ;".split(" ")}]},
{$:"node",ba:"LIGHTING_LAMP",ma:[{$:"node_var",ba:"LAMP_TYPE",aa:["HEMI"]},{$:"node_var",ba:"LAMP_IND",aa:["0"]},{$:"node_var",ba:"LAMP_SPOT_SIZE",aa:["0.8"]},{$:"node_var",ba:"LAMP_SPOT_BLEND",aa:["0.03"]},{$:"node_var",ba:"LAMP_LIGHT_DIST",aa:["30.0"]},{$:"node_var",ba:"LAMP_SHADOW_MAP_IND",aa:["-","1"]},{$:"node_var",ba:"LAMP_USE_SPHERE",aa:["0"]}],la:[{$:"node_in",ba:"oU",fa:["vec4"],ea:!1},{$:"node_out",ba:"oV",fa:["vec3"],ea:!1},{$:"node_out",ba:"oW",fa:["vec2"],ea:!1},{$:"node_out",ba:"oX",
fa:["vec3"],ea:!1},{$:"node_out",ba:"oY",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"oW = vec2 ( u_light_positions [ LAMP_IND ] . w , u_light_color_intensities [ LAMP_IND ] . w ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_TYPE","HEMI",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:["oY","=","_0_5",";"]}]},{$:"node_else",ja:[{$:"txt",aa:["oY","=","_0_0",";"]}]}]},{$:"txt",aa:"oX = u_light_color_intensities [ LAMP_IND ] . xyz ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_SHADOW_MAP_IND",
1,{$:"negative_expr",ia:1},{$:"non_equal_expr",ia:2}],ja:[{$:"txt",aa:"oX *= oU [ LAMP_SHADOW_MAP_IND ] ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_TYPE","SPOT",{$:"equal_expr",ia:2},"LAMP_TYPE","POINT",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ja:[{$:"txt",aa:"vec3 oZ = u_light_positions [ LAMP_IND ] . xyz ; oV = oZ - ow ; float aM = length ( oV ) ; float o_ = LAMP_LIGHT_DIST / ( LAMP_LIGHT_DIST + aM * aM ) ; oV = normalize ( oV ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",
ga:["LAMP_TYPE","SPOT",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"vec3 pa = u_light_directions [ LAMP_IND ] ; float pb = dot ( oV , pa ) ; pb *= smoothstep ( _0_0 , _1_0 , ( pb - LAMP_SPOT_SIZE ) / LAMP_SPOT_BLEND ) ; o_ *= pb ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_USE_SPHERE"],ja:[{$:"txt",aa:"o_ *= max ( LAMP_LIGHT_DIST - aM , _0_0 ) / LAMP_LIGHT_DIST ;".split(" ")}]}]},{$:"txt",aa:["oX","*=","o_",";"]}]},{$:"node_else",ja:[{$:"txt",aa:"oV = u_light_directions [ LAMP_IND ] ;".split(" ")}]}]}]},
{$:"node",ba:"DIFFUSE_FRESNEL",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pc",fa:["vec3"],ea:!1},{$:"node_in",ba:"pd",fa:["vec2"],ea:!1},{$:"node_in",ba:"pe",fa:["vec3"],ea:!1},{$:"node_in",ba:"pf",fa:["float"],ea:!1},{$:"node_in",ba:"pg",fa:["vec2"],ea:!1},{$:"node_out",ba:"ph",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pi = cross ( pc , B . xyz ) ; pe = cross ( pi , B . xyz ) ; pe = - normalize ( pe ) ;".split(" ")}]}]},
{$:"txt",aa:"ph = _0_0 ; if ( pd . r != _0_0 ) { float pj = ( _1_0 - pf ) * dot ( pe , pc ) + pf ; if ( pg [ 0 ] == _0_0 ) { ph = _1_0 ; } else { float t = _1_0 + abs ( pj ) ; t = pg [ 1 ] + ( _1_0 - pg [ 1 ] ) * pow ( t , pg [ 0 ] ) ; ph = clamp ( t , _0_0 , _1_0 ) ; } ph = max ( ph , _0_0 ) ; }".split(" ")}]},{$:"node",ba:"DIFFUSE_LAMBERT",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pk",fa:["vec3"],ea:!1},{$:"node_in",ba:"pl",fa:["vec2"],ea:!1},{$:"node_in",ba:"pm",
fa:["vec3"],ea:!1},{$:"node_in",ba:"pn",fa:["float"],ea:!1},{$:"node_out",ba:"po",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pi = cross ( pk , B . xyz ) ; pm = cross ( pi , B . xyz ) ; pm = - normalize ( pm ) ;".split(" ")}]}]},{$:"txt",aa:"po = _0_0 ; if ( pl . r != _0_0 ) { float pj = ( _1_0 - pn ) * dot ( pm , pk ) + pn ; po = max ( pj , _0_0 ) ; }".split(" ")}]},{$:"node",ba:"DIFFUSE_OREN_NAYAR",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",
aa:["0"]}],la:[{$:"node_in",ba:"pr",fa:["vec3"],ea:!1},{$:"node_in",ba:"pu",fa:["vec2"],ea:!1},{$:"node_in",ba:"pv",fa:["vec3"],ea:!1},{$:"node_in",ba:"pw",fa:["float"],ea:!1},{$:"node_in",ba:"px",fa:["vec2"],ea:!1},{$:"node_out",ba:"py",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pi = cross ( pr , B . xyz ) ; pv = cross ( pi , B . xyz ) ; pv = - normalize ( pv ) ;".split(" ")}]}]},{$:"txt",aa:"py = _0_0 ; if ( pu . r != _0_0 ) { float pj = ( _1_0 - pw ) * dot ( pv , pr ) + pw ; if ( px [ 0 ] > _0_0 ) { float pz = max ( dot ( pv , oy ) , _0_0 ) ; float pA = px [ 0 ] * px [ 0 ] ; float cG = _1_0 - _0_5 * ( pA / ( pA + 0.33 ) ) ; vec3 pB = pr - pj * pv ; vec3 pC = oy - pz * pv ; if ( length ( pB ) == _0_0 || length ( pC ) == _0_0 || abs ( pj ) > _1_0 || abs ( pz ) > _1_0 ) py = pj * cG ; else { float pD = acos ( pj ) ; float pE = acos ( pz ) ; vec3 pF = normalize ( pB ) ; vec3 pG = normalize ( pC ) ; float a , b ; a = max ( pD , pE ) ; b = min ( pD , pE ) ; b *= 0.95 ; float t = max ( dot ( pF , pG ) , _0_0 ) ; float hS = 0.45 * ( pA / ( pA + 0.09 ) ) ; py = pj * ( cG + ( hS * t * sin ( a ) * tan ( b ) ) ) ; } } else py = pj ; py = max ( py , _0_0 ) ; }".split(" ")}]},
{$:"node",ba:"DIFFUSE_MINNAERT",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pH",fa:["vec3"],ea:!1},{$:"node_in",ba:"pI",fa:["vec2"],ea:!1},{$:"node_in",ba:"pJ",fa:["vec3"],ea:!1},{$:"node_in",ba:"pK",fa:["float"],ea:!1},{$:"node_in",ba:"pL",fa:["vec2"],ea:!1},{$:"node_out",ba:"pM",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pi = cross ( pH , B . xyz ) ; pJ = cross ( pi , B . xyz ) ; pJ = - normalize ( pJ ) ;".split(" ")}]}]},
{$:"txt",aa:"pM = _0_0 ; if ( pI . r != _0_0 ) { float pj = ( _1_0 - pK ) * dot ( pJ , pH ) + pK ; float pz = max ( dot ( pJ , oy ) , _0_0 ) ; if ( pL [ 0 ] <= _1_0 ) pM = pj * pow ( max ( pz * pj , 0.1 ) , pL [ 0 ] - _1_0 ) ; else pM = pj * pow ( 1.0001 - pz , pL [ 0 ] - _1_0 ) ; pM = max ( pM , _0_0 ) ; }".split(" ")}]},{$:"node",ba:"DIFFUSE_TOON",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pN",fa:["vec3"],ea:!1},{$:"node_in",ba:"pO",fa:["vec2"],ea:!1},{$:"node_in",
ba:"pP",fa:["vec3"],ea:!1},{$:"node_in",ba:"pQ",fa:["float"],ea:!1},{$:"node_in",ba:"pR",fa:["vec2"],ea:!1},{$:"node_out",ba:"pS",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pi = cross ( pN , B . xyz ) ; pP = cross ( pi , B . xyz ) ; pP = - normalize ( pP ) ;".split(" ")}]}]},{$:"txt",aa:"pS = _0_0 ; if ( pO . r != _0_0 ) { float pj = ( _1_0 - pQ ) * dot ( pP , pN ) + pQ ; float pT = acos ( pj ) ; if ( pT < pR [ 0 ] ) pS = _1_0 ; else if ( pT > ( pR [ 0 ] + pR [ 1 ] ) || pR [ 1 ] == _0_0 ) pS = _0_0 ; else pS = _1_0 - ( ( pT - pR [ 0 ] ) / pR [ 1 ] ) ; pS = max ( pS , _0_0 ) ; }".split(" ")}]},
{$:"node",ba:"SPECULAR_PHONG",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pU",fa:["vec3"],ea:!1},{$:"node_in",ba:"pV",fa:["vec2"],ea:!1},{$:"node_in",ba:"pW",fa:["vec3"],ea:!1},{$:"node_in",ba:"pX",fa:["float"],ea:!1},{$:"node_in",ba:"pY",fa:["vec2"],ea:!1},{$:"node_out",ba:"pZ",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"pZ = _0_0 ; if ( pV . g != _0_0 ) { vec3 p_ = normalize ( pU + oy ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",
aa:"if ( pX == _0_0 ) { pZ = dot ( B . xyz , p_ ) ; pZ = sqrt ( _1_0 - pZ * pZ ) ; }".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"pZ = ( _1_0 - pX ) * max ( dot ( pW , p_ ) , _0_0 ) + pX ;".split(" ")}]}]},{$:"txt",aa:"pZ = pow ( pZ , pY [ 0 ] ) ; }".split(" ")}]},{$:"node",ba:"SPECULAR_COOKTORR",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"qa",fa:["vec3"],ea:!1},{$:"node_in",ba:"qb",fa:["vec2"],ea:!1},{$:"node_in",ba:"qc",fa:["vec3"],ea:!1},{$:"node_in",ba:"qd",fa:["float"],
ea:!1},{$:"node_in",ba:"qe",fa:["vec2"],ea:!1},{$:"node_out",ba:"qf",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"qf = _0_0 ; if ( qb . g != _0_0 ) { vec3 p_ = normalize ( qa + oy ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"if ( qd == _0_0 ) { qf = dot ( B . xyz , p_ ) ; qf = sqrt ( _1_0 - qf * qf ) ; }".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"qf = max ( dot ( qc , p_ ) , _0_0 ) ; qf = ( _1_0 - qd ) * qf + qd ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",
ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"float pz = max ( dot ( B . xyz , oy ) , _0_0 ) ; pz = sqrt ( _1_0 - pz * pz ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"float pz = max ( dot ( qc , oy ) , _0_0 ) ;".split(" ")}]}]},{$:"txt",aa:"qf = pow ( qf , qe [ 0 ] ) ; qf = qf / ( 0.1 + pz ) ; }".split(" ")}]},{$:"node",ba:"SPECULAR_WARDISO",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"qg",fa:["vec3"],ea:!1},{$:"node_in",ba:"qh",fa:["vec2"],ea:!1},{$:"node_in",ba:"qi",
fa:["vec3"],ea:!1},{$:"node_in",ba:"qj",fa:["float"],ea:!1},{$:"node_in",ba:"qk",fa:["vec2"],ea:!1},{$:"node_out",ba:"ql",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"ql = _0_0 ; if ( qh . g != _0_0 ) { vec3 p_ = normalize ( qg + oy ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"float qm = _0_0 ; float pz = _0_0 ; float qn = _0_0 ; if ( qj == _0_0 ) { qm = dot ( B . xyz , p_ ) ; pz = dot ( B . xyz , oy ) ; qn = dot ( B . xyz , qg ) ; qm = sqrt ( _1_0 - qm * qm ) ; pz = sqrt ( _1_0 - pz * pz ) ; qn = sqrt ( _1_0 - qn * qn ) ; }".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"float qm = max ( dot ( qi , p_ ) , 0.01 ) ; float pz = max ( dot ( qi , oy ) , 0.01 ) ; float qn = max ( dot ( qi , qg ) , 0.01 ) ;".split(" ")}]}]},{$:"txt",aa:"float bP = tan ( acos ( qm ) ) ; float L = max ( qk [ 0 ] , 0.01 ) ; ql = qn * ( _1_0 / ( 4.0 * M_PI * L * L ) ) * ( exp ( - ( bP * bP ) / ( L * L ) ) / ( sqrt ( pz * qn ) ) ) ; }".split(" ")}]},{$:"node",ba:"SPECULAR_TOON",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"qo",fa:["vec3"],
ea:!1},{$:"node_in",ba:"qr",fa:["vec2"],ea:!1},{$:"node_in",ba:"qu",fa:["vec3"],ea:!1},{$:"node_in",ba:"qv",fa:["float"],ea:!1},{$:"node_in",ba:"qw",fa:["vec2"],ea:!1},{$:"node_out",ba:"qx",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"qx = _0_0 ; if ( qr . g != _0_0 ) { vec3 co = normalize ( qo + oy ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"float qy = dot ( co , B . xyz ) ; float bP = qw [ 0 ] + qw [ 1 ] ; if ( qv == _0_0 ) bP = acos ( sqrt ( _1_0 - qy * qy ) ) ;".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"float bP = acos ( dot ( co , qu ) ) ;".split(" ")}]}]},{$:"txt",aa:"if ( bP < qw [ 0 ] ) qx = _1_0 ; else if ( bP >= qw [ 0 ] + qw [ 1 ] || qw [ 1 ] == _0_0 ) qx = _0_0 ; else qx = _1_0 - ( bP - qw [ 0 ] ) / qw [ 1 ] ; }".split(" ")}]},{$:"node",ba:"SPECULAR_BLINN",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"qz",fa:["vec3"],ea:!1},{$:"node_in",ba:"qA",fa:["vec2"],ea:!1},{$:"node_in",ba:"qB",fa:["vec3"],ea:!1},{$:"node_in",ba:"qC",fa:["float"],
ea:!1},{$:"node_in",ba:"qD",fa:["vec2"],ea:!1},{$:"node_out",ba:"qE",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"float qF = qD [ 0 ] ; float qG = qD [ 1 ] ; qE = _0_0 ; if ( qA . g != _0_0 ) { if ( qF < 1.0 || qG == _0_0 ) qE = _0_0 ; else { if ( qG < 100.0 ) qG = sqrt ( 1.0 / qG ) ; else qG = 10.0 / qG ; vec3 p_ = normalize ( oy + qz ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"float qm = 0.0 ; if ( qC == _0_0 ) { float qH = dot ( B . xyz , p_ ) ; qm = sqrt ( _1_0 - qH * qH ) ; }".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"float qm = ( _1_0 - qC ) * max ( dot ( qB , p_ ) , _0_0 ) + qC ;".split(" ")}]}]},{$:"txt",aa:"if ( qm < _0_0 ) qE = _0_0 ; else { float pz = max ( dot ( qB , oy ) , 0.01 ) ; float qn = dot ( qB , qz ) ; if ( qn <= 0.01 ) qE = _0_0 ; else { float qI = max ( dot ( oy , p_ ) , 0.01 ) ; float a = _1_0 ; float b = ( 2.0 * qm * pz ) / qI ; float dx = ( 2.0 * qm * qn ) / qI ; float g = min ( min ( a , b ) , dx ) ; float p = sqrt ( pow ( qF , 2.0 ) + pow ( qI , 2.0 ) - _1_0 ) ; float mm = pow ( p - qI , 2.0 ) / pow ( p + qI , 2.0 ) * ( _1_0 + pow ( qI * ( p + qI ) - _1_0 , 2.0 ) / pow ( qI * ( p - qI ) + _1_0 , 2.0 ) ) ; float pT = acos ( qm ) ; qE = max ( mm * g * exp ( - pow ( pT , 2.0 ) / ( 2.0 * pow ( qG , 2.0 ) ) ) , _0_0 ) ; } } } }".split(" ")}]},
{$:"node",ba:"LIGHTING_APPLY",ma:[],la:[{$:"node_in",ba:"qJ",fa:["vec4"],ea:!1},{$:"node_in",ba:"qK",fa:["vec3"],ea:!1},{$:"node_in",ba:"qL",fa:["float"],ea:!1},{$:"node_in",ba:"qM",fa:["float"],ea:!1},{$:"node_in",ba:"qN",fa:["vec3"],ea:!1},{$:"node_in",ba:"qO",fa:["vec3"],ea:!1},{$:"node_in",ba:"qP",fa:["vec4"],ea:!1},{$:"node_in",ba:"qQ",fa:["vec3"],ea:!1},{$:"node_in",ba:"qR",fa:["vec3"],ea:!1},{$:"node_in",ba:"qS",fa:["vec3"],ea:!1},{$:"node_in",ba:"qT",fa:["float"],ea:!1},{$:"node_out",ba:"qU",
fa:["vec4"],ea:!1},{$:"node_out",ba:"qV",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"qV = qK + qS * qR * qM ; qU = qJ + vec4 ( qS * qQ * qL , qM ) ;".split(" ")}]},{$:"node",ba:"LIGHTING_END",ma:[],la:[{$:"node_in",ba:"qW",fa:["vec4"],ea:!1},{$:"node_in",ba:"qX",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"E = qW . rgb ; oE = qX ;".split(" ")}]},{$:"nodes_global"},{$:"txt",aa:"void cP ( vec3 os , vec3 ot , vec3 ou , vec3 ov , vec3 ow , vec3 ox , vec3 oy , vec2 oz , vec2 oA , vec4 oB , float oC , vec4 oD , out vec3 E , out vec3 oE ) {".split(" ")},
{$:"nodes_main"},{$:"txt",aa:["}"]}]}}]}]};f["include/math.glslv"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"MATH_GLSLV",ha:{$:"grp",da:[{$:"define",ba:"MATH_GLSLV",aa:[""]},{$:"var",ba:"EPSILON",aa:["0.000001"]},{$:"var",ba:"REFLECTION_TYPE",aa:["REFL_NONE"]},{$:"var",ba:"REFRACTIVE",aa:["0"]},{$:"var",ba:"SHADOW_USAGE",aa:["NO_SHADOWS"]},{$:"var",ba:"USE_POSITION_CLIP",aa:["0"]},{$:"var",ba:"SOFT_PARTICLES",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"txt",aa:"struct au { vec3 O ; vec3 ao ; vec3 V ; vec3 aB ; vec3 W ; vec3 U ; vec3 aQ ; } ; bool qY ( vec3 a , vec3 b ) { return any ( lessThan ( abs ( a - b ) , vec3 ( EPSILON ) ) ) ; } vec3 T ( in vec4 q , in vec3 kU ) { return kU + 2.0 * cross ( q . xyz , cross ( q . xyz , kU ) + q . w * kU ) ; } vec4 kV ( in vec4 qZ ) { return vec4 ( - qZ . xyz , qZ . w ) ; } vec4 rc ( in vec4 a , in vec4 b ) { vec4 q_ ; q_ . x = a . x * b . w + a . w * b . x + a . y * b . z - a . z * b . y ; q_ . y = a . y * b . w + a . w * b . y + a . z * b . x - a . x * b . z ; q_ . z = a . z * b . w + a . w * b . z + a . x * b . y - a . y * b . x ; q_ . w = a . w * b . w - a . x * b . x - a . y * b . y - a . z * b . z ; return q_ ; } vec4 X ( in vec3 rd , in float re ) { vec4 q_ ; re = re * 0.5 ; float s = sin ( re ) ; q_ . x = s * rd [ 0 ] ; q_ . y = s * rd [ 1 ] ; q_ . z = s * rd [ 2 ] ; q_ . w = cos ( re ) ; return q_ ; } vec4 ri ( in vec3 bH , in vec3 rf ) { vec4 q_ ; float dC = dot ( rf , bH ) ; vec3 rh = cross ( rf , bH ) ; q_ . xyz = rh . xyz ; q_ . w = 1.0 + dC ; return normalize ( q_ ) ; } vec3 rl ( vec3 rj , vec3 hK , vec4 qZ , vec3 rk ) { vec3 q_ = rk * hK ; q_ = T ( qZ , q_ ) ; q_ += rj ; return q_ ; } vec3 rm ( vec3 rj , vec3 hK , vec4 qZ , vec3 bH ) { vec3 q_ = bH * hK ; q_ = T ( qZ , q_ ) ; return q_ ; } vec3 rn ( vec3 rj , vec3 hK , vec4 qZ , vec3 rk ) { vec3 q_ = rk - rj ; q_ = T ( kV ( qZ ) , q_ ) ; q_ /= hK ; return q_ ; } vec3 ro ( vec3 rj , vec3 hK , vec4 qZ , vec3 bH ) { return T ( kV ( qZ ) , bH ) / hK ; } mat4 rp ( ) { return mat4 ( _1_0 , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 ) ; } mat4 rq ( float bP ) { return mat4 ( _1_0 , _0_0 , _0_0 , _0_0 , _0_0 , cos ( bP ) , sin ( bP ) , _0_0 , _0_0 , - sin ( bP ) , cos ( bP ) , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 ) ; } mat4 rs ( float bP ) { return mat4 ( cos ( bP ) , _0_0 , - sin ( bP ) , _0_0 , _0_0 , _1_0 , _0_0 , _0_0 , sin ( bP ) , _0_0 , cos ( bP ) , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 ) ; } mat4 rt ( float bP ) { return mat4 ( cos ( bP ) , sin ( bP ) , _0_0 , _0_0 , - sin ( bP ) , cos ( bP ) , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 ) ; } au ma ( in au kU ) { return au ( kU . O , kU . ao , normalize ( kU . V ) , normalize ( kU . aB ) , normalize ( kU . W ) , normalize ( kU . U ) , kU . aQ ) ; }".split(" ")},
{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES","REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{$:"equal_expr",ia:2},"REFRACTIVE","USE_POSITION_CLIP",{$:"logical_or_expr",ia:5}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 aC ( vec4 f ) { float fX = f . x ; float fY = f . y ; float fZ = f . w ; vec3 ru ; ru . x = ( fX + fZ ) / 2.0 ; ru . y = ( fY + fZ ) / 2.0 ; ru . z = fZ ; return ru ; }".split(" ")}]}}]},{$:"txt",aa:"mat3 aY ( ) { return mat3 ( _0_0 , _0_0 , _0_0 , _1_0 , _1_0 , _1_0 , _0_0 , _0_0 , _0_0 ) ; } mat4 bh ( mat3 t ) { mat4 rv ; float rw = sqrt ( abs ( 1. - t [ 2 ] [ 0 ] * t [ 2 ] [ 0 ] - t [ 2 ] [ 1 ] * t [ 2 ] [ 1 ] - t [ 2 ] [ 2 ] * t [ 2 ] [ 2 ] ) ) ; rv [ 0 ] [ 0 ] = ( _1_0 - ( t [ 2 ] [ 1 ] * ( t [ 2 ] [ 1 ] + t [ 2 ] [ 1 ] ) + t [ 2 ] [ 2 ] * ( t [ 2 ] [ 2 ] + t [ 2 ] [ 2 ] ) ) ) * t [ 1 ] [ 0 ] ; rv [ 0 ] [ 1 ] = ( t [ 2 ] [ 0 ] * ( t [ 2 ] [ 1 ] + t [ 2 ] [ 1 ] ) + rw * ( t [ 2 ] [ 2 ] + t [ 2 ] [ 2 ] ) ) * t [ 1 ] [ 0 ] ; rv [ 0 ] [ 2 ] = ( t [ 2 ] [ 0 ] * ( t [ 2 ] [ 2 ] + t [ 2 ] [ 2 ] ) - rw * ( t [ 2 ] [ 1 ] + t [ 2 ] [ 1 ] ) ) * t [ 1 ] [ 0 ] ; rv [ 0 ] [ 3 ] = _0_0 ; rv [ 1 ] [ 0 ] = ( t [ 2 ] [ 0 ] * ( t [ 2 ] [ 1 ] + t [ 2 ] [ 1 ] ) - rw * ( t [ 2 ] [ 2 ] + t [ 2 ] [ 2 ] ) ) * t [ 1 ] [ 0 ] ; rv [ 1 ] [ 1 ] = ( _1_0 - ( t [ 2 ] [ 0 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) + t [ 2 ] [ 2 ] * ( t [ 2 ] [ 2 ] + t [ 2 ] [ 2 ] ) ) ) * t [ 1 ] [ 0 ] ; rv [ 1 ] [ 2 ] = ( t [ 2 ] [ 1 ] * ( t [ 2 ] [ 2 ] + t [ 2 ] [ 2 ] ) + rw * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) ) * t [ 1 ] [ 0 ] ; rv [ 1 ] [ 3 ] = _0_0 ; rv [ 2 ] [ 0 ] = ( t [ 2 ] [ 0 ] * ( t [ 2 ] [ 2 ] + t [ 2 ] [ 2 ] ) + rw * ( t [ 2 ] [ 1 ] + t [ 2 ] [ 1 ] ) ) * t [ 1 ] [ 0 ] ; rv [ 2 ] [ 1 ] = ( t [ 2 ] [ 1 ] * ( t [ 2 ] [ 2 ] + t [ 2 ] [ 2 ] ) - rw * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) ) * t [ 1 ] [ 0 ] ; rv [ 2 ] [ 2 ] = ( _1_0 - ( t [ 2 ] [ 0 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) + t [ 2 ] [ 1 ] * ( t [ 2 ] [ 1 ] + t [ 2 ] [ 1 ] ) ) ) * t [ 1 ] [ 0 ] ; rv [ 2 ] [ 3 ] = _0_0 ; rv [ 3 ] [ 0 ] = t [ 0 ] [ 0 ] ; rv [ 3 ] [ 1 ] = t [ 0 ] [ 1 ] ; rv [ 3 ] [ 2 ] = t [ 0 ] [ 2 ] ; rv [ 3 ] [ 3 ] = 1.0 ; return rv ; } mat3 bc ( in vec4 qZ , in mat3 rx ) { if ( qZ . w < 0. ) qZ . xyz *= - 1. ; rx [ 2 ] = qZ . xyz ; return rx ; } vec4 ry ( in mat3 rx ) { return vec4 ( rx [ 2 ] , sqrt ( abs ( 1. - rx [ 2 ] [ 0 ] * rx [ 2 ] [ 0 ] - rx [ 2 ] [ 1 ] * rx [ 2 ] [ 1 ] - rx [ 2 ] [ 2 ] * rx [ 2 ] [ 2 ] ) ) ) ; } vec3 ap ( mat3 rx , vec3 rk ) { vec3 q_ = rk * rx [ 1 ] ; vec4 qZ = ry ( rx ) ; q_ = T ( qZ , q_ ) ; q_ += rx [ 0 ] ; return q_ ; } vec3 _ ( mat3 rx , vec3 bH ) { vec3 q_ = bH * rx [ 1 ] ; vec4 qZ = ry ( rx ) ; q_ = T ( qZ , q_ ) ; return q_ ; } vec3 bI ( mat3 rx , vec3 rz ) { vec3 q_ = rz / rx [ 1 ] ; vec4 qZ = ry ( rx ) ; q_ = T ( qZ , q_ ) ; return q_ ; } mat3 aZ ( in vec3 rj , in mat3 rx ) { rx [ 0 ] = rj ; return rx ; } vec3 ex ( in mat3 rx ) { return rx [ 0 ] ; } mat3 a_ ( in vec3 hK , in mat3 rx ) { rx [ 1 ] = hK ; return rx ; } vec3 rA ( in mat3 rx ) { return rx [ 1 ] ; } mat3 bd ( in mat3 rx , in mat3 rB ) { mat3 rC ; vec3 rj = ex ( rx ) ; vec3 rD = ex ( rB ) ; vec3 hK = rA ( rx ) ; vec3 rE = rA ( rB ) ; vec4 qZ = ry ( rx ) ; vec4 rF = ry ( rB ) ; vec3 rG = rl ( rj , hK , qZ , rD ) ; rC = aZ ( rG , rC ) ; vec3 rH = hK * rE ; rC = a_ ( rH , rC ) ; vec4 rI = rc ( qZ , rF ) ; rC = bc ( rI , rC ) ; return rC ; } mat3 bd ( in mat3 rx , in mat3 rB , out mat3 q_ ) { q_ = bd ( rx , rB ) ; return q_ ; } vec4 R ( in vec4 rJ ) { return normalize ( rJ ) ; } vec4 R ( in vec4 rJ , out float P , out float Q ) { vec4 qZ = R ( rJ ) ; P = length ( rJ ) * M_PI ; Q = sign ( rJ [ 3 ] ) ; return R ( rJ ) ; }".split(" ")}]}}]}]};
f["include/mirror.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"MIRROR_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"MIRROR_GLSLF",aa:[""]},{$:"var",ba:"REFLECTION_TYPE",aa:["REFL_NONE"]},{$:"var",ba:"REFLECTION_PASS",aa:["REFL_PASS_NONE"]},{$:"var",ba:"USE_BSDF_SKY_DIM",aa:[""]},{$:"include",oa:"std.glsl"},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"REFLECTION_TYPE","REFL_CUBE",{$:"equal_expr",ia:2},"REFLECTION_TYPE","REFL_MIRRORMAP",{$:"equal_expr",ia:2},{$:"logical_or_expr",
ia:3}],ha:{$:"grp",da:[{$:"include",oa:"color_util.glslf"},{$:"include",oa:"math.glslv"},{$:"define",ba:"REFL_BUMP",aa:["0.1"]},{$:"txt",aa:"float rK ( in vec3 D , vec3 eN , float ec , float fk ) { vec3 fi = normalize ( eN + D ) ; float fj = 1.0 - dot ( D , fi ) ; float r = fk + ( 1.0 - fk ) * pow ( fj , ec ) ; return r ; } void cQ ( inout vec3 rL , vec3 D , vec3 U , float rM , mat3 N ) { vec3 eN = reflect ( - D , U ) ; float ec = u_fresnel_params [ 0 ] ; float fk = u_fresnel_params [ 1 ] ; float r = 1.0 ; if ( ec != 0.0 ) r = rK ( D , eN , ec , fk ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_CUBE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 eS = GLSL_TEXTURE_CUBE ( u_cube_reflection , eN ) . xyz ;".split(" ")}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_NONE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 rN = u_refl_plane . xyz * dot ( U , u_refl_plane . xyz ) ; vec3 rO = U - rN ; vec2 rP = bI ( N , rO ) . xy ; vec2 rQ = l . xy / l . z ; rQ += rP * REFL_BUMP ; vec3 eS = GLSL_TEXTURE ( u_plane_reflection , rQ ) . rgb ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 eS = vec3 ( 1.0 ) ; rM = 0.0 ;".split(" ")}]}}]}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_MIRRORMAP",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 eS = GLSL_TEXTURE_CUBE ( u_mirrormap , eN ) . xyz ;".split(" ")}]}}]},{$:"txt",aa:"bG ( eS . rgb ) ; rL = mix ( rL , eS , rM * r ) ; }".split(" ")}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_PBR_STANDARD",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 rU ( float eg , vec3 rR , float ef ) { float rS = 1.0 - eg ; float rT = rS * rS ; rT = rT * rS * rT ; return rR + ( max ( vec3 ( 1.0 - ef ) , rR ) - rR ) * rT ; } vec3 sf ( vec3 rL , vec3 rV , vec3 D , vec3 U , float rW , float rX , mat3 N ) { float rY = max ( dot ( normalize ( U ) , D ) , _0_0 ) ; vec3 eN = reflect ( - D , U ) ; float ef = sqrt ( rX ) ; vec3 rR = vec3 ( 0.04 ) ; rR = mix ( rR , rV , rW ) ; vec3 rZ = rU ( rY , rR , ef ) ; vec3 r_ = rZ ; vec3 sa = vec3 ( _1_0 ) - r_ ; sa *= vec3 ( 1.0 - rW ) ; vec3 bx = GLSL_TEXTURE_CUBE ( u_cube_irradiance , U ) . xyz ; vec3 sb = bx * rL ; const float sc = 5.0 ; vec3 el = GLSL_TEXTURE_CUBE_LOD ( u_cube_r_convolution , eN , ef * sc ) . rgb ; vec2 sd = GLSL_TEXTURE ( u_brdf , vec2 ( rY , ef ) ) . rg ; vec3 cO = el * ( rZ * sd . x + sd . y ) ; vec3 se = ( sa * sb + cO ) ; return se ; }".split(" ")}]}},
{$:"elif",ga:["REFLECTION_TYPE","REFL_PBR_SIMPLE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 rU ( float eg , vec3 rR , float ef ) { float rS = 1.0 - eg ; float rT = rS * rS ; rT = rT * rS * rT ; return rR + ( max ( vec3 ( 1.0 - ef ) , rR ) - rR ) * rT ; } vec3 sf ( vec3 rL , vec3 rV , vec3 D , vec3 U , float rW , float rX , mat3 N ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["USE_BSDF_SKY_DIM"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 ec = normalize ( U ) ; float rY = max ( dot ( ec , D ) , _0_0 ) ; vec3 eN = reflect ( - D , U ) ; float sg = max ( 2.0 / ( rX * rX ) - 2.0 , _0_0 ) ; vec3 rR = vec3 ( 0.04 ) ; rR = mix ( rR , rV , rW ) ; vec3 rZ = rU ( rY , rR , sqrt ( rX ) ) ; vec3 r_ = rZ ; vec3 sa = vec3 ( _1_0 ) - r_ ; sa *= 1.0 - rW ; vec3 sb = GLSL_TEXTURE_CUBE_LOD ( u_sky_reflection , ec , 100.0 ) . xyz ; bG ( sb ) ; sb *= rL ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["GLSL1"],ha:{$:"grp",da:[{$:"txt",aa:["float","sh","=","u_bsdf_cube_sky_dim",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"float sh = float ( textureSize ( u_sky_reflection , 0 ) . x ) ;".split(" ")}]}}]},{$:"txt",aa:"float si = log2 ( ( sh * sqrt ( 3.0 ) ) / sqrt ( sg + _1_0 ) ) ; vec3 cO = GLSL_TEXTURE_CUBE_LOD ( u_sky_reflection , eN , si ) . xyz ; bG ( cO ) ; vec3 se = sa * sb + r_ * cO ; return se ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["return","rL",
";"]}]}}]},{$:"txt",aa:["}"]}]}}]}]}}]}]};f["include/nodes.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"NODES_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"NODES_GLSLF",aa:[""]},{$:"var",ba:"CAUSTICS",aa:["0"]},{$:"var",ba:"CALC_TBN_SPACE",aa:["0"]},{$:"var",ba:"DOUBLE_SIDED_LIGHTING",aa:["0"]},{$:"var",ba:"REFLECTION_PASS",aa:["REFL_PASS_NONE"]},{$:"var",ba:"USE_REFRACTION",aa:["0"]},{$:"var",ba:"HAS_REFRACT_TEXTURE",aa:["0"]},{$:"var",ba:"NUM_LIGHTS",aa:["0"]},{$:"var",ba:"REFLECTION_TYPE",aa:["REFL_NONE"]},
{$:"var",ba:"USE_DERIVATIVES_EXT",aa:["0"]},{$:"var",ba:"CAMERA_TYPE",aa:["CAM_TYPE_PERSP"]},{$:"var",ba:"IS_WORLD",aa:["0"]},{$:"var",ba:"USE_BSDF_PRINCIPLED_REFRACT",aa:["0"]},{$:"var",ba:"USE_BSDF_TRANSPARENT_REFRACT",aa:["0"]},{$:"var",ba:"USE_BSDF_TRANSPARENT_ALPHA",aa:["0"]},{$:"cond",da:[{$:"if",ga:["USE_NODE_MATERIAL_BEGIN","USE_NODE_BSDF_BEGIN",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"include",oa:"mirror.glslf"},{$:"include",oa:"shadow.glslf"},{$:"include",oa:"environment.glslf"}]}}]},
{$:"cond",da:[{$:"if",ga:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"include",oa:"refraction.glslf"}]}}]},{$:"include",oa:"color_util.glslf"},{$:"include",oa:"math.glslv"},{$:"cond",da:[{$:"if",ga:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","sj",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_B4W_REFRACTION"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 sm ( in vec3 sk , in float sl ) { vec3 fa = vec3 ( _0_0 ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["USE_REFRACTION"],ha:{$:"grp",da:[{$:"txt",aa:"fa = cS ( l , sk . xy * sl ) ;".split(" ")}]}},{$:"elif",ga:["HAS_REFRACT_TEXTURE"],ha:{$:"grp",da:[{$:"txt",aa:"fa = GLSL_TEXTURE ( u_refractmap , l . xy / l . z ) . rgb ; bG ( fa ) ;".split(" ")}]}}]},{$:"txt",aa:["return","fa",";","}"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_SEPHSV",{$:"logical_or_expr",
ia:6}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 kj ( vec3 rgb ) { vec4 hM = vec4 ( _0_0 , - _1_0 / 3.0 , 2.0 / 3.0 , - _1_0 ) ; vec4 p = mix ( vec4 ( rgb . bg , hM . wz ) , vec4 ( rgb . gb , hM . xy ) , step ( rgb . b , rgb . g ) ) ; vec4 q = mix ( vec4 ( p . xyw , rgb . r ) , vec4 ( rgb . r , p . yzx ) , step ( p . x , rgb . r ) ) ; float dC = q . x - min ( q . w , q . y ) ; float iF = 1.0e-10 ; return vec3 ( abs ( q . z + ( q . w - q . y ) / ( 6.0 * dC + iF ) ) , dC / ( q . x + iF ) , q . x ) ; }".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_COMBHSV",{$:"logical_or_expr",ia:6}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 kl ( vec3 kk ) { vec4 hM = vec4 ( _1_0 , 2.0 / 3.0 , _1_0 / 3.0 , 3.0 ) ; vec3 p = abs ( fract ( vec3 ( kk . r , kk . r , kk . r ) + hM . xyz ) * 6.0 - hM . www ) ; return kk . b * mix ( hM . xxx , clamp ( p - hM . xxx , _0_0 , _1_0 ) , kk . g ) ; }".split(" ")}]}}]},{$:"cond",
da:[{$:"if",ga:["USE_NODE_GEOMETRY_UV","USE_NODE_B4W_PARALLAX","USE_NODE_UV_MERGED","USE_NODE_TEX_COORD_UV","USE_NODE_UVMAP",{$:"logical_or_expr",ia:5}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 sn ( vec2 gX ) { return vec3 ( gX * 2.0 - vec2 ( _1_0 , _1_0 ) , _0_0 ) ; }".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_TEXTURE_COLOR","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 so ( vec3 rk ) { return vec2 ( rk . xy * _0_5 + vec2 ( _0_5 , _0_5 ) ) ; }".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["USE_NODE_FRESNEL","USE_NODE_LAYER_WEIGHT",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float sv ( vec3 sr , vec3 rz , float su ) { float dx = abs ( dot ( sr , rz ) ) ; float g = su * su - _1_0 + dx * dx ; float ea ; if ( g > _0_0 ) { g = sqrt ( g ) ; float cG = ( g - dx ) / ( g + dx ) ; float hS = ( dx * ( g + dx ) - _1_0 ) / ( dx * ( g - dx ) + _1_0 ) ; ea = _0_5 * cG * cG * ( _1_0 + hS * hS ) ; } else { ea = _1_0 ; } return ea ; }".split(" ")}]}}]},{$:"node",
ba:"CAMERA",ma:[],la:[{$:"node_out",ba:"sU",fa:["vec3"],ea:!0},{$:"node_out",ba:"sV",fa:["float"],ea:!0},{$:"node_out",ba:"sW",fa:["float"],ea:!0}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_sU"],ja:[{$:"txt",aa:"sU = normalize ( sR . xyz ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_sV"],ja:[{$:"txt",aa:"sV = abs ( sR . z ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_sW"],ja:[{$:"txt",aa:"sW = length ( sR . xyz ) ;".split(" ")}]}]}]},{$:"node",ba:"COMBRGB",
ma:[],la:[{$:"node_in",ba:"sX",fa:["float"],ea:!1},{$:"node_in",ba:"sY",fa:["float"],ea:!1},{$:"node_in",ba:"sZ",fa:["float"],ea:!1},{$:"node_out",ba:"s_",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"s_ = vec3 ( sX , sY , sZ ) ;".split(" ")}]},{$:"node",ba:"COMBHSV",ma:[],la:[{$:"node_in",ba:"ta",fa:["float"],ea:!1},{$:"node_in",ba:"tb",fa:["float"],ea:!1},{$:"node_in",ba:"tc",fa:["float"],ea:!1},{$:"node_out",ba:"td",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"td = kl ( vec3 ( ta , tb , tc ) ) ;".split(" ")}]},
{$:"node",ba:"EMPTY_UV",ma:[],la:[{$:"node_out",ba:"te",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"te = vec3 ( - _1_0 , - _1_0 , _0_0 ) ;".split(" ")}]},{$:"node",ba:"EMPTY_VC",ma:[],la:[{$:"node_out",ba:"tf",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"tf = vec3 ( _0_0 ) ;".split(" ")}]},{$:"node",ba:"GEOMETRY_UV",ma:[],la:[{$:"node_out",ba:"tg",fa:["vec3"],ea:!1},{$:"node_param",ba:"sw",fa:["GLSL_IN","vec2"],ea:!1}],ja:[{$:"txt",aa:"tg = sn ( sw ) ;".split(" ")}]},{$:"node",ba:"GEOMETRY_OR",ma:[],la:[{$:"node_out",
ba:"th",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"th = 2.0 * sj - vec3 ( _1_0 ) ;".split(" ")}]},{$:"node",ba:"GEOMETRY_VC",ma:[],la:[{$:"node_out",ba:"ti",fa:["vec3"],ea:!1},{$:"node_param",ba:"sx",fa:["GLSL_IN","vec3"],ea:!1}],ja:[{$:"txt",aa:"ti = max ( vec3 ( _0_0 ) , sx ) ; bG ( ti ) ;".split(" ")}]},{$:"node",ba:"GEOMETRY_VC1",ma:[],la:[{$:"node_out",ba:"tj",fa:["float"],ea:!1},{$:"node_param",ba:"sy",fa:["GLSL_IN","float"],ea:!1}],ja:[{$:"txt",aa:"tj = max ( _0_0 , sy ) ; bG ( tj ) ;".split(" ")}]},
{$:"node",ba:"GEOMETRY_VC2",ma:[],la:[{$:"node_out",ba:"tk",fa:["float"],ea:!1},{$:"node_out",ba:"tl",fa:["float"],ea:!1},{$:"node_param",ba:"sz",fa:["GLSL_IN","vec2"],ea:!1}],ja:[{$:"txt",aa:"tk = max ( _0_0 , sz [ 0 ] ) ; tl = max ( _0_0 , sz [ 1 ] ) ; bG ( tk ) ; bG ( tl ) ;".split(" ")}]},{$:"node",ba:"GEOMETRY_VC3",ma:[],la:[{$:"node_out",ba:"tm",fa:["float"],ea:!1},{$:"node_out",ba:"tn",fa:["float"],ea:!1},{$:"node_out",ba:"to",fa:["float"],ea:!1},{$:"node_param",ba:"sA",fa:["GLSL_IN","vec3"],
ea:!1}],ja:[{$:"txt",aa:"tm = max ( _0_0 , sA [ 0 ] ) ; tn = max ( _0_0 , sA [ 1 ] ) ; to = max ( _0_0 , sA [ 2 ] ) ; bG ( tm ) ; bG ( tn ) ; bG ( to ) ;".split(" ")}]},{$:"node",ba:"GEOMETRY_NO",ma:[{$:"node_var",ba:"USE_NORMAL_IN",aa:["0"]}],la:[{$:"node_in",ba:"tr",fa:["vec3"],ea:!1},{$:"node_out",ba:"tu",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_NORMAL_IN"],ja:[{$:"txt",aa:["tu","=","tr",";"]}]},{$:"node_else",ja:[{$:"txt",aa:"tu = sK . xyz ;".split(" ")}]}]}]},{$:"node",
ba:"GEOMETRY_FB",ma:[],la:[{$:"node_out",ba:"tv",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"tv = ( gl_FrontFacing ) ? _0_0 : _1_0 ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"tv = ( gl_FrontFacing ) ? _1_0 : _0_0 ;".split(" ")}]}]}]},{$:"node",ba:"GEOMETRY_BF",ma:[],la:[{$:"node_out",ba:"tw",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",
ia:2}],ja:[{$:"txt",aa:"tw = ( gl_FrontFacing ) ? _1_0 : _0_0 ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"tw = ( gl_FrontFacing ) ? _0_0 : _1_0 ;".split(" ")}]}]}]},{$:"node",ba:"GEOMETRY_VW",ma:[],la:[{$:"node_out",ba:"tx",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"tx = - _ ( u_view_tsr_frag , oy ) ;".split(" ")}]},{$:"node",ba:"GEOMETRY_LO",ma:[],la:[{$:"node_out",ba:"ty",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"ty = sR . xyz ;".split(" ")}]},{$:"node",ba:"GEOMETRY_GL",ma:[],la:[{$:"node_out",ba:"tz",
fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:["tz","=","ow",";"]}]},{$:"node",ba:"GEOMETRY_IN",ma:[],la:[{$:"node_out",ba:"tA",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:["tA","=","oy",";"]}]},{$:"node",ba:"NEW_GEOMETRY",ma:[],la:[{$:"node_out",ba:"tB",fa:["vec3"],ea:!1},{$:"node_out",ba:"tC",fa:["vec3"],ea:!1},{$:"node_out",ba:"tD",fa:["vec3"],ea:!1},{$:"node_out",ba:"tE",fa:["vec3"],ea:!1},{$:"node_out",ba:"tF",fa:["vec3"],ea:!1},{$:"node_out",ba:"tG",fa:["vec3"],ea:!1},{$:"node_out",ba:"tH",fa:["float"],ea:!1},
{$:"node_out",ba:"tI",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"tB = vec3 ( _0_0 ) ; tC = vec3 ( _0_0 ) ; tD = vec3 ( _0_0 ) ; tE = vec3 ( _0_0 ) ; tF = vec3 ( _0_0 ) ; tG = vec3 ( _0_0 ) ; tH = _0_0 ; tI = _0_0 ;".split(" ")}]},{$:"node",ba:"HUE_SAT",ma:[],la:[{$:"node_in",ba:"tJ",fa:["float"],ea:!1},{$:"node_in",ba:"tK",fa:["float"],ea:!1},{$:"node_in",ba:"tL",fa:["float"],ea:!1},{$:"node_in",ba:"tM",fa:["float"],ea:!1},{$:"node_in",ba:"tN",fa:["vec3"],ea:!1},{$:"node_out",ba:"tO",fa:["vec3"],ea:!1}],
ja:[{$:"txt",aa:"vec3 kk = kj ( tN ) ; kk [ 0 ] += ( tJ - _0_5 ) ; if ( kk [ 0 ] > _1_0 ) kk [ 0 ] -= _1_0 ; else if ( kk [ 0 ] < _0_0 ) kk [ 0 ] += _1_0 ; kk *= vec3 ( _1_0 , tK , tL ) ; kk = mix ( vec3 ( _1_0 ) , mix ( vec3 ( _0_0 ) , kk , step ( vec3 ( _0_0 ) , kk ) ) , step ( kk , vec3 ( _1_0 ) ) ) ; tO = mix ( tN , kl ( kk ) , tM ) ;".split(" ")}]},{$:"node",ba:"INVERT",ma:[],la:[{$:"node_in",ba:"tP",fa:["float"],ea:!1},{$:"node_in",ba:"tQ",fa:["vec3"],ea:!1},{$:"node_out",ba:"tR",fa:["vec3"],
ea:!1}],ja:[{$:"txt",aa:"tR = mix ( tQ , vec3 ( _1_0 ) - tQ , tP ) ;".split(" ")}]},{$:"node",ba:"LAMP",ma:[{$:"node_var",ba:"LAMP_TYPE",aa:["HEMI"]},{$:"node_var",ba:"LAMP_INDEX",aa:["0"]},{$:"node_var",ba:"LAMP_USE_SPHERE",aa:["0"]},{$:"node_var",ba:"LAMP_SPOT_SIZE",aa:["0.8"]},{$:"node_var",ba:"LAMP_SPOT_BLEND",aa:["0.03"]},{$:"node_var",ba:"LAMP_LIGHT_DIST",aa:["30.0"]}],la:[{$:"node_out",ba:"tS",fa:["vec3"],ea:!0},{$:"node_out",ba:"tT",fa:["vec3"],ea:!1},{$:"node_out",ba:"tU",fa:["float"],ea:!1},
{$:"node_out",ba:"tV",fa:["float"],ea:!0}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["LAMP_INDEX",1,{$:"negative_expr",ia:1},{$:"non_equal_expr",ia:2}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_tS"],ja:[{$:"txt",aa:"tS = u_lamp_light_color_intensities [ LAMP_INDEX ] ;".split(" ")}]}]},{$:"txt",aa:"vec3 tW = u_lamp_light_directions [ LAMP_INDEX ] ; vec3 tX = u_lamp_light_positions [ LAMP_INDEX ] ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_TYPE","SPOT",{$:"equal_expr",ia:2},"LAMP_TYPE",
"POINT",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ja:[{$:"txt",aa:"tT = h - tX ; tU = length ( tT ) ; tT = normalize ( tT ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_tV"],ja:[{$:"txt",aa:"tV = LAMP_LIGHT_DIST / ( LAMP_LIGHT_DIST + tU * tU ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_TYPE","SPOT",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"float pb = dot ( - tT , tW ) ; pb *= smoothstep ( _0_0 , _1_0 , ( pb - LAMP_SPOT_SIZE ) / LAMP_SPOT_BLEND ) ; tV *= pb ;".split(" ")}]}]},
{$:"node_cond",da:[{$:"node_if",ga:["LAMP_USE_SPHERE"],ja:[{$:"txt",aa:"tV *= max ( LAMP_LIGHT_DIST - tU , _0_0 ) / LAMP_LIGHT_DIST ;".split(" ")}]}]}]}]}]},{$:"node_else",ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_tT"],ja:[{$:"txt",aa:["tT","=","tW",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_tU"],ja:[{$:"txt",aa:"tU = length ( tX - h ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_tV"],ja:[{$:"txt",aa:["tV","=","_1_0",";"]}]}]}]}]}]},{$:"node_else",ja:[{$:"node_cond",
da:[{$:"node_if",ga:["USE_OUT_tS"],ja:[{$:"txt",aa:"tS = vec3 ( _0_0 ) ;".split(" ")}]}]},{$:"txt",aa:"tT = vec3 ( _0_0 ) ; tU = 0.0 ;".split(" ")}]}]}]},{$:"node",ba:"NORMAL",ma:[],la:[{$:"node_in",ba:"tY",fa:["vec3"],ea:!1},{$:"node_out",ba:"tZ",fa:["vec3"],ea:!0},{$:"node_out",ba:"t_",fa:["float"],ea:!0},{$:"node_param",ba:"sB",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_tZ"],ja:[{$:"txt",aa:["tZ","=","sB",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_t_"],ja:[{$:"txt",
aa:"t_ = - dot ( tY , sB ) ;".split(" ")}]}]}]},{$:"node",ba:"B4W_VECTOR_VIEW",ma:[],la:[{$:"node_in",ba:"ua",fa:["vec3"],ea:!1},{$:"node_out",ba:"ub",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"ub = - _ ( u_view_tsr_frag , ua ) ;".split(" ")}]},{$:"node",ba:"BSDF_BEGIN",ma:[],la:[{$:"node_in",ba:"uc",fa:["vec3"],ea:!1},{$:"node_in",ba:"ud",fa:["vec3"],ea:!1},{$:"node_in",ba:"ue",fa:["float"],ea:!1},{$:"node_in",ba:"uf",fa:["vec3"],ea:!1},{$:"node_in",ba:"ug",fa:["float"],ea:!1},{$:"node_in",ba:"uh",fa:["float"],
ea:!1},{$:"node_in",ba:"ui",fa:["vec3"],ea:!1},{$:"node_in",ba:"uj",fa:["float"],ea:!1},{$:"node_in",ba:"uk",fa:["float"],ea:!1},{$:"node_in",ba:"ul",fa:["vec3"],ea:!1},{$:"node_in",ba:"um",fa:["float"],ea:!1},{$:"node_in",ba:"un",fa:["vec3"],ea:!1},{$:"node_in",ba:"uo",fa:["float"],ea:!1},{$:"node_out",ba:"up",fa:["vec3"],ea:!1},{$:"node_out",ba:"uq",fa:["vec3"],ea:!1},{$:"node_out",ba:"ur",fa:["vec3"],ea:!1},{$:"node_out",ba:"us",fa:["vec3"],ea:!1},{$:"node_out",ba:"ut",fa:["vec3"],ea:!1},{$:"node_out",
ba:"uu",fa:["vec4"],ea:!1},{$:"node_out",ba:"uv",fa:["vec4"],ea:!1},{$:"node_out",ba:"uw",fa:["vec4"],ea:!1},{$:"node_out",ba:"ux",fa:["vec3"],ea:!1},{$:"node_out",ba:"uy",fa:["vec3"],ea:!1},{$:"node_out",ba:"uz",fa:["vec3"],ea:!1},{$:"node_out",ba:"uA",fa:["float"],ea:!1},{$:"node_out",ba:"uB",fa:["vec3"],ea:!1},{$:"node_out",ba:"uC",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"ur = ud ; us = uf ; ut = ui ; ux = ud ; uy = uf ; uz = ul ; uA = um ; uB = un ; uC = uo ; up = sS * ur ; uq = sT * u_environment_energy * cE ( ut ) ; uw = cH ( ur ) ; H = uw ; uu [ 0 ] = ue ; uu [ 1 ] = ug ; uu [ 2 ] = uh ; uv [ 0 ] = uj ; uv [ 1 ] = uk ;".split(" ")}]},
{$:"node",ba:"BSDF_END",ma:[],la:[{$:"node_in",ba:"uD",fa:["vec4"],ea:!1},{$:"node_in",ba:"uE",fa:["vec3"],ea:!1},{$:"node_in",ba:"uF",fa:["vec3"],ea:!1},{$:"node_in",ba:"uG",fa:["vec4"],ea:!1},{$:"node_in",ba:"uH",fa:["vec4"],ea:!1},{$:"node_in",ba:"uI",fa:["vec3"],ea:!1},{$:"node_in",ba:"uJ",fa:["vec3"],ea:!1},{$:"node_in",ba:"uK",fa:["vec3"],ea:!1},{$:"node_in",ba:"uL",fa:["float"],ea:!1},{$:"node_in",ba:"uM",fa:["vec3"],ea:!1},{$:"node_in",ba:"uN",fa:["float"],ea:!1},{$:"node_out",ba:"uO",fa:["vec3"],
ea:!1},{$:"node_out",ba:"uP",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"float uQ = clamp ( uG [ 1 ] , _0_0 , _1_0 ) ; float rW = uG [ 2 ] ; uO = uD . rgb ; uP = _1_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["REFLECTION_TYPE","REFL_PBR_STANDARD",{$:"equal_expr",ia:2},"REFLECTION_TYPE","REFL_PBR_SIMPLE",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ja:[{$:"txt",aa:"uO += sf ( uI , uJ , oy , uF , rW , uQ , mat3 ( _0_0 ) ) ;".split(" ")}]},{$:"node_elif",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",
ia:2}],ja:[{$:"txt",aa:"uO += sf ( uI , uJ , oy , uF , rW , u_view_tsr_frag ) ;".split(" ")}]}]},{$:"txt",aa:"uO += uE ; uO = mix ( uO , uK , uL ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_NODE_BSDF_TRANSPARENT"],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_BSDF_TRANSPARENT_REFRACT"],ja:[{$:"txt",aa:"vec3 uR = GLSL_TEXTURE ( u_refractmap , l . xy / l . z ) . rgb ; bG ( uR ) ; uM = uM * uR ; uO += uM ; uP = _1_0 ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_BSDF_TRANSPARENT_ALPHA"],
ja:[{$:"txt",aa:"uO = mix ( uM , uO , uN ) ; uP = uN ;".split(" ")}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_BSDF_PRINCIPLED_REFRACT"],ja:[{$:"txt",aa:"float uS = uH [ 0 ] ; float uT = uH [ 1 ] ; float uU = clamp ( uG [ 0 ] , _0_0 , _1_0 ) ; vec3 en = oy ; vec3 ei = normalize ( uF ) ; vec3 uV = refract ( - en , ei , _1_0 / uS ) ; uV *= length ( u_camera_eye_frag - h ) ; vec3 uW = aC ( u_proj_matrix_frag * vec4 ( ap ( u_view_tsr_frag , ow + uV ) , _1_0 ) ) ; vec2 uX = uW . xy / uW . z ; const float sc = 10.0 ; vec3 fa = GLSL_TEXTURE_LOD ( u_refractmap , uX . xy , uU * sc ) . rgb ; bG ( fa ) ; float e_ = ( _1_0 - rW ) * uT ; uO = mix ( uO , fa , e_ ) ;".split(" ")}]}]},
{$:"txt",aa:["uF",";"]}]},{$:"node",ba:"BSDF_COMPUTE",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"uY",fa:["vec3"],ea:!1},{$:"node_in",ba:"uZ",fa:["vec2"],ea:!1},{$:"node_in",ba:"u_",fa:["vec3"],ea:!1},{$:"node_in",ba:"va",fa:["float"],ea:!1},{$:"node_in",ba:"vb",fa:["vec4"],ea:!1},{$:"node_out",ba:"vc",fa:["float"],ea:!1},{$:"node_out",ba:"vd",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"vec3 rz = u_ ; float uU = clamp ( vb [ 0 ] , _0_0 , _1_0 ) ; float uQ = clamp ( vb [ 1 ] , _0_0 , _1_0 ) ; float rW = vb [ 2 ] ; vec3 p_ = normalize ( oy + uY ) ; vec3 ve = ( _1_0 - va ) * vec3 ( dot ( rz , uY ) , max ( dot ( uY , p_ ) , _0_0 ) , max ( dot ( u_ , p_ ) , _0_0 ) ) + va ; float pj = ve . x ; float vf = ve . y ; float vg = ve . z ; vc = _0_0 ; if ( uZ . r != _0_0 ) { vc = pj ; if ( uU > _0_0 ) { float pz = max ( dot ( rz , oy ) , _0_0 ) ; float pA = uU * uU ; float cG = _1_0 - _0_5 * ( pA / ( pA + 0.33 ) ) ; vec3 pB = uY - pj * rz ; vec3 pC = oy - pz * rz ; if ( length ( pB ) == _0_0 || length ( pC ) == _0_0 || abs ( pj ) > _1_0 || abs ( pz ) > _1_0 ) vc = pj * cG ; else { float pD = acos ( pj ) ; float pE = acos ( pz ) ; vec3 pF = normalize ( pB ) ; vec3 pG = normalize ( pC ) ; float a , b ; a = max ( pD , pE ) ; b = min ( pD , pE ) ; b *= 0.95 ; float t = max ( dot ( pF , pG ) , _0_0 ) ; float hS = 0.45 * ( pA / ( pA + 0.09 ) ) ; vc = pj * ( cG + ( hS * t * sin ( a ) * tan ( b ) ) ) ; } } vc = max ( vc , _0_0 ) / M_PI ; } float L = uQ ; float vh = L * L ; float d_ = ( vg * vh - vg ) * vg + _1_0 ; float cD = vh / ( M_PI * d_ * d_ ) ; float vi ; float vj ; float vk = _1_0 - vf ; float vl = vk * vk ; vl = vl * vk * vl ; vi = _1_0 ; vj = vl ; float hM = L / 2.0 ; float vm = hM * hM ; float vn = _1_0 - vm ; float vo = _1_0 / ( vf * vf * vn + vm ) ; vi *= vo ; vj *= vo ; float rR = mix ( 0.04 , _1_0 , rW ) ; float vp = mix ( vj , vi , rR ) ; vd = max ( pj * cD * vp , _0_0 ) ;".split(" ")}]},
{$:"node",ba:"BSDF_PRINCIPLED",ma:[{$:"node_var",ba:"USE_NORMAL_IN",aa:["0"]}],la:[{$:"node_in",ba:"vq",fa:["vec4"],ea:!1},{$:"node_in",ba:"vr",fa:["float"],ea:!1},{$:"node_in",ba:"vs",fa:["float"],ea:!1},{$:"node_in",ba:"vt",fa:["float"],ea:!1},{$:"node_in",ba:"vu",fa:["float"],ea:!1},{$:"node_in",ba:"vv",fa:["vec3"],ea:!1},{$:"node_out",ba:"vw",fa:["vec3"],ea:!1},{$:"node_out",ba:"vx",fa:["vec3"],ea:!1},{$:"node_out",ba:"vy",fa:["float"],ea:!1},{$:"node_out",ba:"vz",fa:["vec3"],ea:!1},{$:"node_out",
ba:"vA",fa:["float"],ea:!1},{$:"node_out",ba:"vB",fa:["float"],ea:!1},{$:"node_out",ba:"vC",fa:["vec3"],ea:!1},{$:"node_out",ba:"vD",fa:["float"],ea:!1},{$:"node_out",ba:"vE",fa:["float"],ea:!1},{$:"node_out",ba:"vF",fa:["vec3"],ea:!1},{$:"node_out",ba:"vG",fa:["float"],ea:!1},{$:"node_out",ba:"vH",fa:["vec3"],ea:!1},{$:"node_out",ba:"vI",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"vz = vq . rgb ; vA = vs * vs ; vx = vq . rgb ; vy = vs ; vB = vr ; vD = vt ; vE = vu ; vG = _0_0 ; vI = _1_0 ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["USE_NORMAL_IN"],ja:[{$:"txt",aa:["vC","=","vv",";"]}]},{$:"node_else",ja:[{$:"txt",aa:["vC","=","ox",";"]}]}]},{$:"txt",aa:"vw ; vF = vec3 ( _0_0 ) ; vH = vec3 ( _0_0 ) ;".split(" ")}]},{$:"node",ba:"BSDF_ANISOTROPIC",ma:[],la:[{$:"node_in",ba:"vJ",fa:["vec3"],ea:!1},{$:"node_in",ba:"vK",fa:["float"],ea:!1},{$:"node_in",ba:"vL",fa:["float"],ea:!1},{$:"node_in",ba:"vM",fa:["float"],ea:!1},{$:"node_in",ba:"vN",fa:["vec3"],ea:!1},{$:"node_in",ba:"vO",fa:["vec3"],
ea:!1},{$:"node_out",ba:"vP",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"vP = vJ ; vK ; vL ; vM ; vN ; vO ;".split(" ")}]},{$:"node",ba:"BSDF_DIFFUSE",ma:[{$:"node_var",ba:"USE_NORMAL_IN",aa:["0"]}],la:[{$:"node_in",ba:"vQ",fa:["vec3"],ea:!1},{$:"node_in",ba:"vR",fa:["float"],ea:!1},{$:"node_in",ba:"vS",fa:["vec3"],ea:!1},{$:"node_out",ba:"vT",fa:["vec3"],ea:!1},{$:"node_out",ba:"vU",fa:["vec3"],ea:!1},{$:"node_out",ba:"vV",fa:["float"],ea:!1},{$:"node_out",ba:"vW",fa:["vec3"],ea:!1},{$:"node_out",ba:"vX",
fa:["float"],ea:!1},{$:"node_out",ba:"vY",fa:["float"],ea:!1},{$:"node_out",ba:"vZ",fa:["vec3"],ea:!1},{$:"node_out",ba:"v_",fa:["float"],ea:!1},{$:"node_out",ba:"wa",fa:["float"],ea:!1},{$:"node_out",ba:"wb",fa:["vec3"],ea:!1},{$:"node_out",ba:"wc",fa:["float"],ea:!1},{$:"node_out",ba:"wd",fa:["vec3"],ea:!1},{$:"node_out",ba:"we",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"vU = vQ ; vV = vR ; vX = _1_0 ; vY = _0_0 ; v_ = 1.45 ; wa = _0_0 ; wc = _0_0 ; we = _1_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",
ga:["USE_NORMAL_IN"],ja:[{$:"txt",aa:["vZ","=","vS",";"]}]},{$:"node_else",ja:[{$:"txt",aa:["vZ","=","ox",";"]}]}]},{$:"txt",aa:"vT ; vW = vec3 ( _0_0 ) ; wb = vec3 ( _0_0 ) ; wd = vec3 ( _0_0 ) ;".split(" ")}]},{$:"node",ba:"BSDF_GLASS",ma:[],la:[{$:"node_in",ba:"wf",fa:["vec3"],ea:!1},{$:"node_in",ba:"wg",fa:["float"],ea:!1},{$:"node_in",ba:"wh",fa:["float"],ea:!1},{$:"node_in",ba:"wi",fa:["vec3"],ea:!1},{$:"node_out",ba:"wj",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"wj = wf ; wg ; wh ; wi ;".split(" ")}]},
{$:"node",ba:"BSDF_GLOSSY",ma:[{$:"node_var",ba:"USE_NORMAL_IN",aa:["0"]}],la:[{$:"node_in",ba:"wk",fa:["vec3"],ea:!1},{$:"node_in",ba:"wl",fa:["float"],ea:!1},{$:"node_in",ba:"wm",fa:["vec3"],ea:!1},{$:"node_out",ba:"wn",fa:["vec3"],ea:!1},{$:"node_out",ba:"wo",fa:["vec3"],ea:!1},{$:"node_out",ba:"wp",fa:["float"],ea:!1},{$:"node_out",ba:"wq",fa:["vec3"],ea:!1},{$:"node_out",ba:"wr",fa:["float"],ea:!1},{$:"node_out",ba:"ws",fa:["float"],ea:!1},{$:"node_out",ba:"wt",fa:["vec3"],ea:!1},{$:"node_out",
ba:"wu",fa:["float"],ea:!1},{$:"node_out",ba:"wv",fa:["float"],ea:!1},{$:"node_out",ba:"wA",fa:["vec3"],ea:!1},{$:"node_out",ba:"wB",fa:["float"],ea:!1},{$:"node_out",ba:"wC",fa:["vec3"],ea:!1},{$:"node_out",ba:"wD",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"wq = wk ; wr = wl ; ws = _1_0 ; wu = 1.45 ; wv = _0_0 ; wB = _0_0 ; wD = _1_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_NORMAL_IN"],ja:[{$:"txt",aa:["wt","=","wm",";"]}]},{$:"node_else",ja:[{$:"txt",aa:["wt","=","ox",";"]}]}]},{$:"txt",
aa:"wn ; wo = vec3 ( _0_0 ) ; wp = _0_0 ; wA = vec3 ( _0_0 ) ; wC = vec3 ( _0_0 ) ;".split(" ")}]},{$:"node",ba:"BSDF_HAIR",ma:[],la:[{$:"node_in",ba:"wE",fa:["vec3"],ea:!1},{$:"node_in",ba:"wF",fa:["float"],ea:!1},{$:"node_in",ba:"wG",fa:["float"],ea:!1},{$:"node_in",ba:"wH",fa:["float"],ea:!1},{$:"node_out",ba:"wI",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"wI = wE ; wF ; wG ; wH ;".split(" ")}]},{$:"node",ba:"BSDF_TRANSPARENT",ma:[],la:[{$:"node_in",ba:"wJ",fa:["vec3"],ea:!1},{$:"node_out",ba:"wK",fa:["vec3"],
ea:!1},{$:"node_out",ba:"wL",fa:["vec3"],ea:!1},{$:"node_out",ba:"wM",fa:["float"],ea:!1},{$:"node_out",ba:"wN",fa:["vec3"],ea:!1},{$:"node_out",ba:"wO",fa:["float"],ea:!1},{$:"node_out",ba:"wP",fa:["float"],ea:!1},{$:"node_out",ba:"wQ",fa:["vec3"],ea:!1},{$:"node_out",ba:"wR",fa:["float"],ea:!1},{$:"node_out",ba:"wS",fa:["float"],ea:!1},{$:"node_out",ba:"wT",fa:["vec3"],ea:!1},{$:"node_out",ba:"wU",fa:["float"],ea:!1},{$:"node_out",ba:"wV",fa:["vec3"],ea:!1},{$:"node_out",ba:"wW",fa:["float"],ea:!1}],
ja:[{$:"txt",aa:"wV = wJ ; wP = _0_0 ; wU = _0_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_BSDF_TRANSPARENT_ALPHA"],ja:[{$:"txt",aa:["wW","=","_0_0",";"]}]},{$:"node_else",ja:[{$:"txt",aa:["wW","=","_1_0",";"]}]}]},{$:"txt",aa:"wQ = ox ; wK ; wL = vec3 ( _0_0 ) ; wM = _0_0 ; wN = vec3 ( _0_0 ) ; wO = _0_0 ; wT = vec3 ( _0_0 ) ;".split(" ")}]},{$:"node",ba:"BSDF_TRANSLUCENT",ma:[],la:[{$:"node_in",ba:"wX",fa:["vec3"],ea:!1},{$:"node_in",ba:"wY",fa:["vec3"],ea:!1},{$:"node_out",ba:"wZ",
fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"wZ = wX ; wY ;".split(" ")}]},{$:"node",ba:"BSDF_REFRACTION",ma:[],la:[{$:"node_in",ba:"w_",fa:["vec3"],ea:!1},{$:"node_in",ba:"xa",fa:["float"],ea:!1},{$:"node_in",ba:"xb",fa:["float"],ea:!1},{$:"node_in",ba:"xc",fa:["vec3"],ea:!1},{$:"node_out",ba:"xd",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"xd [ 0 ] = xd [ 1 ] = xd [ 2 ] = _0_0 ; w_ ; xa ; xb ; xc ;".split(" ")}]},{$:"node",ba:"BSDF_TOON",ma:[],la:[{$:"node_in",ba:"xe",fa:["vec3"],ea:!1},{$:"node_in",ba:"xf",fa:["float"],
ea:!1},{$:"node_in",ba:"xg",fa:["float"],ea:!1},{$:"node_in",ba:"xh",fa:["vec3"],ea:!1},{$:"node_out",ba:"xi",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"xi = xe ; xf ; xg ; xh ;".split(" ")}]},{$:"node",ba:"BSDF_VELVET",ma:[],la:[{$:"node_in",ba:"xj",fa:["vec3"],ea:!1},{$:"node_in",ba:"xk",fa:["float"],ea:!1},{$:"node_in",ba:"xl",fa:["vec3"],ea:!1},{$:"node_out",ba:"xm",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"xm = xj ; xk ; xl ;".split(" ")}]},{$:"node",ba:"SUBSURFACE_SCATTERING",ma:[],la:[{$:"node_in",ba:"xn",
fa:["vec3"],ea:!1},{$:"node_in",ba:"xo",fa:["float"],ea:!1},{$:"node_in",ba:"xp",fa:["vec3"],ea:!1},{$:"node_in",ba:"xq",fa:["float"],ea:!1},{$:"node_in",ba:"xr",fa:["float"],ea:!1},{$:"node_in",ba:"xs",fa:["vec3"],ea:!1},{$:"node_out",ba:"xt",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"xt [ 0 ] = xt [ 1 ] = xt [ 2 ] = _0_0 ; xn ; xp ; xq ; xr ; xs ; xo ;".split(" ")}]},{$:"node",ba:"EMISSION",ma:[],la:[{$:"node_in",ba:"xu",fa:["vec3"],ea:!1},{$:"node_in",ba:"xv",fa:["float"],ea:!1},{$:"node_out",ba:"xA",
fa:["vec3"],ea:!1},{$:"node_out",ba:"xB",fa:["vec3"],ea:!1},{$:"node_out",ba:"xC",fa:["float"],ea:!1},{$:"node_out",ba:"xD",fa:["vec3"],ea:!1},{$:"node_out",ba:"xE",fa:["float"],ea:!1},{$:"node_out",ba:"xF",fa:["float"],ea:!1},{$:"node_out",ba:"xG",fa:["vec3"],ea:!1},{$:"node_out",ba:"xH",fa:["float"],ea:!1},{$:"node_out",ba:"xI",fa:["float"],ea:!1},{$:"node_out",ba:"xJ",fa:["vec3"],ea:!1},{$:"node_out",ba:"xK",fa:["float"],ea:!1},{$:"node_out",ba:"xL",fa:["vec3"],ea:!1},{$:"node_out",ba:"xM",fa:["float"],
ea:!1}],ja:[{$:"txt",aa:"xJ = xv * xu ; xF = _0_0 ; xK = _1_0 ; xM = _1_0 ; xG = ox ; xH = 1.45 ; xI = _0_0 ; xA ; xB = vec3 ( _0_0 ) ; xC = _0_0 ; xD = vec3 ( _0_0 ) ; xE = _0_0 ;".split(" ")}]},{$:"node",ba:"AMBIENT_OCCLUSION",ma:[],la:[{$:"node_in",ba:"xN",fa:["vec3"],ea:!1},{$:"node_out",ba:"xO",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"xO [ 0 ] = xO [ 1 ] = xO [ 2 ] = _0_0 ; xN ;".split(" ")}]},{$:"node",ba:"HOLDOUT",ma:[],la:[{$:"node_out",ba:"xP",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"xP [ 0 ] = xP [ 1 ] = xP [ 2 ] = _0_0 ;".split(" ")}]},
{$:"node",ba:"VOLUME_ABSORPTION",ma:[],la:[{$:"node_in",ba:"xQ",fa:["vec3"],ea:!1},{$:"node_in",ba:"xR",fa:["float"],ea:!1},{$:"node_out",ba:"xS",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"xS [ 0 ] = xS [ 1 ] = xS [ 2 ] = _0_0 ; xQ ; xR ;".split(" ")}]},{$:"node",ba:"VOLUME_SCATTER",ma:[],la:[{$:"node_in",ba:"xT",fa:["vec3"],ea:!1},{$:"node_in",ba:"xU",fa:["float"],ea:!1},{$:"node_in",ba:"xV",fa:["float"],ea:!1},{$:"node_out",ba:"xW",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"xW [ 0 ] = xW [ 1 ] = xW [ 2 ] = _0_0 ; xT ; xU ; xV ;".split(" ")}]},
{$:"node",ba:"BUMP",ma:[{$:"node_var",ba:"INVERT",aa:["0"]},{$:"node_var",ba:"USE_NORMAL_IN",aa:["0"]}],la:[{$:"node_in",ba:"xX",fa:["float"],ea:!1},{$:"node_in",ba:"xY",fa:["float"],ea:!1},{$:"node_in",ba:"xZ",fa:["float"],ea:!1},{$:"node_in",ba:"x_",fa:["vec3"],ea:!1},{$:"node_out",ba:"ya",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float aM = xY ; float gL = xX ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["INVERT"],ja:[{$:"txt",aa:["aM","=","-","_1_0",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_NORMAL_IN"],
ja:[{$:"txt",aa:["vec3","U","=","x_",";"]}]},{$:"node_else",ja:[{$:"txt",aa:["vec3","U","=","ox",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_DERIVATIVES_EXT"],ja:[{$:"txt",aa:"vec3 yb = dFdx ( ow ) ; vec3 yc = dFdy ( ow ) ; vec3 yd = cross ( yc , U ) ; vec3 ye = cross ( U , yb ) ; float dy = dot ( yb , yd ) ; float yf = abs ( dy ) ; vec3 yg = dFdx ( xZ ) * yd + dFdy ( xZ ) * ye ; gL = max ( gL , _0_0 ) ; ya = normalize ( yf * U - aM * sign ( dy ) * yg ) ; ya = normalize ( gL * ya + ( _1_0 - gL ) * U ) ;".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:["ya","=","U",";"]}]}]}]},{$:"node",ba:"DISPLACEMENT_BUMP",ma:[],la:[{$:"node_in",ba:"yh",fa:["float"],ea:!1},{$:"node_out",ba:"yi",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float aM = 0.1 ; vec3 U = ox ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_DERIVATIVES_EXT"],ja:[{$:"txt",aa:"vec3 yb = dFdx ( ow ) ; vec3 yc = dFdy ( ow ) ; vec3 yd = cross ( yc , U ) ; vec3 ye = cross ( U , yb ) ; float dy = dot ( yb , yd ) ; float yf = abs ( dy ) ; vec3 yg = dFdx ( yh ) * yd + dFdy ( yh ) * ye ; yi = normalize ( yf * U - aM * sign ( dy ) * yg ) ;".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:["yi","=","U",";"]}]}]}]},{$:"node",ba:"NORMAL_MAP",ma:[{$:"node_var",ba:"SPACE",aa:["NM_TANGENT"]},{$:"node_var",ba:"USE_NORMAL_IN",aa:["0"]}],la:[{$:"node_in",ba:"yj",fa:["float"],ea:!1},{$:"node_in",ba:"yk",fa:["vec4"],ea:!1},{$:"node_in",ba:"yl",fa:["vec3"],ea:!1},{$:"node_out",ba:"ym",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_NORMAL_IN"],ja:[{$:"txt",aa:["vec3","yn","=","yl",";"]}]},{$:"node_else",ja:[{$:"txt",aa:["vec3","yn","=","sM",";"]}]}]},
{$:"node_cond",da:[{$:"node_if",ga:["SPACE","NM_TANGENT",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"ym = 2.0 * yk . xyz - _1_0 ; ym = sQ * ym ;".split(" ")}]},{$:"node_elif",ga:["SPACE","NM_OBJECT",{$:"equal_expr",ia:2},"SPACE","NM_BLENDER_OBJECT",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ja:[{$:"txt",aa:"ym = 2.0 * yk . xyz - _1_0 ; ym . yz *= - _1_0 ; ym = bI ( u_model_tsr , ym ) ;".split(" ")}]},{$:"node_elif",ga:["SPACE","NM_WORLD",{$:"equal_expr",ia:2},"SPACE","NM_BLENDER_WORLD",{$:"equal_expr",
ia:2},{$:"logical_or_expr",ia:2}],ja:[{$:"txt",aa:"ym = 2.0 * yk . xyz - _1_0 ; ym . yz *= - _1_0 ;".split(" ")}]}]},{$:"txt",aa:"float me = max ( yj , _0_0 ) ; ym = normalize ( mix ( yn , ym , me ) ) ;".split(" ")}]},{$:"node",ba:"VECT_TRANSFORM",ma:[{$:"node_var",ba:"CONVERT_TYPE",aa:["VT_WORLD_TO_OBJECT"]},{$:"node_var",ba:"VECTOR_TYPE",aa:["VT_VECTOR"]}],la:[{$:"node_in",ba:"yo",fa:["vec3"],ea:!1},{$:"node_out",ba:"yp",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["CONVERT_TYPE",
"VT_WORLD_TO_WORLD",{$:"equal_expr",ia:2},"CONVERT_TYPE","VT_OBJECT_TO_OBJECT",{$:"equal_expr",ia:2},"CONVERT_TYPE","VT_CAMERA_TO_CAMERA",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:3}],ja:[{$:"txt",aa:["yp","=","yo",";"]}]},{$:"node_else",ja:[{$:"node_cond",da:[{$:"node_if",ga:["VECTOR_TYPE","VT_POINT",{$:"equal_expr",ia:2}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["CONVERT_TYPE","VT_WORLD_TO_CAMERA",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = ap ( u_view_tsr_frag , yo ) ;".split(" ")}]},{$:"node_elif",
ga:["CONVERT_TYPE","VT_WORLD_TO_OBJECT",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = ap ( u_model_tsr_inverse , yo ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_OBJECT_TO_WORLD",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = ap ( u_model_tsr , yo ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_OBJECT_TO_CAMERA",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = ap ( u_model_tsr , yo ) ; yp = ap ( u_view_tsr_frag , yp ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_CAMERA_TO_WORLD",
{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = ap ( u_view_tsr_inverse , yo ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_CAMERA_TO_OBJECT",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = ap ( u_view_tsr_inverse , yo ) ; yp = ap ( u_model_tsr_inverse , yp ) ;".split(" ")}]}]}]},{$:"node_else",ja:[{$:"node_cond",da:[{$:"node_if",ga:["CONVERT_TYPE","VT_WORLD_TO_CAMERA",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = _ ( u_view_tsr_frag , yo ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_WORLD_TO_OBJECT",
{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = _ ( u_model_tsr_inverse , yo ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_OBJECT_TO_WORLD",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = _ ( u_model_tsr , yo ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_OBJECT_TO_CAMERA",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = _ ( u_model_tsr , yo ) ; yp = _ ( u_view_tsr_frag , yp ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_CAMERA_TO_WORLD",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = _ ( u_view_tsr_inverse , yo ) ;".split(" ")}]},
{$:"node_elif",ga:["CONVERT_TYPE","VT_CAMERA_TO_OBJECT",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = _ ( u_view_tsr_inverse , yo ) ; yp = _ ( u_model_tsr_inverse , yp ) ;".split(" ")}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["VECTOR_TYPE","VT_NORMAL",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = normalize ( yp ) ;".split(" ")}]}]}]}]}]},{$:"node",ba:"BLACKBODY",ma:[],la:[{$:"node_in",ba:"yq",fa:["float"],ea:!1},{$:"node_out",ba:"yr",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"yr [ 0 ] = yr [ 1 ] = yr [ 2 ] = _0_0 ; yq ;".split(" ")}]},
{$:"node",ba:"WAVELENGTH",ma:[],la:[{$:"node_in",ba:"ys",fa:["float"],ea:!1},{$:"node_out",ba:"yt",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"yt [ 0 ] = yt [ 1 ] = yt [ 2 ] = _0_0 ; ys ;".split(" ")}]},{$:"node",ba:"SEPXYZ",ma:[],la:[{$:"node_in",ba:"yu",fa:["vec3"],ea:!1},{$:"node_out",ba:"yv",fa:["float"],ea:!1},{$:"node_out",ba:"yA",fa:["float"],ea:!1},{$:"node_out",ba:"yB",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"yv = yu [ 0 ] ; yA = yu [ 1 ] ; yB = yu [ 2 ] ;".split(" ")}]},{$:"node",ba:"COMBXYZ",ma:[],
la:[{$:"node_in",ba:"yC",fa:["float"],ea:!1},{$:"node_in",ba:"yD",fa:["float"],ea:!1},{$:"node_in",ba:"yE",fa:["float"],ea:!1},{$:"node_out",ba:"yF",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"yF [ 0 ] = yC ; yF [ 1 ] = yD ; yF [ 2 ] = yE ;".split(" ")}]},{$:"node",ba:"BRIGHTCONTRAST",ma:[],la:[{$:"node_in",ba:"yG",fa:["vec3"],ea:!1},{$:"node_in",ba:"yH",fa:["float"],ea:!1},{$:"node_in",ba:"yI",fa:["float"],ea:!1},{$:"node_out",ba:"yJ",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float b = yH - yI * _0_5 ; yJ = max ( ( _1_0 + yI ) * yG + b , vec3 ( _0_0 ) ) ;".split(" ")}]},
{$:"node",ba:"LIGHT_FALLOFF",ma:[],la:[{$:"node_in",ba:"yK",fa:["float"],ea:!1},{$:"node_in",ba:"yL",fa:["float"],ea:!1},{$:"node_out",ba:"yM",fa:["float"],ea:!1},{$:"node_out",ba:"yN",fa:["float"],ea:!1},{$:"node_out",ba:"yO",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"yM = yN = yO = _0_0 ; yK ; yL ;".split(" ")}]},{$:"node",ba:"TEX_SKY",ma:[],la:[{$:"node_in",ba:"yP",fa:["vec3"],ea:!1},{$:"node_out",ba:"yQ",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"yQ [ 0 ] = yQ [ 1 ] = yQ [ 2 ] = _0_0 ; yP ;".split(" ")}]},
{$:"node",ba:"TEX_NOISE",ma:[],la:[{$:"node_in",ba:"yR",fa:["vec3"],ea:!1},{$:"node_in",ba:"yS",fa:["float"],ea:!1},{$:"node_in",ba:"yT",fa:["float"],ea:!1},{$:"node_in",ba:"yU",fa:["float"],ea:!1},{$:"node_out",ba:"yV",fa:["vec3"],ea:!1},{$:"node_out",ba:"yW",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"yV [ 0 ] = yV [ 1 ] = yV [ 2 ] = _0_0 ; yW = _1_0 ; yR ; yS ; yT ; yU ;".split(" ")}]},{$:"node",ba:"TEX_WAVE",ma:[],la:[{$:"node_in",ba:"yX",fa:["vec3"],ea:!1},{$:"node_in",ba:"yY",fa:["float"],ea:!1},
{$:"node_in",ba:"yZ",fa:["float"],ea:!1},{$:"node_in",ba:"y_",fa:["float"],ea:!1},{$:"node_in",ba:"za",fa:["float"],ea:!1},{$:"node_out",ba:"zb",fa:["vec3"],ea:!1},{$:"node_out",ba:"zc",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"zb [ 0 ] = zb [ 1 ] = zb [ 2 ] = _0_0 ; zc = _1_0 ; yX ; yY ; yZ ; y_ ; za ;".split(" ")}]},{$:"node",ba:"TEX_VORONOI",ma:[],la:[{$:"node_in",ba:"zd",fa:["vec3"],ea:!1},{$:"node_in",ba:"ze",fa:["float"],ea:!1},{$:"node_out",ba:"zf",fa:["vec3"],ea:!1},{$:"node_out",ba:"zg",fa:["float"],
ea:!1}],ja:[{$:"txt",aa:"zf [ 0 ] = zf [ 1 ] = zf [ 2 ] = _0_0 ; zg = _1_0 ; zd ; ze ;".split(" ")}]},{$:"node",ba:"TEX_MUSGRAVE",ma:[],la:[{$:"node_in",ba:"zh",fa:["vec3"],ea:!1},{$:"node_in",ba:"zi",fa:["float"],ea:!1},{$:"node_in",ba:"zj",fa:["float"],ea:!1},{$:"node_in",ba:"zk",fa:["float"],ea:!1},{$:"node_in",ba:"zl",fa:["float"],ea:!1},{$:"node_in",ba:"zm",fa:["float"],ea:!1},{$:"node_in",ba:"zn",fa:["float"],ea:!1},{$:"node_out",ba:"zo",fa:["vec3"],ea:!1},{$:"node_out",ba:"zp",fa:["float"],
ea:!1}],ja:[{$:"txt",aa:"zo [ 0 ] = zo [ 1 ] = zo [ 2 ] = _0_0 ; zp = _1_0 ; zh ; zi ; zj ; zk ; zl ; zm ; zn ;".split(" ")}]},{$:"node",ba:"TEX_GRADIENT",ma:[],la:[{$:"node_in",ba:"zq",fa:["vec3"],ea:!1},{$:"node_out",ba:"zr",fa:["vec3"],ea:!1},{$:"node_out",ba:"zs",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"zr [ 0 ] = zr [ 1 ] = zr [ 2 ] = _0_0 ; zs = _1_0 ; zq ;".split(" ")}]},{$:"node",ba:"TEX_MAGIC",ma:[],la:[{$:"node_in",ba:"zt",fa:["vec3"],ea:!1},{$:"node_in",ba:"zu",fa:["float"],ea:!1},{$:"node_in",
ba:"zv",fa:["float"],ea:!1},{$:"node_out",ba:"zA",fa:["vec3"],ea:!1},{$:"node_out",ba:"zB",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"zA [ 0 ] = zA [ 1 ] = zA [ 2 ] = _0_0 ; zB = _1_0 ; zt ; zu ; zv ;".split(" ")}]},{$:"node",ba:"TEX_CHECKER",ma:[],la:[{$:"node_in",ba:"zC",fa:["vec3"],ea:!1},{$:"node_in",ba:"zD",fa:["vec3"],ea:!1},{$:"node_in",ba:"zE",fa:["vec3"],ea:!1},{$:"node_in",ba:"zF",fa:["float"],ea:!1},{$:"node_out",ba:"zG",fa:["vec3"],ea:!1},{$:"node_out",ba:"zH",fa:["float"],ea:!1}],ja:[{$:"txt",
aa:"zG [ 0 ] = zG [ 1 ] = zG [ 2 ] = _0_0 ; zH = _1_0 ; zC ; zD ; zE ; zF ;".split(" ")}]},{$:"node",ba:"TEX_BRICK",ma:[],la:[{$:"node_in",ba:"zI",fa:["vec3"],ea:!1},{$:"node_in",ba:"zJ",fa:["vec3"],ea:!1},{$:"node_in",ba:"zK",fa:["vec3"],ea:!1},{$:"node_in",ba:"zL",fa:["vec3"],ea:!1},{$:"node_in",ba:"zM",fa:["float"],ea:!1},{$:"node_in",ba:"zN",fa:["float"],ea:!1},{$:"node_in",ba:"zO",fa:["float"],ea:!1},{$:"node_in",ba:"zP",fa:["float"],ea:!1},{$:"node_in",ba:"zQ",fa:["float"],ea:!1},{$:"node_out",
ba:"zR",fa:["vec3"],ea:!1},{$:"node_out",ba:"zS",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"zR [ 0 ] = zR [ 1 ] = zR [ 2 ] = _0_0 ; zS = _1_0 ; zI ; zJ ; zK ; zL ; zM ; zN ; zO ; zP ; zQ ;".split(" ")}]},{$:"node",ba:"ADD_SHADER",ma:[],la:[{$:"node_in",ba:"zT",fa:["vec3"],ea:!1},{$:"node_in",ba:"zU",fa:["vec3"],ea:!1},{$:"node_out",ba:"zV",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"zV = clamp ( zT + zU , vec3 ( _0_0 ) , vec3 ( _1_0 ) ) ;".split(" ")}]},{$:"node",ba:"MIX_SHADER",ma:[],la:[{$:"node_in",ba:"zW",
fa:["float"],ea:!1},{$:"node_in",ba:"zX",fa:["vec3"],ea:!1},{$:"node_in",ba:"zY",fa:["vec3"],ea:!1},{$:"node_in",ba:"zZ",fa:["vec3"],ea:!1},{$:"node_in",ba:"z_",fa:["float"],ea:!1},{$:"node_in",ba:"Aa",fa:["vec3"],ea:!1},{$:"node_in",ba:"Ab",fa:["float"],ea:!1},{$:"node_in",ba:"Ac",fa:["float"],ea:!1},{$:"node_in",ba:"Ad",fa:["vec3"],ea:!1},{$:"node_in",ba:"Ae",fa:["float"],ea:!1},{$:"node_in",ba:"Af",fa:["float"],ea:!1},{$:"node_in",ba:"Ag",fa:["vec3"],ea:!1},{$:"node_in",ba:"Ah",fa:["float"],ea:!1},
{$:"node_in",ba:"Ai",fa:["vec3"],ea:!1},{$:"node_in",ba:"Aj",fa:["float"],ea:!1},{$:"node_in",ba:"Ak",fa:["vec3"],ea:!1},{$:"node_in",ba:"Al",fa:["float"],ea:!1},{$:"node_in",ba:"Am",fa:["vec3"],ea:!1},{$:"node_in",ba:"An",fa:["float"],ea:!1},{$:"node_in",ba:"Ao",fa:["float"],ea:!1},{$:"node_in",ba:"Ap",fa:["vec3"],ea:!1},{$:"node_in",ba:"Aq",fa:["float"],ea:!1},{$:"node_in",ba:"Ar",fa:["float"],ea:!1},{$:"node_in",ba:"As",fa:["vec3"],ea:!1},{$:"node_in",ba:"At",fa:["float"],ea:!1},{$:"node_in",ba:"Au",
fa:["vec3"],ea:!1},{$:"node_in",ba:"Av",fa:["float"],ea:!1},{$:"node_out",ba:"Aw",fa:["vec3"],ea:!1},{$:"node_out",ba:"Ax",fa:["vec3"],ea:!1},{$:"node_out",ba:"Ay",fa:["float"],ea:!1},{$:"node_out",ba:"Az",fa:["vec3"],ea:!1},{$:"node_out",ba:"AA",fa:["float"],ea:!1},{$:"node_out",ba:"AB",fa:["float"],ea:!1},{$:"node_out",ba:"AC",fa:["vec3"],ea:!1},{$:"node_out",ba:"AD",fa:["float"],ea:!1},{$:"node_out",ba:"AE",fa:["float"],ea:!1},{$:"node_out",ba:"AF",fa:["vec3"],ea:!1},{$:"node_out",ba:"AG",fa:["float"],
ea:!1},{$:"node_out",ba:"AH",fa:["vec3"],ea:!1},{$:"node_out",ba:"AI",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"float AJ = sqrt ( clamp ( zW , _0_0 , _1_0 ) ) ; Ax = mix ( zZ , Ak , AJ ) ; Ay = mix ( z_ , Al , AJ ) ; if ( Ac > _0_0 ) { if ( Ao > _0_0 ) { Az = mix ( Aa , Am , AJ ) ; AA = mix ( Ab , An , AJ ) ; } else { Az = Aa ; AA = Ab ; } } else { Az = Am ; AA = An ; } if ( Ah > _0_0 ) { if ( At > _0_0 ) { AF = mix ( Ag , As , AJ ) ; } else { AF = Ag ; } } else { AF = As ; } AB = mix ( Ac , Ao , AJ ) ; AC = mix ( Ad , Ap , AJ ) ; AG = mix ( Ah , At , AJ ) ; AH = mix ( Ai , Au , AJ ) ; AI = mix ( Aj , Av , AJ ) ;".split(" ")}]},
{$:"node",ba:"UV_MERGED",ma:[],la:[{$:"node_out",ba:"AK",fa:["vec3"],ea:!1},{$:"node_out",ba:"AL",fa:["vec3"],ea:!1},{$:"node_param",ba:"sC",fa:["GLSL_IN","vec2"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_AK"],ja:[{$:"txt",aa:"AK = sn ( sC ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_AL"],ja:[{$:"txt",aa:"AL = vec3 ( sC , _0_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"TEX_COORD_UV",ma:[],la:[{$:"node_out",ba:"AM",fa:["vec3"],ea:!1},{$:"node_param",ba:"sD",fa:["GLSL_IN",
"vec2"],ea:!1}],ja:[{$:"txt",aa:"AM = vec3 ( sD , _0_0 ) ;".split(" ")}]},{$:"node",ba:"TEX_COORD_NO",ma:[],la:[{$:"node_out",ba:"AN",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:["AN","=","ox",";"]}]},{$:"node",ba:"TEX_COORD_GE",ma:[],la:[{$:"node_out",ba:"AO",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["IS_WORLD",{$:"logic_negative_expr",ia:1}],ja:[{$:"txt",aa:["AO","=","sj",";"]}]},{$:"node_else",ja:[{$:"txt",aa:["AO","=","sJ",";"]}]}]}]},{$:"node",ba:"TEX_COORD_OB",ma:[],la:[{$:"node_out",
ba:"AP",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["IS_WORLD",{$:"logic_negative_expr",ia:1}],ja:[{$:"txt",aa:"AP = ap ( u_model_tsr_inverse , ow ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:["AP","=","sJ",";"]}]}]}]},{$:"node",ba:"TEX_COORD_CA",ma:[],la:[{$:"node_out",ba:"AQ",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"AQ . xy = sR . xy ; AQ . z = _1_0 ;".split(" ")}]},{$:"node",ba:"TEX_COORD_WI",ma:[],la:[{$:"node_out",ba:"AR",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"AR . xy = l . xy / l . z ; AR . z = _0_0 ;".split(" ")}]},
{$:"node",ba:"TEX_COORD_RE",ma:[],la:[{$:"node_out",ba:"AS",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"AS = reflect ( - oy , ox ) ;".split(" ")}]},{$:"node",ba:"UVMAP",ma:[],la:[{$:"node_out",ba:"AT",fa:["vec3"],ea:!1},{$:"node_param",ba:"sE",fa:["GLSL_IN","vec2"],ea:!1}],ja:[{$:"txt",aa:"AT = vec3 ( sE , _0_0 ) ;".split(" ")}]},{$:"node",ba:"PARTICLE_INFO",ma:[],la:[{$:"node_out",ba:"AU",fa:["float"],ea:!1},{$:"node_out",ba:"AV",fa:["float"],ea:!1},{$:"node_out",ba:"AW",fa:["float"],ea:!1},{$:"node_out",
ba:"AX",fa:["vec3"],ea:!1},{$:"node_out",ba:"AY",fa:["float"],ea:!1},{$:"node_out",ba:"AZ",fa:["vec3"],ea:!1},{$:"node_out",ba:"A_",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"AU = _0_0 ; AV = _0_0 ; AW = _0_0 ; AX = vec3 ( _0_0 ) ; AY = _0_0 ; AZ = AX ; A_ = AX ;".split(" ")}]},{$:"node",ba:"HAIR_INFO",ma:[],la:[{$:"node_out",ba:"Ba",fa:["float"],ea:!1},{$:"node_out",ba:"Bb",fa:["float"],ea:!1},{$:"node_out",ba:"Bc",fa:["float"],ea:!1},{$:"node_out",ba:"Bd",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"Ba = _0_0 ; Bb = _0_0 ; Bc = _0_0 ; Bd = vec3 ( _0_0 ) ;".split(" ")}]},
{$:"node",ba:"OBJECT_INFO",ma:[{$:"node_var",ba:"USE_LOCATION_OUT",aa:["0"]},{$:"node_var",ba:"USE_OBJ_IND_OUT",aa:["0"]},{$:"node_var",ba:"USE_MAT_IND_OUT",aa:["0"]},{$:"node_var",ba:"USE_RANDOM_OUT",aa:["0"]}],la:[{$:"node_out",ba:"Be",fa:["vec3"],ea:!1},{$:"node_out",ba:"Bf",fa:["float"],ea:!1},{$:"node_out",ba:"Bg",fa:["float"],ea:!1},{$:"node_out",ba:"Bh",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_LOCATION_OUT"],ja:[{$:"txt",aa:"Be = ex ( u_model_tsr ) ;".split(" ")}]}]},
{$:"node_cond",da:[{$:"node_if",ga:["USE_OBJ_IND_OUT"],ja:[{$:"txt",aa:"Bf = u_obj_info . r ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_MAT_IND_OUT"],ja:[{$:"txt",aa:"Bg = u_obj_info . g ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_RANDOM_OUT"],ja:[{$:"txt",aa:"Bh = u_obj_info . b ;".split(" ")}]}]}]},{$:"node",ba:"WIREFRAME",ma:[],la:[{$:"node_in",ba:"Bi",fa:["float"],ea:!1},{$:"node_out",ba:"Bj",fa:["float"],ea:!1}],ja:[{$:"txt",aa:["Bj","=","Bi",";"]}]},{$:"node",
ba:"TANGENT",ma:[],la:[{$:"node_out",ba:"Bk",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"Bk = vec3 ( _0_0 ) ;".split(" ")}]},{$:"node",ba:"LAYER_WEIGHT",ma:[{$:"node_var",ba:"USE_NORMAL_IN",aa:["0"]}],la:[{$:"node_in",ba:"Bl",fa:["float"],ea:!1},{$:"node_in",ba:"Bm",fa:["vec3"],ea:!1},{$:"node_out",ba:"Bn",fa:["float"],ea:!1},{$:"node_out",ba:"Bo",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_NORMAL_IN"],ja:[{$:"txt",aa:"vec3 cw = normalize ( Bm ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",
aa:["vec3","cw","=","ox",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["CAMERA_TYPE","CAM_TYPE_PERSP",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"vec3 Bp = normalize ( oy ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:["vec3","Bp","=","u_camera_direction",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Bn"],ja:[{$:"txt",aa:"float su = max ( _1_0 - Bl , 0.00001 ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"non_equal_expr",ia:2}],ja:[{$:"txt",aa:"su = gl_FrontFacing == false ? su : _1_0 / su ;".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"su = gl_FrontFacing ? su : _1_0 / su ;".split(" ")}]}]},{$:"txt",aa:"Bn = sv ( Bp , cw , su ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:["Bn","=","_0_0",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Bo"],ja:[{$:"txt",aa:"Bo = abs ( dot ( Bp , cw ) ) ; float eA = Bl ; if ( eA != _0_5 ) { eA = clamp ( eA , _0_0 , 0.99999 ) ; eA = ( eA < _0_5 ) ? 2.0 * eA : _0_5 / ( _1_0 - eA ) ; Bo = pow ( Bo , eA ) ; } Bo = _1_0 - Bo ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",
aa:["Bo","=","_0_0",";"]}]}]}]},{$:"node",ba:"LIGHT_PATH",ma:[],la:[{$:"node_out",ba:"Bq",fa:["float"],ea:!1},{$:"node_out",ba:"Br",fa:["float"],ea:!1},{$:"node_out",ba:"Bs",fa:["float"],ea:!1},{$:"node_out",ba:"Bt",fa:["float"],ea:!1},{$:"node_out",ba:"Bu",fa:["float"],ea:!1},{$:"node_out",ba:"Bv",fa:["float"],ea:!1},{$:"node_out",ba:"Bw",fa:["float"],ea:!1},{$:"node_out",ba:"Bx",fa:["float"],ea:!1},{$:"node_out",ba:"By",fa:["float"],ea:!1},{$:"node_out",ba:"Bz",fa:["float"],ea:!1},{$:"node_out",
ba:"BA",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Bq = Br = Bs = _0_0 ; Bt = Bu = Bv = _0_0 ; Bw = BA = By = Bz = _0_0 ; Bx = _0_0 ;".split(" ")}]},{$:"node",ba:"ATTRIBUTE",ma:[],la:[{$:"node_out",ba:"BB",fa:["vec3"],ea:!1},{$:"node_out",ba:"BC",fa:["vec3"],ea:!1},{$:"node_out",ba:"BD",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"BB = BC = vec3 ( _0_0 ) ; BD = _0_0 ;".split(" ")}]},{$:"node",ba:"SCRIPT",ma:[],la:[],ja:[]},{$:"node",ba:"CURVE_VEC",ma:[{$:"node_var",ba:"READ_R",aa:["0"]},{$:"node_var",ba:"READ_G",
aa:["0"]},{$:"node_var",ba:"READ_B",aa:["0"]},{$:"node_var",ba:"NODE_TEX_ROW",aa:["_0_0"]}],la:[{$:"node_in",ba:"BE",fa:["float"],ea:!1},{$:"node_in",ba:"BF",fa:["vec3"],ea:!1},{$:"node_out",ba:"BG",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:["BG","=","BF",";"]},{$:"node_cond",da:[{$:"node_if",ga:["READ_R"],ja:[{$:"txt",aa:"BG . r = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * BF . r + _0_5 , NODE_TEX_ROW ) ) . r - _0_5 ) * 2.0 ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["READ_G"],ja:[{$:"txt",
aa:"BG . g = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * BF . g + _0_5 , NODE_TEX_ROW ) ) . g - _0_5 ) * 2.0 ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["READ_B"],ja:[{$:"txt",aa:"BG . b = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * BF . b + _0_5 , NODE_TEX_ROW ) ) . b - _0_5 ) * 2.0 ;".split(" ")}]}]},{$:"txt",aa:"BG = mix ( BF , BG , BE ) ;".split(" ")}]},{$:"node",ba:"CURVE_RGB",ma:[{$:"node_var",ba:"READ_A",aa:["0"]},{$:"node_var",ba:"READ_R",aa:["0"]},{$:"node_var",ba:"READ_G",
aa:["0"]},{$:"node_var",ba:"READ_B",aa:["0"]},{$:"node_var",ba:"NODE_TEX_ROW",aa:["_0_0"]}],la:[{$:"node_in",ba:"BH",fa:["float"],ea:!1},{$:"node_in",ba:"BI",fa:["vec3"],ea:!1},{$:"node_out",ba:"BJ",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["READ_A"],ja:[{$:"txt",aa:"float r = GLSL_TEXTURE ( u_nodes_texture , vec2 ( BI . r , NODE_TEX_ROW ) ) . a ; float g = GLSL_TEXTURE ( u_nodes_texture , vec2 ( BI . g , NODE_TEX_ROW ) ) . a ; float b = GLSL_TEXTURE ( u_nodes_texture , vec2 ( BI . b , NODE_TEX_ROW ) ) . a ;".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"float r = BI . r ; float g = BI . g ; float b = BI . b ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["READ_R"],ja:[{$:"txt",aa:"BJ . r = GLSL_TEXTURE ( u_nodes_texture , vec2 ( r , NODE_TEX_ROW ) ) . r ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"BJ . r = r ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["READ_G"],ja:[{$:"txt",aa:"BJ . g = GLSL_TEXTURE ( u_nodes_texture , vec2 ( g , NODE_TEX_ROW ) ) . g ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",
aa:"BJ . g = g ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["READ_B"],ja:[{$:"txt",aa:"BJ . b = GLSL_TEXTURE ( u_nodes_texture , vec2 ( b , NODE_TEX_ROW ) ) . b ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"BJ . b = b ;".split(" ")}]}]},{$:"txt",aa:"BJ = mix ( BI , BJ , BH ) ;".split(" ")}]},{$:"node",ba:"VALTORGB",ma:[{$:"node_var",ba:"NODE_TEX_ROW",aa:["_0_0"]}],la:[{$:"node_in",ba:"BK",fa:["float"],ea:!1},{$:"node_out",ba:"BL",fa:["vec3"],ea:!1},{$:"node_out",ba:"BM",fa:["float"],
ea:!1}],ja:[{$:"txt",aa:"vec4 BN = GLSL_TEXTURE ( u_nodes_texture , vec2 ( BK , NODE_TEX_ROW ) ) ; BL = BN . rgb ; BM = BN . a ;".split(" ")}]},{$:"node",ba:"MAPPING",ma:[{$:"node_var",ba:"MAPPING_SCALE_DEF",aa:["0"]},{$:"node_var",ba:"MAPPING_SCALE",aa:["vec3","(","_1_0",")"]},{$:"node_var",ba:"MAPPING_TRANS_DEF",aa:["0"]},{$:"node_var",ba:"MAPPING_TRANS",aa:["vec3","(","_0_0",")"]},{$:"node_var",ba:"MAPPING_TRS_MATRIX_DEF",aa:["0"]},{$:"node_var",ba:"MAPPING_TRS_MATRIX",aa:["mat4","(","_1_0",")"]},
{$:"node_var",ba:"MAPPING_MIN_CLIP_DEF",aa:["0"]},{$:"node_var",ba:"MAPPING_MIN_CLIP",aa:["vec3","(","_0_0",")"]},{$:"node_var",ba:"MAPPING_MAX_CLIP_DEF",aa:["0"]},{$:"node_var",ba:"MAPPING_MAX_CLIP",aa:["vec3","(","_1_0",")"]},{$:"node_var",ba:"MAPPING_IS_NORMAL",aa:["0"]}],la:[{$:"node_in",ba:"BO",fa:["vec3"],ea:!1},{$:"node_out",ba:"BP",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:["BP","=","BO",";"]},{$:"node_cond",da:[{$:"node_if",ga:["MAPPING_SCALE_DEF"],ja:[{$:"txt",aa:"BP = BP * MAPPING_SCALE ;".split(" ")}]}]},
{$:"node_cond",da:[{$:"node_if",ga:["MAPPING_TRANS_DEF"],ja:[{$:"txt",aa:"BP = BP + MAPPING_TRANS ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["MAPPING_TRS_MATRIX_DEF"],ja:[{$:"txt",aa:"BP = ( MAPPING_TRS_MATRIX * vec4 ( BP , _1_0 ) ) . xyz ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["MAPPING_MIN_CLIP_DEF"],ja:[{$:"txt",aa:"BP = max ( BP , MAPPING_MIN_CLIP ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["MAPPING_MAX_CLIP_DEF"],ja:[{$:"txt",aa:"BP = min ( BP , MAPPING_MAX_CLIP ) ;".split(" ")}]}]},
{$:"node_cond",da:[{$:"node_if",ga:["MAPPING_IS_NORMAL"],ja:[{$:"txt",aa:"BP = normalize ( BP ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_ADD",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"BQ",fa:["float"],ea:!1},{$:"node_in",ba:"BR",fa:["float"],ea:!1},{$:"node_out",ba:"BS",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"BS = BQ + BR ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"BS = clamp ( BS , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_SUBTRACT",
ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"BT",fa:["float"],ea:!1},{$:"node_in",ba:"BU",fa:["float"],ea:!1},{$:"node_out",ba:"BV",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"BV = BT - BU ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"BV = clamp ( BV , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_MULTIPLY",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"BW",fa:["float"],ea:!1},{$:"node_in",ba:"BX",fa:["float"],
ea:!1},{$:"node_out",ba:"BY",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"BY = BW * BX ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"BY = clamp ( BY , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_DIVIDE",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"BZ",fa:["float"],ea:!1},{$:"node_in",ba:"B_",fa:["float"],ea:!1},{$:"node_out",ba:"Ca",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Ca = ( B_ != _0_0 ) ? BZ / B_ : _0_0 ;".split(" ")},{$:"node_cond",
da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Ca = clamp ( Ca , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_SINE",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Cb",fa:["float"],ea:!1},{$:"node_in",ba:"Cc",fa:["float"],ea:!1},{$:"node_out",ba:"Cd",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Cd = sin ( Cb ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Cd = clamp ( Cd , _0_0 , _1_0 ) ;".split(" ")}]}]},{$:"txt",aa:["Cc",";"]}]},
{$:"node",ba:"MATH_COSINE",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Ce",fa:["float"],ea:!1},{$:"node_in",ba:"Cf",fa:["float"],ea:!1},{$:"node_out",ba:"Cg",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Cg = cos ( Ce ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Cg = clamp ( Cg , _0_0 , _1_0 ) ;".split(" ")}]}]},{$:"txt",aa:["Cf",";"]}]},{$:"node",ba:"MATH_TANGENT",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Ch",
fa:["float"],ea:!1},{$:"node_in",ba:"Ci",fa:["float"],ea:!1},{$:"node_out",ba:"Cj",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Cj = tan ( Ch ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Cj = clamp ( Cj , _0_0 , _1_0 ) ;".split(" ")}]}]},{$:"txt",aa:["Ci",";"]}]},{$:"node",ba:"MATH_ARCSINE",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Ck",fa:["float"],ea:!1},{$:"node_in",ba:"Cl",fa:["float"],ea:!1},{$:"node_out",ba:"Cm",fa:["float"],ea:!1}],
ja:[{$:"txt",aa:"Cm = ( Ck <= _1_0 && Ck >= - _1_0 ) ? asin ( Ck ) : _0_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Cm = clamp ( Cm , _0_0 , _1_0 ) ;".split(" ")}]}]},{$:"txt",aa:["Cl",";"]}]},{$:"node",ba:"MATH_ARCCOSINE",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Cn",fa:["float"],ea:!1},{$:"node_in",ba:"Co",fa:["float"],ea:!1},{$:"node_out",ba:"Cp",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Cp = ( Cn <= _1_0 && Cn >= - _1_0 ) ? acos ( Cn ) : _0_0 ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Cp = clamp ( Cp , _0_0 , _1_0 ) ;".split(" ")}]}]},{$:"txt",aa:["Co",";"]}]},{$:"node",ba:"MATH_ARCTANGENT",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Cq",fa:["float"],ea:!1},{$:"node_in",ba:"Cr",fa:["float"],ea:!1},{$:"node_out",ba:"Cs",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Cs = atan ( Cq ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Cs = clamp ( Cs , _0_0 , _1_0 ) ;".split(" ")}]}]},
{$:"txt",aa:["Cr",";"]}]},{$:"node",ba:"MATH_POWER",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Ct",fa:["float"],ea:!1},{$:"node_in",ba:"Cu",fa:["float"],ea:!1},{$:"node_out",ba:"Cv",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"if ( Ct < _0_0 && Cu != floor ( Cu ) ) Cv = _0_0 ; else if ( Cu == _0_0 ) Cv = _1_0 ; else if ( Ct < _0_0 ) Cv = mix ( _1_0 , - _1_0 , sign ( mod ( - Cu , 2.0 ) ) ) * pow ( - Ct , Cu ) ; else if ( Ct == _0_0 ) Cv = _0_0 ; else Cv = pow ( Ct , Cu ) ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Cv = clamp ( Cv , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_LOGARITHM",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Cw",fa:["float"],ea:!1},{$:"node_in",ba:"Cx",fa:["float"],ea:!1},{$:"node_out",ba:"Cy",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Cy = ( Cw > _0_0 && Cx > _0_0 ) ? log2 ( Cw ) / log2 ( Cx ) : _0_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Cy = clamp ( Cy , _0_0 , _1_0 ) ;".split(" ")}]}]}]},
{$:"node",ba:"MATH_MINIMUM",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Cz",fa:["float"],ea:!1},{$:"node_in",ba:"CA",fa:["float"],ea:!1},{$:"node_out",ba:"CB",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"CB = min ( Cz , CA ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"CB = clamp ( CB , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_MAXIMUM",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"CC",fa:["float"],ea:!1},
{$:"node_in",ba:"CD",fa:["float"],ea:!1},{$:"node_out",ba:"CE",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"CE = max ( CC , CD ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"CE = clamp ( CE , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_ROUND",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"CF",fa:["float"],ea:!1},{$:"node_in",ba:"CG",fa:["float"],ea:!1},{$:"node_out",ba:"CH",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"CH = floor ( CF + _0_5 ) ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"CH = clamp ( CH , _0_0 , _1_0 ) ;".split(" ")}]}]},{$:"txt",aa:["CG",";"]}]},{$:"node",ba:"MATH_LESS_THAN",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"CI",fa:["float"],ea:!1},{$:"node_in",ba:"CJ",fa:["float"],ea:!1},{$:"node_out",ba:"CK",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"CK = ( CI < CJ ) ? _1_0 : _0_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"CK = clamp ( CK , _0_0 , _1_0 ) ;".split(" ")}]}]}]},
{$:"node",ba:"MATH_GREATER_THAN",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"CL",fa:["float"],ea:!1},{$:"node_in",ba:"CM",fa:["float"],ea:!1},{$:"node_out",ba:"CN",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"CN = ( CL > CM ) ? _1_0 : _0_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"CN = clamp ( CN , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_MODULO",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"CO",fa:["float"],
ea:!1},{$:"node_in",ba:"CP",fa:["float"],ea:!1},{$:"node_out",ba:"CQ",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"CQ = abs ( CP ) > 0.000001 ? mod ( CO , CP ) : _0_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"CQ = clamp ( CQ , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_ABSOLUTE",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"CR",fa:["float"],ea:!1},{$:"node_in",ba:"CS",fa:["float"],ea:!1},{$:"node_out",ba:"CT",fa:["float"],ea:!1}],
ja:[{$:"txt",aa:"CT = abs ( CR ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"CT = clamp ( CT , _0_0 , _1_0 ) ;".split(" ")}]}]},{$:"txt",aa:["CS",";"]}]},{$:"node",ba:"MIX_RGB_MIX",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"CU",fa:["float"],ea:!1},{$:"node_in",ba:"CV",fa:["vec3"],ea:!1},{$:"node_in",ba:"CW",fa:["vec3"],ea:!1},{$:"node_out",ba:"CX",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( CU , _0_0 , _1_0 ) ; CX = mix ( CV , CW , AJ ) ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"CX = clamp ( CX , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_ADD",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"CY",fa:["float"],ea:!1},{$:"node_in",ba:"CZ",fa:["vec3"],ea:!1},{$:"node_in",ba:"C_",fa:["vec3"],ea:!1},{$:"node_out",ba:"Da",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( CY , _0_0 , _1_0 ) ; Da = mix ( CZ , CZ + C_ , AJ ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",
ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Da = clamp ( Da , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_MULTIPLY",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Db",fa:["float"],ea:!1},{$:"node_in",ba:"Dc",fa:["vec3"],ea:!1},{$:"node_in",ba:"Dd",fa:["vec3"],ea:!1},{$:"node_out",ba:"De",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( Db , _0_0 , _1_0 ) ; De = mix ( Dc , Dc * Dd , AJ ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],
ja:[{$:"txt",aa:"De = clamp ( De , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_SUBTRACT",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Df",fa:["float"],ea:!1},{$:"node_in",ba:"Dg",fa:["vec3"],ea:!1},{$:"node_in",ba:"Dh",fa:["vec3"],ea:!1},{$:"node_out",ba:"Di",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( Df , _0_0 , _1_0 ) ; Di = mix ( Dg , Dg - Dh , AJ ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Di = clamp ( Di , _0_0 , _1_0 ) ;".split(" ")}]}]}]},
{$:"node",ba:"MIX_RGB_SCREEN",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Dj",fa:["float"],ea:!1},{$:"node_in",ba:"Dk",fa:["vec3"],ea:!1},{$:"node_in",ba:"Dl",fa:["vec3"],ea:!1},{$:"node_out",ba:"Dm",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( Dj , _0_0 , _1_0 ) ; float Dn = _1_0 - AJ ; Dm = vec3 ( _1_0 ) - ( vec3 ( Dn ) + AJ * ( vec3 ( _1_0 ) - Dl ) ) * ( vec3 ( _1_0 ) - Dk ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",
aa:"Dm = clamp ( Dm , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_DIVIDE",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Do",fa:["float"],ea:!1},{$:"node_in",ba:"Dp",fa:["vec3"],ea:!1},{$:"node_in",ba:"Dq",fa:["vec3"],ea:!1},{$:"node_out",ba:"Dr",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( Do , _0_0 , _1_0 ) ; float Dn = _1_0 - AJ ; Dq += step ( Dq , vec3 ( _0_0 ) ) ; Dr = Dn * Dp + AJ * Dp / Dq ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],
ja:[{$:"txt",aa:"Dr = clamp ( Dr , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_DIFFERENCE",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Ds",fa:["float"],ea:!1},{$:"node_in",ba:"Dt",fa:["vec3"],ea:!1},{$:"node_in",ba:"Du",fa:["vec3"],ea:!1},{$:"node_out",ba:"Dv",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( Ds , _0_0 , _1_0 ) ; Dv = mix ( Dt , abs ( Dt - Du ) , AJ ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",
aa:"Dv = clamp ( Dv , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_DARKEN",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Dw",fa:["float"],ea:!1},{$:"node_in",ba:"Dx",fa:["vec3"],ea:!1},{$:"node_in",ba:"Dy",fa:["vec3"],ea:!1},{$:"node_out",ba:"Dz",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( Dw , _0_0 , _1_0 ) ; Dz = min ( Dx . rgb , Dy . rgb * AJ ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Dz = clamp ( Dz , _0_0 , _1_0 ) ;".split(" ")}]}]}]},
{$:"node",ba:"MIX_RGB_LIGHTEN",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"DA",fa:["float"],ea:!1},{$:"node_in",ba:"DB",fa:["vec3"],ea:!1},{$:"node_in",ba:"DC",fa:["vec3"],ea:!1},{$:"node_out",ba:"DD",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( DA , _0_0 , _1_0 ) ; DD = max ( DB . rgb , DC . rgb * AJ ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"DD = clamp ( DD , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_OVERLAY",
ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"DE",fa:["float"],ea:!1},{$:"node_in",ba:"DF",fa:["vec3"],ea:!1},{$:"node_in",ba:"DG",fa:["vec3"],ea:!1},{$:"node_out",ba:"DH",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( DE , _0_0 , _1_0 ) ; vec3 DI = vec3 ( _1_0 - AJ ) ; DH = mix ( DF * ( DI + 2.0 * AJ * DG ) , vec3 ( _1_0 ) - ( DI + 2.0 * AJ * ( vec3 ( _1_0 ) - DG ) ) * ( vec3 ( _1_0 ) - DF ) , step ( _0_5 , DF ) ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",
ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"DH = clamp ( DH , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_DODGE",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"DJ",fa:["float"],ea:!1},{$:"node_in",ba:"DK",fa:["vec3"],ea:!1},{$:"node_in",ba:"DL",fa:["vec3"],ea:!1},{$:"node_out",ba:"DM",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( DJ , _0_0 , _1_0 ) ; vec3 DN = vec3 ( _1_0 ) - AJ * DL ; vec3 DO = clamp ( DK / DN , _0_0 , _1_0 ) ; DM = mix ( mix ( DO , vec3 ( _1_0 ) , step ( DN , vec3 ( _0_0 ) ) ) , DK , step ( DK , vec3 ( _0_0 ) ) ) ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"DM = clamp ( DM , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_BURN",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"DP",fa:["float"],ea:!1},{$:"node_in",ba:"DQ",fa:["vec3"],ea:!1},{$:"node_in",ba:"DR",fa:["vec3"],ea:!1},{$:"node_out",ba:"DS",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( DP , _0_0 , _1_0 ) ; vec3 ks = vec3 ( _1_0 - AJ ) ; vec3 DN = ks + AJ * DR ; vec3 DO = clamp ( vec3 ( _1_0 ) - ( vec3 ( _1_0 ) - DQ ) / DN , _0_0 , _1_0 ) ; DS = mix ( DO , vec3 ( _0_0 ) , step ( DN , vec3 ( _0_0 ) ) ) ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"DS = clamp ( DS , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_HUE",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"DT",fa:["float"],ea:!1},{$:"node_in",ba:"DU",fa:["vec3"],ea:!1},{$:"node_in",ba:"DV",fa:["vec3"],ea:!1},{$:"node_out",ba:"DW",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( DT , _0_0 , _1_0 ) ; vec3 kk , DX , DN ; DW = DU ; DX = kj ( DV ) ; if ( DX . y != _0_0 ) { kk = kj ( DW ) ; kk . x = DX . x ; DN = kl ( kk ) ; DW = mix ( DW , DN , AJ ) ; }".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"DW = clamp ( DW , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_SATURATION",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"DY",fa:["float"],ea:!1},{$:"node_in",ba:"DZ",fa:["vec3"],ea:!1},{$:"node_in",ba:"D_",fa:["vec3"],ea:!1},{$:"node_out",ba:"Ea",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( DY , _0_0 , _1_0 ) ; float Dn = _1_0 - AJ ; Ea = DZ ; vec3 kk , DX ; kk = kj ( Ea ) ; if ( kk . y != _0_0 ) { DX = kj ( D_ ) ; kk . y = Dn * kk . y + AJ * DX . y ; Ea = kl ( kk ) ; }".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Ea = clamp ( Ea , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_VALUE",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Eb",fa:["float"],ea:!1},{$:"node_in",ba:"Ec",fa:["vec3"],ea:!1},{$:"node_in",ba:"Ed",fa:["vec3"],ea:!1},{$:"node_out",ba:"Ee",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( Eb , _0_0 , _1_0 ) ; float Dn = _1_0 - AJ ; vec3 kk , DX ; kk = kj ( Ec ) ; DX = kj ( Ed ) ; kk . z = Dn * kk . z + AJ * DX . z ; Ee = kl ( kk ) ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Ee = clamp ( Ee , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_COLOR",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Ef",fa:["float"],ea:!1},{$:"node_in",ba:"Eg",fa:["vec3"],ea:!1},{$:"node_in",ba:"Eh",fa:["vec3"],ea:!1},{$:"node_out",ba:"Ei",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( Ef , _0_0 , _1_0 ) ; vec3 kk , DX , DN ; Ei = Eg ; DX = kj ( Eh ) ; if ( DX . y != _0_0 ) { kk = kj ( Ei ) ; kk . x = DX . x ; kk . y = DX . y ; DN = kl ( kk ) ; Ei = mix ( Ei , DN , AJ ) ; }".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Ei = clamp ( Ei , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_SOFT_LIGHT",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Ej",fa:["float"],ea:!1},{$:"node_in",ba:"Ek",fa:["vec3"],ea:!1},{$:"node_in",ba:"El",fa:["vec3"],ea:!1},{$:"node_out",ba:"Em",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( Ej , _0_0 , _1_0 ) ; float Dn = _1_0 - AJ ; vec3 En = El + Ek - El * Ek ; Em = Ek * ( vec3 ( Dn ) + vec3 ( AJ ) * ( ( vec3 ( _1_0 ) - Ek ) * El + En ) ) ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Em = clamp ( Em , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_LINEAR_LIGHT",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Eo",fa:["float"],ea:!1},{$:"node_in",ba:"Ep",fa:["vec3"],ea:!1},{$:"node_in",ba:"Eq",fa:["vec3"],ea:!1},{$:"node_out",ba:"Er",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( Eo , _0_0 , _1_0 ) ; Er = Ep + AJ * ( 2.0 * Eq - vec3 ( _1_0 ) ) ;".split(" ")},{$:"node_cond",
da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Er = clamp ( Er , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_WORLD_RGB",ma:[],la:[{$:"node_in",ba:"Es",fa:["float"],ea:!1},{$:"node_in",ba:"Et",fa:["vec3"],ea:!1},{$:"node_in",ba:"Eu",fa:["vec3"],ea:!1},{$:"node_out",ba:"Ev",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( Es , _0_0 , _1_0 ) ; Ev = mix ( Et , Eu , AJ ) ;".split(" ")}]},{$:"node",ba:"ADD_WORLD_RGB",ma:[],la:[{$:"node_in",ba:"Ew",fa:["float"],ea:!1},{$:"node_in",
ba:"Ex",fa:["vec3"],ea:!1},{$:"node_in",ba:"Ey",fa:["vec3"],ea:!1},{$:"node_out",ba:"Ez",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( Ew , _0_0 , _1_0 ) ; Ez = mix ( Ex , Ex + Ey , AJ ) ;".split(" ")}]},{$:"node",ba:"OUTPUT",ma:[],la:[{$:"node_in",ba:"EA",fa:["vec3"],ea:!1},{$:"node_in",ba:"EB",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"E = EA ; I = EB ;".split(" ")}]},{$:"node",ba:"OUTPUT_SURFACE",ma:[],la:[{$:"node_in",ba:"EC",fa:["vec3"],ea:!1},{$:"node_in",ba:"ED",fa:["float"],ea:!1}],ja:[{$:"txt",
aa:"E = EC ; I = ED ;".split(" ")}]},{$:"node",ba:"OUTPUT_WORLD_SURFACE",ma:[],la:[{$:"node_in",ba:"EE",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"E = EE ; I = _1_0 ;".split(" ")}]},{$:"node",ba:"MATERIAL_BEGIN",ma:[{$:"node_var",ba:"MATERIAL_EXT",aa:["0"]},{$:"node_var",ba:"USE_MATERIAL_NORMAL",aa:["0"]},{$:"node_var",ba:"USE_MATERIAL_DIFFUSE",aa:["0"]},{$:"node_var",ba:"SHADELESS_MAT",aa:["0"]}],la:[{$:"node_in",ba:"EF",fa:["vec3"],ea:!1},{$:"node_in",ba:"EG",fa:["vec3"],ea:!1},{$:"node_in",ba:"EH",fa:["float"],
ea:!1},{$:"node_in",ba:"EI",fa:["vec3"],ea:!0},{$:"node_in",ba:"EJ",fa:["float"],ea:!0},{$:"node_out",ba:"EK",fa:["vec3"],ea:!1},{$:"node_out",ba:"EL",fa:["vec3"],ea:!1},{$:"node_out",ba:"EM",fa:["vec3"],ea:!1},{$:"node_out",ba:"EN",fa:["vec3"],ea:!1},{$:"node_out",ba:"EO",fa:["vec3"],ea:!1},{$:"node_out",ba:"EP",fa:["vec2"],ea:!1},{$:"node_out",ba:"EQ",fa:["vec2"],ea:!1},{$:"node_out",ba:"ER",fa:["vec4"],ea:!1},{$:"node_param",ba:"sF",fa:["const","vec2"],ea:!1},{$:"node_param",ba:"sG",fa:["const",
"vec3"],ea:!1}],ja:[{$:"txt",aa:"EM = EF ; EN = sG [ 0 ] * EG ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_MATERIAL_NORMAL"],ja:[{$:"txt",aa:"EO = normalize ( EI ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:["EO","=","ox",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["SHADELESS_MAT",{$:"logic_negative_expr",ia:1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["MATERIAL_EXT"],ja:[{$:"txt",aa:"EK = EJ * EM ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"EK = sS * EM ;".split(" ")}]}]},{$:"node_cond",
da:[{$:"node_if",ga:["USE_MATERIAL_DIFFUSE"],ja:[{$:"txt",aa:["EM","*=","EH",";"]}]}]},{$:"txt",aa:"EL = sT * u_environment_energy * cE ( EO ) ; ER = cH ( EM ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["NUM_LIGHTS",0,{$:"g_expr",ia:2}],ja:[{$:"txt",aa:"EP = vec2 ( sF [ 0 ] , sF [ 1 ] ) ; EQ = vec2 ( sG [ 1 ] , sG [ 2 ] ) ;".split(" ")}]}]},{$:"txt",aa:["H","=","ER",";"]}]},{$:"node_else",ja:[{$:"txt",aa:"EK = vec3 ( _0_0 ) ; EL = vec3 ( _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATERIAL_END",
ma:[{$:"node_var",ba:"MATERIAL_EXT",aa:["0"]},{$:"node_var",ba:"USE_MATERIAL_DIFFUSE",aa:["0"]},{$:"node_var",ba:"USE_MATERIAL_SPECULAR",aa:["0"]}],la:[{$:"node_in",ba:"ES",fa:["vec4"],ea:!1},{$:"node_in",ba:"ET",fa:["vec3"],ea:!1},{$:"node_in",ba:"EU",fa:["vec3"],ea:!1},{$:"node_in",ba:"EV",fa:["float"],ea:!0},{$:"node_in",ba:"EW",fa:["float"],ea:!0},{$:"node_in",ba:"EX",fa:["float"],ea:!0},{$:"node_out",ba:"EY",fa:["vec3"],ea:!0},{$:"node_out",ba:"EZ",fa:["float"],ea:!0},{$:"node_out",ba:"E_",fa:["vec3"],
ea:!0},{$:"node_out",ba:"Fa",fa:["vec3"],ea:!0},{$:"node_out",ba:"Fb",fa:["vec3"],ea:!0},{$:"node_param",ba:"sH",fa:["float"],ea:!1},{$:"node_param",ba:"sI",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_EY"],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_MATERIAL_DIFFUSE"],ja:[{$:"txt",aa:"EY = ES . rgb ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"EY = vec3 ( _0_0 ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["MATERIAL_EXT","REFLECTION_TYPE","REFL_NONE",{$:"non_equal_expr",
ia:2},{$:"logical_and_expr",ia:2}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"cQ ( EY , oy , EU , EV , u_view_tsr_frag ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"cQ ( EY , oy , EU , EV , mat3 ( _0_0 ) ) ;".split(" ")}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_MATERIAL_SPECULAR"],ja:[{$:"txt",aa:["EY","+=","ET",";"]}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_E_"],ja:[{$:"txt",aa:["E_","=","EU",";"]}]}]},{$:"node_cond",
da:[{$:"node_if",ga:["MATERIAL_EXT"],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fa"],ja:[{$:"txt",aa:"Fa = ES . rgb ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fb"],ja:[{$:"txt",aa:["Fb","=","ET",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_EZ"],ja:[{$:"txt",aa:"EZ = clamp ( EX , _0_0 , _1_0 ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_MATERIAL_SPECULAR"],ja:[{$:"txt",aa:"float t = max ( max ( ET . r , ET . g ) , ET . b ) * EW ; EZ = clamp ( EX * ( _1_0 - t ) + t , _0_0 , _1_0 ) ;".split(" ")}]}]}]}]}]},
{$:"node_else",ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_EZ"],ja:[{$:"txt",aa:"EZ = clamp ( sH , _0_0 , _1_0 ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_MATERIAL_SPECULAR"],ja:[{$:"txt",aa:"float t = max ( max ( ET . r , ET . g ) , ET . b ) * sI ; EZ = sH * ( _1_0 - t ) + t ;".split(" ")}]}]}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_MATERIAL_SPECULAR"],ja:[{$:"txt",aa:["F","=","ET",";"]}]},{$:"node_else",ja:[{$:"txt",aa:"F = vec3 ( _0_0 ) ;".split(" ")}]}]},{$:"txt",aa:["G",
"=","EU",";"]}]},{$:"node",ba:"LIGHTING_AMBIENT",ma:[],la:[{$:"node_in",ba:"oP",fa:["vec3"],ea:!1},{$:"node_in",ba:"oQ",fa:["vec3"],ea:!1},{$:"node_in",ba:"oR",fa:["vec3"],ea:!1},{$:"node_out",ba:"oS",fa:["vec4"],ea:!1},{$:"node_out",ba:"oT",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"oS = vec4 ( oP + oR * oQ , _0_0 ) ; oT = vec3 ( _0_0 ) ;".split(" ")}]},{$:"node",ba:"LIGHTING_LAMP",ma:[{$:"node_var",ba:"LAMP_TYPE",aa:["HEMI"]},{$:"node_var",ba:"LAMP_IND",aa:["0"]},{$:"node_var",ba:"LAMP_SPOT_SIZE",aa:["0.8"]},
{$:"node_var",ba:"LAMP_SPOT_BLEND",aa:["0.03"]},{$:"node_var",ba:"LAMP_LIGHT_DIST",aa:["30.0"]},{$:"node_var",ba:"LAMP_SHADOW_MAP_IND",aa:["-","1"]},{$:"node_var",ba:"LAMP_USE_SPHERE",aa:["0"]}],la:[{$:"node_in",ba:"oU",fa:["vec4"],ea:!1},{$:"node_out",ba:"oV",fa:["vec3"],ea:!1},{$:"node_out",ba:"oW",fa:["vec2"],ea:!1},{$:"node_out",ba:"oX",fa:["vec3"],ea:!1},{$:"node_out",ba:"oY",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"oW = vec2 ( u_light_positions [ LAMP_IND ] . w , u_light_color_intensities [ LAMP_IND ] . w ) ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["LAMP_TYPE","HEMI",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:["oY","=","_0_5",";"]}]},{$:"node_else",ja:[{$:"txt",aa:["oY","=","_0_0",";"]}]}]},{$:"txt",aa:"oX = u_light_color_intensities [ LAMP_IND ] . xyz ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_SHADOW_MAP_IND",1,{$:"negative_expr",ia:1},{$:"non_equal_expr",ia:2}],ja:[{$:"txt",aa:"oX *= oU [ LAMP_SHADOW_MAP_IND ] ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_TYPE","SPOT",{$:"equal_expr",
ia:2},"LAMP_TYPE","POINT",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ja:[{$:"txt",aa:"vec3 oZ = u_light_positions [ LAMP_IND ] . xyz ; oV = oZ - ow ; float aM = length ( oV ) ; oX *= LAMP_LIGHT_DIST / ( LAMP_LIGHT_DIST + aM * aM ) ; oV = normalize ( oV ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_TYPE","SPOT",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"vec3 pa = u_light_directions [ LAMP_IND ] ; float pb = dot ( oV , pa ) ; pb *= smoothstep ( _0_0 , _1_0 , ( pb - LAMP_SPOT_SIZE ) / LAMP_SPOT_BLEND ) ; oX *= pb ;".split(" ")}]}]},
{$:"node_cond",da:[{$:"node_if",ga:["LAMP_USE_SPHERE"],ja:[{$:"txt",aa:"oX *= max ( LAMP_LIGHT_DIST - aM , _0_0 ) / LAMP_LIGHT_DIST ;".split(" ")}]}]}]},{$:"node_else",ja:[{$:"txt",aa:"oV = u_light_directions [ LAMP_IND ] ;".split(" ")}]}]}]},{$:"node",ba:"DIFFUSE_FRESNEL",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pc",fa:["vec3"],ea:!1},{$:"node_in",ba:"pd",fa:["vec2"],ea:!1},{$:"node_in",ba:"pe",fa:["vec3"],ea:!1},{$:"node_in",ba:"pf",fa:["float"],ea:!1},{$:"node_in",
ba:"pg",fa:["vec2"],ea:!1},{$:"node_out",ba:"ph",fa:["float"],ea:!1}],ja:[{$:"txt",aa:["vec3","rz","=","pe",";"]},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pi = cross ( pc , B . xyz ) ; rz = cross ( pi , B . xyz ) ; rz = - normalize ( rz ) ;".split(" ")}]}]},{$:"txt",aa:"ph = _0_0 ; if ( pd . r != _0_0 ) { float pj = ( _1_0 - pf ) * dot ( rz , pc ) + pf ; if ( pg [ 0 ] == _0_0 ) { ph = _1_0 ; } else { float t = _1_0 + abs ( pj ) ; t = pg [ 1 ] + ( _1_0 - pg [ 1 ] ) * pow ( t , pg [ 0 ] ) ; ph = clamp ( t , _0_0 , _1_0 ) ; } ph = max ( ph , _0_0 ) ; }".split(" ")}]},
{$:"node",ba:"DIFFUSE_LAMBERT",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pk",fa:["vec3"],ea:!1},{$:"node_in",ba:"pl",fa:["vec2"],ea:!1},{$:"node_in",ba:"pm",fa:["vec3"],ea:!1},{$:"node_in",ba:"pn",fa:["float"],ea:!1},{$:"node_out",ba:"po",fa:["float"],ea:!1}],ja:[{$:"txt",aa:["vec3","rz","=","pm",";"]},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pi = cross ( pk , B . xyz ) ; rz = cross ( pi , B . xyz ) ; rz = - normalize ( rz ) ;".split(" ")}]}]},
{$:"txt",aa:"po = _0_0 ; if ( pl . r != _0_0 ) { float pj = ( _1_0 - pn ) * dot ( rz , pk ) + pn ; po = max ( pj , _0_0 ) ; }".split(" ")}]},{$:"node",ba:"DIFFUSE_OREN_NAYAR",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pr",fa:["vec3"],ea:!1},{$:"node_in",ba:"pu",fa:["vec2"],ea:!1},{$:"node_in",ba:"pv",fa:["vec3"],ea:!1},{$:"node_in",ba:"pw",fa:["float"],ea:!1},{$:"node_in",ba:"px",fa:["vec2"],ea:!1},{$:"node_out",ba:"py",fa:["float"],ea:!1}],ja:[{$:"txt",aa:["vec3",
"rz","=","pv",";"]},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pi = cross ( pr , B . xyz ) ; rz = cross ( pi , B . xyz ) ; rz = - normalize ( rz ) ;".split(" ")}]}]},{$:"txt",aa:"py = _0_0 ; if ( pu . r != _0_0 ) { float pj = ( _1_0 - pw ) * dot ( rz , pr ) + pw ; if ( px [ 0 ] > _0_0 ) { float pz = max ( dot ( rz , oy ) , _0_0 ) ; float pA = px [ 0 ] * px [ 0 ] ; float cG = _1_0 - _0_5 * ( pA / ( pA + 0.33 ) ) ; vec3 pB = pr - pj * rz ; vec3 pC = oy - pz * rz ; if ( length ( pB ) == _0_0 || length ( pC ) == _0_0 || abs ( pj ) > _1_0 || abs ( pz ) > _1_0 ) py = pj * cG ; else { float pD = acos ( pj ) ; float pE = acos ( pz ) ; vec3 pF = normalize ( pB ) ; vec3 pG = normalize ( pC ) ; float a , b ; a = max ( pD , pE ) ; b = min ( pD , pE ) ; b *= 0.95 ; float t = max ( dot ( pF , pG ) , _0_0 ) ; float hS = 0.45 * ( pA / ( pA + 0.09 ) ) ; py = pj * ( cG + ( hS * t * sin ( a ) * tan ( b ) ) ) ; } } else py = pj ; py = max ( py , _0_0 ) ; }".split(" ")}]},
{$:"node",ba:"DIFFUSE_MINNAERT",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pH",fa:["vec3"],ea:!1},{$:"node_in",ba:"pI",fa:["vec2"],ea:!1},{$:"node_in",ba:"pJ",fa:["vec3"],ea:!1},{$:"node_in",ba:"pK",fa:["float"],ea:!1},{$:"node_in",ba:"pL",fa:["vec2"],ea:!1},{$:"node_out",ba:"pM",fa:["float"],ea:!1}],ja:[{$:"txt",aa:["vec3","rz","=","pJ",";"]},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pi = cross ( pH , B . xyz ) ; rz = cross ( pi , B . xyz ) ; rz = - normalize ( rz ) ;".split(" ")}]}]},
{$:"txt",aa:"pM = _0_0 ; if ( pI . r != _0_0 ) { float pj = ( _1_0 - pK ) * dot ( rz , pH ) + pK ; float pz = max ( dot ( rz , oy ) , _0_0 ) ; if ( pL [ 0 ] <= _1_0 ) pM = pj * pow ( max ( pz * pj , 0.1 ) , pL [ 0 ] - _1_0 ) ; else pM = pj * pow ( 1.0001 - pz , pL [ 0 ] - _1_0 ) ; pM = max ( pM , _0_0 ) ; }".split(" ")}]},{$:"node",ba:"DIFFUSE_TOON",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pN",fa:["vec3"],ea:!1},{$:"node_in",ba:"pO",fa:["vec2"],ea:!1},{$:"node_in",
ba:"pP",fa:["vec3"],ea:!1},{$:"node_in",ba:"pQ",fa:["float"],ea:!1},{$:"node_in",ba:"pR",fa:["vec2"],ea:!1},{$:"node_out",ba:"pS",fa:["float"],ea:!1}],ja:[{$:"txt",aa:["vec3","rz","=","pP",";"]},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pi = cross ( pN , B . xyz ) ; rz = cross ( pi , B . xyz ) ; rz = - normalize ( rz ) ;".split(" ")}]}]},{$:"txt",aa:"pS = _0_0 ; if ( pO . r != _0_0 ) { float pj = ( _1_0 - pQ ) * dot ( rz , pN ) + pQ ; float pT = acos ( pj ) ; if ( pT < pR [ 0 ] ) pS = _1_0 ; else if ( pT > ( pR [ 0 ] + pR [ 1 ] ) || pR [ 1 ] == _0_0 ) pS = _0_0 ; else pS = _1_0 - ( ( pT - pR [ 0 ] ) / pR [ 1 ] ) ; pS = max ( pS , _0_0 ) ; }".split(" ")}]},
{$:"node",ba:"SPECULAR_PHONG",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pU",fa:["vec3"],ea:!1},{$:"node_in",ba:"pV",fa:["vec2"],ea:!1},{$:"node_in",ba:"pW",fa:["vec3"],ea:!1},{$:"node_in",ba:"pX",fa:["float"],ea:!1},{$:"node_in",ba:"pY",fa:["vec2"],ea:!1},{$:"node_out",ba:"pZ",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"pZ = _0_0 ; if ( pV . g == _1_0 ) { vec3 p_ = normalize ( pU + oy ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",
aa:"if ( pX == _0_0 ) { pZ = dot ( B . xyz , p_ ) ; pZ = sqrt ( _1_0 - pZ * pZ ) ; }".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"pZ = ( _1_0 - pX ) * max ( dot ( pW , p_ ) , _0_0 ) + pX ;".split(" ")}]}]},{$:"txt",aa:"pZ = pow ( pZ , pY [ 0 ] ) ; }".split(" ")}]},{$:"node",ba:"SPECULAR_COOKTORR",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"qa",fa:["vec3"],ea:!1},{$:"node_in",ba:"qb",fa:["vec2"],ea:!1},{$:"node_in",ba:"qc",fa:["vec3"],ea:!1},{$:"node_in",ba:"qd",fa:["float"],
ea:!1},{$:"node_in",ba:"qe",fa:["vec2"],ea:!1},{$:"node_out",ba:"qf",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"qf = _0_0 ; if ( qb . g != _0_0 ) { vec3 p_ = normalize ( qa + oy ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"if ( qd == _0_0 ) { qf = dot ( B . xyz , p_ ) ; qf = sqrt ( _1_0 - qf * qf ) ; }".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"qf = max ( dot ( qc , p_ ) , _0_0 ) ; qf = ( _1_0 - qd ) * qf + qd ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",
ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"float pz = max ( dot ( B . xyz , oy ) , _0_0 ) ; pz = sqrt ( _1_0 - pz * pz ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"float pz = max ( dot ( qc , oy ) , _0_0 ) ;".split(" ")}]}]},{$:"txt",aa:"qf = pow ( qf , qe [ 0 ] ) ; qf = qf / ( 0.1 + pz ) ; }".split(" ")}]},{$:"node",ba:"SPECULAR_WARDISO",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"qg",fa:["vec3"],ea:!1},{$:"node_in",ba:"qh",fa:["vec2"],ea:!1},{$:"node_in",ba:"qi",
fa:["vec3"],ea:!1},{$:"node_in",ba:"qj",fa:["float"],ea:!1},{$:"node_in",ba:"qk",fa:["vec2"],ea:!1},{$:"node_out",ba:"ql",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"ql = _0_0 ; if ( qh . g == _1_0 ) { vec3 p_ = normalize ( qg + oy ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"float qm = _0_0 ; float pz = _0_0 ; float qn = _0_0 ; if ( qj == _0_0 ) { qm = dot ( B . xyz , p_ ) ; pz = dot ( B . xyz , oy ) ; qn = dot ( B . xyz , qg ) ; qm = sqrt ( _1_0 - qm * qm ) ; pz = sqrt ( _1_0 - pz * pz ) ; qn = sqrt ( _1_0 - qn * qn ) ; }".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"float qm = max ( dot ( qi , p_ ) , 0.01 ) ; float pz = max ( dot ( qi , oy ) , 0.01 ) ; float qn = max ( dot ( qi , qg ) , 0.01 ) ;".split(" ")}]}]},{$:"txt",aa:"float bP = tan ( acos ( qm ) ) ; float L = max ( qk [ 0 ] , 0.01 ) ; ql = qn * ( _1_0 / ( 4.0 * M_PI * L * L ) ) * ( exp ( - ( bP * bP ) / ( L * L ) ) / ( sqrt ( pz * qn ) ) ) ; }".split(" ")}]},{$:"node",ba:"SPECULAR_TOON",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"qo",fa:["vec3"],
ea:!1},{$:"node_in",ba:"qr",fa:["vec2"],ea:!1},{$:"node_in",ba:"qu",fa:["vec3"],ea:!1},{$:"node_in",ba:"qv",fa:["float"],ea:!1},{$:"node_in",ba:"qw",fa:["vec2"],ea:!1},{$:"node_out",ba:"qx",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"qx = _0_0 ; if ( qr . g == _1_0 ) { vec3 co = normalize ( qo + oy ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"float qy = dot ( co , B . xyz ) ; float bP = qw [ 0 ] + qw [ 1 ] ; if ( qv == _0_0 ) bP = acos ( sqrt ( _1_0 - qy * qy ) ) ;".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"float bP = acos ( dot ( co , qu ) ) ;".split(" ")}]}]},{$:"txt",aa:"if ( bP < qw [ 0 ] ) qx = _1_0 ; else if ( bP >= qw [ 0 ] + qw [ 1 ] || qw [ 1 ] == _0_0 ) qx = _0_0 ; else qx = _1_0 - ( bP - qw [ 0 ] ) / qw [ 1 ] ; }".split(" ")}]},{$:"node",ba:"SPECULAR_BLINN",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"qz",fa:["vec3"],ea:!1},{$:"node_in",ba:"qA",fa:["vec2"],ea:!1},{$:"node_in",ba:"qB",fa:["vec3"],ea:!1},{$:"node_in",ba:"qC",fa:["float"],
ea:!1},{$:"node_in",ba:"qD",fa:["vec2"],ea:!1},{$:"node_out",ba:"qE",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"float qF = qD [ 0 ] ; float qG = qD [ 1 ] ; qE = _0_0 ; if ( qA . g == _1_0 ) { if ( qF < _1_0 || qG == _0_0 ) qE = _0_0 ; else { if ( qG < 100.0 ) qG = sqrt ( _1_0 / qG ) ; else qG = 10.0 / qG ; vec3 p_ = normalize ( oy + qz ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"float qm = _0_0 ; if ( qC == _0_0 ) { float qH = dot ( B . xyz , p_ ) ; qm = sqrt ( _1_0 - qH * qH ) ; }".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"float qm = ( _1_0 - qC ) * max ( dot ( qB , p_ ) , _0_0 ) + qC ;".split(" ")}]}]},{$:"txt",aa:"if ( qm < _0_0 ) qE = _0_0 ; else { float pz = max ( dot ( qB , oy ) , 0.01 ) ; float qn = dot ( qB , qz ) ; if ( qn <= 0.01 ) qE = _0_0 ; else { float qI = max ( dot ( oy , p_ ) , 0.01 ) ; float a = _1_0 ; float b = ( 2.0 * qm * pz ) / qI ; float dx = ( 2.0 * qm * qn ) / qI ; float g = min ( min ( a , b ) , dx ) ; float p = sqrt ( pow ( qF , 2.0 ) + pow ( qI , 2.0 ) - _1_0 ) ; float mm = pow ( p - qI , 2.0 ) / pow ( p + qI , 2.0 ) * ( _1_0 + pow ( qI * ( p + qI ) - _1_0 , 2.0 ) / pow ( qI * ( p - qI ) + _1_0 , 2.0 ) ) ; float pT = acos ( qm ) ; qE = max ( mm * g * exp ( - pow ( pT , 2.0 ) / ( 2.0 * pow ( qG , 2.0 ) ) ) , _0_0 ) ; } } } }".split(" ")}]},
{$:"node",ba:"LIGHTING_APPLY",ma:[],la:[{$:"node_in",ba:"qJ",fa:["vec4"],ea:!1},{$:"node_in",ba:"qK",fa:["vec3"],ea:!1},{$:"node_in",ba:"qL",fa:["float"],ea:!1},{$:"node_in",ba:"qM",fa:["float"],ea:!1},{$:"node_in",ba:"qN",fa:["vec3"],ea:!1},{$:"node_in",ba:"qO",fa:["vec3"],ea:!1},{$:"node_in",ba:"qP",fa:["vec4"],ea:!1},{$:"node_in",ba:"qQ",fa:["vec3"],ea:!1},{$:"node_in",ba:"qR",fa:["vec3"],ea:!1},{$:"node_in",ba:"qS",fa:["vec3"],ea:!1},{$:"node_in",ba:"qT",fa:["float"],ea:!1},{$:"node_out",ba:"qU",
fa:["vec4"],ea:!1},{$:"node_out",ba:"qV",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_NODE_B4W_TRANSLUCENCY"],ja:[{$:"txt",aa:"if ( dot ( qN , qO ) * dot ( oy , qO ) < _0_0 ) { float Fc = qP . x ; float Fd = qP . y ; float Fe = qP . z ; float Ff = qP . w ; float Fg = clamp ( abs ( dot ( qN , qO ) ) , _0_0 , _1_0 ) ; float Fh = clamp ( dot ( oy , - qN ) , _0_0 , _1_0 ) ; float Fi = pow ( Fh , Fd ) ; qU = qJ + qT * vec4 ( qS * Fg * pow ( qQ , vec3 ( Fc ) ) , _1_0 ) ; qU += Fe * mix ( vec4 ( qQ , _1_0 ) , vec4 ( _1_0 ) , Ff ) * qT * vec4 ( qS * Fg * vec3 ( Fi ) , _1_0 ) ; } else { qU = qJ + vec4 ( qS * qQ * qL , qM ) ; }".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"qU = qJ + vec4 ( qS * qQ * qL , qM ) ;".split(" ")}]}]},{$:"txt",aa:"qV = qK + qS * qR * qM ;".split(" ")}]},{$:"node",ba:"RGB",ma:[{$:"node_var",ba:"RGB_IND",aa:["0"]}],la:[{$:"node_out",ba:"Fj",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"Fj = u_node_rgbs [ RGB_IND ] ;".split(" ")}]},{$:"node",ba:"RGBTOBW",ma:[],la:[{$:"node_in",ba:"Fk",fa:["vec3"],ea:!1},{$:"node_out",ba:"Fl",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Fl = dot ( Fk , vec3 ( 0.35 , 0.45 , 0.2 ) ) ;".split(" ")}]},
{$:"node",ba:"SEPRGB",ma:[],la:[{$:"node_in",ba:"Fm",fa:["vec3"],ea:!1},{$:"node_out",ba:"Fn",fa:["float"],ea:!0},{$:"node_out",ba:"Fo",fa:["float"],ea:!0},{$:"node_out",ba:"Fp",fa:["float"],ea:!0}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fn"],ja:[{$:"txt",aa:"Fn = Fm . r ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fo"],ja:[{$:"txt",aa:"Fo = Fm . g ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fp"],ja:[{$:"txt",aa:"Fp = Fm . b ;".split(" ")}]}]}]},{$:"node",
ba:"SEPHSV",ma:[],la:[{$:"node_in",ba:"Fq",fa:["vec3"],ea:!1},{$:"node_out",ba:"Fr",fa:["float"],ea:!0},{$:"node_out",ba:"Fs",fa:["float"],ea:!0},{$:"node_out",ba:"Ft",fa:["float"],ea:!0}],ja:[{$:"txt",aa:"vec3 Fu = kj ( Fq ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fr"],ja:[{$:"txt",aa:"Fr = Fu . r ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fs"],ja:[{$:"txt",aa:"Fs = Fu . g ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Ft"],ja:[{$:"txt",aa:"Ft = Fu . b ;".split(" ")}]}]}]},
{$:"node",ba:"SQUEEZE",ma:[],la:[{$:"node_in",ba:"Fv",fa:["float"],ea:!1},{$:"node_in",ba:"Fw",fa:["float"],ea:!1},{$:"node_in",ba:"Fx",fa:["float"],ea:!1},{$:"node_out",ba:"Fy",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Fy = _1_0 / ( _1_0 + pow ( 2.71828183 , - ( Fv - Fx ) * Fw ) ) ;".split(" ")}]},{$:"node",ba:"GAMMA",ma:[],la:[{$:"node_in",ba:"Fz",fa:["vec3"],ea:!1},{$:"node_in",ba:"FA",fa:["float"],ea:!1},{$:"node_out",ba:"FB",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"FB = Fz ; if ( FB . x > _0_0 ) FB . x = pow ( Fz . x , FA ) ; if ( FB . y > _0_0 ) FB . y = pow ( Fz . y , FA ) ; if ( FB . z > _0_0 ) FB . z = pow ( Fz . z , FA ) ;".split(" ")}]},
{$:"node",ba:"B4W_SRGB_TO_LINEAR",ma:[],la:[{$:"node_in",ba:"FC",fa:["vec3"],ea:!1},{$:"node_out",ba:"FD",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"FD = max ( vec3 ( _0_0 ) , FC ) ; FD = pow ( FD , vec3 ( 2.2 ) ) ;".split(" ")}]},{$:"node",ba:"B4W_LINEAR_TO_SRGB",ma:[],la:[{$:"node_in",ba:"FE",fa:["vec3"],ea:!1},{$:"node_out",ba:"FF",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"FF = max ( vec3 ( _0_0 ) , FE ) ; FF = pow ( FF , vec3 ( _1_0 / 2.2 ) ) ;".split(" ")}]},{$:"node",ba:"TEXTURE_EMPTY",ma:[],la:[{$:"node_out",
ba:"FG",fa:["vec3"],ea:!1},{$:"node_out",ba:"FH",fa:["vec3"],ea:!1},{$:"node_out",ba:"FI",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_FG"],ja:[{$:"txt",aa:"FG = vec3 ( _0_0 ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_FH"],ja:[{$:"txt",aa:"FH = vec3 ( _0_0 ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_FI"],ja:[{$:"txt",aa:["FI","=","_0_0",";"]}]}]}]},{$:"node",ba:"TEXTURE_ENVIRONMENT_CUBE",ma:[],la:[{$:"node_in",ba:"FJ",fa:["vec3"],
ea:!1},{$:"node_out",ba:"FK",fa:["vec3"],ea:!0},{$:"node_out",ba:"FL",fa:["float"],ea:!0},{$:"node_param",ba:"node_TEXTURE_ENVIRONMENT_CUBE_var_texture",fa:["uniform","samplerCube"],ea:!1}],ja:[{$:"txt",aa:"vec3 FM = vec3 ( FJ . x , FJ . y , FJ . z ) ; vec4 BN = GLSL_TEXTURE_CUBE ( node_TEXTURE_ENVIRONMENT_CUBE_var_texture , FM ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_FK"],ja:[{$:"txt",aa:"FK = BN . xyz ; bG ( FK ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_FL"],
ja:[{$:"txt",aa:"FL = BN . w ;".split(" ")}]}]}]},{$:"node",ba:"TEXTURE_ENVIRONMENT_EQUIRECTANGULAR",ma:[{$:"node_var",ba:"USE_VECTOR_IN",aa:["0"]}],la:[{$:"node_in",ba:"FN",fa:["vec3"],ea:!1},{$:"node_out",ba:"FO",fa:["vec3"],ea:!1},{$:"node_param",ba:"node_TEXTURE_ENVIRONMENT_EQUIRECTANGULAR_var_texture",fa:["uniform","sampler2D"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_VECTOR_IN"],ja:[{$:"txt",aa:"vec3 FP = normalize ( FN ) ;".split(" ")}]},{$:"node_elif",ga:["IS_WORLD"],ja:[{$:"txt",
aa:["vec3","FP","=","sJ",";"]}]},{$:"node_else",ja:[{$:"txt",aa:["vec3","FP","=","ox",";"]}]}]},{$:"txt",aa:"float dF = - atan ( FP . y , FP . x ) / ( 2.0 * M_PI ) + _0_5 ; float kU = atan ( FP . z , sqrt ( FP . x * FP . x + FP . y * FP . y ) ) / M_PI + _0_5 ; vec4 BN = GLSL_TEXTURE ( node_TEXTURE_ENVIRONMENT_EQUIRECTANGULAR_var_texture , vec2 ( dF , kU ) ) ; FO = BN . xyz ; bG ( FO ) ;".split(" ")}]},{$:"node",ba:"TEXTURE_ENVIRONMENT_MIRROR_BALL",ma:[{$:"node_var",ba:"USE_VECTOR_IN",aa:["0"]}],la:[{$:"node_in",
ba:"FQ",fa:["vec3"],ea:!1},{$:"node_out",ba:"FR",fa:["vec3"],ea:!1},{$:"node_param",ba:"node_TEXTURE_ENVIRONMENT_MIRROR_BALL_var_texture",fa:["uniform","sampler2D"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_VECTOR_IN"],ja:[{$:"txt",aa:"vec3 FP = normalize ( FQ ) ;".split(" ")}]},{$:"node_elif",ga:["IS_WORLD"],ja:[{$:"txt",aa:["vec3","FP","=","sJ",";"]}]},{$:"node_else",ja:[{$:"txt",aa:["vec3","FP","=","ox",";"]}]}]},{$:"txt",aa:"FP . y -= _1_0 ; float FS = 2.0 * sqrt ( max ( - _0_5 * FP . y , _0_0 ) ) ; if ( FS > _0_0 ) FP /= FS ; float dF = _0_5 * ( FP . x + _1_0 ) ; float kU = _0_5 * ( FP . z + _1_0 ) ; vec4 BN = GLSL_TEXTURE ( node_TEXTURE_ENVIRONMENT_MIRROR_BALL_var_texture , vec2 ( dF , kU ) ) ; FR = BN . xyz ; bG ( FR ) ;".split(" ")}]},
{$:"node",ba:"TEXTURE_COLOR",ma:[{$:"node_var",ba:"NON_COLOR",aa:["0"]},{$:"node_var",ba:"CONVERT_UV",aa:["0"]},{$:"node_var",ba:"USE_uv2",aa:["0"]},{$:"node_var",ba:"USE_uv3",aa:["0"]},{$:"node_var",ba:"USE_uv4",aa:["0"]}],la:[{$:"node_in",ba:"FT",fa:["vec3"],ea:!0},{$:"node_in",ba:"FU",fa:["vec3"],ea:!0},{$:"node_in",ba:"FV",fa:["vec3"],ea:!0},{$:"node_in",ba:"FW",fa:["vec3"],ea:!0},{$:"node_out",ba:"FX",fa:["vec3"],ea:!0},{$:"node_out",ba:"FY",fa:["float"],ea:!0},{$:"node_out",ba:"FZ",fa:["vec3"],
ea:!0},{$:"node_out",ba:"F_",fa:["float"],ea:!0},{$:"node_out",ba:"Ga",fa:["vec3"],ea:!0},{$:"node_out",ba:"Gb",fa:["float"],ea:!0},{$:"node_out",ba:"Gc",fa:["vec3"],ea:!0},{$:"node_out",ba:"Gd",fa:["float"],ea:!0},{$:"node_param",ba:"node_TEXTURE_COLOR_var_texture",fa:["uniform","sampler2D"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["CONVERT_UV"],ja:[{$:"txt",aa:"vec4 BN = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , so ( FT ) ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"vec4 BN = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , FT . xy ) ;".split(" ")}]}]},
{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_FX"],ja:[{$:"txt",aa:"FX = BN . xyz ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["NON_COLOR",{$:"logic_negative_expr",ia:1}],ja:[{$:"txt",aa:["bG","(","FX",")",";"]}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_FY"],ja:[{$:"txt",aa:"FY = BN . w ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_uv2"],ja:[{$:"node_cond",da:[{$:"node_if",ga:["CONVERT_UV"],ja:[{$:"txt",aa:"BN = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , so ( FU ) ) ;".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"BN = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , FU . xy ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_FZ"],ja:[{$:"txt",aa:"FZ = BN . xyz ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["NON_COLOR",{$:"logic_negative_expr",ia:1}],ja:[{$:"txt",aa:["bG","(","FZ",")",";"]}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_F_"],ja:[{$:"txt",aa:"F_ = BN . w ;".split(" ")}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_uv3"],ja:[{$:"node_cond",
da:[{$:"node_if",ga:["CONVERT_UV"],ja:[{$:"txt",aa:"BN = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , so ( FV ) ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"BN = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , FV . xy ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Ga"],ja:[{$:"txt",aa:"Ga = BN . xyz ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["NON_COLOR",{$:"logic_negative_expr",ia:1}],ja:[{$:"txt",aa:["bG","(","Ga",")",";"]}]}]}]}]},{$:"node_cond",da:[{$:"node_if",
ga:["USE_OUT_Gb"],ja:[{$:"txt",aa:"Gb = BN . w ;".split(" ")}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_uv4"],ja:[{$:"node_cond",da:[{$:"node_if",ga:["CONVERT_UV"],ja:[{$:"txt",aa:"BN = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , so ( FW ) ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"BN = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , FW . xy ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gc"],ja:[{$:"txt",aa:"Gc = BN . xyz ;".split(" ")},{$:"node_cond",da:[{$:"node_if",
ga:["NON_COLOR",{$:"logic_negative_expr",ia:1}],ja:[{$:"txt",aa:["bG","(","Gc",")",";"]}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gd"],ja:[{$:"txt",aa:"Gd = BN . w ;".split(" ")}]}]}]}]}]},{$:"node",ba:"TEXTURE_NORMAL",ma:[{$:"node_var",ba:"USE_uv2",aa:["0"]},{$:"node_var",ba:"USE_uv3",aa:["0"]},{$:"node_var",ba:"USE_uv4",aa:["0"]}],la:[{$:"node_in",ba:"Ge",fa:["vec3"],ea:!0},{$:"node_in",ba:"Gf",fa:["vec3"],ea:!0},{$:"node_in",ba:"Gg",fa:["vec3"],ea:!0},{$:"node_in",ba:"Gh",fa:["vec3"],
ea:!0},{$:"node_out",ba:"Gi",fa:["vec3"],ea:!0},{$:"node_out",ba:"Gj",fa:["float"],ea:!0},{$:"node_out",ba:"Gk",fa:["vec3"],ea:!0},{$:"node_out",ba:"Gl",fa:["float"],ea:!0},{$:"node_out",ba:"Gm",fa:["vec3"],ea:!0},{$:"node_out",ba:"Gn",fa:["float"],ea:!0},{$:"node_out",ba:"Go",fa:["vec3"],ea:!0},{$:"node_out",ba:"Gp",fa:["float"],ea:!0},{$:"node_param",ba:"node_TEXTURE_NORMAL_var_texture",fa:["uniform","sampler2D"],ea:!1}],ja:[{$:"txt",aa:"vec4 BN = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , so ( Ge ) ) ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gi"],ja:[{$:"txt",aa:"Gi = normalize ( sO * ( BN . xyz - _0_5 ) ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gj"],ja:[{$:"txt",aa:"Gj = BN . w ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_uv2"],ja:[{$:"txt",aa:"BN = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , so ( Gf ) ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gk"],ja:[{$:"txt",aa:"Gk = normalize ( sO * ( BN . xyz - _0_5 ) ) ;".split(" ")}]}]},
{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gl"],ja:[{$:"txt",aa:"Gl = BN . w ;".split(" ")}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_uv3"],ja:[{$:"txt",aa:"BN = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , so ( Gg ) ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gm"],ja:[{$:"txt",aa:"Gm = normalize ( sO * ( BN . xyz - _0_5 ) ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gn"],ja:[{$:"txt",aa:"Gn = BN . w ;".split(" ")}]}]}]}]},{$:"node_cond",da:[{$:"node_if",
ga:["USE_uv4"],ja:[{$:"txt",aa:"BN = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , so ( Gh ) ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Go"],ja:[{$:"txt",aa:"Go = normalize ( sO * ( BN . xyz - _0_5 ) ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gp"],ja:[{$:"txt",aa:"Gp = BN . w ;".split(" ")}]}]}]}]}]},{$:"node",ba:"VALUE",ma:[{$:"node_var",ba:"VALUE_ROW_IND",aa:["0"]},{$:"node_var",ba:"VALUE_COL_IND",aa:["0"]}],la:[{$:"node_out",ba:"Gq",fa:["float"],ea:!1}],
ja:[{$:"txt",aa:"Gq = u_node_values [ VALUE_ROW_IND ] [ VALUE_COL_IND ] ;".split(" ")}]},{$:"node",ba:"VECT_MATH_ADD",ma:[],la:[{$:"node_in",ba:"Gr",fa:["vec3"],ea:!1},{$:"node_in",ba:"Gs",fa:["vec3"],ea:!1},{$:"node_out",ba:"Gt",fa:["vec3"],ea:!1},{$:"node_out",ba:"Gu",fa:["float"],ea:!0}],ja:[{$:"txt",aa:"Gt = Gr + Gs ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gu"],ja:[{$:"txt",aa:"Gu = ( abs ( Gt [ 0 ] ) + abs ( Gt [ 1 ] ) + abs ( Gt [ 2 ] ) ) / 3.0 ;".split(" ")}]}]}]},{$:"node",
ba:"VECT_MATH_SUBTRACT",ma:[],la:[{$:"node_in",ba:"Gv",fa:["vec3"],ea:!1},{$:"node_in",ba:"Gw",fa:["vec3"],ea:!1},{$:"node_out",ba:"Gx",fa:["vec3"],ea:!1},{$:"node_out",ba:"Gy",fa:["float"],ea:!0}],ja:[{$:"txt",aa:"Gx = Gv - Gw ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gy"],ja:[{$:"txt",aa:"Gy = ( abs ( Gx [ 0 ] ) + abs ( Gx [ 1 ] ) + abs ( Gx [ 2 ] ) ) / 3.0 ;".split(" ")}]}]}]},{$:"node",ba:"VECT_MATH_AVERAGE",ma:[],la:[{$:"node_in",ba:"Gz",fa:["vec3"],ea:!1},{$:"node_in",ba:"GA",
fa:["vec3"],ea:!1},{$:"node_out",ba:"GB",fa:["vec3"],ea:!1},{$:"node_out",ba:"GC",fa:["float"],ea:!0}],ja:[{$:"txt",aa:"GB = Gz + GA ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_GC"],ja:[{$:"txt",aa:"GC = length ( GB ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_GB"],ja:[{$:"txt",aa:"GB = normalize ( GB ) ;".split(" ")}]}]}]},{$:"node",ba:"VECT_MATH_DOT_PRODUCT",ma:[],la:[{$:"node_in",ba:"GD",fa:["vec3"],ea:!1},{$:"node_in",ba:"GE",fa:["vec3"],ea:!1},{$:"node_out",
ba:"GF",fa:["vec3"],ea:!1},{$:"node_out",ba:"GG",fa:["float"],ea:!0}],ja:[{$:"txt",aa:"GF = vec3 ( _0_0 ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_GG"],ja:[{$:"txt",aa:"GG = dot ( GD , GE ) ;".split(" ")}]}]}]},{$:"node",ba:"VECT_MATH_CROSS_PRODUCT",ma:[],la:[{$:"node_in",ba:"GH",fa:["vec3"],ea:!1},{$:"node_in",ba:"GI",fa:["vec3"],ea:!1},{$:"node_out",ba:"GJ",fa:["vec3"],ea:!1},{$:"node_out",ba:"GK",fa:["float"],ea:!0}],ja:[{$:"txt",aa:"GJ = cross ( GH , GI ) ;".split(" ")},{$:"node_cond",
da:[{$:"node_if",ga:["USE_OUT_GK"],ja:[{$:"txt",aa:"GK = length ( GJ ) ; GJ /= GK ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"GJ = normalize ( GJ ) ;".split(" ")}]}]}]},{$:"node",ba:"VECT_MATH_NORMALIZE",ma:[],la:[{$:"node_in",ba:"GL",fa:["vec3"],ea:!1},{$:"node_in",ba:"GM",fa:["vec3"],ea:!1},{$:"node_out",ba:"GN",fa:["vec3"],ea:!1},{$:"node_out",ba:"GO",fa:["float"],ea:!0}],ja:[{$:"txt",aa:"GN = normalize ( GL ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_GO"],ja:[{$:"txt",aa:"GO = length ( GL ) ;".split(" ")}]}]},
{$:"txt",aa:["GM",";"]}]},{$:"node",ba:"FRESNEL",ma:[{$:"node_var",ba:"USE_FRESNEL_NORMAL",aa:["0"]}],la:[{$:"node_in",ba:"GP",fa:["float"],ea:!1},{$:"node_in",ba:"GQ",fa:["vec3"],ea:!1},{$:"node_out",ba:"GR",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_FRESNEL_NORMAL"],ja:[{$:"txt",aa:"vec3 cw = normalize ( GQ ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:["vec3","cw","=","ox",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["CAMERA_TYPE","CAM_TYPE_PERSP",{$:"equal_expr",ia:2}],
ja:[{$:"txt",aa:"vec3 Bp = normalize ( oy ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:["vec3","Bp","=","u_camera_direction",";"]}]}]},{$:"txt",aa:"float su = max ( GP , 0.00001 ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"su = gl_FrontFacing == false ? su : _1_0 / su ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"su = gl_FrontFacing ? su : _1_0 / su ;".split(" ")}]}]},{$:"txt",aa:"GR = sv ( Bp , cw , su ) ;".split(" ")}]},
{$:"node",ba:"BACKGROUND",ma:[],la:[{$:"node_in",ba:"GS",fa:["vec3"],ea:!1},{$:"node_in",ba:"GT",fa:["float"],ea:!1},{$:"node_out",ba:"GU",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"GU = GS * GT ;".split(" ")}]},{$:"node",ba:"B4W_REFLECT",ma:[],la:[{$:"node_in",ba:"GV",fa:["vec3"],ea:!1},{$:"node_in",ba:"GW",fa:["vec3"],ea:!1},{$:"node_out",ba:"GX",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"GX = reflect ( _ ( u_view_tsr_inverse , GV ) , GW ) ;".split(" ")}]},{$:"node",ba:"B4W_REFLECT_WORLD",ma:[],la:[{$:"node_in",
ba:"GY",fa:["vec3"],ea:!1},{$:"node_out",ba:"GZ",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"GZ = reflect ( - oy . xyz , GY ) ;".split(" ")}]},{$:"node",ba:"B4W_PARALLAX",ma:[],la:[{$:"node_in",ba:"G_",fa:["vec3"],ea:!1},{$:"node_in",ba:"Ha",fa:["float"],ea:!1},{$:"node_in",ba:"Hb",fa:["const","float"],ea:!1},{$:"node_in",ba:"Hc",fa:["const","float"],ea:!1},{$:"node_out",ba:"Hd",fa:["vec3"],ea:!1},{$:"node_param",ba:"node_B4W_PARALLAX_var_texture",fa:["uniform","sampler2D"],ea:!1}],ja:[{$:"txt",aa:"float bS = length ( sR ) ; if ( bS < Hc ) { vec2 ce = so ( G_ ) ; float ci = clamp ( _0_5 * ( Hc - bS ) , _0_0 , _1_0 ) ; float hK = Ha * ci ; vec3 ck = normalize ( oy * sO ) ; float cl = _1_0 / Hb ; vec2 cm = ck . xy * hK / ( Hb * ck . z ) ; float cn = _1_0 ; float co = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , ce ) . a ; for ( float cq = 1.0 ; cq <= Hb ; cq ++ ) { if ( co < cn ) { cn -= cl ; ce -= cm ; co = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , ce ) . a ; } } vec2 cr = ce + cm ; float cs = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , cr ) . a - ( cn + cl ) ; float ct = co - cn ; float cu = ct / ( ct - cs ) ; ce = cu * cr + ( _1_0 - cu ) * ce ; Hd = sn ( ce ) ; } else Hd = G_ ;".split(" ")}]},
{$:"node",ba:"B4W_CLAMP",ma:[],la:[{$:"node_in",ba:"He",fa:["vec3"],ea:!1},{$:"node_out",ba:"Hf",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"Hf = clamp ( He , _0_0 , _1_0 ) ;".split(" ")}]},{$:"node",ba:"B4W_REFRACTION",ma:[],la:[{$:"node_in",ba:"Hg",fa:["vec3"],ea:!1},{$:"node_in",ba:"Hh",fa:["float"],ea:!1},{$:"node_out",ba:"Hi",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"Hi = sm ( Hg , Hh ) ;".split(" ")}]},{$:"node",ba:"B4W_TRANSLUCENCY",ma:[],la:[{$:"node_in",ba:"Hj",fa:["float"],ea:!1},{$:"node_in",ba:"Hk",
fa:["float"],ea:!1},{$:"node_in",ba:"Hl",fa:["float"],ea:!1},{$:"node_in",ba:"Hm",fa:["float"],ea:!1},{$:"node_in",ba:"Hn",fa:["float"],ea:!1},{$:"node_out",ba:"Ho",fa:["float"],ea:!0},{$:"node_out",ba:"Hp",fa:["vec4"],ea:!0}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Ho"],ja:[{$:"txt",aa:["Ho","=","Hj",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Hp"],ja:[{$:"txt",aa:"Hp = vec4 ( Hk , Hl , Hm , Hn ) ;".split(" ")}]}]}]},{$:"node",ba:"B4W_TIME",ma:[],la:[{$:"node_out",ba:"Hq",fa:["float"],
ea:!1}],ja:[{$:"txt",aa:["Hq","=","u_time",";"]}]},{$:"node",ba:"B4W_SMOOTHSTEP",ma:[],la:[{$:"node_in",ba:"Hr",fa:["float"],ea:!1},{$:"node_in",ba:"Hs",fa:["float"],ea:!1},{$:"node_in",ba:"Ht",fa:["float"],ea:!1},{$:"node_out",ba:"Hu",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Hu = smoothstep ( Hs , Ht , Hr ) ;".split(" ")}]},{$:"node",ba:"B4W_GLOW_OUTPUT",ma:[],la:[{$:"node_in",ba:"Hv",fa:["vec3"],ea:!1},{$:"node_in",ba:"Hw",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"E = Hv ; I = Hw ;".split(" ")}]},{$:"node",
ba:"B4W_VECTOSCAL",ma:[],la:[{$:"node_in",ba:"Hx",fa:["vec3"],ea:!1},{$:"node_out",ba:"Hy",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Hy = ( Hx . r + Hx . g + Hx . b ) / 3.0 ;".split(" ")}]},{$:"node",ba:"B4W_SCALTOVEC",ma:[],la:[{$:"node_in",ba:"Hz",fa:["float"],ea:!1},{$:"node_out",ba:"HA",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"HA [ 0 ] = Hz ; HA [ 1 ] = Hz ; HA [ 2 ] = Hz ;".split(" ")}]},{$:"nodes_global"},{$:"txt",aa:"void J ( in vec3 oy , out vec3 E , out vec3 F , out vec3 G , out vec4 H , out float I ) { E = vec3 ( _0_0 ) ; F = vec3 ( _0_0 ) ; G = vec3 ( _0_0 ) ; H = vec4 ( _0_0 ) ; I = _0_0 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["IS_WORLD"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["USE_NODE_TEXTURE_ENVIRONMENT_EQUIRECTANGULAR","USE_NODE_TEXTURE_ENVIRONMENT_MIRROR_BALL","USE_NODE_TEX_COORD_GE","USE_NODE_TEX_COORD_OB",{$:"logical_or_expr",ia:4}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 sJ = - oy ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_GEOMETRY_GL"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 ow = - oy ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_TEX_COORD_NO"],ha:{$:"grp",da:[{$:"txt",aa:["vec3",
"ox","=","oy",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_GEOMETRY_NO"],ha:{$:"grp",da:[{$:"txt",aa:["vec3","sK","=","oy",";"]}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO","USE_NODE_NORMAL_MAP","USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{$:"logical_or_expr",ia:11}],ha:{$:"grp",da:[{$:"txt",aa:["vec3","sL","=","j",";"]},
{$:"cond",da:[{$:"if",ga:["DOUBLE_SIDED_LIGHTING","USE_NODE_GEOMETRY_NO",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( gl_FrontFacing == false )".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["if","(","gl_FrontFacing",")"]}]}}]},{$:"txt",aa:"sL = sL ; else sL = - sL ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_NORMAL_MAP"],ha:{$:"grp",da:[{$:"txt",aa:["vec3","sM",
"=","sL",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DOUBLE_SIDED_LIGHTING","USE_NODE_GEOMETRY_NO","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{$:"logical_or_expr",ia:4}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 sN = normalize ( sL ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["DOUBLE_SIDED_LIGHTING"],ha:{$:"grp",da:[{$:"txt",aa:["vec3","ox","=","sN",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 ox = normalize ( j ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_GEOMETRY_NO"],ha:{$:"grp",
da:[{$:"txt",aa:["vec3","sK","=","sN",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 W = cross ( sN , k . xyz ) * k . w ; mat3 sO = mat3 ( k . xyz , W , sN ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_NORMAL_MAP"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 sP = cross ( sL , k . xyz ) * k . w ; mat3 sQ = mat3 ( k . xyz , sP , sL ) ;".split(" ")}]}}]}]}}]},
{$:"txt",aa:"vec3 ow = h ; vec4 sR = i ; float sS = u_emit ; float sT = u_ambient ;".split(" ")}]}}]},{$:"nodes_main"},{$:"txt",aa:["}"]}]}}]}]};f["include/nodes.glslv"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"NODES_GLSLV",ha:{$:"grp",da:[{$:"define",ba:"NODES_GLSLV",aa:[""]},{$:"var",ba:"PARTICLE_BATCH",aa:["0"]},{$:"cond",da:[{$:"if",ga:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{$:"logical_or_expr",ia:2},"PARTICLE_BATCH",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",
da:[{$:"txt",aa:"GLSL_IN vec3 a_orco_tex_coord ; GLSL_OUT vec3 sj ;".split(" ")}]}}]},{$:"node",ba:"TEX_COORD_UV",ma:[],la:[{$:"node_param",ba:"node_TEX_COORD_UV_var_a_uv",fa:["GLSL_IN","vec2"],ea:!1},{$:"node_param",ba:"sD",fa:["GLSL_OUT","vec2"],ea:!1}],ja:[{$:"txt",aa:["sD","=","node_TEX_COORD_UV_var_a_uv",";"]}]},{$:"node",ba:"UV_MERGED",ma:[],la:[{$:"node_param",ba:"node_UV_MERGED_var_a_uv",fa:["GLSL_IN","vec2"],ea:!1},{$:"node_param",ba:"sC",fa:["GLSL_OUT","vec2"],ea:!1}],ja:[{$:"txt",aa:["sC",
"=","node_UV_MERGED_var_a_uv",";"]}]},{$:"node",ba:"UVMAP",ma:[],la:[{$:"node_param",ba:"node_UVMAP_var_a_uv",fa:["GLSL_IN","vec2"],ea:!1},{$:"node_param",ba:"sE",fa:["GLSL_OUT","vec2"],ea:!1}],ja:[{$:"txt",aa:["sE","=","node_UVMAP_var_a_uv",";"]}]},{$:"node",ba:"GEOMETRY_UV",ma:[],la:[{$:"node_param",ba:"node_GEOMETRY_UV_var_a_uv",fa:["GLSL_IN","vec2"],ea:!1},{$:"node_param",ba:"sw",fa:["GLSL_OUT","vec2"],ea:!1}],ja:[{$:"txt",aa:["sw","=","node_GEOMETRY_UV_var_a_uv",";"]}]},{$:"node",ba:"GEOMETRY_VC",
ma:[],la:[{$:"node_param",ba:"node_GEOMETRY_VC_var_a_vertex_color",fa:["GLSL_IN","vec3"],ea:!1},{$:"node_param",ba:"HB",fa:["GLSL_OUT","vec3"],ea:!1}],ja:[{$:"txt",aa:["HB","=","node_GEOMETRY_VC_var_a_vertex_color",";"]}]},{$:"node",ba:"GEOMETRY_VC1",ma:[],la:[{$:"node_param",ba:"node_GEOMETRY_VC1_var_a_vertex_color",fa:["GLSL_IN","float"],ea:!1},{$:"node_param",ba:"HC",fa:["GLSL_OUT","float"],ea:!1}],ja:[{$:"txt",aa:["HC","=","node_GEOMETRY_VC1_var_a_vertex_color",";"]}]},{$:"node",ba:"GEOMETRY_VC2",
ma:[],la:[{$:"node_param",ba:"node_GEOMETRY_VC2_var_a_vertex_color",fa:["GLSL_IN","vec2"],ea:!1},{$:"node_param",ba:"HD",fa:["GLSL_OUT","vec2"],ea:!1}],ja:[{$:"txt",aa:["HD","=","node_GEOMETRY_VC2_var_a_vertex_color",";"]}]},{$:"node",ba:"GEOMETRY_VC3",ma:[],la:[{$:"node_param",ba:"node_GEOMETRY_VC3_var_a_vertex_color",fa:["GLSL_IN","vec3"],ea:!1},{$:"node_param",ba:"HE",fa:["GLSL_OUT","vec3"],ea:!1}],ja:[{$:"txt",aa:["HE","=","node_GEOMETRY_VC3_var_a_vertex_color",";"]}]},{$:"nodes_global"},{$:"txt",
aa:["void","J","(",")","{"]},{$:"cond",da:[{$:"if",ga:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["sj","=","a_orco_tex_coord",";"]}]}}]},{$:"nodes_main"},{$:"txt",aa:["}"]}]}}]}]};f["include/pack.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"PACK_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"PACK_GLSLF",aa:[""]},{$:"txt",aa:"vec4 eu ( const in float iq ) { vec4 fu = vec4 ( _255_0 * _255_0 * _255_0 , _255_0 * _255_0 , _255_0 , _1_0 ) ; vec4 HF = vec4 ( _0_0 , _1_0 / _255_0 , _1_0 / _255_0 , _1_0 / _255_0 ) ; vec4 jF = fract ( iq * fu ) ; jF -= jF . xxyz * HF ; return jF ; } float cV ( const in vec4 HG ) { float et ; vec4 fu = vec4 ( _1_0 / ( _255_0 * _255_0 * _255_0 ) , _1_0 / ( _255_0 * _255_0 ) , _1_0 / _255_0 , _1_0 ) ; et = dot ( HG , fu ) ; return et ; } vec4 eu ( const in vec2 rk ) { vec2 fu = vec2 ( _255_0 , _1_0 ) ; vec2 HF = vec2 ( _0_0 , _1_0 / _255_0 ) ; vec4 jF = fract ( rk . xxyy * fu . xyxy ) ; jF -= jF . xxzz * HF . xyxy ; if ( rk . r == _1_0 ) jF . rg = vec2 ( _0_0 , _1_0 ) ; if ( rk . g == _1_0 ) jF . ba = vec2 ( _0_0 , _1_0 ) ; return jF ; } vec2 jk ( const in vec4 HH ) { vec2 rk ; vec2 fu = vec2 ( _1_0 / _255_0 , _1_0 ) ; rk . r = dot ( HH . rg , fu ) ; rk . g = dot ( HH . ba , fu ) ; return rk ; }".split(" ")}]}}]}]};
f["include/particles.glslv"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"PARTICLES_GLSLV",ha:{$:"grp",da:[{$:"define",ba:"PARTICLES_GLSLV",aa:[""]},{$:"var",ba:"EPSILON",aa:["0.000001"]},{$:"var",ba:"COLOR_RAMP_LENGTH",aa:["0"]},{$:"var",ba:"WORLD_SPACE",aa:["0"]},{$:"var",ba:"USE_COLOR_RAMP",aa:["0"]},{$:"include",oa:"math.glslv"},{$:"txt",aa:"struct dc { float di ; vec3 O ; float L ; vec3 aQ ; float bP ; vec3 dp ; vec3 dq ; float dr ; } ;".split(" ")},{$:"cond",da:[{$:"if",ga:["COLOR_RAMP_LENGTH",
0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"void HL ( inout vec3 aQ , float HI , vec4 kf , vec4 bz ) { float HJ = bz . x - kf . x ; float HK = ( HI - kf . x ) / HJ ; aQ = mix ( aQ , bz . yzw , clamp ( HK , 0.0 , 1.0 ) ) ; }".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["COLOR_RAMP_LENGTH",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 HO ( float t , float HM , vec4 HN [ COLOR_RAMP_LENGTH ] ) { float HI = t / HM ; vec3 aQ = HN [ 0 ] . yzw ;".split(" ")},{$:"cond",da:[{$:"if",ga:["COLOR_RAMP_LENGTH",
1,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"HL ( aQ , HI , HN [ 0 ] , HN [ 1 ] ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["COLOR_RAMP_LENGTH",2,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"HL ( aQ , HI , HN [ 1 ] , HN [ 2 ] ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["COLOR_RAMP_LENGTH",3,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"HL ( aQ , HI , HN [ 2 ] , HN [ 3 ] ) ;".split(" ")}]}}]},{$:"txt",aa:["return","aQ",";","}"]}]}}]},{$:"txt",aa:"float HU ( float t , float HM , float HP , float HQ ) { float HR = max ( 0.01 , min ( HM , HP ) ) ; float HS = max ( 0.01 , min ( HM , HQ ) ) ; float HT = HM - HS ; float L = clamp ( t / HR , 0.0 , 1.0 ) - step ( HT , t ) * ( t - HT ) / HS ; return L ; } dc dd ( ) { dc sp ; float t ; float HM = a_p_data [ 0 ] ; float HV = a_p_data [ 1 ] ; if ( u_p_cyclic == 1 ) { t = mod ( u_p_time , u_p_length ) - HV ; if ( t < 0.0 ) t += u_p_length ; } if ( u_p_cyclic != 1 ) { t = u_p_time - HV ; } if ( t < 0.0 || t >= HM ) { sp . di = 0.0001 ; sp . O = vec3 ( 99999.0 , 0.0 , 0.0 ) ; } if ( ! ( t < 0.0 || t >= HM ) ) { vec4 S = R ( a_tbn ) ; vec3 ca = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["WORLD_SPACE"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 fr = a_position ; vec3 rz = ca ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 fr = ap ( u_model_tsr , a_position ) ; vec3 rz = bI ( u_model_tsr , ca ) ;".split(" ")}]}}]},{$:"txt",aa:"vec3 HW = u_p_nfactor * rz ; HW += a_p_vels . xyz ; HW . z -= u_p_gravity * t / 2.0 ; float HX = max ( u_p_mass , EPSILON ) ; HW += ( u_p_wind_fac * u_wind / HX ) * t / 2.0 ; sp . dr = t ; sp . dp = HW ; sp . dq = ca * a_p_vels . w ; sp . O = fr + HW * t ; sp . bP = a_p_vels . w * t ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["USE_COLOR_RAMP"],ha:{$:"grp",da:[{$:"txt",aa:"sp . di = GLSL_TEXTURE ( u_color_ramp_tex , vec2 ( t / u_p_max_lifetime , 0.5 ) ) . g ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"sp . di = 1.0 ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["COLOR_RAMP_LENGTH",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"sp . aQ = HO ( t , u_p_max_lifetime , u_p_color_ramp ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"sp . aQ = vec3 ( 1.0 ) ;".split(" ")}]}}]},
{$:"txt",aa:"sp . L = HU ( t , a_p_data [ 0 ] , u_p_fade_in , u_p_fade_out ) ; } return sp ; }".split(" ")}]}}]}]};f["include/particles_nodes.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"PARTICLES_NODES_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"PARTICLES_NODES_GLSLF",aa:[""]},{$:"var",ba:"CAUSTICS",aa:["0"]},{$:"var",ba:"DOUBLE_SIDED_LIGHTING",aa:["0"]},{$:"var",ba:"REFLECTION_PASS",aa:["REFL_PASS_NONE"]},{$:"var",ba:"PARTICLE_BATCH",aa:["0"]},{$:"var",ba:"NUM_LIGHTS",aa:["0"]},{$:"var",ba:"CALC_TBN_SPACE",
aa:["0"]},{$:"cond",da:[{$:"if",ga:["USE_NODE_MATERIAL_BEGIN","USE_NODE_BSDF_BEGIN",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"include",oa:"environment.glslf"}]}}]},{$:"include",oa:"color_util.glslf"},{$:"include",oa:"math.glslv"},{$:"cond",da:[{$:"if",ga:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_SEPHSV",{$:"logical_or_expr",ia:6}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 kj ( vec3 rgb ) { vec4 hM = vec4 ( _0_0 , - _1_0 / 3.0 , 2.0 / 3.0 , - _1_0 ) ; vec4 p = mix ( vec4 ( rgb . bg , hM . wz ) , vec4 ( rgb . gb , hM . xy ) , step ( rgb . b , rgb . g ) ) ; vec4 q = mix ( vec4 ( p . xyw , rgb . r ) , vec4 ( rgb . r , p . yzx ) , step ( p . x , rgb . r ) ) ; float dC = q . x - min ( q . w , q . y ) ; float iF = 1.0e-10 ; return vec3 ( abs ( q . z + ( q . w - q . y ) / ( 6.0 * dC + iF ) ) , dC / ( q . x + iF ) , q . x ) ; }".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_COMBHSV",{$:"logical_or_expr",ia:6}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 kl ( vec3 kk ) { vec4 hM = vec4 ( _1_0 , 2.0 / 3.0 , _1_0 / 3.0 , 3.0 ) ; vec3 p = abs ( fract ( vec3 ( kk . r , kk . r , kk . r ) + hM . xyz ) * 6.0 - hM . www ) ; return kk . b * mix ( hM . xxx , clamp ( p - hM . xxx , _0_0 , _1_0 ) , kk . g ) ; }".split(" ")}]}}]},{$:"cond",
da:[{$:"if",ga:["USE_NODE_GEOMETRY_UV","USE_NODE_B4W_PARALLAX","USE_NODE_UV_MERGED",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 sn ( vec2 gX ) { return vec3 ( gX * 2.0 - vec2 ( _1_0 , _1_0 ) , _0_0 ) ; }".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_TEXTURE_COLOR","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 so ( vec3 rk ) { return vec2 ( rk . xy * _0_5 + vec2 ( _0_5 , _0_5 ) ) ; }".split(" ")}]}}]},{$:"node",
ba:"CAMERA",ma:[],la:[{$:"node_out",ba:"sU",fa:["vec3"],ea:!0},{$:"node_out",ba:"sV",fa:["float"],ea:!0},{$:"node_out",ba:"sW",fa:["float"],ea:!0}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_sU"],ja:[{$:"txt",aa:"sU = normalize ( sR . xyz ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_sV"],ja:[{$:"txt",aa:"sV = abs ( sR . z ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_sW"],ja:[{$:"txt",aa:"sW = length ( sR . xyz ) ;".split(" ")}]}]}]},{$:"node",ba:"COMBRGB",
ma:[],la:[{$:"node_in",ba:"sX",fa:["float"],ea:!1},{$:"node_in",ba:"sY",fa:["float"],ea:!1},{$:"node_in",ba:"sZ",fa:["float"],ea:!1},{$:"node_out",ba:"s_",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"s_ = vec3 ( sX , sY , sZ ) ;".split(" ")}]},{$:"node",ba:"COMBHSV",ma:[],la:[{$:"node_in",ba:"ta",fa:["float"],ea:!1},{$:"node_in",ba:"tb",fa:["float"],ea:!1},{$:"node_in",ba:"tc",fa:["float"],ea:!1},{$:"node_out",ba:"td",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"td = kl ( vec3 ( ta , tb , tc ) ) ;".split(" ")}]},
{$:"node",ba:"EMPTY_UV",ma:[],la:[{$:"node_out",ba:"te",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"te = vec3 ( - _1_0 , - _1_0 , _0_0 ) ;".split(" ")}]},{$:"node",ba:"EMPTY_VC",ma:[],la:[{$:"node_out",ba:"tf",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"tf = vec3 ( _0_0 ) ;".split(" ")}]},{$:"node",ba:"GEOMETRY_UV",ma:[],la:[{$:"node_out",ba:"tg",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"tg = sn ( A ) ;".split(" ")}]},{$:"node",ba:"GEOMETRY_OR",ma:[],la:[{$:"node_out",ba:"th",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"th = 2.0 * vec3 ( A , _0_0 ) - vec3 ( _1_0 ) ;".split(" ")}]},
{$:"node",ba:"GEOMETRY_VC",ma:[],la:[{$:"node_out",ba:"ti",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"ti = vec3 ( _1_0 ) ;".split(" ")}]},{$:"node",ba:"GEOMETRY_VC1",ma:[],la:[{$:"node_out",ba:"tj",fa:["float"],ea:!1}],ja:[{$:"txt",aa:["tj","=","_1_0",";"]}]},{$:"node",ba:"GEOMETRY_VC2",ma:[],la:[{$:"node_out",ba:"tk",fa:["float"],ea:!1},{$:"node_out",ba:"tl",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"tk = _1_0 ; tl = _1_0 ;".split(" ")}]},{$:"node",ba:"GEOMETRY_VC3",ma:[],la:[{$:"node_out",ba:"tm",fa:["float"],
ea:!1},{$:"node_out",ba:"tn",fa:["float"],ea:!1},{$:"node_out",ba:"to",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"tm = _1_0 ; tn = _1_0 ; to = _1_0 ;".split(" ")}]},{$:"node",ba:"GEOMETRY_NO",ma:[{$:"node_var",ba:"USE_NORMAL_IN",aa:["0"]}],la:[{$:"node_in",ba:"tr",fa:["vec3"],ea:!1},{$:"node_out",ba:"tu",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_NORMAL_IN"],ja:[{$:"txt",aa:["tu","=","tr",";"]}]},{$:"node_else",ja:[{$:"txt",aa:"tu = sK . xyz ;".split(" ")}]}]}]},{$:"node",ba:"GEOMETRY_FB",
ma:[],la:[{$:"node_out",ba:"tv",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"tv = ( gl_FrontFacing ) ? _0_0 : _1_0 ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"tv = ( gl_FrontFacing ) ? _1_0 : _0_0 ;".split(" ")}]}]}]},{$:"node",ba:"GEOMETRY_VW",ma:[],la:[{$:"node_out",ba:"tx",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"tx = - _ ( u_view_tsr_frag , oy ) ;".split(" ")}]},{$:"node",ba:"GEOMETRY_LO",ma:[],la:[{$:"node_out",
ba:"ty",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"ty [ 0 ] = sR [ 0 ] ; ty [ 1 ] = sR [ 1 ] ; ty [ 2 ] = sR [ 2 ] ;".split(" ")}]},{$:"node",ba:"GEOMETRY_GL",ma:[],la:[{$:"node_out",ba:"tz",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"tz = vec3 ( ow . r , ow . g , ow . b ) ;".split(" ")}]},{$:"node",ba:"NEW_GEOMETRY",ma:[],la:[{$:"node_out",ba:"tB",fa:["vec3"],ea:!1},{$:"node_out",ba:"tC",fa:["vec3"],ea:!1},{$:"node_out",ba:"tD",fa:["vec3"],ea:!1},{$:"node_out",ba:"tE",fa:["vec3"],ea:!1},{$:"node_out",ba:"tF",
fa:["vec3"],ea:!1},{$:"node_out",ba:"tG",fa:["vec3"],ea:!1},{$:"node_out",ba:"tH",fa:["float"],ea:!1},{$:"node_out",ba:"tI",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"tB = vec3 ( _0_0 ) ; tC = vec3 ( _0_0 ) ; tD = vec3 ( _0_0 ) ; tE = vec3 ( _0_0 ) ; tF = vec3 ( _0_0 ) ; tG = vec3 ( _0_0 ) ; tH = _0_0 ; tI = _0_0 ;".split(" ")}]},{$:"node",ba:"HUE_SAT",ma:[],la:[{$:"node_in",ba:"tJ",fa:["float"],ea:!1},{$:"node_in",ba:"tK",fa:["float"],ea:!1},{$:"node_in",ba:"tL",fa:["float"],ea:!1},{$:"node_in",ba:"tM",
fa:["float"],ea:!1},{$:"node_in",ba:"tN",fa:["vec3"],ea:!1},{$:"node_out",ba:"tO",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"vec3 kk = kj ( tN ) ; kk [ 0 ] += ( tJ - _0_5 ) ; if ( kk [ 0 ] > _1_0 ) kk [ 0 ] -= _1_0 ; else if ( kk [ 0 ] < _0_0 ) kk [ 0 ] += _1_0 ; kk *= vec3 ( _1_0 , tK , tL ) ; kk = mix ( vec3 ( _1_0 ) , mix ( vec3 ( _0_0 ) , kk , step ( vec3 ( _0_0 ) , kk ) ) , step ( kk , vec3 ( _1_0 ) ) ) ; tO = mix ( tN , kl ( kk ) , tM ) ;".split(" ")}]},{$:"node",ba:"INVERT",ma:[],la:[{$:"node_in",
ba:"tP",fa:["float"],ea:!1},{$:"node_in",ba:"tQ",fa:["vec3"],ea:!1},{$:"node_out",ba:"tR",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"tR = mix ( tQ , vec3 ( _1_0 ) - tQ , tP ) ;".split(" ")}]},{$:"node",ba:"LAMP",ma:[{$:"node_var",ba:"LAMP_TYPE",aa:["HEMI"]},{$:"node_var",ba:"LAMP_INDEX",aa:["0"]},{$:"node_var",ba:"LAMP_USE_SPHERE",aa:["0"]},{$:"node_var",ba:"LAMP_SPOT_SIZE",aa:["0.8"]},{$:"node_var",ba:"LAMP_SPOT_BLEND",aa:["0.03"]},{$:"node_var",ba:"LAMP_LIGHT_DIST",aa:["30.0"]}],la:[{$:"node_out",ba:"tS",
fa:["vec3"],ea:!0},{$:"node_out",ba:"tT",fa:["vec3"],ea:!1},{$:"node_out",ba:"tU",fa:["float"],ea:!1},{$:"node_out",ba:"tV",fa:["float"],ea:!0}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_tS"],ja:[{$:"txt",aa:"tS = u_lamp_light_color_intensities [ LAMP_INDEX ] ;".split(" ")}]}]},{$:"txt",aa:"vec3 tW = u_lamp_light_directions [ LAMP_INDEX ] ; vec3 tX = u_lamp_light_positions [ LAMP_INDEX ] ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_TYPE","SPOT",{$:"equal_expr",ia:2},"LAMP_TYPE",
"POINT",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ja:[{$:"txt",aa:"tT = - h + tX ; tU = length ( tT ) ; tT = normalize ( tT ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_tV"],ja:[{$:"txt",aa:"tV = LAMP_LIGHT_DIST / ( LAMP_LIGHT_DIST + tU * tU ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_TYPE","SPOT",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"float pb = dot ( tT , tW ) ; pb *= smoothstep ( _0_0 , _1_0 , ( pb - LAMP_SPOT_SIZE ) / LAMP_SPOT_BLEND ) ; tV *= pb ;".split(" ")}]}]},
{$:"node_cond",da:[{$:"node_if",ga:["LAMP_USE_SPHERE"],ja:[{$:"txt",aa:"tV *= max ( LAMP_LIGHT_DIST - tU , _0_0 ) / LAMP_LIGHT_DIST ;".split(" ")}]}]}]}]}]},{$:"node_else",ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_tT"],ja:[{$:"txt",aa:["tT","=","tW",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_tU"],ja:[{$:"txt",aa:"tU = length ( tX - h ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_tV"],ja:[{$:"txt",aa:["tV","=","_1_0",";"]}]}]}]}]}]},{$:"node",ba:"NORMAL",ma:[],
la:[{$:"node_in",ba:"tY",fa:["vec3"],ea:!1},{$:"node_out",ba:"tZ",fa:["vec3"],ea:!0},{$:"node_out",ba:"t_",fa:["float"],ea:!0},{$:"node_param",ba:"sB",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_tZ"],ja:[{$:"txt",aa:["tZ","=","sB",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_t_"],ja:[{$:"txt",aa:"t_ = - dot ( tY , sB ) ;".split(" ")}]}]}]},{$:"node",ba:"B4W_VECTOR_VIEW",ma:[],la:[{$:"node_in",ba:"ua",fa:["vec3"],ea:!1},{$:"node_out",ba:"ub",fa:["vec3"],ea:!1}],ja:[{$:"txt",
aa:"ub = - _ ( u_view_tsr_frag , ua ) ;".split(" ")}]},{$:"node",ba:"BSDF_BEGIN",ma:[],la:[{$:"node_in",ba:"uc",fa:["vec3"],ea:!1},{$:"node_in",ba:"ud",fa:["vec3"],ea:!1},{$:"node_in",ba:"ue",fa:["float"],ea:!1},{$:"node_in",ba:"uf",fa:["vec3"],ea:!1},{$:"node_in",ba:"ug",fa:["float"],ea:!1},{$:"node_in",ba:"uh",fa:["float"],ea:!1},{$:"node_in",ba:"ui",fa:["vec3"],ea:!1},{$:"node_in",ba:"ul",fa:["vec3"],ea:!1},{$:"node_in",ba:"um",fa:["float"],ea:!1},{$:"node_in",ba:"un",fa:["vec3"],ea:!1},{$:"node_in",
ba:"uo",fa:["float"],ea:!1},{$:"node_out",ba:"up",fa:["vec3"],ea:!1},{$:"node_out",ba:"uq",fa:["vec3"],ea:!1},{$:"node_out",ba:"ur",fa:["vec3"],ea:!1},{$:"node_out",ba:"us",fa:["vec3"],ea:!1},{$:"node_out",ba:"ut",fa:["vec3"],ea:!1},{$:"node_out",ba:"uu",fa:["vec4"],ea:!1},{$:"node_out",ba:"uw",fa:["vec4"],ea:!1},{$:"node_out",ba:"ux",fa:["vec3"],ea:!1},{$:"node_out",ba:"uy",fa:["vec3"],ea:!1},{$:"node_out",ba:"uz",fa:["vec3"],ea:!1},{$:"node_out",ba:"uA",fa:["float"],ea:!1},{$:"node_out",ba:"uB",
fa:["vec3"],ea:!1},{$:"node_out",ba:"uC",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"ur = ud ; us = uf ; ut = ui ; ux = ud ; uy = uf ; metalness_out = uh ; uz = ul ; uA = um ; uB = un ; uC = uo ; up = sS * ur ; uq = sT * u_environment_energy * cE ( ut ) ; uw = cH ( ur ) ; H = uw ; uu [ 0 ] = ue ; uu [ 1 ] = ug ; uu [ 2 ] = uh ;".split(" ")}]},{$:"node",ba:"BSDF_END",ma:[],la:[{$:"node_in",ba:"uD",fa:["vec4"],ea:!1},{$:"node_in",ba:"uE",fa:["vec3"],ea:!1},{$:"node_in",ba:"uF",fa:["vec3"],ea:!1},{$:"node_in",
ba:"uG",fa:["vec4"],ea:!1},{$:"node_in",ba:"uI",fa:["vec3"],ea:!1},{$:"node_in",ba:"uJ",fa:["vec3"],ea:!1},{$:"node_in",ba:"uK",fa:["vec3"],ea:!1},{$:"node_in",ba:"uL",fa:["float"],ea:!1},{$:"node_in",ba:"uM",fa:["vec3"],ea:!1},{$:"node_in",ba:"uL",fa:["float"],ea:!1},{$:"node_in",ba:"uN",fa:["float"],ea:!1},{$:"node_out",ba:"uO",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"uO = uD . rgb + uE ; uO = mix ( uO , uK , uL ) ; I = _1_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_NODE_BSDF_TRANSPARENT"],
ja:[{$:"txt",aa:"vec3 uR = GLSL_TEXTURE ( u_refractmap , l . xy / l . z ) . rgb ; bG ( uR ) ; uM = uM * uR ; uO += uM ;".split(" ")}]}]},{$:"txt",aa:["uF",";"]}]},{$:"node",ba:"BSDF_COMPUTE",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"uY",fa:["vec3"],ea:!1},{$:"node_in",ba:"uZ",fa:["vec2"],ea:!1},{$:"node_in",ba:"u_",fa:["vec3"],ea:!1},{$:"node_in",ba:"va",fa:["float"],ea:!1},{$:"node_in",ba:"vb",fa:["vec4"],ea:!1},{$:"node_out",ba:"vc",fa:["float"],ea:!1},{$:"node_out",
ba:"vd",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"vec3 rz = u_ ; float uU = clamp ( vb [ 0 ] , _0_0 , _1_0 ) ; float uQ = clamp ( vb [ 1 ] , _0_0 , _1_0 ) ; float rW = vb [ 2 ] ; vec3 p_ = normalize ( oy + uY ) ; float pj = ( _1_0 - va ) * dot ( rz , uY ) + va ; float vf = ( _1_0 - va ) * max ( dot ( uY , p_ ) , _0_0 ) + va ; float vg = ( _1_0 - va ) * max ( dot ( u_ , p_ ) , _0_0 ) + va ; vc = _0_0 ; if ( uZ . r != _0_0 ) { if ( uU > _0_0 ) { float pz = max ( dot ( rz , oy ) , _0_0 ) ; float pA = uU * uU ; float cG = _1_0 - _0_5 * ( pA / ( pA + 0.33 ) ) ; vec3 pB = uY - pj * rz ; vec3 pC = oy - pz * rz ; if ( length ( pB ) == _0_0 || length ( pC ) == _0_0 || abs ( pj ) > _1_0 || abs ( pz ) > _1_0 ) vc = pj * cG ; else { float pD = acos ( pj ) ; float pE = acos ( pz ) ; vec3 pF = normalize ( pB ) ; vec3 pG = normalize ( pC ) ; float a , b ; a = max ( pD , pE ) ; b = min ( pD , pE ) ; b *= 0.95 ; float t = max ( dot ( pF , pG ) , _0_0 ) ; float hS = 0.45 * ( pA / ( pA + 0.09 ) ) ; vc = pj * ( cG + ( hS * t * sin ( a ) * tan ( b ) ) ) ; } } else vc = pj ; vc = max ( vc , _0_0 ) ; } float L = uQ ; float vh = L * L ; float d_ = ( vg * vh - vg ) * vg + _1_0 ; float cD = vh / ( M_PI * d_ * d_ ) ; float vi ; float vj ; float vl = pow ( _1_0 - vf , 5.0 ) ; vi = _1_0 ; vj = vl ; float hM = L / 2.0 ; float vm = hM * hM ; float vn = _1_0 - vm ; float vo = _1_0 / ( vf * vf * vn + vm ) ; vi *= vo ; vj *= vo ; float rR = mix ( 0.04 , _1_0 , rW ) ; float vp = mix ( vj , vi , rR ) ; vd = max ( pj * cD * vp , _0_0 ) ;".split(" ")}]},
{$:"node",ba:"BSDF_ANISOTROPIC",ma:[],la:[{$:"node_in",ba:"vJ",fa:["vec3"],ea:!1},{$:"node_in",ba:"vK",fa:["float"],ea:!1},{$:"node_in",ba:"vL",fa:["float"],ea:!1},{$:"node_in",ba:"vM",fa:["float"],ea:!1},{$:"node_in",ba:"vN",fa:["vec3"],ea:!1},{$:"node_in",ba:"vO",fa:["vec3"],ea:!1},{$:"node_out",ba:"vP",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"vP = vJ ; vK ; vL ; vM ; vN ; vO ;".split(" ")}]},{$:"node",ba:"BSDF_DIFFUSE",ma:[{$:"node_var",ba:"USE_NORMAL_IN",aa:["0"]}],la:[{$:"node_in",ba:"vQ",fa:["vec3"],
ea:!1},{$:"node_in",ba:"vR",fa:["float"],ea:!1},{$:"node_in",ba:"vS",fa:["vec3"],ea:!1},{$:"node_out",ba:"vT",fa:["vec3"],ea:!1},{$:"node_out",ba:"vU",fa:["vec3"],ea:!1},{$:"node_out",ba:"vV",fa:["float"],ea:!1},{$:"node_out",ba:"vW",fa:["vec3"],ea:!1},{$:"node_out",ba:"vX",fa:["float"],ea:!1},{$:"node_out",ba:"vY",fa:["float"],ea:!1},{$:"node_out",ba:"vZ",fa:["vec3"],ea:!1},{$:"node_out",ba:"wb",fa:["vec3"],ea:!1},{$:"node_out",ba:"wc",fa:["float"],ea:!1},{$:"node_out",ba:"wd",fa:["vec3"],ea:!1},
{$:"node_out",ba:"we",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"vU = vQ ; vV = vR ; vY = _0_0 ; wc = _0_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_NORMAL_IN"],ja:[{$:"txt",aa:["vZ","=","vS",";"]}]},{$:"node_else",ja:[{$:"txt",aa:["vZ","=","ox",";"]}]}]},{$:"txt",aa:"vT ; vW ; vX ; wb ; wd ; we ;".split(" ")}]},{$:"node",ba:"BSDF_GLASS",ma:[],la:[{$:"node_in",ba:"wf",fa:["vec3"],ea:!1},{$:"node_in",ba:"wg",fa:["float"],ea:!1},{$:"node_in",ba:"wh",fa:["float"],ea:!1},{$:"node_in",ba:"wi",
fa:["vec3"],ea:!1},{$:"node_out",ba:"wj",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"wj = wf ; wg ; wh ; wi ;".split(" ")}]},{$:"node",ba:"BSDF_GLOSSY",ma:[{$:"node_var",ba:"USE_NORMAL_IN",aa:["0"]}],la:[{$:"node_in",ba:"wk",fa:["vec3"],ea:!1},{$:"node_in",ba:"wl",fa:["float"],ea:!1},{$:"node_in",ba:"wm",fa:["vec3"],ea:!1},{$:"node_out",ba:"wn",fa:["vec3"],ea:!1},{$:"node_out",ba:"wo",fa:["vec3"],ea:!1},{$:"node_out",ba:"wp",fa:["float"],ea:!1},{$:"node_out",ba:"wq",fa:["vec3"],ea:!1},{$:"node_out",ba:"wr",
fa:["float"],ea:!1},{$:"node_out",ba:"ws",fa:["float"],ea:!1},{$:"node_out",ba:"wt",fa:["vec3"],ea:!1},{$:"node_out",ba:"wA",fa:["vec3"],ea:!1},{$:"node_out",ba:"wB",fa:["float"],ea:!1},{$:"node_out",ba:"wC",fa:["vec3"],ea:!1},{$:"node_out",ba:"wD",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"wq = wk ; wr = wl ; ws = _1_0 ; wB = _0_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_NORMAL_IN"],ja:[{$:"txt",aa:["wt","=","wm",";"]}]},{$:"node_else",ja:[{$:"txt",aa:["wt","=","ox",";"]}]}]},{$:"txt",
aa:"wn ; wo ; wp ; wA ; wC ; wD ;".split(" ")}]},{$:"node",ba:"BSDF_HAIR",ma:[],la:[{$:"node_in",ba:"wE",fa:["vec3"],ea:!1},{$:"node_in",ba:"wF",fa:["float"],ea:!1},{$:"node_in",ba:"wG",fa:["float"],ea:!1},{$:"node_in",ba:"wH",fa:["float"],ea:!1},{$:"node_out",ba:"wI",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"wI = wE ; wF ; wG ; wH ;".split(" ")}]},{$:"node",ba:"BSDF_TRANSPARENT",ma:[],la:[{$:"node_in",ba:"wJ",fa:["vec3"],ea:!1},{$:"node_out",ba:"wK",fa:["vec3"],ea:!1},{$:"node_out",ba:"wL",fa:["vec3"],
ea:!1},{$:"node_out",ba:"wM",fa:["float"],ea:!1},{$:"node_out",ba:"wN",fa:["vec3"],ea:!1},{$:"node_out",ba:"wO",fa:["float"],ea:!1},{$:"node_out",ba:"wP",fa:["float"],ea:!1},{$:"node_out",ba:"wQ",fa:["vec3"],ea:!1},{$:"node_out",ba:"wT",fa:["vec3"],ea:!1},{$:"node_out",ba:"wU",fa:["float"],ea:!1},{$:"node_out",ba:"wV",fa:["vec3"],ea:!1},{$:"node_out",ba:"wW",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"wV = wJ ; wP = _0_0 ; wU = _0_0 ; wW = _0_0 ; wQ = ox ; wK ; wL ; wM ; wN ; wO ; wT ;".split(" ")}]},{$:"node",
ba:"BSDF_TRANSLUCENT",ma:[],la:[{$:"node_in",ba:"wX",fa:["vec3"],ea:!1},{$:"node_in",ba:"wY",fa:["vec3"],ea:!1},{$:"node_out",ba:"wZ",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"wZ = wX ; wY ;".split(" ")}]},{$:"node",ba:"BSDF_REFRACTION",ma:[],la:[{$:"node_in",ba:"w_",fa:["vec3"],ea:!1},{$:"node_in",ba:"xa",fa:["float"],ea:!1},{$:"node_in",ba:"xb",fa:["float"],ea:!1},{$:"node_in",ba:"xc",fa:["vec3"],ea:!1},{$:"node_out",ba:"xd",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"xd [ 0 ] = xd [ 1 ] = xd [ 2 ] = _0_0 ; w_ ; xa ; xb ; xc ;".split(" ")}]},
{$:"node",ba:"BSDF_TOON",ma:[],la:[{$:"node_in",ba:"xe",fa:["vec3"],ea:!1},{$:"node_in",ba:"xf",fa:["float"],ea:!1},{$:"node_in",ba:"xg",fa:["float"],ea:!1},{$:"node_in",ba:"xh",fa:["vec3"],ea:!1},{$:"node_out",ba:"xi",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"xi = xe ; xf ; xg ; xh ;".split(" ")}]},{$:"node",ba:"BSDF_VELVET",ma:[],la:[{$:"node_in",ba:"xj",fa:["vec3"],ea:!1},{$:"node_in",ba:"xk",fa:["float"],ea:!1},{$:"node_in",ba:"xl",fa:["vec3"],ea:!1},{$:"node_out",ba:"xm",fa:["vec3"],ea:!1}],ja:[{$:"txt",
aa:"xm = xj ; xk ; xl ;".split(" ")}]},{$:"node",ba:"SUBSURFACE_SCATTERING",ma:[],la:[{$:"node_in",ba:"xn",fa:["vec3"],ea:!1},{$:"node_in",ba:"xo",fa:["float"],ea:!1},{$:"node_in",ba:"xp",fa:["vec3"],ea:!1},{$:"node_in",ba:"xq",fa:["float"],ea:!1},{$:"node_in",ba:"xr",fa:["float"],ea:!1},{$:"node_in",ba:"xs",fa:["vec3"],ea:!1},{$:"node_out",ba:"xt",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"xt [ 0 ] = xt [ 1 ] = xt [ 2 ] = _0_0 ; xn ; xp ; xq ; xr ; xs ; xo ;".split(" ")}]},{$:"node",ba:"EMISSION",ma:[],
la:[{$:"node_in",ba:"xu",fa:["vec3"],ea:!1},{$:"node_in",ba:"xv",fa:["float"],ea:!1},{$:"node_out",ba:"xA",fa:["vec3"],ea:!1},{$:"node_out",ba:"xB",fa:["vec3"],ea:!1},{$:"node_out",ba:"xC",fa:["float"],ea:!1},{$:"node_out",ba:"xD",fa:["vec3"],ea:!1},{$:"node_out",ba:"xE",fa:["float"],ea:!1},{$:"node_out",ba:"xF",fa:["float"],ea:!1},{$:"node_out",ba:"xG",fa:["vec3"],ea:!1},{$:"node_out",ba:"xJ",fa:["vec3"],ea:!1},{$:"node_out",ba:"xK",fa:["float"],ea:!1},{$:"node_out",ba:"xL",fa:["vec3"],ea:!1},{$:"node_out",
ba:"xM",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"xJ = xv * xu ; xF = _0_0 ; xK = _1_0 ; xG = ox ; xA ; xB ; xC ; xD ; xE ; xL ; xM ;".split(" ")}]},{$:"node",ba:"AMBIENT_OCCLUSION",ma:[],la:[{$:"node_in",ba:"xN",fa:["vec3"],ea:!1},{$:"node_out",ba:"xO",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"xO [ 0 ] = xO [ 1 ] = xO [ 2 ] = _0_0 ; xN ;".split(" ")}]},{$:"node",ba:"HOLDOUT",ma:[],la:[{$:"node_out",ba:"xP",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"xP [ 0 ] = xP [ 1 ] = xP [ 2 ] = _0_0 ;".split(" ")}]},{$:"node",
ba:"VOLUME_ABSORPTION",ma:[],la:[{$:"node_in",ba:"xQ",fa:["vec3"],ea:!1},{$:"node_in",ba:"xR",fa:["float"],ea:!1},{$:"node_out",ba:"xS",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"xS [ 0 ] = xS [ 1 ] = xS [ 2 ] = _0_0 ; xQ ; xR ;".split(" ")}]},{$:"node",ba:"VOLUME_SCATTER",ma:[],la:[{$:"node_in",ba:"xT",fa:["vec3"],ea:!1},{$:"node_in",ba:"xU",fa:["float"],ea:!1},{$:"node_in",ba:"xV",fa:["float"],ea:!1},{$:"node_out",ba:"xW",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"xW [ 0 ] = xW [ 1 ] = xW [ 2 ] = _0_0 ; xT ; xU ; xV ;".split(" ")}]},
{$:"node",ba:"BUMP",ma:[],la:[{$:"node_in",ba:"Ib",fa:["float"],ea:!1},{$:"node_in",ba:"Ic",fa:["float"],ea:!1},{$:"node_in",ba:"xZ",fa:["float"],ea:!1},{$:"node_in",ba:"Id",fa:["vec3"],ea:!1},{$:"node_out",ba:"ya",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"ya = Id ; Ib ; Ic ; xZ ;".split(" ")}]},{$:"node",ba:"DISPLACEMENT_BUMP",ma:[],la:[{$:"node_in",ba:"yh",fa:["float"],ea:!1},{$:"node_out",ba:"yi",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"yi = ox ; yh ;".split(" ")}]},{$:"node",ba:"NORMAL_MAP",ma:[{$:"node_var",
ba:"SPACE",aa:["NM_TANGENT"]},{$:"node_var",ba:"USE_NORMAL_IN",aa:["0"]}],la:[{$:"node_in",ba:"yj",fa:["float"],ea:!1},{$:"node_in",ba:"yk",fa:["vec4"],ea:!1},{$:"node_in",ba:"yl",fa:["vec3"],ea:!1},{$:"node_out",ba:"ym",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_NORMAL_IN"],ja:[{$:"txt",aa:["vec3","yn","=","yl",";"]}]},{$:"node_else",ja:[{$:"txt",aa:["vec3","yn","=","sM",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["SPACE","NM_TANGENT",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"ym = 2.0 * yk . xyz - _1_0 ; ym = sQ * ym ;".split(" ")}]},
{$:"node_elif",ga:["SPACE","NM_OBJECT",{$:"equal_expr",ia:2},"SPACE","NM_BLENDER_OBJECT",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ja:[{$:"txt",aa:"ym = 2.0 * yk . xyz - _1_0 ; ym . yz *= - _1_0 ; ym = bI ( u_model_tsr , ym ) ;".split(" ")}]},{$:"node_elif",ga:["SPACE","NM_WORLD",{$:"equal_expr",ia:2},"SPACE","NM_BLENDER_WORLD",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ja:[{$:"txt",aa:"ym = 2.0 * yk . xyz - _1_0 ; ym . yz *= - _1_0 ;".split(" ")}]}]},{$:"txt",aa:"float me = max ( yj , _0_0 ) ; ym = normalize ( mix ( yn , ym , me ) ) ;".split(" ")}]},
{$:"node",ba:"VECT_TRANSFORM",ma:[{$:"node_var",ba:"CONVERT_TYPE",aa:["VT_WORLD_TO_OBJECT"]},{$:"node_var",ba:"VECTOR_TYPE",aa:["VT_VECTOR"]}],la:[{$:"node_in",ba:"yo",fa:["vec3"],ea:!1},{$:"node_out",ba:"yp",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["CONVERT_TYPE","VT_WORLD_TO_WORLD",{$:"equal_expr",ia:2},"CONVERT_TYPE","VT_OBJECT_TO_OBJECT",{$:"equal_expr",ia:2},"CONVERT_TYPE","VT_CAMERA_TO_CAMERA",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:3}],ja:[{$:"txt",aa:["yp","=","yo",
";"]}]},{$:"node_else",ja:[{$:"node_cond",da:[{$:"node_if",ga:["VECTOR_TYPE","VT_POINT",{$:"equal_expr",ia:2}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["CONVERT_TYPE","VT_WORLD_TO_CAMERA",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = ap ( u_view_tsr_frag , yo ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_WORLD_TO_OBJECT",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = ap ( u_model_tsr_inverse , yo ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_OBJECT_TO_WORLD",{$:"equal_expr",ia:2}],
ja:[{$:"txt",aa:"yp = ap ( u_model_tsr , yo ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_OBJECT_TO_CAMERA",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = ap ( u_model_tsr , yo ) ; yp = ap ( u_view_tsr_frag , yp ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_CAMERA_TO_WORLD",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = ap ( u_view_tsr_inverse , yo ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_CAMERA_TO_OBJECT",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = ap ( u_view_tsr_inverse , yo ) ; yp = ap ( u_model_tsr_inverse , yp ) ;".split(" ")}]}]}]},
{$:"node_else",ja:[{$:"node_cond",da:[{$:"node_if",ga:["CONVERT_TYPE","VT_WORLD_TO_CAMERA",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = _ ( u_view_tsr_frag , yo ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_WORLD_TO_OBJECT",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = _ ( u_model_tsr_inverse , yo ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_OBJECT_TO_WORLD",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = _ ( u_model_tsr , yo ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE",
"VT_OBJECT_TO_CAMERA",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = _ ( u_model_tsr , yo ) ; yp = _ ( u_view_tsr_frag , yp ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_CAMERA_TO_WORLD",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = _ ( u_view_tsr_inverse , yo ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_CAMERA_TO_OBJECT",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = _ ( u_view_tsr_inverse , yo ) ; yp = _ ( u_model_tsr_inverse , yp ) ;".split(" ")}]}]}]}]},{$:"node_cond",da:[{$:"node_if",
ga:["VECTOR_TYPE","VT_NORMAL",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"yp = normalize ( yp ) ;".split(" ")}]}]}]}]}]},{$:"node",ba:"BLACKBODY",ma:[],la:[{$:"node_in",ba:"yq",fa:["float"],ea:!1},{$:"node_out",ba:"yr",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"yr [ 0 ] = yr [ 1 ] = yr [ 2 ] = _0_0 ; yq ;".split(" ")}]},{$:"node",ba:"WAVELENGTH",ma:[],la:[{$:"node_in",ba:"ys",fa:["float"],ea:!1},{$:"node_out",ba:"yt",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"yt [ 0 ] = yt [ 1 ] = yt [ 2 ] = _0_0 ; ys ;".split(" ")}]},
{$:"node",ba:"SEPXYZ",ma:[],la:[{$:"node_in",ba:"yu",fa:["vec3"],ea:!1},{$:"node_out",ba:"yv",fa:["float"],ea:!1},{$:"node_out",ba:"yA",fa:["float"],ea:!1},{$:"node_out",ba:"yB",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"yv = yu [ 0 ] ; yA = yu [ 1 ] ; yB = yu [ 2 ] ;".split(" ")}]},{$:"node",ba:"COMBXYZ",ma:[],la:[{$:"node_in",ba:"yC",fa:["float"],ea:!1},{$:"node_in",ba:"yD",fa:["float"],ea:!1},{$:"node_in",ba:"yE",fa:["float"],ea:!1},{$:"node_out",ba:"yF",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"yF [ 0 ] = yC ; yF [ 1 ] = yD ; yF [ 2 ] = yE ;".split(" ")}]},
{$:"node",ba:"BRIGHTCONTRAST",ma:[],la:[{$:"node_in",ba:"yG",fa:["vec3"],ea:!1},{$:"node_in",ba:"yH",fa:["float"],ea:!1},{$:"node_in",ba:"yI",fa:["float"],ea:!1},{$:"node_out",ba:"yJ",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float b = yH - yI * _0_5 ; yJ = max ( ( _1_0 + yI ) * yG + b , vec3 ( _0_0 ) ) ;".split(" ")}]},{$:"node",ba:"LIGHT_FALLOFF",ma:[],la:[{$:"node_in",ba:"yK",fa:["float"],ea:!1},{$:"node_in",ba:"yL",fa:["float"],ea:!1},{$:"node_out",ba:"yM",fa:["float"],ea:!1},{$:"node_out",ba:"yN",
fa:["float"],ea:!1},{$:"node_out",ba:"yO",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"yM = yN = yO = _0_0 ; yK ; yL ;".split(" ")}]},{$:"node",ba:"TEX_IMAGE",ma:[],la:[{$:"node_in",ba:"Ie",fa:["vec3"],ea:!1},{$:"node_out",ba:"If",fa:["vec3"],ea:!1},{$:"node_out",ba:"Ig",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"If [ 0 ] = If [ 1 ] = If [ 2 ] = _0_0 ; Ig = _1_0 ; Ie ;".split(" ")}]},{$:"node",ba:"TEX_ENVIRONMENT",ma:[],la:[{$:"node_in",ba:"Ih",fa:["vec3"],ea:!1},{$:"node_out",ba:"Ii",fa:["vec3"],ea:!1}],ja:[{$:"txt",
aa:"Ii [ 0 ] = Ii [ 1 ] = Ii [ 2 ] = _0_0 ; Ih ;".split(" ")}]},{$:"node",ba:"TEX_SKY",ma:[],la:[{$:"node_in",ba:"yP",fa:["vec3"],ea:!1},{$:"node_out",ba:"yQ",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"yQ [ 0 ] = yQ [ 1 ] = yQ [ 2 ] = _0_0 ; yP ;".split(" ")}]},{$:"node",ba:"TEX_NOISE",ma:[],la:[{$:"node_in",ba:"yR",fa:["vec3"],ea:!1},{$:"node_in",ba:"yS",fa:["float"],ea:!1},{$:"node_in",ba:"yT",fa:["float"],ea:!1},{$:"node_in",ba:"yU",fa:["float"],ea:!1},{$:"node_out",ba:"yV",fa:["vec3"],ea:!1},{$:"node_out",
ba:"yW",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"yV [ 0 ] = yV [ 1 ] = yV [ 2 ] = _0_0 ; yW = _1_0 ; yR ; yS ; yT ; yU ;".split(" ")}]},{$:"node",ba:"TEX_WAVE",ma:[],la:[{$:"node_in",ba:"yX",fa:["vec3"],ea:!1},{$:"node_in",ba:"yY",fa:["float"],ea:!1},{$:"node_in",ba:"yZ",fa:["float"],ea:!1},{$:"node_in",ba:"y_",fa:["float"],ea:!1},{$:"node_in",ba:"za",fa:["float"],ea:!1},{$:"node_out",ba:"zb",fa:["vec3"],ea:!1},{$:"node_out",ba:"zc",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"zb [ 0 ] = zb [ 1 ] = zb [ 2 ] = _0_0 ; zc = _1_0 ; yX ; yY ; yZ ; y_ ; za ;".split(" ")}]},
{$:"node",ba:"TEX_VORONOI",ma:[],la:[{$:"node_in",ba:"zd",fa:["vec3"],ea:!1},{$:"node_in",ba:"ze",fa:["float"],ea:!1},{$:"node_out",ba:"zf",fa:["vec3"],ea:!1},{$:"node_out",ba:"zg",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"zf [ 0 ] = zf [ 1 ] = zf [ 2 ] = _0_0 ; zg = _1_0 ; zd ; ze ;".split(" ")}]},{$:"node",ba:"TEX_MUSGRAVE",ma:[],la:[{$:"node_in",ba:"zh",fa:["vec3"],ea:!1},{$:"node_in",ba:"zi",fa:["float"],ea:!1},{$:"node_in",ba:"zj",fa:["float"],ea:!1},{$:"node_in",ba:"zk",fa:["float"],ea:!1},{$:"node_in",
ba:"zl",fa:["float"],ea:!1},{$:"node_in",ba:"zm",fa:["float"],ea:!1},{$:"node_in",ba:"zn",fa:["float"],ea:!1},{$:"node_out",ba:"zo",fa:["vec3"],ea:!1},{$:"node_out",ba:"zp",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"zo [ 0 ] = zo [ 1 ] = zo [ 2 ] = _0_0 ; zp = _1_0 ; zh ; zi ; zj ; zk ; zl ; zm ; zn ;".split(" ")}]},{$:"node",ba:"TEX_GRADIENT",ma:[],la:[{$:"node_in",ba:"zq",fa:["vec3"],ea:!1},{$:"node_out",ba:"zr",fa:["vec3"],ea:!1},{$:"node_out",ba:"zs",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"zr [ 0 ] = zr [ 1 ] = zr [ 2 ] = _0_0 ; zs = _1_0 ; zq ;".split(" ")}]},
{$:"node",ba:"TEX_MAGIC",ma:[],la:[{$:"node_in",ba:"zt",fa:["vec3"],ea:!1},{$:"node_in",ba:"zu",fa:["float"],ea:!1},{$:"node_in",ba:"zv",fa:["float"],ea:!1},{$:"node_out",ba:"zA",fa:["vec3"],ea:!1},{$:"node_out",ba:"zB",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"zA [ 0 ] = zA [ 1 ] = zA [ 2 ] = _0_0 ; zB = _1_0 ; zt ; zu ; zv ;".split(" ")}]},{$:"node",ba:"TEX_CHECKER",ma:[],la:[{$:"node_in",ba:"zC",fa:["vec3"],ea:!1},{$:"node_in",ba:"zD",fa:["vec3"],ea:!1},{$:"node_in",ba:"zE",fa:["vec3"],ea:!1},{$:"node_in",
ba:"zF",fa:["float"],ea:!1},{$:"node_out",ba:"zG",fa:["vec3"],ea:!1},{$:"node_out",ba:"zH",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"zG [ 0 ] = zG [ 1 ] = zG [ 2 ] = _0_0 ; zH = _1_0 ; zC ; zD ; zE ; zF ;".split(" ")}]},{$:"node",ba:"TEX_BRICK",ma:[],la:[{$:"node_in",ba:"zI",fa:["vec3"],ea:!1},{$:"node_in",ba:"zJ",fa:["vec3"],ea:!1},{$:"node_in",ba:"zK",fa:["vec3"],ea:!1},{$:"node_in",ba:"zL",fa:["vec3"],ea:!1},{$:"node_in",ba:"zM",fa:["float"],ea:!1},{$:"node_in",ba:"zN",fa:["float"],ea:!1},{$:"node_in",
ba:"zO",fa:["float"],ea:!1},{$:"node_in",ba:"zP",fa:["float"],ea:!1},{$:"node_in",ba:"zQ",fa:["float"],ea:!1},{$:"node_out",ba:"zR",fa:["vec3"],ea:!1},{$:"node_out",ba:"zS",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"zR [ 0 ] = zR [ 1 ] = zR [ 2 ] = _0_0 ; zS = _1_0 ; zI ; zJ ; zK ; zL ; zM ; zN ; zO ; zP ; zQ ;".split(" ")}]},{$:"node",ba:"ADD_SHADER",ma:[],la:[{$:"node_in",ba:"zT",fa:["vec3"],ea:!1},{$:"node_in",ba:"zU",fa:["vec3"],ea:!1},{$:"node_out",ba:"zV",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"zV = clamp ( zT + zU , vec3 ( _0_0 ) , vec3 ( _1_0 ) ) ;".split(" ")}]},
{$:"node",ba:"MIX_SHADER",ma:[],la:[{$:"node_in",ba:"zW",fa:["float"],ea:!1},{$:"node_in",ba:"zX",fa:["vec3"],ea:!1},{$:"node_in",ba:"zY",fa:["vec3"],ea:!1},{$:"node_in",ba:"zZ",fa:["vec3"],ea:!1},{$:"node_in",ba:"z_",fa:["float"],ea:!1},{$:"node_in",ba:"Aa",fa:["vec3"],ea:!1},{$:"node_in",ba:"Ab",fa:["float"],ea:!1},{$:"node_in",ba:"Ac",fa:["float"],ea:!1},{$:"node_in",ba:"Ad",fa:["vec3"],ea:!1},{$:"node_in",ba:"Ag",fa:["vec3"],ea:!1},{$:"node_in",ba:"Ah",fa:["float"],ea:!1},{$:"node_in",ba:"Ai",
fa:["vec3"],ea:!1},{$:"node_in",ba:"Aj",fa:["float"],ea:!1},{$:"node_in",ba:"Ak",fa:["vec3"],ea:!1},{$:"node_in",ba:"Al",fa:["float"],ea:!1},{$:"node_in",ba:"Am",fa:["vec3"],ea:!1},{$:"node_in",ba:"An",fa:["float"],ea:!1},{$:"node_in",ba:"Ao",fa:["float"],ea:!1},{$:"node_in",ba:"Ap",fa:["vec3"],ea:!1},{$:"node_in",ba:"As",fa:["vec3"],ea:!1},{$:"node_in",ba:"At",fa:["float"],ea:!1},{$:"node_in",ba:"Au",fa:["vec3"],ea:!1},{$:"node_in",ba:"Av",fa:["float"],ea:!1},{$:"node_out",ba:"Aw",fa:["vec3"],ea:!1},
{$:"node_out",ba:"Ax",fa:["vec3"],ea:!1},{$:"node_out",ba:"Ay",fa:["float"],ea:!1},{$:"node_out",ba:"Az",fa:["vec3"],ea:!1},{$:"node_out",ba:"AA",fa:["float"],ea:!1},{$:"node_out",ba:"AB",fa:["float"],ea:!1},{$:"node_out",ba:"AC",fa:["vec3"],ea:!1},{$:"node_out",ba:"AF",fa:["vec3"],ea:!1},{$:"node_out",ba:"AG",fa:["float"],ea:!1},{$:"node_out",ba:"AH",fa:["vec3"],ea:!1},{$:"node_out",ba:"AI",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( zW , _0_0 , _1_0 ) ; Ax = mix ( zZ , Ak , AJ ) ; Ay = mix ( z_ , Al , AJ ) ; if ( Ac > _0_0 ) { if ( Ao > _0_0 ) { Az = mix ( Aa , Am , AJ ) ; AA = mix ( Ab , An , AJ ) ; } else { Az = Aa ; AA = Ab ; } } else { Az = Am ; AA = An ; } if ( Ah > _0_0 ) { if ( At > _0_0 ) { AF = mix ( Ag , As , AJ ) ; } else { AF = Ag ; } } else { AF = As ; } AB = mix ( Ac , Ao , AJ ) ; AC = mix ( Ad , Ap , AJ ) ; AG = mix ( Ah , At , AJ ) ; AH = mix ( Ai , Au , AJ ) ; AI = mix ( Aj , Av , AJ ) ;".split(" ")}]},
{$:"node",ba:"UV_MERGED",ma:[],la:[{$:"node_out",ba:"AK",fa:["vec3"],ea:!1},{$:"node_out",ba:"AL",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_AK"],ja:[{$:"txt",aa:"AK = sn ( A ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_AL"],ja:[{$:"txt",aa:"AL = vec3 ( A , _0_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"TEX_COORD_UV",ma:[],la:[{$:"node_out",ba:"AM",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"AM = vec3 ( A , _0_0 ) ;".split(" ")}]},{$:"node",ba:"TEX_COORD_NO",ma:[],
la:[{$:"node_out",ba:"AN",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:["AN","=","ox",";"]}]},{$:"node",ba:"TEX_COORD_GE",ma:[],la:[{$:"node_out",ba:"AO",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"AO = vec3 ( A , _0_0 ) ;".split(" ")}]},{$:"node",ba:"TEX_COORD_OB",ma:[],la:[{$:"node_out",ba:"AP",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"AP [ 0 ] = AP [ 1 ] = AP [ 2 ] = _1_0 ;".split(" ")}]},{$:"node",ba:"TEX_COORD_CA",ma:[],la:[{$:"node_out",ba:"AQ",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"AQ [ 0 ] = sR [ 0 ] ; AQ [ 1 ] = sR [ 1 ] ; AQ [ 2 ] = _1_0 ;".split(" ")}]},
{$:"node",ba:"TEX_COORD_WI",ma:[],la:[{$:"node_out",ba:"AR",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"AR [ 0 ] = AR [ 1 ] = AR [ 2 ] = _1_0 ;".split(" ")}]},{$:"node",ba:"TEX_COORD_RE",ma:[],la:[{$:"node_out",ba:"AS",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"AS [ 0 ] = AS [ 1 ] = AS [ 2 ] = _1_0 ;".split(" ")}]},{$:"node",ba:"UVMAP",ma:[],la:[{$:"node_out",ba:"AT",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"AT = vec3 ( A , _0_0 ) ;".split(" ")}]},{$:"node",ba:"PARTICLE_INFO",ma:[],la:[{$:"node_out",ba:"AU",fa:["float"],
ea:!1},{$:"node_out",ba:"AV",fa:["float"],ea:!1},{$:"node_out",ba:"AW",fa:["float"],ea:!1},{$:"node_out",ba:"AX",fa:["vec3"],ea:!1},{$:"node_out",ba:"AY",fa:["float"],ea:!1},{$:"node_out",ba:"AZ",fa:["vec3"],ea:!1},{$:"node_out",ba:"A_",fa:["vec3"],ea:!1},{$:"node_param",ba:"HY",fa:["GLSL_IN","vec4"],ea:!0},{$:"node_param",ba:"HZ",fa:["GLSL_IN","vec3"],ea:!0},{$:"node_param",ba:"H_",fa:["GLSL_IN","vec3"],ea:!0},{$:"node_param",ba:"Ia",fa:["GLSL_IN","vec3"],ea:!0}],ja:[{$:"node_cond",da:[{$:"node_if",
ga:["PARTICLE_BATCH"],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_AU"],ja:[{$:"txt",aa:"AU = HY [ 0 ] ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_AV"],ja:[{$:"txt",aa:"AV = HY [ 1 ] ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_AW"],ja:[{$:"txt",aa:"AW = HY [ 2 ] ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_AX"],ja:[{$:"txt",aa:["AX","=","HZ",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_AY"],ja:[{$:"txt",aa:"AY = HY [ 3 ] ;".split(" ")}]}]},
{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_AZ"],ja:[{$:"txt",aa:["AZ","=","H_",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_A_"],ja:[{$:"txt",aa:["A_","=","Ia",";"]}]}]}]},{$:"node_else",ja:[{$:"txt",aa:"AU = _0_0 ; AV = _0_0 ; AW = _0_0 ; AX = vec3 ( _0_0 ) ; AY = _0_0 ; AZ = AX ; A_ = AX ;".split(" ")}]}]}]},{$:"node",ba:"HAIR_INFO",ma:[],la:[{$:"node_out",ba:"Ba",fa:["float"],ea:!1},{$:"node_out",ba:"Bb",fa:["float"],ea:!1},{$:"node_out",ba:"Bc",fa:["float"],ea:!1},{$:"node_out",ba:"Bd",
fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"Ba = _0_0 ; Bb = _0_0 ; Bc = _0_0 ; Bd = vec3 ( _0_0 ) ;".split(" ")}]},{$:"node",ba:"OBJECT_INFO",ma:[],la:[{$:"node_out",ba:"Be",fa:["vec3"],ea:!1},{$:"node_out",ba:"Bf",fa:["float"],ea:!1},{$:"node_out",ba:"Bg",fa:["float"],ea:!1},{$:"node_out",ba:"Bh",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Bf = _0_0 ; Bg = _0_0 ; Bh = _0_0 ; Be = vec3 ( _0_0 ) ;".split(" ")}]},{$:"node",ba:"WIREFRAME",ma:[],la:[{$:"node_in",ba:"Bi",fa:["float"],ea:!1},{$:"node_out",ba:"Bj",
fa:["float"],ea:!1}],ja:[{$:"txt",aa:["Bj","=","Bi",";"]}]},{$:"node",ba:"TANGENT",ma:[],la:[{$:"node_out",ba:"Bk",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"Bk = vec3 ( _0_0 ) ;".split(" ")}]},{$:"node",ba:"LAYER_WEIGHT",ma:[],la:[{$:"node_in",ba:"Ij",fa:["float"],ea:!1},{$:"node_in",ba:"Ik",fa:["vec3"],ea:!1},{$:"node_out",ba:"Bn",fa:["float"],ea:!1},{$:"node_out",ba:"Bo",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Bn = Bo = _0_0 ; Ik ; Ij ;".split(" ")}]},{$:"node",ba:"LIGHT_PATH",ma:[],la:[{$:"node_out",
ba:"Bq",fa:["float"],ea:!1},{$:"node_out",ba:"Br",fa:["float"],ea:!1},{$:"node_out",ba:"Bs",fa:["float"],ea:!1},{$:"node_out",ba:"Bt",fa:["float"],ea:!1},{$:"node_out",ba:"Bu",fa:["float"],ea:!1},{$:"node_out",ba:"Bv",fa:["float"],ea:!1},{$:"node_out",ba:"Bw",fa:["float"],ea:!1},{$:"node_out",ba:"Bx",fa:["float"],ea:!1},{$:"node_out",ba:"By",fa:["float"],ea:!1},{$:"node_out",ba:"Bz",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Bq = Br = Bs = _0_0 ; Bt = Bu = Bv = _0_0 ; Bw = Bw = By = Bz = _0_0 ; Bx = _0_0 ;".split(" ")}]},
{$:"node",ba:"ATTRIBUTE",ma:[],la:[{$:"node_out",ba:"BB",fa:["vec3"],ea:!1},{$:"node_out",ba:"BC",fa:["vec3"],ea:!1},{$:"node_out",ba:"BD",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"BB = BC = vec3 ( _0_0 ) ; BD = _0_0 ;".split(" ")}]},{$:"node",ba:"SCRIPT",ma:[],la:[],ja:[]},{$:"node",ba:"CURVE_VEC",ma:[{$:"node_var",ba:"READ_R",aa:["0"]},{$:"node_var",ba:"READ_G",aa:["0"]},{$:"node_var",ba:"READ_B",aa:["0"]},{$:"node_var",ba:"NODE_TEX_ROW",aa:["0.0"]}],la:[{$:"node_in",ba:"BE",fa:["float"],ea:!1},{$:"node_in",
ba:"BF",fa:["vec3"],ea:!1},{$:"node_out",ba:"BG",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:["BG","=","BF",";"]},{$:"node_cond",da:[{$:"node_if",ga:["READ_R"],ja:[{$:"txt",aa:"BG . r = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * BF . r + _0_5 , NODE_TEX_ROW ) ) . r - _0_5 ) * 2.0 ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["READ_G"],ja:[{$:"txt",aa:"BG . g = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * BF . g + _0_5 , NODE_TEX_ROW ) ) . g - _0_5 ) * 2.0 ;".split(" ")}]}]},{$:"node_cond",
da:[{$:"node_if",ga:["READ_B"],ja:[{$:"txt",aa:"BG . b = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * BF . b + _0_5 , NODE_TEX_ROW ) ) . b - _0_5 ) * 2.0 ;".split(" ")}]}]},{$:"txt",aa:"BG = mix ( BF , BG , BE ) ;".split(" ")}]},{$:"node",ba:"CURVE_RGB",ma:[{$:"node_var",ba:"READ_A",aa:["0"]},{$:"node_var",ba:"READ_R",aa:["0"]},{$:"node_var",ba:"READ_G",aa:["0"]},{$:"node_var",ba:"READ_B",aa:["0"]},{$:"node_var",ba:"NODE_TEX_ROW",aa:["_0_0"]}],la:[{$:"node_in",ba:"BH",fa:["float"],ea:!1},{$:"node_in",
ba:"BI",fa:["vec3"],ea:!1},{$:"node_out",ba:"BJ",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["READ_A"],ja:[{$:"txt",aa:"float r = GLSL_TEXTURE ( u_nodes_texture , vec2 ( BI . r , NODE_TEX_ROW ) ) . a ; float g = GLSL_TEXTURE ( u_nodes_texture , vec2 ( BI . g , NODE_TEX_ROW ) ) . a ; float b = GLSL_TEXTURE ( u_nodes_texture , vec2 ( BI . b , NODE_TEX_ROW ) ) . a ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"float r = BI . r ; float g = BI . g ; float b = BI . b ;".split(" ")}]}]},
{$:"node_cond",da:[{$:"node_if",ga:["READ_R"],ja:[{$:"txt",aa:"BJ . r = GLSL_TEXTURE ( u_nodes_texture , vec2 ( r , NODE_TEX_ROW ) ) . r ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"BJ . r = r ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["READ_G"],ja:[{$:"txt",aa:"BJ . g = GLSL_TEXTURE ( u_nodes_texture , vec2 ( g , NODE_TEX_ROW ) ) . g ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"BJ . g = g ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["READ_B"],ja:[{$:"txt",aa:"BJ . b = GLSL_TEXTURE ( u_nodes_texture , vec2 ( b , NODE_TEX_ROW ) ) . b ;".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"BJ . b = b ;".split(" ")}]}]},{$:"txt",aa:"BJ = mix ( BI , BJ , BH ) ;".split(" ")}]},{$:"node",ba:"VALTORGB",ma:[{$:"node_var",ba:"NODE_TEX_ROW",aa:["_0_0"]}],la:[{$:"node_in",ba:"BK",fa:["float"],ea:!1},{$:"node_out",ba:"BL",fa:["vec3"],ea:!1},{$:"node_out",ba:"BM",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"vec4 BN = GLSL_TEXTURE ( u_nodes_texture , vec2 ( BK , NODE_TEX_ROW ) ) ; BL = BN . rgb ; BM = BN . a ;".split(" ")}]},{$:"node",ba:"MAPPING",ma:[{$:"node_var",ba:"MAPPING_SCALE_DEF",
aa:["0"]},{$:"node_var",ba:"MAPPING_SCALE",aa:["vec3","(","_1_0",")"]},{$:"node_var",ba:"MAPPING_TRANS_DEF",aa:["0"]},{$:"node_var",ba:"MAPPING_TRANS",aa:["vec3","(","_0_0",")"]},{$:"node_var",ba:"MAPPING_TRS_MATRIX_DEF",aa:["0"]},{$:"node_var",ba:"MAPPING_TRS_MATRIX",aa:["mat4","(","_1_0",")"]},{$:"node_var",ba:"MAPPING_MIN_CLIP_DEF",aa:["0"]},{$:"node_var",ba:"MAPPING_MIN_CLIP",aa:["vec3","(","_0_0",")"]},{$:"node_var",ba:"MAPPING_MAX_CLIP_DEF",aa:["0"]},{$:"node_var",ba:"MAPPING_MAX_CLIP",aa:["vec3",
"(","_1_0",")"]},{$:"node_var",ba:"MAPPING_IS_NORMAL",aa:["0"]}],la:[{$:"node_in",ba:"BO",fa:["vec3"],ea:!1},{$:"node_out",ba:"BP",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:["BP","=","BO",";"]},{$:"node_cond",da:[{$:"node_if",ga:["MAPPING_SCALE_DEF"],ja:[{$:"txt",aa:"BP = BP * MAPPING_SCALE ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["MAPPING_TRANS_DEF"],ja:[{$:"txt",aa:"BP = BP + MAPPING_TRANS ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["MAPPING_TRS_MATRIX_DEF"],ja:[{$:"txt",aa:"BP = ( MAPPING_TRS_MATRIX * vec4 ( BP , _1_0 ) ) . xyz ;".split(" ")}]}]},
{$:"node_cond",da:[{$:"node_if",ga:["MAPPING_MIN_CLIP_DEF"],ja:[{$:"txt",aa:"BP = max ( BP , MAPPING_MIN_CLIP ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["MAPPING_MAX_CLIP_DEF"],ja:[{$:"txt",aa:"BP = min ( BP , MAPPING_MAX_CLIP ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["MAPPING_IS_NORMAL"],ja:[{$:"txt",aa:"BP = normalize ( BP ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_ADD",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"BQ",fa:["float"],ea:!1},{$:"node_in",
ba:"BR",fa:["float"],ea:!1},{$:"node_out",ba:"BS",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"BS = BQ + BR ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"BS = clamp ( BS , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_SUBTRACT",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"BT",fa:["float"],ea:!1},{$:"node_in",ba:"BU",fa:["float"],ea:!1},{$:"node_out",ba:"BV",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"BV = BT - BU ;".split(" ")},{$:"node_cond",
da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"BV = clamp ( BV , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_MULTIPLY",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"BW",fa:["float"],ea:!1},{$:"node_in",ba:"BX",fa:["float"],ea:!1},{$:"node_out",ba:"BY",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"BY = BW * BX ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"BY = clamp ( BY , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_DIVIDE",
ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"BZ",fa:["float"],ea:!1},{$:"node_in",ba:"B_",fa:["float"],ea:!1},{$:"node_out",ba:"Ca",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Ca = ( B_ != _0_0 ) ? BZ / B_ : _0_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Ca = clamp ( Ca , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_SINE",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Cb",fa:["float"],ea:!1},{$:"node_in",
ba:"Cc",fa:["float"],ea:!1},{$:"node_out",ba:"Cd",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Cd = sin ( Cb ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Cd = clamp ( Cd , _0_0 , _1_0 ) ;".split(" ")}]}]},{$:"txt",aa:["Cc",";"]}]},{$:"node",ba:"MATH_COSINE",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Ce",fa:["float"],ea:!1},{$:"node_in",ba:"Cf",fa:["float"],ea:!1},{$:"node_out",ba:"Cg",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Cg = cos ( Ce ) ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Cg = clamp ( Cg , _0_0 , _1_0 ) ;".split(" ")}]}]},{$:"txt",aa:["Cf",";"]}]},{$:"node",ba:"MATH_TANGENT",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Ch",fa:["float"],ea:!1},{$:"node_in",ba:"Ci",fa:["float"],ea:!1},{$:"node_out",ba:"Cj",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Cj = tan ( Ch ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Cj = clamp ( Cj , _0_0 , _1_0 ) ;".split(" ")}]}]},
{$:"txt",aa:["Ci",";"]}]},{$:"node",ba:"MATH_ARCSINE",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Ck",fa:["float"],ea:!1},{$:"node_in",ba:"Cl",fa:["float"],ea:!1},{$:"node_out",ba:"Cm",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Cm = ( Ck <= _1_0 && Ck >= - _1_0 ) ? asin ( Ck ) : _0_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Cm = clamp ( Cm , _0_0 , _1_0 ) ;".split(" ")}]}]},{$:"txt",aa:["Cl",";"]}]},{$:"node",ba:"MATH_ARCCOSINE",ma:[{$:"node_var",
ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Cn",fa:["float"],ea:!1},{$:"node_in",ba:"Co",fa:["float"],ea:!1},{$:"node_out",ba:"Cp",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Cp = ( Cn <= _1_0 && Cn >= - _1_0 ) ? acos ( Cn ) : _0_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Cp = clamp ( Cp , _0_0 , _1_0 ) ;".split(" ")}]}]},{$:"txt",aa:["Co",";"]}]},{$:"node",ba:"MATH_ARCTANGENT",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Cq",
fa:["float"],ea:!1},{$:"node_in",ba:"Cr",fa:["float"],ea:!1},{$:"node_out",ba:"Cs",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Cs = atan ( Cq ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Cs = clamp ( Cs , _0_0 , _1_0 ) ;".split(" ")}]}]},{$:"txt",aa:["Cr",";"]}]},{$:"node",ba:"MATH_POWER",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Ct",fa:["float"],ea:!1},{$:"node_in",ba:"Cu",fa:["float"],ea:!1},{$:"node_out",ba:"Cv",fa:["float"],ea:!1}],
ja:[{$:"txt",aa:"if ( Ct < _0_0 && Cu != floor ( Cu ) ) Cv = _0_0 ; else if ( Cu == _0_0 ) Cv = _1_0 ; else if ( Ct < _0_0 ) Cv = mix ( _1_0 , - _1_0 , sign ( mod ( - Cu , 2.0 ) ) ) * pow ( - Ct , Cu ) ; else if ( Ct == _0_0 ) Cv = _0_0 ; else Cv = pow ( Ct , Cu ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Cv = clamp ( Cv , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_LOGARITHM",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Cw",
fa:["float"],ea:!1},{$:"node_in",ba:"Cx",fa:["float"],ea:!1},{$:"node_out",ba:"Cy",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Cy = ( Cw > _0_0 && Cx > _0_0 ) ? log2 ( Cw ) / log2 ( Cx ) : _0_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Cy = clamp ( Cy , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_MINIMUM",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Cz",fa:["float"],ea:!1},{$:"node_in",ba:"CA",fa:["float"],ea:!1},{$:"node_out",
ba:"CB",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"CB = min ( Cz , CA ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"CB = clamp ( CB , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_MAXIMUM",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"CC",fa:["float"],ea:!1},{$:"node_in",ba:"CD",fa:["float"],ea:!1},{$:"node_out",ba:"CE",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"CE = max ( CC , CD ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],
ja:[{$:"txt",aa:"CE = clamp ( CE , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_ROUND",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"CF",fa:["float"],ea:!1},{$:"node_in",ba:"CG",fa:["float"],ea:!1},{$:"node_out",ba:"CH",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"CH = floor ( CF + _0_5 ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"CH = clamp ( CH , _0_0 , _1_0 ) ;".split(" ")}]}]},{$:"txt",aa:["CG",";"]}]},{$:"node",ba:"MATH_LESS_THAN",
ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"CI",fa:["float"],ea:!1},{$:"node_in",ba:"CJ",fa:["float"],ea:!1},{$:"node_out",ba:"CK",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"CK = ( CI < CJ ) ? _1_0 : _0_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"CK = clamp ( CK , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_GREATER_THAN",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"CL",fa:["float"],ea:!1},{$:"node_in",
ba:"CM",fa:["float"],ea:!1},{$:"node_out",ba:"CN",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"CN = ( CL > CM ) ? _1_0 : _0_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"CN = clamp ( CN , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_MODULO",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"CO",fa:["float"],ea:!1},{$:"node_in",ba:"CP",fa:["float"],ea:!1},{$:"node_out",ba:"CQ",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"CQ = abs ( CP ) > 0.000001 ? mod ( CO , CP ) : _0_0 ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"CQ = clamp ( CQ , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_ABSOLUTE",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"CR",fa:["float"],ea:!1},{$:"node_in",ba:"CS",fa:["float"],ea:!1},{$:"node_out",ba:"CT",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"CT = abs ( CR ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"CT = clamp ( CT , _0_0 , _1_0 ) ;".split(" ")}]}]},
{$:"txt",aa:["CS",";"]}]},{$:"node",ba:"MIX_RGB_MIX",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"CU",fa:["float"],ea:!1},{$:"node_in",ba:"CV",fa:["vec3"],ea:!1},{$:"node_in",ba:"CW",fa:["vec3"],ea:!1},{$:"node_out",ba:"CX",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( CU , _0_0 , _1_0 ) ; CX = mix ( CV , CW , AJ ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"CX = clamp ( CX , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",
ba:"MIX_RGB_ADD",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"CY",fa:["float"],ea:!1},{$:"node_in",ba:"CZ",fa:["vec3"],ea:!1},{$:"node_in",ba:"C_",fa:["vec3"],ea:!1},{$:"node_out",ba:"Da",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( CY , _0_0 , _1_0 ) ; Da = mix ( CZ , CZ + C_ , AJ ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Da = clamp ( Da , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_MULTIPLY",ma:[{$:"node_var",
ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Db",fa:["float"],ea:!1},{$:"node_in",ba:"Dc",fa:["vec3"],ea:!1},{$:"node_in",ba:"Dd",fa:["vec3"],ea:!1},{$:"node_out",ba:"De",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( Db , _0_0 , _1_0 ) ; De = mix ( Dc , Dc * Dd , AJ ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"De = clamp ( De , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_SUBTRACT",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",
aa:["0"]}],la:[{$:"node_in",ba:"Df",fa:["float"],ea:!1},{$:"node_in",ba:"Dg",fa:["vec3"],ea:!1},{$:"node_in",ba:"Dh",fa:["vec3"],ea:!1},{$:"node_out",ba:"Di",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( Df , _0_0 , _1_0 ) ; Di = mix ( Dg , Dg - Dh , AJ ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Di = clamp ( Di , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_SCREEN",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",
ba:"Dj",fa:["float"],ea:!1},{$:"node_in",ba:"Dk",fa:["vec3"],ea:!1},{$:"node_in",ba:"Dl",fa:["vec3"],ea:!1},{$:"node_out",ba:"Dm",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( Dj , _0_0 , _1_0 ) ; float Dn = _1_0 - AJ ; Dm = vec3 ( _1_0 ) - ( vec3 ( Dn ) + AJ * ( vec3 ( _1_0 ) - Dl ) ) * ( vec3 ( _1_0 ) - Dk ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Dm = clamp ( Dm , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_DIVIDE",ma:[{$:"node_var",
ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Do",fa:["float"],ea:!1},{$:"node_in",ba:"Dp",fa:["vec3"],ea:!1},{$:"node_in",ba:"Dq",fa:["vec3"],ea:!1},{$:"node_out",ba:"Dr",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( Do , _0_0 , _1_0 ) ; float Dn = _1_0 - AJ ; Dq += step ( Dq , vec3 ( _0_0 ) ) ; Dr = Dn * Dp + AJ * Dp / Dq ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Dr = clamp ( Dr , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_DIFFERENCE",
ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Ds",fa:["float"],ea:!1},{$:"node_in",ba:"Dt",fa:["vec3"],ea:!1},{$:"node_in",ba:"Du",fa:["vec3"],ea:!1},{$:"node_out",ba:"Dv",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( Ds , _0_0 , _1_0 ) ; Dv = mix ( Dt , abs ( Dt - Du ) , AJ ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Dv = clamp ( Dv , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_DARKEN",ma:[{$:"node_var",
ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Dw",fa:["float"],ea:!1},{$:"node_in",ba:"Dx",fa:["vec3"],ea:!1},{$:"node_in",ba:"Dy",fa:["vec3"],ea:!1},{$:"node_out",ba:"Dz",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( Dw , _0_0 , _1_0 ) ; Dz = min ( Dx . rgb , Dy . rgb * AJ ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Dz = clamp ( Dz , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_LIGHTEN",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",
aa:["0"]}],la:[{$:"node_in",ba:"DA",fa:["float"],ea:!1},{$:"node_in",ba:"DB",fa:["vec3"],ea:!1},{$:"node_in",ba:"DC",fa:["vec3"],ea:!1},{$:"node_out",ba:"DD",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( DA , _0_0 , _1_0 ) ; DD = max ( DB . rgb , DC . rgb * AJ ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"DD = clamp ( DD , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_OVERLAY",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",
ba:"DE",fa:["float"],ea:!1},{$:"node_in",ba:"DF",fa:["vec3"],ea:!1},{$:"node_in",ba:"DG",fa:["vec3"],ea:!1},{$:"node_out",ba:"DH",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( DE , _0_0 , _1_0 ) ; vec3 DI = vec3 ( _1_0 - AJ ) ; DH = mix ( DF * ( DI + 2.0 * AJ * DG ) , vec3 ( _1_0 ) - ( DI + 2.0 * AJ * ( vec3 ( _1_0 ) - DG ) ) * ( vec3 ( _1_0 ) - DF ) , step ( _0_5 , DF ) ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"DH = clamp ( DH , _0_0 , _1_0 ) ;".split(" ")}]}]}]},
{$:"node",ba:"MIX_RGB_DODGE",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"DJ",fa:["float"],ea:!1},{$:"node_in",ba:"DK",fa:["vec3"],ea:!1},{$:"node_in",ba:"DL",fa:["vec3"],ea:!1},{$:"node_out",ba:"DM",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( DJ , _0_0 , _1_0 ) ; vec3 DN = vec3 ( _1_0 ) - AJ * DL ; vec3 DO = clamp ( DK / DN , _0_0 , _1_0 ) ; DM = mix ( mix ( DO , vec3 ( _1_0 ) , step ( DN , vec3 ( _0_0 ) ) ) , DK , step ( DK , vec3 ( _0_0 ) ) ) ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"DM = clamp ( DM , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_BURN",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"DP",fa:["float"],ea:!1},{$:"node_in",ba:"DQ",fa:["vec3"],ea:!1},{$:"node_in",ba:"DR",fa:["vec3"],ea:!1},{$:"node_out",ba:"DS",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( DP , _0_0 , _1_0 ) ; vec3 ks = vec3 ( _1_0 - AJ ) ; vec3 DN = ks + AJ * DR ; vec3 DO = clamp ( vec3 ( _1_0 ) - ( vec3 ( _1_0 ) - DQ ) / DN , _0_0 , _1_0 ) ; DS = mix ( DO , vec3 ( _0_0 ) , step ( DN , vec3 ( _0_0 ) ) ) ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"DS = clamp ( DS , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_HUE",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"DT",fa:["float"],ea:!1},{$:"node_in",ba:"DU",fa:["vec3"],ea:!1},{$:"node_in",ba:"DV",fa:["vec3"],ea:!1},{$:"node_out",ba:"DW",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( DT , _0_0 , _1_0 ) ; vec3 kk , DX , DN ; DW = DU ; DX = kj ( DV ) ; if ( DX . y != _0_0 ) { kk = kj ( DW ) ; kk . x = DX . x ; DN = kl ( kk ) ; DW = mix ( DW , DN , AJ ) ; }".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"DW = clamp ( DW , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_SATURATION",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"DY",fa:["float"],ea:!1},{$:"node_in",ba:"DZ",fa:["vec3"],ea:!1},{$:"node_in",ba:"D_",fa:["vec3"],ea:!1},{$:"node_out",ba:"Ea",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( DY , _0_0 , _1_0 ) ; float Dn = _1_0 - AJ ; Ea = DZ ; vec3 kk , DX ; kk = kj ( Ea ) ; if ( kk . y != _0_0 ) { DX = kj ( D_ ) ; kk . y = Dn * kk . y + AJ * DX . y ; Ea = kl ( kk ) ; }".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Ea = clamp ( Ea , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_VALUE",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Eb",fa:["float"],ea:!1},{$:"node_in",ba:"Ec",fa:["vec3"],ea:!1},{$:"node_in",ba:"Ed",fa:["vec3"],ea:!1},{$:"node_out",ba:"Ee",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( Eb , _0_0 , _1_0 ) ; float Dn = _1_0 - AJ ; vec3 kk , DX ; kk = kj ( Ec ) ; DX = kj ( Ed ) ; kk . z = Dn * kk . z + AJ * DX . z ; Ee = kl ( kk ) ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Ee = clamp ( Ee , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_COLOR",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Ef",fa:["float"],ea:!1},{$:"node_in",ba:"Eg",fa:["vec3"],ea:!1},{$:"node_in",ba:"Eh",fa:["vec3"],ea:!1},{$:"node_out",ba:"Ei",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( Ef , _0_0 , _1_0 ) ; vec3 kk , DX , DN ; Ei = Eg ; DX = kj ( Eh ) ; if ( DX . y != _0_0 ) { kk = kj ( Ei ) ; kk . x = DX . x ; kk . y = DX . y ; DN = kl ( kk ) ; Ei = mix ( Ei , DN , AJ ) ; }".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Ei = clamp ( Ei , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_SOFT_LIGHT",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Ej",fa:["float"],ea:!1},{$:"node_in",ba:"Ek",fa:["vec3"],ea:!1},{$:"node_in",ba:"El",fa:["vec3"],ea:!1},{$:"node_out",ba:"Em",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( Ej , _0_0 , _1_0 ) ; float Dn = _1_0 - AJ ; vec3 En = El + Ek - El * Ek ; Em = Ek * ( vec3 ( Dn ) + vec3 ( AJ ) * ( ( vec3 ( _1_0 ) - Ek ) * El + En ) ) ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Em = clamp ( Em , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_LINEAR_LIGHT",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Eo",fa:["float"],ea:!1},{$:"node_in",ba:"Ep",fa:["vec3"],ea:!1},{$:"node_in",ba:"Eq",fa:["vec3"],ea:!1},{$:"node_out",ba:"Er",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float AJ = clamp ( Eo , _0_0 , _1_0 ) ; Er = Ep + AJ * ( 2.0 * Eq - vec3 ( _1_0 ) ) ;".split(" ")},{$:"node_cond",
da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Er = clamp ( Er , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"OUTPUT",ma:[],la:[{$:"node_in",ba:"EA",fa:["vec3"],ea:!1},{$:"node_in",ba:"EB",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"E = EA ; I = EB ;".split(" ")}]},{$:"node",ba:"OUTPUT_SURFACE",ma:[],la:[{$:"node_in",ba:"EC",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"E = EC ; I = _1_0 ;".split(" ")}]},{$:"node",ba:"MATERIAL_BEGIN",ma:[{$:"node_var",ba:"MATERIAL_EXT",aa:["0"]},{$:"node_var",ba:"USE_MATERIAL_NORMAL",
aa:["0"]},{$:"node_var",ba:"USE_MATERIAL_DIFFUSE",aa:["0"]},{$:"node_var",ba:"SHADELESS_MAT",aa:["0"]}],la:[{$:"node_in",ba:"EF",fa:["vec3"],ea:!1},{$:"node_in",ba:"EG",fa:["vec3"],ea:!1},{$:"node_in",ba:"EH",fa:["float"],ea:!1},{$:"node_in",ba:"EI",fa:["vec3"],ea:!0},{$:"node_in",ba:"EJ",fa:["float"],ea:!0},{$:"node_out",ba:"EK",fa:["vec3"],ea:!1},{$:"node_out",ba:"EL",fa:["vec3"],ea:!1},{$:"node_out",ba:"EM",fa:["vec3"],ea:!1},{$:"node_out",ba:"EN",fa:["vec3"],ea:!1},{$:"node_out",ba:"EO",fa:["vec3"],
ea:!1},{$:"node_out",ba:"EP",fa:["vec2"],ea:!1},{$:"node_out",ba:"EQ",fa:["vec2"],ea:!1},{$:"node_out",ba:"ER",fa:["vec4"],ea:!1},{$:"node_param",ba:"sF",fa:["const","vec2"],ea:!0},{$:"node_param",ba:"sG",fa:["const","vec3"],ea:!1}],ja:[{$:"txt",aa:"EM = clamp ( EF , _0_0 , _1_0 ) ; EN = sG [ 0 ] * clamp ( EG , _0_0 , _1_0 ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_MATERIAL_NORMAL"],ja:[{$:"txt",aa:"EO = normalize ( EI ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:["EO","=","ox",
";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["SHADELESS_MAT",{$:"logic_negative_expr",ia:1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["MATERIAL_EXT"],ja:[{$:"txt",aa:"EK = EJ * EM ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"EK = sS * EM ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_MATERIAL_DIFFUSE"],ja:[{$:"txt",aa:["EM","*=","EH",";"]}]}]},{$:"txt",aa:"EL = sT * u_environment_energy * cE ( EO ) ; ER = vec4 ( _1_0 ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["NUM_LIGHTS",
0,{$:"g_expr",ia:2}],ja:[{$:"txt",aa:"EP = vec2 ( sF [ 0 ] , sF [ 1 ] ) ; EQ = vec2 ( sG [ 1 ] , sG [ 2 ] ) ;".split(" ")}]}]},{$:"txt",aa:["H","=","ER",";"]}]},{$:"node_else",ja:[{$:"txt",aa:"EK = vec3 ( _0_0 ) ; EL = vec3 ( _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATERIAL_END",ma:[{$:"node_var",ba:"MATERIAL_EXT",aa:["0"]},{$:"node_var",ba:"USE_MATERIAL_DIFFUSE",aa:["0"]},{$:"node_var",ba:"USE_MATERIAL_SPECULAR",aa:["0"]}],la:[{$:"node_in",ba:"ES",fa:["vec4"],ea:!1},{$:"node_in",ba:"ET",fa:["vec3"],
ea:!1},{$:"node_in",ba:"EU",fa:["vec3"],ea:!1},{$:"node_in",ba:"EV",fa:["float"],ea:!0},{$:"node_in",ba:"EW",fa:["float"],ea:!0},{$:"node_in",ba:"EX",fa:["float"],ea:!0},{$:"node_out",ba:"EY",fa:["vec3"],ea:!0},{$:"node_out",ba:"EZ",fa:["float"],ea:!0},{$:"node_out",ba:"E_",fa:["vec3"],ea:!0},{$:"node_out",ba:"Fa",fa:["vec3"],ea:!0},{$:"node_out",ba:"Fb",fa:["vec3"],ea:!0},{$:"node_param",ba:"sH",fa:["float"],ea:!1},{$:"node_param",ba:"sI",fa:["float"],ea:!1}],ja:[{$:"txt",aa:["EV",";"]},{$:"node_cond",
da:[{$:"node_if",ga:["USE_OUT_EY"],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_MATERIAL_DIFFUSE"],ja:[{$:"txt",aa:"EY = ES . rgb ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"EY = vec3 ( _0_0 ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_MATERIAL_SPECULAR"],ja:[{$:"txt",aa:["EY","+=","ET",";"]}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_E_"],ja:[{$:"txt",aa:["E_","=","EU",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["MATERIAL_EXT"],ja:[{$:"node_cond",da:[{$:"node_if",
ga:["USE_OUT_Fa"],ja:[{$:"txt",aa:"Fa = ES . rgb ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fb"],ja:[{$:"txt",aa:["Fb","=","ET",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_EZ"],ja:[{$:"txt",aa:"EZ = clamp ( EX , _0_0 , _1_0 ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_MATERIAL_SPECULAR"],ja:[{$:"txt",aa:"float t = max ( max ( ET . r , ET . g ) , ET . b ) * EW ; EZ = clamp ( EX * ( _1_0 - t ) + t , _0_0 , _1_0 ) ;".split(" ")}]}]}]}]}]},{$:"node_else",ja:[{$:"node_cond",
da:[{$:"node_if",ga:["USE_OUT_EZ"],ja:[{$:"txt",aa:"EZ = clamp ( sH , _0_0 , _1_0 ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_MATERIAL_SPECULAR"],ja:[{$:"txt",aa:"float t = max ( max ( ET . r , ET . g ) , ET . b ) * sI ; EZ = sH * ( _1_0 - t ) + t ;".split(" ")}]}]}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_MATERIAL_SPECULAR"],ja:[{$:"txt",aa:["F","=","ET",";"]}]},{$:"node_else",ja:[{$:"txt",aa:"F = vec3 ( _0_0 ) ;".split(" ")}]}]},{$:"txt",aa:["G","=","EU",";"]}]},{$:"node",
ba:"LIGHTING_AMBIENT",ma:[],la:[{$:"node_in",ba:"oP",fa:["vec3"],ea:!1},{$:"node_in",ba:"oQ",fa:["vec3"],ea:!1},{$:"node_in",ba:"oR",fa:["vec3"],ea:!1},{$:"node_out",ba:"oS",fa:["vec4"],ea:!1},{$:"node_out",ba:"oT",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"oS = vec4 ( oP + oR * oQ , _0_0 ) ; oT = vec3 ( _0_0 ) ;".split(" ")}]},{$:"node",ba:"LIGHTING_LAMP",ma:[{$:"node_var",ba:"LAMP_TYPE",aa:["HEMI"]},{$:"node_var",ba:"LAMP_IND",aa:["0"]},{$:"node_var",ba:"LAMP_SPOT_SIZE",aa:["0.8"]},{$:"node_var",ba:"LAMP_SPOT_BLEND",
aa:["0.03"]},{$:"node_var",ba:"LAMP_LIGHT_DIST",aa:["30.0"]},{$:"node_var",ba:"LAMP_SHADOW_MAP_IND",aa:["-","1"]}],la:[{$:"node_in",ba:"oU",fa:["vec4"],ea:!1},{$:"node_out",ba:"oV",fa:["vec3"],ea:!1},{$:"node_out",ba:"oW",fa:["vec2"],ea:!1},{$:"node_out",ba:"oX",fa:["vec3"],ea:!1},{$:"node_out",ba:"oY",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"oW = vec2 ( u_light_positions [ LAMP_IND ] . w , u_light_color_intensities [ LAMP_IND ] . w ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_TYPE","HEMI",
{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:["oY","=","_0_5",";"]}]},{$:"node_else",ja:[{$:"txt",aa:["oY","=","_0_0",";"]}]}]},{$:"txt",aa:"oX = u_light_color_intensities [ LAMP_IND ] . xyz ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_SHADOW_MAP_IND",1,{$:"negative_expr",ia:1},{$:"non_equal_expr",ia:2}],ja:[{$:"txt",aa:"oX *= oU [ LAMP_SHADOW_MAP_IND ] ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_TYPE","SPOT",{$:"equal_expr",ia:2},"LAMP_TYPE","POINT",{$:"equal_expr",ia:2},{$:"logical_or_expr",
ia:2}],ja:[{$:"txt",aa:"vec3 oZ = u_light_positions [ LAMP_IND ] . xyz ; oV = oZ - ow ; float aM = length ( oV ) ; oX *= LAMP_LIGHT_DIST / ( LAMP_LIGHT_DIST + aM * aM ) ; oV = normalize ( oV ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_TYPE","SPOT",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"vec3 pa = u_light_directions [ LAMP_IND ] ; float pb = dot ( oV , pa ) ; pb *= smoothstep ( _0_0 , _1_0 , ( pb - LAMP_SPOT_SIZE ) / LAMP_SPOT_BLEND ) ; oX *= pb ;".split(" ")}]}]}]},{$:"node_else",ja:[{$:"txt",
aa:"oV = u_light_directions [ LAMP_IND ] ;".split(" ")}]}]}]},{$:"node",ba:"DIFFUSE_FRESNEL",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pc",fa:["vec3"],ea:!1},{$:"node_in",ba:"pd",fa:["vec2"],ea:!1},{$:"node_in",ba:"pe",fa:["vec3"],ea:!1},{$:"node_in",ba:"pf",fa:["float"],ea:!1},{$:"node_in",ba:"pg",fa:["vec2"],ea:!1},{$:"node_out",ba:"ph",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pi = cross ( pc , k . xyz ) ; pe = cross ( pi , k . xyz ) ; pe = - normalize ( pe ) ;".split(" ")}]}]},
{$:"txt",aa:"ph = _0_0 ; if ( pd . r != _0_0 ) { float pj = ( _1_0 - pf ) * dot ( pe , pc ) + pf ; if ( pg [ 0 ] == _0_0 ) { ph = _1_0 ; } else { float t = _1_0 + abs ( pj ) ; t = pg [ 1 ] + ( _1_0 - pg [ 1 ] ) * pow ( t , pg [ 0 ] ) ; ph = clamp ( t , _0_0 , _1_0 ) ; } ph = max ( ph , _0_0 ) ; }".split(" ")}]},{$:"node",ba:"DIFFUSE_LAMBERT",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pk",fa:["vec3"],ea:!1},{$:"node_in",ba:"pl",fa:["vec2"],ea:!1},{$:"node_in",ba:"pm",
fa:["vec3"],ea:!1},{$:"node_in",ba:"pn",fa:["float"],ea:!1},{$:"node_out",ba:"po",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pi = cross ( pk , k . xyz ) ; pm = cross ( pi , k . xyz ) ; pm = - normalize ( pm ) ;".split(" ")}]}]},{$:"txt",aa:"po = _0_0 ; if ( pl . r != _0_0 ) { float pj = ( _1_0 - pn ) * dot ( pm , pk ) + pn ; po = max ( pj , _0_0 ) ; }".split(" ")}]},{$:"node",ba:"DIFFUSE_OREN_NAYAR",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",
aa:["0"]}],la:[{$:"node_in",ba:"pr",fa:["vec3"],ea:!1},{$:"node_in",ba:"pu",fa:["vec2"],ea:!1},{$:"node_in",ba:"pv",fa:["vec3"],ea:!1},{$:"node_in",ba:"pw",fa:["float"],ea:!1},{$:"node_in",ba:"px",fa:["vec2"],ea:!1},{$:"node_out",ba:"py",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pi = cross ( pr , k . xyz ) ; pv = cross ( pi , k . xyz ) ; pv = - normalize ( pv ) ;".split(" ")}]}]},{$:"txt",aa:"py = _0_0 ; if ( pu . r != _0_0 ) { float pj = ( _1_0 - pw ) * dot ( pv , pr ) + pw ; if ( px [ 0 ] > _0_0 ) { float pz = max ( dot ( pv , oy ) , _0_0 ) ; float pA = px [ 0 ] * px [ 0 ] ; float cG = _1_0 - _0_5 * ( pA / ( pA + 0.33 ) ) ; vec3 pB = pr - pj * pv ; vec3 pC = oy - pz * pv ; if ( length ( pB ) == _0_0 || length ( pC ) == _0_0 || abs ( pj ) > _1_0 || abs ( pz ) > _1_0 ) py = pj * cG ; else { float pD = acos ( pj ) ; float pE = acos ( pz ) ; vec3 pF = normalize ( pB ) ; vec3 pG = normalize ( pC ) ; float a , b ; a = max ( pD , pE ) ; b = min ( pD , pE ) ; b *= 0.95 ; float t = max ( dot ( pF , pG ) , _0_0 ) ; float hS = 0.45 * ( pA / ( pA + 0.09 ) ) ; py = pj * ( cG + ( hS * t * sin ( a ) * tan ( b ) ) ) ; } } else py = pj ; py = max ( py , _0_0 ) ; }".split(" ")}]},
{$:"node",ba:"DIFFUSE_MINNAERT",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pH",fa:["vec3"],ea:!1},{$:"node_in",ba:"pI",fa:["vec2"],ea:!1},{$:"node_in",ba:"pJ",fa:["vec3"],ea:!1},{$:"node_in",ba:"pK",fa:["float"],ea:!1},{$:"node_in",ba:"pL",fa:["vec2"],ea:!1},{$:"node_out",ba:"pM",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pi = cross ( pH , k . xyz ) ; pJ = cross ( pi , k . xyz ) ; pJ = - normalize ( pJ ) ;".split(" ")}]}]},
{$:"txt",aa:"pM = _0_0 ; if ( pI . r != _0_0 ) { float pj = ( _1_0 - pK ) * dot ( pJ , pH ) + pK ; float pz = max ( dot ( pJ , oy ) , _0_0 ) ; if ( pL [ 0 ] <= _1_0 ) pM = pj * pow ( max ( pz * pj , 0.1 ) , pL [ 0 ] - _1_0 ) ; else pM = pj * pow ( 1.0001 - pz , pL [ 0 ] - _1_0 ) ; pM = max ( pM , _0_0 ) ; }".split(" ")}]},{$:"node",ba:"DIFFUSE_TOON",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pN",fa:["vec3"],ea:!1},{$:"node_in",ba:"pO",fa:["vec2"],ea:!1},{$:"node_in",
ba:"pP",fa:["vec3"],ea:!1},{$:"node_in",ba:"pQ",fa:["float"],ea:!1},{$:"node_in",ba:"pR",fa:["vec2"],ea:!1},{$:"node_out",ba:"pS",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pi = cross ( pN , k . xyz ) ; pP = cross ( pi , k . xyz ) ; pP = - normalize ( pP ) ;".split(" ")}]}]},{$:"txt",aa:"pS = _0_0 ; if ( pO . r != _0_0 ) { float pj = ( _1_0 - pQ ) * dot ( pP , pN ) + pQ ; float pT = acos ( pj ) ; if ( pT < pR [ 0 ] ) pS = _1_0 ; else if ( pT > ( pR [ 0 ] + pR [ 1 ] ) || pR [ 1 ] == _0_0 ) pS = _0_0 ; else pS = _1_0 - ( ( pT - pR [ 0 ] ) / pR [ 1 ] ) ; pS = max ( pS , _0_0 ) ; }".split(" ")}]},
{$:"node",ba:"SPECULAR_PHONG",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pU",fa:["vec3"],ea:!1},{$:"node_in",ba:"pV",fa:["vec2"],ea:!1},{$:"node_in",ba:"pW",fa:["vec3"],ea:!1},{$:"node_in",ba:"pX",fa:["float"],ea:!1},{$:"node_in",ba:"pY",fa:["vec2"],ea:!1},{$:"node_out",ba:"pZ",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"pZ = _0_0 ; if ( pV . g == _1_0 ) { vec3 p_ = normalize ( pU + oy ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",
aa:"if ( pX == _0_0 ) { pZ = dot ( k . xyz , p_ ) ; pZ = sqrt ( _1_0 - pZ * pZ ) ; }".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"pZ = ( _1_0 - pX ) * max ( dot ( pW , p_ ) , _0_0 ) + pX ;".split(" ")}]}]},{$:"txt",aa:"pZ = pow ( pZ , pY [ 0 ] ) ; }".split(" ")}]},{$:"node",ba:"SPECULAR_COOKTORR",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"qa",fa:["vec3"],ea:!1},{$:"node_in",ba:"qb",fa:["vec2"],ea:!1},{$:"node_in",ba:"qc",fa:["vec3"],ea:!1},{$:"node_in",ba:"qd",fa:["float"],
ea:!1},{$:"node_in",ba:"qe",fa:["vec2"],ea:!1},{$:"node_out",ba:"qf",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"qf = _0_0 ; if ( qb . g != _0_0 ) { vec3 p_ = normalize ( qa + oy ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"if ( qd == _0_0 ) { qf = dot ( B . xyz , p_ ) ; qf = sqrt ( _1_0 - qf * qf ) ; }".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"qf = max ( dot ( qc , p_ ) , _0_0 ) ; qf = ( _1_0 - qd ) * qf + qd ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",
ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"float pz = max ( dot ( B . xyz , oy ) , _0_0 ) ; pz = sqrt ( _1_0 - pz * pz ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"float pz = max ( dot ( qc , oy ) , _0_0 ) ;".split(" ")}]}]},{$:"txt",aa:"qf = pow ( qf , qe [ 0 ] ) ; qf = qf / ( 0.1 + pz ) ; }".split(" ")}]},{$:"node",ba:"SPECULAR_WARDISO",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"qg",fa:["vec3"],ea:!1},{$:"node_in",ba:"qh",fa:["vec2"],ea:!1},{$:"node_in",ba:"qi",
fa:["vec3"],ea:!1},{$:"node_in",ba:"qj",fa:["float"],ea:!1},{$:"node_in",ba:"qk",fa:["vec2"],ea:!1},{$:"node_out",ba:"ql",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"ql = _0_0 ; if ( qh . g == _1_0 ) { vec3 p_ = normalize ( qg + oy ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"float qm = _0_0 ; float pz = _0_0 ; float qn = _0_0 ; if ( qj == _0_0 ) { qm = dot ( k . xyz , p_ ) ; pz = dot ( k . xyz , oy ) ; qn = dot ( k . xyz , qg ) ; qm = sqrt ( _1_0 - qm * qm ) ; pz = sqrt ( _1_0 - pz * pz ) ; qn = sqrt ( _1_0 - qn * qn ) ; }".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"float qm = max ( dot ( qi , p_ ) , 0.01 ) ; float pz = max ( dot ( qi , oy ) , 0.01 ) ; float qn = max ( dot ( qi , qg ) , 0.01 ) ;".split(" ")}]}]},{$:"txt",aa:"float bP = tan ( acos ( qm ) ) ; float L = max ( qk [ 0 ] , 0.01 ) ; ql = qn * ( _1_0 / ( 4.0 * M_PI * L * L ) ) * ( exp ( - ( bP * bP ) / ( L * L ) ) / ( sqrt ( pz * qn ) ) ) ; }".split(" ")}]},{$:"node",ba:"SPECULAR_TOON",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"qo",fa:["vec3"],
ea:!1},{$:"node_in",ba:"qr",fa:["vec2"],ea:!1},{$:"node_in",ba:"qu",fa:["vec3"],ea:!1},{$:"node_in",ba:"qv",fa:["float"],ea:!1},{$:"node_in",ba:"qw",fa:["vec2"],ea:!1},{$:"node_out",ba:"qx",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"qx = _0_0 ; if ( qr . g == _1_0 ) { vec3 co = normalize ( qo + oy ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"float qy = dot ( co , k . xyz ) ; float bP = qw [ 0 ] + qw [ 1 ] ; if ( qv == _0_0 ) bP = acos ( sqrt ( _1_0 - qy * qy ) ) ;".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"float bP = acos ( dot ( co , qu ) ) ;".split(" ")}]}]},{$:"txt",aa:"if ( bP < qw [ 0 ] ) qx = _1_0 ; else if ( bP >= qw [ 0 ] + qw [ 1 ] || qw [ 1 ] == _0_0 ) qx = _0_0 ; else qx = _1_0 - ( bP - qw [ 0 ] ) / qw [ 1 ] ; }".split(" ")}]},{$:"node",ba:"SPECULAR_BLINN",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"qz",fa:["vec3"],ea:!1},{$:"node_in",ba:"qA",fa:["vec2"],ea:!1},{$:"node_in",ba:"qB",fa:["vec3"],ea:!1},{$:"node_in",ba:"qC",fa:["float"],
ea:!1},{$:"node_in",ba:"qD",fa:["vec2"],ea:!1},{$:"node_out",ba:"qE",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"qE = _0_0 ; if ( qA . g == _1_0 ) { if ( qD [ 0 ] < _1_0 || qD [ 1 ] == _0_0 ) qE = _0_0 ; else { if ( qD [ 1 ] < 100.0 ) qD [ 1 ] = sqrt ( _1_0 / qD [ 1 ] ) ; else qD [ 1 ] = 10.0 / qD [ 1 ] ; vec3 p_ = normalize ( oy + qz ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"float qm = _0_0 ; if ( qC == _0_0 ) { float qH = dot ( k . xyz , p_ ) ; qm = sqrt ( _1_0 - qH * qH ) ; }".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"float qm = ( _1_0 - qC ) * max ( dot ( qB , p_ ) , _0_0 ) + qC ;".split(" ")}]}]},{$:"txt",aa:"if ( qm < _0_0 ) qE = _0_0 ; else { float pz = max ( dot ( qB , oy ) , 0.01 ) ; float qn = dot ( qB , qz ) ; if ( qn <= 0.01 ) qE = _0_0 ; else { float qI = max ( dot ( oy , p_ ) , 0.01 ) ; float a = _1_0 ; float b = ( 2.0 * qm * pz ) / qI ; float dx = ( 2.0 * qm * qn ) / qI ; float g = min ( min ( a , b ) , dx ) ; float p = sqrt ( pow ( qD [ 0 ] , 2.0 ) + pow ( qI , 2.0 ) - _1_0 ) ; float mm = pow ( p - qI , 2.0 ) / pow ( p + qI , 2.0 ) * ( _1_0 + pow ( qI * ( p + qI ) - _1_0 , 2.0 ) / pow ( qI * ( p - qI ) + _1_0 , 2.0 ) ) ; float pT = acos ( qm ) ; qE = max ( mm * g * exp ( - pow ( pT , 2.0 ) / ( 2.0 * pow ( qD [ 1 ] , 2.0 ) ) ) , _0_0 ) ; } } } }".split(" ")}]},
{$:"node",ba:"LIGHTING_APPLY",ma:[],la:[{$:"node_in",ba:"qJ",fa:["vec4"],ea:!1},{$:"node_in",ba:"qK",fa:["vec3"],ea:!1},{$:"node_in",ba:"qL",fa:["float"],ea:!1},{$:"node_in",ba:"qM",fa:["float"],ea:!1},{$:"node_in",ba:"qN",fa:["vec3"],ea:!1},{$:"node_in",ba:"qO",fa:["vec3"],ea:!1},{$:"node_in",ba:"qP",fa:["vec4"],ea:!1},{$:"node_in",ba:"qQ",fa:["vec3"],ea:!1},{$:"node_in",ba:"qR",fa:["vec3"],ea:!1},{$:"node_in",ba:"qS",fa:["vec3"],ea:!1},{$:"node_in",ba:"qT",fa:["float"],ea:!1},{$:"node_out",ba:"qU",
fa:["vec4"],ea:!1},{$:"node_out",ba:"qV",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_NODE_B4W_TRANSLUCENCY"],ja:[{$:"txt",aa:"if ( dot ( qN , qO ) * dot ( oy , qO ) < _0_0 ) { float Fc = qP . x ; float Fd = qP . y ; float Fe = qP . z ; float Ff = qP . w ; float Fg = clamp ( abs ( dot ( qN , qO ) ) , _0_0 , _1_0 ) ; float Fh = clamp ( dot ( oy , - qN ) , _0_0 , _1_0 ) ; float Fi = pow ( Fh , Fd ) ; qU = qJ + qT * vec4 ( qS * Fg * pow ( qQ , vec3 ( Fc ) ) , _1_0 ) ; qU += Fe * mix ( vec4 ( qQ , _1_0 ) , vec4 ( _1_0 ) , Ff ) * qT * vec4 ( qS * Fg * vec3 ( Fi ) , _1_0 ) ; } else { qU = qJ + vec4 ( qS * qQ * qL , qM ) ; }".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"qU = qJ + vec4 ( qS * qQ * qL , qM ) ;".split(" ")}]}]},{$:"txt",aa:"qV = qK + qS * qR * qM ;".split(" ")}]},{$:"node",ba:"RGB",ma:[{$:"node_var",ba:"RGB_IND",aa:["0"]}],la:[{$:"node_out",ba:"Fj",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"Fj = u_node_rgbs [ RGB_IND ] ;".split(" ")}]},{$:"node",ba:"RGBTOBW",ma:[],la:[{$:"node_in",ba:"Fk",fa:["vec3"],ea:!1},{$:"node_out",ba:"Fl",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Fl = dot ( Fk , vec3 ( 0.35 , 0.45 , 0.2 ) ) ;".split(" ")}]},
{$:"node",ba:"SEPRGB",ma:[],la:[{$:"node_in",ba:"Fm",fa:["vec3"],ea:!1},{$:"node_out",ba:"Fn",fa:["float"],ea:!0},{$:"node_out",ba:"Fo",fa:["float"],ea:!0},{$:"node_out",ba:"Fp",fa:["float"],ea:!0}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fn"],ja:[{$:"txt",aa:"Fn = Fm . r ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fo"],ja:[{$:"txt",aa:"Fo = Fm . g ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fp"],ja:[{$:"txt",aa:"Fp = Fm . b ;".split(" ")}]}]}]},{$:"node",
ba:"SEPHSV",ma:[],la:[{$:"node_in",ba:"Fq",fa:["vec3"],ea:!1},{$:"node_out",ba:"Fr",fa:["float"],ea:!0},{$:"node_out",ba:"Fs",fa:["float"],ea:!0},{$:"node_out",ba:"Ft",fa:["float"],ea:!0}],ja:[{$:"txt",aa:"vec3 Fu = kj ( Fq ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fr"],ja:[{$:"txt",aa:"Fr = Fu . r ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fs"],ja:[{$:"txt",aa:"Fs = Fu . g ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Ft"],ja:[{$:"txt",aa:"Ft = Fu . b ;".split(" ")}]}]}]},
{$:"node",ba:"SQUEEZE",ma:[],la:[{$:"node_in",ba:"Fv",fa:["float"],ea:!1},{$:"node_in",ba:"Fw",fa:["float"],ea:!1},{$:"node_in",ba:"Fx",fa:["float"],ea:!1},{$:"node_out",ba:"Fy",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Fy = _1_0 / ( _1_0 + pow ( 2.71828183 , - ( Fv - Fx ) * Fw ) ) ;".split(" ")}]},{$:"node",ba:"GAMMA",ma:[],la:[{$:"node_in",ba:"Fz",fa:["vec3"],ea:!1},{$:"node_in",ba:"FA",fa:["float"],ea:!1},{$:"node_out",ba:"FB",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"FB = Fz ; if ( FB . x > _0_0 ) FB . x = pow ( Fz . x , FA ) ; if ( FB . y > _0_0 ) FB . y = pow ( Fz . y , FA ) ; if ( FB . z > _0_0 ) FB . z = pow ( Fz . z , FA ) ;".split(" ")}]},
{$:"node",ba:"B4W_SRGB_TO_LINEAR",ma:[],la:[{$:"node_in",ba:"FC",fa:["vec3"],ea:!1},{$:"node_out",ba:"FD",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"FD = max ( vec3 ( _0_0 ) , FC ) ; FD = pow ( FD , vec3 ( 2.2 ) ) ;".split(" ")}]},{$:"node",ba:"B4W_LINEAR_TO_SRGB",ma:[],la:[{$:"node_in",ba:"FE",fa:["vec3"],ea:!1},{$:"node_out",ba:"FF",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"FF = max ( vec3 ( _0_0 ) , FE ) ; FF = pow ( FF , vec3 ( _1_0 / 2.2 ) ) ;".split(" ")}]},{$:"node",ba:"TEXTURE_EMPTY",ma:[],la:[{$:"node_out",
ba:"FG",fa:["vec3"],ea:!1},{$:"node_out",ba:"FH",fa:["vec3"],ea:!1},{$:"node_out",ba:"FI",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_FG"],ja:[{$:"txt",aa:"FG [ 2 ] = FG [ 1 ] = FG [ 0 ] = _0_0 ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_FH"],ja:[{$:"txt",aa:"FH [ 2 ] = FH [ 1 ] = FH [ 0 ] = _0_0 ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_FI"],ja:[{$:"txt",aa:["FI","=","_0_0",";"]}]}]}]},{$:"node",ba:"TEXTURE_ENVIRONMENT",ma:[],la:[{$:"node_in",
ba:"Il",fa:["vec3"],ea:!1},{$:"node_out",ba:"Im",fa:["vec3"],ea:!0},{$:"node_out",ba:"In",fa:["float"],ea:!0},{$:"node_param",ba:"node_TEXTURE_ENVIRONMENT_var_texture",fa:["uniform","samplerCube"],ea:!1}],ja:[{$:"txt",aa:"vec4 BN = GLSL_TEXTURE_CUBE ( node_TEXTURE_ENVIRONMENT_var_texture , Il ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Im"],ja:[{$:"txt",aa:"Im = BN . xyz ; bG ( Im ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_In"],ja:[{$:"txt",aa:"In = BN . w ;".split(" ")}]}]}]},
{$:"node",ba:"TEXTURE_COLOR",ma:[{$:"node_var",ba:"NON_COLOR",aa:["0"]},{$:"node_var",ba:"USE_uv2",aa:["0"]},{$:"node_var",ba:"USE_uv3",aa:["0"]},{$:"node_var",ba:"USE_uv4",aa:["0"]}],la:[{$:"node_in",ba:"FT",fa:["vec3"],ea:!0},{$:"node_in",ba:"FU",fa:["vec3"],ea:!0},{$:"node_in",ba:"FV",fa:["vec3"],ea:!0},{$:"node_in",ba:"FW",fa:["vec3"],ea:!0},{$:"node_out",ba:"FX",fa:["vec3"],ea:!0},{$:"node_out",ba:"FY",fa:["float"],ea:!0},{$:"node_out",ba:"FZ",fa:["vec3"],ea:!0},{$:"node_out",ba:"F_",fa:["float"],
ea:!0},{$:"node_out",ba:"Ga",fa:["vec3"],ea:!0},{$:"node_out",ba:"Gb",fa:["float"],ea:!0},{$:"node_out",ba:"Gc",fa:["vec3"],ea:!0},{$:"node_out",ba:"Gd",fa:["float"],ea:!0},{$:"node_param",ba:"node_TEXTURE_COLOR_var_texture",fa:["uniform","sampler2D"],ea:!1}],ja:[{$:"txt",aa:"vec4 BN = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , so ( FT ) ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_FX"],ja:[{$:"txt",aa:"FX = BN . xyz ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["NON_COLOR",
{$:"logic_negative_expr",ia:1}],ja:[{$:"txt",aa:["bG","(","FX",")",";"]}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_FY"],ja:[{$:"txt",aa:"FY = BN . w ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_uv2"],ja:[{$:"txt",aa:"BN = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , so ( FU ) ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_FZ"],ja:[{$:"txt",aa:"FZ = BN . xyz ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["NON_COLOR",{$:"logic_negative_expr",ia:1}],ja:[{$:"txt",
aa:["bG","(","FZ",")",";"]}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_F_"],ja:[{$:"txt",aa:"F_ = BN . w ;".split(" ")}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_uv3"],ja:[{$:"txt",aa:"BN = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , so ( FV ) ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Ga"],ja:[{$:"txt",aa:"Ga = BN . xyz ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["NON_COLOR",{$:"logic_negative_expr",ia:1}],ja:[{$:"txt",aa:["bG","(","Ga",")",";"]}]}]}]}]},
{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gb"],ja:[{$:"txt",aa:"Gb = BN . w ;".split(" ")}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_uv4"],ja:[{$:"txt",aa:"BN = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , so ( FW ) ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gc"],ja:[{$:"txt",aa:"Gc = BN . xyz ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["NON_COLOR",{$:"logic_negative_expr",ia:1}],ja:[{$:"txt",aa:["bG","(","Gc",")",";"]}]}]}]}]},{$:"node_cond",da:[{$:"node_if",
ga:["USE_OUT_Gd"],ja:[{$:"txt",aa:"Gd = BN . w ;".split(" ")}]}]}]}]}]},{$:"node",ba:"TEXTURE_NORMAL",ma:[{$:"node_var",ba:"USE_uv2",aa:["0"]},{$:"node_var",ba:"USE_uv3",aa:["0"]},{$:"node_var",ba:"USE_uv4",aa:["0"]}],la:[{$:"node_in",ba:"Ge",fa:["vec3"],ea:!0},{$:"node_in",ba:"Gf",fa:["vec3"],ea:!0},{$:"node_in",ba:"Gg",fa:["vec3"],ea:!0},{$:"node_in",ba:"Gh",fa:["vec3"],ea:!0},{$:"node_out",ba:"Gi",fa:["vec3"],ea:!0},{$:"node_out",ba:"Gj",fa:["float"],ea:!0},{$:"node_out",ba:"Gk",fa:["vec3"],ea:!0},
{$:"node_out",ba:"Gl",fa:["float"],ea:!0},{$:"node_out",ba:"Gm",fa:["vec3"],ea:!0},{$:"node_out",ba:"Gn",fa:["float"],ea:!0},{$:"node_out",ba:"Go",fa:["vec3"],ea:!0},{$:"node_out",ba:"Gp",fa:["float"],ea:!0},{$:"node_param",ba:"node_TEXTURE_NORMAL_var_texture",fa:["uniform","sampler2D"],ea:!1}],ja:[{$:"txt",aa:"vec4 BN = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , so ( Ge ) ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gi"],ja:[{$:"txt",aa:"Gi = normalize ( sO * ( BN . xyz - _0_5 ) ) ;".split(" ")}]}]},
{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gj"],ja:[{$:"txt",aa:"Gj = BN . w ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_uv2"],ja:[{$:"txt",aa:"BN = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , so ( Gf ) ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gk"],ja:[{$:"txt",aa:"Gk = normalize ( sO * ( BN . xyz - _0_5 ) ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gl"],ja:[{$:"txt",aa:"Gl = BN . w ;".split(" ")}]}]}]}]},{$:"node_cond",da:[{$:"node_if",
ga:["USE_uv3"],ja:[{$:"txt",aa:"BN = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , so ( Gg ) ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gm"],ja:[{$:"txt",aa:"Gm = normalize ( sO * ( BN . xyz - _0_5 ) ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gn"],ja:[{$:"txt",aa:"Gn = BN . w ;".split(" ")}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_uv4"],ja:[{$:"txt",aa:"BN = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , so ( Gh ) ) ;".split(" ")},{$:"node_cond",
da:[{$:"node_if",ga:["USE_OUT_Go"],ja:[{$:"txt",aa:"Go = normalize ( sO * ( BN . xyz - _0_5 ) ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gp"],ja:[{$:"txt",aa:"Gp = BN . w ;".split(" ")}]}]}]}]}]},{$:"node",ba:"VALUE",ma:[{$:"node_var",ba:"VALUE_ROW_IND",aa:["0"]},{$:"node_var",ba:"VALUE_COL_IND",aa:["0"]}],la:[{$:"node_out",ba:"Gq",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Gq = u_node_values [ VALUE_ROW_IND ] [ VALUE_COL_IND ] ;".split(" ")}]},{$:"node",ba:"VECT_MATH_ADD",ma:[],
la:[{$:"node_in",ba:"Gr",fa:["vec3"],ea:!1},{$:"node_in",ba:"Gs",fa:["vec3"],ea:!1},{$:"node_out",ba:"Gt",fa:["vec3"],ea:!1},{$:"node_out",ba:"Gu",fa:["float"],ea:!0}],ja:[{$:"txt",aa:"Gt = Gr + Gs ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gu"],ja:[{$:"txt",aa:"Gu = ( abs ( Gt [ 0 ] ) + abs ( Gt [ 1 ] ) + abs ( Gt [ 2 ] ) ) / 3.0 ;".split(" ")}]}]}]},{$:"node",ba:"VECT_MATH_SUBTRACT",ma:[],la:[{$:"node_in",ba:"Gv",fa:["vec3"],ea:!1},{$:"node_in",ba:"Gw",fa:["vec3"],ea:!1},{$:"node_out",
ba:"Gx",fa:["vec3"],ea:!1},{$:"node_out",ba:"Gy",fa:["float"],ea:!0}],ja:[{$:"txt",aa:"Gx = Gv - Gw ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gy"],ja:[{$:"txt",aa:"Gy = ( abs ( Gx [ 0 ] ) + abs ( Gx [ 1 ] ) + abs ( Gx [ 2 ] ) ) / 3.0 ;".split(" ")}]}]}]},{$:"node",ba:"VECT_MATH_AVERAGE",ma:[],la:[{$:"node_in",ba:"Gz",fa:["vec3"],ea:!1},{$:"node_in",ba:"GA",fa:["vec3"],ea:!1},{$:"node_out",ba:"GB",fa:["vec3"],ea:!1},{$:"node_out",ba:"GC",fa:["float"],ea:!0}],ja:[{$:"txt",aa:"GB = Gz + GA ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_GC"],ja:[{$:"txt",aa:"GC = length ( GB ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_GB"],ja:[{$:"txt",aa:"GB = normalize ( GB ) ;".split(" ")}]}]}]},{$:"node",ba:"VECT_MATH_DOT_PRODUCT",ma:[],la:[{$:"node_in",ba:"GD",fa:["vec3"],ea:!1},{$:"node_in",ba:"GE",fa:["vec3"],ea:!1},{$:"node_out",ba:"GF",fa:["vec3"],ea:!1},{$:"node_out",ba:"GG",fa:["float"],ea:!0}],ja:[{$:"txt",aa:"GF = vec3 ( _0_0 ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",
ga:["USE_OUT_GG"],ja:[{$:"txt",aa:"GG = dot ( GD , GE ) ;".split(" ")}]}]}]},{$:"node",ba:"VECT_MATH_CROSS_PRODUCT",ma:[],la:[{$:"node_in",ba:"GH",fa:["vec3"],ea:!1},{$:"node_in",ba:"GI",fa:["vec3"],ea:!1},{$:"node_out",ba:"GJ",fa:["vec3"],ea:!1},{$:"node_out",ba:"GK",fa:["float"],ea:!0}],ja:[{$:"txt",aa:"GJ = cross ( GH , GI ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_GK"],ja:[{$:"txt",aa:"GK = length ( GJ ) ;".split(" ")}]}]}]},{$:"node",ba:"VECT_MATH_NORMALIZE",ma:[],la:[{$:"node_in",
ba:"GL",fa:["vec3"],ea:!1},{$:"node_in",ba:"GM",fa:["vec3"],ea:!1},{$:"node_out",ba:"GN",fa:["vec3"],ea:!1},{$:"node_out",ba:"GO",fa:["float"],ea:!0}],ja:[{$:"txt",aa:"GN = normalize ( GL ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_GO"],ja:[{$:"txt",aa:"GO = length ( GL ) ;".split(" ")}]}]},{$:"txt",aa:["GM",";"]}]},{$:"node",ba:"B4W_REFLECT",ma:[],la:[{$:"node_in",ba:"GV",fa:["vec3"],ea:!1},{$:"node_in",ba:"GW",fa:["vec3"],ea:!1},{$:"node_out",ba:"GX",fa:["vec3"],ea:!1}],ja:[{$:"txt",
aa:"GX = reflect ( _ ( u_view_tsr_inverse , GV ) , GW ) ;".split(" ")}]},{$:"node",ba:"B4W_REFLECT_WORLD",ma:[],la:[{$:"node_in",ba:"GY",fa:["vec3"],ea:!1},{$:"node_out",ba:"GZ",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"vec3 Io = - oy . xyz ; GZ = reflect ( Io , GY ) ;".split(" ")}]},{$:"node",ba:"B4W_PARALLAX",ma:[],la:[{$:"node_in",ba:"G_",fa:["vec3"],ea:!1},{$:"node_in",ba:"Ha",fa:["float"],ea:!1},{$:"node_in",ba:"Hb",fa:["const","float"],ea:!1},{$:"node_in",ba:"Hc",fa:["const","float"],ea:!1},{$:"node_out",
ba:"Hd",fa:["vec3"],ea:!1},{$:"node_param",ba:"node_B4W_PARALLAX_var_texture",fa:["uniform","sampler2D"],ea:!1}],ja:[{$:"txt",aa:"float bS = length ( sR ) ; if ( bS < Hc ) { vec2 ce = so ( G_ ) ; float ci = clamp ( _0_5 * ( Hc - bS ) , _0_0 , _1_0 ) ; float hK = Ha * ci ; vec3 ck = normalize ( oy * sO ) ; float cl = _1_0 / Hb ; vec2 cm = ck . xy * hK / ( Hb * ck . z ) ; float cn = _1_0 ; float co = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , ce ) . a ; for ( float cq = 1.0 ; cq <= Hb ; cq ++ ) { if ( co < cn ) { cn -= cl ; ce -= cm ; co = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , ce ) . a ; } } vec2 cr = ce + cm ; float cs = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , cr ) . a - ( cn + cl ) ; float ct = co - cn ; float cu = ct / ( ct - cs ) ; ce = cu * cr + ( _1_0 - cu ) * ce ; Hd = sn ( ce ) ; } else Hd = G_ ;".split(" ")}]},
{$:"node",ba:"B4W_CLAMP",ma:[],la:[{$:"node_in",ba:"He",fa:["vec3"],ea:!1},{$:"node_out",ba:"Hf",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"Hf = clamp ( He , _0_0 , _1_0 ) ;".split(" ")}]},{$:"node",ba:"B4W_REFRACTION",ma:[],la:[{$:"node_in",ba:"Hg",fa:["vec3"],ea:!1},{$:"node_in",ba:"Hh",fa:["float"],ea:!1},{$:"node_out",ba:"Hi",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:["Hi","=","Hg",";"]}]},{$:"node",ba:"B4W_TRANSLUCENCY",ma:[],la:[{$:"node_in",ba:"Hj",fa:["float"],ea:!1},{$:"node_in",ba:"Hk",fa:["float"],
ea:!1},{$:"node_in",ba:"Hl",fa:["float"],ea:!1},{$:"node_in",ba:"Hm",fa:["float"],ea:!1},{$:"node_in",ba:"Hn",fa:["float"],ea:!1},{$:"node_out",ba:"Ho",fa:["float"],ea:!0},{$:"node_out",ba:"Hp",fa:["vec4"],ea:!0}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Ho"],ja:[{$:"txt",aa:["Ho","=","Hj",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Hp"],ja:[{$:"txt",aa:"Hp = vec4 ( Hk , Hl , Hm , Hn ) ;".split(" ")}]}]}]},{$:"node",ba:"B4W_TIME",ma:[],la:[{$:"node_out",ba:"Hq",fa:["float"],ea:!1}],
ja:[{$:"txt",aa:["Hq","=","u_time",";"]}]},{$:"node",ba:"B4W_SMOOTHSTEP",ma:[],la:[{$:"node_in",ba:"Hr",fa:["float"],ea:!1},{$:"node_in",ba:"Hs",fa:["float"],ea:!1},{$:"node_in",ba:"Ht",fa:["float"],ea:!1},{$:"node_out",ba:"Hu",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Hu = smoothstep ( Hs , Ht , Hr ) ;".split(" ")}]},{$:"node",ba:"B4W_GLOW_OUTPUT",ma:[],la:[{$:"node_in",ba:"Hv",fa:["vec3"],ea:!1},{$:"node_in",ba:"Hw",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"E = Hv ; I = Hw ;".split(" ")}]},{$:"node",ba:"B4W_VECTOSCAL",
ma:[],la:[{$:"node_in",ba:"Hx",fa:["vec3"],ea:!1},{$:"node_out",ba:"Hy",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Hy = ( Hx . r + Hx . g + Hx . b ) / 3.0 ;".split(" ")}]},{$:"node",ba:"B4W_SCALTOVEC",ma:[],la:[{$:"node_in",ba:"Hz",fa:["float"],ea:!1},{$:"node_out",ba:"HA",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"HA [ 0 ] = Hz ; HA [ 1 ] = Hz ; HA [ 2 ] = Hz ;".split(" ")}]},{$:"nodes_global"},{$:"txt",aa:"void J ( in vec3 oy , out vec3 E , out vec3 F , out vec3 G , out vec4 H , out float I ) { E = vec3 ( _0_0 ) ; F = vec3 ( _0_0 ) ; G = vec3 ( _0_0 ) ; H = vec4 ( _0_0 ) ; I = _0_0 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO","USE_NODE_NORMAL_MAP","USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{$:"logical_or_expr",ia:11}],ha:{$:"grp",da:[{$:"txt",aa:["vec3","sL","=","j",";"]},{$:"cond",da:[{$:"if",ga:["DOUBLE_SIDED_LIGHTING","USE_NODE_GEOMETRY_NO",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",
{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( gl_FrontFacing == false )".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["if","(","gl_FrontFacing",")"]}]}}]},{$:"txt",aa:"sL = sL ; else sL = - sL ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_NORMAL_MAP"],ha:{$:"grp",da:[{$:"txt",aa:["vec3","sM","=","sL",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DOUBLE_SIDED_LIGHTING","USE_NODE_GEOMETRY_NO","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{$:"logical_or_expr",ia:4}],ha:{$:"grp",
da:[{$:"txt",aa:"vec3 sN = normalize ( sL ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["DOUBLE_SIDED_LIGHTING"],ha:{$:"grp",da:[{$:"txt",aa:["vec3","ox","=","sN",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 ox = normalize ( j ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_GEOMETRY_NO"],ha:{$:"grp",da:[{$:"txt",aa:["vec3","sK","=","sN",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",
{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 W = cross ( sN , k . xyz ) * k . w ; mat3 sO = mat3 ( k . xyz , W , sN ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_NORMAL_MAP"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 W = cross ( sL , k . xyz ) * k . w ; mat3 sQ = mat3 ( k . xyz , W , sL ) ;".split(" ")}]}}]}]}}]},{$:"txt",aa:"vec3 ow = h ; vec4 sR = i ; float sS = u_emit ; float sT = u_ambient ;".split(" ")},{$:"nodes_main"},{$:"txt",aa:["}"]}]}}]}]};f["include/particles_nodes.glslv"]=
{$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"PARTICLES_NODES_GLSLV",ha:{$:"grp",da:[{$:"define",ba:"PARTICLES_NODES_GLSLV",aa:[""]},{$:"node",ba:"TEX_COORD_UV",ma:[],la:[],ja:[{$:"txt",aa:["A","=","Iu",";"]}]},{$:"node",ba:"UV_MERGED",ma:[],la:[],ja:[{$:"txt",aa:["A","=","Iu",";"]}]},{$:"node",ba:"UVMAP",ma:[],la:[],ja:[{$:"txt",aa:["A","=","Iu",";"]}]},{$:"node",ba:"GEOMETRY_UV",ma:[],la:[],ja:[{$:"txt",aa:["A","=","Iu",";"]}]},{$:"node",ba:"PARTICLE_INFO",ma:[{$:"node_var",ba:"PART_INFO_SIZE",aa:["0"]},
{$:"node_var",ba:"PART_INFO_AGE",aa:["0"]},{$:"node_var",ba:"PART_INFO_LT",aa:["0"]},{$:"node_var",ba:"PART_INFO_LOC",aa:["0"]},{$:"node_var",ba:"PART_INFO_IND",aa:["0"]},{$:"node_var",ba:"PART_INFO_VEL",aa:["0"]},{$:"node_var",ba:"PART_INFO_A_VEL",aa:["0"]}],la:[{$:"node_param",ba:"HY",fa:["GLSL_OUT","vec4"],ea:!0},{$:"node_param",ba:"HZ",fa:["GLSL_OUT","vec3"],ea:!0},{$:"node_param",ba:"H_",fa:["GLSL_OUT","vec3"],ea:!0},{$:"node_param",ba:"Ia",fa:["GLSL_OUT","vec3"],ea:!0},{$:"node_param",ba:"node_PARTICLE_INFO_var_a_p_indices",
fa:["GLSL_IN","float"],ea:!0}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["PART_INFO_SIZE"],ja:[{$:"txt",aa:"HY [ 3 ] = It ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["PART_INFO_AGE"],ja:[{$:"txt",aa:"HY [ 1 ] = Is ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["PART_INFO_LT"],ja:[{$:"txt",aa:"HY [ 2 ] = Iv ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["PART_INFO_LOC"],ja:[{$:"txt",aa:["HZ","=","Ip",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["PART_INFO_IND"],ja:[{$:"txt",
aa:"HY [ 0 ] = node_PARTICLE_INFO_var_a_p_indices ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["PART_INFO_VEL"],ja:[{$:"txt",aa:["H_","=","Iq",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["PART_INFO_A_VEL"],ja:[{$:"txt",aa:["Ia","=","Ir",";"]}]}]}]},{$:"nodes_global"},{$:"txt",aa:"void J ( in vec3 Ip , in vec3 Iq , in vec3 Ir , in float Is , in float It , in vec2 Iu , in float Iv ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{$:"logical_or_expr",
ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["A","=","Iu",";"]}]}}]},{$:"nodes_main"},{$:"txt",aa:["}"]}]}}]}]};f["include/precision_statement.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"PRECISION_STATEMENT_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"PRECISION_STATEMENT_GLSLF",aa:[""]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"txt",aa:["precision","PRECISION","float",";"]}]}}]}]};f["include/procedural.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"PROCEDURAL_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"PROCEDURAL_GLSLF",
aa:[""]},{$:"txt",aa:"vec4 Iw ( vec4 x ) { return x - floor ( x * ( _1_0 / 289.0 ) ) * 289.0 ; } vec3 Iw ( vec3 x ) { return x - floor ( x * ( _1_0 / 289.0 ) ) * 289.0 ; } vec2 Iw ( vec2 x ) { return x - floor ( x * ( _1_0 / 289.0 ) ) * 289.0 ; } vec4 Ix ( vec4 x ) { return x - floor ( x * ( _1_0 / 7.0 ) ) * 7.0 ; } vec4 Iy ( vec4 x ) { return Iw ( ( 34.0 * x + 5.0 ) * x ) ; }".split(" ")},{$:"define",ba:"K",aa:["0.142857142857"]},{$:"define",ba:"K2",aa:["0.0714285714285"]},{$:"define",ba:"JITTER",
aa:["0.7"]},{$:"txt",aa:"vec2 fK ( vec2 Iz ) { vec2 IA = Iw ( floor ( Iz ) ) ; vec2 IB = fract ( Iz ) ; vec4 IC = IB . x + vec4 ( - 0.5 , - 1.5 , - 0.5 , - 1.5 ) ; vec4 ID = IB . y + vec4 ( - 0.5 , - 0.5 , - 1.5 , - 1.5 ) ; vec4 p = Iy ( IA . x + vec4 ( _0_0 , _1_0 , _0_0 , _1_0 ) ) ; p = Iy ( p + IA . y + vec4 ( _0_0 , _0_0 , _1_0 , _1_0 ) ) ; vec4 IE = Ix ( p ) * K + K2 ; vec4 IF = Ix ( floor ( p * K ) ) * K + K2 ; vec4 IG = IC + JITTER * IE ; vec4 IH = ID + JITTER * IF ; vec4 dC = IG * IG + IH * IH ;".split(" ")},
{$:"cond",da:[{$:"if",ga:[1],ha:{$:"grp",da:[{$:"txt",aa:"dC . xy = min ( dC . xy , dC . zw ) ; dC . x = min ( dC . x , dC . y ) ; return dC . xx ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"dC . xy = ( dC . x < dC . y ) ? dC . xy : dC . yx ; dC . xz = ( dC . x < dC . z ) ? dC . xz : dC . zx ; dC . xw = ( dC . x < dC . w ) ? dC . xw : dC . wx ; dC . y = min ( dC . y , dC . z ) ; dC . y = min ( dC . y , dC . w ) ; return sqrt ( dC . xy ) ;".split(" ")}]}}]},{$:"txt",aa:"} vec3 la ( vec2 Iz , float II ) { vec2 IA = Iw ( floor ( Iz ) ) ; vec2 IB = fract ( Iz ) ; vec4 IC = IB . x + vec4 ( - 0.5 , - 1.5 , - 0.5 , - 1.5 ) ; vec4 ID = IB . y + vec4 ( - 0.5 , - 0.5 , - 1.5 , - 1.5 ) ; vec4 p = Iy ( IA . x + vec4 ( _0_0 , _1_0 , _0_0 , _1_0 ) ) ; p = Iy ( p + IA . y + vec4 ( _0_0 , _0_0 , _1_0 , _1_0 ) ) ; vec4 IE = Ix ( p ) * K + K2 ; vec4 IF = Ix ( floor ( p * K ) ) * K + K2 ; vec4 IG = IC + JITTER * IE ; vec4 IH = ID + JITTER * IF ; vec4 IJ = IG * IG + IH * IH ; IG += II ; IH += II ; vec4 IK = IG * IG + IH * IH ; IG += II ; IH += II ; vec4 IL = IG * IG + IH * IH ; IJ . xy = min ( IJ . xy , IJ . zw ) ; IJ . x = min ( IJ . x , IJ . y ) ; IK . xy = min ( IK . xy , IK . zw ) ; IK . x = min ( IK . x , IK . y ) ; IL . xy = min ( IL . xy , IL . zw ) ; IL . x = min ( IL . x , IL . y ) ; return vec3 ( IJ . x , IK . x , IL . x ) ; } vec3 IM ( vec3 x ) { return Iw ( ( ( x * 34.0 ) + _1_0 ) * x ) ; } float fz ( vec2 kU ) { const vec4 IN = vec4 ( 0.211324865405187 , 0.366025403784439 , - 0.577350269189626 , 0.024390243902439 ) ; vec2 cq = floor ( kU + dot ( kU , IN . yy ) ) ; vec2 IO = kU - cq + dot ( cq , IN . xx ) ; vec2 IP ; IP = ( IO . x > IO . y ) ? vec2 ( _1_0 , _0_0 ) : vec2 ( _0_0 , _1_0 ) ; vec4 IQ = IO . xyxy + IN . xxzz ; IQ . xy -= IP ; cq = Iw ( cq ) ; vec3 p = IM ( IM ( cq . y + vec3 ( _0_0 , IP . y , _1_0 ) ) + cq . x + vec3 ( _0_0 , IP . x , _1_0 ) ) ; vec3 aA = max ( 0.5 - vec3 ( dot ( IO , IO ) , dot ( IQ . xy , IQ . xy ) , dot ( IQ . zw , IQ . zw ) ) , _0_0 ) ; aA = aA * aA ; aA = aA * aA ; vec3 x = 2.0 * fract ( p * IN . www ) - _1_0 ; vec3 co = abs ( x ) - 0.5 ; vec3 IE = floor ( x + 0.5 ) ; vec3 IR = x - IE ; aA *= 1.79284291400159 - 0.85373472095314 * ( IR * IR + co * co ) ; vec3 g ; g . x = IR . x * IO . x + co . x * IO . y ; g . yz = IR . yz * IQ . xz + co . yz * IQ . yw ; return 130.0 * dot ( aA , g ) ; } vec2 IU ( vec2 f_ ) { float IJ = dot ( f_ , vec2 ( 12.9898 , 78.233 ) ) ; float IK = dot ( f_ , vec2 ( 12.9898 , 78.233 ) * 2.0 ) ; float IS = fract ( sin ( IJ ) * 43758.5453 ) * 2.0 - _1_0 ; float IT = fract ( sin ( IK ) * 43758.5453 ) * 2.0 - _1_0 ; return vec2 ( IS , IT ) ; } float lk ( vec2 IV ) { return fract ( sin ( dot ( IV , vec2 ( 12.9898 , 78.233 ) ) ) * 43758.5453 ) ; }".split(" ")}]}}]}]};
f["include/refraction.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"REFRACTION_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"REFRACTION_GLSLF",aa:[""]},{$:"var",ba:"REFRACTIVE",aa:["0"]},{$:"var",ba:"USE_REFRACTION_CORRECTION",aa:["0"]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["USE_REFRACTION_CORRECTION"],ha:{$:"grp",da:[{$:"include",oa:"pack.glslf"}]}}]},{$:"include",oa:"color_util.glslf"},{$:"cond",da:[{$:"if",ga:["USE_REFRACTION_CORRECTION"],ha:{$:"grp",da:[{$:"txt",
aa:"float eW ( in float cW , inout vec2 eV , in vec2 eM ) { vec4 IW = GLSL_TEXTURE ( u_scene_depth , eV ) ; float eX = cV ( IW ) ; if ( eX < m ) { eV = eM ; return cW ; } else { return eX ; } return cW ; }".split(" ")}]}}]},{$:"txt",aa:"vec3 cS ( in vec3 ru , in vec2 IX ) { vec2 eM = ru . xy / ru . z ; vec2 eV = eM + IX ;".split(" ")},{$:"cond",da:[{$:"if",ga:["USE_REFRACTION_CORRECTION"],ha:{$:"grp",da:[{$:"txt",aa:"vec4 cU = GLSL_TEXTURE_PROJ ( u_scene_depth , ru ) ; float cW = cV ( cU ) ; eW ( cW , eV , eM ) ;".split(" ")}]}}]},
{$:"txt",aa:"vec3 fa = GLSL_TEXTURE ( u_refractmap , eV ) . rgb ; bG ( fa ) ; return fa ; }".split(" ")}]}}]}]}}]}]};f["include/scale_texcoord.glslv"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"SCALE_TEXCOORD_GLSLV",ha:{$:"grp",da:[{$:"define",ba:"SCALE_TEXCOORD_GLSLV",aa:[""]},{$:"txt",aa:"vec2 az ( vec2 ce , vec3 IY ) { return ( ce + 0.5 ) * IY . xy - 0.5 ; }".split(" ")}]}}]}]};f["include/shadow.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"SHADOW_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"SHADOW_GLSLF",
aa:[""]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"SHADOW_TEX_RES",aa:["2048.0"]},{$:"var",ba:"CSM_FADE_LAST_CASCADE",aa:["0"]},{$:"var",ba:"CSM_BLEND_BETWEEN_CASCADES",aa:["0"]},{$:"var",ba:"RGBA_SHADOWS",aa:["0"]},{$:"var",ba:"SHADOW_USAGE",aa:["NO_SHADOWS"]},{$:"var",ba:"NUM_CAST_LAMPS",aa:["0"]},{$:"var",ba:"CSM_SECTION1",aa:["0"]},{$:"var",ba:"CSM_SECTION2",aa:["0"]},{$:"var",ba:"CSM_SECTION3",aa:["0"]},{$:"var",ba:"COMPARED_MODE",aa:["0"]},{$:"var",ba:"POISSON_DISK_NUM",aa:["NO_SOFT_SHADOWS"]},
{$:"include",oa:"std.glsl"},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"include",oa:"procedural.glslf"}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"const float IZ = 0.1 ; const float I_ = 0.1 ; const float Ja = - 0.01 ; const float Jb = 0.05 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["POISSON_DISK_NUM","POISSON_X_16",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 Jc = vec4 ( 0.14383161 , 0.34495938 , - 0.38277543 , - 0.26496911 ) ; vec4 Jd = vec4 ( 0.53742981 , 0.19984126 , 0.79197514 , - 0.094184101 ) ; vec4 Je = vec4 ( - 0.94201624 , - 0.91588581 , - 0.2418884 , 0.44323325 ) ; vec4 Jf = vec4 ( - 0.81544232 , 0.94558609 , - 0.81409955 , 0.97484398 ) ; vec4 Jg = vec4 ( - 0.1410079 , 0.2938776 , 0.27676845 , - 0.41893023 ) ; vec4 Jh = vec4 ( - 0.4737342 , 0.78641367 , 0.19090188 , - 0.9293887 ) ; vec4 Ji = vec4 ( - 0.39906216 , 0.45771432 , 0.99706507 , - 0.97511554 ) ; vec4 Jj = vec4 ( - 0.87912464 , - 0.76890725 , 0.9143759 , 0.7564837 ) ;".split(" ")}]}},
{$:"elif",ga:["POISSON_DISK_NUM","POISSON_X_8",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 Jc = vec2 ( - 0.37192261 , 0.47109537 ) ; vec2 Jd = vec2 ( - 0.6807477 , 0.69048062 ) ; vec2 Je = vec2 ( 0.11615683 , - 0.91318524 ) ; vec2 Jf = vec2 ( 0.93688596 , - 0.16948928 ) ; vec2 Jg = vec2 ( - 0.89699117 , 0.74092316 ) ; vec2 Jh = vec2 ( 0.38263656 , - 0.66119884 ) ; vec2 Ji = vec2 ( - 0.08193062 , - 0.21275223 ) ; vec2 Jj = vec2 ( 0.05578877 , 0.84225623 ) ;".split(" ")}]}},{$:"elif",ga:["POISSON_DISK_NUM",
"POISSON_X_4",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 Jc = vec2 ( - 0.51808083 , 0.0 ) ; vec2 Jd = vec2 ( 0.5741194 , 0.0 ) ; vec2 Je = vec2 ( - 0.68048857 , 0.0 ) ; vec2 Jf = vec2 ( 0.82934988 , 0.0 ) ; vec2 Jg = vec2 ( 0.70009436 , 0.0 ) ; vec2 Jh = vec2 ( - 0.78790467 , 0.0 ) ; vec2 Ji = vec2 ( - 0.58619489 , 0.0 ) ; vec2 Jj = vec2 ( 0.41902178 , 0.0 ) ;".split(" ")}]}}]},{$:"txt",aa:"bool Jl ( vec2 iO , float Jk ) { return all ( lessThanEqual ( iO , vec2 ( 1.0 + Jk ) ) ) && all ( greaterThanEqual ( iO , vec2 ( 0.0 - Jk ) ) ) ; } float Js ( float Jm , float Jn , mat2 Jo , vec3 Jp , float Jq , PRECISION GLSL_SMPLR2D_SHDW Jr ) {".split(" ")},
{$:"cond",da:[{$:"if",ga:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 iO , fM ; fM . x = Jm ; fM . y = Jn ; fM = Jo * fM ; iO = Jp . xy + fM * Jq / SHADOW_TEX_RES ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec2 iO = Jp . xy ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION1",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"if ( ! Jl ( iO , Ja ) ) return 1.0 ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["RGBA_SHADOWS"],
ha:{$:"grp",da:[{$:"txt",aa:"float et = cV ( GLSL_TEXTURE ( Jr , iO ) ) ; return step ( Jp . z , et ) ;".split(" ")}]}},{$:"elif",ga:["COMPARED_MODE"],ha:{$:"grp",da:[{$:"txt",aa:"return GLSL_TEXTURE ( Jr , vec3 ( iO , Jp . z ) ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"return step ( Jp . z , GLSL_TEXTURE ( Jr , iO ) . r ) ;".split(" ")}]}}]},{$:"txt",aa:"} float Jx ( vec3 Jp , PRECISION GLSL_SMPLR2D_SHDW Jr , float Jq ) { float Jt = 0.0 ; Jp . z = clamp ( Jp . z , 0.0 , 1.0 ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float Ju = IU ( Jp . xy ) . x * M_PI ; float Jv = cos ( Ju ) ; float Jw = sin ( Ju ) ; mat2 Jo = mat2 ( Jv , Jw , - Jw , Jv ) ; for ( int cq = 0 ; cq < POISSON_DISK_NUM ; cq ++ ) { Jt += Js ( Jc [ cq ] , Jg [ cq ] , Jo , Jp , Jq , Jr ) ; Jt += Js ( Jd [ cq ] , Jh [ cq ] , Jo , Jp , Jq , Jr ) ; Jt += Js ( Je [ cq ] , Ji [ cq ] , Jo , Jp , Jq , Jr ) ; Jt += Js ( Jf [ cq ] , Jj [ cq ] , Jo , Jp , Jq , Jr ) ; } return clamp ( Jt / ( float ( POISSON_DISK_NUM ) * 4.0 ) , 0.0 , 1.0 ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"return Js ( 0.0 , 0.0 , mat2 ( 0.0 ) , Jp , Jq , Jr ) ;".split(" ")}]}}]},{$:"txt",aa:"} float JG ( vec3 Jy , PRECISION GLSL_SMPLR2D_SHDW Jz , vec3 JA , PRECISION GLSL_SMPLR2D_SHDW JB , float JC , float JD , float aL ) { float JE , JF ; Jy . z = clamp ( Jy . z , 0.0 , 1.0 ) ; JA . z = clamp ( JA . z , 0.0 , 1.0 ) ; JE = 0.0 ; JF = 0.0 ;".split(" ")},{$:"cond",da:[{$:"if",ga:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",
aa:"float Ju = IU ( Jy . xy ) . x * M_PI ; float Jv = cos ( Ju ) ; float Jw = sin ( Ju ) ; mat2 Jo = mat2 ( Jv , Jw , - Jw , Jv ) ; for ( int cq = 0 ; cq < POISSON_DISK_NUM ; cq ++ ) { JE += Js ( Jc [ cq ] , Jg [ cq ] , Jo , Jy , JC , Jz ) ; JE += Js ( Jd [ cq ] , Jh [ cq ] , Jo , Jy , JC , Jz ) ; JE += Js ( Je [ cq ] , Ji [ cq ] , Jo , Jy , JC , Jz ) ; JE += Js ( Jf [ cq ] , Jj [ cq ] , Jo , Jy , JC , Jz ) ; } for ( int cq = 0 ; cq < POISSON_DISK_NUM ; cq ++ ) { JF += Js ( Jc [ cq ] , Jg [ cq ] , Jo , JA , JD , JB ) ; JF += Js ( Jd [ cq ] , Jh [ cq ] , Jo , JA , JD , JB ) ; JF += Js ( Je [ cq ] , Ji [ cq ] , Jo , JA , JD , JB ) ; JF += Js ( Jf [ cq ] , Jj [ cq ] , Jo , JA , JD , JB ) ; } JE = mix ( JE , JF , aL ) ; JE /= ( float ( POISSON_DISK_NUM ) * 4.0 ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"JE += Js ( 0.0 , 0.0 , mat2 ( 0.0 ) , Jy , JC , Jz ) ; JF += Js ( 0.0 , 0.0 , mat2 ( 0.0 ) , JA , JD , JB ) ; JE = mix ( JE , JF , aL ) ;".split(" ")}]}}]},{$:"txt",aa:"return clamp ( JE , 0.0 , 1.0 ) ; } float JH ( vec2 iO ) { float a = min ( iO . x , iO . y ) ; float b = min ( 1.0 - iO . x , 1.0 - iO . y ) ; return min ( a , b ) ; } float JJ ( float vo , float JI ) { if ( JI >= 0.0 && JI <= I_ ) vo = ( vo - 1.0 ) / I_ * JI + 1.0 ; return vo ; } float JO ( vec3 JK , vec3 JL , PRECISION GLSL_SMPLR2D_SHDW Jz , PRECISION GLSL_SMPLR2D_SHDW JB , float JC , float JD , float JM , float et ) { float vo ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["CSM_BLEND_BETWEEN_CASCADES"],ha:{$:"grp",da:[{$:"txt",aa:"float JI = JH ( JK . xy ) ; if ( - et > JM && JI >= 0.0 && JI <= IZ && Jl ( JL . xy , 0.0 ) ) { float JN = 1.0 - JI / IZ ; vo = JG ( JK , Jz , JL , JB , JC , JD , JN ) ; } else".split(" ")}]}}]},{$:"txt",aa:"vo = Jx ( JK , Jz , JC ) ; return vo ; } float JQ ( vec3 JP , PRECISION GLSL_SMPLR2D_SHDW Jr , float Jq , float JM , float et ) { float vo = Jx ( JP , Jr , Jq ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["CSM_FADE_LAST_CASCADE"],
ha:{$:"grp",da:[{$:"txt",aa:"if ( - et > JM ) { float JI = JH ( JP . xy ) ; vo = JJ ( vo , JI ) ; }".split(" ")}]}}]},{$:"txt",aa:"return vo ; } vec4 ev ( float et ) { float vo = 1.0 ;".split(" ")},{$:"cond",da:[{$:"if",ga:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["vec4","JR","=","u_pcf_blur_radii",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec4 JR = vec4 ( 0.0 ) ;".split(" ")}]}}]},{$:"txt",aa:"vec3 Jy = n . xyz / n . w ; if ( n . w < 0.0 ) Jy . z = 0.0 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["CSM_SECTION1","NUM_CAST_LAMPS",1,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 JA = o . xyz / o . w ; if ( o . w < 0.0 ) JA . z = 0.0 ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION2","NUM_CAST_LAMPS",2,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 JS = u . xyz / u . w ; if ( u . w < 0.0 ) JS . z = 0.0 ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION3","NUM_CAST_LAMPS",3,{$:"g_expr",
ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 JT = v . xyz / v . w ; if ( v . w < 0.0 ) JT . z = 0.0 ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION1"],ha:{$:"grp",da:[{$:"txt",aa:"if ( Jl ( Jy . xy , 0.0 ) ) { vo = JO ( Jy , JA , u_shadow_map0 , u_shadow_map1 , JR [ 0 ] , JR [ 1 ] , u_csm_center_dists [ 0 ] , et ) ; }".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"if ( Jl ( Jy . xy , Jb ) ) { vo = JQ ( Jy , u_shadow_map0 , JR [ 0 ] , u_csm_center_dists [ 0 ] , et ) ; }".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["CSM_SECTION1"],ha:{$:"grp",da:[{$:"txt",aa:"else { if ( Jl ( JA . xy , 0.0 ) ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["CSM_SECTION2"],ha:{$:"grp",da:[{$:"txt",aa:"vo = JO ( JA , JS , u_shadow_map1 , u_shadow_map2 , JR [ 1 ] , JR [ 2 ] , u_csm_center_dists [ 1 ] , et ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vo = JQ ( JA , u_shadow_map1 , JR [ 1 ] , u_csm_center_dists [ 1 ] , et ) ;".split(" ")}]}}]},{$:"txt",aa:["}"]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION2"],
ha:{$:"grp",da:[{$:"txt",aa:"else { if ( Jl ( JS . xy , 0.0 ) ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["CSM_SECTION3"],ha:{$:"grp",da:[{$:"txt",aa:"vo = JO ( JS , JT , u_shadow_map2 , u_shadow_map3 , JR [ 2 ] , JR [ 3 ] , u_csm_center_dists [ 2 ] , et ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vo = JQ ( JS , u_shadow_map2 , JR [ 2 ] , u_csm_center_dists [ 2 ] , et ) ;".split(" ")}]}}]},{$:"txt",aa:["}"]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION3"],ha:{$:"grp",da:[{$:"txt",aa:"else { if ( Jl ( JT . xy , 0.0 ) ) vo = JQ ( JT , u_shadow_map3 , JR [ 3 ] , u_csm_center_dists [ 3 ] , et ) ; }".split(" ")}]}}]},
{$:"txt",aa:["}"]}]}}]},{$:"txt",aa:["}"]}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_CAST_LAMPS",1,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float JU = Jx ( JA , u_shadow_map1 , JR [ 0 ] ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["float","JU","=","0.0",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_CAST_LAMPS",2,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float JV = Jx ( JS , u_shadow_map2 , JR [ 0 ] ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["float","JV","=","0.0",
";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_CAST_LAMPS",3,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float JW = Jx ( JT , u_shadow_map3 , JR [ 0 ] ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["float","JW","=","1.0",";"]}]}}]},{$:"txt",aa:"return vec4 ( vo , JU , JV , JW ) ; }".split(" ")}]}}]},{$:"txt",aa:"vec4 cH ( inout vec3 cD ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 Jt = GLSL_TEXTURE ( u_shadow_mask , l . xy / l . z ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["NUM_CAST_LAMPS",3,{$:"l_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"cD *= Jt . a ;".split(" ")}]}}]},{$:"txt",aa:["return","Jt",";"]}]}},{$:"elif",ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 Jt = ev ( i . z ) ; return Jt ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"return vec4 ( 1.0 ) ;".split(" ")}]}}]},{$:"txt",aa:["}"]}]}}]}]};
f["include/shadow.glslv"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"SHADOW_GLSLV",ha:{$:"grp",da:[{$:"define",ba:"SHADOW_GLSLV",aa:[""]},{$:"var",ba:"MAC_OS_SHADOW_HACK",aa:["0"]},{$:"var",ba:"SHADOW_TEX_RES",aa:["2048.0"]},{$:"var",ba:"SHADOW_USAGE",aa:["NO_SHADOWS"]},{$:"var",ba:"NUM_CAST_LAMPS",aa:["0"]},{$:"var",ba:"CSM_SECTION1",aa:["0"]},{$:"var",ba:"CSM_SECTION2",aa:["0"]},{$:"var",ba:"CSM_SECTION3",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",
{$:"equal_expr",ia:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"include",oa:"math.glslv"},{$:"txt",aa:"vec4 J_ ( mat4 JX , vec4 JY , mat4 JZ ) { vec2 ey = ( JX * JZ [ 3 ] ) . xy ; float ez = SHADOW_TEX_RES / 2.0 ; ey = floor ( ey * ez + 0.5 ) / ez - ey ; vec4 Jp = JX * JY ; Jp . xy += ey ; Jp . xyz = 0.5 * ( Jp . xyz + Jp . w ) ; return Jp ; } void cd ( vec3 fr , vec3 Ka ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["MAC_OS_SHADOW_HACK"],
ha:{$:"grp",da:[{$:"txt",aa:"mat4 JZ = bh ( u_v_light_tsr [ 0 ] ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"mat4 JZ = bh ( mat3 ( u_v_light_ts [ 0 ] . xyz , vec3 ( u_v_light_ts [ 0 ] . w ) , u_v_light_r [ 0 ] . xyz * ( 2. * float ( u_v_light_r [ 0 ] . w >= 0. ) - 1. ) ) ) ;".split(" ")}]}}]},{$:"txt",aa:"vec4 Kb = JZ * vec4 ( fr + u_normal_offset * Ka , 1.0 ) ; n = J_ ( u_p_light_matrix0 , Kb , JZ ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NUM_CAST_LAMPS",1,{$:"g_expr",ia:2}],ha:{$:"grp",
da:[{$:"cond",da:[{$:"if",ga:["MAC_OS_SHADOW_HACK"],ha:{$:"grp",da:[{$:"txt",aa:"JZ = bh ( u_v_light_tsr [ 1 ] ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"JZ = bh ( mat3 ( u_v_light_ts [ 1 ] . xyz , vec3 ( u_v_light_ts [ 1 ] . w ) , u_v_light_r [ 1 ] . xyz * ( 2. * float ( u_v_light_r [ 1 ] . w >= 0. ) - 1. ) ) ) ;".split(" ")}]}}]},{$:"txt",aa:"Kb = JZ * vec4 ( fr + u_normal_offset * Ka , 1.0 ) ; o = J_ ( u_p_light_matrix1 , Kb , JZ ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_CAST_LAMPS",
2,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["MAC_OS_SHADOW_HACK"],ha:{$:"grp",da:[{$:"txt",aa:"JZ = bh ( u_v_light_tsr [ 2 ] ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"JZ = bh ( mat3 ( u_v_light_ts [ 2 ] . xyz , vec3 ( u_v_light_ts [ 2 ] . w ) , u_v_light_r [ 2 ] . xyz * ( 2. * float ( u_v_light_r [ 2 ] . w >= 0. ) - 1. ) ) ) ;".split(" ")}]}}]},{$:"txt",aa:"Kb = JZ * vec4 ( fr + u_normal_offset * Ka , 1.0 ) ; u = J_ ( u_p_light_matrix2 , Kb , JZ ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["NUM_CAST_LAMPS",3,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["MAC_OS_SHADOW_HACK"],ha:{$:"grp",da:[{$:"txt",aa:"JZ = bh ( u_v_light_tsr [ 3 ] ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"JZ = bh ( mat3 ( u_v_light_ts [ 3 ] . xyz , vec3 ( u_v_light_ts [ 3 ] . w ) , u_v_light_r [ 3 ] . xyz * ( 2. * float ( u_v_light_r [ 3 ] . w >= 0. ) - 1. ) ) ) ;".split(" ")}]}}]},{$:"txt",aa:"Kb = JZ * vec4 ( fr + u_normal_offset * Ka , 1.0 ) ; v = J_ ( u_p_light_matrix3 , Kb , JZ ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["CSM_SECTION1"],ha:{$:"grp",da:[{$:"txt",aa:"o = J_ ( u_p_light_matrix1 , Kb , JZ ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION2"],ha:{$:"grp",da:[{$:"txt",aa:"u = J_ ( u_p_light_matrix2 , Kb , JZ ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION3"],ha:{$:"grp",da:[{$:"txt",aa:"v = J_ ( u_p_light_matrix3 , Kb , JZ ) ;".split(" ")}]}}]},{$:"txt",aa:["}"]}]}}]}]}}]}]};f["include/skin.glslv"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"SKIN_GLSLV",ha:{$:"grp",
da:[{$:"define",ba:"SKIN_GLSLV",aa:[""]},{$:"var",ba:"DISABLE_TANGENT_SKINNING",aa:["0"]},{$:"var",ba:"SKINNED",aa:["0"]},{$:"var",ba:"FRAMES_BLENDING",aa:["0"]},{$:"cond",da:[{$:"if",ga:["SKINNED"],ha:{$:"grp",da:[{$:"include",oa:"math.glslv"},{$:"define",ba:"SKIN_SLERP",aa:["0"]},{$:"cond",da:[{$:"if",ga:["SKIN_SLERP"],ha:{$:"grp",da:[{$:"txt",aa:"vec4 Ki ( in vec4 qZ , in vec4 rF , in float Kc ) { float Kd = qZ [ 0 ] * rF [ 0 ] + qZ [ 1 ] * rF [ 1 ] + qZ [ 2 ] * rF [ 2 ] + qZ [ 3 ] * rF [ 3 ] ; if ( Kd < 0.0 ) { rF *= - 1.0 ; Kd = - Kd ; } if ( abs ( Kd ) >= 1.0 ) return qZ ; float Ke = acos ( Kd ) ; float Kf = sqrt ( 1.0 - Kd * Kd ) ; if ( abs ( Kf ) < 0.001 ) return vec4 ( qZ * 0.5 + rF * 0.5 ) ; float Kg = sin ( ( 1.0 - Kc ) * Ke ) / Kf ; float Kh = sin ( Kc * Ke ) / Kf ; return qZ * Kg + rF * Kh ; }".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["FRAMES_BLENDING"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 Kw ( in vec3 O , in vec4 Kj , in vec4 Kk , in vec4 Kl , in vec4 Km , in float Kn ) { vec3 Ko = rl ( u_arm_rel_trans . xyz , vec3 ( u_arm_rel_trans . w ) , u_arm_rel_quat , O ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SKIN_SLERP"],ha:{$:"grp",da:[{$:"txt",aa:"vec4 qZ = Ki ( Kj , Kk , Kn ) ; vec4 Kp = mix ( Kl , Km , Kn ) ; vec3 Kq = T ( qZ , Ko ) ; vec3 Kr = Kq * Kp . w + Kp . xyz ;".split(" ")}]}},{$:"else",ha:{$:"grp",
da:[{$:"txt",aa:"vec3 Ks = T ( Kj , Ko ) ; vec3 Kt = T ( Kk , Ko ) ; vec3 Ku = Ks * Kl . w + Kl . xyz ; vec3 Kv = Kt * Km . w + Km . xyz ; vec3 Kr = mix ( Ku , Kv , Kn ) ;".split(" ")}]}}]},{$:"txt",aa:"return rn ( u_arm_rel_trans . xyz , vec3 ( u_arm_rel_trans . w ) , u_arm_rel_quat , Kr ) ; } vec3 KC ( in vec3 Kx , in vec4 Kj , in vec4 Kk , in float Kn ) { vec3 Ky = rm ( u_arm_rel_trans . xyz , vec3 ( u_arm_rel_trans . w ) , u_arm_rel_quat , Kx ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SKIN_SLERP"],
ha:{$:"grp",da:[{$:"txt",aa:"vec4 qZ = Ki ( Kj , Kk , Kn ) ; vec3 Kz = T ( qZ , Ky ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 KA = T ( Kj , Ky ) ; vec3 KB = T ( Kk , Ky ) ; vec3 Kz = mix ( KA , KB , Kn ) ;".split(" ")}]}}]},{$:"txt",aa:"return ro ( u_arm_rel_trans . xyz , vec3 ( u_arm_rel_trans . w ) , u_arm_rel_quat , Kz ) ; }".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 Kw ( in vec3 O , in vec4 Kj , in vec4 Kl ) { vec3 Ko = rl ( u_arm_rel_trans . xyz , vec3 ( u_arm_rel_trans . w ) , u_arm_rel_quat , O ) ; vec3 Kq = T ( Kj , Ko ) ; vec3 Kr = Kq * Kl . w + Kl . xyz ; return rn ( u_arm_rel_trans . xyz , vec3 ( u_arm_rel_trans . w ) , u_arm_rel_quat , Kr ) ; } vec3 KC ( in vec3 Kx , in vec4 Kj ) { vec3 Ky = rm ( u_arm_rel_trans . xyz , vec3 ( u_arm_rel_trans . w ) , u_arm_rel_quat , Kx ) ; vec3 Kz = T ( Kj , Ky ) ; return ro ( u_arm_rel_trans . xyz , vec3 ( u_arm_rel_trans . w ) , u_arm_rel_quat , Kz ) ; }".split(" ")}]}}]},
{$:"txt",aa:"void an ( inout vec3 O , inout vec3 V , inout vec3 W , inout vec3 U ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["FRAMES_BLENDING"],ha:{$:"grp",da:[{$:"txt",aa:["float","KD","=","u_frame_factor",";"]}]}}]},{$:"txt",aa:"if ( a_influence . y > 0.0 ) { vec3 jH = vec3 ( 0.0 , 0.0 , 0.0 ) ; vec3 KE = vec3 ( 0.0 , 0.0 , 0.0 ) ; vec3 KF = vec3 ( 0.0 , 0.0 , 0.0 ) ; vec3 KG = vec3 ( 0.0 , 0.0 , 0.0 ) ; vec4 KH = a_influence ; for ( int cq = 0 ; cq < 4 ; cq ++ ) { int KI = int ( KH [ cq ] ) ; float KJ = fract ( KH [ cq ] ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FRAMES_BLENDING"],ha:{$:"grp",da:[{$:"txt",aa:"KE += KJ * KC ( V , u_quatsb [ KI ] , u_quatsa [ KI ] , KD ) ; KF += KJ * KC ( W , u_quatsb [ KI ] , u_quatsa [ KI ] , KD ) ; KG += KJ * KC ( U , u_quatsb [ KI ] , u_quatsa [ KI ] , KD ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"jH += KJ * Kw ( O , u_quatsb [ KI ] , u_transb [ KI ] ) ; KG += KJ * KC ( U , u_quatsb [ KI ] ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DISABLE_TANGENT_SKINNING",{$:"logic_negative_expr",
ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"KE += KJ * KC ( V , u_quatsb [ KI ] ) ; KF += KJ * KC ( W , u_quatsb [ KI ] ) ;".split(" ")}]}}]}]}}]},{$:"txt",aa:["}"]},{$:"cond",da:[{$:"if",ga:["FRAMES_BLENDING"],ha:{$:"grp",da:[{$:"txt",aa:"int KI = int ( KH [ 0 ] ) ; float KJ = fract ( KH [ 0 ] ) ; jH += KJ * Kw ( O , u_quatsb [ KI ] , u_quatsa [ KI ] , u_transb [ KI ] , u_transa [ KI ] , KD ) ; KI = int ( KH [ 1 ] ) ; KJ = fract ( KH [ 1 ] ) ; jH += KJ * Kw ( O , u_quatsb [ KI ] , u_quatsa [ KI ] , u_transb [ KI ] , u_transa [ KI ] , KD ) ; KI = int ( KH [ 2 ] ) ; KJ = fract ( KH [ 2 ] ) ; jH += KJ * Kw ( O , u_quatsb [ KI ] , u_quatsa [ KI ] , u_transb [ KI ] , u_transa [ KI ] , KD ) ; KI = int ( KH [ 3 ] ) ; KJ = fract ( KH [ 3 ] ) ; jH += KJ * Kw ( O , u_quatsb [ KI ] , u_quatsa [ KI ] , u_transb [ KI ] , u_transa [ KI ] , KD ) ;".split(" ")}]}}]},
{$:"txt",aa:"O = jH ; U = KG ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DISABLE_TANGENT_SKINNING",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"V = KE ; W = KF ;".split(" ")}]}}]},{$:"txt",aa:"} if ( ! ( a_influence . y > 0.0 ) ) { int KK = int ( a_influence [ 0 ] - 1.0 ) ; if ( KK > - 1 ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["FRAMES_BLENDING"],ha:{$:"grp",da:[{$:"txt",aa:"O = Kw ( O , u_quatsb [ KK ] , u_quatsa [ KK ] , u_transb [ KK ] , u_transa [ KK ] , KD ) ; V = KC ( V , u_quatsb [ KK ] , u_quatsa [ KK ] , KD ) ; W = KC ( W , u_quatsb [ KK ] , u_quatsa [ KK ] , KD ) ; U = KC ( U , u_quatsb [ KK ] , u_quatsa [ KK ] , KD ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"O = Kw ( O , u_quatsb [ KK ] , u_transb [ KK ] ) ; U = KC ( U , u_quatsb [ KK ] ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DISABLE_TANGENT_SKINNING",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"V = KC ( V , u_quatsb [ KK ] ) ; W = KC ( W , u_quatsb [ KK ] ) ;".split(" ")}]}}]}]}}]},{$:"txt",aa:["}","}","}"]}]}}]}]}}]}]};f["include/sky_blending.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"SKY_BLENDING_GLSLF",ha:{$:"grp",da:[{$:"define",
ba:"SKY_BLENDING_GLSLF",aa:[""]},{$:"include",oa:"std.glsl"},{$:"include",oa:"blending.glslf"},{$:"var",ba:"WO_SKYREAL",aa:["0"]},{$:"var",ba:"WO_SKYBLEND",aa:["0"]},{$:"var",ba:"BLENDTYPE",aa:["MIX"]},{$:"var",ba:"MTEX_RGBTOINT",aa:["0"]},{$:"var",ba:"WOMAP_HORIZ",aa:["0"]},{$:"var",ba:"WOMAP_ZENUP",aa:["0"]},{$:"var",ba:"WOMAP_ZENDOWN",aa:["0"]},{$:"var",ba:"WOMAP_BLEND",aa:["0"]},{$:"var",ba:"MTEX_NEGATIVE",aa:["0"]},{$:"txt",aa:"vec3 KL ( vec3 km , vec3 kn , float aL , float kM ) { float ko = aL * kM ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["BLENDTYPE","MIX",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kp ( kn , km , ko ) ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","ADD",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kq ( km , kn , ko ) ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","SUBTRACT",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kr ( km , kn , ko ) ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","MULTIPLY",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kt ( km , kn , ko ) ;".split(" ")}]}},
{$:"elif",ga:["BLENDTYPE","SCREEN",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return ku ( km , kn , ko ) ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","OVERLAY",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kv ( km , kn , ko ) ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","DIFFERENCE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kw ( km , kn , ko ) ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","DIVIDE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kx ( km , kn , ko ) ;".split(" ")}]}},
{$:"elif",ga:["BLENDTYPE","DARKEN",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return ky ( km , kn , ko ) ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","LIGHTEN",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kz ( km , kn , ko ) ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","HUE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kD ( kn , km , ko ) ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","SATURATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kE ( kn , km , ko ) ;".split(" ")}]}},
{$:"elif",ga:["BLENDTYPE","VALUE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kF ( kn , km , ko ) ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","COLOR",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kG ( kn , km , ko ) ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","SOFT_LIGHT",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kI ( kn , km , ko ) ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","LINEAR_LIGHT",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kJ ( kn , km , ko ) ;".split(" ")}]}}]},
{$:"txt",aa:"return vec3 ( 1.0 , 0.0 , 1.0 ) ; } float KM ( float kK , float kL , float aL , float kM ) { vec3 km = vec3 ( kK ) , kn = vec3 ( kL ) ; float ko = aL * kM ;".split(" ")},{$:"cond",da:[{$:"if",ga:["BLENDTYPE","MIX",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kp ( kn , km , ko ) . x ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","ADD",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kq ( km , kn , ko ) . x ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","SUBTRACT",{$:"equal_expr",
ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kr ( km , kn , ko ) . x ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","MULTIPLY",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kN ( kK , kL , ko , kM ) ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","SCREEN",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kO ( kK , kL , ko , kM ) ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","OVERLAY",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kP ( kK , kL , ko , kM ) ;".split(" ")}]}},{$:"elif",
ga:["BLENDTYPE","DIFFERENCE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kw ( km , kn , ko ) . x ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","DIVIDE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kx ( km , kn , ko ) . x ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","DARKEN",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return ky ( km , kn , ko ) . x ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","LIGHTEN",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kz ( km , kn , ko ) . x ;".split(" ")}]}},
{$:"elif",ga:["BLENDTYPE","SOFT_LIGHT",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kI ( kn , km , ko ) . x ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","LINEAR_LIGHT",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kJ ( kn , km , ko ) . x ;".split(" ")}]}}]},{$:"txt",aa:"return 0.0 ; } vec3 eF ( vec3 eB , vec3 eC , vec4 eE , float eA , vec3 eD ) { float KN = 1.0 ; KN = eE . a ;".split(" ")},{$:"cond",da:[{$:"if",ga:["MTEX_RGBTOINT"],ha:{$:"grp",da:[{$:"txt",aa:"KN = gj ( eE ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["MTEX_NEGATIVE"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["MTEX_RGBTOINT",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"eE = vec4 ( vec3 ( 1.0 ) - eE . rgb , eE . a ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"KN = 1.0 - KN ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["WOMAP_HORIZ","WOMAP_ZENUP","WOMAP_ZENDOWN",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["MTEX_RGBTOINT"],ha:{$:"grp",da:[{$:"txt",aa:"eE = vec4 ( u_sky_tex_color , 1.0 ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"KN = eE . a ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["WOMAP_HORIZ"],ha:{$:"grp",da:[{$:"txt",aa:"eB = KL ( eE . rgb , eB , KN , u_sky_tex_fac [ 1 ] ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["WOMAP_ZENUP","WOMAP_ZENDOWN",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["float","KO","=","0.0",";"]},{$:"cond",da:[{$:"if",ga:["WO_SKYREAL"],ha:{$:"grp",da:[{$:"txt",aa:"if ( dot ( eD , vec3 ( 0.0 , 0.0 , 1.0 ) ) >= 0.0 ) {".split(" ")},{$:"cond",
da:[{$:"if",ga:["WOMAP_ZENUP"],ha:{$:"grp",da:[{$:"txt",aa:"KO = u_sky_tex_fac [ 2 ] ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:[";"]}]}}]},{$:"txt",aa:["}"]},{$:"cond",da:[{$:"if",ga:["WOMAP_ZENDOWN"],ha:{$:"grp",da:[{$:"txt",aa:"else KO = u_sky_tex_fac [ 3 ] ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["WOMAP_ZENUP"],ha:{$:"grp",da:[{$:"txt",aa:"KO = u_sky_tex_fac [ 2 ] ;".split(" ")}]}},{$:"elif",ga:["WOMAP_ZENDOWN"],ha:{$:"grp",da:[{$:"txt",aa:"KO = u_sky_tex_fac [ 3 ] ;".split(" ")}]}}]}]}}]},
{$:"txt",aa:"if ( KO != 0.0 ) eC = KL ( eE . rgb , eC , KN , KO ) ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["WOMAP_BLEND"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["MTEX_RGBTOINT",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"KN = dot ( eE . rgb , vec3 ( 0.2126 , 0.7152 , 0.0722 ) ) ;".split(" ")}]}}]},{$:"txt",aa:"eA = KM ( u_sky_tex_dvar , eA , KN , u_sky_tex_fac [ 0 ] ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["WO_SKYBLEND"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 bw = mix ( eB , eC , eA ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["vec3","bw","=","eB",";"]}]}}]},{$:"txt",aa:["return","bw",";","}"]}]}}]}]};f["include/std.glsl"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"STD_ENUMS_GLSL",ha:{$:"grp",da:[{$:"define",ba:"STD_ENUMS_GLSL",aa:[""]},{$:"var",ba:"CONSTANTS_HACK",aa:["0"]},{$:"define",ba:"TEXTURE_COORDS_NONE",aa:["0"]},{$:"define",ba:"TEXTURE_COORDS_UV_ORCO",aa:["1"]},{$:"define",ba:"TEXTURE_COORDS_NORMAL",aa:["2"]},{$:"define",ba:"TEXTURE_BLEND_TYPE_MIX",aa:["1"]},{$:"define",ba:"TEXTURE_BLEND_TYPE_MULTIPLY",
aa:["2"]},{$:"define",ba:"SHADOW_SRC_NONE",aa:["1"]},{$:"define",ba:"SHADOW_SRC_DEPTH",aa:["2"]},{$:"define",ba:"SHADOW_SRC_MASK",aa:["3"]},{$:"define",ba:"SHADOW_DST_NONE",aa:["1"]},{$:"define",ba:"SHADOW_DST_DEPTH",aa:["2"]},{$:"define",ba:"SHADOW_DST_MASK",aa:["3"]},{$:"define",ba:"NO_SHADOWS",aa:["1"]},{$:"define",ba:"SHADOW_CASTING",aa:["2"]},{$:"define",ba:"SHADOW_MASK_GENERATION",aa:["3"]},{$:"define",ba:"SHADOW_MAPPING_OPAQUE",aa:["4"]},{$:"define",ba:"SHADOW_MAPPING_BLEND",aa:["5"]},{$:"define",
ba:"POISSON_X_16",aa:["4"]},{$:"define",ba:"POISSON_X_8",aa:["2"]},{$:"define",ba:"POISSON_X_4",aa:["1"]},{$:"define",ba:"NO_SOFT_SHADOWS",aa:["0"]},{$:"define",ba:"SPECULAR_PHONG",aa:["1"]},{$:"define",ba:"SPECULAR_COOKTORR",aa:["2"]},{$:"define",ba:"SPECULAR_WARDISO",aa:["3"]},{$:"define",ba:"SPECULAR_BLINN",aa:["4"]},{$:"define",ba:"SPECULAR_TOON",aa:["5"]},{$:"define",ba:"DIFFUSE_LAMBERT",aa:["1"]},{$:"define",ba:"DIFFUSE_OREN_NAYAR",aa:["2"]},{$:"define",ba:"DIFFUSE_FRESNEL",aa:["3"]},{$:"define",
ba:"DIFFUSE_MINNAERT",aa:["4"]},{$:"define",ba:"DIFFUSE_TOON",aa:["5"]},{$:"define",ba:"MIX",aa:["0"]},{$:"define",ba:"ADD",aa:["1"]},{$:"define",ba:"SUBTRACT",aa:["2"]},{$:"define",ba:"MULTIPLY",aa:["3"]},{$:"define",ba:"SCREEN",aa:["4"]},{$:"define",ba:"OVERLAY",aa:["5"]},{$:"define",ba:"DIFFERENCE",aa:["6"]},{$:"define",ba:"DIVIDE",aa:["7"]},{$:"define",ba:"DARKEN",aa:["8"]},{$:"define",ba:"LIGHTEN",aa:["9"]},{$:"define",ba:"HUE",aa:["10"]},{$:"define",ba:"SATURATION",aa:["11"]},{$:"define",ba:"VALUE",
aa:["12"]},{$:"define",ba:"COLOR",aa:["13"]},{$:"define",ba:"SOFT_LIGHT",aa:["14"]},{$:"define",ba:"LINEAR_LIGHT",aa:["15"]},{$:"define",ba:"REFL_NONE",aa:["0"]},{$:"define",ba:"REFL_MIRRORMAP",aa:["1"]},{$:"define",ba:"REFL_PLANE",aa:["2"]},{$:"define",ba:"REFL_CUBE",aa:["3"]},{$:"define",ba:"REFL_PBR_SIMPLE",aa:["4"]},{$:"define",ba:"REFL_PBR_STANDARD",aa:["5"]},{$:"define",ba:"INVERSE_QUADRATIC",aa:["0"]},{$:"define",ba:"LINEAR",aa:["1"]},{$:"define",ba:"QUADRATIC",aa:["2"]},{$:"define",ba:"HEMI",
aa:["1"]},{$:"define",ba:"SPOT",aa:["2"]},{$:"define",ba:"POINT",aa:["3"]},{$:"define",ba:"SUN",aa:["4"]},{$:"define",ba:"DOF_SIMPLE",aa:["0"]},{$:"define",ba:"DOF_BOKEH",aa:["1"]},{$:"define",ba:"COC_ALL",aa:["0"]},{$:"define",ba:"COC_FOREGROUND",aa:["1"]},{$:"define",ba:"COC_COMBINE",aa:["2"]},{$:"define",ba:"VT_WORLD_TO_WORLD",aa:["0"]},{$:"define",ba:"VT_WORLD_TO_OBJECT",aa:["1"]},{$:"define",ba:"VT_WORLD_TO_CAMERA",aa:["2"]},{$:"define",ba:"VT_OBJECT_TO_WORLD",aa:["3"]},{$:"define",ba:"VT_OBJECT_TO_OBJECT",
aa:["4"]},{$:"define",ba:"VT_OBJECT_TO_CAMERA",aa:["5"]},{$:"define",ba:"VT_CAMERA_TO_WORLD",aa:["6"]},{$:"define",ba:"VT_CAMERA_TO_OBJECT",aa:["7"]},{$:"define",ba:"VT_CAMERA_TO_CAMERA",aa:["8"]},{$:"define",ba:"VT_POINT",aa:["0"]},{$:"define",ba:"VT_VECTOR",aa:["1"]},{$:"define",ba:"VT_NORMAL",aa:["2"]},{$:"define",ba:"NM_TANGENT",aa:["0"]},{$:"define",ba:"NM_OBJECT",aa:["1"]},{$:"define",ba:"NM_WORLD",aa:["2"]},{$:"define",ba:"NM_BLENDER_OBJECT",aa:["3"]},{$:"define",ba:"NM_BLENDER_WORLD",aa:["4"]},
{$:"define",ba:"BILLBOARD_ALIGN_VIEW",aa:["1"]},{$:"define",ba:"BILLBOARD_ALIGN_XY",aa:["2"]},{$:"define",ba:"BILLBOARD_ALIGN_YZ",aa:["3"]},{$:"define",ba:"BILLBOARD_ALIGN_ZX",aa:["4"]},{$:"define",ba:"POST_EFFECT_NONE",aa:["1"]},{$:"define",ba:"POST_EFFECT_GRAYSCALE",aa:["2"]},{$:"define",ba:"POST_EFFECT_BLUR",aa:["3"]},{$:"define",ba:"POST_EFFECT_GLOW_BLUR",aa:["4"]},{$:"define",ba:"POST_EFFECT_DOF_BLUR",aa:["5"]},{$:"define",ba:"POST_EFFECT_ALPHA_BLUR",aa:["6"]},{$:"define",ba:"POST_EFFECT_EXTEND",
aa:["7"]},{$:"define",ba:"FLIP_CUBEMAP_COORDS",aa:["8"]},{$:"define",ba:"BLUR_PASS_1",aa:["1"]},{$:"define",ba:"BLUR_PASS_2",aa:["2"]},{$:"define",ba:"BLUR_PASS_3",aa:["3"]},{$:"define",ba:"BLUR_PASS_4",aa:["4"]},{$:"define",ba:"BLUR_PASS_5",aa:["5"]},{$:"define",ba:"DV_NONE",aa:["0"]},{$:"define",ba:"DV_OPAQUE_WIREFRAME",aa:["1"]},{$:"define",ba:"DV_TRANSPARENT_WIREFRAME",aa:["2"]},{$:"define",ba:"DV_FRONT_BACK_VIEW",aa:["3"]},{$:"define",ba:"DV_BOUNDINGS",aa:["4"]},{$:"define",ba:"DV_CLUSTERS_VIEW",
aa:["5"]},{$:"define",ba:"DV_BATCHES_VIEW",aa:["6"]},{$:"define",ba:"DV_RENDER_TIME",aa:["7"]},{$:"define",ba:"SSAO_QUALITY_8",aa:["1"]},{$:"define",ba:"SSAO_QUALITY_16",aa:["2"]},{$:"define",ba:"SSAO_QUALITY_24",aa:["3"]},{$:"define",ba:"SSAO_QUALITY_32",aa:["4"]},{$:"define",ba:"AA_METHOD_FXAA_LIGHT",aa:["1"]},{$:"define",ba:"AA_METHOD_FXAA_QUALITY",aa:["2"]},{$:"define",ba:"AA_QUALITY_LOW",aa:["0"]},{$:"define",ba:"AA_QUALITY_MEDIUM",aa:["1"]},{$:"define",ba:"AA_QUALITY_HIGH",aa:["2"]},{$:"define",
ba:"SMAA_RESOLVE",aa:["25"]},{$:"define",ba:"SMAA_EDGE_DETECTION",aa:["24"]},{$:"define",ba:"SMAA_BLENDING_WEIGHT_CALCULATION",aa:["23"]},{$:"define",ba:"SMAA_NEIGHBORHOOD_BLENDING",aa:["26"]},{$:"define",ba:"AA_METHOD_SMAA_LOW",aa:["1"]},{$:"define",ba:"AA_METHOD_SMAA_MEDIUM",aa:["2"]},{$:"define",ba:"AA_METHOD_SMAA_HIGH",aa:["3"]},{$:"define",ba:"AA_METHOD_SMAA_ULTRA",aa:["4"]},{$:"define",ba:"REFL_PASS_NONE",aa:["0"]},{$:"define",ba:"REFL_PASS_PLANE",aa:["1"]},{$:"define",ba:"REFL_PASS_CUBE",aa:["2"]},
{$:"define",ba:"SRGB_NONE",aa:["0"]},{$:"define",ba:"SRGB_SIMPLE",aa:["1"]},{$:"define",ba:"SRGB_PROPER",aa:["2"]},{$:"define",ba:"CAM_TYPE_ORTHO",aa:["0"]},{$:"define",ba:"CAM_TYPE_PERSP",aa:["1"]},{$:"define",ba:"M_PI",aa:["3.14159265359"]},{$:"define",ba:"M_PI_4",aa:["0.785398163"]},{$:"define",ba:"INV_PI",aa:["0.318309886"]},{$:"define",ba:"UP_VECTOR",aa:"vec3 ( 0.0 , 0.0 , 1.0 )".split(" ")},{$:"define",ba:"RIGHT_VECTOR",aa:"vec3 ( 1.0 , 0.0 , 0.0 )".split(" ")},{$:"define",ba:"TOWARD_VECTOR",
aa:"vec3 ( 0.0 , - 1.0 , 0.0 )".split(" ")},{$:"cond",da:[{$:"if",ga:["CONSTANTS_HACK"],ha:{$:"grp",da:[{$:"txt",aa:"float _0_0 = 0.0 ; float _0_5 = 0.5 ; float _1_0 = 1.0 ; float _255_0 = 255.0 ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"define",ba:"_0_0",aa:["0.0"]},{$:"define",ba:"_0_5",aa:["0.5"]},{$:"define",ba:"_1_0",aa:["1.0"]},{$:"define",ba:"_255_0",aa:["255.0"]}]}}]}]}}]}]};f["include/to_world.glslv"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"TO_WORLD_GLSLV",ha:{$:"grp",da:[{$:"define",
ba:"TO_WORLD_GLSLV",aa:[""]},{$:"include",oa:"math.glslv"},{$:"var",ba:"BILLBOARD_ALIGN",aa:["BILLBOARD_ALIGN_VIEW"]},{$:"var",ba:"BILLBOARD_SPHERICAL",aa:["0"]},{$:"var",ba:"BILLBOARD_RANDOM",aa:["0"]},{$:"var",ba:"BILLBOARD",aa:["0"]},{$:"var",ba:"BILLBOARD_JITTERED",aa:["0"]},{$:"var",ba:"BILLBOARD_PRES_GLOB_ORIENTATION",aa:["0"]},{$:"var",ba:"STATIC_BATCH",aa:["0"]},{$:"var",ba:"REFLECTION_PASS",aa:["REFL_PASS_NONE"]},{$:"define",ba:"MAX_BILLBOARD_ANGLE",aa:["M_PI_4"]},{$:"cond",da:[{$:"if",ga:["BILLBOARD_SPHERICAL",
"BILLBOARD",{$:"logic_negative_expr",ia:1},"BILLBOARD_ALIGN","BILLBOARD_ALIGN_VIEW",{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"mat3 bn ( vec3 KP , mat3 N ) { vec4 KQ = ry ( N ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 KR = X ( RIGHT_VECTOR , - M_PI / 2.0 ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec4 KR = X ( RIGHT_VECTOR , M_PI / 2.0 ) ;".split(" ")}]}}]},
{$:"txt",aa:"KQ = rc ( KR , KQ ) ; KQ = kV ( KQ ) ; mat3 bo = aY ( ) ; bo = aZ ( KP , bo ) ; bo = bc ( KQ , bo ) ; return bo ; }".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"mat3 KT ( vec3 lL , vec3 KP ) { vec3 KS = lL - KP ; KS . z = 0.0 ; KS = normalize ( KS ) ; vec4 KQ = ri ( KS , TOWARD_VECTOR ) ; mat3 bo = aY ( ) ; bo = aZ ( KP , bo ) ; bo = bc ( KQ , bo ) ; return bo ; }".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["BILLBOARD_JITTERED"],ha:{$:"grp",da:[{$:"txt",aa:"mat3 at ( in vec3 KU , float KV , float KW , float KX , vec3 bf , mat3 Z ) { float IV = fract ( length ( bf ) / 0.17 ) ; float KY = KX + IV / 10.0 ; float KZ = IV ; if ( KX != 0.0 ) KZ /= KX ; KU *= 1.0 + 0.5 * sin ( KV ) ; float K_ = length ( KU ) * KW * sin ( 2.0 * 3.14 * KV * KY + KZ ) ; vec4 La = X ( TOWARD_VECTOR , K_ ) ; vec4 Lb = ry ( Z ) ; Lb = rc ( Lb , La ) ; Z = bc ( Lb , Z ) ; return Z ; }".split(" ")}]}}]},
{$:"txt",aa:"mat3 as ( in vec3 lL , in vec3 aq , in mat3 N , in mat3 Z ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["BILLBOARD_SPHERICAL","BILLBOARD",{$:"logic_negative_expr",ia:1},"BILLBOARD_ALIGN","BILLBOARD_ALIGN_VIEW",{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"mat3 l_ = bn ( aq , N ) ;".split(" ")}]}},{$:"elif",ga:["BILLBOARD_RANDOM"],ha:{$:"grp",da:[{$:"txt",aa:"float IV = fract ( ( aq . x * 1.43 - aq . z * 0.123 + aq . y * 6.1 ) ) ; float Lc = 2.0 * M_PI * IV ; vec4 Ld = ry ( N ) ; float Le = asin ( 2.0 * ( Ld . x * Ld . y - Ld . z * Ld . w ) ) ; float hy = Le - Lc ; if ( hy < 0.0 ) hy = 2.0 * M_PI + hy ; float Lf = Lc ; if ( hy <= MAX_BILLBOARD_ANGLE ) Lf += hy ; else if ( hy <= M_PI - MAX_BILLBOARD_ANGLE ) Lf += MAX_BILLBOARD_ANGLE * ( 2.0 * hy - M_PI ) / ( 2.0 * MAX_BILLBOARD_ANGLE - M_PI ) ; else if ( hy <= M_PI + MAX_BILLBOARD_ANGLE ) Lf += hy - M_PI ; else if ( hy <= 2.0 * M_PI - MAX_BILLBOARD_ANGLE ) Lf += MAX_BILLBOARD_ANGLE * ( 2.0 * hy - M_PI ) / ( 2.0 * MAX_BILLBOARD_ANGLE - M_PI ) + M_PI ; else Lf += hy - 2.0 * M_PI ; vec4 Lg = X ( UP_VECTOR , Lf ) ; mat3 l_ = aY ( ) ; l_ = aZ ( aq , l_ ) ; l_ = bc ( Lg , l_ ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"mat3 l_ = KT ( lL , aq ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"Z = aZ ( vec3 ( 0.0 ) , Z ) ; l_ = bd ( l_ , Z ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 Lh = rA ( l_ ) ; vec3 Li = rA ( Z ) ; l_ = a_ ( Lh * Li , l_ ) ;".split(" ")}]}}]},{$:"txt",aa:"return l_ ; } au av ( in vec3 fr , in vec3 Lj , in vec3 Lk , in vec3 Ll , in vec3 Lm , in vec3 Ln , in mat3 Z ) { fr = ap ( Z , fr ) ; Lj = ap ( Z , Lj ) ; Lk = _ ( Z , Lk ) ; Ll = _ ( Z , Ll ) ; Lm = _ ( Z , Lm ) ; Ln = bI ( Z , Ln ) ; return ma ( au ( fr , Lj , Lk , Ll , Lm , Ln , vec3 ( 0.0 ) ) ) ; }".split(" ")}]}}]}]};
f["include/wind_bending.glslv"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"WIND_BENDING_GLSLV",ha:{$:"grp",da:[{$:"define",ba:"WIND_BENDING_GLSLV",aa:[""]},{$:"var",ba:"WIND_BEND",aa:["0"]},{$:"var",ba:"MAIN_BEND_COL",aa:["0"]},{$:"var",ba:"DETAIL_BEND",aa:["0"]},{$:"var",ba:"BEND_CENTER_ONLY",aa:["0"]},{$:"var",ba:"REFLECTION_PASS",aa:["REFL_PASS_NONE"]},{$:"var",ba:"BILLBOARD",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"cond",da:[{$:"if",ga:["WIND_BEND"],ha:{$:"grp",da:[{$:"txt",aa:"void LA ( inout vec3 bt , in vec3 Lo , in float Lp , in float Lq , in float fy , in vec3 KU , in float Lr , in mat4 b_ ) {".split(" ")},
{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2},"BILLBOARD",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 Ls = ( b_ * vec4 ( bt , 1.0 ) ) . xyz ; vec3 Lt = ( b_ * vec4 ( Lo , 1.0 ) ) . xyz ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 Ls = bt ; vec3 Lt = Lo ;".split(" ")}]}}]},{$:"txt",aa:"float dD = length ( Lt ) ; float Lu = Lq * ( 1.0 + 0.1 * fract ( dD ) ) ; float Lv = Lp * Lr * ( 1.0 + sin ( 2.0 * 3.14 * fy * Lu + dD ) ) ; float Lw = ( Ls . z - Lt . z ) * abs ( Lv ) ; Lw += 1.0 ; Lw *= Lw ; Lw = Lw * Lw - Lw ; vec3 Lx = Ls ; Lx . xy += KU . xy * Lw * sign ( Lv ) ; vec3 Ly = Lx - Lt ; if ( all ( equal ( Ly , vec3 ( 0.0 ) ) ) ) bt = Lo ; else {".split(" ")},
{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2},"BILLBOARD",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"Ly = ( b_ * vec4 ( Ly , 0.0 ) ) . xyz ;".split(" ")}]}}]},{$:"txt",aa:"float Lz = length ( Ls - Lt ) ; bt = Lo + normalize ( Ly ) * Lz ; } }".split(" ")},{$:"cond",da:[{$:"if",ga:["DETAIL_BEND"],ha:{$:"grp",da:[{$:"txt",aa:"vec4 LB ( vec4 x ) { return x * x * ( 3.0 - 2.0 * x ) ; } vec4 LC ( vec4 x ) { return abs ( fract ( x + 0.5 ) * 2.0 - 1.0 ) ; } vec4 LD ( vec4 x ) { return LB ( LC ( x ) ) ; } void LP ( inout vec3 bt , in float fy , in vec3 U , in vec3 KU , in vec3 Lo , in float LE , in float LF , in float LG , in vec3 LH , in mat4 b_ ) { float LI ; float LJ ; float LK ; vec2 LL ; vec4 LM ; vec2 LN ; vec3 LO ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2},"BILLBOARD",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 Ls = ( b_ * vec4 ( bt , 1.0 ) ) . xyz ; vec3 Lt = ( b_ * vec4 ( Lo , 1.0 ) ) . xyz ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 Ls = bt ; vec3 Lt = Lo ;".split(" ")}]}}]},{$:"txt",aa:"LI = dot ( Lt , vec3 ( 1.0 ) ) ; LJ = LI + LH . g ; LK = dot ( Ls , vec3 ( LH . g ) ) ; LL = ( fy + vec2 ( LK , LJ ) ) ; LM = ( ( fract ( ( LL . xxyy * vec4 ( 1.975 , 0.793 , 0.375 , 0.193 ) ) ) * 2.0 ) - 1.0 ) * length ( KU ) * LE ; LM = LD ( LM ) ; LN = LM . xz + LM . yw ; LN . y = 0.5 - LN . y ; LO = LN . xxy * LH . rrb * vec3 ( LF * U . x , LF * U . y , LG ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2},"BILLBOARD",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"LO = ( b_ * vec4 ( LO , 0.0 ) ) . xyz ;".split(" ")}]}}]},{$:"txt",aa:["bt","+=","LO",";","}"]}]}}]},{$:"txt",aa:"void ax ( inout vec3 O , inout vec3 ao , in vec3 U , in mat4 b_ ) { vec3 LQ = u_wind * 1.0 + 0.7 * sin ( u_time ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["BEND_CENTER_ONLY"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 LR = ao ; vec3 LS = a_emitter_center ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2},"BILLBOARD",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"LS = ( b_ * vec4 ( LS , 1.0 ) ) . xyz ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 LR = O ; vec3 LS = ao ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["MAIN_BEND_COL"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["DETAIL_BEND"],ha:{$:"grp",da:[{$:"txt",aa:"LP ( LR , u_time , U , LQ , LS , au_detail_bending_freq , au_detail_bending_amp , au_branch_bending_amp , a_bending_col_detail , b_ ) ;".split(" ")}]}}]},
{$:"txt",aa:"LA ( LR , LS , au_wind_bending_amp , au_wind_bending_freq , u_time , LQ , a_bending_col_main , b_ ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"LA ( LR , LS , au_wind_bending_amp , au_wind_bending_freq , u_time , LQ , 1.0 , b_ ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["BEND_CENTER_ONLY"],ha:{$:"grp",da:[{$:"txt",aa:"O += LR - ao ; ao = LR ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"O = LR ; ao = LS ;".split(" ")}]}}]},{$:"txt",aa:["}"]}]}}]}]}}]}]}}},function(D,
w,f){Object.defineProperty(w,"__esModule",{value:!0});f.d(w,"parser",function(){return N});var N=function(){function f(f,y,d,m,w,v){this.message=f;this.offset=m;this.line=w;this.po=v;this.name="SyntaxError"}(function(f,y){function d(){this.constructor=f}d.prototype=y.prototype;f.prototype=new d})(f,Error);return{SyntaxError:f,parse:function(n){function y(){var a;ba++;var b=a=x;ba++;var c=x;if(n.substr(x,7)===cb){var e=cb;x+=7}else e=g,0===ba&&v(ob);if(e!==g){var h=x;ba++;var d=oa();ba--;d===g?h=void 0:
(x=h,h=g);h!==g?c=e=[e,h]:(x=c,c=g)}else x=c,c=g;ba--;c===g?b=void 0:(x=b,b=g);b!==g?(b=Oa(),b!==g?a=b:(x=a,a=g)):(x=a,a=g);ba--;a===g&&0===ba&&v(Tb);return a}function d(a){for(var b="",c=0;c<a.length;c++)b+=a[c][1];return b}function m(a,b){a=[a];for(var c=0;c<b.length;c++)a.push(b[c][1]);return a}function w(a){if(Yd!==a){Yd>a&&(Yd=0,ne={line:1,po:1,Os:!1});var b=ne,c;for(c=Yd;c<a;c++){var g=n.charAt(c);"\n"===g?(b.Os||b.line++,b.po=1,b.Os=!1):"\r"===g||"\u2028"===g||"\u2029"===g?(b.line++,b.po=1,
b.Os=!0):(b.po++,b.Os=!1)}Yd=a}return ne}function v(a){x<ld||(x>ld&&(ld=x,Ed=[]),Ed.push(a))}function r(){var a=x;var b=ia();if(b!==g)if(b=p(),b!==g){var c=ia();c!==g?a=b:(x=a,a=g)}else x=a,a=g;else x=a,a=g;return a}function p(){var a=x;var b=z();if(b!==g){var c=[];var e=x;var h=ia();if(h!==g){var d=z();d!==g?e=h=[h,d]:(x=e,e=g)}else x=e,e=g;for(;e!==g;)c.push(e),e=x,h=ia(),h!==g?(d=z(),d!==g?e=h=[h,d]:(x=e,e=g)):(x=e,e=g);c!==g?a=b=m(b,c):(x=a,a=g)}else x=a,a=g;a===g&&(a=null);a!==g&&(a={$:"grp",
da:null!==a?a:[]});return a}function z(){var e;var f=x;var l=x;if(35===n.charCodeAt(x)){var m=Xa;x++}else m=g,0===ba&&v(Ea);if(m!==g){var q=la();if(q!==g){if(n.substr(x,2)===Za){var t=Za;x+=2}else t=g,0===ba&&v(Ua);if(t!==g){var u=sa();if(u!==g){var r=G();if(r!==g){var z=la();if(z!==g){var w=Aa();if(w!==g){var B=ia();if(B!==g){var A=p();A!==g?l=m={$:"if",ga:r,ha:A}:(x=l,l=g)}else x=l,l=g}else x=l,l=g}else x=l,l=g}else x=l,l=g}else x=l,l=g}else x=l,l=g}else x=l,l=g}else x=l,l=g;l===g&&(l=x,35===n.charCodeAt(x)?
(m=Xa,x++):(m=g,0===ba&&v(Ea)),m!==g?(q=la(),q!==g?(n.substr(x,5)===W?(t=W,x+=5):(t=g,0===ba&&v(La)),t!==g?(u=sa(),u!==g?(r=y(),r!==g?(z=la(),z!==g?(w=Aa(),w!==g?(B=ia(),B!==g?(A=p(),A!==g?l=m={$:"ifdef",ba:r,ha:A}:(x=l,l=g)):(x=l,l=g)):(x=l,l=g)):(x=l,l=g)):(x=l,l=g)):(x=l,l=g)):(x=l,l=g)):(x=l,l=g)):(x=l,l=g),l===g&&(l=x,35===n.charCodeAt(x)?(m=Xa,x++):(m=g,0===ba&&v(Ea)),m!==g?(q=la(),q!==g?(n.substr(x,6)===Ab?(t=Ab,x+=6):(t=g,0===ba&&v(Ya)),t!==g?(u=sa(),u!==g?(r=y(),r!==g?(z=la(),z!==g?(w=Aa(),
w!==g?(B=ia(),B!==g?(A=p(),A!==g?l=m={$:"ifndef",ba:r,ha:A}:(x=l,l=g)):(x=l,l=g)):(x=l,l=g)):(x=l,l=g)):(x=l,l=g)):(x=l,l=g)):(x=l,l=g)):(x=l,l=g)):(x=l,l=g)));var C=l;if(C!==g){var E=ia();if(E!==g){var I=[];for(e=a();e!==g;)I.push(e),e=a();if(I!==g)if(e=ia(),e!==g){var J=x;if(35===n.charCodeAt(x)){var R=Xa;x++}else R=g,0===ba&&v(Ea);if(R!==g){var P=la();if(P!==g){if(n.substr(x,4)===fa){var ja=fa;x+=4}else ja=g,0===ba&&v(Pa);if(ja!==g){var H=la();if(H!==g){var O=Aa();if(O!==g){var M=ia();if(M!==g){var K=
p();K!==g?J=R={$:"else",ha:K}:(x=J,J=g)}else x=J,J=g}else x=J,J=g}else x=J,J=g}else x=J,J=g}else x=J,J=g}else x=J,J=g;var ma=J;ma===g&&(ma=null);if(ma!==g){var da=ia();if(da!==g){var L=x;if(35===n.charCodeAt(x)){var T=Xa;x++}else T=g,0===ba&&v(Ea);if(T!==g){var N=la();if(N!==g){if(n.substr(x,5)===Wa){var Y=Wa;x+=5}else Y=g,0===ba&&v(hb);if(Y!==g){var V=la();if(V!==g){var Q=ya();Q!==g?L=T=[T,N,Y,V,Q]:(x=L,L=g)}else x=L,L=g}else x=L,L=g}else x=L,L=g}else x=L,L=g;var ka=L;if(ka!==g){for(var U=ma,X=[C],
ea=0;ea<I.length;ea++)X.push(I[ea]);null!==U&&X.push(U);f=C={$:"cond",da:X}}else x=f,f=g}else x=f,f=g}else x=f,f=g}else x=f,f=g;else x=f,f=g}else x=f,f=g}else x=f,f=g;var ca=f;if(ca===g){var S=x;if(35===n.charCodeAt(x)){var pa=Xa;x++}else pa=g,0===ba&&v(Ea);if(pa!==g){var aa=la();if(aa!==g){if(n.substr(x,7)===ib){var ha=ib;x+=7}else ha=g,0===ba&&v(Ja);if(ha!==g){var Z=la();if(Z!==g){var na=x;if(60===n.charCodeAt(x)){var qa=od;x++}else qa=g,0===ba&&v(pd);if(qa!==g){var oa=la();if(oa!==g){var Oa;var wa=
[];var Da=Oa=x;ba++;var xa=ya();xa===g&&(62===n.charCodeAt(x)?(xa=xc,x++):(xa=g,0===ba&&v(pc)));ba--;xa===g?Da=void 0:(x=Da,Da=g);Da!==g?(xa=za(),xa!==g?Oa=Da=[Da,xa]:(x=Oa,Oa=g)):(x=Oa,Oa=g);for(;Oa!==g;)wa.push(Oa),Da=Oa=x,ba++,xa=ya(),xa===g&&(62===n.charCodeAt(x)?(xa=xc,x++):(xa=g,0===ba&&v(pc))),ba--,xa===g?Da=void 0:(x=Da,Da=g),Da!==g?(xa=za(),xa!==g?Oa=Da=[Da,xa]:(x=Oa,Oa=g)):(x=Oa,Oa=g);wa!==g&&(wa=d(wa));var ua=wa;if(ua!==g){var Ba=la();if(Ba!==g){if(62===n.charCodeAt(x)){var Ga=xc;x++}else Ga=
g,0===ba&&v(pc);Ga!==g?na=qa=ua:(x=na,na=g)}else x=na,na=g}else x=na,na=g}else x=na,na=g}else x=na,na=g;if(na===g)if(na=x,34===n.charCodeAt(x)?(qa=Bc,x++):(qa=g,0===ba&&v(nc)),qa!==g)if(oa=la(),oa!==g){var ra;var Fa=[];var Na=ra=x;ba++;var va=ya();va===g&&(34===n.charCodeAt(x)?(va=Bc,x++):(va=g,0===ba&&v(nc)));ba--;va===g?Na=void 0:(x=Na,Na=g);Na!==g?(va=za(),va!==g?ra=Na=[Na,va]:(x=ra,ra=g)):(x=ra,ra=g);for(;ra!==g;)Fa.push(ra),Na=ra=x,ba++,va=ya(),va===g&&(34===n.charCodeAt(x)?(va=Bc,x++):(va=g,
0===ba&&v(nc))),ba--,va===g?Na=void 0:(x=Na,Na=g),Na!==g?(va=za(),va!==g?ra=Na=[Na,va]:(x=ra,ra=g)):(x=ra,ra=g);Fa!==g&&(Fa=d(Fa));ua=Fa;ua!==g?(Ba=la(),Ba!==g?(34===n.charCodeAt(x)?(Ga=Bc,x++):(Ga=g,0===ba&&v(nc)),Ga!==g?na=qa=ua:(x=na,na=g)):(x=na,na=g)):(x=na,na=g)}else x=na,na=g;else x=na,na=g;var Ha=na;if(Ha!==g){var Ca=la();if(Ca!==g){var Ka=ya();Ka!==g?S=pa={$:"include",oa:Ha}:(x=S,S=g)}else x=S,S=g}else x=S,S=g}else x=S,S=g}else x=S,S=g}else x=S,S=g}else x=S,S=g;if(S===g){S=x;35===n.charCodeAt(x)?
(pa=Xa,x++):(pa=g,0===ba&&v(Ea));if(pa!==g)if(aa=la(),aa!==g)if(n.substr(x,6)===eb?(ha=eb,x+=6):(ha=g,0===ba&&v(bb)),ha===g&&(n.substr(x,3)===Vb?(ha=Vb,x+=3):(ha=g,0===ba&&v(Pb))),ha!==g)if(Z=sa(),Z!==g)if(Ha=y(),Ha!==g){Ca=x;Ka=sa();if(Ka!==g){var Va=h();Va!==g?Ca=Ka=[Ka,Va]:(x=Ca,Ca=g)}else x=Ca,Ca=g;Ca===g&&(Ca=null);if(Ca!==g)if(Ka=la(),Ka!==g)if(Va=ya(),Va!==g){var Qa=ha,Ra=Ha,Sa=Ca,ab=[];if(null===Sa)ab.push("");else for(var db=0;db<Sa[1].length;db++)ab.push(Sa[1][db]);S=pa={$:Qa,ba:Ra,aa:ab}}else x=
S,S=g;else x=S,S=g;else x=S,S=g}else x=S,S=g;else x=S,S=g;else x=S,S=g;else x=S,S=g;else x=S,S=g;if(S===g){S=x;35===n.charCodeAt(x)?(pa=Xa,x++):(pa=g,0===ba&&v(Ea));if(pa!==g)if(aa=la(),aa!==g)if(n.substr(x,5)===kb?(ha=kb,x+=5):(ha=g,0===ba&&v(nb)),ha!==g)if(Z=x,Ha=sa(),Ha!==g?(Ca=h(),Ca!==g?Z=Ha=[Ha,Ca]:(x=Z,Z=g)):(x=Z,Z=g),Z===g&&(Z=null),Z!==g)if(Ha=la(),Ha!==g)if(Ca=ya(),Ca!==g){var gb=Z,jb=[];if(null!==gb)for(var lb=0;lb<gb[1].length;lb++)jb.push(gb[1][lb]);S=pa={$:"error",aa:jb}}else x=S,S=
g;else x=S,S=g;else x=S,S=g;else x=S,S=g;else x=S,S=g;else x=S,S=g;if(S===g&&(S=x,35===n.charCodeAt(x)?(pa=Xa,x++):(pa=g,0===ba&&v(Ea)),pa!==g?(aa=la(),aa!==g?(n.substr(x,4)===tb?(ha=tb,x+=4):(ha=g,0===ba&&v(Kb)),ha!==g?(Z=sa(),Z!==g?(Ha=h(),Ha!==g?(Ca=la(),Ca!==g?(Ka=ya(),Ka!==g?S=pa={$:"line",aa:Ha}:(x=S,S=g)):(x=S,S=g)):(x=S,S=g)):(x=S,S=g)):(x=S,S=g)):(x=S,S=g)):(x=S,S=g),S===g)){S=x;35===n.charCodeAt(x)?(pa=Xa,x++):(pa=g,0===ba&&v(Ea));if(pa!==g)if(aa=la(),aa!==g)if(n.substr(x,6)===wb?(ha=wb,
x+=6):(ha=g,0===ba&&v(Ia)),ha!==g)if(Z=sa(),Z!==g)if(Ha=y(),Ha!==g)if(Ca=sa(),Ca!==g)if(Ka=h(),Ka!==g)if(Va=la(),Va!==g){var qb=ya();qb!==g?S=pa={$:"pragma",ba:Ha,aa:Ka}:(x=S,S=g)}else x=S,S=g;else x=S,S=g;else x=S,S=g;else x=S,S=g;else x=S,S=g;else x=S,S=g;else x=S,S=g;else x=S,S=g;if(S===g&&(S=x,35===n.charCodeAt(x)?(pa=Xa,x++):(pa=g,0===ba&&v(Ea)),pa!==g?(aa=la(),aa!==g?(n.substr(x,5)===F?(ha=F,x+=5):(ha=g,0===ba&&v(Ma)),ha!==g?(Z=sa(),Z!==g?(Ha=y(),Ha!==g?(Ca=la(),Ca!==g?(Ka=ya(),Ka!==g?S=pa=
{$:"undef",ba:Ha}:(x=S,S=g)):(x=S,S=g)):(x=S,S=g)):(x=S,S=g)):(x=S,S=g)):(x=S,S=g)):(x=S,S=g),S===g)){S=x;35===n.charCodeAt(x)?(pa=Xa,x++):(pa=g,0===ba&&v(Ea));if(pa!==g)if(aa=la(),aa!==g)if(n.substr(x,7)===ub?(ha=ub,x+=7):(ha=g,0===ba&&v(Qb)),ha!==g)if(Z=x,Ha=sa(),Ha!==g?(Ca=h(),Ca!==g?Z=Ha=[Ha,Ca]:(x=Z,Z=g)):(x=Z,Z=g),Z===g&&(Z=null),Z!==g)if(Ha=la(),Ha!==g)if(Ca=ya(),Ca!==g){var pb=Z,rb=[];if(null!==pb)for(var vb=0;vb<pb[1].length;vb++)rb.push(pb[1][vb]);S=pa={$:"warning",aa:rb}}else x=S,S=g;else x=
S,S=g;else x=S,S=g;else x=S,S=g;else x=S,S=g;else x=S,S=g;if(S===g){S=x;35===n.charCodeAt(x)?(pa=Xa,x++):(pa=g,0===ba&&v(Ea));if(pa!==g)if(aa=la(),aa!==g)if(n.substr(x,9)===$a?(ha=$a,x+=9):(ha=g,0===ba&&v(ad)),ha!==g)if(Z=x,Ha=sa(),Ha!==g?(Ca=h(),Ca!==g?Z=Ha=[Ha,Ca]:(x=Z,Z=g)):(x=Z,Z=g),Z===g&&(Z=null),Z!==g)if(Ha=la(),Ha!==g)if(Ca=ya(),Ca!==g){var yb=Z,Bb=[];if(null!==yb)for(var zb=0;zb<yb[1].length;zb++)Bb.push(yb[1][zb]);S=pa={$:"extension",aa:Bb}}else x=S,S=g;else x=S,S=g;else x=S,S=g;else x=
S,S=g;else x=S,S=g;else x=S,S=g;if(S===g){S=x;35===n.charCodeAt(x)?(pa=Xa,x++):(pa=g,0===ba&&v(Ea));if(pa!==g)if(aa=la(),aa!==g)if(n.substr(x,7)===Hc?(ha=Hc,x+=7):(ha=g,0===ba&&v(Wb)),ha!==g)if(Z=sa(),Z!==g)if(Ha=ta(),Ha!==g)if(Ca=la(),Ca!==g)if(Ka=ya(),Ka!==g){var Db=[];null!==Ha&&Db.push(Ha);S=pa={$:"version",aa:Db}}else x=S,S=g;else x=S,S=g;else x=S,S=g;else x=S,S=g;else x=S,S=g;else x=S,S=g;else x=S,S=g;S===g&&(S=x,35===n.charCodeAt(x)?(pa=Xa,x++):(pa=g,0===ba&&v(Ea)),pa!==g?(aa=la(),aa!==g?(ha=
ya(),ha!==g?S=pa={$:"#"}:(x=S,S=g)):(x=S,S=g)):(x=S,S=g))}}}}}}ca=S;if(ca===g){var mb=x;var cb=x;if(35===n.charCodeAt(x)){var Gb=Xa;x++}else Gb=g,0===ba&&v(Ea);if(Gb!==g){var Jb=la();if(Jb!==g){if(n.substr(x,4)===sb){var Ib=sb;x+=4}else Ib=g,0===ba&&v(Ic);if(Ib!==g){var Mb=sa();if(Mb!==g){var Lb=y();if(Lb!==g){var Rb=la();if(Rb!==g){var Tb=Aa();if(Tb!==g){var Ub=ia();if(Ub!==g){var Nb=[];var ob=x;var fb=D();if(fb!==g){var Yb=ia();Yb!==g?ob=fb=[fb,Yb]:(x=ob,ob=g)}else x=ob,ob=g;for(;ob!==g;)Nb.push(ob),
ob=x,fb=D(),fb!==g?(Yb=ia(),Yb!==g?ob=fb=[fb,Yb]:(x=ob,ob=g)):(x=ob,ob=g);if(Nb!==g){ob=[];fb=x;Yb=k();if(Yb!==g){var xb=ia();xb!==g?fb=Yb=[Yb,xb]:(x=fb,fb=g)}else x=fb,fb=g;for(;fb!==g;)ob.push(fb),fb=x,Yb=k(),Yb!==g?(xb=ia(),xb!==g?fb=Yb=[Yb,xb]:(x=fb,fb=g)):(x=fb,fb=g);if(ob!==g){fb=[];Yb=x;xb=c();if(xb!==g){var Sb=ia();Sb!==g?Yb=xb=[xb,Sb]:(x=Yb,Yb=g)}else x=Yb,Yb=g;for(;Yb!==g;)fb.push(Yb),Yb=x,xb=c(),xb!==g?(Sb=ia(),Sb!==g?Yb=xb=[xb,Sb]:(x=Yb,Yb=g)):(x=Yb,Yb=g);if(fb!==g){for(var Xb=ob,$b=fb,
ac=[],Eb=0;Eb<Nb.length;Eb++)ac.push(Nb[Eb][0]);var bc=[];for(Eb=0;Eb<Xb.length;Eb++)bc.push(Xb[Eb][0]);var cc=[];for(Eb=0;Eb<$b.length;Eb++)cc.push($b[Eb][0]);cb=Gb={$:"node",ba:Lb,ma:ac,la:bc,ja:cc}}else x=cb,cb=g}else x=cb,cb=g}else x=cb,cb=g}else x=cb,cb=g}else x=cb,cb=g}else x=cb,cb=g}else x=cb,cb=g}else x=cb,cb=g}else x=cb,cb=g}else x=cb,cb=g}else x=cb,cb=g;var fc=cb;if(fc!==g){var jc=ia();if(jc!==g){var Fb=x;if(35===n.charCodeAt(x)){var Zb=Xa;x++}else Zb=g,0===ba&&v(Ea);if(Zb!==g){var ic=la();
if(ic!==g){if(n.substr(x,7)===Ta){var hc=Ta;x+=7}else hc=g,0===ba&&v(dc);if(hc!==g){var mc=la();if(mc!==g){var gc=ya();gc===g&&(gc=null);gc!==g?Fb=Zb=[Zb,ic,hc,mc,gc]:(x=Fb,Fb=g)}else x=Fb,Fb=g}else x=Fb,Fb=g}else x=Fb,Fb=g}else x=Fb,Fb=g;var sc=Fb;sc!==g?mb=fc:(x=mb,mb=g)}else x=mb,mb=g}else x=mb,mb=g;if(mb===g){var Hb=x;if(35===n.charCodeAt(x)){var kc=Xa;x++}else kc=g,0===ba&&v(Ea);if(kc!==g){var tc=la();if(tc!==g){if(n.substr(x,12)===lc){var qc=lc;x+=12}else qc=g,0===ba&&v(ec);if(qc!==g){var uc=
la();if(uc!==g){var vc=ya();vc!==g?Hb=kc={$:"nodes_global"}:(x=Hb,Hb=g)}else x=Hb,Hb=g}else x=Hb,Hb=g}else x=Hb,Hb=g}else x=Hb,Hb=g;mb=Hb;if(mb===g){var Ob=x;if(35===n.charCodeAt(x)){var rc=Xa;x++}else rc=g,0===ba&&v(Ea);if(rc!==g){var yc=la();if(yc!==g){if(n.substr(x,10)===Cb){var wc=Cb;x+=10}else wc=g,0===ba&&v(oc);if(wc!==g){var zc=la();if(zc!==g){var Ac=ya();Ac!==g?Ob=rc={$:"nodes_main"}:(x=Ob,Ob=g)}else x=Ob,Ob=g}else x=Ob,Ob=g}else x=Ob,Ob=g}else x=Ob,Ob=g;mb=Ob}}ca=mb;ca===g&&(ca=b())}}return ca}
function a(){var a=x;if(35===n.charCodeAt(x)){var b=Xa;x++}else b=g,0===ba&&v(Ea);if(b!==g)if(b=la(),b!==g)if(n.substr(x,4)===Sa?(b=Sa,x+=4):(b=g,0===ba&&v(Ka)),b!==g)if(b=sa(),b!==g)if(b=G(),b!==g){var c=la();if(c!==g)if(c=Aa(),c!==g)if(c=ia(),c!==g)if(c=p(),c!==g){var e=ia();e!==g?a=b={$:"elif",ga:b,ha:c}:(x=a,a=g)}else x=a,a=g;else x=a,a=g;else x=a,a=g;else x=a,a=g}else x=a,a=g;else x=a,a=g;else x=a,a=g;else x=a,a=g;else x=a,a=g;return a}function D(){var a=x;if(35===n.charCodeAt(x)){var b=Xa;x++}else b=
g,0===ba&&v(Ea);if(b!==g)if(b=la(),b!==g)if(n.substr(x,8)===zc?(b=zc,x+=8):(b=g,0===ba&&v(Bb)),b!==g)if(b=sa(),b!==g)if(b=y(),b!==g){var c=x;var e=sa();if(e!==g){var d=h();d!==g?c=e=[e,d]:(x=c,c=g)}else x=c,c=g;c===g&&(c=null);if(c!==g)if(e=la(),e!==g)if(d=Aa(),d!==g){a=c;c=[];if(null===a)c.push("");else for(e=0;e<a[1].length;e++)c.push(a[1][e]);a=b={$:"node_var",ba:b,aa:c}}else x=a,a=g;else x=a,a=g;else x=a,a=g}else x=a,a=g;else x=a,a=g;else x=a,a=g;else x=a,a=g;else x=a,a=g;return a}function k(){var a=
x;if(35===n.charCodeAt(x)){var b=Xa;x++}else b=g,0===ba&&v(Ea);if(b!==g)if(b=la(),b!==g)if(n.substr(x,7)===md?(b=md,x+=7):(b=g,0===ba&&v(db)),b!==g){var c=x;b=sa();if(b!==g){if(n.substr(x,8)===Lb){var e=Lb;x+=8}else e=g,0===ba&&v(gb);e!==g?c=b=[b,e]:(x=c,c=g)}else x=c,c=g;c===g&&(c=null);if(c!==g){b=x;e=sa();if(e!==g){var d=h();d!==g?b=e=[e,d]:(x=b,b=g)}else x=b,b=g;b===g&&(b=null);if(b!==g)if(e=la(),e!==g)if(d=Aa(),d!==g){a=c;c=[];if(null!==b)for(e=0;e<b[1].length;e++)c.push(b[1][e]);a=b={$:"node_in",
ba:c.pop(),fa:c,ea:!!a}}else x=a,a=g;else x=a,a=g;else x=a,a=g}else x=a,a=g}else x=a,a=g;else x=a,a=g;else x=a,a=g;if(a===g){a=x;35===n.charCodeAt(x)?(b=Xa,x++):(b=g,0===ba&&v(Ea));if(b!==g)if(b=la(),b!==g)if(n.substr(x,8)===hc?(b=hc,x+=8):(b=g,0===ba&&v(Hb)),b!==g)if(c=x,b=sa(),b!==g?(n.substr(x,8)===Lb?(e=Lb,x+=8):(e=g,0===ba&&v(gb)),e!==g?c=b=[b,e]:(x=c,c=g)):(x=c,c=g),c===g&&(c=null),c!==g)if(b=x,e=sa(),e!==g?(d=h(),d!==g?b=e=[e,d]:(x=b,b=g)):(x=b,b=g),b===g&&(b=null),b!==g)if(e=la(),e!==g)if(d=
Aa(),d!==g){a=c;c=[];if(null!==b)for(e=0;e<b[1].length;e++)c.push(b[1][e]);a=b={$:"node_out",ba:c.pop(),fa:c,ea:!!a}}else x=a,a=g;else x=a,a=g;else x=a,a=g;else x=a,a=g;else x=a,a=g;else x=a,a=g;else x=a,a=g;if(a===g)if(a=x,35===n.charCodeAt(x)?(b=Xa,x++):(b=g,0===ba&&v(Ea)),b!==g)if(b=la(),b!==g)if(n.substr(x,10)===qb?(b=qb,x+=10):(b=g,0===ba&&v(Ib)),b!==g)if(c=x,b=sa(),b!==g?(n.substr(x,8)===Lb?(e=Lb,x+=8):(e=g,0===ba&&v(gb)),e!==g?c=b=[b,e]:(x=c,c=g)):(x=c,c=g),c===g&&(c=null),c!==g)if(b=x,e=sa(),
e!==g?(d=h(),d!==g?b=e=[e,d]:(x=b,b=g)):(x=b,b=g),b===g&&(b=null),b!==g)if(e=la(),e!==g)if(d=Aa(),d!==g){a=c;c=[];if(null!==b)for(e=0;e<b[1].length;e++)c.push(b[1][e]);a=b={$:"node_param",ba:c.pop(),fa:c,ea:!!a}}else x=a,a=g;else x=a,a=g;else x=a,a=g;else x=a,a=g;else x=a,a=g;else x=a,a=g;else x=a,a=g}return a}function c(){var a=x;var e=x;if(35===n.charCodeAt(x)){var h=Xa;x++}else h=g,0===ba&&v(Ea);if(h!==g)if(h=la(),h!==g)if(n.substr(x,7)===lb?(h=lb,x+=7):(h=g,0===ba&&v(va)),h!==g)if(h=sa(),h!==
g)if(h=G(),h!==g){var d=la();if(d!==g)if(d=Aa(),d!==g)if(d=ia(),d!==g){d=[];var f=x;var k=c();if(k!==g){var m=ia();m!==g?f=k=[k,m]:(x=f,f=g)}else x=f,f=g;for(;f!==g;)d.push(f),f=x,k=c(),k!==g?(m=ia(),m!==g?f=k=[k,m]:(x=f,f=g)):(x=f,f=g);if(d!==g){e=h;h=d;d=[];for(f=0;f<h.length;f++)d.push(h[f][0]);e=h={$:"node_if",ga:e,ja:d}}else x=e,e=g}else x=e,e=g;else x=e,e=g;else x=e,e=g}else x=e,e=g;else x=e,e=g;else x=e,e=g;else x=e,e=g;else x=e,e=g;if(e===g){e=x;35===n.charCodeAt(x)?(h=Xa,x++):(h=g,0===ba&&
v(Ea));if(h!==g)if(h=la(),h!==g)if(n.substr(x,10)===pb?(h=pb,x+=10):(h=g,0===ba&&v(Qa)),h!==g)if(h=sa(),h!==g)if(h=y(),h!==g)if(d=la(),d!==g)if(d=Aa(),d!==g)if(d=ia(),d!==g){d=[];f=x;k=c();k!==g?(m=ia(),m!==g?f=k=[k,m]:(x=f,f=g)):(x=f,f=g);for(;f!==g;)d.push(f),f=x,k=c(),k!==g?(m=ia(),m!==g?f=k=[k,m]:(x=f,f=g)):(x=f,f=g);if(d!==g){e=h;h=d;d=[];for(f=0;f<h.length;f++)d.push(h[f][0]);e=h={$:"node_ifdef",ba:e,ja:d}}else x=e,e=g}else x=e,e=g;else x=e,e=g;else x=e,e=g;else x=e,e=g;else x=e,e=g;else x=
e,e=g;else x=e,e=g;else x=e,e=g;if(e===g)if(e=x,35===n.charCodeAt(x)?(h=Xa,x++):(h=g,0===ba&&v(Ea)),h!==g)if(h=la(),h!==g)if(n.substr(x,11)===Z?(h=Z,x+=11):(h=g,0===ba&&v(Jb)),h!==g)if(h=sa(),h!==g)if(h=y(),h!==g)if(d=la(),d!==g)if(d=Aa(),d!==g)if(d=ia(),d!==g){d=[];f=x;k=c();k!==g?(m=ia(),m!==g?f=k=[k,m]:(x=f,f=g)):(x=f,f=g);for(;f!==g;)d.push(f),f=x,k=c(),k!==g?(m=ia(),m!==g?f=k=[k,m]:(x=f,f=g)):(x=f,f=g);if(d!==g){e=h;h=d;d=[];for(f=0;f<h.length;f++)d.push(h[f][0]);e=h={$:"node_ifndef",ba:e,ja:d}}else x=
e,e=g}else x=e,e=g;else x=e,e=g;else x=e,e=g;else x=e,e=g;else x=e,e=g;else x=e,e=g;else x=e,e=g;else x=e,e=g}h=e;if(h!==g)if(e=ia(),e!==g){e=[];for(d=l();d!==g;)e.push(d),d=l();if(e!==g)if(d=ia(),d!==g){d=x;35===n.charCodeAt(x)?(f=Xa,x++):(f=g,0===ba&&v(Ea));if(f!==g)if(f=la(),f!==g)if(n.substr(x,9)===rb?(f=rb,x+=9):(f=g,0===ba&&v($c)),f!==g)if(f=la(),f!==g)if(f=Aa(),f!==g)if(f=ia(),f!==g){f=[];k=x;m=c();if(m!==g){var q=ia();q!==g?k=m=[m,q]:(x=k,k=g)}else x=k,k=g;for(;k!==g;)f.push(k),k=x,m=c(),
m!==g?(q=ia(),q!==g?k=m=[m,q]:(x=k,k=g)):(x=k,k=g);if(f!==g){d=[];for(k=0;k<f.length;k++)d.push(f[k][0]);d=f={$:"node_else",ja:d}}else x=d,d=g}else x=d,d=g;else x=d,d=g;else x=d,d=g;else x=d,d=g;else x=d,d=g;else x=d,d=g;d===g&&(d=null);if(d!==g)if(f=ia(),f!==g){f=x;35===n.charCodeAt(x)?(k=Xa,x++):(k=g,0===ba&&v(Ea));if(k!==g)if(m=la(),m!==g)if(n.substr(x,10)===Gb?(q=Gb,x+=10):(q=g,0===ba&&v(zb)),q!==g){var t=la();if(t!==g){var p=ya();p!==g?f=k=[k,m,q,t,p]:(x=f,f=g)}else x=f,f=g}else x=f,f=g;else x=
f,f=g;else x=f,f=g;if(f!==g){a=d;h=[h];for(d=0;d<e.length;d++)h.push(e[d]);null!==a&&h.push(a);a=h={$:"node_cond",da:h}}else x=a,a=g}else x=a,a=g;else x=a,a=g}else x=a,a=g;else x=a,a=g}else x=a,a=g;else x=a,a=g;a===g&&(a=b());return a}function l(){var a=x;if(35===n.charCodeAt(x)){var b=Xa;x++}else b=g,0===ba&&v(Ea);if(b!==g)if(b=la(),b!==g)if(n.substr(x,9)===Vc?(b=Vc,x+=9):(b=g,0===ba&&v(Ra)),b!==g)if(b=sa(),b!==g)if(b=G(),b!==g){var e=la();if(e!==g)if(e=Aa(),e!==g)if(e=ia(),e!==g){e=[];var h=x;var d=
c();if(d!==g){var f=ia();f!==g?h=d=[d,f]:(x=h,h=g)}else x=h,h=g;for(;h!==g;)e.push(h),h=x,d=c(),d!==g?(f=ia(),f!==g?h=d=[d,f]:(x=h,h=g)):(x=h,h=g);if(e!==g)if(h=ia(),h!==g){a=[];for(h=0;h<e.length;h++)a.push(e[h][0]);a=b={$:"node_elif",ga:b,ja:a}}else x=a,a=g;else x=a,a=g}else x=a,a=g;else x=a,a=g;else x=a,a=g}else x=a,a=g;else x=a,a=g;else x=a,a=g;else x=a,a=g;else x=a,a=g;return a}function b(){var a=h();a!==g&&(a={$:"txt",aa:a});return a}function h(){var a=x;var b=ta();if(b!==g){var c=[];var e=
x;var h=la();if(h!==g){var d=ta();d!==g?e=h=[h,d]:(x=e,e=g)}else x=e,e=g;for(;e!==g;)c.push(e),e=x,h=la(),h!==g?(d=ta(),d!==g?e=h=[h,d]:(x=e,e=g)):(x=e,e=g);c!==g?a=b=m(b,c):(x=a,a=g)}else x=a,a=g;return a}function G(){var a=x;var b=N();if(b!==g){var c=[];var e=x;var h=la();if(h!==g){if(44===n.charCodeAt(x)){var d=Gc;x++}else d=g,0===ba&&v(Zb);if(d!==g){var f=la();if(f!==g){var k=N();k!==g?e=h=[h,d,f,k]:(x=e,e=g)}else x=e,e=g}else x=e,e=g}else x=e,e=g;for(;e!==g;)c.push(e),e=x,h=la(),h!==g?(44===
n.charCodeAt(x)?(d=Gc,x++):(d=g,0===ba&&v(Zb)),d!==g?(f=la(),f!==g?(k=N(),k!==g?e=h=[h,d,f,k]:(x=e,e=g)):(x=e,e=g)):(x=e,e=g)):(x=e,e=g);c!==g?a=b=0==c.length?b:c[c.length-1]:(x=a,a=g)}else x=a,a=g;return a}function N(){var a=x;var b=u();if(b!==g){var c=la();if(c!==g)if(63===n.charCodeAt(x)?(c=kc,x++):(c=g,0===ba&&v(Ub)),c!==g)if(c=la(),c!==g)if(c=G(),c!==g){var e=la();e!==g?(58===n.charCodeAt(x)?(e=mb,x++):(e=g,0===ba&&v(jb)),e!==g?(e=la(),e!==g?(e=G(),e!==g?(a=b,a.push.apply(a,c),a.push.apply(a,
e),a.push({$:"conditional_expr",ia:3})):(x=a,a=g)):(x=a,a=g)):(x=a,a=g)):(x=a,a=g)}else x=a,a=g;else x=a,a=g;else x=a,a=g;else x=a,a=g}else x=a,a=g;a===g&&(a=u());return a}function u(){var a=x;var b=E();if(b!==g){var c=[];var e=x;var h=la();if(h!==g){var d=pa();if(d!==g){var f=la();if(f!==g){var k=E();k!==g?e=h=[h,d,f,k]:(x=e,e=g)}else x=e,e=g}else x=e,e=g}else x=e,e=g;for(;e!==g;)c.push(e),e=x,h=la(),h!==g?(d=pa(),d!==g?(f=la(),f!==g?(k=E(),k!==g?e=h=[h,d,f,k]:(x=e,e=g)):(x=e,e=g)):(x=e,e=g)):(x=
e,e=g);if(c!==g){if(a=b,c.length){b={$:"logical_or_expr",ia:c.length+1};for(e=0;e<c.length;e++)a.push.apply(a,c[e][3]);a.push(b)}}else x=a,a=g}else x=a,a=g;return a}function E(){var a=x;var b=R();if(b!==g){var c=[];var e=x;var h=la();if(h!==g){var d=ja();if(d!==g){var f=la();if(f!==g){var k=R();k!==g?e=h=[h,d,f,k]:(x=e,e=g)}else x=e,e=g}else x=e,e=g}else x=e,e=g;for(;e!==g;)c.push(e),e=x,h=la(),h!==g?(d=ja(),d!==g?(f=la(),f!==g?(k=R(),k!==g?e=h=[h,d,f,k]:(x=e,e=g)):(x=e,e=g)):(x=e,e=g)):(x=e,e=g);
if(c!==g){if(a=b,c.length){b={$:"logical_and_expr",ia:c.length+1};for(e=0;e<c.length;e++)a.push.apply(a,c[e][3]);a.push(b)}}else x=a,a=g}else x=a,a=g;return a}function R(){var a=x;var b=O();if(b!==g){var c=[];var e=x;var h=la();if(h!==g){var d=ma();if(d!==g){var f=la();if(f!==g){var k=O();k!==g?e=h=[h,d,f,k]:(x=e,e=g)}else x=e,e=g}else x=e,e=g}else x=e,e=g;for(;e!==g;)c.push(e),e=x,h=la(),h!==g?(d=ma(),d!==g?(f=la(),f!==g?(k=O(),k!==g?e=h=[h,d,f,k]:(x=e,e=g)):(x=e,e=g)):(x=e,e=g)):(x=e,e=g);if(c!==
g){if(a=b,c.length){b={$:"logical_bitor_expr",ia:c.length+1};for(e=0;e<c.length;e++)a.push.apply(a,c[e][3]);a.push(b)}}else x=a,a=g}else x=a,a=g;return a}function O(){var a=x;var b=L();if(b!==g){var c=[];var h=x;var d=la();if(d!==g){var f=e();if(f!==g){var k=la();if(k!==g){var l=L();l!==g?h=d=[d,f,k,l]:(x=h,h=g)}else x=h,h=g}else x=h,h=g}else x=h,h=g;for(;h!==g;)c.push(h),h=x,d=la(),d!==g?(f=e(),f!==g?(k=la(),k!==g?(l=L(),l!==g?h=d=[d,f,k,l]:(x=h,h=g)):(x=h,h=g)):(x=h,h=g)):(x=h,h=g);if(c!==g){if(a=
b,c.length){b={$:"logical_bitxor_expr",ia:c.length+1};for(h=0;h<c.length;h++)a.push.apply(a,c[h][3]);a.push(b)}}else x=a,a=g}else x=a,a=g;return a}function L(){var a=x;var b=B();if(b!==g){var c=[];var e=x;var h=la();if(h!==g){var d=t();if(d!==g){var f=la();if(f!==g){var k=B();k!==g?e=h=[h,d,f,k]:(x=e,e=g)}else x=e,e=g}else x=e,e=g}else x=e,e=g;for(;e!==g;)c.push(e),e=x,h=la(),h!==g?(d=t(),d!==g?(f=la(),f!==g?(k=B(),k!==g?e=h=[h,d,f,k]:(x=e,e=g)):(x=e,e=g)):(x=e,e=g)):(x=e,e=g);if(c!==g){if(a=b,c.length){b=
{$:"logical_bitand_expr",ia:c.length+1};for(e=0;e<c.length;e++)a.push.apply(a,c[e][3]);a.push(b)}}else x=a,a=g}else x=a,a=g;return a}function B(){var a=x;var b=Y();if(b!==g){var c=[];var e=x;var h=la();if(h!==g){var d=I();if(d!==g){var f=la();if(f!==g){var k=Y();k!==g?e=h=[h,d,f,k]:(x=e,e=g)}else x=e,e=g}else x=e,e=g}else x=e,e=g;for(;e!==g;)c.push(e),e=x,h=la(),h!==g?(d=I(),d!==g?(f=la(),f!==g?(k=Y(),k!==g?e=h=[h,d,f,k]:(x=e,e=g)):(x=e,e=g)):(x=e,e=g)):(x=e,e=g);if(c!==g)for(a=b,b=0;b<c.length;b++)switch(c[b][1]){case "==":e=
{$:"equal_expr",ia:2};a.push.apply(a,c[b][3]);a.push(e);break;case "!=":e={$:"non_equal_expr",ia:2},a.push.apply(a,c[b][3]),a.push(e)}else x=a,a=g}else x=a,a=g;return a}function Y(){var a=x;var b=K();if(b!==g){var c=[];var e=x;var h=la();if(h!==g){var d=da();if(d!==g){var f=la();if(f!==g){var k=K();k!==g?e=h=[h,d,f,k]:(x=e,e=g)}else x=e,e=g}else x=e,e=g}else x=e,e=g;for(;e!==g;)c.push(e),e=x,h=la(),h!==g?(d=da(),d!==g?(f=la(),f!==g?(k=K(),k!==g?e=h=[h,d,f,k]:(x=e,e=g)):(x=e,e=g)):(x=e,e=g)):(x=e,
e=g);if(c!==g)for(a=b,b=0;b<c.length;b++)switch(c[b][1]){case "<=":e={$:"le_expr",ia:2};a.push.apply(a,c[b][3]);a.push(e);break;case ">=":e={$:"ge_expr",ia:2};a.push.apply(a,c[b][3]);a.push(e);break;case "<":e={$:"l_expr",ia:2};a.push.apply(a,c[b][3]);a.push(e);break;case ">":e={$:"g_expr",ia:2},a.push.apply(a,c[b][3]),a.push(e)}else x=a,a=g}else x=a,a=g;return a}function K(){var a=x;var b=U();if(b!==g){var c=[];var e=x;var h=la();if(h!==g){var d=q();if(d!==g){var f=la();if(f!==g){var k=U();k!==g?
e=h=[h,d,f,k]:(x=e,e=g)}else x=e,e=g}else x=e,e=g}else x=e,e=g;for(;e!==g;)c.push(e),e=x,h=la(),h!==g?(d=q(),d!==g?(f=la(),f!==g?(k=U(),k!==g?e=h=[h,d,f,k]:(x=e,e=g)):(x=e,e=g)):(x=e,e=g)):(x=e,e=g);if(c!==g)for(a=b,b=0;b<c.length;b++)switch(c[b][1]){case "<<":e={$:"left_shift_expr",ia:2};a.push.apply(a,c[b][3]);a.push(e);break;case ">>":e={$:"right_shift_expr",ia:2},a.push.apply(a,c[b][3]),a.push(e)}else x=a,a=g}else x=a,a=g;return a}function U(){var a=x;var b=T();if(b!==g){var c=[];var e=x;var h=
la();if(h!==g){var d=P();if(d!==g){var f=la();if(f!==g){var k=T();k!==g?e=h=[h,d,f,k]:(x=e,e=g)}else x=e,e=g}else x=e,e=g}else x=e,e=g;for(;e!==g;)c.push(e),e=x,h=la(),h!==g?(d=P(),d!==g?(f=la(),f!==g?(k=T(),k!==g?e=h=[h,d,f,k]:(x=e,e=g)):(x=e,e=g)):(x=e,e=g)):(x=e,e=g);if(c!==g)for(a=b,b=0;b<c.length;b++)switch(c[b][1]){case "+":e={$:"add_expr",ia:2};a.push.apply(a,c[b][3]);a.push(e);break;case "-":e={$:"sub_expr",ia:2},a.push.apply(a,c[b][3]),a.push(e)}else x=a,a=g}else x=a,a=g;return a}function T(){var a=
x;var b=V();if(b!==g){var c=[];var e=x;var h=la();if(h!==g){var d=J();if(d!==g){var f=la();if(f!==g){var k=V();k!==g?e=h=[h,d,f,k]:(x=e,e=g)}else x=e,e=g}else x=e,e=g}else x=e,e=g;for(;e!==g;)c.push(e),e=x,h=la(),h!==g?(d=J(),d!==g?(f=la(),f!==g?(k=V(),k!==g?e=h=[h,d,f,k]:(x=e,e=g)):(x=e,e=g)):(x=e,e=g)):(x=e,e=g);if(c!==g)for(a=b,b=0;b<c.length;b++)switch(c[b][1]){case "*":e={$:"mul_expr",ia:2};a.push.apply(a,c[b][3]);a.push(e);break;case "/":e={$:"div_expr",ia:2};a.push.apply(a,c[b][3]);a.push(e);
break;case "%":e={$:"mod_expr",ia:2},a.push.apply(a,c[b][3]),a.push(e)}else x=a,a=g}else x=a,a=g;return a}function V(){var a=x;if(n.substr(x,7)===cb){var b=cb;x+=7}else b=g,0===ba&&v(ob);if(b!==g){var c=la();c!==g?(c=aa(),c!==g?a=c:(x=a,a=g)):(x=a,a=g)}else x=a,a=g;if(a===g){a=x;b=A();if(b!==g)if(c=la(),c!==g)if(n.substr(x,2)===hd?(c=hd,x+=2):(c=g,0===ba&&v(Mc)),c===g&&(n.substr(x,2)===Nc?(c=Nc,x+=2):(c=g,0===ba&&v(Oc))),c!==g)switch(a=b,c){case "++":b={$:"post_inc_expr",ia:1};a.push(b);break;case "--":b=
{$:"post_dec_expr",ia:1},a.push(b)}else x=a,a=g;else x=a,a=g;else x=a,a=g;a===g&&(a=A());if(a===g)if(a=x,n.substr(x,2)===hd?(b=hd,x+=2):(b=g,0===ba&&v(Mc)),b===g&&(n.substr(x,2)===Nc?(b=Nc,x+=2):(b=g,0===ba&&v(Oc)),b===g&&(43===n.charCodeAt(x)?(b=Fc,x++):(b=g,0===ba&&v(Qd)),b===g&&(45===n.charCodeAt(x)?(b=id,x++):(b=g,0===ba&&v(Fd)),b===g&&(126===n.charCodeAt(x)?(b=oe,x++):(b=g,0===ba&&v(Zd)),b===g&&(33===n.charCodeAt(x)?(b=Gd,x++):(b=g,0===ba&&v(xe))))))),b!==g)if(c=la(),c!==g)if(c=V(),c!==g)switch(a=
c,b){case "++":b={$:"pre_inc_expr",ia:1};a.push(b);break;case "--":b={$:"pre_dec_expr",ia:1};a.push(b);break;case "+":b={$:"positive_expr",ia:1};a.push(b);break;case "-":b={$:"negative_expr",ia:1};a.push(b);break;case "~":b={$:"one_compl_expr",ia:1};a.push(b);break;case "!":b={$:"logic_negative_expr",ia:1},a.push(b)}else x=a,a=g;else x=a,a=g;else x=a,a=g}return a}function A(){ba++;var a=ca();if(a===g){a=x;var b=ea();a=b!==g?n.substring(a,x):b;a!==g&&(a=parseInt(a))}ba--;a===g&&0===ba&&v(Fb);b=a;b!==
g&&(b=[b]);a=b;if(a===g&&(b=y(),b!==g&&(b=[b]),a=b,a===g))if(a=x,40===n.charCodeAt(x)?(b=yb,x++):(b=g,0===ba&&v(tc)),b!==g)if(b=la(),b!==g)if(b=G(),b!==g){var c=la();c!==g?(41===n.charCodeAt(x)?(c=cc,x++):(c=g,0===ba&&v(Ac)),c!==g?a=b:(x=a,a=g)):(x=a,a=g)}else x=a,a=g;else x=a,a=g;else x=a,a=g;return a}function aa(){var a;var b=y();b!==g&&(b=[b]);var c=b;if(c===g){b=[];var e=a=x;ba++;if(40===n.charCodeAt(x)){var h=yb;x++}else h=g,0===ba&&v(tc);h===g&&(41===n.charCodeAt(x)?(h=cc,x++):(h=g,0===ba&&
v(Ac)));ba--;h===g?e=void 0:(x=e,e=g);e!==g?(h=za(),h!==g?a=e=[e,h]:(x=a,a=g)):(x=a,a=g);if(a!==g)for(;a!==g;)b.push(a),e=a=x,ba++,40===n.charCodeAt(x)?(h=yb,x++):(h=g,0===ba&&v(tc)),h===g&&(41===n.charCodeAt(x)?(h=cc,x++):(h=g,0===ba&&v(Ac))),ba--,h===g?e=void 0:(x=e,e=g),e!==g?(h=za(),h!==g?a=e=[e,h]:(x=a,a=g)):(x=a,a=g);else b=g;b!==g&&(b=1);c=b;c===g&&(c=x,40===n.charCodeAt(x)?(b=yb,x++):(b=g,0===ba&&v(tc)),b!==g?(a=la(),a!==g?(e=aa(),e!==g?(h=la(),h!==g?(41===n.charCodeAt(x)?(b=cc,x++):(b=g,
0===ba&&v(Ac)),b!==g?c=e:(x=c,c=g)):(x=c,c=g)):(x=c,c=g)):(x=c,c=g)):(x=c,c=g))}return c}function J(){var a=x;if(42===n.charCodeAt(x)){var b=Hd;x++}else b=g,0===ba&&v(xb);b===g&&(47===n.charCodeAt(x)?(b=ie,x++):(b=g,0===ba&&v(ye)),b===g&&(37===n.charCodeAt(x)?(b=$d,x++):(b=g,0===ba&&v(Rd))));if(b!==g){var c=x;ba++;if(61===n.charCodeAt(x)){var e=xd;x++}else e=g,0===ba&&v(Cc);ba--;e===g?c=void 0:(x=c,c=g);c!==g?a=b:(x=a,a=g)}else x=a,a=g;return a}function P(){var a=x;if(43===n.charCodeAt(x)){var b=
Fc;x++}else b=g,0===ba&&v(Qd);if(b!==g){b=x;ba++;if(43===n.charCodeAt(x)){var c=Fc;x++}else c=g,0===ba&&v(Qd);c===g&&(61===n.charCodeAt(x)?(c=xd,x++):(c=g,0===ba&&v(Cc)));ba--;c===g?b=void 0:(x=b,b=g);b!==g?a="+":(x=a,a=g)}else x=a,a=g;a===g&&(a=x,45===n.charCodeAt(x)?(b=id,x++):(b=g,0===ba&&v(Fd)),b!==g?(b=x,ba++,45===n.charCodeAt(x)?(c=id,x++):(c=g,0===ba&&v(Fd)),c===g&&(61===n.charCodeAt(x)?(c=xd,x++):(c=g,0===ba&&v(Cc))),ba--,c===g?b=void 0:(x=b,b=g),b!==g?a="-":(x=a,a=g)):(x=a,a=g));return a}
function q(){if(n.substr(x,2)===bd){var a=bd;x+=2}else a=g,0===ba&&v(fc);a===g&&(n.substr(x,2)===nd?(a=nd,x+=2):(a=g,0===ba&&v(yd)));return a}function da(){if(n.substr(x,2)===cd){var a=cd;x+=2}else a=g,0===ba&&v(Pc);a===g&&(n.substr(x,2)===ic?(a=ic,x+=2):(a=g,0===ba&&v(Rb)),a===g&&(60===n.charCodeAt(x)?(a=od,x++):(a=g,0===ba&&v(pd)),a===g&&(62===n.charCodeAt(x)?(a=xc,x++):(a=g,0===ba&&v(pc)))));return a}function I(){if(n.substr(x,2)===Mb){var a=Mb;x+=2}else a=g,0===ba&&v(Qc);a===g&&(n.substr(x,2)===
Jc?(a=Jc,x+=2):(a=g,0===ba&&v(mc)));return a}function t(){var a=x;if(38===n.charCodeAt(x)){var b=qc;x++}else b=g,0===ba&&v(jc);if(b!==g){b=x;ba++;if(38===n.charCodeAt(x)){var c=qc;x++}else c=g,0===ba&&v(jc);ba--;c===g?b=void 0:(x=b,b=g);b!==g?a="&":(x=a,a=g)}else x=a,a=g;return a}function e(){var a=x;if(94===n.charCodeAt(x)){var b=Dc;x++}else b=g,0===ba&&v(uc);if(b!==g){b=x;ba++;if(94===n.charCodeAt(x)){var c=Dc;x++}else c=g,0===ba&&v(uc);ba--;c===g?b=void 0:(x=b,b=g);b!==g?a="^":(x=a,a=g)}else x=
a,a=g;return a}function ma(){var a=x;if(124===n.charCodeAt(x)){var b=Sb;x++}else b=g,0===ba&&v(jd);if(b!==g){b=x;ba++;if(124===n.charCodeAt(x)){var c=Sb;x++}else c=g,0===ba&&v(jd);ba--;c===g?b=void 0:(x=b,b=g);b!==g?a="|":(x=a,a=g)}else x=a,a=g;return a}function ja(){if(n.substr(x,2)===vb){var a=vb;x+=2}else a=g,0===ba&&v($b);a!==g&&(a="&&");return a}function pa(){if(n.substr(x,2)===Nb){var a=Nb;x+=2}else a=g,0===ba&&v(vc);a!==g&&(a="||");return a}function ta(){var a=y();if(a===g){ba++;a=x;var b=
ca();if(b===g){var c=b=x;var e=ea();if(e!==g){if(46===n.charCodeAt(x)){var h=Ec;x++}else h=g,0===ba&&v(Kc);if(h!==g){var d=Da();d===g&&(d=null);if(d!==g){var f=Na();f===g&&(f=null);f!==g?c=e=[e,h,d,f]:(x=c,c=g)}else x=c,c=g}else x=c,c=g}else x=c,c=g;b=c!==g?n.substring(b,x):c;b===g&&(c=b=x,46===n.charCodeAt(x)?(e=Ec,x++):(e=g,0===ba&&v(Kc)),e!==g?(h=Da(),h!==g?(d=Na(),d===g&&(d=null),d!==g?c=e=[e,h,d]:(x=c,c=g)):(x=c,c=g)):(x=c,c=g),b=c!==g?n.substring(b,x):c,b===g&&(c=b=x,e=ea(),e!==g?(h=Na(),h===
g&&(h=null),h!==g?c=e=[e,h]:(x=c,c=g)):(x=c,c=g),b=c!==g?n.substring(b,x):c))}b!==g?(c=x,ba++,e=M(),ba--,e===g?c=void 0:(x=c,c=g),c!==g?a=b:(x=a,a=g)):(x=a,a=g);ba--;a===g&&0===ba&&v(Fb);if(a===g){ba++;a=x;34===n.charCodeAt(x)?(b=Bc,x++):(b=g,0===ba&&v(nc));if(b!==g){c=[];e=X();if(e!==g)for(;e!==g;)c.push(e),e=X();else c=g;c!==g&&(c=c.join(""));c===g&&(c=null);c!==g?(34===n.charCodeAt(x)?(e=Bc,x++):(e=g,0===ba&&v(nc)),e!==g?a=b=[b,c,e]:(x=a,a=g)):(x=a,a=g)}else x=a,a=g;if(a===g)if(a=x,39===n.charCodeAt(x)?
(b=Md,x++):(b=g,0===ba&&v(td)),b!==g){c=[];e=Ga();if(e!==g)for(;e!==g;)c.push(e),e=Ga();else c=g;c!==g&&(c=c.join(""));c===g&&(c=null);c!==g?(39===n.charCodeAt(x)?(e=Md,x++):(e=g,0===ba&&v(td)),e!==g?a=b=[b,c,e]:(x=a,a=g)):(x=a,a=g)}else x=a,a=g;a!==g&&(a='"'+a[1]+'"');ba--;a===g&&0===ba&&v(Bd);a===g&&(ba++,n.substr(x,2)===ze?(a=ze,x+=2):(a=g,0===ba&&v(Ae)),a===g&&(n.substr(x,2)===re?(a=re,x+=2):(a=g,0===ba&&v(Yc)),a===g&&(n.substr(x,2)===ud?(a=ud,x+=2):(a=g,0===ba&&v(Tc)),a===g&&(n.substr(x,2)===
Cd?(a=Cd,x+=2):(a=g,0===ba&&v(Wd)),a===g&&(n.substr(x,2)===Dd?(a=Dd,x+=2):(a=g,0===ba&&v(fe)),a===g&&(n.substr(x,2)===Nd?(a=Nd,x+=2):(a=g,0===ba&&v(vd)),a===g&&(n.substr(x,2)===Od?(a=Od,x+=2):(a=g,0===ba&&v(le)),a===g&&(n.substr(x,2)===se?(a=se,x+=2):(a=g,0===ba&&v(ge)),a===g&&(n.substr(x,2)===bd?(a=bd,x+=2):(a=g,0===ba&&v(fc)),a===g&&(n.substr(x,2)===nd?(a=nd,x+=2):(a=g,0===ba&&v(yd)),a===g&&(n.substr(x,3)===te?(a=te,x+=3):(a=g,0===ba&&v(ue)),a===g&&(n.substr(x,3)===ve?(a=ve,x+=3):(a=g,0===ba&&v(Be)),
a===g&&(n.substr(x,2)===Mb?(a=Mb,x+=2):(a=g,0===ba&&v(Qc)),a===g&&(n.substr(x,2)===Jc?(a=Jc,x+=2):(a=g,0===ba&&v(mc)),a===g&&(n.substr(x,2)===cd?(a=cd,x+=2):(a=g,0===ba&&v(Pc)),a===g&&(n.substr(x,2)===ic?(a=ic,x+=2):(a=g,0===ba&&v(Rb)),a===g&&(n.substr(x,2)===vb?(a=vb,x+=2):(a=g,0===ba&&v($b)),a===g&&(n.substr(x,2)===Nb?(a=Nb,x+=2):(a=g,0===ba&&v(vc)),a===g&&(n.substr(x,2)===hd?(a=hd,x+=2):(a=g,0===ba&&v(Mc)),a===g&&(n.substr(x,2)===Nc?(a=Nc,x+=2):(a=g,0===ba&&v(Oc)),a===g&&(123===n.charCodeAt(x)?
(a=gd,x++):(a=g,0===ba&&v(Xb)),a===g&&(125===n.charCodeAt(x)?(a=He,x++):(a=g,0===ba&&v(Ie)),a===g&&(91===n.charCodeAt(x)?(a=Je,x++):(a=g,0===ba&&v(Ke)),a===g&&(93===n.charCodeAt(x)?(a=Le,x++):(a=g,0===ba&&v(Me)),a===g&&(40===n.charCodeAt(x)?(a=yb,x++):(a=g,0===ba&&v(tc)),a===g&&(41===n.charCodeAt(x)?(a=cc,x++):(a=g,0===ba&&v(Ac)),a===g&&(59===n.charCodeAt(x)?(a=Ne,x++):(a=g,0===ba&&v(Oe)),a===g&&(58===n.charCodeAt(x)?(a=mb,x++):(a=g,0===ba&&v(jb)),a===g&&(63===n.charCodeAt(x)?(a=kc,x++):(a=g,0===
ba&&v(Ub)),a===g&&(46===n.charCodeAt(x)?(a=Ec,x++):(a=g,0===ba&&v(Kc)),a===g&&(43===n.charCodeAt(x)?(a=Fc,x++):(a=g,0===ba&&v(Qd)),a===g&&(45===n.charCodeAt(x)?(a=id,x++):(a=g,0===ba&&v(Fd)),a===g&&(42===n.charCodeAt(x)?(a=Hd,x++):(a=g,0===ba&&v(xb)),a===g&&(47===n.charCodeAt(x)?(a=ie,x++):(a=g,0===ba&&v(ye)),a===g&&(37===n.charCodeAt(x)?(a=$d,x++):(a=g,0===ba&&v(Rd)),a===g&&(94===n.charCodeAt(x)?(a=Dc,x++):(a=g,0===ba&&v(uc)),a===g&&(38===n.charCodeAt(x)?(a=qc,x++):(a=g,0===ba&&v(jc)),a===g&&(124===
n.charCodeAt(x)?(a=Sb,x++):(a=g,0===ba&&v(jd)),a===g&&(126===n.charCodeAt(x)?(a=oe,x++):(a=g,0===ba&&v(Zd)),a===g&&(33===n.charCodeAt(x)?(a=Gd,x++):(a=g,0===ba&&v(xe)),a===g&&(61===n.charCodeAt(x)?(a=xd,x++):(a=g,0===ba&&v(Cc)),a===g&&(60===n.charCodeAt(x)?(a=od,x++):(a=g,0===ba&&v(pd)),a===g&&(62===n.charCodeAt(x)?(a=xc,x++):(a=g,0===ba&&v(pc)),a===g&&(44===n.charCodeAt(x)?(a=Gc,x++):(a=g,0===ba&&v(Zb))))))))))))))))))))))))))))))))))))))))))))),ba--,a===g&&0===ba&&v(ke))}}return a}function Oa(){var a;
ba++;var b=x;var c=M();if(c!==g){var e=[];for(a=oa();a!==g;)e.push(a),a=oa();e!==g?b=c+=e.join(""):(x=b,b=g)}else x=b,b=g;ba--;b===g&&0===ba&&v(Tb);return b}function M(){if(Ob.test(n.charAt(x))){var a=n.charAt(x);x++}else a=g,0===ba&&v(rc);a===g&&(36===n.charCodeAt(x)?(a=ac,x++):(a=g,0===ba&&v(Eb)),a===g&&(95===n.charCodeAt(x)?(a=ab,x++):(a=g,0===ba&&v(bc))));return a}function oa(){var a=M();a===g&&(a=S());return a}function ca(){var a=x;if(48===n.charCodeAt(x)){var b=ed;x++}else b=g,0===ba&&v(kd);
if(b!==g)if(Sd.test(n.charAt(x))?(b=n.charAt(x),x++):(b=g,0===ba&&v(Kd)),b!==g){b=x;var c=[];var e=wa();if(e!==g)for(;e!==g;)c.push(e),e=wa();else c=g;b=c!==g?n.substring(b,x):c;b!==g?a=b=String(parseInt("0x"+b)):(x=a,a=g)}else x=a,a=g;else x=a,a=g;return a}function ea(){if(48===n.charCodeAt(x)){var a=ed;x++}else a=g,0===ba&&v(kd);if(a===g){a=x;if(rd.test(n.charAt(x))){var b=n.charAt(x);x++}else b=g,0===ba&&v(Xc);if(b!==g){var c=Da();c===g&&(c=null);c!==g?a=b=[b,c]:(x=a,a=g)}else x=a,a=g}return a}
function Da(){var a=[];var b=S();if(b!==g)for(;b!==g;)a.push(b),b=S();else a=g;return a}function S(){if(Sc.test(n.charAt(x))){var a=n.charAt(x);x++}else a=g,0===ba&&v(zd);return a}function Na(){var a=x;if(wc.test(n.charAt(x))){var b=n.charAt(x);x++}else b=g,0===ba&&v(Td);if(b!==g){var c=x;if(Ld.test(n.charAt(x))){var e=n.charAt(x);x++}else e=g,0===ba&&v(Ud);e===g&&(e=null);if(e!==g){var h=Da();h!==g?c=e=[e,h]:(x=c,c=g)}else x=c,c=g;c!==g?a=b=[b,c]:(x=a,a=g)}else x=a,a=g;return a}function wa(){if(Vd.test(n.charAt(x))){var a=
n.charAt(x);x++}else a=g,0===ba&&v(Ad);return a}function X(){var a;var b=a=x;ba++;if(34===n.charCodeAt(x)){var c=Bc;x++}else c=g,0===ba&&v(nc);c===g&&(92===n.charCodeAt(x)?(c=fd,x++):(c=g,0===ba&&v(sc)),c===g&&(c=Q()));ba--;c===g?b=void 0:(x=b,b=g);b!==g?(c=za(),c!==g?a=c:(x=a,a=g)):(x=a,a=g);a===g&&(a=x,92===n.charCodeAt(x)?(b=fd,x++):(b=g,0===ba&&v(sc)),b!==g?(c=ua(),c!==g?a=c:(x=a,a=g)):(x=a,a=g),a===g&&(a=Ha()));return a}function Ga(){var a;var b=a=x;ba++;if(39===n.charCodeAt(x)){var c=Md;x++}else c=
g,0===ba&&v(td);c===g&&(92===n.charCodeAt(x)?(c=fd,x++):(c=g,0===ba&&v(sc)),c===g&&(c=Q()));ba--;c===g?b=void 0:(x=b,b=g);b!==g?(c=za(),c!==g?a=c:(x=a,a=g)):(x=a,a=g);a===g&&(a=x,92===n.charCodeAt(x)?(b=fd,x++):(b=g,0===ba&&v(sc)),b!==g?(c=ua(),c!==g?a=c:(x=a,a=g)):(x=a,a=g),a===g&&(a=Ha()));return a}function Ha(){var a=x;if(92===n.charCodeAt(x)){var b=fd;x++}else b=g,0===ba&&v(sc);b!==g?(b=ya(),b!==g?a=b:(x=a,a=g)):(x=a,a=g);return a}function ua(){var a=Ca();if(a===g){var b=a=x;ba++;var c=Ca();c===
g&&(c=S(),c===g&&(120===n.charCodeAt(x)?(c=je,x++):(c=g,0===ba&&v(ee)),c===g&&(117===n.charCodeAt(x)?(c=pe,x++):(c=g,0===ba&&v(qe)))));ba--;c===g?b=void 0:(x=b,b=g);b===g&&(b=Q());b!==g?(b=za(),b!==g?a=b:(x=a,a=g)):(x=a,a=g)}if(a===g&&(a=x,48===n.charCodeAt(x)?(b=ed,x++):(b=g,0===ba&&v(kd)),b!==g?(b=x,ba++,c=S(),ba--,c===g?b=void 0:(x=b,b=g),b!==g?a="\x00":(x=a,a=g)):(x=a,a=g),a===g))if(a=x,120===n.charCodeAt(x)?(b=je,x++):(b=g,0===ba&&v(ee)),b!==g){c=b=x;var e=wa();if(e!==g){var h=wa();h!==g?c=e=
[e,h]:(x=c,c=g)}else x=c,c=g;b=c!==g?n.substring(b,x):c;b!==g?a=b=String.fromCharCode(parseInt("0x"+b)):(x=a,a=g)}else x=a,a=g;return a}function Ca(){if(sd.test(n.charAt(x))){var a=n.charAt(x);x++}else a=g,0===ba&&v(de);a!==g&&(a=a.replace("b","\b").replace("f","\f").replace("n","\n").replace("r","\r").replace("t","\t").replace("v","\x0B"));return a}function la(){var a=[];var b=ra();b===g&&(b=Ha(),b===g&&(b=na(),b===g&&(b=xa())));for(;b!==g;)a.push(b),b=ra(),b===g&&(b=Ha(),b===g&&(b=na(),b===g&&(b=
xa())));return a}function sa(){var a=[];var b=ra();b===g&&(b=Ha(),b===g&&(b=na(),b===g&&(b=xa())));if(b!==g)for(;b!==g;)a.push(b),b=ra(),b===g&&(b=Ha(),b===g&&(b=na(),b===g&&(b=xa())));else a=g;return a}function ia(){var a=[];var b=ra();b===g&&(b=Ha(),b===g&&(b=Aa(),b===g&&(b=qa())));for(;b!==g;)a.push(b),b=ra(),b===g&&(b=Ha(),b===g&&(b=Aa(),b===g&&(b=qa())));return a}function ra(){ba++;if(Qe.test(n.charAt(x))){var a=n.charAt(x);x++}else a=g,0===ba&&v(Re);ba--;a===g&&0===ba&&v(Pe);return a}function Q(){if(Se.test(n.charAt(x))){var a=
n.charAt(x);x++}else a=g,0===ba&&v(Te);return a}function Aa(){ba++;if(10===n.charCodeAt(x)){var a=Ve;x++}else a=g,0===ba&&v(We);a===g&&(n.substr(x,2)===Ge?(a=Ge,x+=2):(a=g,0===ba&&v(Xd)),a===g&&(13===n.charCodeAt(x)?(a=Ce,x++):(a=g,0===ba&&v(De))));ba--;a===g&&0===ba&&v(Ue);return a}function ya(){var a=Aa();if(a===g){a=x;ba++;if(n.length>x){var b=n.charAt(x);x++}else b=g,0===ba&&v(Uc);ba--;b===g?a=void 0:(x=a,a=g)}return a}function qa(){ba++;var a;var b=x;if(n.substr(x,2)===Pd){var c=Pd;x+=2}else c=
g,0===ba&&v(me);if(c!==g){var e=[];var h=a=x;ba++;if(n.substr(x,2)===Lc){var d=Lc;x+=2}else d=g,0===ba&&v(wd);ba--;d===g?h=void 0:(x=h,h=g);h!==g?(d=za(),d!==g?a=h=[h,d]:(x=a,a=g)):(x=a,a=g);for(;a!==g;)e.push(a),h=a=x,ba++,n.substr(x,2)===Lc?(d=Lc,x+=2):(d=g,0===ba&&v(wd)),ba--,d===g?h=void 0:(x=h,h=g),h!==g?(d=za(),d!==g?a=h=[h,d]:(x=a,a=g)):(x=a,a=g);e!==g?(n.substr(x,2)===Lc?(a=Lc,x+=2):(a=g,0===ba&&v(wd)),a!==g?b=c=[c,e,a]:(x=b,b=g)):(x=b,b=g)}else x=b,b=g;b===g&&(b=xa());ba--;b===g&&0===ba&&
v(we);return b}function na(){var a;var b=x;if(n.substr(x,2)===Pd){var c=Pd;x+=2}else c=g,0===ba&&v(me);if(c!==g){var e=[];var h=a=x;ba++;if(n.substr(x,2)===Lc){var d=Lc;x+=2}else d=g,0===ba&&v(wd);d===g&&(d=Q());ba--;d===g?h=void 0:(x=h,h=g);h!==g?(d=za(),d!==g?a=h=[h,d]:(x=a,a=g)):(x=a,a=g);for(;a!==g;)e.push(a),h=a=x,ba++,n.substr(x,2)===Lc?(d=Lc,x+=2):(d=g,0===ba&&v(wd)),d===g&&(d=Q()),ba--,d===g?h=void 0:(x=h,h=g),h!==g?(d=za(),d!==g?a=h=[h,d]:(x=a,a=g)):(x=a,a=g);e!==g?(n.substr(x,2)===Lc?(a=
Lc,x+=2):(a=g,0===ba&&v(wd)),a!==g?b=c=[c,e,a]:(x=b,b=g)):(x=b,b=g)}else x=b,b=g;return b}function xa(){var a;var b=x;if(n.substr(x,2)===Zc){var c=Zc;x+=2}else c=g,0===ba&&v(Ee);if(c!==g){var e=[];var h=a=x;ba++;var d=Q();ba--;d===g?h=void 0:(x=h,h=g);h!==g?(d=za(),d!==g?a=h=[h,d]:(x=a,a=g)):(x=a,a=g);for(;a!==g;)e.push(a),h=a=x,ba++,d=Q(),ba--,d===g?h=void 0:(x=h,h=g),h!==g?(d=za(),d!==g?a=h=[h,d]:(x=a,a=g)):(x=a,a=g);e!==g?b=c=[c,e]:(x=b,b=g)}else x=b,b=g;return b}function za(){if(n.length>x){var a=
n.charAt(x);x++}else a=g,0===ba&&v(Uc);return a}var Fa=1<arguments.length?arguments[1]:{},g={},Ba={start:r},Va=r,Xa="#",Ea={type:"literal",value:"#",description:'"#"'},Za="if",Ua={type:"literal",value:"if",description:'"if"'},W="ifdef",La={type:"literal",value:"ifdef",description:'"ifdef"'},Ab="ifndef",Ya={type:"literal",value:"ifndef",description:'"ifndef"'},Sa="elif",Ka={type:"literal",value:"elif",description:'"elif"'},fa="else",Pa={type:"literal",value:"else",description:'"else"'},Wa="endif",
hb={type:"literal",value:"endif",description:'"endif"'},ib="include",Ja={type:"literal",value:"include",description:'"include"'},eb="define",bb={type:"literal",value:"define",description:'"define"'},Vb="var",Pb={type:"literal",value:"var",description:'"var"'},kb="error",nb={type:"literal",value:"error",description:'"error"'},tb="line",Kb={type:"literal",value:"line",description:'"line"'},wb="pragma",Ia={type:"literal",value:"pragma",description:'"pragma"'},F="undef",Ma={type:"literal",value:"undef",
description:'"undef"'},ub="warning",Qb={type:"literal",value:"warning",description:'"warning"'},$a="extension",ad={type:"literal",value:"extension",description:'"extension"'},Hc="version",Wb={type:"literal",value:"version",description:'"version"'},sb="node",Ic={type:"literal",value:"node",description:'"node"'},Ta="endnode",dc={type:"literal",value:"endnode",description:'"endnode"'},zc="node_var",Bb={type:"literal",value:"node_var",description:'"node_var"'},lb="node_if",va={type:"literal",value:"node_if",
description:'"node_if"'},pb="node_ifdef",Qa={type:"literal",value:"node_ifdef",description:'"node_ifdef"'},Z="node_ifndef",Jb={type:"literal",value:"node_ifndef",description:'"node_ifndef"'},Vc="node_elif",Ra={type:"literal",value:"node_elif",description:'"node_elif"'},rb="node_else",$c={type:"literal",value:"node_else",description:'"node_else"'},Gb="node_endif",zb={type:"literal",value:"node_endif",description:'"node_endif"'},md="node_in",db={type:"literal",value:"node_in",description:'"node_in"'},
Lb="optional",gb={type:"literal",value:"optional",description:'"optional"'},hc="node_out",Hb={type:"literal",value:"node_out",description:'"node_out"'},qb="node_param",Ib={type:"literal",value:"node_param",description:'"node_param"'},lc="nodes_global",ec={type:"literal",value:"nodes_global",description:'"nodes_global"'},Cb="nodes_main",oc={type:"literal",value:"nodes_main",description:'"nodes_main"'},Gc=",",Zb={type:"literal",value:",",description:'","'},kc="?",Ub={type:"literal",value:"?",description:'"?"'},
mb=":",jb={type:"literal",value:":",description:'":"'},cb="defined",ob={type:"literal",value:"defined",description:'"defined"'},yb="(",tc={type:"literal",value:"(",description:'"("'},cc=")",Ac={type:"literal",value:")",description:'")"'},Fb={type:"other",description:"number"},Tb={type:"other",description:"identifier"},hd="++",Mc={type:"literal",value:"++",description:'"++"'},Nc="--",Oc={type:"literal",value:"--",description:'"--"'},Fc="+",Qd={type:"literal",value:"+",description:'"+"'},id="-",Fd=
{type:"literal",value:"-",description:'"-"'},oe="~",Zd={type:"literal",value:"~",description:'"~"'},Gd="!",xe={type:"literal",value:"!",description:'"!"'},Hd="*",xb={type:"literal",value:"*",description:'"*"'},ie="/",ye={type:"literal",value:"/",description:'"/"'},$d="%",Rd={type:"literal",value:"%",description:'"%"'},xd="=",Cc={type:"literal",value:"=",description:'"="'},bd="<<",fc={type:"literal",value:"<<",description:'"<<"'},nd=">>",yd={type:"literal",value:">>",description:'">>"'},cd="<=",Pc=
{type:"literal",value:"<=",description:'"<="'},ic=">=",Rb={type:"literal",value:">=",description:'">="'},od="<",pd={type:"literal",value:"<",description:'"<"'},xc=">",pc={type:"literal",value:">",description:'">"'},Mb="==",Qc={type:"literal",value:"==",description:'"=="'},Jc="!=",mc={type:"literal",value:"!=",description:'"!="'},qc="&",jc={type:"literal",value:"&",description:'"&"'},Dc="^",uc={type:"literal",value:"^",description:'"^"'},Sb="|",jd={type:"literal",value:"|",description:'"|"'},vb="&&",
$b={type:"literal",value:"&&",description:'"&&"'},Nb="||",vc={type:"literal",value:"||",description:'"||"'},Bc='"',nc={type:"literal",value:'"',description:'"\\""'},ac="$",Eb={type:"literal",value:"$",description:'"$"'},ab="_",bc={type:"literal",value:"_",description:'"_"'},Ob=/^[a-zA-Z]/,rc={type:"class",value:"[a-zA-Z]",description:"[a-zA-Z]"},fb={type:"literal",value:"#define",description:'"#define"'},ae={type:"literal",value:"#elif",description:'"#elif"'},be={type:"literal",value:"#else",description:'"#else"'},
Db={type:"literal",value:"#endif",description:'"#endif"'},Rc={type:"literal",value:"#error",description:'"#error"'},gc={type:"literal",value:"#if",description:'"#if"'},dd={type:"literal",value:"#ifdef",description:'"#ifdef"'},qd={type:"literal",value:"#ifndef",description:'"#ifndef"'},yc={type:"literal",value:"#include",description:'"#include"'},Id={type:"literal",value:"#line",description:'"#line"'},Jd={type:"literal",value:"#pragma",description:'"#pragma"'},Wc={type:"literal",value:"#warning",description:'"#warning"'},
ce={type:"literal",value:"#version",description:'"#version"'},Ec=".",Kc={type:"literal",value:".",description:'"."'},ed="0",kd={type:"literal",value:"0",description:'"0"'},Sd=/^[xX]/,Kd={type:"class",value:"[xX]",description:"[xX]"},Sc=/^[0-9]/,zd={type:"class",value:"[0-9]",description:"[0-9]"},rd=/^[1-9]/,Xc={type:"class",value:"[1-9]",description:"[1-9]"},wc=/^[eE]/,Td={type:"class",value:"[eE]",description:"[eE]"},Ld=/^[\-+]/,Ud={type:"class",value:"[-+]",description:"[-+]"},Vd=/^[0-9a-fA-F]/,
Ad={type:"class",value:"[0-9a-fA-F]",description:"[0-9a-fA-F]"},Bd={type:"other",description:"string"},Md="'",td={type:"literal",value:"'",description:'"\'"'},fd="\\",sc={type:"literal",value:"\\",description:'"\\\\"'},sd=/^['"\\bfnrtv]/,de={type:"class",value:"['\"\\\\bfnrtv]",description:"['\"\\\\bfnrtv]"},je="x",ee={type:"literal",value:"x",description:'"x"'},pe="u",qe={type:"literal",value:"u",description:'"u"'},ke={type:"other",description:"punctuation"},ze="+=",Ae={type:"literal",value:"+=",
description:'"+="'},re="-=",Yc={type:"literal",value:"-=",description:'"-="'},ud="*=",Tc={type:"literal",value:"*=",description:'"*="'},Cd="/=",Wd={type:"literal",value:"/=",description:'"/="'},Dd="%=",fe={type:"literal",value:"%=",description:'"%="'},Nd="^=",vd={type:"literal",value:"^=",description:'"^="'},Od="&=",le={type:"literal",value:"&=",description:'"&="'},se="|=",ge={type:"literal",value:"|=",description:'"|="'},te="<<=",ue={type:"literal",value:"<<=",description:'"<<="'},ve=">>=",Be={type:"literal",
value:">>=",description:'">>="'},gd="{",Xb={type:"literal",value:"{",description:'"{"'},He="}",Ie={type:"literal",value:"}",description:'"}"'},Je="[",Ke={type:"literal",value:"[",description:'"["'},Le="]",Me={type:"literal",value:"]",description:'"]"'},Ne=";",Oe={type:"literal",value:";",description:'";"'},Pe={type:"other",description:"whitespace"},Qe=/^[\t\x0B\f ]/,Re={type:"class",value:"[\\t\\v\\f ]",description:"[\\t\\v\\f ]"},Se=/^[\n\r]/,Te={type:"class",value:"[\\n\\r]",description:"[\\n\\r]"},
Ue={type:"other",description:"end of line"},Ve="\n",We={type:"literal",value:"\n",description:'"\\n"'},Ge="\r\n",Xd={type:"literal",value:"\r\n",description:'"\\r\\n"'},Ce="\r",De={type:"literal",value:"\r",description:'"\\r"'},we={type:"other",description:"comment"},Pd="/*",me={type:"literal",value:"/*",description:'"/*"'},Lc="*/",wd={type:"literal",value:"*/",description:'"*/"'},Zc="//",Ee={type:"literal",value:"//",description:'"//"'},Uc={type:"any",description:"any character"},x=0,Yd=0,ne={line:1,
po:1,Os:!1},ld=0,Ed=[],ba=0;if("startRule"in Fa){if(!(Fa.AI in Ba))throw Error("Can't start parsing from rule \""+Fa.AI+'".');Va=Ba[Fa.AI]}y=function(){var a;ba++;var b=a=x;ba++;var c=x;if("#define"===n.substr(x,7)){var e="#define";x+=7}else e=g,0===ba&&v(fb);e===g&&("#elif"===n.substr(x,5)?(e="#elif",x+=5):(e=g,0===ba&&v(ae)),e===g&&("#else"===n.substr(x,5)?(e="#else",x+=5):(e=g,0===ba&&v(be)),e===g&&("#endif"===n.substr(x,6)?(e="#endif",x+=6):(e=g,0===ba&&v(Db)),e===g&&("#error"===n.substr(x,6)?
(e="#error",x+=6):(e=g,0===ba&&v(Rc)),e===g&&("#if"===n.substr(x,3)?(e="#if",x+=3):(e=g,0===ba&&v(gc)),e===g&&("#ifdef"===n.substr(x,6)?(e="#ifdef",x+=6):(e=g,0===ba&&v(dd)),e===g&&("#ifndef"===n.substr(x,7)?(e="#ifndef",x+=7):(e=g,0===ba&&v(qd)),e===g&&("#include"===n.substr(x,8)?(e="#include",x+=8):(e=g,0===ba&&v(yc)),e===g&&("#line"===n.substr(x,5)?(e="#line",x+=5):(e=g,0===ba&&v(Id)),e===g&&("#pragma"===n.substr(x,7)?(e="#pragma",x+=7):(e=g,0===ba&&v(Jd)),e===g&&("#warning"===n.substr(x,8)?(e=
"#warning",x+=8):(e=g,0===ba&&v(Wc)),e===g&&("#version"===n.substr(x,8)?(e="#version",x+=8):(e=g,0===ba&&v(ce)),e===g&&(n.substr(x,3)===Vb?(e=Vb,x+=3):(e=g,0===ba&&v(Pb)))))))))))))));if(e!==g){var h=x;ba++;var d=oa();ba--;d===g?h=void 0:(x=h,h=g);h!==g?c=e=[e,h]:(x=c,c=g)}else x=c,c=g;ba--;c===g?b=void 0:(x=b,b=g);b!==g?(b=Oa(),b!==g?a=b:(x=a,a=g)):(x=a,a=g);ba--;a===g&&0===ba&&v(Tb);return a};var he=Va();if(he!==g&&x===n.length)return he;he!==g&&x<n.length&&v({type:"end",description:"end of input"});
throw function(a,b,c){function e(a){var b=1;for(a.sort(function(a,b){return a.description<b.description?-1:a.description>b.description?1:0});b<a.length;)a[b-1]===a[b]?a.splice(b,1):b++}function g(a,b){function c(a){function b(a){return a.charCodeAt(0).toString(16).toUpperCase()}return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(a){return"\\x0"+b(a)}).replace(/[\x10-\x1F\x80-\xFF]/g,
function(a){return"\\x"+b(a)}).replace(/[\u0100-\u0FFF]/g,function(a){return"\\u0"+b(a)}).replace(/[\u1000-\uFFFF]/g,function(a){return"\\u"+b(a)})}var e=Array(a.length),g;for(g=0;g<a.length;g++)e[g]=a[g].description;a=1<a.length?e.slice(0,-1).join(", ")+" or "+e[a.length-1]:e[0];b=b?'"'+c(b)+'"':"end of input";return"Expected "+a+" but "+b+" found."}var h=w(c),d=c<n.length?n.charAt(c):null;null!==b&&e(b);return new f(null!==a?a:g(b,d),b,d,c,h.line,h.po)}(null,Ed,ld);}}}()},function(D,w){function f(d,
f){var m=d[0],r=d[1],p=d[2],z=d[3];m=U(m,r,p,z,f[0],7,-680876936);z=U(z,m,r,p,f[1],12,-389564586);p=U(p,z,m,r,f[2],17,606105819);r=U(r,p,z,m,f[3],22,-1044525330);m=U(m,r,p,z,f[4],7,-176418897);z=U(z,m,r,p,f[5],12,1200080426);p=U(p,z,m,r,f[6],17,-1473231341);r=U(r,p,z,m,f[7],22,-45705983);m=U(m,r,p,z,f[8],7,1770035416);z=U(z,m,r,p,f[9],12,-1958414417);p=U(p,z,m,r,f[10],17,-42063);r=U(r,p,z,m,f[11],22,-1990404162);m=U(m,r,p,z,f[12],7,1804603682);z=U(z,m,r,p,f[13],12,-40341101);p=U(p,z,m,r,f[14],17,
-1502002290);r=U(r,p,z,m,f[15],22,1236535329);m=n(m,r,p,z,f[1],5,-165796510);z=n(z,m,r,p,f[6],9,-1069501632);p=n(p,z,m,r,f[11],14,643717713);r=n(r,p,z,m,f[0],20,-373897302);m=n(m,r,p,z,f[5],5,-701558691);z=n(z,m,r,p,f[10],9,38016083);p=n(p,z,m,r,f[15],14,-660478335);r=n(r,p,z,m,f[4],20,-405537848);m=n(m,r,p,z,f[9],5,568446438);z=n(z,m,r,p,f[14],9,-1019803690);p=n(p,z,m,r,f[3],14,-187363961);r=n(r,p,z,m,f[8],20,1163531501);m=n(m,r,p,z,f[13],5,-1444681467);z=n(z,m,r,p,f[2],9,-51403784);p=n(p,z,m,r,
f[7],14,1735328473);r=n(r,p,z,m,f[12],20,-1926607734);m=N(r^p^z,m,r,f[5],4,-378558);z=N(m^r^p,z,m,f[8],11,-2022574463);p=N(z^m^r,p,z,f[11],16,1839030562);r=N(p^z^m,r,p,f[14],23,-35309556);m=N(r^p^z,m,r,f[1],4,-1530992060);z=N(m^r^p,z,m,f[4],11,1272893353);p=N(z^m^r,p,z,f[7],16,-155497632);r=N(p^z^m,r,p,f[10],23,-1094730640);m=N(r^p^z,m,r,f[13],4,681279174);z=N(m^r^p,z,m,f[0],11,-358537222);p=N(z^m^r,p,z,f[3],16,-722521979);r=N(p^z^m,r,p,f[6],23,76029189);m=N(r^p^z,m,r,f[9],4,-640364487);z=N(m^r^p,
z,m,f[12],11,-421815835);p=N(z^m^r,p,z,f[15],16,530742520);r=N(p^z^m,r,p,f[2],23,-995338651);m=y(m,r,p,z,f[0],6,-198630844);z=y(z,m,r,p,f[7],10,1126891415);p=y(p,z,m,r,f[14],15,-1416354905);r=y(r,p,z,m,f[5],21,-57434055);m=y(m,r,p,z,f[12],6,1700485571);z=y(z,m,r,p,f[3],10,-1894986606);p=y(p,z,m,r,f[10],15,-1051523);r=y(r,p,z,m,f[1],21,-2054922799);m=y(m,r,p,z,f[8],6,1873313359);z=y(z,m,r,p,f[15],10,-30611744);p=y(p,z,m,r,f[6],15,-1560198380);r=y(r,p,z,m,f[13],21,1309151649);m=y(m,r,p,z,f[4],6,-145523070);
z=y(z,m,r,p,f[11],10,-1120210379);p=y(p,z,m,r,f[2],15,718787259);r=y(r,p,z,m,f[9],21,-343485551);d[0]=m+d[0]&4294967295;d[1]=r+d[1]&4294967295;d[2]=p+d[2]&4294967295;d[3]=z+d[3]&4294967295}function N(d,f,n,r,p,z){f=(f+d&4294967295)+(r+z&4294967295)&4294967295;return(f<<p|f>>>32-p)+n&4294967295}function U(d,f,n,r,p,z,a){return N(f&n|~f&r,d,f,p,z,a)}function n(d,f,n,r,p,z,a){return N(f&r|n&~r,d,f,p,z,a)}function y(d,f,n,r,p,z,a){return N(n^(f|~r),d,f,p,z,a)}w.a=function(m){var n=m,v=n.length;m=[1732584193,
-271733879,-1732584194,271733878];var r;for(r=64;r<=n.length;r+=64){var p,z=n.substring(r-64,r),a=[];for(p=0;64>p;p+=4)a[p>>2]=z.charCodeAt(p)+(z.charCodeAt(p+1)<<8)+(z.charCodeAt(p+2)<<16)+(z.charCodeAt(p+3)<<24);f(m,a)}n=n.substring(r-64);p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(r=0;r<n.length;r++)p[r>>2]|=n.charCodeAt(r)<<(r%4<<3);p[r>>2]|=128<<(r%4<<3);if(55<r)for(f(m,p),r=0;16>r;r++)p[r]=0;p[14]=8*v;f(m,p);for(n=0;n<m.length;n++){v=m[n];r="";for(p=0;4>p;p++)r+=d[v>>8*p+4&15]+d[v>>8*p&15];m[n]=
r}return m.join("")};var d="0123456789abcdef".split("")},function(D,w,f){D=f(0);var N=f(5),U=f(25),n=f(4),y=f(75),d=f(21),m=f(1),C=f(8),v=f(36),r=f(2),p=f(3),z=f(27),a=f(60),H=f(38);f=Object(D.a)("__reformer",function(f,c){function k(a){switch(a.type){case "VALTORGB":a.color_ramp||(a.color_ramp={elements:[{position:.5,color:[1,1,1,1]}]},h("node Color Ramp",a,"color_ramp"));break;case "CURVE_RGB":a.curve_mapping||(a.curve_mapping={curves_data:[[[0,0],[1,1]],[[0,0],[1,1]],[[0,0],[1,1]],[[0,0],[1,1]]],
curves_handle_types:["EXTRAPOLATED","EXTRAPOLATED","EXTRAPOLATED","EXTRAPOLATED"],curve_extend:[["AUTO","AUTO"],["AUTO","AUTO"],["AUTO","AUTO"],["AUTO","AUTO"]]},h("node RGB Curves",a,"curve_mapping"));break;case "CURVE_VEC":a.curve_mapping||(a.curve_mapping={curves_data:[[[0,0],[1,1]],[[0,0],[1,1]],[[0,0],[1,1]]],curves_handle_types:["EXTRAPOLATED","EXTRAPOLATED","EXTRAPOLATED"],curve_extend:[["AUTO","AUTO"],["AUTO","AUTO"],["AUTO","AUTO"]]},h("node Vector Curves",a,"curve_mapping"));break;case "MAPPING":a.vector_type||
(a.vector_type="POINT",h("node Mapping",a,"vector_type"));break;case "MATERIAL":case "MATERIAL_EXT":"alpha"in a||(a.alpha=1,h("node material",a,"alpha"));"darkness"in a||(a.darkness=1,h("node material",a,"darkness"));"diffuse_toon_size"in a||(a.diffuse_toon_size=.5,h("node material",a,"diffuse_toon_size"));"diffuse_toon_smooth"in a||(a.diffuse_toon_smooth=.1,h("node material",a,"diffuse_toon_smooth"));"diffuse_intensity"in a||(a.diffuse_intensity=1,h("node material",a,"diffuse_intensity"));"use_tangent_shading"in
a||(a.use_tangent_shading=!1,h("node material",a,"use_tangent_shading"));"specular_shader"in a||(a.specular_shader="COOKTORR",h("node material",a,"specular_shader"));"specular_ior"in a||(a.specular_ior=4,h("node material",a,"specular_ior"));"specular_hardness"in a||(a.specular_hardness=50,h("node material",a,"specular_hardness"));"specular_slope"in a||(a.specular_slope=.1,h("node material",a,"specular_slope"));"specular_toon_size"in a||(a.specular_toon_size=.5,h("node material",a,"specular_toon_size"));
"specular_toon_smooth"in a||(a.specular_toon_smooth=.1,h("node material",a,"specular_toon_smooth"));"specular_intensity"in a||(a.specular_intensity=.5,h("node material",a,"specular_intensity"));"diffuse_shader"in a||(a.diffuse_shader="LAMBERT",h("node material",a,"diffuse_shader"));"roughness"in a||(a.roughness=.5,h("node material",a,"roughness"));"diffuse_fresnel"in a||(a.diffuse_fresnel=.1,h("node material",a,"diffuse_fresnel"));"diffuse_fresnel_factor"in a||(a.diffuse_fresnel_factor=.5,h("node material",
a,"diffuse_fresnel_factor"));break;case "MATH":case "MIX_RGB":"use_clamp"in a||(a.use_clamp=!1,h("node "+a.type,a,"use_clamp"));break;case "GROUP":a.node_tree_name=a.node_tree_name.replace(/\.[0-9]{3,}$/g,"");switch(a.node_tree_name){case "CLAMP":case "LEVELS_OF_QUALITY":case "LINEAR_TO_SRGB":case "NORMAL_VIEW":case "PARALLAX":case "REFLECT":case "REFRACTION":case "REPLACE":case "SMOOTHSTEP":case "SRGB_TO_LINEAR":case "TIME":case "TRANSLUCENCY":case "VECTOR_VIEW":a.node_tree_name="B4W_"+a.node_tree_name}break;
case "VECT_TRANSFORM":"convert_from"in a||(a.convert_from="WORLD",h("node "+a.type,a,"convert_from"));"convert_to"in a||(a.convert_to="WORLD",h("node "+a.type,a,"convert_to"));"vector_type"in a||(a.vector_type="POINT",h("node "+a.type,a,"vector_type"));break;case "ATTRIBUTE":a.color_layer="";break;case "BSDF_TRANSPARENT":"b4w_use_alpha"in a||(a.b4w_use_alpha=!1,h("node "+a.type,a,"b4w_use_alpha"))}}function b(a){if(a=a.nla_tracks)for(var b=0;b<a.length;b++)for(var c=a[b],d=0;d<c.strips.length;d++){var f=
c.strips[d];"action"in f||(f.action=null,h("strip",f,"action"));"action_frame_start"in f||(f.action_frame_start=0,h("strip",f,"action_frame_start"));"action_frame_end"in f||(f.action_frame_end=f.frame_end-f.frame_start,h("strip",f,"action_frame_end"));"repeat"in f||(f.repeat=1,h("strip",f,"repeat"));"use_reverse"in f||(f.use_reverse=!1,h("strip",f,"use_reverse"));"scale"in f||(f.scale=1,h("strip",f,"scale"))}}function h(a,b,c){c=c+">>"+a;c in T||(T[c]={Jx:[],NH:"undefined",type:a});T[c].Jx.push(b.name)}
function w(a,b,c){c=c+">>"+a;c in T||(T[c]={Jx:[],NH:"deprecated",type:a});T[c].Jx.push(b.name)}function D(a){B.warn(a)}function u(a,b){b||(b=a.name+"_COPY");var c=a.materials,h=a.submeshes;a.materials=null;a.submeshes=null;var d=r.O(a);a.materials=c;a.submeshes=h;d.name=b;d.materials=a.materials.slice(0);d.submeshes=[];for(a=0;a<h.length;a++)b=r.N(h[a]),d.submeshes.push(b);return d}function E(a,b,c){if(1<c){for(var h=a.length/c,d=b.length/c,f=new Float32Array(a.length+b.length),e=0,k=0;k<c;k++)f.set(a.subarray(h*
k,h*(k+1)),e),e+=h,f.set(b.subarray(d*k,d*(k+1)),e),e+=d;return f}return r._2(a,b)}var R=Object(N.a)(f),O=Object(n.a)(f),L=Object(y.a)(f),B=Object(m.a)(f),Y=Object(a.a)(f),K=Object(H.a)(f),ha=O.wa,T={},V=z.create(),A=v.c(),aa=C.create();c.eN=function(a){T={};var c=a.worlds;if(0==c.length){B.warn('WARNING Datablock world is missing, reexport "'+a.b4w_filepath_blend+'" scene');var d={name:"DEFAULT",horizon_color:new Float32Array([0,0,0]),zenith_color:new Float32Array([0,0,0]),light_settings:{use_environment_light:!1,
environment_energy:1,environment_color:"PLAIN"},fog_settings:{use_fog:!1,intensity:0,depth:25,start:5,height:0,falloff:"INVERSE_QUADRATIC",use_custom_color:!0,color:[.5,.5,.5]},use_sky_paper:!1,use_sky_blend:!1,use_sky_real:!1,use_nodes:!1,node_tree:null,texture_slots:[]};c.push(d)}for(var f=0;f<c.length;f++){d=c[f];"use_sky_blend"in d||(h("world",d,"use_sky_blend"),d.use_sky_blend=!1);"use_sky_paper"in d||(h("world",d,"use_sky_paper"),d.use_sky_paper=!1);"use_sky_real"in d||(h("world",d,"use_sky_real"),
d.use_sky_real=!1);"b4w_sky_settings"in d&&"rayleigh_brightness"in d.b4w_sky_settings||(h("world",d,"rayleigh_brightness"),d.b4w_sky_settings={render_sky:!1,procedural_skydome:!1,use_as_enviroment_map:!1,color:[.24,.43,.75],rayleigh_brightness:3.3,mie_brightness:.1,spot_brightness:10,scatter_strength:.2,rayleigh_strength:.2,mie_strength:.006,rayleigh_collection_power:.5,mie_collection_power:.5,mie_distribution:.4});"fog_settings"in d||(h("world",d,"fog_settings"),d.fog_settings={use_fog:!1,intensity:0,
depth:25,start:0,height:0,falloff:"QUADRATIC",use_custom_color:!0,color:[.5,.5,.5]},"b4w_fog_color"in d&&(d.fog_settings.use_custom_color=!0,d.fog_settings.color=d.b4w_fog_color),"b4w_fog_density"in d&&0<d.b4w_fog_density&&(d.fog_settings.depth=1/d.b4w_fog_density));"render_sky"in d.b4w_sky_settings||(h("world",d,"render_sky"),d.b4w_sky_settings.render_sky=!1);for(var l=d.texture_slots,m=0;m<l.length;m++){var e=l[m];"blend_type"in e||(e.blend_type="MIX",h("world_texture_slot",e,"blend_type"));"use_map_blend"in
e||(e.use_map_blend=!1,h("world_texture_slot",e,"use_map_blend"));"use_map_horizon"in e||(e.use_map_horizon=!0,h("world_texture_slot",e,"use_map_horizon"));"use_map_zenith_up"in e||(e.use_map_zenith_up=!1,h("world_texture_slot",e,"use_map_zenith_up"));"use_rgb_to_intensity"in e||(e.use_rgb_to_intensity=!1,h("world_texture_slot",e,"use_rgb_to_intensity"));"invert"in e||(e.invert=!1,h("world_texture_slot",e,"invert"));"color"in e||(e.color=[1,0,1],h("world_texture_slot",e,"color"));"blend_factor"in
e||(e.blend_factor=0,h("world_texture_slot",e,"blend_factor"));"horizon_factor"in e||(e.horizon_factor=1,h("world_texture_slot",e,"horizon_factor"));"zenith_up_factor"in e||(e.zenith_up_factor=0,h("world_texture_slot",e,"zenith_up_factor"));"zenith_down_factor"in e||(e.zenith_down_factor=0,h("world_texture_slot",e,"zenith_down_factor"));"default_value"in e||(e.default_value=1,h("world_texture_slot",e,"default_value"))}"b4w_use_default_animation"in d||(h("world",d,"b4w_use_default_animation"),d.b4w_use_default_animation=
!1);"b4w_anim_behavior"in d||(h("world",d,"b4w_anim_behavior"),d.b4w_anim_behavior="CYCLIC")}l=a.scenes;for(f=0;f<l.length;f++)e=l[f],m=e.world,"timeline_markers"in e||(e.timeline_markers=null,h("scene",e,"timeline_markers")),"boolean"==typeof e.b4w_enable_physics&&(e.b4w_enable_physics="AUTO"),"b4w_reflection_quality"in e||(e.b4w_reflection_quality="MEDIUM",h("scene",e,"b4w_reflection_quality")),"b4w_use_nla"in e||(e.b4w_use_nla=!1,h("scene",e,"b4w_use_nla")),"fps"in e||(e.fps=24,h("scene",e,"fps")),
"b4w_nla_cyclic"in e||(e.b4w_nla_cyclic=!1,h("scene",e,"b4w_nla_cyclic")),"b4w_logic_nodes"in e||(e.b4w_logic_nodes=[],h("scene",e,"b4w_logic_nodes")),"b4w_detect_collisions"in e&&(w("scene",e,"b4w_detect_collisions"),delete e.b4w_detect_collisions),"audio_doppler_speed"in e||(e.audio_doppler_speed=343.3),"audio_doppler_factor"in e||(e.audio_doppler_factor=1),"b4w_dynamic_compressor_settings"in e||(e.b4w_dynamic_compressor_settings={threshold:-24,knee:30,ratio:12,attack:.003,release:.25},h("scene",
e,"b4w_dynamic_compressor_settings")),"b4w_enable_convolution_engine"in e||(e.b4w_enable_convolution_engine=!1),"b4w_enable_bloom"in e||(e.b4w_enable_bloom=!1,h("scene",e,"b4w_enable_bloom")),"b4w_enable_motion_blur"in e||(e.b4w_enable_motion_blur=!1,h("scene",e,"b4w_enable_motion_blur")),"b4w_enable_color_correction"in e||(e.b4w_enable_color_correction=!1,h("scene",e,"b4w_enable_color_correction")),"b4w_antialiasing_quality"in e||(e.b4w_antialiasing_quality="MEDIUM",h("scene",e,"b4w_antialiasing_quality")),
"b4w_tags"in e||(e.b4w_tags={title:"",description:""},h("scene",e,"b4w_tags")),"b4w_lod_smooth_type"in e||(e.b4w_lod_smooth_type="OFF",h("scene",e,"b4w_lod_smooth_type")),"b4w_lod_hyst_interval"in e||(e.b4w_lod_hyst_interval=0,h("scene",e,"b4w_lod_hyst_interval")),"b4w_enable_object_selection"in e||(e.b4w_enable_object_selection="AUTO",h("scene",e,"b4w_enable_object_selection")),"b4w_enable_outlining"in e||(e.b4w_enable_outlining="AUTO",h("scene",e,"b4w_enable_outlining")),"b4w_enable_glow_materials"in
e||(e.b4w_enable_glow_materials="AUTO",h("scene",e,"b4w_enable_glow_materials")),"b4w_enable_anchors_visibility"in e||(e.b4w_enable_anchors_visibility="AUTO",h("scene",e,"b4w_enable_anchors_visibility")),"b4w_outline_color"in e||(e.b4w_outline_color=[1,1,1],h("scene",e,"b4w_outline_color")),"b4w_outline_factor"in e||(e.b4w_outline_factor="b4w_glow_factor"in e?e.b4w_glow_factor:1,h("scene",e,"b4w_outline_factor")),"b4w_shadow_settings"in e||(h("scene",e,"b4w_shadow_settings"),c=m.b4w_shadow_settings,
e.b4w_shadow_settings=c?c:{csm_resolution:2048,blur_samples:"16x",self_shadow_polygon_offset:1,b4w_enable_csm:!1,csm_num:1,csm_first_cascade_border:10,first_cascade_blur_radius:3,csm_last_cascade_border:100,last_cascade_blur_radius:1.5,fade_last_cascade:!0,blend_between_cascades:!0}),c=e.b4w_shadow_settings,"csm_resolution"in c||(h("scene",e,"b4w_shadow_settings.csm_resolution"),c.csm_resolution=2048),"blur_samples"in c||(h("scene",e,"b4w_shadow_settings.blur_samples"),c.blur_samples="16x"),"soft_shadows"in
c||(h("scene",e,"b4w_shadow_settings.soft_shadows"),c.soft_shadows=!0),"self_shadow_polygon_offset"in c||(h("scene",e,"b4w_shadow_settings.self_shadow_polygon_offset"),c.self_shadow_polygon_offset=1),"self_shadow_normal_offset"in c||(h("scene",e,"b4w_shadow_settings.self_shadow_normal_offset"),c.self_shadow_normal_offset=.01),"b4w_enable_csm"in c||(h("scene",e,"b4w_shadow_settings.b4w_enable_csm"),c.b4w_enable_csm=!1),"csm_num"in c||(h("scene",e,"b4w_shadow_settings.csm_num"),c.csm_num=1),"csm_first_cascade_border"in
c||(h("scene",e,"b4w_shadow_settings.csm_first_cascade_border"),c.csm_first_cascade_border=10),"first_cascade_blur_radius"in c||(h("scene",e,"b4w_shadow_settings.first_cascade_blur_radius"),c.first_cascade_blur_radius=3),"csm_last_cascade_border"in c||(h("scene",e,"b4w_shadow_settings.csm_last_cascade_border"),c.csm_last_cascade_border=100),"last_cascade_blur_radius"in c||(h("scene",e,"b4w_shadow_settings.last_cascade_blur_radius"),c.last_cascade_blur_radius=1.5),"fade_last_cascade"in c||(h("scene",
e,"b4w_shadow_settings.fade_last_cascade"),c.fade_last_cascade=!0),"blend_between_cascades"in c||(h("scene",e,"b4w_shadow_settings.blend_between_cascades"),c.blend_between_cascades=!0),"b4w_ssao_settings"in e||(h("scene",e,"b4w_ssao_settings"),c=m.b4w_ssao_settings,e.b4w_ssao_settings=c?c:{dist_factor:0,samples:16,hemisphere:!1,blur_depth:!1,blur_discard_value:1}),c=e.b4w_ssao_settings,"dist_factor"in c||(h("scene",e,"b4w_ssao_settings.dist_factor"),c.dist_factor=0),"samples"in c||(h("scene",e,"b4w_ssao_settings.samples"),
c.samples=16),"hemisphere"in c||(h("scene",e,"b4w_ssao_settings.hemisphere"),c.hemisphere=!1),"blur_depth"in c||(h("scene",e,"b4w_ssao_settings.blur_depth"),c.blur_depth=!1),"blur_discard_value"in c||(h("scene",e,"b4w_ssao_settings.blur_discard_value"),c.blur_discard_value=1),"b4w_bloom_settings"in e||(h("scene",e,"b4w_bloom_settings"),c=m.b4w_bloom_settings,e.b4w_bloom_settings=c?c:{key:.2,blur:4,edge_lum:1}),"key"in e.b4w_bloom_settings||(h("scene",e,"b4w_bloom_settings.key"),e.b4w_bloom_settings.key=
.2),"blur"in e.b4w_bloom_settings||(h("scene",e,"b4w_bloom_settings.blur"),e.b4w_bloom_settings.blur=4),"edge_lum"in e.b4w_bloom_settings||(h("scene",e,"b4w_bloom_settings.edge_lum"),e.b4w_bloom_settings.edge_lum=1),"adaptive"in e.b4w_bloom_settings||(h("scene",e,"b4w_bloom_settings.adaptive"),e.b4w_bloom_settings.adaptive=!0),"average_luminance"in e.b4w_bloom_settings||(h("scene",e,"b4w_bloom_settings.average_luminance"),e.b4w_bloom_settings.average_luminance=.5),"b4w_motion_blur_settings"in e||
(h("scene",e,"b4w_motion_blur_settings"),c=m.b4w_motion_blur_settings,e.b4w_motion_blur_settings=c?c:{motion_blur_factor:.01,motion_blur_decay_threshold:.01}),"motion_blur_factor"in e.b4w_motion_blur_settings||(h("scene",e,"b4w_motion_blur_settings.motion_blur_factor"),e.b4w_motion_blur_settings.motion_blur_factor=.01),"motion_blur_decay_threshold"in e.b4w_motion_blur_settings||(h("scene",e,"b4w_motion_blur_settings.motion_blur_decay_threshold"),e.b4w_motion_blur_settings.motion_blur_decay_threshold=
.01),"b4w_color_correction_settings"in e||(h("scene",e,"b4w_color_correction_settings"),c=m.b4w_color_correction_settings,e.b4w_color_correction_settings=c?c:{brightness:0,contrast:0,exposure:1,saturation:1}),"b4w_god_rays_settings"in e||(h("scene",e,"b4w_god_rays_settings"),c=m.b4w_god_rays_settings,e.b4w_god_rays_settings=c?c:{intensity:.7,max_ray_length:1,steps_per_pass:10}),"steps_per_pass"in e.b4w_god_rays_settings||(h("scene",e,"b4w_god_rays_settings.steps_per_pass"),e.b4w_god_rays_settings.steps_per_pass=
10),"b4w_glow_settings"in e||(h("scene",e,"b4w_glow_settings"),e.b4w_glow_settings={render_glow_over_blend:!1,small_glow_mask_coeff:2,large_glow_mask_coeff:2,small_glow_mask_width:2,large_glow_mask_width:6},c=e.b4w_glow_settings,"b4w_render_glow_over_blend"in m&&(c.render_glow_over_blend=m.b4w_render_glow_over_blend),"b4w_small_glow_mask_coeff"in m&&(c.small_glow_mask_coeff=m.b4w_small_glow_mask_coeff),"b4w_large_glow_mask_coeff"in m&&(c.large_glow_mask_coeff=m.b4w_large_glow_mask_coeff),"b4w_small_glow_mask_width"in
m&&(c.small_glow_mask_width=m.b4w_small_glow_mask_width),"b4w_large_glow_mask_width"in m&&(c.large_glow_mask_width=m.b4w_large_glow_mask_width)),m=e.b4w_render_shadows,"AUTO"!=m&&"OFF"!=m&&"ON"!=m&&(e.b4w_render_shadows=m?"ON":"OFF"),m=e.b4w_render_reflections,"OFF"!=m&&"ON"!=m&&(e.b4w_render_reflections=m?"ON":"OFF"),m=e.b4w_render_refractions,"AUTO"!=m&&"OFF"!=m&&"ON"!=m&&(e.b4w_render_refractions=m?"ON":"OFF"),"b4w_render_dynamic_grass"in e||(h("scene",e,"b4w_render_dynamic_grass"),e.b4w_render_dynamic_grass=
"AUTO"),e.b4w_nla_script&&w("scene",e,"b4w_nla_script"),"audio_distance_model"in e||(h("scene",e,"audio_distance_model"),e.audio_distance_model="INVERSE_CLAMPED"),"b4w_custom_prop"in e||(h("scene",e,"b4w_custom_prop"),e.b4w_custom_prop=null);l=a.meshes;for(f=0;f<l.length;f++){e=l[f];e.b4w_boundings||(h("mesh",e,"b4w_boundings"),e.b4w_boundings={},c=e.b4w_boundings,c.bb=e.b4w_bounding_box?e.b4w_bounding_box:{max_x:0,max_y:0,max_z:0,min_x:0,min_y:0,min_z:0},c.bb_src=e.b4w_bounding_box_source?e.b4w_bounding_box_source:
e.b4w_bounding_box,c.bs_cen=e.b4w_bounding_sphere_center?e.b4w_bounding_sphere_center:[0,0,0],c.bc_cen=e.b4w_bounding_cylinder_center?e.b4w_bounding_cylinder_center:[0,0,0],c.be_cen=e.b4w_bounding_ellipsoid_center?e.b4w_bounding_ellipsoid_center:[0,0,0],e.b4w_bounding_ellipsoid_axes?c.be_ax=e.b4w_bounding_ellipsoid_axes:(m=c.bb,c.be_ax=[(m.max_x-m.min_x)/2,(m.max_y-m.min_y)/2,(m.max_z-m.min_z)/2]),e.b4w_rotated_bounding_box?c.rbb=e.b4w_rotated_bounding_box:(m=c.bb,c.rbb={rbb_c:[(m.max_x+m.min_x)/
2,(m.max_y+m.min_y)/2,(m.max_z+m.min_z)/2],rbb_s:[1,1,1]}),c.caxis_x=e.b4w_cov_axis_x?e.b4w_cov_axis_x:[1,0,0],c.caxis_y=e.b4w_cov_axis_y?e.b4w_cov_axis_y:[0,1,0],c.caxis_z=e.b4w_cov_axis_z?e.b4w_cov_axis_z:[0,0,1]);"is_boundings_overridden"in e||(h("mesh",e,"is_boundings_overridden"),e.is_boundings_overridden=!1);"b4w_shape_keys"in e||(e.b4w_shape_keys=[],h("mesh",e,"b4w_shape_keys"));c=!0;for(d=0;d<e.submeshes.length;d++){var n=e.submeshes[d];"boundings"in n||(c=!1,n.boundings={be_ax:e.b4w_bounding_ellipsoid_axes,
be_cen:e.b4w_bounding_ellipsoid_center,bb:{max_x:e.b4w_bounding_box.max_x,max_y:e.b4w_bounding_box.max_y,max_z:e.b4w_bounding_box.max_z,min_x:e.b4w_bounding_box.min_x,min_y:e.b4w_bounding_box.min_y,min_z:e.b4w_bounding_box.min_z}});"uv_layers"in n||(h("submesh",e,"uv_layers"),n.uv_layers=e.uv_textures);"be_ax"in n.boundings||(n.boundings.be_ax=e.b4w_bounding_ellipsoid_axes);"be_cen"in n.boundings||(n.boundings.be_cen=e.b4w_bounding_ellipsoid_center);"bb"in n.boundings||(n.boundings.bb=e.b4w_bounding_box);
"rbb"in n.boundings||(m=e.b4w_bounding_box,n.boundings.rbb={rbb_c:[(m.max_x+m.min_x)/2,(m.max_y+m.min_y)/2,(m.max_z+m.min_z)/2],rbb_s:[1,1,1]});"caxis_x"in n.boundings||(n.boundings.caxis_x=[1,0,0]);"caxis_y"in n.boundings||(n.boundings.caxis_y=[0,1,0]);"caxis_z"in n.boundings||(n.boundings.caxis_z=[0,0,1])}c||h("mesh",e,"submesh_bd");m=e;c=["b4w_apply_scale","b4w_apply_modifiers","b4w_export_edited_normals","b4w_loc_export_vertex_anim","b4w_shape_keys"];d=null;for(n=0;n<c.length;n++)m[c[n]]&&(d?
(m[c[n]]=!1,B.warn('WARNING property "'+c[n]+'" of object "'+m.name+'" has been set to "false". Foreground property "'+d+'" already exists.')):d=c[n]);for(m=0;m<e.b4w_vertex_anim.length;m++)c=e.b4w_vertex_anim[m],"allow_nla"in c||(h('mesh["b4w_vertex_anim"]',e,"allow_nla"),c.allow_nla=!0);"active_uv_name"in e||(h("mesh",e,"active_uv_name"),e.active_uv_name="")}l=a.cameras;for(f=0;f<l.length;f++)e=l[f],e.type||(e.type="PERSP",h("camera",e,"type")),"b4w_eye_target_dist"in e&&(delete e.b4w_eye_target_dist,
w("camera",e,"b4w_eye_target_dist")),"b4w_hover_zero_level"in e||(e.b4w_hover_zero_level=0,h("camera",e,"b4w_hover_zero_level")),"b4w_trans_velocity"in e||(e.b4w_trans_velocity=1,h("camera",e,"b4w_trans_velocity")),"b4w_rot_velocity"in e||(e.b4w_rot_velocity=1,h("camera",e,"b4w_rot_velocity")),"b4w_zoom_velocity"in e||(e.b4w_zoom_velocity=.1,h("camera",e,"b4w_zoom_velocity")),"b4w_use_target_distance_limits"in e||(e.b4w_use_target_distance_limits=e.b4w_use_distance_limits||!1,h("camera",e,"b4w_use_target_distance_limits")),
"b4w_use_zooming"in e||(e.b4w_use_zooming=e.b4w_use_distance_limits||!1,h("camera",e,"b4w_use_zooming")),"b4w_distance_min"in e||(e.b4w_distance_min=1,h("camera",e,"b4w_distance_min")),"b4w_distance_max"in e||(e.b4w_distance_max=100,h("camera",e,"b4w_distance_max")),"b4w_horizontal_translation_min"in e||(e.b4w_horizontal_translation_min=-100,h("camera",e,"b4w_horizontal_translation_min")),"b4w_horizontal_translation_max"in e||(e.b4w_horizontal_translation_max=100,h("camera",e,"b4w_horizontal_translation_max")),
"b4w_vertical_translation_min"in e||(e.b4w_vertical_translation_min=-100,h("camera",e,"b4w_vertical_translation_min")),"b4w_vertical_translation_max"in e||(e.b4w_vertical_translation_max=100,h("camera",e,"b4w_vertical_translation_max")),"b4w_use_horizontal_clamping"in e||(e.b4w_use_horizontal_clamping=!1,h("camera",e,"b4w_use_horizontal_clamping")),"b4w_rotation_left_limit"in e||(e.b4w_rotation_left_limit=-Math.PI,h("camera",e,"b4w_rotation_left_limit")),"b4w_rotation_right_limit"in e||(e.b4w_rotation_right_limit=
Math.PI,h("camera",e,"b4w_rotation_right_limit")),"b4w_horizontal_clamping_type"in e||(e.b4w_horizontal_clamping_type="LOCAL",h("camera",e,"b4w_horizontal_clamping_type")),"b4w_use_vertical_clamping"in e||(e.b4w_use_vertical_clamping=!1,h("camera",e,"b4w_use_vertical_clamping")),"b4w_rotation_down_limit"in e||(e.b4w_rotation_down_limit=-Math.PI/2,h("camera",e,"b4w_rotation_down_limit")),"b4w_rotation_up_limit"in e||(e.b4w_rotation_up_limit=Math.PI/2,h("camera",e,"b4w_rotation_up_limit")),"b4w_vertical_clamping_type"in
e||(e.b4w_vertical_clamping_type="LOCAL",h("camera",e,"b4w_vertical_clamping_type")),"b4w_hover_angle_min"in e||(e.b4w_hover_angle_min=Math.PI/6,h("camera",e,"b4w_hover_angle_min")),"b4w_hover_angle_max"in e||(e.b4w_hover_angle_max=Math.PI/6,h("camera",e,"b4w_hover_angle_max")),"b4w_enable_hover_hor_rotation"in e||(e.b4w_enable_hover_hor_rotation=!0,h("camera",e,"b4w_enable_hover_hor_rotation")),"b4w_use_panning"in e||(e.b4w_use_panning=!0,h("camera",e,"b4w_use_panning")),"b4w_use_pivot_limits"in
e||(e.b4w_use_pivot_limits=!1,e.b4w_pivot_z_min=0,e.b4w_pivot_z_max=10,h("camera",e,"b4w_use_pivot_limits")),"b4w_dof_bokeh"in e||(e.b4w_dof_bokeh=!1,h("camera",e,"b4w_dof_bokeh")),"b4w_dof_bokeh_intensity"in e||(e.b4w_dof_bokeh_intensity=.3,h("camera",e,"b4w_dof_bokeh_intensity")),"b4w_dof_foreground_blur"in e||(e.b4w_dof_foreground_blur=!1,h("camera",e,"b4w_dof_foreground_blur")),"b4w_dof_front_start"in e||(e.b4w_dof_front_start=0,h("camera",e,"b4w_dof_front_start")),"b4w_dof_front_end"in e||(e.b4w_dof_front_end=
e.b4w_dof_front,h("camera",e,"b4w_dof_front_end")),"b4w_dof_rear_start"in e||(e.b4w_dof_rear_start=0,h("camera",e,"b4w_dof_rear_start")),"b4w_dof_rear_end"in e||(e.b4w_dof_rear_end=e.b4w_dof_rear,h("camera",e,"b4w_dof_rear_end")),"sensor_fit"in e||(e.sensor_fit="VERTICAL",h("camera",e,"sensor_fit"));l=a.lamps;for(f=0;f<l.length;f++)if(e=l[f],"b4w_generate_shadows"in e||(e.b4w_generate_shadows=!1,h("lamp",e,"b4w_generate_shadows")),"b4w_dynamic_intensity"in e||(e.b4w_dynamic_intensity=!1,h("lamp",
e,"b4w_dynamic_intensity")),"use_diffuse"in e||(e.use_diffuse=!0,h("lamp",e,"use_diffuse")),"use_specular"in e||(e.use_specular=!0,h("lamp",e,"use_specular")),"clip_start"in e||(e.clip_start=.1,h("lamp",e,"clip_start")),"clip_end"in e||(e.clip_end=30,h("lamp",e,"clip_end")),"POINT"==e.type||"SPOT"==e.type)"use_sphere"in e||(e.use_sphere=!1,h("lamp",e,"use_sphere")),ha.WG&&(e.type="SUN");l=a.speakers;for(f=0;f<l.length;f++)e=l[f],"b4w_behavior"in e||(e.b4w_behavior=e.b4w_background_music?"BACKGROUND_SOUND":
"POSITIONAL"),"b4w_auto_play"in e||(e.b4w_auto_play=!1,h("speaker",e,"b4w_auto_play")),"b4w_enable_doppler"in e||(e.b4w_enable_doppler=!1,h("speaker",e,"b4w_enable_doppler")),"b4w_delay"in e||(e.b4w_delay=0),"b4w_delay_random"in e||(e.b4w_delay_random=0),"b4w_volume_random"in e||(e.b4w_volume_random=0),"b4w_pitch_random"in e||(e.b4w_pitch_random=0),"b4w_fade_in"in e||(e.b4w_fade_in=0),"b4w_fade_out"in e||(e.b4w_fade_out=0),"b4w_loop"in e||(e.b4w_loop=!1),"b4w_loop_start"in e||(e.b4w_loop_start=0,
h("speaker",e,"b4w_loop_start")),"b4w_loop_end"in e||(e.b4w_loop_end=0,h("speaker",e,"b4w_loop_end")),e.animation_data&&b(e.animation_data);l=a.textures;for(f=0;f<l.length;f++)e=l[f],"b4w_anisotropic_filtering"in e||(e.b4w_anisotropic_filtering="OFF",h("texture",e,"b4w_anisotropic_filtering")),"b4w_water_foam"in e||(e.b4w_water_foam=!1,h("texture",e,"b4w_water_foam")),"b4w_foam_uv_freq"in e||(e.b4w_foam_uv_freq=[1,1],h("texture",e,"b4w_foam_uv_freq")),"b4w_foam_uv_magnitude"in e||(e.b4w_foam_uv_magnitude=
[1,1],h("texture",e,"b4w_foam_uv_magnitude")),"b4w_parallax_steps"in e||(e.b4w_parallax_steps=5,h("material",e,"b4w_parallax_steps")),"b4w_parallax_lod_dist"in e||(e.b4w_parallax_lod_dist=10,h("material",e,"b4w_parallax_lod_dist")),"b4w_shore_dist_map"in e||(e.b4w_shore_dist_map=!1,h("texture",e,"b4w_shore_dist_map")),"b4w_shore_boundings"in e||(e.b4w_shore_boundings=[1E3,-1E3,1E3,-1E3],h("texture",e,"b4w_shore_boundings")),"b4w_max_shore_dist"in e||(e.b4w_max_shore_dist=100,h("texture",e,"b4w_max_shore_dist")),
"b4w_disable_compression"in e||(e.b4w_disable_compression=!1,h("texture",e,"b4w_disable_compression")),"b4w_source_type"in e||(e.b4w_source_type="",h("texture",e,"b4w_source_type")),"b4w_source_id"in e||(e.b4w_source_id="",h("texture",e,"b4w_source_id")),"b4w_source_size"in e||(e.b4w_source_size=1024,h("texture",e,"b4w_source_size")),"b4w_enable_canvas_mipmapping"in e||(e.b4w_enable_canvas_mipmapping=!0,h("texture",e,"b4w_enable_canvas_mipmapping")),"b4w_nla_video"in e||(e.b4w_nla_video=!1,h("texture",
e,"b4w_nla_video"));l=a.images;for(f=0;f<l.length;f++)e=l[f],"colorspace_settings_name"in e||(e.colorspace_settings_name="sRGB",h("image",e,"colorspace_settings_name"));c=a.materials;for(f=0;f<c.length;f++){d=c[f];"ALPHA_ANTIALIASING"==d.game_settings.alpha_blend&&(ha.XG?d.game_settings.alpha_blend="CLIP":2>ha.Jc&&(B.warn('Material "'+d.name+'" has the "Alpha Anti-Aliasing" transparency type, but multisampling is disabled. Changed to "Alpha Clip".'),d.game_settings.alpha_blend="CLIP"));"use_tangent_shading"in
d||(d.use_tangent_shading=!1,h("material",d,"use_tangent_shading"));"b4w_node_mat_type"in d&&w("material",d,"b4w_node_mat_type");"b4w_skydome"in d&&w("material",d,"b4w_skydome");"b4w_procedural_skydome"in d&&w("material",d,"b4w_procedural_skydome");"b4w_lens_flares"in d||(d.b4w_lens_flares=!1,h("material",d,"b4w_lens_flares"));"LENS_FLARES"===d.name&&(d.b4w_lens_flares||B.warn('"LENS_FLARES" material name has been found. Enable the "Lens Flare" property for this material.'),d.b4w_lens_flares=!0);
d.b4w_water&&("b4w_water_shore_smoothing"in d||(d.b4w_water_shore_smoothing=!1,h("material",d,"b4w_water_shore_smoothing")),"b4w_water_dynamic"in d||(d.b4w_water_dynamic=!1,h("material",d,"b4w_water_dynamic")),"b4w_waves_height"in d||(d.b4w_waves_height=1,h("material",d,"b4w_waves_height")),"b4w_waves_length"in d||(d.b4w_waves_length=1,h("material",d,"b4w_waves_length")),"b4w_water_dst_noise_scale0"in d||(d.b4w_water_dst_noise_scale0=.05,h("material",d,"b4w_water_dst_noise_scale0")),"b4w_water_dst_noise_scale1"in
d||(d.b4w_water_dst_noise_scale1=.03,h("material",d,"b4w_water_dst_noise_scale1")),"b4w_water_dst_noise_freq0"in d||(d.b4w_water_dst_noise_freq0=1.3,h("material",d,"b4w_water_dst_noise_freq0")),"b4w_water_dst_noise_freq1"in d||(d.b4w_water_dst_noise_freq1=1,h("material",d,"b4w_water_dst_noise_freq1")),"b4w_water_dir_min_shore_fac"in d||(d.b4w_water_dir_min_shore_fac=.4,h("material",d,"b4w_water_dir_min_shore_fac")),"b4w_water_dir_freq"in d||(d.b4w_water_dir_freq=.5,h("material",d,"b4w_water_dir_freq")),
"b4w_water_dir_noise_scale"in d||(d.b4w_water_dir_noise_scale=.05,h("material",d,"b4w_water_dir_noise_scale")),"b4w_water_dir_noise_freq"in d||(d.b4w_water_dir_noise_freq=.07,h("material",d,"b4w_water_dir_noise_freq")),"b4w_water_dir_min_noise_fac"in d||(d.b4w_water_dir_min_noise_fac=.5,h("material",d,"b4w_water_dir_min_noise_fac")),"b4w_water_dst_min_fac"in d||(d.b4w_water_dst_min_fac=.2,h("material",d,"b4w_water_dst_min_fac")),"b4w_water_waves_hor_fac"in d||(d.b4w_water_waves_hor_fac=5,h("material",
d,"b4w_water_waves_hor_fac")),"b4w_water_absorb_factor"in d||(d.b4w_water_absorb_factor=6,h("material",d,"b4w_water_absorb_factor")),"b4w_water_fog_color"in d||(d.b4w_water_fog_color=[.5,.7,.7],h("material",d,"b4w_water_fog_color")),"b4w_foam_factor"in d||(d.b4w_foam_factor=5,h("material",d,"b4w_foam_factor")),"b4w_generated_mesh"in d||(d.b4w_generated_mesh=!1,h("material",d,"b4w_generated_mesh")),"b4w_water_num_cascads"in d||(d.b4w_water_num_cascads=5,h("material",d,"b4w_water_num_cascads")),"b4w_water_subdivs"in
d||(d.b4w_water_subdivs=64,h("material",d,"b4w_water_subdivs")),"b4w_water_detailed_dist"in d||(d.b4w_water_detailed_dist=1E3,h("material",d,"b4w_water_detailed_dist")),"b4w_water_enable_caust"in d||(d.b4w_water_enable_caust=!1,h("material",d,"b4w_water_enable_caust")),"b4w_water_caust_scale"in d||(d.b4w_water_caust_scale=.25,h("material",d,"b4w_water_caust_scale")),"b4w_water_caust_brightness"in d||(d.b4w_water_caust_brightness=.5,h("material",d,"b4w_water_caust_brightness")));"b4w_dynamic_grass_size"in
d||(d.b4w_dynamic_grass_size="");"b4w_dynamic_grass_color"in d||(d.b4w_dynamic_grass_color="");"diffuse_intensity"in d||(d.diffuse_intensity=1,h("material",d,"diffuse_intensity"));"b4w_use_ghost"in d||(d.b4w_use_ghost=!1);"b4w_collision_margin"in d||(d.b4w_collision_margin=.04,h("material",d,"b4w_collision_margin"));"b4w_collision_group"in d||(d.b4w_collision_group=128,h("material",d,"b4w_collision_group"));"b4w_collision_mask"in d||(d.b4w_collision_mask=127,h("material",d,"b4w_collision_mask"));
"b4w_do_not_render"in d||(d.b4w_do_not_render=!1,h("material",d,"b4w_do_not_render"));"HALO"!=d.type||"b4w_halo_sky_stars"in d||(d.b4w_halo_sky_stars=!1,h("material",d,"b4w_halo_sky_stars"));"HALO"!=d.type||"b4w_halo_stars_blend_height"in d||(d.b4w_halo_stars_blend_height=10,h("material",d,"b4w_halo_stars_blend_height"));"HALO"!=d.type||"b4w_halo_stars_min_height"in d||(d.b4w_halo_stars_min_height=0,h("material",d,"b4w_halo_stars_min_height"));"specular_shader"in d||(d.specular_shader="COOKTORR",
h("material",d,"specular_shader"));"diffuse_shader"in d||(d.diffuse_shader="LAMBERT",h("material",d,"diffuse_shader"));"roughness"in d||(d.roughness=.5,h("material",d,"roughness"));"diffuse_fresnel"in d||(d.diffuse_fresnel=.1,h("material",d,"diffuse_fresnel"));"diffuse_fresnel_factor"in d||(d.diffuse_fresnel_factor=.5,h("material",d,"diffuse_fresnel_factor"));"specular_slope"in d||(d.specular_slope=.2,h("material",d,"specular_slope"));"specular_toon_size"in d||(d.specular_toon_size=.5,h("material",
d,"specular_toon_size"));"specular_toon_smooth"in d||(d.specular_toon_smooth=.1,h("material",d,"specular_toon_smooth"));"specular_alpha"in d||(d.specular_alpha=1,h("material",d,"specular_alpha"));"b4w_wettable"in d||(d.b4w_wettable=!1,h("material",d,"b4w_wettable"));"b4w_refractive"in d||(d.b4w_refractive=!1,h("material",d,"b4w_refractive"));"b4w_refr_bump"in d||(d.b4w_refr_bump=0,h("material",d,"b4w_refr_bump"));"b4w_shallow_water_col"in d||(d.b4w_shallow_water_col=[0,.8,.3],h("material",d,"b4w_shallow_water_col"));
"b4w_shore_water_col"in d||(d.b4w_shore_water_col=[0,.9,.2],h("material",d,"b4w_shore_water_col"));"b4w_shallow_water_col_fac"in d||(d.b4w_shallow_water_col_fac=1,h("material",d,"b4w_shallow_water_col_fac"));"b4w_shore_water_col_fac"in d||(d.b4w_shore_water_col_fac=.5,h("material",d,"b4w_shore_water_col_fac"));"b4w_water_sss_strength"in d||(d.b4w_water_sss_strength=5.9,h("material",d,"b4w_water_sss_strength"));"b4w_water_sss_width"in d||(d.b4w_water_sss_width=.45,h("material",d,"b4w_water_sss_width"));
"b4w_render_above_all"in d||(d.b4w_render_above_all=!1,h("material",d,"b4w_render_above_all"));"b4w_water_norm_uv_velocity"in d||(d.b4w_water_norm_uv_velocity=.05,h("material",d,"b4w_water_norm_uv_velocity"));"specular_ior"in d||(d.specular_ior=1,h("material",d,"specular_ior"));"darkness"in d||(d.darkness=0,h("material",d,"darkness"));"diffuse_toon_size"in d||(d.diffuse_toon_size=0,h("material",d,"diffuse_toon_size"));"diffuse_toon_smooth"in d||(d.diffuse_toon_smooth=0,h("material",d,"diffuse_toon_smooth"));
"pass_index"in d||(d.pass_index=0,h("material",d,"pass_index"));l=d.texture_slots;for(m=0;m<l.length;m++)e=l[m],"blend_type"in e||(e.blend_type="MIX",h("texture_slot",e,"blend_type"));if(d.node_tree){l=d.node_tree.nodes;for(m=0;m<l.length;m++)k(l[m]);d.node_tree.animation_data&&b(d.node_tree.animation_data)}}e=a.node_groups;for(f=0;f<e.length;f++)for(l=e[f].node_tree.nodes,m=0;m<l.length;m++)k(l[m]);l=a.objects;for(f=0;f<l.length;f++){e=l[f];switch(e.type){case "MESH":"b4w_dynamic_geometry"in e||
(e.b4w_dynamic_geometry=!1);"b4w_reflexible"in e||(e.b4w_reflexible=!1);"b4w_reflexible_only"in e||(e.b4w_reflexible_only=!1);"b4w_reflective"in e||(e.b4w_reflective=!1);"b4w_reflection_type"in e||(e.b4w_reflection_type="PLANE",h("object",e,"b4w_reflection_type"));"b4w_wind_bending"in e||(e.b4w_wind_bending=!1,h("object",e,"b4w_wind_bending"));"b4w_wind_bending_angle"in e||(e.b4w_wind_bending_angle=10,e.b4w_wind_bending_freq=.25,h("object",e,"wind bending params"));"b4w_detail_bending_amp"in e||(e.b4w_detail_bending_amp=
.1,e.b4w_branch_bending_amp=.3,h("object",e,"detail bending params"));"b4w_detail_bending_freq"in e||(e.b4w_detail_bending_freq=1,h("object",e,"b4w_detail_bending_freq"));"b4w_main_bend_stiffness_col"in e||(e.b4w_main_bend_stiffness_col="",h("object",e,"b4w_main_bend_stiffness_col"));"b4w_detail_bend_colors"in e||(e.b4w_detail_bend_colors={leaves_stiffness_col:"",leaves_phase_col:"",overall_stiffness_col:""},h("object",e,"b4w_detail_bend_colors"));"b4w_caustics"in e||(e.b4w_caustics=!1);"vertex_groups"in
e&&e.vertex_groups.length&&e.data&&0==e.data.vertex_groups.length&&(e.data.vertex_groups=e.vertex_groups,delete e.vertex_groups,h("object",e,"vertex_groups"));"b4w_vertex_anim"in e&&e.b4w_vertex_anim.length&&e.data&&0==e.data.b4w_vertex_anim.length&&(e.data.b4w_vertex_anim=e.b4w_vertex_anim,delete e.b4w_vertex_anim,h("object",e,"b4w_vertex_anim"));"b4w_do_not_render"in e||(e.b4w_do_not_render=!1);"b4w_hidden_on_load"in e||(e.b4w_hidden_on_load=!1);"b4w_hide_chldr_on_load"in e||(e.b4w_hide_chldr_on_load=
!1);"use_ghost"in e.game||(e.game.use_ghost=!1);"use_sleep"in e.game||(e.game.use_sleep=!1);"velocity_min"in e.game||(e.game.velocity_min=0);"velocity_max"in e.game||(e.game.velocity_max=0);"collision_group"in e.game||(e.game.collision_group=1);"collision_mask"in e.game||(e.game.collision_mask=255);m=e;c=m.game;d=c.collision_bounds_type;c.use_collision_bounds&&"BOX"!=d&&"CYLINDER"!=d&&"CONE"!=d&&"SPHERE"!=d&&"CAPSULE"!=d&&"EMPTY"!=d&&(B.error("Wrong collision bounds type "+d+". Disable physics for object "+
m.name),m.b4w_collision=!1,m.b4w_floating=!1,m.b4w_vehicle=!1,m.b4w_character=!1);"b4w_vehicle_settings"in e?e.b4w_vehicle_settings&&("steering_ratio"in e.b4w_vehicle_settings||(e.b4w_vehicle_settings.steering_ratio=10),"steering_max"in e.b4w_vehicle_settings||(e.b4w_vehicle_settings.steering_max=1),"inverse_control"in e.b4w_vehicle_settings||(e.b4w_vehicle_settings.inverse_control=!1),"force_max"in e.b4w_vehicle_settings||(e.b4w_vehicle_settings.force_max=1500),"brake_max"in e.b4w_vehicle_settings||
(e.b4w_vehicle_settings.brake_max=100),"speed_ratio"in e.b4w_vehicle_settings||(e.b4w_vehicle_settings.speed_ratio=.027),"max_speed_angle"in e.b4w_vehicle_settings||(e.b4w_vehicle_settings.max_speed_angle=Math.PI),"delta_tach_angle"in e.b4w_vehicle_settings||(e.b4w_vehicle_settings.delta_tach_angle=4.43),"suspension_compression"in e.b4w_vehicle_settings||(e.b4w_vehicle_settings.suspension_compression=4.4),"suspension_stiffness"in e.b4w_vehicle_settings||(e.b4w_vehicle_settings.suspension_stiffness=
20),"suspension_damping"in e.b4w_vehicle_settings||(e.b4w_vehicle_settings.suspension_damping=2.3),"wheel_friction"in e.b4w_vehicle_settings||(e.b4w_vehicle_settings.wheel_friction=1E3),"roll_influence"in e.b4w_vehicle_settings||(e.b4w_vehicle_settings.roll_influence=.1),"max_suspension_travel_cm"in e.b4w_vehicle_settings||(e.b4w_vehicle_settings.max_suspension_travel_cm=30),"floating_factor"in e.b4w_vehicle_settings||(e.b4w_vehicle_settings.floating_factor=3),"floating_factor"in e.b4w_vehicle_settings||
(e.b4w_vehicle_settings.floating_factor=3),"water_lin_damp"in e.b4w_vehicle_settings||(e.b4w_vehicle_settings.water_lin_damp=.9),"water_rot_damp"in e.b4w_vehicle_settings||(e.b4w_vehicle_settings.water_rot_damp=.9)):(e.b4w_vehicle_settings=null,h("object",e,"b4w_vehicle_settings"));"b4w_floating_settings"in e?e.b4w_floating_settings&&("floating_factor"in e.b4w_floating_settings||(e.b4w_floating_settings.floating_factor=3),"water_lin_damp"in e.b4w_floating_settings||(e.b4w_floating_settings.water_lin_damp=
.8),"water_rot_damp"in e.b4w_floating_settings||(e.b4w_floating_settings.water_rot_damp=.8)):(e.b4w_floating_settings=null,h("object",e,"b4w_floating_settings"));"b4w_character_settings"in e?e.b4w_character_settings&&("walk_speed"in e.b4w_character_settings||(e.b4w_character_settings.walk_speed=4),"run_speed"in e.b4w_character_settings||(e.b4w_character_settings.run_speed=8),"step_height"in e.b4w_character_settings||(e.b4w_character_settings.step_height=.25),"jump_strength"in e.b4w_character_settings||
(e.b4w_character_settings.jump_strength=5),"waterline"in e.b4w_character_settings||(e.b4w_character_settings.waterline=0)):(e.b4w_character_settings=null,h("object",e,"b4w_character_settings"));"b4w_selectable"in e||(e.b4w_selectable=!1,h("object",e,"b4w_selectable"));"b4w_outlining"in e||(e.b4w_outlining=!1,h("object",e,"b4w_outlining"));"b4w_outline_on_select"in e||(e.b4w_outline_on_select=!1,h("object",e,"b4w_outline_on_select"));"b4w_billboard"in e||(e.b4w_billboard=!1,h("object",e,"b4w_billboard"));
"b4w_billboard_geometry"in e||(e.b4w_billboard_geometry="SPHERICAL",h("object",e,"b4w_billboard_geometry"));"b4w_pres_glob_orientation"in e||(e.b4w_pres_glob_orientation=!1,h("object",e,"b4w_pres_glob_orientation"));"b4w_outline_settings"in e||("b4w_glow_settings"in e?e.b4w_outline_settings=e.b4w_glow_settings:(e.b4w_outline_settings={},e.b4w_outline_settings.outline_duration=1,e.b4w_outline_settings.outline_period=1,e.b4w_outline_settings.outline_relapses=0),h("object",e,"b4w_outline_settings"));
"lod_levels"in e||(e.lod_levels=[],h("object",e,"lod_levels"));"b4w_animation_mixing"in e||(e.b4w_animation_mixing=!1,h("object",e,"b4w_animation_mixing"));break;case "EMPTY":"b4w_anchor"in e||(e.b4w_anchor=null,h("object",e,"b4w_anchor")),!e.b4w_anchor||"max_width"in e.b4w_anchor||(e.b4w_anchor.max_width=250)}"collision_margin"in e.game||(e.game.collision_margin=.04,h("object",e,"collision_margin"));"b4w_anim_behavior"in e||(e.b4w_anim_behavior=e.b4w_cyclic_animation?"CYCLIC":"FINISH_STOP",h("object",
e,"b4w_anim_behavior"));if(!("rotation_quaternion"in e)){m=[0,0,0,1];r.Y(e.rotation_euler,m);c=m;d=m[0];n=m[1];var p=m[2];c[0]=m[3];c[1]=d;c[2]=n;c[3]=p;e.rotation_quaternion=m;h("object",e,"rotation_quaternion")}"webgl_do_not_batch"in e&&(e.b4w_do_not_batch=e.webgl_do_not_batch)&&w("object",e,"webgl_do_not_batch");"b4w_shadow_cast_only"in e||(e.b4w_shadow_cast_only=!1,h("object",e,"b4w_shadow_cast_only"));"b4w_correct_bounding_offset"in e||(e.b4w_correct_bounding_offset="AUTO",h("object",e,"b4w_correct_bounding_offset"));
c=e.particle_systems;for(m=0;m<c.length;m++)d=c[m],n=d.settings,"use_rotation_dupli"in n||(n.use_rotation_dupli=!1,h("particle_settings",n,"use_rotation_dupli")),"use_whole_group"in n||(n.use_whole_group=!1,h("particle_settings",n,"use_whole_group")),d.transforms||(d.transforms=new Float32Array,h("particle_system",d,"transforms")),"b4w_billboard_align"in n||(n.b4w_billboard_align="VIEW",h("particle_settings",n,"b4w_billboard_align")),"b4w_dynamic_grass"in n||(n.b4w_dynamic_grass=!1,h("object",n,"b4w_dynamic_grass")),
"b4w_dynamic_grass_scale_threshold"in n||(n.b4w_dynamic_grass_scale_threshold=.01,h("object",n,"b4w_dynamic_grass_scale_threshold")),"b4w_initial_rand_rotation"in n||(n.b4w_initial_rand_rotation=!1,h("particle_settings",n,"b4w_initial_rand_rotation")),"b4w_rotation_type"in n||(n.b4w_rotation_type="Z",h("particle_settings",n,"b4w_rotation_type")),"b4w_rand_rotation_strength"in n||(n.b4w_rand_rotation_strength=1,h("particle_settings",n,"b4w_rand_rotation_strength")),"b4w_hair_billboard"in n||(n.b4w_hair_billboard=
!1,h("particle_settings",n,"b4w_hair_billboard")),"b4w_hair_billboard_type"in n||(n.b4w_hair_billboard_type="BASIC",h("particle_settings",n,"b4w_hair_billboard_type")),"b4w_hair_billboard_jitter_amp"in n||(n.b4w_hair_billboard_jitter_amp=0,h("particle_settings",n,"b4w_hair_billboard_jitter_amp")),"b4w_hair_billboard_jitter_freq"in n||(n.b4w_hair_billboard_jitter_freq=0,h("particle_settings",n,"b4w_hair_billboard_jitter_freq")),"b4w_hair_billboard_geometry"in n||(n.b4w_hair_billboard_geometry="SPHERICAL",
h("particle_settings",n,"b4w_hair_billboard_geometry")),"b4w_wind_bend_inheritance"in n||(n.b4w_wind_bend_inheritance="PARENT",h("particle_settings",n,"b4w_wind_bend_inheritance")),"b4w_shadow_inheritance"in n||(n.b4w_shadow_inheritance="PARENT",h("particle_settings",n,"b4w_shadow_inheritance")),"b4w_reflection_inheritance"in n||(n.b4w_reflection_inheritance="PARENT",h("particle_settings",n,"b4w_reflection_inheritance")),"b4w_vcol_from_name"in n||(n.b4w_vcol_from_name="",h("particle_settings",n,"b4w_vcol_from_name")),
"b4w_vcol_to_name"in n||(n.b4w_vcol_to_name="",h("particle_settings",n,"b4w_vcol_to_name")),"b4w_coordinate_system"in n||(n.b4w_coordinate_system="LOCAL",h("particle_settings",n,"b4w_coordinate_system")),"b4w_allow_nla"in n||(n.b4w_allow_nla=!0,h("particle_settings",n,"b4w_allow_nla")),"b4w_enable_soft_particles"in n||(n.b4w_enable_soft_particles=!1,h("particle_settings",n,"b4w_enable_soft_particles")),"b4w_particles_softness"in n||(n.b4w_particles_softness=1,h("particle_settings",n,"b4w_particles_softness")),
"billboard_tilt"in n||(n.billboard_tilt=0,h("particle_settings",n,"billboard_tilt")),"billboard_tilt_random"in n||(n.billboard_tilt_random=0,h("particle_settings",n,"billboard_tilt_random")),"use_rotations"in n||(n.use_rotations=!1,h("particle_settings",n,"use_rotations"));"constraints"in e||(e.constraints=[],h("object",e,"constraints"));c=e.constraints;for(m=0;m<c.length;m++)d=c[m],"influence"in d||(d.influence=1),"axes"in d||(d.axes=[1,1,1]);c=e.modifiers;for(m=0;m<c.length;m++){a:{d=c[m];switch(d.type){case "ARRAY":if(!("fit_type"in
d)){B.error("WARNING Incomplete modifier "+String(d.type)+' for "'+e.name+'", reexport "'+a.b4w_filepath_blend+'" scene');d=!1;break a}}d=!0}d||(c.splice(m,1),m--)}"animation_data"in e||(e.animation_data={action:null,nla_tracks:[]},h("object",e,"animation_data"));if(e.animation_data){if(!("action"in e.animation_data))e.animation_data.action=null,D("no action in animation data "+e.name);else if(e.animation_data.action){m=e.animation_data.action.fcurves;for(var u in m){c=m[u];for(var v in c)d=c[v],
"num_channels"in d||(d.num_channels=1,D('B4W Warning: no channels number in animation fcurve for "'+e.animation_data.action.name+'" action, reexport scene'))}}"nla_tracks"in e.animation_data||(e.animation_data.nla_tracks=[],D("no NLA in animation data "+e.name));b(e.animation_data)}"b4w_collision_id"in e||(e.b4w_collision_id="",h("object",e,"b4w_collision_id"));"b4w_viewport_alignment"in e||(e.b4w_viewport_alignment=null,h("object",e,"b4w_viewport_alignment"));"pinverse_tsr"in e||(e.pinverse_tsr=
null,h("object",e,"pinverse_tsr"));"b4w_cluster_data"in e||(e.b4w_cluster_data={cluster_id:-1,cluster_center:null},h("object",e,"b4w_cluster_data"));"pass_index"in e||(e.pass_index=0,h("object",e,"pass_index"));"b4w_custom_prop"in e||(h("object",e,"b4w_custom_prop"),e.b4w_custom_prop=null);(0>e.scale[0]||0>e.scale[1]||0>e.scale[2])&&D('negative scale for object "'+e.name+'", can lead to some errors');m=e.scale;0==m[0]&&0==m[1]&&0==m[2]?m=!0:(c=Math.abs((m[1]-m[2])/m[1]),m=.005>Math.abs((m[0]-m[1])/
m[0])&&.005>c);m||D("non-uniform scale for object "+e.name)}for(var z in T)f=T[z],u=z.match(/.*?(?=>>|$)/i)[0],B.warn('Property "'+String(u)+'" is '+f.NH+' for "'+f.type+'". To fix this, reexport '+a.b4w_filepath_blend)};c.tM=function(a){a:{var b=a.modifiers;for(var c=0;c<b.length;c++){var h=b[c].type;if("ARRAY"==h||"CURVE"==h){b=!0;break a}}b=!1}if(!b)return null;b=u(a.data,a.data.name+"_MOD");a=a.modifiers;for(c=0;c<a.length;c++){var f=a[c];switch(f.type){case "ARRAY":h=b;var k=f,e=0,l=0,m=0,n=
new Float32Array(16);f=[];for(var y=1;y<k.count;y++){k.use_constant_offset&&(e+=k.constant_offset_displace[0],l+=k.constant_offset_displace[1],m+=k.constant_offset_displace[2]);if(k.use_relative_offset){var w=h.b4w_boundings.bb;e+=(w.max_x-w.min_x)*k.relative_offset_displace[0];l+=(w.max_y-w.min_y)*k.relative_offset_displace[1];m+=(w.max_z-w.min_z)*k.relative_offset_displace[2]}r._60(e,l,m,n);var G=w=u(h),D=n,H=z.fromMat4(D,V);H=C.fromMat3(H,aa);for(var J=0;J<G.submeshes.length;J++){var O=G.submeshes[J];
r._28(O.position,D,O.position,0);v.j(O.tbn,H,O.tbn)}f.push(w)}for(y=0;y<f.length;y++)for(k=h,e=f[y],l=0;l<k.submeshes.length;l++)if(m=k.submeshes[l],n=e.submeshes[l],w=m.base_length,G=m.indices.length,w)for(var K in m)switch(K){case "base_length":m[K]+=n[K];break;case "boundings":break;case "indices":m[K]=r._67(m[K],n[K]);for(D=G;D<m[K].length;D++)m[K][D]+=w;break;case "position":m[K]=E(m[K],n[K],m[K].length/w/3);break;case "tbn":m[K]=E(m[K],n[K],m[K].length/w/4);break;case "shade_tangs":m[K]=E(m[K],
n[K],m[K].length/w/3);break;case "group":m[K]=E(m[K],n[K],m[K].length/w);break;case "texcoord":m[K]=E(m[K],n[K],m.uv_layers.length);break;case "color":m[K]=E(m[K],n[K],m.vertex_colors.length);break;case "uv_layers":case "vertex_colors":break;default:B.warn('array_mesh_join(): unknown submesh property "'+K+'"'),m[K]=r._2(m[K],n[K])}break;case "CURVE":for(h=b,y=L.dO(f.object),k=new Float32Array(16),l=y.rl?4:3,e=new Float32Array(l),l=new Float32Array(l),m=new Float32Array(3),n=new Float32Array(4),w=
new Float32Array(4),G=new Float32Array(3),D=new Float32Array(3),H=new Float32Array(3),J=0;J<h.submeshes.length;J++){var T=h.submeshes[J];O=T.position;T=T.tbn;a:{var N=f.deform_axis;switch(N){case "POS_X":case "NEG_X":N=0;break a;case "POS_Y":case "NEG_Y":N=1;break a;case "POS_Z":case "NEG_Z":N=2;break a;default:R.va("Wrong deform axis value "+N)}N=void 0}G[0]=0;G[1]=0;G[2]=0;G[N]=1;for(var Y=L.iU(y),ka=0;ka<O.length/3;ka++){H[0]=O[3*ka];H[1]=O[3*ka+1];H[2]=O[3*ka+2];var ha=H[N],ua=L.hU(y,ha);L.jU(y,
ua,e);m[0]=e[0];m[1]=e[1];m[2]=e[2];L.gU(y,ua,l);D[0]=l[0];D[1]=0;D[2]=l[2];p.normalize(D,D);C.rotationTo(G,D,n);0>ha?(e[0]=D[0],e[1]=D[1],e[2]=D[2],p.scale(e,ha,e),p.add(m,e,m)):ha>Y&&(e[0]=D[0],e[1]=D[1],e[2]=D[2],p.scale(e,ha-Y,e),p.add(m,e,m));d.fromRotationTranslation(n,m,k);y.rl&&(C.setAxisAngle(G,e[3],w),p.transformQuat(H,w,H));H[N]=0;p.transformMat4(H,k,H);O[3*ka]=H[0];O[3*ka+1]=H[1];O[3*ka+2]=H[2];ha=v.e(T,ka,A);v.j(ha,n,ha);v.n(T,ha,ka)}}}U.N(b)}return b};c.wM=function(a,b){function c(b,
c){var e=b[0];if(1<b.length)for(var d=1;d<b.length;d++)e+="*"+b[d];for(d=0;d<a.length;d++)if(b=a[d],b.name==e)for(var h in c)b[h]=c[h]}function d(a,b){for(var e in a)c(a[e],b)}for(var h=b.b4w_logic_nodes,f=0;f<h.length;f++)for(var e=h[f],k=0;k<e.length;k++){var l=e[k],m={register1:"variable1",register2:"variable2",registerd:"variabled"},n;for(n in m)n in l&&(l[m[n]]=l[n]);for(var p in l.variables)"boolean"!=typeof l.variables[p][0]&&(l.variables[p]=[!1,l.variables[p]]);0<=["MATH","CONDJUMP","PAGEPARAM",
"REGSTORE"].indexOf(l.type)&&("variable1"in l&&(l.variables.id0=[!1,l.variable1]),"variable2"in l&&(l.variables.id1=[!1,l.variable2]),"variabled"in l&&(l.variables.vd=[!1,l.variabled]));for(var u in l.links)u.startsWith("id")||delete l.links[u];m=l.common_usage_names;var r=l.variables;switch(l.type){case "SELECT":for(var v=0;v<a.length;v++)m=a[v],m.name==l.object&&(m.b4w_selectable=!0);l.bools||(l.bools={});l.bools.not_wait||(l.bools.not_wait=!1);D('Logic nodes type "SELECT" is deprecated');break;
case "SWITCH_SELECT":d(l.objects_paths,{b4w_selectable:!0});if(l.links instanceof Array){D('Format of a "SWITCH_SELECT" node is outdated. It is recommended to reexport the scene "'+b.name+'"');m={};r=0;for(v in l.objects_paths)m[v]=l.links[r],r++;l.links=m}break;case "SELECT_PLAY":D('Logic nodes type "SELECT_PLAY" is deprecated, node will be muted. To fix this, reexport the scene "'+b.name+'"');l.mute=!0;break;case "SELECT_PLAY_ANIM":D('Logic nodes type "SELECT_PLAY_ANIM" is deprecated');break;case "SHOW":case "HIDE":l.bools||
(l.bools={});void 0===l.bools.ch&&(l.bools.ch=!1);l.bools.id0||d(l.objects_paths,{b4w_do_not_batch:!0});break;case "SET_SHADER_NODE_PARAM":case "INHERIT_MAT":d(l.objects_paths,{b4w_do_not_batch:!0});break;case "PLAY":b.b4w_use_nla=!0;break;case "MOVE_TO":d(l.objects_paths,{b4w_do_not_batch:!0});break;case "TRANSFORM_OBJECT":d(l.objects_paths,{b4w_do_not_batch:!0});switch(m.space_type){case "WORLD":m.space_type=Y.NK;break;case "PARENT":m.space_type=Y.MK;break;case "LOCAL":m.space_type=Y.LK}break;case "OUTLINE":d(l.objects_paths,
{b4w_outlining:!0});break;case "CONDJUMP":l.condition&&(m.condition=l.condition);if("cnd"in l.floats)m.condition=l.floats.cnd;else switch(m.condition){case "GEQUAL":m.condition=Y.jD;break;case "LEQUAL":m.condition=Y.lD;break;case "GREATER":m.condition=Y.kD;break;case "LESS":m.condition=Y.mD;break;case "NOTEQUAL":m.condition=Y.nD;break;case "EQUAL":m.condition=Y.iD}void 0!=l.number1&&(l.input1=l.number1);void 0!=l.number2&&(l.input2=l.number2);l.bools||(l.bools={});l.bools.str&&(m.variable_type="STRING");
switch(m.variable_type){case "NUMBER":m.variable_type=Y.Oy;break;case "STRING":m.variable_type=Y.pD;break;case "OBJECT":m.variable_type=Y.oD}void 0===m.variable_type&&(m.variable_type=Y.Oy,l.floats.inp1=l.input1,l.floats.inp2=l.input2);void 0===r.id0&&(r.id0=r.v1,r.id1=r.v2);break;case "SEND_REQ":l.bools||(l.bools={});l.strings||(l.strings={});void 0===l.bools.ct&&(l.bools.ct=!1);void 0!=l.url&&(l.bools.url=!1,l.strings.url=l.url);break;case "MATH":void 0!=l.number1&&(l.input1=l.number1);void 0!=
l.number2&&(l.input2=l.number2);void 0!=l.input1&&(l.floats.inp1=l.input1);void 0!=l.input2&&(l.floats.inp2=l.input2);switch(l.operation){case "DIV":l.operation=Y.sK;break;case "SUB":l.operation=Y.BK;break;case "MUL":l.operation=Y.xK;break;case "ADD":l.operation=Y.nK;break;case "RAND":l.operation=Y.yK;break;case "SIN":l.operation=Y.AK;break;case "COS":l.operation=Y.rK;break;case "TAN":l.operation=Y.CK;break;case "ARCSIN":l.operation=Y.pK;break;case "ARCCOS":l.operation=Y.oK;break;case "ARCTAN":l.operation=
Y.qK;break;case "LOG":l.operation=Y.tK;break;case "MIN":l.operation=Y.vK;break;case "MAX":l.operation=Y.uK;break;case "ROUND":l.operation=Y.zK;break;case "MOD":l.operation=Y.wK;break;case "ABS":l.operation=Y.mK}void 0===r.id0&&(r.id0=r.v1,r.id1=r.v2);break;case "REGSTORE":l.floats||(l.floats={});l.strings||(l.strings={});void 0!=l.number1&&(l.input1=l.number1);if(void 0!=l.input1)switch(typeof l.input1){case "number":l.floats.inp1=l.input1;m.variable_type="NUMBER";break;default:l.strings.inp1=l.input1,
m.variable_type="STRING"}switch(m.variable_type){case "NUMBER":m.variable_type=Y.Oy;break;case "STRING":m.variable_type=Y.pD;break;case "OBJECT":m.variable_type=Y.oD,d(l.objects_paths,{b4w_do_not_batch:!0})}break;case "PAGEPARAM":l.bools||(l.bools={});void 0===l.bools.hsh&&(l.bools.hsh=!1);l.floats||(l.floats={});void 0===l.floats.ptp&&(l.floats.ptp=0);break;case "STOP_ANIM":case "PLAY_ANIM":l.bools||(l.bools={});void 0===l.bools.env&&(l.bools.env=!1);void 0===l.bools.id0&&(l.bools.id0=!1);l.bools.id0||
c(l.objects_paths.id0,{b4w_do_not_batch:!0});"PLAY_ANIM"==l.type&&((l=m.param_anim_behavior)||(l="FINISH_STOP"),m.param_anim_behavior=K.Yy(l));break;case "STRING":switch(m.string_operation){case "JOIN":m.string_operation=Y.IK;break;case "FIND":m.string_operation=Y.HK;break;case "REPLACE":m.string_operation=Y.JK;break;case "SPLIT":m.string_operation=Y.KK;break;case "COMPARE":m.string_operation=Y.GK}if("cnd"in l.floats)m.condition=l.floats.cnd;else switch(m.condition){case "GEQUAL":m.condition=Y.jD;
break;case "LEQUAL":m.condition=Y.lD;break;case "GREATER":m.condition=Y.kD;break;case "LESS":m.condition=Y.mD;break;case "NOTEQUAL":m.condition=Y.nD;break;case "EQUAL":m.condition=Y.iD}break;case "REDIRECT":void 0!=l.url&&(l.bools.url=!1,l.strings.url=l.url);break;case "SET_CAMERA_MOVE_STYLE":switch(m.camera_move_style){case "STATIC":m.camera_move_style=Y.iK;break;case "TARGET":m.camera_move_style=Y.jK;break;case "EYE":m.camera_move_style=Y.gK;break;case "HOVER":m.camera_move_style=Y.hK}break;case "ENTRYPOINT":l.bools||
(l.bools={});void 0===l.bools.js&&(l.bools.js=!1);l.bools.js&&(l.mute=!0);break;case "JS_CALLBACK":for(n in l=m.js_cb_params,l)switch(l[n]){case "OBJECT":l[n]=Y.kK;break;case "VARIABLE":l[n]=Y.lK}}}}});w.a=f},function(D,w,f){D=f(0);var N=f(16),U=f(1),n=f(12),y=f(10),d=f(2);f=Object(D.a)("__debug_batch",function(f,w){function m(a,c,f){var b=[],h;for(h in a)1<d._8(a[h])&&b.push([h,a[h]]);b.sort(function(a,b){var c=d._8(a[1]),h=d._8(b[1]);return h!=c?h-c:a<b?-1:b<a?1:0});if(b.length){z.groupCollapsed(c+
" "+f);z.Wd("Property different variants (>1) | Property name");for(a=0;a<b.length;a++)z.groupCollapsed(d._8(b[a][1]),b[a][0]),r(b[a][1]);z.groupEnd()}}function r(a){z.Wd("Batches count for this property value | Property value");var c=[],d;for(d in a)c.push([d,a[d]]);c.sort(function(a,c){return c[1]!=a[1]?c[1]-a[1]:a[0]<c[0]?-1:c[0]<a[0]?1:0});for(a=0;a<c.length;a++)z.Wd(c[a][1],c[a][0]);z.groupEnd()}var p=Object(N.a)(f),z=Object(U.a)(f),a=Object(n.a)(f),C=Object(y.a)(f);w.print_batches_stat=function(){for(var d=
{},c="bounds_local bufs_data id attribute_setters num_vertices num_triangles material_names shader bpy_tex_names".split(" "),f=0,b=0,h=a.tc(C.Ah(),"MESH",a.DATA_ID_ALL),n=0;n<h.length;n++)for(var r=0;r<h[n].Aa.length;r++)for(var u=0;u<h[n].Aa[r].Ia.length;u++){var v=p.sN(h[n].Aa[r].Ia[u]),y=v.Mb.yg+"/"+v.Mb.ff;v["shaders_info.directives"]=v.Mb.ei;v["shaders_info.node_elements"]=v.Mb.Mf;delete v.Mb;for(var w=0;w<c.length;w++)delete v[c[w]];if(h[n].is_dynamic)b++;else{f++;v.type in d||(d[v.type]={});
y in d[v.type]||(d[v.type][y]={});for(var D in v)D in d[v.type][y]||(d[v.type][y][D]={}),w=JSON.stringify(v[D]),w in d[v.type][y][D]||(d[v.type][y][D][w]=0),d[v.type][y][D][w]++}}z.group("Batches statistics:");z.Wd("STATIC/DYNAMIC count:",f+"/"+b);z.group("STATIC batches diversity:");for(var B in d)for(y in d[B])m(d[B][y],B,y);z.groupEnd();z.groupEnd()}});w.a=f},function(D,w,f){D=f(0);var N=f(33),U=f(24),n=f(1),y=f(8),d=f(30),m=f(68),C=f(41),v=f(80),r=f(26),p=f(3);f=Object(D.a)("camera_anim",function(f,
a){function z(a,b,c,d,e){c=u.angle_wrap_0_2pi(b-c);c=Math.min(c,2*Math.PI-c);b=u.angle_wrap_0_2pi(d-b);b=Math.min(b,2*Math.PI-b);if(1E-6>Math.abs(c)||1E-6>2*Math.PI-Math.abs(c))c=0;if(1E-6>Math.abs(b)||1E-6>2*Math.PI-Math.abs(b))b=0;k.is_eye_camera(a)?(e[0]=b,e[1]=c):(e[0]=c,e[1]=b);return e}var k=Object(N.a)(f),c=Object(U.a)(f),l=Object(n.a)(f),b=Object(d.a)(f),h=Object(m.a)(f),w=Object(C.a)(f),D=Object(v.a)(f),u=Object(r.a)(f),E=new Float32Array(2),R=new Float32Array(2),O=new Float32Array(3),L=
new Float32Array(3),B=new Float32Array(3),Y=D.create(),K=D.create(),ha=D.create(),T=y.create(),V={},A=!1,aa=!1,J=!1,P=!1;a.track_to_target=function(a,b,d,f,e,m,n,r){if(k.is_eye_camera(a)){if(u.is_vector(b))var q=b;else q=O,w.get_object_center(b,!1,q);d=d||1;f=f||2;e=e||1;m=m||1;var t=w.get_translation(a,L);b=p.subtract(q,t,B);q=k.get_camera_angles(a,E);var v=k.get_camera_angles_dir(b,R),z=v[0]-q[0],y=v[1]-q[1],A=Math.abs(Math.acos(Math.cos(z)*Math.cos(y))/d),C=p.length(b)*(1-1/f),G=function(a){return 6*
a*(1-a)},I=h.get_timeline(),D=0,H=function(){c.remove_sensor_manifold(a,"TRACK_TO_TARGET");n&&n()};d=c.create_timeline_sensor();f=c.create_elapsed_sensor();c.create_sensor_manifold(a,"TRACK_TO_TARGET",c.CT_CONTINUOUS,[d,f],null,function(b,d,h){k.is_eye_camera(b)?1==h&&(h=c.get_sensor_value(b,d,0)-I,d=c.get_sensor_value(b,d,1),h<A?(h=G(h/A),k.rotate_camera(a,h*z*d/A,h*y*d/A)):h<A+e?(0==D&&(k.rotate_camera(a,v[0],v[1],!0),D++),h=G(h-A/e),d=h*C*d/e,w.move_local(b,0,0,-d)):h<A+e+m?1>=D&&(k.rotate_camera(a,
v[0],v[1],!0),k.eye_set_look_at(a,t),w.move_local(b,0,0,-C),r&&r(),D++):h<A+e+m+e?(2>=D&&(k.rotate_camera(a,v[0],v[1],!0),k.eye_set_look_at(a,t),w.move_local(b,0,0,-C),D++),h=G(h-A-e-m/e),d=h*C*d/e,w.move_local(b,0,0,d)):(k.rotate_camera(a,v[0],v[1],!0),k.eye_set_look_at(a,t),H())):H()})}else l.error("track_to_target(): Wrong camera object or camera move style")};a.auto_rotate=function(a,d,h){function f(b,d,h){if(1==h)if(h=k.get_move_style(b),h==k.MS_STATIC)e();else if(h!=k.MS_TARGET_CONTROLS&&h!=
k.MS_EYE_CONTROLS||!k.has_horizontal_rot_limits(b))n=null,d=c.get_sensor_value(b,d,0),k.rotate_camera(b,d*a,0);else{h=h==k.MS_EYE_CONTROLS?k.eye_get_horizontal_limits(b,V):k.target_get_horizontal_limits(b,V);if(null===n||h.left!=n.left||h.right!=n.right){n=n||{};n.left=h.left;n.right=h.right;q=Math.min(.2,u.angle_wrap_0_2pi(n.right-n.left)/2);h=m;var f=n,l=k.get_camera_angles(h,E)[0];h=z(h,l,f.left,f.right,R);p=a*Math.min(1,h[0]/.2,h[1]/.2)}d=c.get_sensor_value(b,d,0);h=k.get_camera_angles(b,E)[0];
h=z(b,h,n.left,n.right,R);h[1]>q&&h[0]>q?p=u.sign(p)*a:h[1]<q?p-=Math.pow(a,2)/.4*d:h[0]<q&&(p+=Math.pow(a,2)/.4*d);k.rotate_camera(b,d*p,0)}}function e(){c.remove_sensor_manifold(m,"AUTO_ROTATE");c.remove_sensor_manifold(m,"DISABLE_AUTO_ROTATE");d()}d=d||function(){};var m=b.get_active_camera();if(k.is_static_camera(m))l.error("auto_rotate(): Wrong camera move style");else{var n={},q=0,p=0;if(c.check_sensor_manifold(m,"AUTO_ROTATE"))e();else{var r=c.create_mouse_move_sensor("X"),v=c.create_mouse_move_sensor("Y"),
y=c.create_mouse_click_sensor(),w=c.create_touch_move_sensor(),A=c.create_touch_zoom_sensor(),B=c.create_elapsed_sensor();h=h?c.create_mouse_wheel_sensor():c.create_custom_sensor(0);c.create_sensor_manifold(m,"DISABLE_AUTO_ROTATE",c.CT_LEVEL,[r,v,y,w,A,h],function(a){return a[0]&&a[2]||a[1]&&a[2]||a[3]||a[4]||a[5]},e);c.create_sensor_manifold(m,"AUTO_ROTATE",c.CT_CONTINUOUS,[B],function(a){return a[0]},f)}}};a.is_auto_rotate=function(){var a=b.get_active_camera();return c.check_sensor_manifold(a,
"AUTO_ROTATE")};a.check_auto_rotate=function(){var a=b.get_active_camera();return k.get_move_style(a)==k.MS_STATIC?!1:!0};a.move_camera_to_point=function(a,b,c,d,e){if(k.get_move_style(a)!=k.MS_STATIC)l.error("move_camera_to_point(): wrong camera type");else if(!A)if(a)if(b){c=c||1;d=d||.01;var f=u.is_vector(a)?a:w.get_tsr(a,Y),m=u.is_vector(b)?b:w.get_tsr(b,K);b=p.distance(D.get_trans(f,O),D.get_trans(m,L))/c;c=u.quat_to_dir(D.get_quat(f,T),u.AXIS_MZ,O);var n=u.quat_to_dir(D.get_quat(m,T),u.AXIS_MZ,
L);c=Math.min(Math.abs(p.dot(c,n)),1);d=1E3*Math.max(b,Math.acos(c)/d);A=!0;var q=h.animate(0,1,d,function(b){var c=D.interpolate(f,m,u.smooth_step(b),ha);J?(h.clear_animation(q),A=J=!1):(w.set_tsr(a,c),1==b&&(A=!1,e&&e()))})}else l.error("move_camera_to_point(): you must specify the point object");else l.error("move_camera_to_point(): you must specify the camera object")};a.rotate_camera=function(a,b,c,d,e){if(k.get_move_style(a)==k.MS_STATIC)l.error("rotate_camera(): not supported for STATIC cameras");
else if(!aa)if(a)if(b||c){d=d||1E3;aa=!0;var f=0,m=h.animate(0,b,d,function(c){P||Math.abs(c)>=Math.abs(b)?(P=!1,h.clear_animation(m),aa&&(aa=!1,e&&e())):(k.rotate_camera(a,f-c,0),f=c)}),n=0,q=h.animate(0,c,d,function(b){P||Math.abs(b)>=Math.abs(c)?(P=!1,h.clear_animation(q),aa&&(aa=!1,e&&e())):(k.rotate_camera(a,0,n-b),n=b)})}else l.error("rotate_camera(): you must specify the rotation angle");else l.error("rotate_camera(): you must specify the camera object")};a.stop_cam_moving=function(){J=!0};
a.stop_cam_rotating=function(){P=!0};a.is_moving=function(){return A};a.is_rotating=function(){return aa}});w.a=f},function(D,w,f){D=f(0);var N=f(33),U=f(24),n=f(54),y=f(30),d=f(26),m=f(61),C=f(40),v=f(49),r=f(50),p=f(41),z=f(67),a=f(3),H=f(81),k=f(1);f=Object(D.a)("fps",function(c,f){function b(){}function h(a,b,c){var e=I.get_active_camera();P.rotate_camera(e,b,c);b=P.get_camera_angles_char(e,sa);da.set_character_rotation_h(a,b[0]);da.set_character_vert_move_dir_angle(a,b[1])}function l(a,b,c,e){if(.01<
Math.abs(Da[0])||.01<Math.abs(Da[1]))c=q.get_sensor_value(a,b,0),b=t.smooth(Da[0],0,c,.2*S),c=t.smooth(Da[1],0,c,.2*S),Da[0]-=b,Da[1]-=c,e(a,-b*Na,-c*Na)}function w(a,b){a=document.createElement("div");a.style.cssText="position: absolute;left: 10px;bottom: 70px;width: 53px;height: 53px;background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyBpZD0ic3ZnMzQwMCIgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTQuMTExbW0iIHdpZHRoPSIxNC4xMTFtbSIgdmVyc2lvbj0iMS4xIiB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHZpZXdCb3g9IjAgMCA0OS45OTk5OTggNDkuOTk5OTk5Ij4gPG1ldGFkYXRhIGlkPSJtZXRhZGF0YTM0MDUiPjxyZGY6UkRGPjxjYzpXb3JrIHJkZjphYm91dD0iIj48ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD48ZGM6dHlwZSByZGY6cmVzb3VyY2U9Imh0dHA6Ly9wdXJsLm9yZy9kYy9kY21pdHlwZS9TdGlsbEltYWdlIi8+PGRjOnRpdGxlLz48L2NjOldvcms+PC9yZGY6UkRGPiA8L21ldGFkYXRhPiA8ZyBpZD0ibGF5ZXIxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIC0xMDAyLjQpIj48cmVjdCBpZD0icmVjdDI0MTI2IiBvcGFjaXR5PSIwLjU0MyIgZmlsbC1vcGFjaXR5PSIuODM2MTEiIGhlaWdodD0iNTAiIHdpZHRoPSI1MCIgeT0iMTAwMi40IiB4PSIwIiBmaWxsPSIjZmZmIi8+PHBhdGggaWQ9InBhdGgyNDEyOCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0ibTM5LjE0MiAxMDMzLjUtMTQuMTQyLTE0LjE0Mi0xNC4xNDIgMTQuMTQyIiBzdHJva2U9IiM2ZTZlNmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIi8+IDwvZz48L3N2Zz4=);";
a.setAttribute("id","B4W_DEFAULT_BTN_1");var c=document.createElement("div");c.style.cssText="position: absolute;left: 10px;bottom: 10px;width: 53px;height: 53px;background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyBpZD0ic3ZnMzQwMCIgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTQuMTExbW0iIHdpZHRoPSIxNC4xMTFtbSIgdmVyc2lvbj0iMS4xIiB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHZpZXdCb3g9IjAgMCA0OS45OTk5OTggNDkuOTk5OTk5Ij4gPG1ldGFkYXRhIGlkPSJtZXRhZGF0YTM0MDUiPjxyZGY6UkRGPjxjYzpXb3JrIHJkZjphYm91dD0iIj48ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD48ZGM6dHlwZSByZGY6cmVzb3VyY2U9Imh0dHA6Ly9wdXJsLm9yZy9kYy9kY21pdHlwZS9TdGlsbEltYWdlIi8+PGRjOnRpdGxlLz48L2NjOldvcms+PC9yZGY6UkRGPiA8L21ldGFkYXRhPiA8ZyBpZD0ibGF5ZXIxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIC0xMDAyLjQpIj48cmVjdCBpZD0icmVjdDI0MTI2IiBvcGFjaXR5PSIwLjU0MyIgZmlsbC1vcGFjaXR5PSIuODM2MTEiIGhlaWdodD0iNTAiIHdpZHRoPSI1MCIgeT0iMTAwMi40IiB4PSIwIiBmaWxsPSIjZmZmIi8+PHBhdGggaWQ9InBhdGgyNDEyOCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0ibTM5LjE0MiAxMDMzLjUtMTQuMTQyLTE0LjE0Mi0xNC4xNDIgMTQuMTQyIiBzdHJva2U9IiM2ZTZlNmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIi8+IDwvZz48L3N2Zz4=);transform: rotate(180deg);transform-origin: center;";
c.setAttribute("id","B4W_DEFAULT_BTN_2");b.appendChild(a);b.appendChild(c)}function u(a){return"function"===typeof(a.requestPointerLock||a.webkitRequestPointerLock||a.mozRequestPointerLock)}function E(a,c){if(u(a)&&!e.detect_mobile()){var d=q.create_plock_mouse_sensor(a),h=Ga?Ga:q.create_plock_sensor(a);Ga=h;q.create_sensor_manifold(c,"FPS_PLOCK",q.CT_CONTINUOUS,[d,h],function(a){return a[0]&&a[1]},function(a,c,e){0<e&&(c=q.get_sensor_payload(a,c,0),b(a,-c.coords[0]*Na,-c.coords[1]*Na))});q.create_sensor_manifold(null,
"FPS_ACTIVATE_PLOCK",q.CT_TRIGGER,[h],function(a){return a[0]},function(b,c,e){0<e?Ha.Mz&&Ha.Mz(a):Ha.sr&&Ha.sr(a)})}else{if(e.detect_mobile()){d=q.create_touch_move_sensor("XY",a);h=q.create_touch_click_sensor(a);var f=4}else{d=q.create_mouse_move_sensor("XY",a);h=q.create_mouse_click_sensor(a);f=2;var k=I.get_active_camera(),g=q.create_elapsed_sensor(),m=q.create_gamepad_axis_sensor(ja.GMPD_AXIS_2),n=q.create_gamepad_axis_sensor(ja.GMPD_AXIS_3);q.create_sensor_manifold(c,"FPS_CAM_ROT",q.CT_CONTINUOUS,
[g,m,n],function(a){return.05<Math.abs(a[1])||.05<Math.abs(a[2])},function(a,b,c){if(0<c){var e=q.get_sensor_value(a,b,0);c=q.get_sensor_value(a,b,1);b=q.get_sensor_value(a,b,2);e*=2.5;b=-(.05>Math.abs(b)?0:b)*e;c=-(.05>Math.abs(c)?0:c)*e;b=t.clamp(b,ca,ea);P.rotate_camera(k,c,b);c=P.get_camera_angles(k,sa);da.set_character_rotation_h(a,c[0]+Math.PI)}})}var p=0,r=0;q.create_sensor_manifold(null,"FPS_DRAG_PRESS",q.CT_SHOT,[h],function(a){return a[0]},function(a,b,c){1==c&&(a=q.get_sensor_payload(a,
b,0).coords,p=a[0],r=a[1])});q.create_sensor_manifold(null,"FPS_DRAG_MOVE",q.CT_CONTINUOUS,[d,h],function(a){return a[0]&&a[1]},function(a,b,c){1==c&&(a=q.get_sensor_payload(a,b,0).coords,Da[0]+=(a[0]-p)*f,Da[1]+=(a[1]-r)*f,p=a[0],r=a[1])});d=q.create_elapsed_sensor();q.create_sensor_manifold(c,"FPS_SMOOTH_DRAG",q.CT_CONTINUOUS,[d],null,l,b)}}function D(a,b){ja.add_click_listener(a,function(){pa.request_fullscreen_hmd(a,function(){q.check_sensor_manifolds(b,"FPS_PLOCK")&&q.remove_sensor_manifold(b,
"FPS_PLOCK");q.check_sensor_manifolds(null,"FPS_ACTIVATE_PLOCK")&&q.remove_sensor_manifold(null,"FPS_ACTIVATE_PLOCK");q.check_sensor_manifolds(b,"FPS_CAM_ROT")&&q.remove_sensor_manifold(b,"FPS_CAM_ROT");q.check_sensor_manifolds(null,"FPS_DRAG_PRESS")&&q.remove_sensor_manifold(null,"FPS_DRAG_PRESS");q.check_sensor_manifolds(null,"FPS_DRAG_MOVE")&&q.remove_sensor_manifold(null,"FPS_DRAG_MOVE");q.check_sensor_manifolds(b,"FPS_SMOOTH_DRAG")&&q.remove_sensor_manifold(b,"FPS_SMOOTH_DRAG");M.enable_hmd(M.HMD_ALL_AXES_MOUSE_NONE);
O(b);Q&&Q()},function(){q.remove_sensor_manifold(b,"FPS_CHARECTER_VR_ROT");M.disable_hmd();E(a,b);Aa&&Aa()})})}function O(a){var b=q.create_elapsed_sensor(),c=I.get_active_camera();q.create_sensor_manifold(a,"FPS_CHARECTER_VR_ROT",q.CT_CONTINUOUS,[b],null,function(a){var b=P.get_camera_angles_char(c,sa)[0];da.set_character_rotation_h(a,b)})}function L(){var a=M.check_browser_support()&&!e.detect_mobile(),b=ja.get_device_by_type_element(ja.DEVICE_HMD);b&&(a=a&&ja.get_value_param(b,ja.HMD_WEBVR_TYPE)&
ja.HMD_WEBVR1);return a}function B(a,b,c,d){function h(a){if(k()){4==l.Jm.id&&(a=0);a=0<a?1:a;var e=m+n;n=-(0>a?-1:a);a=q+p;var d=m+n;da.set_character_move_dir(b,a,d);c&&c(a,d);g(a,d);u&&e!=d&&u(a,d,0)}}function f(a){if(k()){a=0<a?1:a;var e=q+p;p=-(0>a?-1:a);a=q+p;var d=m+n;da.set_character_move_dir(b,a,d);c&&c(a,d);g(a,d);u&&e!=a&&u(a,d,0)}}function g(a,b){var c=l.Jm.id;a||b||4==c?0==c&&(0<t?A(l,2):A(l,1)):A(l,0)}function k(){return la?(p=q=n=m=0,!1):!0}e.detect_mobile()&&w(b,a.parentElement?a.parentElement:
a);var l=aa(b),m=0,n=0,q=0,p=0,t=-1,u=d.move_dir_cd;a=d.BM;var r=d.WS,v=d.pR,z=d.kR,y=d.ZS,B=d.vP;J(1,d.wP,function(a){if(k()){var e=q+p;q=a;a=q+p;var d=m+n;da.set_character_move_dir(b,a,d);c&&c(a,d);g(a,d);u&&e!=a&&u(a,d,0)}});J(1,a,f);J(1,r,h);J(1,v,function(a){if(k()){4==l.Jm.id&&(a=0);var e=m+n;m=a;a=q+p;var d=m+n;da.set_character_move_dir(b,a,d);c&&c(a,d);g(a,d);u&&e!=d&&u(a,d,0)}});J(1,z,function(a){k()&&0<a&&(da.character_jump(b),u&&u(q+p,m+n,1))});J(3,[ja.GMPD_AXIS_0],h);J(3,[ja.GMPD_AXIS_1],
f);J(1,y,function(a){t=a;Math.abs(q+p)+Math.abs(m+n)?(0<a?A(l,2):A(l,1),u&&u(q+p,m+n,0)):A(l,0)});J(1,B,function(a){0<a&&(a=X.Jm.id,1==a||0==a?A(l,3):A(l,1))})}function Y(){X||(X={Ha:[],Jm:null,lock:!1,oR:null});return X}function K(a,b,c,e,d,h){a.Ha.push({id:b,Xy:c,nE:e,mE:d,lz:h})}function ha(a){for(var b=[],c=0;c<a.Ha;c++){var e=a.Ha[c].id;if(0<=b.indexOf(e))return!1;b.push(e)}for(c=0;c<a.Ha;c++){e=a.Ha[c];for(var d=0;d<e.Xy.length;d++)if(0>b.indexOf(e.Xy[d]))return!1}return!0}function T(a,b){for(var c=
null,e=0;e<a.Ha.length;e++)if(a.Ha[e].id==b){c=a.Ha[e];break}return c}function V(a,b){b=T(a,b);return a.Jm=b}function A(a,b){a.oR=b;if(a.lock)return!1;var c=a.Jm,e=c.id;if(0<=c.Xy.indexOf(b)){var d=!0;c.mE&&(d=c.mE(e,b));if(d)return V(a,b),c.nE&&c.nE(e,b),c.lz&&c.lz(e,b),!0}return!1}function aa(a){function b(b,c){switch(c){case 0:case 1:da.set_character_move_type(a,da.CM_WALK);break;case 2:da.set_character_move_type(a,da.CM_RUN);break;case 3:da.set_character_move_type(a,da.CM_FLY);break;case 4:da.set_character_move_type(a,
da.CM_CLIMB)}}var c=Y();K(c,0,[1,3,2,4],b,null,null);K(c,1,[2,3,4,0],b,null,null);K(c,2,[1,3,4,0],b,null,null);K(c,3,[1],b,null,null);K(c,4,[1,2,0],b,null,null);ha(c);V(c,0);return X}function J(a,b,c){if(b.length){for(var e=[],d=0;d<b.length;d++)if("number"==typeof b[d])300>b[d]?e.push(q.create_keyboard_sensor(b[d])):326>b[d]?e.push(q.create_gamepad_btn_sensor(b[d],ua)):e.push(q.create_gamepad_axis_sensor(b[d]));else if("string"==typeof b[d]){var h=document.getElementById(b[d]);h?e.push(q.create_touch_click_sensor(h)):
oa.error("Couldn't find element with "+b[d]+" ID.")}b=function(){return!1};d=q.CT_SHOT;h=function(){};switch(a){case 1:d=q.CT_TRIGGER;b=function(a){for(var b=0;b<a.length;b++)if(a[b])return!0;return!1};h=function(a,b,e){0<e?c(1):c(0)};break;case 2:d=q.CT_TRIGGER;b=function(a){for(var b=0;b<a.length;b++)if(a[b])return!0;return!1};h=function(a,b,e){0>e?c(1):c(0)};break;case 3:d=q.CT_CONTINUOUS,b=function(a){for(var b=0;b<a.length;b++)if(.05<Math.abs(a[b]))return!0;return!1},h=function(a,b,e,d){if(0<
e)for(e=0;e<d;e++){var g=q.get_sensor_value(a,b,e);if(.05<Math.abs(g)){c(g);break}}else c(0)}}q.create_sensor_manifold(null,"FPS_USER_CONTROL_ACTION_"+wa.toString(),d,e,b,h,e.length);wa++}}var P=Object(N.a)(c),q=Object(U.a)(c),da=Object(n.a)(c),I=Object(y.a)(c),t=Object(d.a)(c),e=Object(m.a)(c),ma=Object(C.a)(c),ja=Object(v.a)(c),pa=Object(r.a)(c),ta=Object(p.a)(c),Oa=Object(z.a)(c),M=Object(H.a)(c),oa=Object(k.a)(c),ca=(-Math.PI+.1)/2,ea=(Math.PI-.1)/2,Da=new Float32Array(2),S=1,Na=4E-4,wa=0,X=null,
Ga=null,Ha={Mz:null,sr:null},ua=0,Ca=4,la=!1,sa=new Float32Array(2),ia=new Float32Array(3),ra=new Float32Array(3),Q=null,Aa=null;f.append_switch_vr_cbs=function(a){Q=a};f.CS_STAY=0;f.CS_WALK=1;f.CS_RUN=2;f.CS_FLY=3;f.CS_CLIMB=4;f.AT_PRESSED=1;f.AT_RELEASED=2;f.AT_CONTINUOUS=3;f.bind_action=J;f.enable_fps_controls=function(c){c=c||{lock_camera:!0};var d=c.character||I.get_first_character();if(d){var f=c.element||ma.get_canvas(),k=c.motion_cb||null;ua=c.gamepad_id||0;var l=c.forward_sens||[q.KEY_W,
ja.GMPD_BUTTON_12],m=c.backward_sens||[q.KEY_S,ja.GMPD_BUTTON_13],g=c.right_sens||[q.KEY_D,ja.GMPD_BUTTON_15],n=c.left_sens||[q.KEY_A,ja.GMPD_BUTTON_14],p=c.jump_sens||[q.KEY_SPACE,ja.GMPD_BUTTON_1],t=c.DY||[q.KEY_SHIFT,ja.GMPD_BUTTON_7],u=c.fly_sens||[];e.detect_mobile()&&(l.push("B4W_DEFAULT_BTN_1"),m.push("B4W_DEFAULT_BTN_2"));l={wP:l,BM:m,WS:g,pR:n,kR:p,ZS:t,vP:u,move_dir_cd:c.move_dir_cd||null};b=c.rotation_cb||h;m="undefined"!=typeof c.lock_camera?c.lock_camera:!0;c=I.get_active_camera();m&&
(m=ta.get_translation(c,ia),g=ta.get_translation(d,ra),a.subtract(m,g,m),Oa.append_stiff_trans(c,d,m));c=P.get_camera_angles_char(c,sa);da.set_character_rotation_h(d,c[0]);da.set_character_vert_move_dir_angle(d,c[1]);L()&&D(f,d);E(f,d);B(f,d,k,l)}};f.disable_fps_controls=function(a,b){a=a||I.get_first_character();b=b||ma.get_container();if(a){for(var c=0;c<wa;c++)q.remove_sensor_manifold(null,"FPS_USER_CONTROL_ACTION_"+c.toString());c=a;var d=b;u(d)&&!e.detect_mobile()&&(Ha.sr&&Ha.sr(d),q.remove_sensor_manifold(c,
"FPS_PLOCK"),q.remove_sensor_manifold(null,"FPS_ACTIVATE_PLOCK"));c=a;if(!u(b)||e.detect_mobile())q.remove_sensor_manifold(c,"FPS_CAM_ROT"),q.remove_sensor_manifold(c,"FPS_DRAG_PRESS"),q.remove_sensor_manifold(c,"FPS_DRAG_MOVE"),q.remove_sensor_manifold(c,"FPS_SMOOTH_DRAG");L()&&q.remove_sensor_manifold(a,"FPS_CHARECTER_VR_ROT");e.detect_mobile()&&(a=document.getElementById("B4W_DEFAULT_BTN_1"),c=document.getElementById("B4W_DEFAULT_BTN_2"),a&&b.removeChild(a),c&&b.removeChild(c))}};f.set_state_change_cb=
function(a,b){T(X,a).lz=b};f.set_cam_smooth_factor=function(a){q.set_plock_smooth_factor(a);S=a};f.get_cam_smooth_factor=function(){return S};f.set_cam_sensitivity=function(a){Na=a/2E5};f.get_cam_sensitivity=function(){return 2E5*Na};f.set_plock_enable_cb=function(a){Ha.Mz=a};f.set_plock_disable_cb=function(a){Ha.sr=a};f.get_character_state=function(){return X.Jm.id};f.add_new_state=function(){return Ca++};f.add_state=function(a,b,c){var e=Y();K(e,a,b,c,null,null);ha(e)||oa.error("Incorrect state machine.")};
f.switch_state=function(a){var b=Y();A(b,a)};f.lock_character=function(){Y().lock=!0};f.unlock_character=function(){Y().lock=!1};f.is_character_locked=function(){return Y().lock};f.set_rotation_cb=function(a){b=a?a:h};f.freeze_movements=function(){la=!0};f.unfreeze_movements=function(){la=!1}});w.a=f},function(D,w,f){D=f(0);var N=f(40),U=f(24),n=f(49),y=f(69);f=Object(D.a)("gp_conf",function(d,f){function m(){aa.length=0;for(var a=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?
navigator.webkitGetGamepads:[],b=0;b<a.length;b++)a[b]&&aa.push(a[b]);return aa}function v(a){var b=D.get(a+"_gmpd_stngs","b4w");if(b){b=JSON.parse(b);for(var c in b)G.set_gamepad_key(a,c,b[c])}else c=JSON.stringify(E),D.set(a+"_gmpd_stngs",c,"b4w")}function r(a){da=!0;var b=document.createElement("div"),c=document.createElement("div"),d=document.createElement("div"),h=document.createElement("div"),f=document.createElement("div"),l=document.createElement("div"),m=document.createElement("div"),n=document.createElement("div"),
p=document.createElement("div"),t=document.createElement("div"),r=document.createElement("div"),v=document.createElement("div"),z=document.createElement("div"),y=document.createElement("div"),w=document.createElement("div"),A=document.createElement("div"),B=document.createElement("div"),C=document.createElement("div"),E=document.createElement("div"),D=document.createElement("div"),I=document.createElement("div"),H=document.createElement("div");K=b;b.style.cssText="position: absolute;height: auto;background-image: url('data:image/svg+xml;base64,"+
btoa('<svg id="svg26627" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="128.51mm" viewBox="0 0 636.63517 455.33329" width="179.67mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:dc="http://purl.org/dc/elements/1.1/"><defs id="defs26629"><linearGradient id="linearGradient4691"><stop id="stop4693" offset="0"/><stop id="stop4695" stop-opacity="0" offset="1"/></linearGradient><linearGradient id="linearGradient4358"><stop id="stop4360" stop-color="#2e2e2e" offset="0"/><stop id="stop4362" stop-color="#2e2e2e" stop-opacity="0" offset="1"/></linearGradient><linearGradient id="linearGradient4364" x1="1141.5" xlink:href="#linearGradient4358" gradientUnits="userSpaceOnUse" y1="255.95" gradientTransform="matrix(-1 0 0 1 1531.4 560.1)" x2="1165.2" y2="309.88"/><linearGradient id="linearGradient4368" x1="1141.5" xlink:href="#linearGradient4358" gradientUnits="userSpaceOnUse" y1="255.95" gradientTransform="translate(-896.37 560.1)" x2="1165.2" y2="309.88"/><linearGradient id="linearGradient4430" x1="959.32" gradientUnits="userSpaceOnUse" y1="653.07" gradientTransform="matrix(-1 0 0 1 1531.4 70.097)" x2="1467.6" y2="653.07"><stop id="stop4426" stop-color="#4f4f4f" offset="0"/><stop id="stop4428" stop-color="#4f4f4f" stop-opacity="0" offset="1"/></linearGradient><linearGradient id="linearGradient4701" x1="529.91" xlink:href="#linearGradient4691" gradientUnits="userSpaceOnUse" y1="111.1" gradientTransform="translate(-52.276 546.89)" x2="481.49" y2="85.746"/><linearGradient id="linearGradient4713" x1="529.91" xlink:href="#linearGradient4691" gradientUnits="userSpaceOnUse" y1="111.1" gradientTransform="matrix(-1 0 0 1 689.01 546.89)" x2="481.49" y2="85.746"/><linearGradient id="linearGradient4725" x1="367.39" xlink:href="#linearGradient4691" gradientUnits="userSpaceOnUse" y1="125.6" gradientTransform="matrix(-1.3272 0 0 .68317 806.95 579.14)" x2="367.39" y2="116.11"/></defs><metadata id="metadata26632"><rdf:RDF><cc:Work rdf:about="">    <dc:format>image/svg+xml</dc:format>    <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/>    <dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -597.03)"><g id="g20" fill-rule="evenodd"><path id="path4209" fill="#434343" d="m576.71 1052.4c42.015-1.9097 64.296-46.468 59.204-122.86-5.0928-76.387-27.374-175.69-44.562-224.7-17.188-49.015-25.501-62.531-26.737-65.565-3.7697-9.2504-11.278-19.949-62.379-27.691-28.97-4.3891-16.697-7.9577-27.084-9.4696-17.96-2.6141-43.609-1.229-52.203 1.6354-8.594 2.8645-12.709 29.16-24.486 35.207-11.777 6.0473-19.416 10.185-80.149 10.185s-68.372-4.1376-80.149-10.185c-11.777-6.0473-18.113-32.099-25.736-36.993-11.183-7.1796-26.985-5.6722-54.891-0.57481-5.64 1.0302-1.1304 7.6212-18.165 12.509-32.913 9.4438-52.094 3.7056-65.087 20.831-1.9807 2.6106-11.822 21.096-29.01 70.111-17.179 48.95-39.46 148.25-44.553 224.64-5.0929 76.39 17.188 120.99 59.204 122.89 73.339-1.7 55.219-116.53 258.4-116.53s185.05 114.82 258.4 116.49z"/><path id="path4366" fill="url(#linearGradient4368)" d="m249.77 838.51c-107.76 0-171.55 96.288-176.84 121.23-5.2294 24.634-17.658 55.705 3.8195 53.789 9.6996-0.8655 18.053-15.713 37.559-38.193 18.78-21.643 41.379-54.425 96.763-54.425s73.209-44.877 75.119-53.152c1.9098-8.2752 2.4146-27.976-36.418-29.25z"/><path id="path4217" fill="url(#linearGradient4364)" d="m385.23 838.51c107.76 0 171.55 96.288 176.84 121.23 5.2293 24.634 17.658 55.705-3.8195 53.789-9.6996-0.8655-18.053-15.713-37.559-38.193-18.78-21.643-41.379-54.425-96.763-54.425s-73.209-44.877-75.119-53.152c-1.9098-8.2752-2.4146-27.976 36.418-29.25z"/><path id="path4370" fill="url(#linearGradient4430)" d="m572.06 654.81c-60.48-19.09-76.79-18.6-89.84-17.96-13.05 0.63657-22.638 16.617-45.237 49.4s-67.48 125.27-116.23 125.27c-48.746 0-93.626-92.491-116.23-125.27-22.599-32.783-32.008-48.942-45.059-49.579-13.05-0.63648-35.251 1.8354-95.728 20.932l1.1161-2.3404c60.494-19.1 81.754-20.83 94.804-20.19 13.05 0.63657 22.281 13.049 44.88 45.832s67.48 123.49 116.23 123.49c48.746 0 93.626-90.709 116.23-123.49 22.599-32.783 31.83-45.195 44.88-45.832 13.05-0.63648 28.783-1.6248 89.26 17.472"/><path id="path4315" fill="#343434" d="m570.99 652.48c-60.477-19.097-76.074-18.269-89.124-17.633-13.05 0.63658-22.281 14.832-44.88 47.614-22.599 32.783-67.48 125.27-116.23 125.27-48.746 0-93.626-92.491-116.23-125.27-22.599-32.783-31.83-46.978-44.88-47.614-13.05-0.63648-34.715 1.2996-95.192 20.396l1.1161-2.3404c60.474-19.1 81.024-22.26 94.074-21.62 13.05 0.63658 22.281 13.049 44.88 45.832s67.48 123.49 116.23 123.49c48.746 0 93.626-90.709 116.23-123.49 22.599-32.783 31.83-45.195 44.88-45.832 13.05-0.63647 27.71-0.17274 88.186 18.924"/></g><g id="g15645" transform="matrix(.75439 0 0 1 1558.5 -6638.3)" fill-rule="evenodd"><rect id="rect15584" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="2" ry="1.8461" height="44.307" width="570" y="6558.3" x="100.71" fill="#4164bb"/><rect id="rect15331" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="2" ry="1.8461" height="44.307" width="570" y="6554.6" x="100.71" fill="#5276cf"/></g><text id="text15623-9" style="word-spacing:0px;letter-spacing:0px" font-weight="300" xml:space="preserve" font-size="22px" line-height="430.99999428%" y="-53.755863" x="1792.7805" font-family="&apos;Noto Sans CJK TC&apos;" fill="#ffffff"><tspan id="tspan15625-5" y="-53.755863" x="1792.7805"/></text><text id="text15657" style="word-spacing:0px;letter-spacing:0px" font-weight="300" xml:space="preserve" font-size="13px" line-height="430.99999428%" y="-3.7607465" x="1670.2437" font-family="&apos;Noto Sans CJK TC&apos;" fill="#828282"><tspan id="tspan15659" y="-3.7607465" x="1670.2437"/></text><g id="g34" fill-rule="evenodd"><path id="path4675" fill="#303030" d="m551.75 628.4c9.3003 4.1796 8.2375 11.558 2.1302 9.9581-6.1073-1.6003-33.792-9.1405-46.239-11.577-12.446-2.4363-34.904-3.0623-36.951-4.0165-2.0474-0.95416 0.93313-7.7247 5.491-7.3449 23.258 0.91012 59.905 6.0339 75.569 12.98z"/><path id="path4677" fill="#303030" d="m474.88 602.61c3.6488 0.63684 4.1169 1.3708 2.4115 5.2499-0.80967 1.8416-1.261 3.904-3.4715 3.7336-4.456-0.34344-16.578-1.2846-25.692-1.3764-9.1139-0.0918-23.83 1.217-25.307 0.79399-1.4771-0.42301-1.8834-4.9141 1.7769-6.7458 4.6221-1.3593 38.698-3.2021 50.281-1.6553z"/><path id="path4699" opacity=".384" fill="url(#linearGradient4701)" d="m475.53 611.7c-11.693-0.63604-8.4597-0.73151-44.068 54.448-6.5182 8.6489-22.874 37.231-36.865 35.326-6.7491-1.4177 15.436-67.299 22.724-75.767 11.112-12.911 19.255-16.122 58.209-14.007z"/><path id="path4703" fill="#303030" d="m84.068 628.4c-9.3003 4.1796-8.2375 11.558-2.1302 9.9581 6.1073-1.6003 33.792-9.1405 46.239-11.577 12.446-2.4363 34.904-3.0623 36.951-4.0165 2.0474-0.95416-0.93313-7.7247-5.491-7.3449-23.258 0.91012-59.905 6.0339-75.569 12.98z"/><path id="path4705" fill="#303030" d="m161.86 602.61c-3.6488 0.63684-4.1169 1.3708-2.4115 5.2499 0.80967 1.8416 1.261 3.904 3.4715 3.7336 4.456-0.34344 16.578-1.2846 25.692-1.3764 9.1139-0.0918 23.83 1.217 25.307 0.79399 1.4771-0.42301 1.8834-4.9141-1.7769-6.7458-4.6221-1.3593-38.698-3.2021-50.281-1.6553z"/><path id="path4711" opacity=".384" fill="url(#linearGradient4713)" d="m161.2 611.7c11.693-0.63604 8.4597-0.73151 44.068 54.448 6.5182 8.6489 22.874 37.231 36.865 35.326 6.7491-1.4177-15.436-67.299-22.724-75.767-11.112-12.911-19.255-16.122-58.209-14.007z"/><path id="path4717" opacity=".115" fill="url(#linearGradient4725)" d="m413.37 645.84c-9.0496 10.007-29.401 19.937-36.775 19.937h-52.205c-31.171 0-37.359 0.34506-47.75 0.51758-10.39 0.17253-18.682 0.65628-23.653-3.278-5.0513-3.9977-24-15.425-24-15.425 53.346 4.1464 144.49 4.3368 184.38-1.7523z"/></g></g><g id="layer1-0" fill-rule="evenodd" transform="translate(159.08 -720.76)"><g id="g4527-3" transform="translate(-961.22,330.69)"><ellipse id="circle4233-8" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="66.284" ry="66.279" cy="655.39" cx="1027.5" fill="#303030"/><ellipse id="circle4235-8" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="62.007" ry="62.003" cy="655.39" cx="1027.5" fill="#4c4c4c"/><ellipse id="circle4237-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="43.41" ry="43.408" cy="655.39" cx="1027.5" fill="#303030"/></g><g id="g4523-1" transform="translate(-961.22,330.69)"><ellipse id="circle4239-4" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="circle4243-3" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g><g id="g3506" transform="translate(-961.22,330.69)"><ellipse id="ellipse3508" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="66.284" ry="66.279" cy="655.39" cx="1027.5" fill="#303030"/><ellipse id="ellipse3510" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="62.007" ry="62.003" cy="655.39" cx="1027.5" fill="#4c4c4c"/><ellipse id="ellipse3512" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="43.41" ry="43.408" cy="655.39" cx="1027.5" fill="#303030"/></g></g><g id="layer1-7" fill-rule="evenodd" transform="translate(352.57 -719.72)"><g id="g4527-3-4" transform="translate(-961.22,330.69)"><ellipse id="circle4233-8-8" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="66.284" ry="66.279" cy="655.39" cx="1027.5" fill="#303030"/><ellipse id="circle4235-8-9" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="62.007" ry="62.003" cy="655.39" cx="1027.5" fill="#4c4c4c"/><ellipse id="circle4237-7-3" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="43.41" ry="43.408" cy="655.39" cx="1027.5" fill="#303030"/></g><g id="g4523-1-1" transform="translate(-961.22,330.69)"><ellipse id="circle4239-4-4" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="circle4243-3-5" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g><g id="g3506-2" transform="translate(-961.22,330.69)"><ellipse id="ellipse3508-1" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="66.284" ry="66.279" cy="655.39" cx="1027.5" fill="#303030"/><ellipse id="ellipse3510-1" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="62.007" ry="62.003" cy="655.39" cx="1027.5" fill="#4c4c4c"/><ellipse id="ellipse3512-4" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="43.41" ry="43.408" cy="655.39" cx="1027.5" fill="#303030"/></g></g></svg>')+
"');width: 637px;height: 455px;background-size: 100% 100%;left: 50%;margin-bottom: 40px;-moz-transform: translateX(-50%);-ms-transform: translateX(-50%);-webkit-transform: translateX(-50%);bottom: 0px;";c.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3904" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="35.924mm" width="35.926mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 127.29808 127.28933"><metadata id="metadata3909"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" fill-rule="evenodd" transform="translate(0 -925.07)"><ellipse id="circle4330" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="63.649" ry="63.645" cy="988.72" cx="63.649" fill="#303030"/><ellipse id="circle4223" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="59.705" ry="59.701" cy="988.72" cx="63.649" fill="#4c4c4c"/></g></svg>')+
"');position: absolute;top: 47px;left: 65px;width: 135px;height: 135px;";d.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3754" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.711mm" width="9.9653mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 35.3101 37.950677"><metadata id="metadata3759"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1014.4)"><path id="path4326" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m34.81 1017.1c-15.254-3.8172-24.634-1.7612-34.31 0v16.247h0.015c-0.013 0.097-0.013 0.1951-0.015 0.2928 0.0006 9.4753 7.6813 18.256 17.156 18.256 9.4739-0.0005 17.154-8.7813 17.154-18.256 0-0.097-0.014-0.1952-0.014-0.2928h0.014z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>')+
"');width: 36px;height: 38px;left: 49px;top: 8px;position: absolute;";h.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3790" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.9646mm" width="10.711mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 37.953175 35.3077"><metadata id="metadata3795"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1017.1)"><path id="path4324" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m35.298 1017.6c3.8175 15.253 1.7611 24.633 0 34.308h-16.248v-0.015c-0.098 0.01-0.1952 0.01-0.2928 0.015-9.476-0.0006-18.258-7.6807-18.257-17.154 0.0005-9.4733 8.7818-17.153 18.257-17.153 0.098 0 0.1952 0.01 0.2928 0.011v-0.011z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>')+
"');width: 38px;height: 36px;top: 47px;left: 84px;position: absolute;";f.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3754" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.711mm" width="9.9653mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 35.3101 37.950677"><metadata id="metadata3759"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1014.4)"><path id="path4328" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m34.81 1049.7c-15.254 3.8172-24.634 1.7612-34.31 0v-16.247h0.015c-0.013-0.097-0.013-0.1951-0.015-0.2928 0.0006-9.4753 7.6813-18.256 17.156-18.256 9.4739 0.0005 17.154 8.7813 17.154 18.256 0 0.097-0.014 0.1952-0.014 0.2928h0.014z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>')+
"');width: 36px;height: 38px;bottom: 11px;left: 51px;position: absolute;";l.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3790" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.9646mm" width="10.711mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 37.953175 35.3077"><metadata id="metadata3795"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1017.1)"><path id="path4324" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m2.6552 1051.9c-3.8175-15.253-1.7611-24.633 0-34.308h16.248v0.015c0.098-0.01 0.1952-0.01 0.2928-0.015 9.476 0.0006 18.258 7.6807 18.257 17.154-0.0005 9.4733-8.7818 17.153-18.257 17.153-0.098 0-0.1952-0.01-0.2928-0.011v0.011z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>')+
"');width: 38px;height: 36px;top: 47px;left: 13px;position: absolute;";m.style.cssText="position: absolute;top: 55px;left: 434px;width: 150px;height: 150px;";n.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>')+
"');width: 50px;height: 50px;left: 53px;top: 0px;position: absolute;";p.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>')+
"');width: 50px;height: 50px;left: 107px;top: 51px;position: absolute;";t.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>')+
"');width: 50px;height: 50px;left: 53px;bottom: 0px;position: absolute;";r.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>')+
"');width: 50px;height: 50px;top: 51px;position: absolute;";v.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3461" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="22.608mm" width="22.61mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 80.114398 80.108405"><metadata id="metadata3466"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(.0000019915 -972.25)"><g id="g3514-7" fill-rule="evenodd" transform="translate(-987.45 356.91)"><ellipse id="ellipse3516-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="ellipse3518-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g></g></svg>')+
"');position: absolute;top: 222px;left: 183px;width: 85px;height: 85px;";z.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3461" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="22.608mm" width="22.61mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 80.114398 80.108405"><metadata id="metadata3466"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(.0000019915 -972.25)"><g id="g3514-7" fill-rule="evenodd" transform="translate(-987.45 356.91)"><ellipse id="ellipse3516-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="ellipse3518-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g></g></svg>')+
"');position: absolute;top: 223px;left: 376px;width: 85px;height: 85px;";y.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3699" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2811mm" width="9.2817mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.8879 32.88565"><metadata id="metadata3704"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" fill-rule="evenodd" transform="translate(0 -1019.5)"><ellipse id="ellipse4575" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="16.444" ry="16.443" cy="1035.9" cx="16.444" fill="#2e2e2e"/><ellipse id="ellipse4577" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="15.112" ry="15.11" stroke="#4364b2" cy="1035.9" cx="16.444" fill="#5276cf"/><ellipse id="ellipse4579" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="11.867" ry="11.866" cy="1035.9" cx="16.444" fill="#434343"/></g></svg>')+
"');position: absolute;top: 76px;left: 227px;width: 34px;height: 34px;";w.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3699" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2811mm" width="9.2817mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.8879 32.88565"><metadata id="metadata3704"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" fill-rule="evenodd" transform="translate(0 -1019.5)"><ellipse id="ellipse4575" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="16.444" ry="16.443" cy="1035.9" cx="16.444" fill="#2e2e2e"/><ellipse id="ellipse4577" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="15.112" ry="15.11" stroke="#4364b2" cy="1035.9" cx="16.444" fill="#5276cf"/><ellipse id="ellipse4579" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="11.867" ry="11.866" cy="1035.9" cx="16.444" fill="#434343"/></g></svg>')+
"');position: absolute;top: 76px;left: 376px;width: 34px;height: 34px;";A.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="21.241671mm" height="8.8544388mm" viewBox="0 0 75.265762 31.373996" id="svg3447" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="l1.svg"><defs id="defs3449" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="1.4" inkscape:cx="-254.57869" inkscape:cy="228.81952" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3452"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(1.5000945e-8,-1020.9882)"><path style="fill:#5276cf;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m 11.026383,1051.1651 c -7.4440599,1.9144 -7.5133499,2.2466 -9.7963799,-4.4934 -1.81058997,-5.3452 -2.44278,-8.8152 4.01547,-12.116 2.74038,-1.4007 13.7365799,-5.877 38.4768299,-10.72 24.26031,-4.749 25.16653,-2.7967 26.79132,0.3418 1.15503,2.2311 1.8961,4.1561 2.94279,6.651 3.08552,8.5188 2.92609,8.5778 -6.08214,9.5501 -19.09891,2.1414 -37.95723,5.8307 -56.34789,10.7865 z" id="path4289" inkscape:connector-curvature="0" sodipodi:nodetypes="cssssccc" /></g></svg>')+
"');position: absolute;top: 4px;left: 78px;width: 79px;height: 33px;";B.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3447" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="8.8544mm" width="21.242mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 75.265762 31.373996"><metadata id="metadata3452"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(1.5001e-8 -1021)"><path id="path4715" d="m64.239 1051.2c7.4441 1.9144 7.5134 2.2466 9.7964-4.4934 1.8106-5.3452 2.4428-8.8152-4.0155-12.116-2.7404-1.4007-13.737-5.877-38.477-10.72-24.26-4.749-25.167-2.7967-26.791 0.3418-1.155 2.2311-1.8961 4.1561-2.9428 6.651-3.0855 8.5188-2.9261 8.5778 6.0822 9.5501 19.099 2.1414 37.957 5.8307 56.348 10.786z" fill-rule="evenodd" fill="#5276cf"/></g></svg>')+
"');position: absolute;top: 4px;left: 477px;width: 79px;height: 33px;";C.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3560" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="4.7796mm" width="13.57mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 48.082162 16.935645"><metadata id="metadata3565"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1035.4)"><path id="path4727" d="m42.857 1052.2c4.7071 0.4081 4.7981 0.6563 5.1414-4.9139 0.16344-2.6517 0.16699-6.1108-0.72615-8.0342-0.59471-1.2808-1.7793-2.049-3.7642-2.4662-2.5264-0.531-16.253-1.4345-26.685-1.3241-15.118 0.16-15.362 1.4769-15.855 4.1522-0.35071 1.9018-0.5016 3.5056-0.74837 5.5967-0.55261 7.0693-0.44908 7.0921 5.0452 6.5411 11.661-1.1062 25.929-0.7359 37.592 0.4484z" fill-rule="evenodd" fill="#5276cf"/></g></svg>')+
"');position: absolute;top: -7px;left: 425px;width: 50px;height: 17px;";E.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3560" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="4.7796mm" width="13.57mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 48.082162 16.935645"><metadata id="metadata3565"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1035.4)"><path id="path4727" d="m42.857 1052.2c4.7071 0.4081 4.7981 0.6563 5.1414-4.9139 0.16344-2.6517 0.16699-6.1108-0.72615-8.0342-0.59471-1.2808-1.7793-2.049-3.7642-2.4662-2.5264-0.531-16.253-1.4345-26.685-1.3241-15.118 0.16-15.362 1.4769-15.855 4.1522-0.35071 1.9018-0.5016 3.5056-0.74837 5.5967-0.55261 7.0693-0.44908 7.0921 5.0452 6.5411 11.661-1.1062 25.929-0.7359 37.592 0.4484z" fill-rule="evenodd" fill="#5276cf"/></g></svg>')+
"');position: absolute;top: -7px;left: 164px;width: 50px;height: 17px;";D.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="24.603382mm" height="24.601696mm" viewBox="0 0 87.177338 87.171363" id="svg3640" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="main.svg"><defs id="defs3642" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="1.979899" inkscape:cx="61.113463" inkscape:cy="69.71796" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3645"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(0,-965.19093)"><ellipse ry="43.585682" rx="43.588669" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#2e2e2e;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="ellipse4372" cx="43.588669" cy="1008.7766" /><ellipse cy="1008.7766" cx="43.588669" id="circle4239-1" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#5276cf;fill-opacity:1;fill-rule:evenodd;stroke:#4364b2;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" rx="40.056705" ry="40.053959" /><ellipse style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#434343;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="circle4243-0" cx="43.588669" cy="1008.7766" rx="31.455994" ry="31.453836" /></g></svg>')+
"');position: absolute;top: 68px;left: 274px;width: 92px;height: 92px;";I.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3407" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="41.787mm" width="41.786mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 148.0624 148.06251"><metadata id="metadata3412"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -904.3)" fill="#e6e6e6"><path id="rect4545" d="m74.031 904.3-14.469 22.156h8.0313v8.2187h12.875v-8.2187h8.0625l-14.5-22.156z"/><path id="rect4603" d="m125.94 963.86v8.0313h-8.25v12.906h8.25v8.0313l22.125-14.5-22.125-14.469z"/><path id="rect4609" d="m67.594 1022v8.25h-8.0313l14.469 22.125 14.5-22.125h-8.0625v-8.25h-12.875z"/><path id="rect4615" d="m22.156 963.86-22.156 14.47l22.156 14.5v-8.2188h8.2188v-12.906h-8.2188v-7.8438z"/><path id="path4619" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m54.393 924.58c-15.821 5.7885-28.404 18.385-34.188 34.219h11.156c4.6667-10.175 12.865-18.361 23.031-23.031v-11.188zm39.219 0.031v11.156c10.167 4.6713 18.361 12.86 23.031 23.031h11.156c-5.7846-15.821-18.379-28.393-34.188-34.188zm-73.375 73.438c5.7899 15.816 18.348 28.403 34.156 34.188v-11.156c-10.163-4.6691-18.364-12.861-23.031-23.031h-11.125zm96.406 0c-4.6712 10.167-12.868 18.361-23.031 23.031v11.125c15.796-5.7901 28.366-18.352 34.156-34.156h-11.125z"/></g></svg>')+
"');position: absolute;top: 186px;left: 148px;width: 157px;height: 157px;";H.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3407" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="41.787mm" width="41.786mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 148.0624 148.06251"><metadata id="metadata3412"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -904.3)" fill="#e6e6e6"><path id="rect4545" d="m74.031 904.3-14.469 22.156h8.0313v8.2187h12.875v-8.2187h8.0625l-14.5-22.156z"/><path id="rect4603" d="m125.94 963.86v8.0313h-8.25v12.906h8.25v8.0313l22.125-14.5-22.125-14.469z"/><path id="rect4609" d="m67.594 1022v8.25h-8.0313l14.469 22.125 14.5-22.125h-8.0625v-8.25h-12.875z"/><path id="rect4615" d="m22.156 963.86-22.156 14.47l22.156 14.5v-8.2188h8.2188v-12.906h-8.2188v-7.8438z"/><path id="path4619" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m54.393 924.58c-15.821 5.7885-28.404 18.385-34.188 34.219h11.156c4.6667-10.175 12.865-18.361 23.031-23.031v-11.188zm39.219 0.031v11.156c10.167 4.6713 18.361 12.86 23.031 23.031h11.156c-5.7846-15.821-18.379-28.393-34.188-34.188zm-73.375 73.438c5.7899 15.816 18.348 28.403 34.156 34.188v-11.156c-10.163-4.6691-18.364-12.861-23.031-23.031h-11.125zm96.406 0c-4.6712 10.167-12.868 18.361-23.031 23.031v11.125c15.796-5.7901 28.366-18.352 34.156-34.156h-11.125z"/></g></svg>')+
"');position: absolute;top: 187px;left: 339px;width: 157px;height: 157px;";b.appendChild(I);b.appendChild(H);c.appendChild(d);c.appendChild(h);c.appendChild(f);c.appendChild(l);b.appendChild(c);m.appendChild(n);m.appendChild(p);m.appendChild(t);m.appendChild(r);b.appendChild(m);b.appendChild(v);b.appendChild(z);b.appendChild(y);b.appendChild(w);b.appendChild(A);b.appendChild(B);b.appendChild(C);a.appendChild(b);b.appendChild(E);b.appendChild(D);J.length=0;R.length=0;P.length=0;q.length=0;J.push(t,
p,r,n,A,B,E,C,y,w,v,z,d,f,l,h,D);R.push('<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>',
'<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>',
'<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>',
'<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="21.241671mm" height="8.8544388mm" viewBox="0 0 75.265762 31.373996" id="svg3447" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="l1.svg"><defs id="defs3449" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="1.4" inkscape:cx="-254.57869" inkscape:cy="228.81952" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3452"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(1.5000945e-8,-1020.9882)"><path style="fill:#5276cf;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m 11.026383,1051.1651 c -7.4440599,1.9144 -7.5133499,2.2466 -9.7963799,-4.4934 -1.81058997,-5.3452 -2.44278,-8.8152 4.01547,-12.116 2.74038,-1.4007 13.7365799,-5.877 38.4768299,-10.72 24.26031,-4.749 25.16653,-2.7967 26.79132,0.3418 1.15503,2.2311 1.8961,4.1561 2.94279,6.651 3.08552,8.5188 2.92609,8.5778 -6.08214,9.5501 -19.09891,2.1414 -37.95723,5.8307 -56.34789,10.7865 z" id="path4289" inkscape:connector-curvature="0" sodipodi:nodetypes="cssssccc" /></g></svg>',
'<svg id="svg3447" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="8.8544mm" width="21.242mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 75.265762 31.373996"><metadata id="metadata3452"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(1.5001e-8 -1021)"><path id="path4715" d="m64.239 1051.2c7.4441 1.9144 7.5134 2.2466 9.7964-4.4934 1.8106-5.3452 2.4428-8.8152-4.0155-12.116-2.7404-1.4007-13.737-5.877-38.477-10.72-24.26-4.749-25.167-2.7967-26.791 0.3418-1.155 2.2311-1.8961 4.1561-2.9428 6.651-3.0855 8.5188-2.9261 8.5778 6.0822 9.5501 19.099 2.1414 37.957 5.8307 56.348 10.786z" fill-rule="evenodd" fill="#5276cf"/></g></svg>',
'<svg id="svg3560" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="4.7796mm" width="13.57mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 48.082162 16.935645"><metadata id="metadata3565"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1035.4)"><path id="path4727" d="m42.857 1052.2c4.7071 0.4081 4.7981 0.6563 5.1414-4.9139 0.16344-2.6517 0.16699-6.1108-0.72615-8.0342-0.59471-1.2808-1.7793-2.049-3.7642-2.4662-2.5264-0.531-16.253-1.4345-26.685-1.3241-15.118 0.16-15.362 1.4769-15.855 4.1522-0.35071 1.9018-0.5016 3.5056-0.74837 5.5967-0.55261 7.0693-0.44908 7.0921 5.0452 6.5411 11.661-1.1062 25.929-0.7359 37.592 0.4484z" fill-rule="evenodd" fill="#5276cf"/></g></svg>',
'<svg id="svg3560" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="4.7796mm" width="13.57mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 48.082162 16.935645"><metadata id="metadata3565"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1035.4)"><path id="path4727" d="m42.857 1052.2c4.7071 0.4081 4.7981 0.6563 5.1414-4.9139 0.16344-2.6517 0.16699-6.1108-0.72615-8.0342-0.59471-1.2808-1.7793-2.049-3.7642-2.4662-2.5264-0.531-16.253-1.4345-26.685-1.3241-15.118 0.16-15.362 1.4769-15.855 4.1522-0.35071 1.9018-0.5016 3.5056-0.74837 5.5967-0.55261 7.0693-0.44908 7.0921 5.0452 6.5411 11.661-1.1062 25.929-0.7359 37.592 0.4484z" fill-rule="evenodd" fill="#5276cf"/></g></svg>',
'<svg id="svg3699" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2811mm" width="9.2817mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.8879 32.88565"><metadata id="metadata3704"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" fill-rule="evenodd" transform="translate(0 -1019.5)"><ellipse id="ellipse4575" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="16.444" ry="16.443" cy="1035.9" cx="16.444" fill="#2e2e2e"/><ellipse id="ellipse4577" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="15.112" ry="15.11" stroke="#4364b2" cy="1035.9" cx="16.444" fill="#5276cf"/><ellipse id="ellipse4579" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="11.867" ry="11.866" cy="1035.9" cx="16.444" fill="#434343"/></g></svg>',
'<svg id="svg3699" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2811mm" width="9.2817mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.8879 32.88565"><metadata id="metadata3704"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" fill-rule="evenodd" transform="translate(0 -1019.5)"><ellipse id="ellipse4575" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="16.444" ry="16.443" cy="1035.9" cx="16.444" fill="#2e2e2e"/><ellipse id="ellipse4577" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="15.112" ry="15.11" stroke="#4364b2" cy="1035.9" cx="16.444" fill="#5276cf"/><ellipse id="ellipse4579" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="11.867" ry="11.866" cy="1035.9" cx="16.444" fill="#434343"/></g></svg>',
'<svg id="svg3461" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="22.608mm" width="22.61mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 80.114398 80.108405"><metadata id="metadata3466"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(.0000019915 -972.25)"><g id="g3514-7" fill-rule="evenodd" transform="translate(-987.45 356.91)"><ellipse id="ellipse3516-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="ellipse3518-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g></g></svg>',
'<svg id="svg3461" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="22.608mm" width="22.61mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 80.114398 80.108405"><metadata id="metadata3466"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(.0000019915 -972.25)"><g id="g3514-7" fill-rule="evenodd" transform="translate(-987.45 356.91)"><ellipse id="ellipse3516-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="ellipse3518-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g></g></svg>',
'<svg id="svg3754" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.711mm" width="9.9653mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 35.3101 37.950677"><metadata id="metadata3759"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1014.4)"><path id="path4326" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m34.81 1017.1c-15.254-3.8172-24.634-1.7612-34.31 0v16.247h0.015c-0.013 0.097-0.013 0.1951-0.015 0.2928 0.0006 9.4753 7.6813 18.256 17.156 18.256 9.4739-0.0005 17.154-8.7813 17.154-18.256 0-0.097-0.014-0.1952-0.014-0.2928h0.014z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>',
'<svg id="svg3754" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.711mm" width="9.9653mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 35.3101 37.950677"><metadata id="metadata3759"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1014.4)"><path id="path4328" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m34.81 1049.7c-15.254 3.8172-24.634 1.7612-34.31 0v-16.247h0.015c-0.013-0.097-0.013-0.1951-0.015-0.2928 0.0006-9.4753 7.6813-18.256 17.156-18.256 9.4739 0.0005 17.154 8.7813 17.154 18.256 0 0.097-0.014 0.1952-0.014 0.2928h0.014z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>',
'<svg id="svg3790" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.9646mm" width="10.711mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 37.953175 35.3077"><metadata id="metadata3795"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1017.1)"><path id="path4324" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m2.6552 1051.9c-3.8175-15.253-1.7611-24.633 0-34.308h16.248v0.015c0.098-0.01 0.1952-0.01 0.2928-0.015 9.476 0.0006 18.258 7.6807 18.257 17.154-0.0005 9.4733-8.7818 17.153-18.257 17.153-0.098 0-0.1952-0.01-0.2928-0.011v0.011z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>',
'<svg id="svg3790" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.9646mm" width="10.711mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 37.953175 35.3077"><metadata id="metadata3795"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1017.1)"><path id="path4324" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m35.298 1017.6c3.8175 15.253 1.7611 24.633 0 34.308h-16.248v-0.015c-0.098 0.01-0.1952 0.01-0.2928 0.015-9.476-0.0006-18.258-7.6807-18.257-17.154 0.0005-9.4733 8.7818-17.153 18.257-17.153 0.098 0 0.1952 0.01 0.2928 0.011v-0.011z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="24.603382mm" height="24.601696mm" viewBox="0 0 87.177338 87.171363" id="svg3640" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="main.svg"><defs id="defs3642" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="1.979899" inkscape:cx="61.113463" inkscape:cy="69.71796" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3645"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(0,-965.19093)"><ellipse ry="43.585682" rx="43.588669" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#2e2e2e;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="ellipse4372" cx="43.588669" cy="1008.7766" /><ellipse cy="1008.7766" cx="43.588669" id="circle4239-1" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#5276cf;fill-opacity:1;fill-rule:evenodd;stroke:#4364b2;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" rx="40.056705" ry="40.053959" /><ellipse style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#434343;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="circle4243-0" cx="43.588669" cy="1008.7766" rx="31.455994" ry="31.453836" /></g></svg>');
P.push(v,v,z,z);q.push(I,H);for(a=0;a<J.length;a++)J[a].setAttribute("id","pad_btn_"+a),J[a].setAttribute("data-colorstate","B"),J[a].setAttribute("data-key",a),J[a].setAttribute("data-svgid",a);I.setAttribute("id","pad_left_axis");I.setAttribute("data-colorstate","GR");I.setAttribute("data-key",G.GMPD_AXIS_0);I.setAttribute("data-svgid",R.length);H.setAttribute("id","pad_right_axis");H.setAttribute("data-colorstate","GR");H.setAttribute("data-key",G.GMPD_AXIS_2);H.setAttribute("data-svgid",R.length+
1);R.push('<svg id="svg3407" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="41.787mm" width="41.786mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 148.0624 148.06251"><metadata id="metadata3412"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -904.3)" fill="#e6e6e6"><path id="rect4545" d="m74.031 904.3-14.469 22.156h8.0313v8.2187h12.875v-8.2187h8.0625l-14.5-22.156z"/><path id="rect4603" d="m125.94 963.86v8.0313h-8.25v12.906h8.25v8.0313l22.125-14.5-22.125-14.469z"/><path id="rect4609" d="m67.594 1022v8.25h-8.0313l14.469 22.125 14.5-22.125h-8.0625v-8.25h-12.875z"/><path id="rect4615" d="m22.156 963.86-22.156 14.47l22.156 14.5v-8.2188h8.2188v-12.906h-8.2188v-7.8438z"/><path id="path4619" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m54.393 924.58c-15.821 5.7885-28.404 18.385-34.188 34.219h11.156c4.6667-10.175 12.865-18.361 23.031-23.031v-11.188zm39.219 0.031v11.156c10.167 4.6713 18.361 12.86 23.031 23.031h11.156c-5.7846-15.821-18.379-28.393-34.188-34.188zm-73.375 73.438c5.7899 15.816 18.348 28.403 34.156 34.188v-11.156c-10.163-4.6691-18.364-12.861-23.031-23.031h-11.125zm96.406 0c-4.6712 10.167-12.868 18.361-23.031 23.031v11.125c15.796-5.7901 28.366-18.352 34.156-34.156h-11.125z"/></g></svg>',
'<svg id="svg3407" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="41.787mm" width="41.786mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 148.0624 148.06251"><metadata id="metadata3412"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -904.3)" fill="#e6e6e6"><path id="rect4545" d="m74.031 904.3-14.469 22.156h8.0313v8.2187h12.875v-8.2187h8.0625l-14.5-22.156z"/><path id="rect4603" d="m125.94 963.86v8.0313h-8.25v12.906h8.25v8.0313l22.125-14.5-22.125-14.469z"/><path id="rect4609" d="m67.594 1022v8.25h-8.0313l14.469 22.125 14.5-22.125h-8.0625v-8.25h-12.875z"/><path id="rect4615" d="m22.156 963.86-22.156 14.47l22.156 14.5v-8.2188h8.2188v-12.906h-8.2188v-7.8438z"/><path id="path4619" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m54.393 924.58c-15.821 5.7885-28.404 18.385-34.188 34.219h11.156c4.6667-10.175 12.865-18.361 23.031-23.031v-11.188zm39.219 0.031v11.156c10.167 4.6713 18.361 12.86 23.031 23.031h11.156c-5.7846-15.821-18.379-28.393-34.188-34.188zm-73.375 73.438c5.7899 15.816 18.348 28.403 34.156 34.188v-11.156c-10.163-4.6691-18.364-12.861-23.031-23.031h-11.125zm96.406 0c-4.6712 10.167-12.868 18.361-23.031 23.031v11.125c15.796-5.7901 28.366-18.352 34.156-34.156h-11.125z"/></g></svg>');
k(J,u);k(q,"#e6e6e6")}function p(a){return[h.create_gamepad_btn_sensor(G.GMPD_BUTTON_0,a),h.create_gamepad_btn_sensor(G.GMPD_BUTTON_1,a),h.create_gamepad_btn_sensor(G.GMPD_BUTTON_2,a),h.create_gamepad_btn_sensor(G.GMPD_BUTTON_3,a),h.create_gamepad_btn_sensor(G.GMPD_BUTTON_4,a),h.create_gamepad_btn_sensor(G.GMPD_BUTTON_5,a),h.create_gamepad_btn_sensor(G.GMPD_BUTTON_6,a),h.create_gamepad_btn_sensor(G.GMPD_BUTTON_7,a),h.create_gamepad_btn_sensor(G.GMPD_BUTTON_8,a),h.create_gamepad_btn_sensor(G.GMPD_BUTTON_9,
a),h.create_gamepad_btn_sensor(G.GMPD_BUTTON_10,a),h.create_gamepad_btn_sensor(G.GMPD_BUTTON_11,a),h.create_gamepad_btn_sensor(G.GMPD_BUTTON_12,a),h.create_gamepad_btn_sensor(G.GMPD_BUTTON_13,a),h.create_gamepad_btn_sensor(G.GMPD_BUTTON_14,a),h.create_gamepad_btn_sensor(G.GMPD_BUTTON_15,a),h.create_gamepad_btn_sensor(G.GMPD_BUTTON_16,a),h.create_gamepad_btn_sensor(G.GMPD_BUTTON_17,a),h.create_gamepad_btn_sensor(G.GMPD_BUTTON_18,a),h.create_gamepad_btn_sensor(G.GMPD_BUTTON_19,a),h.create_gamepad_btn_sensor(G.GMPD_BUTTON_20,
a),h.create_gamepad_btn_sensor(G.GMPD_BUTTON_21,a),h.create_gamepad_btn_sensor(G.GMPD_BUTTON_22,a),h.create_gamepad_btn_sensor(G.GMPD_BUTTON_23,a),h.create_gamepad_btn_sensor(G.GMPD_BUTTON_24,a),h.create_gamepad_btn_sensor(G.GMPD_BUTTON_25,a)]}function z(a){return[h.create_gamepad_axis_sensor(G.GMPD_AXIS_0,a),h.create_gamepad_axis_sensor(G.GMPD_AXIS_1,a),h.create_gamepad_axis_sensor(G.GMPD_AXIS_2,a),h.create_gamepad_axis_sensor(G.GMPD_AXIS_3,a),h.create_gamepad_axis_sensor(G.GMPD_AXIS_4,a),h.create_gamepad_axis_sensor(G.GMPD_AXIS_5,
a),h.create_gamepad_axis_sensor(G.GMPD_AXIS_6,a),h.create_gamepad_axis_sensor(G.GMPD_AXIS_7,a),h.create_gamepad_axis_sensor(G.GMPD_AXIS_8,a),h.create_gamepad_axis_sensor(G.GMPD_AXIS_9,a),h.create_gamepad_axis_sensor(G.GMPD_AXIS_10,a),h.create_gamepad_axis_sensor(G.GMPD_AXIS_11,a)]}function a(a,b){var c=document.createElement("input");c.style.cssText="display: inline-block;position = relative;";c.setAttribute("type","radio");c.setAttribute("name","choice");var e=document.createElement("label");e.textContent=
b;e.style.cssText="position = relative;display: inline-block;color: white;";a.appendChild(c);a.appendChild(e);return c}function w(a){Y.removeChild(K);K=null;switch(a){case "PAD":V.checked=!0;r(Y);break;case "WHEEL":T.checked=!0;var b=Y;da=!1;var c=document.createElement("div"),d=document.createElement("div"),h=document.createElement("div"),f=document.createElement("div"),l=document.createElement("div"),m=document.createElement("div"),n=document.createElement("div"),p=document.createElement("div"),
t=document.createElement("div"),v=document.createElement("div"),z=document.createElement("div"),y=document.createElement("div"),w=document.createElement("div"),A=document.createElement("div"),B=document.createElement("div"),C=document.createElement("div"),E=document.createElement("div"),I=document.createElement("div"),D=document.createElement("div"),H=document.createElement("div"),O=document.createElement("div"),L=document.createElement("div"),N=document.createElement("div"),U=document.createElement("div");
a=document.createElement("div");var ka=document.createElement("div"),aa=document.createElement("div"),ha=document.createElement("div"),xa=document.createElement("div"),za=document.createElement("div");K=c;var Fa="position: absolute;height: auto;background-image: url('data:image/svg+xml;base64,"+btoa('<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>')+
"');width: 19px;height: 19px;background-size: 100% 100%;";c.style.cssText="position: absolute;background-image: url('data:image/svg+xml;base64,"+btoa('<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="112.08413mm" height="128.46834mm" viewBox="0 0 397.14849 455.20277" id="svg3440" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel.svg"><defs id="defs3442" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="0.98994949" inkscape:cx="421.01508" inkscape:cy="52.510802" inkscape:document-units="px" inkscape:current-layer="g87" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3445"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title /></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(-2.3645008e-8,-597.15942)"><path inkscape:connector-curvature="0" style="fill:#4d4d4d;stroke:#6e6e6e;stroke-width:2.99125171;stroke-miterlimit:4;stroke-dasharray:none" id="path4140" d="m 307.84153,715.52552 c -4.35995,43.11849 -2.78952,86.66385 -15.90234,128.54337 -10.85452,25.86023 -13.33477,47.2976 6.91492,61.09536 7.23778,50.7442 78.38013,47.39232 82.20535,0 23.06079,-14.19054 13.49405,-42.79138 6.91492,-61.09536 -17.40045,-40.83001 -4.82581,-86.43019 -15.90235,-128.54337 -8.3177,-20.33228 -56.75348,-20.7661 -64.22927,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#cccccc;stroke:#1a1a1a;stroke-width:2.09465766;stroke-miterlimit:4;stroke-dasharray:none" id="path4266" d="m 313.11812,724.1957 -3.84514,68.80568 c 4.64168,13.40814 62.19981,10.8172 61.83082,0 l -3.84515,-68.80568 c -4.46942,-24.00369 -52.58756,-18.95946 -54.13979,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#353535;stroke:#2c2c2c;stroke-width:2.11880326;stroke-miterlimit:4;stroke-dasharray:none" id="path4156" d="m 304.91419,870.673 c -12.36924,67.40381 80.42804,69.69607 70.55134,0 -6.57605,-36.5947 -65.0964,-34.8253 -70.55134,0 z m 60.53812,3.9862 c 8.65841,48.24354 -57.58987,49.86644 -50.52489,0 4.7009,-26.27069 46.6394,-24.84292 50.52489,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#e6e6e6;stroke:#969696;stroke-width:2.99125171;stroke-miterlimit:4;stroke-dasharray:none" id="path4011" d="m 106.04576,696.97906 c -11.197076,4.25792 -17.123706,8.24834 -17.123706,8.24834 l -66.18493,16.33946 1.40291,30.64619 46.54715,-7.67623 c 17.00932,-1.6438 32.551896,8.94676 38.302026,23.34506 l 2.78663,65.4778 27.6363,0 2.78663,-65.4778 c 8.0428,-15.3291 20.46247,-27.10803 38.30202,-23.34506 l 46.54716,7.67623 1.40291,-30.64619 -66.18493,-16.33946 c 0,0 -5.92627,-3.99074 -17.12371,-8.24834 -13.45408,-4.31874 -26.62772,-4.20804 -39.08982,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#252525;stroke:#6e6e6e;stroke-width:2.99125171;stroke-miterlimit:4;stroke-dasharray:none" id="path2996" d="m 38.311064,931.09899 c -8.01574,5.05649 -22.76006,21.74743 -26.34852,58.0567 -4.1290804,35.18581 -4.8394604,60.59901 28.55878,61.68771 l 162.934726,0 c 39.19437,1.1693 30.46155,-41.5992 28.55878,-61.68771 -3.58839,-36.30927 -18.33277,-52.99983 -26.34851,-58.0567 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#373737;stroke:#6e6e6e;stroke-width:2.83429575;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none" id="path3019" d="m 26.230254,979.1291 c -11.50334,14.44882 -11.98241,47.3999 -0.33519,57.1202 l 191.802226,0 c 12.10111,-12.3068 9.93082,-46.99573 -0.33518,-57.1202 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#808080;stroke:#1a1a1a;stroke-width:2.14882827;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0" id="path4133" d="m 360.82498,854.6914 a 20.634815,21.265151 0 1 1 -41.269,0 20.634815,21.265151 0 1 1 41.269,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#333333;stroke:#000000;stroke-width:2.11880326;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0" id="path4280" d="m 351.64051,761.132 a 11.444622,11.75148 0 1 1 -22.88896,0 11.444622,11.75148 0 1 1 22.88896,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#313131;stroke:#565656;stroke-width:2.93434715;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0" id="path3993" d="m 125.52855,598.62659 c -68.528026,0 -124.0613764,57.81925 -124.0613764,129.13695 0,71.31265 55.5370404,129.13696 124.0613764,129.13696 68.52804,0 124.07984,-57.81926 124.07984,-129.13696 0,-71.31264 -55.55611,-129.13695 -124.07984,-129.13695 z m -1.00095,23.63932 c 10.01261,0.0734 20.238,1.32074 28.95237,3.51006 11.62203,3.80301 21.53624,8.52304 31.01135,16.15381 26.21752,19.0207 43.36275,50.36277 43.36275,85.83029 0,58.01564 -45.80548,105.05244 -102.30928,105.05244 -56.500726,0 -102.309276,-47.03364 -102.309276,-105.05244 0,-32.14848 14.06783,-60.91918 36.22336,-80.19121 11.45168,-11.11714 23.14136,-17.13322 37.3943,-21.79731 7.855846,-2.48302 17.655666,-3.5835 27.668276,-3.51006 z" stroke-miterlimit="4" /><g style="stroke-miterlimit:4;stroke-dasharray:none" id="g4127" stroke-miterlimit="4" transform="matrix(0.61498728,0,0,0.63147657,-18.171616,453.28593)"><g id="g4111"><path style="fill:#808080;stroke:#373737;stroke-width:3.56837296" inkscape:connector-curvature="0" id="rect3040" d="m 110.97,771.16 31.694,4.8776 1.3007,44.257 -32.995,0 z" /><path style="fill:#b3b3b3;stroke:#565656;stroke-width:3.4000001;stroke-linecap:butt;stroke-linejoin:miter" inkscape:connector-curvature="0" id="path3024" d="m 96.83,686.82 58.353,-5.0761 c 15.608,27.569 6.8304,64.333 -5.0761,90.545 l -53.841,-2.538 z" /></g><g id="g4115" transform="translate(97.984785,0)"><path style="fill:#808080;stroke:#373737;stroke-width:3.56837296" inkscape:connector-curvature="0" id="path4117" d="m 110.97,771.16 31.694,4.8776 1.3007,44.257 -32.995,0 z" /><path style="fill:#b3b3b3;stroke:#565656;stroke-width:3.4000001;stroke-linecap:butt;stroke-linejoin:miter" inkscape:connector-curvature="0" id="path4119" d="m 96.83,686.82 58.353,-5.0761 c 15.608,27.569 6.8304,64.333 -5.0761,90.545 l -53.841,-2.538 z" /></g><g id="g4121" transform="translate(195.96959,0)"><path style="fill:#808080;stroke:#373737;stroke-width:3.56837296" inkscape:connector-curvature="0" id="path4123" d="m 110.97,771.16 31.694,4.8776 1.3007,44.257 -32.995,0 z" /><path style="fill:#b3b3b3;stroke:#565656;stroke-width:3.4000001;stroke-linecap:butt;stroke-linejoin:miter" inkscape:connector-curvature="0" id="path4125" d="m 96.83,686.82 58.353,-5.0761 c 15.608,27.569 6.8304,64.333 -5.0761,90.545 l -53.841,-2.538 z" /></g></g><g style="fill:#666666;stroke:#969696;stroke-width:3.99777174;stroke-miterlimit:4;stroke-dasharray:none" id="g4051" transform="translate(-42.878584,98.083591)" stroke-miterlimit="4"><g id="g4437" transform="matrix(0.74686368,0,0,0.74686368,-73.374214,285.30447)"><path inkscape:connector-curvature="0" id="rect4348" style="color:#000000;text-indent:0;text-transform:none;block-progression:tb;fill:#ffffff" d="m 567.31,584.22 0,42.25 0,3.4062 0,42.25 3.375,0 0,-42.25 27.062,0 0,42.25 3.375,0 0,-42.25 27.062,0 0,42.25 3.375,0 0,-42.25 27.062,0 0,42.25 3.4062,0 0,-43.969 0,-1.6875 -1.7188,0 -28.75,0 0,-42.25 -3.375,0 0,42.25 -27.062,0 0,-42.25 -3.375,0 0,42.25 -27.062,0 0,-42.25 -3.375,0 z" /><g style="fill:#a02c2c;stroke:#ffffff;stroke-width:3.4000001;stroke-linecap:square" id="g87" /></g></g></g></svg>')+
"');width: 397px;height: 455px;-moz-transform: translateX(-50%);-ms-transform: translateX(-50%);-webkit-transform: translateX(-50%);transform: translateX(-50%);background-size: 100% 100%;left: 50%;margin-left: 25px;margin-bottom: 40px;bottom: 0px;";d.style.cssText=Fa+"top: 132px;left: 331px;";h.style.cssText=Fa+"top: 122px;left: 315px;";f.style.cssText=Fa+"top: 122px;left: 347px;";l.style.cssText=Fa+"top: 113px;left: 331px;";m.style.cssText="position: absolute;height: auto;background-image: url('data:image/svg+xml;base64,"+
btoa('<svg id="svg3400" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.507mm" width="15.1mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 53.504016 37.228838"><metadata id="metadata3405"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(-2.847e-7 -1015.1)"><path id="path4049" d="m26.584 1016.1c-12.631 0-23.15 9.858-25.478 22.922l50.705 12.18c0.47921-2.1565 0.73023-4.4099 0.73023-6.7204 0-15.677-11.621-28.382-25.957-28.382z" stroke="#5276cf" stroke-linecap="square" stroke-width="1.9247" fill="#666"/></g></svg>')+
"');width: 54px;height: 37px;background-size: 100% 100%;top: 84px;left: 166px;";n.style.cssText="position: absolute;height: auto;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3400" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.507mm" width="15.1mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 53.504016 37.228838"><metadata id="metadata3405"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(-2.847e-7 -1015.1)"><path id="path4033" d="m26.92 1016.1c-14.337 0-25.957 12.707-25.957 28.382 0 2.3225 0.26742 4.5784 0.74876 6.7386l50.681-12.18c-2.321-13.072-12.841-22.944-25.476-22.944z" stroke="#5276cf" stroke-linecap="square" stroke-width="1.9247" fill="#666"/></g></svg>')+
"');width: 54px;height: 37px;background-size: 100% 100%;top: 84px;left: 36px;";p.style.cssText=Fa+"top: 107px;left: 141px;";t.style.cssText=Fa+"top: 107px;left: 90px;";v.style.cssText=Fa+"top: 185px;left: 321px;";z.style.cssText=Fa+"top: 185px;left: 340px;";y.style.cssText=Fa+"top: 179px;left: 358px;";w.style.cssText=Fa+"top: 178px;left: 303px;";A.style.cssText=Fa+"top: 210px;left: 299px;";B.style.cssText=Fa+"top: 279px;left: 299px;";C.style.cssText=Fa+"top: 210px;left: 321px;";E.style.cssText=Fa+
"top: 279px;left: 321px;";I.style.cssText=Fa+"top: 210px;left: 344px;";D.style.cssText=Fa+"top: 278px;left: 344px;";H.style.cssText=Fa+"top: 124px;left: 147px;";O.style.cssText=Fa+"top: 138px;left: 133px;";L.style.cssText=Fa+"top: 124px;left: 82px;";N.style.cssText=Fa+"top: 138px;left: 96px;";U.style.cssText=Fa+"top: 278px;left: 367px;";Fa="position: absolute;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3386" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="12.859mm" width="5.2917mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 18.749999 45.562501"><metadata id="metadata3391"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1006.8)"><path id="rect4575" d="m9.3125 1006.8-9.3125 14.25h5.3125v17.094h-5.1875l9.3125 14.219 9.3125-14.219h-5.1562v-17.094h5.0312l-9.3125-14.25z" fill="#e6e6e6"/></g></svg>')+
"');width: 19px;height: 46px;background-size: 100% 100%;";a.style.cssText=Fa+"top: 291px;left: 50px;";ka.style.cssText=Fa+"top: 291px;left: 111px;";aa.style.cssText=Fa+"top: 291px;left: 171px;";ha.style.cssText="position: absolute;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3458" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="50.447mm" width="83.899mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 297.28131 178.75"><metadata id="metadata3463"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -873.61)" fill="#e6e6e6"><path id="path4535" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m33.875 873.61-18.5 8.8125 5.0626 3.0625c-12.899 22.78-20.438 49.17-20.438 77.44 0 28.284 7.5315 54.691 20.438 77.469l-5.0626 3.0625 18.5 8.8125 0.6563-20.469-5.531 3.3c-12.002-21.2-18.937-45.8-18.937-72.18 0-26.362 6.9415-50.99 18.937-72.188l5.5313 3.3438-0.6563-20.469z"/><path id="path4551" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m263.38 873.71-0.6562 20.469 5.5312-3.3438c11.996 21.198 18.969 45.825 18.969 72.188 0 26.371-6.9672 51.011-18.969 72.219l-5.5312-3.3437 0.6562 20.469 18.5-8.8125-5.0312-3.0625c12.906-22.778 20.438-49.184 20.438-77.469 0-28.275-7.5391-54.665-20.438-77.438l5.0312-3.0625-18.5-8.8125z"/></g></svg>')+
"');width: 297px;height: 179px;background-size: 100% 100%;top: 43px;left: -25px;";xa.style.cssText="position: absolute;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3378" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="2.9016mm" width="9.2516mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.781198 10.281199"><metadata id="metadata3383"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1042.1)"><path id="rect4585" d="m32.781 1047.2-7.875-5.125v2.8437h-17.031v-2.8437l-7.875 5.1 7.875 5.1562v-2.8437h17.031v2.8437z" fill="#e6e6e6"/></g></svg>')+
"');width: 33px;height: 10px;background-size: 100% 100%;top: 159px;left: 324px;";za.style.cssText="position: absolute;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3378" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2516mm" width="2.9016mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 10.281248 32.7812"><metadata id="metadata3383"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1019.6)"><path id="rect4585" d="m5.125 1019.6-5.125 7.9h2.8437v17.031h-2.8437l5.125 7.875 5.1562-7.875h-2.8438v-17.031h2.8438z" fill="#e6e6e6"/></g></svg>')+
"');width: 10px;height: 33px;background-size: 100% 100%;top: 148px;left: 335px;";b.appendChild(c);c.appendChild(a);c.appendChild(ka);c.appendChild(aa);c.appendChild(ha);c.appendChild(xa);c.appendChild(za);c.appendChild(d);c.appendChild(h);c.appendChild(f);c.appendChild(l);c.appendChild(m);c.appendChild(n);c.appendChild(p);c.appendChild(t);c.appendChild(v);c.appendChild(z);c.appendChild(y);c.appendChild(w);c.appendChild(A);c.appendChild(B);c.appendChild(C);c.appendChild(E);c.appendChild(I);c.appendChild(D);
c.appendChild(H);c.appendChild(O);c.appendChild(L);c.appendChild(N);c.appendChild(U);J.length=0;R.length=0;P.length=0;q.length=0;J.push(d,h,f,l,m,n,p,t,v,z,y,w,A,B,C,E,I,D,H,O,L,N,U);R.push('<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg id="svg3400" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.507mm" width="15.1mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 53.504016 37.228838"><metadata id="metadata3405"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(-2.847e-7 -1015.1)"><path id="path4049" d="m26.584 1016.1c-12.631 0-23.15 9.858-25.478 22.922l50.705 12.18c0.47921-2.1565 0.73023-4.4099 0.73023-6.7204 0-15.677-11.621-28.382-25.957-28.382z" stroke="#5276cf" stroke-linecap="square" stroke-width="1.9247" fill="#666"/></g></svg>',
'<svg id="svg3400" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.507mm" width="15.1mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 53.504016 37.228838"><metadata id="metadata3405"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(-2.847e-7 -1015.1)"><path id="path4033" d="m26.92 1016.1c-14.337 0-25.957 12.707-25.957 28.382 0 2.3225 0.26742 4.5784 0.74876 6.7386l50.681-12.18c-2.321-13.072-12.841-22.944-25.476-22.944z" stroke="#5276cf" stroke-linecap="square" stroke-width="1.9247" fill="#666"/></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>');
q.push(ha,a,aa,ka,xa,za);for(b=0;b<J.length;b++)J[b].setAttribute("id","wheel_btn_"+b),J[b].setAttribute("data-colorstate","B"),J[b].setAttribute("data-key",b),J[b].setAttribute("data-svgid",b);for(b=0;b<q.length;b++)J[b].setAttribute("id","wheel_axis_"+b),J[b].setAttribute("data-colorstate","GR");ha.setAttribute("data-key",G.GMPD_AXIS_0);ha.setAttribute("data-svgid",R.length);a.setAttribute("data-key",G.GMPD_AXIS_1);a.setAttribute("data-svgid",R.length+1);aa.setAttribute("data-key",G.GMPD_AXIS_2);
aa.setAttribute("data-svgid",R.length+2);ka.setAttribute("data-key",G.GMPD_AXIS_3);ka.setAttribute("data-svgid",R.length+3);xa.setAttribute("data-key",G.GMPD_AXIS_4);xa.setAttribute("data-svgid",R.length+4);za.setAttribute("data-key",G.GMPD_AXIS_5);za.setAttribute("data-svgid",R.length+5);R.push('<svg id="svg3458" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="50.447mm" width="83.899mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 297.28131 178.75"><metadata id="metadata3463"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -873.61)" fill="#e6e6e6"><path id="path4535" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m33.875 873.61-18.5 8.8125 5.0626 3.0625c-12.899 22.78-20.438 49.17-20.438 77.44 0 28.284 7.5315 54.691 20.438 77.469l-5.0626 3.0625 18.5 8.8125 0.6563-20.469-5.531 3.3c-12.002-21.2-18.937-45.8-18.937-72.18 0-26.362 6.9415-50.99 18.937-72.188l5.5313 3.3438-0.6563-20.469z"/><path id="path4551" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m263.38 873.71-0.6562 20.469 5.5312-3.3438c11.996 21.198 18.969 45.825 18.969 72.188 0 26.371-6.9672 51.011-18.969 72.219l-5.5312-3.3437 0.6562 20.469 18.5-8.8125-5.0312-3.0625c12.906-22.778 20.438-49.184 20.438-77.469 0-28.275-7.5391-54.665-20.438-77.438l5.0312-3.0625-18.5-8.8125z"/></g></svg>',
'<svg id="svg3386" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="12.859mm" width="5.2917mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 18.749999 45.562501"><metadata id="metadata3391"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1006.8)"><path id="rect4575" d="m9.3125 1006.8-9.3125 14.25h5.3125v17.094h-5.1875l9.3125 14.219 9.3125-14.219h-5.1562v-17.094h5.0312l-9.3125-14.25z" fill="#e6e6e6"/></g></svg>',
'<svg id="svg3386" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="12.859mm" width="5.2917mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 18.749999 45.562501"><metadata id="metadata3391"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1006.8)"><path id="rect4575" d="m9.3125 1006.8-9.3125 14.25h5.3125v17.094h-5.1875l9.3125 14.219 9.3125-14.219h-5.1562v-17.094h5.0312l-9.3125-14.25z" fill="#e6e6e6"/></g></svg>',
'<svg id="svg3386" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="12.859mm" width="5.2917mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 18.749999 45.562501"><metadata id="metadata3391"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1006.8)"><path id="rect4575" d="m9.3125 1006.8-9.3125 14.25h5.3125v17.094h-5.1875l9.3125 14.219 9.3125-14.219h-5.1562v-17.094h5.0312l-9.3125-14.25z" fill="#e6e6e6"/></g></svg>',
'<svg id="svg3378" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="2.9016mm" width="9.2516mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.781198 10.281199"><metadata id="metadata3383"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1042.1)"><path id="rect4585" d="m32.781 1047.2-7.875-5.125v2.8437h-17.031v-2.8437l-7.875 5.1 7.875 5.1562v-2.8437h17.031v2.8437z" fill="#e6e6e6"/></g></svg>',
'<svg id="svg3378" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2516mm" width="2.9016mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 10.281248 32.7812"><metadata id="metadata3383"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1019.6)"><path id="rect4585" d="m5.125 1019.6-5.125 7.9h2.8437v17.031h-2.8437l5.125 7.875 5.1562-7.875h-2.8438v-17.031h2.8438z" fill="#e6e6e6"/></g></svg>');
k(J,u);k(q,"#e6e6e6")}}function k(a,b){function c(a){a=a.target;if(!(0>O||"G"==a.getAttribute("data-colorstate")))if(0!=B){if("R"==a.getAttribute("data-colorstate")&&(L=null,document.getElementById("action_label").textContent="Click on the buttons & arrows to setup your controller",B=0),"B"==a.getAttribute("data-colorstate")||"GR"==a.getAttribute("data-colorstate")){var c=parseFloat(L.getAttribute("data-svgid"));L.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(R[c])+"')";L.setAttribute("data-colorstate",
a.getAttribute("data-colorstate"));L=a;c=parseFloat(a.getAttribute("data-svgid"));a.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(R[c].replace(b,"#ff0000"))+"')";a.setAttribute("data-colorstate","R")}}else{c=parseFloat(a.getAttribute("data-svgid"));var e="B"==a.getAttribute("data-colorstate")?1:2;B=e;a.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(R[c].replace(b,"#ff0000"))+"')";a.setAttribute("data-colorstate","R");document.getElementById("action_label").textContent=
1==e?"Now press the button on the device":"Now move the axis on the device";L=a}}for(var e=0;e<a.length;e++)G.add_click_listener(a[e],c)}function c(a){var b=document.createElement("label");b.style.cssText="position: relative;display: inline-block;width: 50px;color: white;margin: 0 10px;font-size: 36px;line-height: 50px;background-color: black;border: 3px solid white;border-radius: 5px;height: 50px;";b.textContent=a;return b}function l(){var a=window.innerWidth,b=window.innerHeight;Y.style.zoom=750>=
b&&400<b||750>=a&&400<a?"0.5":400>=a||400>=b?"0.3":"1"}var b=Object(N.a)(d),h=Object(U.a)(d),G=Object(n.a)(d),D=Object(y.a)(d),u=/#5276cf/g,E={};E[G.GMPD_BUTTON_12]=G.GMPD_BUTTON_12;E[G.GMPD_BUTTON_13]=G.GMPD_BUTTON_13;E[G.GMPD_BUTTON_15]=G.GMPD_BUTTON_15;E[G.GMPD_BUTTON_14]=G.GMPD_BUTTON_14;E[G.GMPD_BUTTON_3]=G.GMPD_BUTTON_3;E[G.GMPD_BUTTON_0]=G.GMPD_BUTTON_0;E[G.GMPD_BUTTON_1]=G.GMPD_BUTTON_1;E[G.GMPD_BUTTON_2]=G.GMPD_BUTTON_2;E[G.GMPD_BUTTON_5]=G.GMPD_BUTTON_5;E[G.GMPD_BUTTON_7]=G.GMPD_BUTTON_7;
E[G.GMPD_BUTTON_4]=G.GMPD_BUTTON_4;E[G.GMPD_BUTTON_6]=G.GMPD_BUTTON_6;E[G.GMPD_BUTTON_8]=G.GMPD_BUTTON_8;E[G.GMPD_BUTTON_9]=G.GMPD_BUTTON_9;E[G.GMPD_BUTTON_10]=G.GMPD_BUTTON_10;E[G.GMPD_BUTTON_11]=G.GMPD_BUTTON_11;E[G.GMPD_BUTTON_16]=G.GMPD_BUTTON_16;var R=[],O=-1,L=null,B=0,Y=null,K=null,ha=null,T=null,V=null,A=null,aa=[],J=[],P=[],q=[],da=!0,I={};I[G.GMPD_AXIS_0]=-2;I[G.GMPD_AXIS_1]=-2;I[G.GMPD_AXIS_2]=-2;I[G.GMPD_AXIS_3]=-2;I[G.GMPD_AXIS_4]=-2;I[G.GMPD_AXIS_5]=-2;I[G.GMPD_AXIS_6]=-2;I[G.GMPD_AXIS_7]=
-2;I[G.GMPD_AXIS_8]=-2;I[G.GMPD_AXIS_9]=-2;I[G.GMPD_AXIS_10]=-2;I[G.GMPD_AXIS_11]=-2;f.show=function(){var d=document.createElement("div");Y=d;d.style.cssText="position: absolute;width: 720px;height: 750px;top: 50%;left: 50%;-moz-transform: translateY(-50%) translateX(-50%);-ms-transform: translateY(-50%) translateX(-50%);-webkit-transform: translateY(-50%) translateX(-50%);transform: translateY(-50%) translateX(-50%);background-color: black;border: 4px solid white;border-radius: 35px;box-shadow: 0px 0px 20px 0px rgba(50, 50, 50, 1);";
b.insert_to_container(d,"LAST");r(d);var e=document.createElement("div");e.style.cssText="position: absolute;width: 637px;top: 0px;font-family: sans-serif;text-align: center;margin-top: 40px;-moz-transform: translateX(-50%);-ms-transform: translateX(-50%);-webkit-transform: translateX(-50%);transform: translateX(-50%);left: 50%;";var f=document.createElement("div");f.innerHTML="Select a device";f.style.cssText="color: #fff;display: inline-block;";e.appendChild(f);for(f=0;4>f;f++){var k=p(f),n=function(){return!0},
y=function(a,b){if(b==O)for(var c=0;c<J.length;c++){var e=J[c],d=h.get_sensor_value(a,b,c),f=c;if(0==B){if(d&&"B"==e.getAttribute("data-colorstate")){var k=R[f];e.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(k.replace(u,"#00ff00"))+"')";e.setAttribute("data-colorstate","G")}d||"B"==e.getAttribute("data-colorstate")||(k=R[f],e.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(k)+"')",e.setAttribute("data-colorstate","B"))}else d=G.get_pressed_gmpd_btn(O),0<=d&&L&&1==B&&(e=
L.getAttribute("data-key"),G.set_gamepad_key(O,e,d),f=D.get(O+"_gmpd_stngs","b4w")||"{}",f=JSON.parse(f),f[e]=d,D.set(O+"_gmpd_stngs",JSON.stringify(f),"b4w"),L=null,document.getElementById("action_label").textContent="Click on the buttons & arrows to setup your controller",B=0)}};h.create_sensor_manifold(null,f,h.CT_CONTINUOUS,k,n,y)}0<m().length&&(O=0);var C=[];f=document.createElement("div");f.style.cssText="margin-top: 20px;";for(k=0;4>k;k++)y=c(k),k==O&&(y.style.backgroundColor="green",ha=y),
v(k),f.appendChild(y),y.setAttribute("data-device_type","PAD"),C.push(y),G.add_click_listener(y,function(a){var b=m();a=a.target;for(var c=0;c<b.length;c++)C[c]==a&&(O=c,ha=a,v(O),w(a.getAttribute("data-device_type")))});e.appendChild(f);A=document.createElement("label");A.style.cssText="position: relative;display: block;color: white;";e.appendChild(A);f=document.createElement("div");f.style.cssText="margin-top: 20px;";k=a(f,"Pad");y=a(f,"Wheel");k.setAttribute("checked","true");k.onchange=function(){w("PAD");
ha&&ha.setAttribute("data-device_type","PAD")};y.onchange=function(){w("WHEEL");ha&&ha.setAttribute("data-device_type","WHEEL")};k.setAttribute("id","test");V=k;T=y;k=document.createElement("label");k.style.cssText+="color: #fff;display: block;";f.appendChild(k);k.textContent="Click on the buttons & arrows to setup your controller";k.setAttribute("id","action_label");e.appendChild(f);d.appendChild(e);d=h.create_elapsed_sensor();h.create_sensor_manifold(null,"UPDATE_GAMEPAD_DATA",h.CT_CONTINUOUS,[d],
n,function(){var a=m(),b=a.length;-1==O&&a.length&&(O=a[0].index,ha=C[O]);for(var c=0;c<C.length;c++)c<b?(C[c].textContent=a[c].index,C[c]==ha?(C[c].style.backgroundColor="green",A.textContent="Selected device: "+a[c].index+". Data: "+a[c].id):C[c].style.backgroundColor="blue"):C[c].style.backgroundColor="black";b||(O=-1,A.textContent="")});for(f=0;4>f;f++)k=z(f),y=function(a,b){if(b=="AXES"+O){for(var c=0;c<P.length;c+=2){var e=P[c],d=a,f=b,k=c,l=20*h.get_sensor_value(d,f,k);d=20*h.get_sensor_value(d,
f,k+1);e.style.transform="translate3d("+l+"px, "+d+"px, 0px) rotate(0rad)"}if(da)for(c=0;12>c;c+=2){if(d=a,f=b,e=c,!(e+1>2*q.length)){l=h.get_sensor_value(d,f,e);d=h.get_sensor_value(d,f,e+1);if(-2<I[e]){var m=l-I[e],n=d-I[e+1];f=q[Math.floor(e/2)];k=f.getAttribute("data-svgid");0==B?f.style.backgroundImage=m||n?"url('data:image/svg+xml;base64,"+btoa(R[k].replace("#e6e6e6","#00ff00"))+"')":"url('data:image/svg+xml;base64,"+btoa(R[k])+"')":2==B&&(m=G.get_moved_gmpd_axis(O),0<=m&&(0!=m%2&&m--,B=0,f.style.backgroundImage=
"url('data:image/svg+xml;base64,"+btoa(R[k])+"')",f=parseFloat(L.getAttribute("data-key")),G.set_gamepad_key(O,f,m),G.set_gamepad_key(O,f+1,m+1),L=null,document.getElementById("action_label").textContent="Click on the buttons & arrows to setup your controller"))}I[e]=l;I[e+1]=d}}else for(c=0;12>c;c++)e=c,e>=q.length||(l=h.get_sensor_value(a,b,e),-2<I[e]&&(k=l-I[e],d=q[e],f=d.getAttribute("data-svgid"),0==B?d.style.backgroundImage=k?"url('data:image/svg+xml;base64,"+btoa(R[f].replace("#e6e6e6","#00ff00"))+
"')":"url('data:image/svg+xml;base64,"+btoa(R[f])+"')":2==B&&(k=G.get_moved_gmpd_axis(O),0<=k&&(B=0,d.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(R[f])+"')",d=parseFloat(L.getAttribute("data-key")),G.set_gamepad_key(O,d,k),L=null,document.getElementById("action_label").textContent="Click on the buttons & arrows to setup your controller"))),I[e]=l)}},h.create_sensor_manifold(null,"AXES"+f,h.CT_CONTINUOUS,k,function(){return!0},y);l();window.addEventListener("resize",l)};f.hide=function(){B=
0;O=-1;V=T=L=ha=null;P.length=0;J.length=0;q.length=0;b.get_container().removeChild(Y);Y=null;h.remove_sensor_manifold(null,"UPDATE_GAMEPAD_DATA");for(var a=0;4>a;a++)h.remove_sensor_manifold(null,a),h.remove_sensor_manifold(null,"AXES"+a);window.removeEventListener("resize",l)};f.update=function(){for(var a=0;4>a;a++)v(a)}});w.a=f},function(D,w,f){D=f(0);var N=f(33),U=f(24),n=f(30),y=f(41),d=f(26),m=f(3);f=Object(D.a)("gyroscope",function(f,v){function r(a){var d=z.create_gyro_angles_sensor(),f=
z.create_gyro_quat_sensor(),n=!0;z.create_sensor_manifold(a,"CAMERA_ROTATE_GYRO",z.CT_CONTINUOUS,[d,f],null,function(a,d,f){if(0<f)if(p.is_eye_camera(a))d=z.get_sensor_payload(a,d,1),f=m.transformQuat(k.AXIS_MY,d,b),p.set_vertical_axis(a,f),w.set_rotation_v(a,d);else{l=z.get_sensor_payload(a,d,0);n&&(c[0]=l[0],c[1]=l[1],c[2]=l[2],n=!1);f=d=0;0==window.orientation&&(d=l[1]-c[1],f=l[0]-c[0],l[1]>C&&l[1]<h&&(f=0));if(180==window.orientation){d=l[1]-c[1];0>l[1]&&(d=-d);f=c[0]-l[0];if(d>Math.PI/2||d<-Math.PI/
2)d=0;l[1]>-h&&l[1]<-C&&(f=0)}if(-90==window.orientation){d=l[0]-c[0];if(d>Math.PI/2||d<-Math.PI/2)d=0;f=c[1]-l[1];if(l[0]>D||l[0]<u)f=0}if(90==window.orientation){d=c[0]-l[0];if(d>Math.PI/2||d<-Math.PI/2)d=0;f=l[1]-c[1];if(l[0]>D||l[0]<u)f=0}p.rotate_camera(a,f,d);c[0]=l[0];c[1]=l[1];c[2]=l[2]}})}var p=Object(N.a)(f),z=Object(U.a)(f),a=Object(n.a)(f),w=Object(y.a)(f),k=Object(d.a)(f),c=new Float32Array(3),l=new Float32Array(3),b=m.create(),h=k.deg_to_rad(110),C=k.deg_to_rad(70),D=k.deg_to_rad(70),
u=-k.deg_to_rad(70);v.enable_camera_rotation=function(){var b=a.get_active_camera();r(b)};v.disable_camera_rotation=function(){var b=a.get_active_camera();z.remove_sensor_manifold(b,"CAMERA_ROTATE_GYRO")}});w.a=f},function(D,w,f){D=f(0);var N=f(40),U=f(24),n=f(49),y=f(1),d=f(69),m=f(26);f=Object(D.a)("hmd_conf",function(f,v){function r(){if(!D.can_use_device(D.DEVICE_HMD))return!1;var a=D.get_device_by_type_element(D.DEVICE_HMD);a=D.get_value_param(a,D.HMD_WEBVR_TYPE);return a&(D.HMD_NON_WEBVR|D.HMD_WEBVR_MOBILE|
D.HMD_WEBVR_DESKTOP)&&!(a&D.HMD_WEBVR1)}function p(a){a=a.target.value;var b=V[a],c;for(c in ha)if(c in b){var d=document.getElementById(c+"_slider");d&&(d.disabled="custom"!==a,d.value=b[c]);if(d=document.getElementById(c+"_number"))d.disabled="custom"!==a,d.value=b[c];ha[c]=b[c]}}function z(){C.remove_sensor_manifold(null,"UPDATE_HMD_RENDERING");w();c();O&&(O=!1,h.get_container().removeChild(L),document.head.removeChild(B),B=Y=L=null)}function a(){w(!0);c();for(var a in ha){var b=document.getElementById(a+
"_slider");b&&(b.value=ha[a]);if(b=document.getElementById(a+"_number"))b.value=ha[a]}}function w(a){var b=Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio,c=Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio,d=0,f=0,h=0;a:{var e=aa;var k=navigator.userAgent||navigator.vendor||window.opera;if(1==e.format&&e.devices&&e.devices.length)for(var l=0;l<e.devices.length;l++){var m=e.devices[l];if(m.rules&&("ios"==m.type&&T||"android"==m.type)){for(var n=
!1,p=0;p<m.rules.length;p++){var r=m.rules[p];if(r.ua&&0<=k.indexOf(r.ua)||!r.ua&&r.res&&r.res[0]&&r.res[1]&&Math.min(b,c)==Math.min(r.res[0],r.res[1])&&Math.max(b,c)==Math.max(r.res[0],r.res[1])){n=!0;break}}if(n){e=l;break a}}}else u.error("DPDB isn't correct.");e=-1}-1!=e&&(h=aa.devices[e],f=h.dpi[1]||h.dpi,d=Math.round(25.4*b/(h.dpi[0]||h.dpi)),f=Math.round(25.4*c/f),h=Math.round(h.bw));b=E.get("hmd_conf","b4w");b=JSON.parse(b?b:"{}");a?(ha.first_distortion=.34,ha.second_distortion=.55,ha.bevel_size=
h||4,ha.screen_width=d||110,ha.screen_height=f||65,ha.screen_lense=50,ha.ipd=64,ha.baseline=32):(ha.first_distortion="first_distortion"in b?parseFloat(b.first_distortion):.34,ha.second_distortion="second_distortion"in b?parseFloat(b.second_distortion):.55,ha.bevel_size="bevel_size"in b?parseFloat(b.bevel_size):h||4,ha.screen_width="screen_width"in b?parseFloat(b.screen_width):d||110,ha.screen_height="screen_height"in b?parseFloat(b.screen_height):f||65,ha.screen_lense="screen_lense"in b?parseFloat(b.screen_lense):
50,ha.ipd="ipd"in b?parseFloat(b.ipd):64,ha.baseline="baseline"in b?parseFloat(b.baseline):32);K=!0}function k(){E.set("hmd_conf",JSON.stringify(ha),"b4w");z()}function c(){if(K){var a=D.get_device_by_type_element(D.DEVICE_HMD);a&&(D.set_config(a,D.HMD_DISTORTION,[ha.first_distortion,ha.second_distortion]),D.get_value_param(a,D.HMD_WEBVR_TYPE)&(D.HMD_NON_WEBVR|D.HMD_WEBVR_MOBILE)&&(D.set_config(a,D.HMD_BEVEL_SIZE,.001*ha.bevel_size),D.set_config(a,D.HMD_SCREEN_WIDTH,.001*ha.screen_width),D.set_config(a,
D.HMD_SCREEN_HEIGHT,.001*ha.screen_height),D.set_config(a,D.HMD_SCREEN_LENS_DIST,.001*ha.screen_lense),D.set_config(a,D.HMD_EYE_DISTANCE,.001*ha.ipd),D.set_config(a,D.HMD_BASELINE_DIST,.001*ha.baseline)));K=!1}}function l(a){var b=a.target.id.split("_");b=b.splice(0,b.length-1).join("_");b in ha&&ha[b]!=a.target.value&&(K=!0,ha[b]=a.target.value,document.getElementById(b+"_slider").value=a.target.value,document.getElementById(b+"_number").value=a.target.value)}function b(a,b,c){var d=document.createElement("button");
d.onclick=a;d.style.cssText="background-color: #323232;border: 2px solid rgba(98, 98, 98, .2);border-radius: 2px;width: 160px;height: 30px;display: block;float: left;font-size: 16px;font-weight: normal;color: #fff;cursor: pointer;text-decoration: none;text-align: center;padding-left: 8px;line-height: 28px;margin-right:"+c+";box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);";d.innerHTML=b;return d}var h=Object(N.a)(f),C=Object(U.a)(f),D=Object(n.a)(f),u=Object(y.a)(f),E=Object(d.a)(f),R=Object(m.a)(f),
O=!1,L=null,B=null,Y=null,K=!0,ha={profile:"custom",first_distortion:0,second_distortion:0,bevel_size:0,screen_width:0,screen_height:0,screen_lense:0,ipd:0,baseline:0},T=/iPad|iPhone|iPod/.test(navigator.platform),V={oculus_dk2:{name:"Oculus Rift DK2",type:2,first_distortion:.22,second_distortion:.28},cardboard_1:{name:"Cardboard (2014)",type:1,ipd:60,baseline:35,screen_lense:42,first_distortion:.441,second_distortion:.156},cardboard_2:{name:"Cardboard (2015)",type:1,ipd:64,baseline:35,screen_lense:39,
first_distortion:.34,second_distortion:.55},custom:{name:"Custom",type:0,ipd:64,baseline:35,screen_lense:39,first_distortion:0,second_distortion:0}},A=[{label:"Tray to lens-center distance.",Uo:!0,inputs:[{id:"baseline",max:"50",step:"0.5"}]},{label:"Interpupillary distance.",Uo:!0,inputs:[{id:"ipd",max:"100",step:"1"}]},{label:"Screen to lense distance.",Uo:!0,inputs:[{id:"screen_lense",max:"100",step:"1"}]},{label:"Screen height.",Uo:!0,inputs:[{id:"screen_height",max:"150",step:"1"}]},{label:"Screen width.",
Uo:!0,inputs:[{id:"screen_width",max:"200",step:"1"}]},{label:"Bevel width.",Uo:!0,inputs:[{id:"bevel_size",max:"20",step:"1"}]},{label:"Distortion coefficients.",inputs:[{id:"first_distortion",max:"1.0",step:"0.01"},{id:"second_distortion",max:"1.0",step:"0.01"}]}];v.check=r;v.show=function(d){if(r()){var f=h.get_container();B=document.createElement("style");B.innerHTML="."+d+" input[type=range]::-webkit-slider-runnable-track {width: 100%; height: 8px;cursor: pointer;background-color: #fff;border: 2px solid rgba(98, 98, 98, .2);box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);}."+
d+" input[type=range]::-webkit-slider-thumb {box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);height: 30px;width: 16px;border-radius: 2px;background-color: #323232;cursor: pointer;margin-top: -13px;-webkit-appearance: none;}";document.head.appendChild(B);if(!O){O=!0;w();var m=D.get_device_by_type_element(D.DEVICE_MOUSE,f);D.switch_prevent_default(m,!1);m=D.get_device_by_type_element(D.DEVICE_TOUCH,f);D.switch_prevent_default(m,!1);L=document.createElement("div");L.className=d;f.appendChild(L);Y=document.createElement("div");
L.appendChild(Y);Y.style.cssText="background-color: #484848;border: 2px solid rgba(150, 150, 150, 0.7);box-shadow: 0px 0px 10px 0px rgba(150, 150, 150, 0.7);position: relative;width: 524px;padding: 16px;overflow: hidden;";d=E.get("hmd_conf","b4w");d=JSON.parse(d?d:"{}").profile||"custom";f=document.createElement("div");m=document.createElement("label");m.innerHTML="Profile: ";m.className="text_label";m.style.cssText="background-color: #323232;border: 2px solid rgba(98, 98, 98, .2);border-radius: 2px;width: 120px;height: 30px;display: block;float: left;font-size: 16px;font-weight: normal;color: #fff;cursor: pointer;text-decoration: none;text-align: left;padding-left: 8px;line-height: 28px;margin-bottom: 4px;box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);";
f.appendChild(m);m=document.createElement("select");f.appendChild(m);m.style.cssText="background-color: #323232;border: 2px solid rgba(98, 98, 98, .2);border-radius: 2px;height: 30px;display: block;font-size: 16px;font-weight: normal;color: #fff;cursor: pointer;text-decoration: none;text-align: left;padding-left: 8px;line-height: 28px;margin-bottom: 4px;box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);";var n=D.get_device_by_type_element(D.DEVICE_HMD);if(n)for(var u in V)if(0==V[u].type||D.get_value_param(n,
D.HMD_WEBVR_TYPE)&(D.HMD_NON_WEBVR|D.HMD_WEBVR_MOBILE)&&1==V[u].type){var t=document.createElement("option");t.value=u;t.text=V[u].name;m.appendChild(t)}m.value=d;R.is_ie11()?m.onchange=p:m.oninput=p;Y.appendChild(f);u=D.get_device_by_type_element(D.DEVICE_HMD);for(d=0;d<A.length;d++)if(D.get_value_param(u,D.HMD_WEBVR_TYPE)&(D.HMD_NON_WEBVR|D.HMD_WEBVR_MOBILE)||!A[d].Uo){f=A[d];n=d;m=document.createElement("div");t=document.createElement("label");t.className="text_label";var e="8px";n%2&&(e="0");
t.style.cssText="background-color: #323232;border: 2px solid rgba(98, 98, 98, .2);border-radius: 2px;width: 100%;height: 30px;display: block;font-size: 16px;font-weight: normal;color: #fff;cursor: pointer;text-decoration: none;text-align: left;padding-left: 8px;line-height: 28px;margin-bottom: 4px;box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);";t.textContent=f.label;m.appendChild(t);m.style.cssText="margin-top: 16px;float: left;width: 240px;margin-right: "+e+";border-top: 2px solid rgba(98, 98, 98, .4);box-sizing: border-box;-webkit-box-sizing: border-box;padding-top: 8px;";
for(n=0;n<f.inputs.length;n++){t=f.inputs[n];e=document.createElement("div");e.className="row";var v=document.createElement("input");v.className="input_slider";v.style.cssText="-webkit-appearance: none;width: 192px;display: block;float: left;height: 8px;margin-bottom: 16px;margin-top: 16px;box-sizing: border-box;margin-right: 8px;margin-left: 0;";v.setAttribute("id",t.id+"_slider");v.setAttribute("type","range");v.setAttribute("min","0.00");v.setAttribute("step",t.step);v.setAttribute("value",ha[t.id]);
v.setAttribute("max",t.max);e.appendChild(v);var y=document.createElement("input");y.className="input_text";y.setAttribute("id",t.id+"_number");y.setAttribute("type","number");y.setAttribute("min","0.00");y.setAttribute("step",t.step);y.setAttribute("value",ha[t.id]);y.setAttribute("max",t.max);e.appendChild(y);y.style.cssText="background-color: #323232;border: 2px solid rgba(98, 98, 98, .2);border-radius: 2px;width: 40px;height: 30px;display: block;float: left;font-size: 16px;font-weight: normal;color: #fff;cursor: pointer;text-decoration: none;text-align: center;box-sizing: border-box;line-height: 28px;margin-top: 4px;margin-right: 0;margin-left: 0;box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);";
R.is_ie11()?(v.onchange=l,y.onchange=l):(v.oninput=l,y.oninput=l);m.appendChild(e)}Y.appendChild(m)}u=document.createElement("div");d=b(k,"SAVE","4px");f=b(z,"CANCEL","4px");m=b(a,"RESET","0px");u.className="row";u.style.cssText="padding-top: 32px;clear: both;box-sizing: border-box;-webkit-box-sizing: border-box;";u.appendChild(d);u.appendChild(f);u.appendChild(m);Y.appendChild(u);u=C.create_timeline_sensor();C.create_sensor_manifold(null,"UPDATE_HMD_RENDERING",C.CT_CONTINUOUS,[u],null,c)}}};v.hide=
z;v.reset=a;v.update=function(){w();c()};var aa={_comment:"AUTOMATICALLY GENERATED BY generate_dpdb.py. DO NOT EDIT.",format:1,last_updated:"2016-01-26T23:11:18Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},
{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,
518],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1E3},{type:"android",
rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},
{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},
{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],
dpi:[403.4,402.7],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],
bw:3,ac:1E3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1E3},
{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1E3},{type:"android",
rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1E3},{type:"android",
rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},
{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},
{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],
dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,
bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},
{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1E3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1E3},{type:"ios",
rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1E3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1E3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1E3}]}});w.a=f},function(D,w,f){D=f(0);var N=f(24),U=f(1),n=f(30),y=f(50),d=f(82),m=f(26);f=Object(D.a)("mixer",function(f,v){function r(){B=L.length=0;Y=p(100);K=new Float32Array(Y.length);ha=new Float32Array(Y.length);var a=E.get_speaker_objects();if(a.length){L.push(z());for(var b=0;b<a.length;b++)L.push(w(a[b]));L.sort(function(a,
b){return"MASTER"==a.id?-1:"MASTER"==b.id?1:"COMPRESSOR"==a.id?-1:"COMPRESSOR"==b.id?1:a.id.toUpperCase()<b.id.toUpperCase()?-1:a.id.toUpperCase()>b.id.toUpperCase()?1:0})}}function p(a){for(var b=new Float32Array(a),c=0,d=0;d<a;d++)b[d]=20*Math.pow(1E3,c),c+=1/(a-1);return b}function z(){var b=a("MASTER"),c=E.get_compressor_params();c&&(b.Oa.push(["THRESHOLD",c.threshold,-100,0,100,!1]),b.Oa.push(["KNEE",c.knee,0,40,40,!1]),b.Oa.push(["RATIO",c.ratio,1,20,20,!1]),b.Oa.push(["ATTACK",c.attack,0,1,
1E3,!1]),b.Oa.push(["RELEASE",c.release,0,1,1E3,!1]));b.Oa.push(["VOLUME",E.get_volume(null),0,1,50,!1]);b.mute=E.is_muted(null)?1:0;b.Ph=-1;return b}function a(a){return{id:a,Oa:[],qm:0,mute:-1,Ph:-1,Vc:null}}function w(b){var c=a(D.get_object_name(b));c.mute=E.is_muted(b)?1:0;c.Ph=0;c.Vc=b;return c}function k(a){if(a.Vc){a.Oa.length=0;var b=E.get_positional_params(a.Vc);b&&(a.Oa.push(["DIST_REF",b.dist_ref,0,1E3,1E4,!1]),a.Oa.push(["ATTENUATION",b.attenuation,0,50,1E3,!1]),a.Oa.push(["DIST_MAX",
b.dist_max,0,1E4,1E4,!1]));if(b=E.get_filter_params(a.Vc))a.Oa.push(["EQ_FREQ",b.freq,20,2E4,100,!0]),a.Oa.push(["EQ_Q",b.Q,0,10,100,!1]),a.Oa.push(["EQ_GAIN",b.gain,-70,30,100,!1]);a.Oa.push(["VOLUME",E.get_volume(a.Vc),0,1,50,!1]);R.clamp(a.qm,0,a.Oa.length-1)}}function c(a){for(var b=0;b<L.length;b++){var c=L[b];if(c!=a&&1==c.Ph)return!0}return!1}function l(a){for(var b=0;b<L.length;b++){var c=L[b];c!=a&&0==c.mute&&0==c.Ph&&E.mute(c.Vc,!1)}}function b(){if(0==L.length)return[0,-1];var a=8*Math.floor(B/
8),b=a+7;a=R.clamp(a,0,L.length-1);b=R.clamp(b,0,L.length-1);return[a,b]}var h=Object(N.a)(f),C=Object(U.a)(f),D=Object(n.a)(f),u=Object(y.a)(f),E=Object(d.a)(f),R=Object(m.a)(f),O="SWITCH_STRIP SWITCH_STRIP_HOLD SWITCH_PARAM INC_DEC INC_DEC_HOLD MUTE_SOLO".split(" "),L=[],B=0,Y=null,K=null,ha=null;v.enable_mixer_controls=function(){function a(a,b,c){if(1==c){var e=h.get_sensor_value(a,b,0)?-1:1,d=L[B];if(d)switch(c=d.Oa[d.qm],c[1]=c[5]?c[1]*Math.pow(c[3]/c[2],e/c[4]):c[1]+(c[3]-c[2])/c[4]*e,c[1]=
R.clamp(c[1],c[2],c[3]),c[0]){case "VOLUME":"MASTER"!=d.id?E.set_volume(d.Vc,c[1]):E.set_volume(null,c[1]);break;case "DIST_REF":e=E.get_positional_params(d.Vc);e.dist_ref=c[1];E.set_positional_params(d.Vc,e);break;case "ATTENUATION":e=E.get_positional_params(d.Vc);e.attenuation=c[1];E.set_positional_params(d.Vc,e);break;case "DIST_MAX":e=E.get_positional_params(d.Vc);e.dist_max=c[1];E.set_positional_params(d.Vc,e);break;case "EQ_FREQ":e=E.get_filter_params(d.Vc);e.freq=c[1];E.set_filter_params(d.Vc,
e);break;case "EQ_Q":e=E.get_filter_params(d.Vc);e.Q=c[1];E.set_filter_params(d.Vc,e);break;case "EQ_GAIN":e=E.get_filter_params(d.Vc);e.gain=c[1];E.set_filter_params(d.Vc,e);break;case "THRESHOLD":d=E.get_compressor_params();d.threshold=c[1];E.set_compressor_params(d);break;case "KNEE":d=E.get_compressor_params();d.knee=c[1];E.set_compressor_params(d);break;case "RATIO":d=E.get_compressor_params();d.ratio=c[1];E.set_compressor_params(d);break;case "ATTACK":d=E.get_compressor_params();d.attack=c[1];
E.set_compressor_params(d);break;case "RELEASE":d=E.get_compressor_params();d.release=c[1];E.set_compressor_params(d);break;default:C.error("Unknown strip param")}"INC_DEC"==b?h.reset_timer_sensor(a,b,2,.35):h.reset_timer_sensor(a,b,2,.05)}else h.reset_timer_sensor(a,b,2,10)}function d(a,c,e){if(1==e){e=h.get_sensor_value(a,c,0)?-1:1;if(L.length){1==e&&B<L.length-1?B++:-1==e&&0<B&&B--;e=b();for(var d=e[0];d<=e[1];d++)k(L[d])}"SWITCH_STRIP"==c?h.reset_timer_sensor(a,c,2,.15+.3):h.reset_timer_sensor(a,
c,2,.15)}else h.reset_timer_sensor(a,c,2,10)}r();var f=h.create_keyboard_sensor(h.KEY_NUM4),m=h.create_keyboard_sensor(h.KEY_NUM6),n=h.create_keyboard_sensor(h.KEY_NUM8),p=h.create_keyboard_sensor(h.KEY_NUM2),q=h.create_keyboard_sensor(h.KEY_ADD),v=h.create_keyboard_sensor(h.KEY_SUB),z=h.create_keyboard_sensor(h.KEY_NUM7),t=h.create_keyboard_sensor(h.KEY_NUM9),e=h.create_timer_sensor(.15,!0),y=h.create_timer_sensor(.05,!0);f=[f,m,e];h.create_sensor_manifold(null,"SWITCH_STRIP",h.CT_TRIGGER,f,function(a){return a[0]||
a[1]},d);h.create_sensor_manifold(null,"SWITCH_STRIP_HOLD",h.CT_SHOT,f,function(a){return(a[0]||a[1])&&a[2]},d);h.create_sensor_manifold(null,"SWITCH_PARAM",h.CT_SHOT,[n,p],function(a){return a[0]||a[1]},function(a,b){a=h.get_sensor_value(a,b,0)?-1:1;(b=L[B])&&(1==a&&b.qm<b.Oa.length-1?b.qm++:-1==a&&0<b.qm&&b.qm--)});n=[v,q,y];h.create_sensor_manifold(null,"INC_DEC",h.CT_TRIGGER,n,function(a){return a[0]||a[1]},a);h.create_sensor_manifold(null,"INC_DEC_HOLD",h.CT_SHOT,n,function(a){return(a[0]||a[1])&&
a[2]},a);h.create_sensor_manifold(null,"MUTE_SOLO",h.CT_SHOT,[z,t],function(a){return a[0]||a[1]},function(a,b){if(h.get_sensor_value(a,b,0))(a=L[B])&&0<=a.mute&&("MASTER"!=a.id?0==a.mute?(a.mute=1,E.mute(a.Vc,!0),1==a.Ph&&(a.Ph=0,c(a)||l(a))):(a.mute=0,c(a)||E.mute(a.Vc,!1)):0==a.mute?(a.mute=1,E.mute(null,!0)):(a.mute=0,E.mute(null,!1)));else if((a=L[B])&&0<=a.Ph)if(0==a.Ph)for(a.Ph=1,E.mute(a.Vc,!1),1==a.mute&&(a.mute=0),b=0;b<L.length;b++){var e=L[b];e!=a&&0==e.mute&&0==e.Ph&&E.mute(e.Vc,!0)}else a.Ph=
0,c(a)?E.mute(a.Vc,!0):l(a)});z=h.create_elapsed_sensor();h.create_sensor_manifold(null,"MIXER_DRAW",h.CT_CONTINUOUS,[z],null,function(){if(L[B])for(var a=b(),c=a[0];c<=a[1];c++){var e=L[c];u.draw_mixer_strip(e.id,c==B,c%8,e.Oa,e.qm,e.mute,e.Ph);if(e.Vc&&E.get_filter_params(e.Vc)){E.get_filter_freq_response(e.Vc,Y,K,ha);for(e=0;e<K.length;e++)K[e]=20*Math.log(K[e])/Math.LN10;u.plot_array("EQ",c%8,K,20,2E4,-10,10)}}});z=h.create_timer_sensor(1,!0);h.create_sensor_manifold(null,"MIXER_UPDATE",h.CT_TRIGGER,
[z],null,function(){for(var a=b(),c=a[0];c<=a[1];c++)k(L[c])})};v.disable_mixer_controls=function(){for(var a=0;O.length;a++)h.remove_sensor_manifold(null,O[a])}});w.a=f},function(D,w,f){D=f(0);var N=f(33),U=f(40),n=f(24),y=f(54),d=f(1),m=f(30),C=f(26),v=f(61);f=Object(D.a)("mouse",function(f,p){function r(){1==J&&(J=0);var a=document.exitPointerLock||document.webkitExitPointerLock||document.mozExitPointerLock;"function"===typeof a&&a.apply(document);u.remove_sensor_manifold(O.get_active_camera(),
"SMOOTH_PL")}function a(a){2==J&&(J=0);a.removeEventListener("mousedown",k,!1);a.removeEventListener("mouseup",c,!1);a.removeEventListener("mousemove",w,!1);u.remove_sensor_manifold(O.get_active_camera(),"SMOOTH_DRAG")}function w(a){if(A()){if(q)var b=ka.get_coords_target_space(a,V);else b=V,b[0]=a.clientX,b[1]=a.clientY;T[0]+=2*(b[0]-K);T[1]+=2*(b[1]-ha);K=b[0];ha=b[1]}a.preventDefault()}function k(a){if(q)var b=ka.get_coords_target_space(a,V);else b=V,b[0]=a.clientX,b[1]=a.clientY;K=b[0];ha=b[1];
a.currentTarget.addEventListener("mousemove",w,!1);a.preventDefault()}function c(a){a.currentTarget.removeEventListener("mousemove",w,!1);a.preventDefault()}function l(a,b,c,e){if(.01<Math.abs(T[0])||.01<Math.abs(T[1]))b=u.get_sensor_value(a,b,0),a=L.smooth(T[0],0,b,.1*Y),b=L.smooth(T[1],0,b,.1*Y),T[0]-=a,T[1]-=b,e(4E-4*-a,4E-4*-b)}function b(a,b){var c=O.get_first_character(),e=O.get_active_camera();D.rotate_camera(e,a,b);c&&(a=D.get_camera_angles_char(e,V),E.set_character_rotation_h(c,a[0]),E.set_character_vert_move_dir_angle(c,
a[1]))}function h(a){P?(a=ka.get_coords_target_space(a,!1,V),a=O.pick_object(a[0],a[1])):a=O.pick_object(a.clientX,a.clientY);a?(O.outlining_is_enabled(a)&&O.set_outline_intensity(a,1),O.outlining_is_enabled(aa)&&a!=aa&&O.set_outline_intensity(aa,0)):O.outlining_is_enabled(aa)&&O.set_outline_intensity(aa,0);aa=a}var D=Object(N.a)(f),ka=Object(U.a)(f),u=Object(n.a)(f),E=Object(y.a)(f),R=Object(d.a)(f),O=Object(m.a)(f),L=Object(C.a)(f),B=Object(v.a)(f),Y=1,K=0,ha=0,T=new Float32Array(2),V=new Float32Array(2),
A=null,aa=null,J=0,P=!1,q=!1;p.request_pointerlock=function(c,d,f,e,h,k){function m(){if(document.pointerLockElement===c||document.webkitPointerLockElement===c||document.mozPointerLockElement===c){a(c);c.addEventListener("mousemove",e,!1);var b=O.get_active_camera();if(!u.check_sensor_manifold(b,"SMOOTH_PL")){var h=u.create_elapsed_sensor();u.create_sensor_manifold(b,"SMOOTH_PL",u.CT_CONTINUOUS,[h],null,l,k)}d()}else c.removeEventListener("mousemove",e,!1),J=0,document.removeEventListener("pointerlockchange",
m,!1),document.removeEventListener("webkitpointerlockchange",m,!1),document.removeEventListener("mozpointerlockchange",m,!1),f()}if(1!=J){J=1;d=d||function(){};f=f||function(){};k=k||b;h=h||function(){return!0};e=e||function(a){if(h()){if("number"==typeof a.movementX){var b=a.movementX;a=a.movementY}else"number"==typeof a.webkitMovementX?(b=a.webkitMovementX,a=a.webkitMovementY):"number"==typeof a.mozMovementX?(b=a.mozMovementX,a=a.mozMovementY):a=b=0;T[0]+=b;T[1]+=a}};document.addEventListener("pointerlockchange",
m,!1);document.addEventListener("webkitpointerlockchange",m,!1);document.addEventListener("mozpointerlockchange",m,!1);var n=c.requestPointerLock||c.webkitRequestPointerLock||c.mozRequestPointerLock;"function"===typeof n?n.apply(c):R.error("Pointer lock is not available")}};p.exit_pointerlock=r;p.check_pointerlock=function(a){return"function"===typeof(a.requestPointerLock||a.webkitRequestPointerLock||a.mozRequestPointerLock)?!0:!1};p.request_mouse_drag=function(a,d,f,e){2!=J&&(J=2,r(),A=d||function(){return!0},
f=f||b,q=!!e,a.addEventListener("mousedown",k,!1),a.addEventListener("mouseup",c,!1),a=O.get_active_camera(),u.check_sensor_manifold(a,"SMOOTH_DRAG")||(d=u.create_elapsed_sensor(),u.create_sensor_manifold(a,"SMOOTH_DRAG",u.CT_CONTINUOUS,[d],null,l,f)))};p.exit_mouse_drag=a;p.enable_mouse_hover_outline=function(a){P=!!a;B.detect_mobile()||ka.get_canvas().addEventListener("mousemove",h)};p.disable_mouse_hover_outline=function(){B.detect_mobile()||(ka.get_canvas().removeEventListener("mousemove",h),
aa&&O.set_outline_intensity(aa,0))};p.get_coords_x=function(a,b,c){return c?ka.get_coords_target_space(a,b,V)[0]:"clientX"in a?a.clientX:(a="touchend"==a.type?a.changedTouches:b?a.targetTouches:a.touches)&&a[0]&&"clientX"in a[0]?a[0].clientX:-1};p.get_coords_y=function(a,b,c){return c?ka.get_coords_target_space(a,b,V)[1]:"clientY"in a?a.clientY:(a="touchend"==a.type?a.changedTouches:b?a.targetTouches:a.touches)&&a[0]&&"clientY"in a[0]?a[0].clientY:-1};p.set_plock_smooth_factor=function(a){Y=a};p.get_plock_smooth_factor=
function(){return Y}});w.a=f},function(D,w,f){D=f(0);var N=f(83),U=f(24),n=f(8),y=f(30),d=f(68),m=f(41),C=f(3),v=f(54),r=f(1),p=f(26);f=Object(D.a)("npc_ai",function(f,a){function z(a,b){var c=b.destination,d=b.az,f=ha;R.get_translation(b.collider,f);var k=0,l=f[2];c[2]=l;switch(b.type){case P:if(b.random&&b.Ml){c[0]=(12*Math.random()-6)*b.speed+d[0];c[1]=-(12*Math.random()-6)*b.speed+d[1];var m=aa;d=T;var p=b.speed,u=b.rot_speed;R.get_rotation(b.collider,m);C.transformQuat(B.AXIS_MY,m,d);d[2]=0;
C.normalize(d,d);m=.5*p/Math.sin(u/2);f=C.dist(c,f);f<2*m&&C.scaleAndAdd(c,d,2*m-f,c);b.Ml=!1}b.oA&&(k=b.oA-l,f=b.speed*a,k>f?k=f:k<-f&&(k=-f));b.Ok=k;break;case q:case da:b.mq?k=b.mq:b.Ok&&(k=b.Ok,b.type==da&&(k*=a)),b.random&&b.Ml&&(b.type==da?(b.speed=Math.random()+.1,f=b.$G-b.cH):f=b.max_height-b.min_height,c[0]=10*Math.random()-5+d[0],c[1]=10*Math.random()-5+d[1],c[2]=l-(Math.random()*f-.5*f),b.Ml=!1)}k&&(c[2]=l+k);c=K;f=ha;m=T;k=J;u=b.rig;d=b.collider;l=b.destination;var t=b.speed,r=b.actions,
v=w.get_current_anim_name(u);if(!w.is_play(u)||!r.idle||-1==r.idle.indexOf(v)){R.get_translation(d,c);p=l[0]-c[0];var z=l[1]-c[1];p=Math.sqrt(p*p+z*z);if(p>2*t*a)b.state=20,B.horizontal_direction(l,c,m),r=b.rig,w.is_animated(r)&&(u=b.speed,t=w.get_frame(r),r=w.get_anim_length(r),u*=r/24*(1-t/r),.9>p/u&&C.scaleAndAdd(l,m,u-p,l)),p=aa,u=V,R.get_rotation(b.collider,p),C.transformQuat(B.AXIS_MY,p,f),u[0]=f[0],u[1]=f[1],u[2]=0,C.normalize(u,u),t=C.dot(u,m),r=a/(Math.abs(Math.acos(t))/Math.PI)*b.rot_speed*
b.NB,n.rotationTo(u,m,k),n.rotationTo(B.AXIS_MY,u,p),1<=Math.abs(t)?n.copy(p,k):(n.multiply(k,p,k),n.slerp(p,k,Math.min(r,1),k)),m=a,b.type!=q&&(m=Math.max(m,1/60),p=A,u=aa,n.setAxisAngle(B.AXIS_X,-Math.asin(-f[2]),u),n.setAxisAngle(B.AXIS_X,-Math.atan(b.Ok/(b.speed*m)),p),n.slerp(u,p,m,p),n.multiply(k,p,k)),R.set_rotation_v(d,k),f=T,d=V,B.quat_to_dir(k,B.AXIS_MY,f),C.scale(f,b.speed*a,d),C.add(d,c,d),d[2]=b.type!=P?(l[2]-c[2])*a*.1+c[2]:l[2],R.set_translation_v(b.collider,d);else if(b.type==P)r.move?
v&&-1!=r.move.indexOf(v)&&w.is_play(u)?b.state=20:(b.state=10,b.Ml=!0):(b.state=10,b.Ml=!0);else if(b.type==da||b.type==q)b.Ml=!0;if(h(b)&&(a=b.rig,!w.is_play(a))){c=null;switch(b.state){case 10:b=b.actions;c=b.idle?B.random_from_array(b.idle):null;break;case 20:c=w.get_current_anim_name(b.rig),l=k=b.actions,l.move_blends&&-1==l.move_blends.indexOf(c)&&l.move&&-1!=l.move.indexOf(c)&&.33<Math.random()?(b=b.actions,b=b.move_blends[b.move.indexOf(c)]):(l=b.actions,l.move&&(-1!=l.move.indexOf(c)||!l.move_blends&&
!l.move_start||!l.move_start&&!c||l.move_blends&&-1!=l.move_blends.indexOf(c)||l.move_start&&-1!=l.move_start.indexOf(c))?(b=b.actions,b.move_blends?(k=b.move_blends.indexOf(c),-1!=k?(c=k+1,c=c<b.move.length?c:0,b=b.move[c]):b=-1!=b.move.indexOf(c)?c:B.random_from_array(b.move)):b=B.random_from_array(b.move)):(b=b.actions,b=b.move_start&&-1==b.move_start.indexOf(c)&&b.move&&-1==b.move.indexOf(c)?B.random_from_array(k.move_start):null)),c=b}c&&(w.apply(a,c),w.set_behavior(a,w.AB_FINISH_RESET),w.set_frame(a,
0),w.play(a))}}}function k(a,b,c,d){if(d)if(1==c)switch(d.type){case q:a:{for(c=0;3>c;c++){var e=D.get_sensor_payload(a,b,c).hit_fract;if(e){b=e;break a}}b=void 0}b*=100;d.Ok=b<d.min_height?10:b>d.max_height?-10:0;break;case P:a=D.get_sensor_payload(a,b,0);d.oA=a.hit_pos[2];break;case da:a=D.get_sensor_payload(a,b,0),"CLOSE_GROUND"==b?(d.Ok=100*a.hit_fract-1,d.Ok=.1>d.Ok?.05:0):"CLOSE_WATER"==b&&(d.mq=100*a.hit_fract,d.mq=d.mq<d.cH?-.02:d.mq>d.$G?.02:0)}else d.Ok=0}function c(){for(var a=0;a<Y.length;a++){var c=
Y[a];l(c);b(c);w.get_current_anim_name(c.rig)&&w.play(c.rig)}}function l(a){var b=C.create(),c=a.collider;switch(a.type){case q:var d=D.create_ray_sensor(c,b,[0,0,-100],"TERRAIN",!0,!0),f=D.create_ray_sensor(c,b,[0,0,-100],"STONE",!0,!0);b=D.create_ray_sensor(c,b,[0,0,-100],"WATER",!0,!0);d=[d,f,b];D.create_sensor_manifold(c,"CLOSE_GROUND",D.CT_CONTINUOUS,d,function(a){return a[0]||a[1]||a[2]},k,a);break;case P:d=D.create_ray_sensor(c,[0,0,1],[0,0,-99],"TERRAIN",!0,!0);d=[d];D.create_sensor_manifold(c,
"CLOSE_GROUND",D.CT_CONTINUOUS,d,null,k,a);break;case da:d=D.create_ray_sensor(c,[0,0,1],[0,0,-99],"TERRAIN",!0,!0),b=D.create_ray_sensor(c,b,[0,0,100],"WATER",!0,!0),d=[d],D.create_sensor_manifold(c,"CLOSE_WATER",D.CT_CONTINUOUS,[b],null,k,a),D.create_sensor_manifold(c,"CLOSE_GROUND",D.CT_CONTINUOUS,d,null,k,a)}}function b(a){var b=a.collider;if(a.type==P){var c=D.create_collision_sensor(b,"CONSTRUCTION",!1);D.create_sensor_manifold(b,"CONSTRUCTION_COLL",D.CT_CONTINUOUS,[c],null,function(b,c,e){1==
e?(C.copy(a.az,a.destination),a.NB=4):a.NB=1})}}function h(a){var b=a.rig;if(!w.is_play(b))return!0;b=w.get_current_anim_name(b);if(!b)return!0;var c=a.actions;switch(a.state){case 10:if(!c.idle)return!1;break;case 20:if(!c.move||-1!=c.move.indexOf(b)||c.move_start&&-1!=c.move_start.indexOf(b)||c.move_blends&&-1!=c.move_blends.indexOf(b))return!1;break;default:return!1}return!0}var w=Object(N.a)(f),D=Object(U.a)(f),u=Object(y.a)(f),E=Object(d.a)(f),R=Object(m.a)(f),O=Object(v.a)(f),L=Object(r.a)(f),
B=Object(p.a)(f),Y=[],K=new Float32Array(3),ha=new Float32Array(3),T=new Float32Array(3),V=new Float32Array(3),A=new Float32Array(4),aa=new Float32Array(4),J=new Float32Array(4),P=a.NT_WALKING=10,q=a.NT_FLYING=20,da=a.NT_SWIMMING=30;a.new_event_track=function(a){var b={obj:null,rig:null,collider:null,empty:null,type:P,state:10,actions:{},az:new Float32Array(3),destination:new Float32Array(3),path:[],start:[],ended:[],cv:[],delay:[],random:!0,Ml:!0,oA:0,Ok:0,mq:0,NB:1,speed:1,rot_speed:.1,max_height:0,
min_height:0,$G:0,cH:0};if("object"!=typeof a.obj)L.error("Can't create event track. Wrong object.");else if("object"!=typeof a.rig)L.error("Can't create event track. Wrong rig object.");else if("object"==typeof a.collider&&O.has_physics(a.collider)){b.obj=a.obj;b.collider=a.collider;b.rig=a.rig;R.get_translation(a.collider,b.az);"object"==typeof a.actions&&(b.actions=a.actions);"boolean"==typeof a.random&&(b.random=a.random);"number"==typeof a.type&&(b.type=a.type);"number"==typeof a.speed&&(b.speed=
a.speed);"number"==typeof a.rot_speed&&(b.rot_speed=a.rot_speed);"number"==typeof a.max_height&&(b.max_height=a.max_height);"number"==typeof a.min_height&&(b.min_height=a.min_height);if(!b.random){for(var c=0;c<a.path.length;c++)b.start[c]=-1,b.ended[c]=!1,b.cv[c]=!1;b.path=a.path;b.delay=a.delay}a=a.actions;c=w.get_current_anim_name(b.rig);for(var d in a)for(var f=a[d],h=0;h<f.length;h++)w.apply(b.rig,f[h]);c&&w.apply(b.rig,c);Y.push(b)}else L.error("Can't create event track. Wrong collider object.")};
a.enable_animation=function(){if(Y.length){c();var a=D.create_elapsed_sensor();D.create_sensor_manifold(Y[0].collider,"ELAPSED",D.CT_CONTINUOUS,[a],function(a){return a[0]},function(a,b,c){if(1==c)for(a=D.get_sensor_value(a,b,0),b=0;b<Y.length;b++){c=Y[b];var e=a;if(u.is_visible(c.obj))if(c.random)z(e,c);else{for(var d=E.get_timeline(),f=0;f<c.path.length;f++)if(!c.ended[f]){c.cv[f]||(c.cv[f]=!0,c.destination[0]=c.path[f][0],c.destination[1]=c.path[f][1],c.destination[2]=c.path[f][2],c.start[f]=d+
c.delay[f]);if(d<c.start[f])break;z(e,c);c.ended[f]=c.Ml;break}a:{for(e=0;e<c.path.length;e++)if(0==c.ended[e]){e=!1;break a}e=!0}if(e)for(e=0;e<c.path.length;e++)c.cv[e]=!1,c.ended[e]=!1}}})}};a.disable_animation=function(){if(!(0>=Y.length))for(var a=0;a<Y.length;a++){var b=Y[a];D.check_sensor_manifolds(b.collider)&&D.remove_sensor_manifold(b.collider);w.is_play(b.rig)&&w.stop(b.rig)}}});w.a=f},function(D,w,f){D=f(0);var N=f(40);f=Object(D.a)("preloader",function(f,n){var w=Object(N.a)(f),d,m,C,
v,r,p,z,a,D=null;n.create_preloader=function(a){var c="#484848",f="#5276cf",b="rgba(150, 150, 150, 0.7)",h="#fff";for(k in a)switch(k){case "container_color":c=a.container_color;break;case "bar_color":f=a.bar_color;break;case "frame_color":b=a.frame_color;break;case "font_color":h=a.font_color}a=document.createElement("div");var k=a.cloneNode(!1);var n=a.cloneNode(!1),p=a.cloneNode(!1),r=w.get_container();n.appendChild(k);n.appendChild(p);a.appendChild(n);r.appendChild(a);a.style.cssText="background-color: "+
c+";width: 100%;height: 100%;position: absolute;top: 0;left: 0;";n.style.cssText="position: absolute;left: 50%;top: 50%;margin-left: -150px;margin-top: -30px;width: 300px;height: 28px;box-shadow: 0px 0px 10px 0px "+b+";border: 2px solid "+b+";";k.style.cssText="position: absolute;width: 0%;top: 0;left: 0;background-color: "+f+";height: 100%;";p.style.cssText="font-family: Arial, sans-serif;line-height: 28px;height: 100%;width: 100%;top: 0;left: 0;text-align: center;position: absolute;font-size: 16px;font-weight: bold;text-shadow: 0px 0px 6px "+
b+";color: "+h+";";d=k;m=p;C=a;v="DEFAULT"};n.create_simple_preloader=function(a){var c=null,f=null,b="#bf9221",h="#000";for(k in a)switch(k){case "canvas_container_id":c=a.canvas_container_id;break;case "background_container_id":f=a.background_container_id;break;case "bg_color":h=a.bg_color;break;case "bar_color":b=a.bar_color}a=document.createElement("div");var k=document.createElement("div");a.id="simple_preloader_container";var n=document.createElement("div"),p=document.createElement("div");f=
document.getElementById(f);D=document.getElementById(c);a.style.cssText="z-index: 4;background-color: "+h+";width: 100%;height: 100%;position: absolute;margin: 0;padding: 0;top: 0;left: 0;";k.style.cssText="position: absolute;left: 50%;top: 82%;width: 300px;height: 20px;margin-left: -150px;margin-top: -10px;border-style:solid;border-width:4px;border-color: #000;border-radius: 0px;";n.style.cssText="position: absolute;left: 0px;top: 1px;width: 0px;height: 18px;background-color: "+b+";border-radius: 0px;";
p.style.cssText="position: absolute;left: 50%;top: 50%;width: 100%;height: 100%;margin-left: -150px;margin-top: -10px;text-align: center;font-size: 17px;font-weight: bold;color: #000;font-family: Verdana;"+k.appendChild(n);k.appendChild(p);a.appendChild(k);document.body.appendChild(a);v="SIMPLE";C=a;d=n;m=p;r=f};n.create_rotation_preloader=function(a){var c=null,d=null,b="rgba(0,0,0,0)",f="",k="",n="rgba(0,0,0,0)";for(u in a)switch(u){case "canvas_container_id":c=a.canvas_container_id;break;case "background_container_id":d=
a.background_container_id;break;case "frame_bg_color":b=a.frame_bg_color;break;case "bg_color":n=a.bg_color;break;case "frame_class":f=a.frame_class;break;case "anim_elem_class":k=a.anim_elem_class}a=document.createElement("div");var u=document.createElement("div");var z=document.createElement("div"),w=document.createElement("div");d=document.getElementById(d);D=document.getElementById(c);a.style.cssText="z-index: 4;background-color: "+n+";width: 100%;height: 100%;position: absolute;margin: 0;padding: 0;top: 0;left: 0;";
u.style.cssText="position: absolute;left: 50%;top: 50%;width: 117px;height: 117px;margin-left: -58px;margin-top: -58px;background-color: "+b+";";z.style.cssText="position: absolute;left: 0px;top: 0px;width: 100%;height: 100%;background-position: center;background-repeat: no-repeat;";w.style.cssText="position: absolute;width: 100%;height: 100%;text-align: center;margin-top: 38px;font-size: 36px;color: #ffffff;font-family: Arial;font-weight: bold;";z.className=k;u.appendChild(z);u.className=f;u.appendChild(w);
a.appendChild(u);D.appendChild(a);v="ROTATION";C=a;p=z;m=w;r=d};n.create_advanced_preloader=function(f){var c=f.preloader_width;c/=c-f.img_width;var k=document.getElementById(f.preloader_bar_id),b=document.getElementById(f.fill_band_id),h=document.getElementById(f.preloader_caption_id),n=document.getElementById(f.preloader_container_id),p=document.getElementById(f.background_container_id);D=document.getElementById(f.canvas_container_id);v="ADVANCED";d=k;z=b;a=c;m=h;C=n;r=p};n.update_preloader=function(f){m.innerHTML=
f+"%";"SIMPLE"==v?d.style.width=f+"%":"ADVANCED"==v?(d.style.width=f/a+"%",z.style.width=100-f+"%"):"ROTATION"==v?p.style.transform="rotate("+f+"deg)":"DEFAULT"==v&&(d.style.width=f+"%");100==f&&(C.parentNode.removeChild(C),r&&r.parentNode.removeChild(r))}});w.a=f},function(D,w,f){D=f(0);var N=f(50),U=f(1);f=Object(D.a)("screenshooter",function(f,w){var d=Object(N.a)(f),m=Object(U.a)(f);w.shot=function(f,n){m.ef("shot","screen.shot");d.shot(f,n)}});w.a=f},function(D,w,f){D=f(0);var N=f(55);f=Object(D.a)("anchors",
function(f,n){var w=Object(N.a)(f);n.attach_move_cb=w.attach_move_cb;n.detach_move_cb=w.detach_move_cb;n.is_anchor=w.is_anchor;n.get_element_id=w.get_element_id;n.update=function(){w.update(!0)}});w.a=f},function(D,w,f){D=f(0);var N=f(56),U=f(9),n=f(13),y=f(1),d=f(6);f=Object(D.a)("armature",function(f,w){var m=Object(U.a)(f),r=Object(n.a)(f),p=Object(y.a)(f);w.get_bone_tsr=function(f,a,n){if(!m.is_armature(f))return null;if(!N.a(f,a))return p.error('There is no bone: "',a,'" in "',f.name,'".'),null;
n||(n=d.b());N.b(f,a,!1,!1,n);return n};w.get_bone_tsr_rel=function(f,a,n){if(!m.is_armature(f))return null;if(!N.a(f,a))return p.error('There is no bone: "',a,'" in "',f.name,'".'),null;n||(n=d.b());N.b(f,a,!1,!0,n);return n};w.set_bone_tsr=function(d,a,f){m.is_armature(d)&&(N.a(d,a)?(N.c(d,a,f,!1),r.Ea(d)):p.error('There is no bone: "',a,'" in "',d.name,'".'))};w.set_bone_tsr_rel=function(d,a,f){m.is_armature(d)&&(N.a(d,a)?(N.c(d,a,f,!0),r.Ea(d)):p.error('There is no bone: "',a,'" in "',d.name,
'".'))}});w.a=f},function(D,w,f){D=f(0);var N=f(44);f=Object(D.a)("assets",function(f,n){var w=Object(N.a)(f);n.AT_ARRAYBUFFER=w.AT_ARRAYBUFFER;n.AT_ARRAYBUFFER_ZIP=w.AT_ARRAYBUFFER_ZIP;n.AT_JSON=w.AT_JSON;n.AT_JSON_ZIP=w.AT_JSON_ZIP;n.AT_TEXT=w.AT_TEXT;n.AT_AUDIOBUFFER=w.AT_AUDIOBUFFER;n.AT_IMAGE_ELEMENT=w.AT_IMAGE_ELEMENT;n.AT_AUDIO_ELEMENT=w.AT_AUDIO_ELEMENT;n.AT_VIDEO_ELEMENT=w.AT_VIDEO_ELEMENT;n.AT_SEQ_VIDEO_ELEMENT=w.AT_SEQ_VIDEO_ELEMENT;n.enqueue=function(d,f,n,v){d.length&&w.enqueue(d,f,n,
v)}});w.a=f},function(D,w,f){D=f(0);var N=f(16),U=f(20),n=f(1),y=f(22),d=f(36);f=Object(D.a)("geometry",function(f,w){var m=Object(N.a)(f),r=Object(U.a)(f),p=Object(n.a)(f),z=Object(y.a)(f);w.extract_vertex_array=function(a,d,f){if(!r.ck(a))return p.error("Wrong object:",a.name),null;if(a=m.Zb(a,d,"MAIN")){if((d=a.$a)&&d.mc&&("a_normal"==f&&d.mc.a_tbn||d.mc[f]))return r.Rz(d,f);p.error("Attribute not found:"+f);return null}p.error("Wrong material:",d);return null};w.extract_index_array=function(a,
d){if(!r.ck(a))return p.error("Wrong object:",a.name),null;if(a=m.Zb(a,d,"MAIN")){if((d=a.$a)&&d.mc)return d.Ke;p.error("Buffer data not found");return null}p.error("Wrong material:",d);return null};w.update_vertex_array=function(a,d,f,c){if(r.ck(a))for(var k=["MAIN","SHADOW","COLOR_ID"],b=0;b<k.length;b++){var h=m.Zb(a,d,k[b]);h&&(h=h.$a)&&h.mc&&("a_normal"==f&&h.mc.a_tbn||h.mc[f])&&r.$I(h,f,0,c)}else p.error("Wrong object:",a.name)};w.override_geometry=function(a,f,k,c,l){if(r.ck(a))if(k instanceof
Uint16Array||k instanceof Uint32Array)if(c instanceof Float32Array)for(var b=["MAIN","SHADOW","COLOR_ID"],h=0;h<b.length;h++){var n=m.Zb(a,f,b[h]);if(n){var v=n.$a;if(v){r.aJ(v,n.fi,k);var u={},w;for(w in v.mc){var y=v.mc[w];y=c.length/3*y.Tc;var C=r.Ko(w);u[C]||(u[C]=0);u[C]+=y}C=r.YQ(u);v.Pc=C;u={};for(w in v.mc)switch(y=v.mc[w],C=r.Ko(w),u[C]||(u[C]=0),w){case "a_position":r.wt(v.Pc,"a_position",c,u[C]);y.offset=u[C];y.length=c.length;u[C]+=y.length;break;case "a_tbn":var D;l&&(D=r.jE(k,c,c));
var B=r.iE(k,c,D);y.length=c.length/3*y.Tc;for(var H=new Float32Array(y.length),K=0;K<H.length;K+=4)H[K]=1,H[K+3]=1;B=d.d(B,H);r.wt(v.Pc,"a_tbn",B,u[C]);y.offset=u[C];u[C]+=y.length;break;default:y.offset=u[C],y.length=c.length/3*y.Tc,B=new (r.ZP(C))(y.length),r.wt(v.Pc,w,B,u[C]),u[C]+=y.length}r.HC(v);z.bu(n);(n=m.Sg(a,n))&&n.$a&&(n.$a=v)}}}else p.error("Wrong positions_array type");else p.error("Wrong ibo_array type");else p.error("Wrong object:",a.name)};w.set_shape_key_value=function(a,d,f){r.check_shape_keys(a)?
r.tA(a,d)?r.$y(a,d,parseFloat(f)):p.error("Wrong key name:",d):p.error("Wrong object:",a.name)};w.check_shape_keys=function(a){return r.check_shape_keys(a)};w.get_shape_keys_names=function(a){return r.check_shape_keys(a)?r.get_shape_keys_names(a):(p.error("Wrong object:",a.name),[])};w.get_shape_key_value=function(a,d){return r.check_shape_keys(a)?r.tA(a,d)?r.get_shape_key_value(a,d):(p.error("Wrong key name:",d),0):(p.error("Wrong object:",a.name),0)};w.draw_line=function(a,d,f){f=f||!1;if(d instanceof
Float32Array){if(a=m.ov(a))r.draw_line(a,d,f),z.bu(a)}else p.error("Wrong positions type")}});w.a=f},function(D,w,f){D=f(0);var N=f(51),U=f(1);f=Object(D.a)("hud",function(f,w){var d=Object(N.a)(f),m=Object(U.a)(f);w.draw_mixer_strip=function(f,n,r,p,w,a,y){m.ef("draw_mixer_strip","screen.draw_mixer_strip");d.draw_mixer_strip(f,n,r,p,w,a,y)};w.plot_array=function(f,n,r,p,w,a,y){m.ef("plot_array","screen.plot_array");d.plot_array(f,n,r,p,w,a,y)}});w.a=f},function(D,w,f){D=f(0);var N=f(57),U=f(12),
n=f(9),y=f(1),d=f(8),m=f(10),C=f(13),v=f(6),r=f(2),p=f(3);f=Object(D.a)("lights",function(f,a){function w(a){for(var d=h.get_active(),f=c.tc(d,"LAMP",c.DATA_ID_ALL),k=0;k<f.length;k++){var l=f[k];if("SUN"==l.lc.type){var m=l;break}}if(!m)b.error("There is no sun on the scene");else if("number"==typeof a.hor_position&&"number"==typeof a.vert_position){f=r.T(180-a.hor_position);a=r.T(90-a.vert_position);k=m.ka;z.set_rotation_euler(m,[a,0,f]);f=new Float32Array(3);l=v.g(k.na,B);r._34(l,r.f,f);k=v.j(k.na,
L);k=p.length(k);p.copy(f,D);p.scale(D,k,D);z.set_translation(m,D);z.Ea(m);f=m.lc;if(f.uF){k=d.world.horizon_color;l=d.world.zenith_color;a=Math.cos(Math.abs(a));var n=Math.max(a,.1)*d.world.light_settings.environment_energy;N.d(f,Math.max(Math.min(3*a,1),0)*f.jF);h.set_environment_colors(d,n,k,l)}h.Zp(m,d)}}function k(a){if(l.is_lamp(a))return a.lc.type;b.error("get_light_type(): Wrong object");return""}var c=Object(U.a)(f),l=Object(n.a)(f),b=Object(y.a)(f),h=Object(m.a)(f),z=Object(C.a)(f),D=new Float32Array(3),
u,E,R,O=60,L=p.create(),B=d.create();a.get_lamps=function(a){var b=h.get_active();b=c.tc(b,"LAMP",c.DATA_ID_ALL);if(!a)return b;for(var d=[],f=0;f<b.length;f++){var k=b[f];k.lc.type===a&&d.push(k)}return d};a.get_sun_params=function(){var a=h.get_active();a=c.tc(a,"LAMP",c.DATA_ID_ALL);for(var b=null,d=0;d<a.length;d++){var f=a[d];if("SUN"==f.lc.type){b=f;break}}return b?(b=b.lc.direction,a=r._39(Math.atan2(-b[1],b[0]))+90,180<a&&(a-=360),b=r._39(Math.atan2(b[2],Math.sqrt(b[0]*b[0]+b[1]*b[1]))),d=
{},d.hor_position=a,d.vert_position=b,d):null};a.set_sun_params=w;a.set_day_time=function(a){var d=h.get_active();d=c.tc(d,"LAMP",c.DATA_ID_ALL);for(var f=0;f<d.length;f++){var k=d[f];if("SUN"==k.lc.type){var l=k;break}}l?(l=-Math.cos(a/12*Math.PI)*O,d={},d.hor_position=12>a?15*a:15*(a-24),d.vert_position=l,w(d)):b.error("There is no sun on the scene")};a.set_date=function(a){u=a.getFullYear();E=a.getMonth();R=a.getDate();u?1582==u&&9==E&&4<R&&15>R&&b.error("The dates 5 through 14 October, 1582, do not exist in the Gregorian system!"):
b.error("There is no year 0 in the Julian system!")};a.set_max_sun_angle=function(a){O=Math.min(Math.max(a,0),90)};a.get_light_params=function(a){if(l.is_lamp(a))var c=a.lc;else return b.error("get_light_params(): Wrong object"),null;if(a=k(a))switch(a){case "SPOT":var d={light_type:a,light_color:new Float32Array(3),light_energy:c.Qg,light_spot_blend:c.at,light_spot_size:c.En,light_distance:c.distance};d.light_color.set(c.color);break;case "POINT":d={light_type:a,light_color:new Float32Array(3),light_energy:c.Qg,
light_distance:c.distance};d.light_color.set(c.color);break;default:d={light_type:a,light_color:new Float32Array(3),light_energy:c.Qg},d.light_color.set(c.color)}return d?d:null};a.get_light_type=k;a.set_light_params=function(a,c){if(l.is_lamp(a)){var d=a.lc,f=h.get_active(),k=!1;"number"==typeof c.light_energy&&N.d(d,c.light_energy);"object"==typeof c.light_color&&N.b(d,c.light_color);"number"==typeof c.light_spot_blend&&(N.e(d,c.light_spot_blend),k=!0);"number"==typeof c.light_spot_size&&(N.f(d,
c.light_spot_size),k=!0);"number"==typeof c.light_distance&&(N.c(d,c.light_distance),k=!0);h.Zp(a,f);k&&h.EU(f)}else b.error("set_light_params(): Wrong object")};a.get_light_energy=function(a){return l.is_lamp(a)?a.lc.Qg:(b.error("get_light_energy(): Wrong object"),0)};a.set_light_energy=function(a,c){if(l.is_lamp(a)){var d=h.get_active();N.d(a.lc,c);h.Zp(a,d)}else b.error("set_light_energy(): Wrong object")};a.get_light_color=function(a,c){if(!l.is_lamp(a))return b.error("get_light_color(): Wrong object"),
null;c=c||new Float32Array(3);c.set(a.lc.color);return c};a.set_light_color=function(a,c){if(l.is_lamp(a)){var d=h.get_active();N.b(a.lc,c);h.Zp(a,d)}else b.error("set_light_color(): Wrong object")}});w.a=f},function(D,w,f){D=f(0);var N=f(60);f=Object(D.a)("logic_nodes",function(f,n){var w=Object(N.a)(f);n.append_custom_callback=function(d,f){w.gM(d,f)};n.remove_custom_callback=function(d){w.LS(d)};n.run_entrypoint=function(d,f){w.YS(d,f)}});w.a=f},function(D,w,f){D=f(0);var N=f(16),U=f(4),n=f(20),
y=f(12),d=f(9),m=f(1),C=f(34),v=f(2),r=f(10);f=Object(D.a)("material",function(f,w){var a=Object(N.a)(f),p=Object(U.a)(f),k=Object(n.a)(f),c=Object(y.a)(f),l=Object(d.a)(f),b=Object(m.a)(f),h=Object(C.a)(f),z=Object(r.a)(f),D=p.wa;w.inherit_material=function(a,d,f,h){if(k.ck(f)&&k.ck(a)){var l=a.Kf.El.indexOf(d);if(-1==l)b.error('inherit_material(): material "'+d+'" not found on the object "'+a.oe+'".');else{var m=f.Kf.El.indexOf(h);-1==m?b.error('inherit_material(): material "'+h+'" not found on the object "'+
f.oe+'".'):(0==f.Uk.data.submeshes[m].shade_tangs.length&&a.Sc[l].Se&&b.warn('The target material "'+h+'" was exported without tangent shading data. However, the "'+d+'" material requires it. It\'s needed to enable the "Tangent Shading" option on the target material for correct rendering.'),c.inherit_material(a,d,f,h))}}else b.error('inherit_material(): both objects "'+a.oe+'" and "'+f.oe+'" must have the "Dynamic Geometry & Materials" flag enabled.')};w.get_materials_names=function(a){var c=[];if(!l.kc(a))return b.error('get_materials_names(): Object "'+
a.name+'" is not a dynamic MESH.'),c;a=a.Aa;for(var d=0;d<a.length;d++)for(var f=a[d].Ia,h=0;h<f.length;h++){var k=f[h];if("MAIN"==k.type)for(var m=0;m<k.Hc.length;m++)-1==c.indexOf(k.Hc[m])&&c.push(k.Hc[m])}return c};w.set_diffuse_color=function(c,d,f){if(l.kc(c)){var h=a.Zb(c,d,"MAIN");h?h.bc?b.error("set_diffuse_color(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead."):(h.Qc.set(f),(c=a.Sg(c,d,"MAIN"))&&c.Qc.set(f)):b.error('set_diffuse_color(): Material "'+
d+'" wasn\'t found on the object "'+c.name+'".')}else b.error('set_diffuse_color(): Object "'+c.name+'" is not a dynamic MESH.')};w.get_diffuse_color=function(c,d){var f=new Float32Array(4);if(!l.kc(c))return b.error('get_diffuse_color(): Object "'+c.name+'" is not a dynamic MESH.'),f;var h=a.Zb(c,d,"MAIN");if(!h)return b.error('get_diffuse_color(): Material "'+d+'" wasn\'t found on the object "'+c.name+'".'),f;if(h.bc)return b.error("get_diffuse_color(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),
f;f.set(h.Qc);return f};w.set_diffuse_intensity=function(c,d,f){if(l.kc(c)){var h=a.Zb(c,d,"MAIN");if(h)if(h.bc)b.error("set_diffuse_intensity(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead.");else{if(h.Je=f,c=a.Sg(c,d,"MAIN"))c.Je=f}else b.error('set_diffuse_intensity(): Material "'+d+'" wasn\'t found on the object "'+c.name+'".')}else b.error('set_diffuse_intensity(): Object "'+c.name+'" is not a dynamic MESH.')};w.get_diffuse_intensity=function(c,d){if(!l.kc(c))return b.error('get_diffuse_intensity(): Object "'+
c.name+'" is not a dynamic MESH.'),0;var f=a.Zb(c,d,"MAIN");return f?f.bc?(b.error("get_diffuse_intensity(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),0):f.Je:(b.error('get_diffuse_intensity(): Material "'+d+'" wasn\'t found on the object "'+c.name+'".'),0)};w.set_specular_color=function(c,d,f){if(l.kc(c)){var h=a.Zb(c,d,"MAIN");h?h.bc?b.error("set_specular_color(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead."):
(h.Re.set(f),(c=a.Sg(c,d,"MAIN"))&&c.Re.set(f)):b.error('set_specular_color(): Material "'+d+'" wasn\'t found on the object "'+c.name+'".')}else b.error('set_specular_color(): Object "'+c.name+'" is not a dynamic MESH.')};w.get_specular_color=function(c,d){var f=new Float32Array(3);if(!l.kc(c))return b.error('get_specular_color(): Object "'+c.name+'" is not a dynamic MESH.'),f;var h=a.Zb(c,d,"MAIN");if(!h)return b.error('get_specular_color(): Material "'+d+'" wasn\'t found on the object "'+c.name+
'".'),f;if(h.bc)return b.error("get_specular_color(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),f;f.set(h.Re);return f};w.set_specular_color_factor=function(c,d,f){if(l.kc(c)){var h=a.Zb(c,d,"MAIN");if(h)if(h.bc)b.error("set_specular_color_factor(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead.");else{if(h.Dk=f,c=a.Sg(c,d,"MAIN"))c.Dk=f}else b.error('set_specular_color_factor(): Material "'+d+'" wasn\'t found on the object "'+
c.name+'".')}else b.error('set_specular_color_factor(): Object "'+c.name+'" is not a dynamic MESH.')};w.get_specular_color_factor=function(c,d){if(!l.kc(c))return b.error('get_specular_color_factor(): Object "'+c.name+'" is not a dynamic MESH.'),0;var f=a.Zb(c,d,"MAIN");return f?f.bc?(b.error("get_specular_color_factor(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),0):f.Dk:(b.error('get_specular_color_factor(): Material "'+d+'" wasn\'t found on the object "'+
c.name+'".'),0)};w.set_specular_intensity=function(c,d,f){if(l.kc(c)){var h=a.Zb(c,d,"MAIN");h?h.bc?b.error("set_specular_intensity(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead."):(h.tf[0]=f,(c=a.Sg(c,d,"MAIN"))&&(c.tf[0]=f)):b.error('set_specular_intensity(): Material "'+d+'" wasn\'t found on the object "'+c.name+'".')}else b.error('set_specular_intensity(): Object "'+c.name+'" is not a dynamic MESH.')};w.get_specular_intensity=function(c,d){if(!l.kc(c))return b.error('get_specular_intensity(): Object "'+
c.name+'" is not a dynamic MESH.'),0;var f=a.Zb(c,d,"MAIN");return f?f.bc?(b.error("get_specular_intensity(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),0):f.tf[0]:(b.error('get_specular_intensity(): Material "'+d+'" wasn\'t found on the object "'+c.name+'".'),0)};w.check_specular_intensity=function(c,d){b.Ma("check_specular_intensity() is deprecated, not needed anymore");c=a.Zb(c,d,"MAIN");return!(!c||!c.tf[0])};w.set_specular_hardness=function(c,d,f){if(l.kc(c)){var h=
a.Zb(c,d,"MAIN");h?h.bc?b.error("set_specular_hardness(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead."):(h.tf[1]=f,(c=a.Sg(c,d,"MAIN"))&&(c.tf[1]=f)):b.error('set_specular_hardness(): Material "'+d+'" wasn\'t found on the object "'+c.name+'".')}else b.error('set_specular_hardness(): Object "'+c.name+'" is not a dynamic MESH.')};w.get_specular_hardness=function(c,d){if(!l.kc(c))return b.error('get_specular_hardness(): Object "'+c.name+'" is not a dynamic MESH.'),
0;var f=a.Zb(c,d,"MAIN");return f?f.bc?(b.error("get_specular_hardness(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),0):f.tf[1]:(b.error('get_specular_hardness(): Material "'+d+'" wasn\'t found on the object "'+c.name+'".'),0)};w.check_specular_hardness=function(c,d){b.Ma("check_specular_hardness() is deprecated, not needed anymore");c=a.Zb(c,d,"MAIN");return!(!c||!c.tf[1])};w.set_emit_factor=function(c,d,f){if(l.kc(c)){var h=a.Zb(c,d,"MAIN");if(h)if(h.bc)b.error("set_emit_factor(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead.");
else{if(h.ie=f,c=a.Sg(c,d,"MAIN"))c.ie=f}else b.error('set_emit_factor(): Material "'+d+'" wasn\'t found on the object "'+c.name+'".')}else b.error('set_emit_factor(): Object "'+c.name+'" is not a dynamic MESH.')};w.get_emit_factor=function(c,d){if(!l.kc(c))return b.error('get_emit_factor(): Object "'+c.name+'" is not a dynamic MESH.'),0;var f=a.Zb(c,d,"MAIN");return f?f.bc?(b.error("get_emit_factor(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),0):f.ie:
(b.error('get_emit_factor(): Material "'+d+'" wasn\'t found on the object "'+c.name+'".'),0)};w.set_ambient_factor=function(c,d,f){if(l.kc(c)){var h=a.Zb(c,d,"MAIN");if(h)if(h.bc)b.error("set_ambient_factor(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead.");else{if(h.fe=f,c=a.Sg(c,d,"MAIN"))c.fe=f}else b.error('set_ambient_factor(): Material "'+d+'" wasn\'t found on the object "'+c.name+'".')}else b.error('set_ambient_factor(): Object "'+c.name+'" is not a dynamic MESH.')};
w.get_ambient_factor=function(c,d){if(!l.kc(c))return b.error('get_ambient_factor(): Object "'+c.name+'" is not a dynamic MESH.'),0;var f=a.Zb(c,d,"MAIN");return f?f.bc?(b.error("get_ambient_factor(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),0):f.fe:(b.error('get_ambient_factor(): Material "'+d+'" wasn\'t found on the object "'+c.name+'".'),0)};w.set_diffuse_color_factor=function(c,d,f){if(l.kc(c)){var h=a.Zb(c,d,"MAIN");if(h)if(h.bc)b.error("set_diffuse_color_factor(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead.");
else{if(h.Wi=f,c=a.Sg(c,d,"MAIN"))c.Wi=f}else b.error('set_diffuse_color_factor(): Material "'+d+'" wasn\'t found on the object "'+c.name+'".')}else b.error('set_diffuse_color_factor(): Object "'+c.name+'" is not a dynamic MESH.')};w.get_diffuse_color_factor=function(c,d){if(!l.kc(c))return b.error('get_diffuse_color_factor(): Object "'+c.name+'" is not a dynamic MESH.'),0;var f=a.Zb(c,d,"MAIN");return f?f.bc?(b.error("get_diffuse_color_factor(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),
0):f.Wi:(b.error('get_diffuse_color_factor(): Material "'+d+'" wasn\'t found on the object "'+c.name+'".'),0)};w.set_alpha_factor=function(c,d,f){if(l.kc(c)){var h=a.Zb(c,d,"MAIN");if(h)if(h.bc)b.error("set_alpha_factor(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead.");else{if(h.Ii=f,c=a.Sg(c,d,"MAIN"))c.Ii=f}else b.error('set_alpha_factor(): Material "'+d+'" wasn\'t found on the object "'+c.name+'".')}else b.error('set_alpha_factor(): Object "'+c.name+'" is not a dynamic MESH.')};
w.get_alpha_factor=function(c,d){if(!l.kc(c))return b.error('get_alpha_factor(): Object "'+c.name+'" is not a dynamic MESH.'),0;var f=a.Zb(c,d,"MAIN");return f?f.bc?(b.error("get_alpha_factor(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),0):f.Ii:(b.error('get_alpha_factor(): Material "'+d+'" wasn\'t found on the object "'+c.name+'".'),0)};w.get_material_extended_params=function(c,d){if(!l.kc(c))return b.error('get_material_extended_params(): Object "'+
c.name+'" is not a dynamic MESH.'),null;var f=a.Zb(c,d,"MAIN");if(!f)return b.error('get_material_extended_params(): Material "'+d+'" wasn\'t found on the object "'+c.name+'".'),null;if(f.bc)return b.error("get_material_extended_params(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),null;c={};c.reflect_factor=f.reflect_factor;c.fresnel=f.ii[0];c.fresnel_factor=5*(1-f.ii[1]);c.parallax_scale=f.parallax_scale;c.parallax_steps=parseFloat(a.Td(f,"PARALLAX_STEPS")[1]);
return c};w.set_material_extended_params=function(c,d,f){if(l.kc(c)){var k=a.Zb(c,d,"MAIN");if(k)if(k.bc)b.error("set_material_extended_params(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead.");else{var m=[k];(k=a.Sg(c,d,"MAIN"))&&m.push(k);for(c=0;c<m.length;c++)k=m[c],"number"==typeof f.reflect_factor&&(k.reflect_factor=f.reflect_factor),"number"==typeof f.fresnel&&(k.ii[0]=f.fresnel),"number"==typeof f.fresnel_factor&&(k.ii[1]=1-f.fresnel_factor/5),"number"==
typeof f.parallax_scale&&(k.parallax_scale=f.parallax_scale),"number"==typeof f.parallax_steps&&(a.dc(k,"PARALLAX_STEPS",h.Ga(f.parallax_steps)),a.md(k),z.IH(k))}else b.error('set_material_extended_params(): Material "'+d+'" wasn\'t found on the object "'+c.name+'".')}else b.error('set_material_extended_params(): Object "'+c.name+'" is not a dynamic MESH.')};w.get_water_material_params=function(c,d){if(!l.kc(c))return b.error('get_water_material_params(): Object "'+c.name+'" is not a dynamic MESH.'),
null;var f=a.Zb(c,d,"MAIN");if(!f||!f.Bg)return b.error('get_water_material_params(): Material "'+d+'" wasn\'t found on the object "'+c.name+"\" or it's not a water material."),null;if(f.bc)return b.error("get_water_material_params(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),null;c={};c.shore_smoothing=D.shore_smoothing&&f.Tn&&!!parseFloat(a.Td(f,"SHORE_SMOOTHING")[1]);c.absorb_factor=parseFloat(a.Td(f,"ABSORB")[1]);c.foam_factor=f.foam_factor;c.shallow_water_col=
new Float32Array(3);c.shore_water_col=new Float32Array(3);c.shallow_water_col_fac=0;c.shore_water_col_fac=0;D.Bp&&(c.shallow_water_col.set(f.shallow_water_col),c.shore_water_col.set(f.shore_water_col),c.shallow_water_col_fac=f.shallow_water_col_fac,c.shore_water_col_fac=f.shore_water_col_fac);c.norm_uv_velocity=f.jm;c.water_dynamic=D.water_dynamic&&f.water_dynamic&&!!parseFloat(a.Td(f,"DYNAMIC")[1]);c.sss_strength=parseFloat(a.Td(f,"SSS_STRENGTH")[1]);c.sss_width=parseFloat(a.Td(f,"SSS_WIDTH")[1]);
c.waves_height=parseFloat(a.Td(f,"WAVES_HEIGHT")[1]);c.waves_length=parseFloat(a.Td(f,"WAVES_LENGTH")[1]);c.dst_noise_scale0=parseFloat(a.Td(f,"DST_NOISE_SCALE_0")[1]);c.dst_noise_scale1=parseFloat(a.Td(f,"DST_NOISE_SCALE_1")[1]);c.dst_noise_freq0=parseFloat(a.Td(f,"DST_NOISE_FREQ_0")[1]);c.dst_noise_freq1=parseFloat(a.Td(f,"DST_NOISE_FREQ_1")[1]);c.dir_min_shore_fac=parseFloat(a.Td(f,"DIR_MIN_SHR_FAC")[1]);c.dir_freq=parseFloat(a.Td(f,"DIR_FREQ")[1]);c.dir_noise_scale=parseFloat(a.Td(f,"DIR_NOISE_SCALE")[1]);
c.dir_noise_freq=parseFloat(a.Td(f,"DIR_NOISE_FREQ")[1]);c.dir_min_noise_fac=parseFloat(a.Td(f,"DIR_MIN_NOISE_FAC")[1]);c.dst_min_fac=parseFloat(a.Td(f,"DST_MIN_FAC")[1]);c.waves_hor_fac=parseFloat(a.Td(f,"WAVES_HOR_FAC")[1]);return c};w.set_water_material_params=function(c,d,f){if(l.kc(c)){var k=a.Zb(c,d,"MAIN");if(k&&k.Bg)if(k.bc)b.error("set_water_material_params(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead.");else{var m=[k];(k=a.Sg(c,d,"MAIN"))&&m.push(k);
for(c=0;c<m.length;c++)k=m[c],"boolean"==typeof f.shore_smoothing&&(D.shore_smoothing&&k.Tn&&f.shore_smoothing?a.dc(k,"SHORE_SMOOTHING",1):a.dc(k,"SHORE_SMOOTHING",0)),"number"==typeof f.absorb_factor&&(d=h.Ga(parseFloat(f.absorb_factor)),a.dc(k,"ABSORB",d)),"number"==typeof f.foam_factor&&D.Go&&(k.foam_factor=f.foam_factor),D.Bp&&("object"==typeof f.shallow_water_col&&k.shallow_water_col.set(f.shallow_water_col),"number"==typeof f.shallow_water_col_fac&&(k.shallow_water_col_fac=f.shallow_water_col_fac),
"object"==typeof f.shore_water_col&&k.shore_water_col.set(f.shore_water_col),"number"==typeof f.shore_water_col_fac&&(k.shore_water_col_fac=f.shore_water_col_fac)),"number"==typeof f.norm_uv_velocity&&(k.jm=f.norm_uv_velocity),D.water_dynamic&&k.water_dynamic&&("boolean"==typeof f.water_dynamic&&(f.water_dynamic?a.dc(k,"DYNAMIC",1):a.dc(k,"DYNAMIC",0)),"number"==typeof f.sss_strength&&(d=h.Ga(parseFloat(f.sss_strength)),a.dc(k,"SSS_STRENGTH",d)),"number"==typeof f.sss_width&&(d=h.Ga(parseFloat(f.sss_width)),
a.dc(k,"SSS_WIDTH",d)),"number"==typeof f.waves_height&&(d=h.Ga(parseFloat(f.waves_height)),a.dc(k,"WAVES_HEIGHT",d)),"number"==typeof f.waves_length&&(d=h.Ga(parseFloat(f.waves_length)),a.dc(k,"WAVES_LENGTH",d)),"number"==typeof f.dst_noise_scale0&&(d=h.Ga(parseFloat(f.dst_noise_scale0)),a.dc(k,"DST_NOISE_SCALE_0",d)),"number"==typeof f.dst_noise_scale1&&(d=h.Ga(parseFloat(f.dst_noise_scale1)),a.dc(k,"DST_NOISE_SCALE_1",d)),"number"==typeof f.dst_noise_freq0&&(d=h.Ga(parseFloat(f.dst_noise_freq0)),
a.dc(k,"DST_NOISE_FREQ_0",d)),"number"==typeof f.dst_noise_freq1&&(d=h.Ga(parseFloat(f.dst_noise_freq1)),a.dc(k,"DST_NOISE_FREQ_1",d)),"number"==typeof f.dir_min_shore_fac&&(d=h.Ga(parseFloat(f.dir_min_shore_fac)),a.dc(k,"DIR_MIN_SHR_FAC",d)),"number"==typeof f.dir_freq&&(d=h.Ga(parseFloat(f.dir_freq)),a.dc(k,"DIR_FREQ",d)),"number"==typeof f.dir_noise_scale&&(d=h.Ga(parseFloat(f.dir_noise_scale)),a.dc(k,"DIR_NOISE_SCALE",d)),"number"==typeof f.dir_noise_freq&&(d=h.Ga(parseFloat(f.dir_noise_freq)),
a.dc(k,"DIR_NOISE_FREQ",d)),"number"==typeof f.dir_min_noise_fac&&(d=h.Ga(parseFloat(f.dir_min_noise_fac)),a.dc(k,"DIR_MIN_NOISE_FAC",d)),"number"==typeof f.dst_min_fac&&(d=h.Ga(parseFloat(f.dst_min_fac)),a.dc(k,"DST_MIN_FAC",d)),"number"==typeof f.waves_hor_fac&&(d=h.Ga(parseFloat(f.waves_hor_fac)),a.dc(k,"WAVES_HOR_FAC",d))),a.md(k),z.IH(k)}else b.error('set_water_material_params(): Material "'+d+'" wasn\'t found on the object "'+c.name+"\" or it's not a water material.")}else b.error('set_water_material_params(): Object "'+
c.name+'" is not a dynamic MESH.')};w.set_line_params=function(c,d){l.is_line(c)?(c=a.ov(c))?(v._17(d.color)&&c.Qc.set(d.color),v._17(d.width)&&(c.kn=d.width)):b.error("set_line_params(): Couldn't set line parameters!"):b.error('set_line_params(): Object "'+c.name+'" is not a LINE object.')};w.get_line_params=function(c){if(!l.is_line(c))return b.error('get_line_params(): Object "'+c.name+'" is not a LINE object.'),null;c=a.ov(c);return c?{color:new Float32Array(c.Qc),width:c.kn}:(b.error("get_line_params(): Couldn't get line parameters!"),
null)};w.set_nodemat_value=function(d,f,h){var k=l.kc(d),m=l.is_world(d),n=m?c.xv(d):d.name;if(k||m){if(k){var p=f[0],r=1;k=a.vh(d,p,"MAIN")||a.vh(d,p,"PARTICLES");if(!k){b.error('set_nodemat_value(): Material "'+p+'" wasn\'t found on the object "'+n+'".');return}}else if(m&&(k=z.get_active(),p="",r=0,k=a.Nr(d,k),!k)){b.error("set_nodemat_value(): Sky node material wasn't found on the world object \""+n+'".');return}c.set_nodemat_value(d,p,a.hs(f,r),h)||b.error('set_nodemat_value(): Value node "'+
f[f.length-1]+'" was not found in the object "'+n+'".')}else b.error('set_nodemat_value(): Object "'+n+'" is not a dynamic MESH or WORLD.')};w.get_nodemat_value=function(d,f){var h=l.kc(d),k=l.is_world(d),m=k?c.xv(d):d.name;if(!h&&!k)return b.error('get_nodemat_value(): Object "'+m+'" is not a dynamic MESH or WORLD.'),0;if(h){var n=f[0],p=1;h=a.vh(d,n,"MAIN")||a.vh(d,n,"PARTICLES");if(!h)return b.error('get_nodemat_value(): Material "'+n+'" wasn\'t found on the object "'+m+'".'),0}else if(k&&(h=z.get_active(),
n="",p=0,h=a.Nr(d,h),!h))return b.error("get_nodemat_value(): Sky node material wasn't found on the world object \""+m+'".'),0;d=c.get_nodemat_value(d,n,a.hs(f,p));null===d&&b.error('get_nodemat_value(): Value node "'+f[f.length-1]+'" was not found in the object "'+m+'".');return d};w.set_nodemat_rgb=function(d,f,h,k,m){var n=l.kc(d),p=l.is_world(d),r=p?c.xv(d):d.name;if(n||p){if(n){var u=f[0],v=1;n=a.vh(d,u,"MAIN")||a.vh(d,u,"PARTICLES");if(!n){b.error('set_nodemat_rgb(): Material "'+u+'" wasn\'t found on the object "'+
r+'".');return}}else if(p&&(n=z.get_active(),u="",v=0,n=a.Nr(d,n),!n)){b.error("set_nodemat_rgb(): Sky node material wasn't found on the world object \""+r+'".');return}c.set_nodemat_rgb(d,u,a.hs(f,v),h,k,m)||b.error('set_nodemat_rgb(): RGB node "'+f[f.length-1]+'" was not found in the object "'+r+'".')}else b.error('set_nodemat_rgb(): Object "'+r+'" is not a dynamic MESH or WORLD.')};w.get_nodemat_rgb=function(d,f,h){var k=l.kc(d),m=l.is_world(d),n=m?c.xv(d):d.name;if(!k&&!m)return b.error('get_nodemat_rgb(): Object "'+
n+'" is not a dynamic MESH or WORLD.'),null;if(k){var p=f[0],r=1;k=a.vh(d,p,"MAIN")||a.vh(d,p,"PARTICLES");if(!k)return b.error('get_nodemat_rgb(): Material "'+p+'" wasn\'t found on the object "'+n+'".'),null}else if(m&&(k=z.get_active(),p="",r=0,k=a.Nr(d,k),!k))return b.error("get_nodemat_rgb(): Sky node material wasn't found on the world object \""+n+'".'),null;h||(h=new Float32Array(3));(h=c.get_nodemat_rgb(d,p,a.hs(f,r),h))||b.error('get_nodemat_rgb(): RGB node "'+f[f.length-1]+'" was not found in the object "'+
n+'".');return h};w.is_node_material=function(c,d){if(!l.kc(c))return b.error('is_node_material(): Object "'+c.name+'" is not a dynamic MESH.'),!1;var f=a.Zb(c,d,"MAIN");return f?f.bc:(b.error('is_node_material(): Material "'+d+'" wasn\'t found on the object "'+c.name+'".'),!1)};w.is_water_material=function(c,d){if(!l.kc(c))return b.error('is_water_material(): Object "'+c.name+'" is not a dynamic MESH.'),!1;var f=a.Zb(c,d,"MAIN");return f?f.Bg&&!f.bc:(b.error('is_water_material(): Material "'+d+'" wasn\'t found on the object "'+
c.name+'".'),!1)}});w.a=f},function(D,w,f){D=f(0);var N=f(3),U=f(2),n=f(42);f=Object(D.a)("math",function(f,d){var m=new Float32Array(3);d.create_pline_from_points=function(d,f){var r=new Float32Array(6);n.R(r,d);N.subtract(f,d,m);n.Q(r,m);return r};d.create_pline_from_point_vec=function(d,f){var m=new Float32Array(6);n.R(m,d);n.Q(m,f);return m};d.create_pline=function(){return new Float32Array(6)};d.get_pline_directional_vec=n.M;d.get_pline_initial_point=n.N;d.set_pline_initial_point=n.R;d.set_pline_directional_vec=
n.Q;d.line_plane_intersect=U._22;d.calc_pline_point=n.f;d.point_plane_dist=n.P;d.linear_tween=n.O;d.ease_in_quad=n.x;d.ease_out_quad=n.H;d.ease_in_out_quad=n.t;d.ease_in_cubic=n.k;d.ease_out_cubic=n.E;d.ease_in_out_cubic=n.q;d.ease_in_quart=n.y;d.ease_out_quart=n.I;d.ease_in_out_quart=n.u;d.ease_in_quint=n.z;d.ease_out_quint=n.J;d.ease_in_out_quint=n.v;d.ease_in_sine=n.A;d.ease_out_sine=n.K;d.ease_in_out_sine=n.w;d.ease_in_expo=n.m;d.ease_out_expo=n.G;d.ease_in_out_expo=n.s;d.ease_in_circ=n.j;d.ease_out_circ=
n.D;d.ease_in_out_circ=n.p;d.ease_in_elastic=n.l;d.ease_out_elastic=n.F;d.ease_in_out_elastic=n.r;d.ease_in_back=n.h;d.ease_out_back=n.B;d.ease_in_out_back=n.n;d.ease_in_bounce=n.i;d.ease_out_bounce=n.C;d.ease_in_out_bounce=n.o});w.a=f},function(D,w,f){D=f(0);var N=f(52),U=f(18),n=f(1),y=f(2);f=Object(D.a)("nla",function(d,f){var m=Object(N.a)(d),v=Object(U.a)(d),r=Object(n.a)(d);f.set_frame=function(d){d=y.M(d,m.get_frame_start(),m.get_frame_end());m.check_logic_nodes()?r.error("The active scene is using the Logic Editor."):
m.set_frame(d,v.get_timeline())};f.get_frame=function(){return m.get_frame(v.get_timeline())};f.stop=function(){m.check_logic_nodes()&&r.warn("The active scene is using the Logic Editor. It may conflicts with your JS-code.");m.jC()};f.play=function(d){m.check_logic_nodes()&&r.warn("The active scene is using the Logic Editor. It may conflicts with your JS-code.");m.zH(d)};f.is_play=function(){return m.is_play()};f.get_frame_start=function(){return m.get_frame_start()};f.get_frame_end=function(){return m.get_frame_end()};
f.check_nla=function(){return m.check_nla()};f.check_logic_nodes=function(){return m.check_logic_nodes()};f.set_range=function(d,f){m.check_logic_nodes()?r.error("The active scene is using the Logic Editor."):(f=parseFloat(f)||m.get_frame_end(),d=parseFloat(d)||m.get_frame_end(),f=y.M(f,m.get_frame_start(),m.get_frame_end()),d=y.M(d,m.get_frame_start(),f),m.set_range(d,f))};f.reset_range=function(){m.check_logic_nodes()?r.error("The active scene is using the Logic Editor."):m.reset_range()};f.set_cyclic=
function(d){m.check_logic_nodes()?r.error("The active scene is using the Logic Editor."):m.set_cyclic(d)};f.clear_callback=function(){m.check_logic_nodes()?r.error("The active scene is using the Logic Editor."):m.clear_callback()}});w.a=f},function(D,w,f){D=f(0);var N=f(20),U=f(12),n=f(16),y=f(9),d=f(1),m=f(10),C=f(6),v=f(2);f=Object(D.a)("objects",function(f,p){var r=Object(N.a)(f),a=Object(U.a)(f),w=Object(n.a)(f),k=Object(y.a)(f),c=Object(d.a)(f),l=Object(m.a)(f);p.get_meta_tags=function(b){if(b)return a.get_meta_tags(b)};
p.get_custom_prop=function(b){if(b)return a.get_custom_prop(b)};p.copy=function(b,d,f){if(!k.is_mesh(b)&&!k.is_empty(b))return c.error('object "'+b.name+'" is not of type "MESH".'),!1;if(!k.is_dynamic(b))return c.error('object "'+b.name+'" is not dynamic.'),!1;if(!r.ck(b)&&!r.check_shape_keys(b)&&f)return c.error('object "'+b.name+'" has not dynamic geometry for deep copying.'),!1;var h=a.tc(l.get_active(),"MESH",a.DATA_ID_ALL);return-1==h.indexOf(b)&&(h=a.tc(l.get_active(),"EMPTY",a.DATA_ID_ALL),
-1==h.indexOf(b))?(c.error('object "'+b.name+'" does not belong to the active scene.'),!1):a.copy(b,d||"",f)};p.update_boundings=function(b){k.is_mesh(b)?r.ck(b)||r.check_shape_keys(b)?a.update_boundings(b):c.error('object "'+b.name+'" has not dynamic geometry.'):c.error('The type of the object "'+b.name+'" is not "MESH".')};p.get_parent=k.get_parent;p.get_dg_parent=k.get_dg_parent;p.is_mesh=k.is_mesh;p.is_armature=k.is_armature;p.is_speaker=k.is_speaker;p.is_camera=k.is_camera;p.is_lamp=k.is_lamp;
p.is_empty=k.is_empty;p.is_line=k.is_line;p.is_world=k.is_world;p.get_selectable_objects=function(){return a.get_selectable_objects()};p.get_outlining_objects=function(){return a.get_outlining_objects()};p.is_dynamic=k.is_dynamic;p.set_wind_bending_params=function(b,d){if(k.kc(b)){var f=b.ka;if(f.yf){if("number"==typeof d.angle){var h=w.GJ(v.T(d.angle),f.Jj,C.i(f.na));f.Cg=h}"number"==typeof d.main_frequency&&(f.Dg=d.main_frequency);"number"==typeof d.detail_frequency&&(f.ig=d.detail_frequency);"number"==
typeof d.detail_amplitude&&(f.hg=d.detail_amplitude);"number"==typeof d.branch_amplitude&&(f.cg=d.branch_amplitude);a.wT(b)}else c.error('The "'+b.name+"\" object doesn't have wind bending parameters.")}else c.error('The type of the object "'+b.name+'" is not "MESH" or it is not dynamic.')};p.get_wind_bending_params=function(a){a=a.ka;if(!a.yf)return null;var b={},c=v._39(w.KV(a.Cg,a.Jj,C.i(a.na)));b.angle=c;b.main_frequency=a.Dg;b.detail_frequency=a.ig;b.detail_amplitude=a.hg;b.branch_amplitude=
a.cg;return b};p.create_line=function(b){return a.create_line(b)};p.create_empty=function(b){return a.create_empty(b)};p.hide_all_by_data_id=function(b){b=a.get_all_objects("ALL",b);for(var c=0;c<b.length;c++)l.Bm(b[c],!0)};p.show_all_by_data_id=function(b){b=a.get_all_objects("ALL",b);for(var c=0;c<b.length;c++)l.Bm(b[c],!1)}});w.a=f},function(D,w,f){D=f(0);var N=f(47),U=f(1);f=Object(D.a)("particles",function(f,w){var d=Object(N.a)(f),m=Object(U.a)(f);w.set_size=function(f,n,r){d.lB(f,n)?d.set_size(f,
n,r):m.error('set_size(): Object "'+f.name+'" has not a particle system named "'+n+'"')};w.set_normal_factor=function(f,n,r){d.lB(f,n)?d.set_normal_factor(f,n,r):m.error('set_normal_factor(): Object "'+f.name+'" has not a particle system named "'+n+'"')};w.set_factor=function(f,n,r){d.lB(f,n)?(r=Math.min(r,1),r=Math.max(r,0),d.set_factor(f,n,r)):m.error('set_factor(): Object "'+f.name+'" has not a particle system named "'+n+'"')}});w.a=f},function(D,w,f){D=f(0);var N=f(2);f=Object(D.a)("rgb",function(f,
n){var w=new Float32Array(3);n.create=function(){return new Float32Array(3)};n.from_values=function(d,f,n){var m=new Float32Array(3);m[0]=d;m[1]=f;m[2]=n;return m};n.set=function(d,f,n,v){v[0]=d;v[1]=f;v[2]=n;return v};n.css_to_rgb=function(d,f,n,v){v=v||new Float32Array(3);v[0]=d/255;v[1]=f/255;v[2]=n/255;N._57(v,v);return v};n.rgb_to_css=function(d){d=N._21(d,w);return[Math.round(255*d[0]),Math.round(255*d[1]),Math.round(255*d[2])]};n.rgb_to_css_hex=function(d){function f(d){d=Math.round(255*d).toString(16);
return 1==d.length?"0"+d:d}d=N._21(d,w);return"#"+f(d[0])+f(d[1])+f(d[2])}});w.a=f},function(D,w,f){D=f(0);var N=f(1),U=f(10),n=f(17),y=f(9),d=f(44),m=f(48);f=Object(D.a)("textures",function(f,v){var r=Object(N.a)(f),p=Object(U.a)(f),w=Object(n.a)(f),a=Object(y.a)(f),C=Object(d.a)(f);v.play_video=function(a,c){c||(c=0);(c=w.lA(a,c))?p.get_active().b4w_use_nla&&w.PC(c)?r.error("NLA texture can't be controlled directly through API."):w.play_video(c):r.error('Texture with name "'+a+'" not found!')};
v.pause_video=function(a,c){c||(c=0);(c=w.lA(a,c))?p.get_active().b4w_use_nla&&w.PC(c)?r.error("NLA texture can't be controlled directly through API."):w.pause_video(c):r.error('Texture with name "'+a+'" not found!')};v.reset_video=function(a,c){c||(c=0);(c=w.lA(a,c))?p.get_active().b4w_use_nla&&w.PC(c)?r.error("NLA texture can't be controlled directly through API."):w.reset_video(c):r.error('Texture with name "'+a+'" not found!')};v.get_canvas_ctx=function(d,c){if(a.is_mesh(d)){if(d=w.UP(d,c))return d;
r.error("Couldn't find canvas texture with this name: "+c)}else r.error("Object must be type of mesh.");return null};v.update_canvas_ctx=function(d,c){if(!a.is_mesh(d))return r.error("Object must be type of mesh."),!1;var f=w.wv(d,c);if(!f||"CANVAS"!=f.source)return r.error("Couldn't find canvas texture \""+c+'" in object "'+d.name+'".'),!1;w.lV(f);return!0};v.change_image=function(a,c,d,b){r.ef("change_image","replace_image");b=b||function(){};var f=w.wv(a,c);if(f)if(f.ej)r.error("Changing video textures is forbidden."),
b(!1);else{var k=Object(m.b)(d);f.ol==k?b(!0):C.enqueue([{id:d,type:C.AT_IMAGE_ELEMENT,url:d,request_method:"GET"}],function(h){h?(w.change_image(a,f,c,h,d),b(!0)):b(!1)},null,null)}else r.error("Couldn't find texture \""+c+'" in object "'+a.name+'".'),b(!1)};v.replace_image=function(a,c,d,b){b=b||function(){};var f=w.wv(a,c);if(f)if(f.ej)r.error("Changing video textures is forbidden."),b(!1);else if("src"in d){var k=d.src;if(d.complete)w.change_image(a,f,c,d,k),b(!0);else{var l=d.onload,m=d.onerror;
d.onload=function(){l&&l.call(d);w.change_image(a,f,c,d,k);b(!0)};d.onerror=function(){m&&m.call(d);b(!1)}}}else r.error("Incorrect image."),b(!1);else r.error("Couldn't find texture \""+c+'" in object "'+a.name+'".'),b(!1)};v.get_texture_names=function(d){if(a.is_mesh(d))return w.get_texture_names(d);r.error("Object must be type of mesh.");return[]}});w.a=f},function(D,w,f){D=f(0);var N=f(37);f=Object(D.a)("version",function(f,n){n.version=N.e;n.version_str=N.f;n.type=N.d;n.date=N.a;n.date_str=N.b;
n.get_build_version=N.c});w.a=f}]);
//# sourceMappingURL=/dist/b4w.min.js.map